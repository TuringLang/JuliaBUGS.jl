<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DoodleBUGS Widget - Embedded Article Example</title>
    <link rel="stylesheet" href="../../dist-lib/doodlebugs.css">

    <!-- MathJax Configuration for rendering LaTeX -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <script type="module" src="../../dist-lib/doodlebugs.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            line-height: 1.8;
            color: #333;
            background: #fafafa;
        }

        .article-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            padding: 60px 0 0;
            /* top | left-right | bottom */
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 40px;
        }


        h1 {
            font-size: 2.5rem;
            font-weight: 400;
            margin-bottom: 20px;
            color: #1a1a1a;
        }

        .meta {
            color: #666;
            font-size: 0.9rem;
        }

        h2 {
            font-size: 1.6rem;
            font-weight: 600;
            margin: 40px 0 20px;
            color: #1a1a1a;
        }

        p {
            margin-bottom: 20px;
            font-size: 1.1rem;
            text-align: justify;
            overflow-wrap: break-word;
            word-wrap: break-word;
            hyphens: auto;
        }

        .widget-section {
            margin: 60px 0;
            padding: 30px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .widget-section h3 {
            font-size: 1.2rem;
            color: #10b981;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .widget-container {
            width: 100%;
            height: 500px;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #e5e7eb;
        }

        .callout {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 20px;
            margin: 30px 0;
            border-radius: 0 8px 8px 0;
        }

        .callout p {
            margin: 0;
            font-style: italic;
        }

        code {
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }

        footer {
            text-align: center;
            padding: 40px 0;
            border-top: 1px solid #e0e0e0;
            margin-top: 60px;
            color: #666;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .article-container {
                padding: 20px 12px;
            }
            h1 {
                font-size: 1.8rem;
            }
            h2 {
                font-size: 1.3rem;
            }
            p {
                font-size: 1rem;
                text-align: left;
            }
            .widget-section {
                padding: 16px;
                margin: 40px 0;
            }
            .widget-container {
                height: 400px;
            }
        }
    </style>
</head>

<body>
    <div class="article-container">
        <header>
            <h1>Introduction to Bayesian Graphical Models</h1>
            <p class="meta">Published: December 2024 · 10 min read</p>
        </header>

        <article>
            <p>Bayesian graphical models represent a powerful framework for reasoning under uncertainty. They combine
                the mathematical rigor of probability theory with the intuitive representation of dependencies through
                directed graphs. In this article, we will explore the core concepts, learn how to visualize them, and
                examine real-world examples.</p>

            <!-- Section 1: Theory and First Example -->
            <h2>What are Graphical Models?</h2>

            <p>A graphical model is a probabilistic model where a graph expresses the conditional dependence structure
                between random variables. The graph consists of nodes representing variables and edges representing
                probabilistic dependencies between them.</p>

            <div class="callout">
                <p>"The great power of graphical models lies in their ability to represent complex joint probability
                    distributions through simple local relationships."</p>
            </div>

            <p>There are two main types of graphical models: directed graphical models (also known as Bayesian networks)
                and undirected graphical models (also known as Markov random fields). We focus here on directed acyclic
                graphs (DAGs).</p>

            <!-- Example 1: Pumps (Simple Conjugate) -->
            <div class="widget-section">
                <h3>Pumps: conjugate gamma-Poisson hierarchical model</h3>
                <p>To understand the utility of these models, let's look at the <strong>Pumps</strong> example (George
                    et al., 1993). This model analyzes the failure rates of 10 pumps in a nuclear power plant. </p>
                <p>This is a conjugate gamma-Poisson hierarchical model. The number of failures ($x_i$) for each pump is
                    modeled using a Poisson distribution: $x_i \sim Poisson(\theta_i t_i)$. Crucially, the failure rates
                    ($\theta_i$) are drawn from a common Gamma prior, $\theta_i \sim Gamma(\alpha, \beta)$, with
                    hyperparameters $\alpha$ and $\beta$ given Exponential and Gamma priors respectively. This structure
                    leads to a non-standard posterior for $\alpha$, necessitating the use of Gibbs sampling.</p>
                <div class="widget-container">
                    <doodle-bugs
                        model="https://raw.githubusercontent.com/shravanngoswamii/experimental/refs/heads/main/DoodlePPL/models/pumps.json"></doodle-bugs>
                </div>
            </div>

            <!-- Example 2: Rats (Growth) -->
            <div class="widget-section">
                <h3>Rats: a normal hierarchical model</h3>
                <p>Now let's look at a temporal model from Gelfand et al. (1990). The <strong>Rats</strong> example
                    tracks the weight of 30 rats measured weekly over five weeks.</p>
                <p>This is a random effects linear growth curve model. The weights $Y_{ij}$ are normally distributed
                    with a mean that is a linear function of time: $\alpha_i + \beta_i(x_j - \bar{x})$. Note that the
                    time points $x_j$ are standardized around their mean ($\bar{x} = 22$) to reduce dependence between
                    the intercept $\alpha_i$ and slope $\beta_i$. We estimate these random effects to capture both
                    individual trajectories and population-level growth.</p>
                <div class="widget-container">
                    <doodle-bugs
                        model="https://raw.githubusercontent.com/shravanngoswamii/experimental/refs/heads/main/DoodlePPL/models/rats.json"></doodle-bugs>
                </div>
            </div>

            <!-- Section 3: Benefits and Final Example -->
            <h2>Why Use Graphical Models?</h2>

            <p>As seen in the examples above, graphical models offer distinct advantages:</p>

            <p><strong>Interpretability:</strong> The visual structure makes it easy to understand the relationships
                between variables. In the Rats model, seeing the connection between the population mean and individual
                rats helps clarify the hierarchical assumption.</p>

            <p><strong>Modularity:</strong> Complex models can be built from simpler components. We can easily add a new
                layer to our hierarchy without rewriting the entire mathematical derivation.</p>

            <!-- Example 3: Seeds (Complex) -->
            <div class="widget-section">
                <h3>Seeds: Random effect logistic regression</h3>
                <p>Finally, let's look at a random effects logistic regression from Crowder (1978). The
                    <strong>Seeds</strong> example investigates germination rates across 21 plates arranged in a 2x2
                    factorial design by seed type and root extract.</p>
                <p>The model accounts for <em>overdispersion</em>—variation greater than expected in a standard Binomial
                    distribution—by introducing a random effect term $b_i$ for each plate. The probability of
                    germination is modeled as $logit(p_i) = \alpha_0 + \alpha_1 x_{1i} + \alpha_2 x_{2i} + \alpha_{12}
                    x_{1i}x_{2i} + b_i$, where $b_i \sim Normal(0, \tau)$, effectively capturing the unobserved
                    heterogeneity.</p>
                <doodle-bugs
                    model="https://raw.githubusercontent.com/shravanngoswamii/experimental/refs/heads/main/DoodlePPL/models/seeds.json"
                    height="500px"></doodle-bugs>
            </div>

            <!-- Section 4: Under the Hood (Technical Implementation) -->
            <h2>Under the Hood: The BUGS Language</h2>

            <p>BUGS (Bayesian inference Using Gibbs Sampling) is a probabilistic programming language for specifying
                statistical models. The visual representations in the widgets above are automatically converted to valid
                BUGS code that can be executed in various inference engines.</p>

            <p>For example, a simple hierarchical model might look like this:</p>

            <pre><code>model {
  for (i in 1:N) {
    y[i] ~ dnorm(mu, tau)
  }
  mu ~ dnorm(0, 0.001)
  tau ~ dgamma(0.001, 0.001)
}</code></pre>

            <h3>Getting Started with JuliaBUGS</h3>

            <p>JuliaBUGS is a Julia implementation of the BUGS language that provides efficient inference for Bayesian
                graphical models. Combined with the DoodleBUGS visual editor, it offers a complete workflow from model
                design to inference.</p>

            <p>The widgets you see above are designed to integrate seamlessly with JuliaBUGS, allowing you to export
                your
                visual models as executable Julia code. This bridges the gap between intuitive model building and
                production-ready code.</p>

            <h2>Conclusion</h2>

            <p>Bayesian graphical models provide a principled way to reason about uncertainty. With tools like
                DoodleBUGS and JuliaBUGS, building and running these models has never been more accessible. We encourage
                you to explore the interactive widgets above to deepen your understanding of probabilistic modeling.</p>
        </article>

        <footer>
            <p>Built with DoodleBUGS · Part of the JuliaBUGS Project</p>
        </footer>
    </div>
</body>

</html>