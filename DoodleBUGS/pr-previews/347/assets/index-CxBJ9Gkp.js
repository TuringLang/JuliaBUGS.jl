(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();/**
* @vue/shared v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function e1(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const nr={},ds=[],Sa=()=>{},MI=()=>!1,uc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),t1=t=>t.startsWith("onUpdate:"),Yr=Object.assign,r1=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},RI=Object.prototype.hasOwnProperty,Wt=(t,e)=>RI.call(t,e),wt=Array.isArray,hs=t=>tu(t)==="[object Map]",fc=t=>tu(t)==="[object Set]",lC=t=>tu(t)==="[object Date]",St=t=>typeof t=="function",Tr=t=>typeof t=="string",sa=t=>typeof t=="symbol",er=t=>t!==null&&typeof t=="object",mR=t=>(er(t)||St(t))&&St(t.then)&&St(t.catch),bR=Object.prototype.toString,tu=t=>bR.call(t),PI=t=>tu(t).slice(8,-1),wR=t=>tu(t)==="[object Object]",n1=t=>Tr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ll=e1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cc=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},kI=/-(\w)/g,Si=cc(t=>t.replace(kI,(e,r)=>r?r.toUpperCase():"")),NI=/\B([A-Z])/g,Oi=cc(t=>t.replace(NI,"-$1").toLowerCase()),xR=cc(t=>t.charAt(0).toUpperCase()+t.slice(1)),eh=cc(t=>t?`on${xR(t)}`:""),xi=(t,e)=>!Object.is(t,e),mf=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},CR=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},mb=t=>{const e=parseFloat(t);return isNaN(e)?t:e},OI=t=>{const e=Tr(t)?Number(t):NaN;return isNaN(e)?t:e};let uC;const dc=()=>uC||(uC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ci(t){if(wt(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],a=Tr(n)?qI(n):Ci(n);if(a)for(const i in a)e[i]=a[i]}return e}else if(Tr(t)||er(t))return t}const II=/;(?![^(]*\))/g,FI=/:([^]+)/,BI=/\/\*[^]*?\*\//g;function qI(t){const e={};return t.replace(BI,"").split(II).forEach(r=>{if(r){const n=r.split(FI);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Kt(t){let e="";if(Tr(t))e=t;else if(wt(t))for(let r=0;r<t.length;r++){const n=Kt(t[r]);n&&(e+=n+" ")}else if(er(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const zI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",GI=e1(zI);function ER(t){return!!t||t===""}function HI(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=hc(t[n],e[n]);return r}function hc(t,e){if(t===e)return!0;let r=lC(t),n=lC(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=sa(t),n=sa(e),r||n)return t===e;if(r=wt(t),n=wt(e),r||n)return r&&n?HI(t,e):!1;if(r=er(t),n=er(e),r||n){if(!r||!n)return!1;const a=Object.keys(t).length,i=Object.keys(e).length;if(a!==i)return!1;for(const o in t){const s=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(s&&!u||!s&&u||!hc(t[o],e[o]))return!1}}return String(t)===String(e)}function TR(t,e){return t.findIndex(r=>hc(r,e))}const SR=t=>!!(t&&t.__v_isRef===!0),ur=t=>Tr(t)?t:t==null?"":wt(t)||er(t)&&(t.toString===bR||!St(t.toString))?SR(t)?ur(t.value):JSON.stringify(t,AR,2):String(t),AR=(t,e)=>SR(e)?AR(t,e.value):hs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,a],i)=>(r[th(n,i)+" =>"]=a,r),{})}:fc(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>th(r))}:sa(e)?th(e):er(e)&&!wt(e)&&!wR(e)?String(e):e,th=(t,e="")=>{var r;return sa(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fn;class LR{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fn,!e&&fn&&(this.index=(fn.scopes||(fn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=fn;try{return fn=this,e()}finally{fn=r}}}on(){++this._on===1&&(this.prevScope=fn,fn=this)}off(){this._on>0&&--this._on===0&&(fn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function DR(t){return new LR(t)}function _R(){return fn}function UI(t,e=!1){fn&&fn.cleanups.push(t)}let or;const rh=new WeakSet;class MR{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fn&&fn.active&&fn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,rh.has(this)&&(rh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||PR(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fC(this),kR(this);const e=or,r=ia;or=this,ia=!0;try{return this.fn()}finally{NR(this),or=e,ia=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)o1(e);this.deps=this.depsTail=void 0,fC(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?rh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){bb(this)&&this.run()}get dirty(){return bb(this)}}let RR=0,Dl,_l;function PR(t,e=!1){if(t.flags|=8,e){t.next=_l,_l=t;return}t.next=Dl,Dl=t}function a1(){RR++}function i1(){if(--RR>0)return;if(_l){let e=_l;for(_l=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;Dl;){let e=Dl;for(Dl=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function kR(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function NR(t){let e,r=t.depsTail,n=r;for(;n;){const a=n.prevDep;n.version===-1?(n===r&&(r=a),o1(n),VI(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=a}t.deps=e,t.depsTail=r}function bb(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(OR(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function OR(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Fl)||(t.globalVersion=Fl,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!bb(t))))return;t.flags|=2;const e=t.dep,r=or,n=ia;or=t,ia=!0;try{kR(t);const a=t.fn(t._value);(e.version===0||xi(a,t._value))&&(t.flags|=128,t._value=a,e.version++)}catch(a){throw e.version++,a}finally{or=r,ia=n,NR(t),t.flags&=-3}}function o1(t,e=!1){const{dep:r,prevSub:n,nextSub:a}=t;if(n&&(n.nextSub=a,t.prevSub=void 0),a&&(a.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)o1(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function VI(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let ia=!0;const IR=[];function Ka(){IR.push(ia),ia=!1}function ja(){const t=IR.pop();ia=t===void 0?!0:t}function fC(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=or;or=void 0;try{e()}finally{or=r}}}let Fl=0;class WI{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class s1{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!or||!ia||or===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==or)r=this.activeLink=new WI(or,this),or.deps?(r.prevDep=or.depsTail,or.depsTail.nextDep=r,or.depsTail=r):or.deps=or.depsTail=r,FR(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=or.depsTail,r.nextDep=void 0,or.depsTail.nextDep=r,or.depsTail=r,or.deps===r&&(or.deps=n)}return r}trigger(e){this.version++,Fl++,this.notify(e)}notify(e){a1();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{i1()}}}function FR(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)FR(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const Bf=new WeakMap,go=Symbol(""),wb=Symbol(""),Bl=Symbol("");function cn(t,e,r){if(ia&&or){let n=Bf.get(t);n||Bf.set(t,n=new Map);let a=n.get(r);a||(n.set(r,a=new s1),a.map=n,a.key=r),a.track()}}function Wa(t,e,r,n,a,i){const o=Bf.get(t);if(!o){Fl++;return}const s=u=>{u&&u.trigger()};if(a1(),e==="clear")o.forEach(s);else{const u=wt(t),f=u&&n1(r);if(u&&r==="length"){const c=Number(n);o.forEach((h,p)=>{(p==="length"||p===Bl||!sa(p)&&p>=c)&&s(h)})}else switch((r!==void 0||o.has(void 0))&&s(o.get(r)),f&&s(o.get(Bl)),e){case"add":u?f&&s(o.get("length")):(s(o.get(go)),hs(t)&&s(o.get(wb)));break;case"delete":u||(s(o.get(go)),hs(t)&&s(o.get(wb)));break;case"set":hs(t)&&s(o.get(go));break}}i1()}function $I(t,e){const r=Bf.get(t);return r&&r.get(e)}function Zo(t){const e=Nt(t);return e===t?e:(cn(e,"iterate",Bl),Yn(t)?e:e.map(Jr))}function vc(t){return cn(t=Nt(t),"iterate",Bl),t}const YI={__proto__:null,[Symbol.iterator](){return nh(this,Symbol.iterator,Jr)},concat(...t){return Zo(this).concat(...t.map(e=>wt(e)?Zo(e):e))},entries(){return nh(this,"entries",t=>(t[1]=Jr(t[1]),t))},every(t,e){return qa(this,"every",t,e,void 0,arguments)},filter(t,e){return qa(this,"filter",t,e,r=>r.map(Jr),arguments)},find(t,e){return qa(this,"find",t,e,Jr,arguments)},findIndex(t,e){return qa(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return qa(this,"findLast",t,e,Jr,arguments)},findLastIndex(t,e){return qa(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return qa(this,"forEach",t,e,void 0,arguments)},includes(...t){return ah(this,"includes",t)},indexOf(...t){return ah(this,"indexOf",t)},join(t){return Zo(this).join(t)},lastIndexOf(...t){return ah(this,"lastIndexOf",t)},map(t,e){return qa(this,"map",t,e,void 0,arguments)},pop(){return fl(this,"pop")},push(...t){return fl(this,"push",t)},reduce(t,...e){return cC(this,"reduce",t,e)},reduceRight(t,...e){return cC(this,"reduceRight",t,e)},shift(){return fl(this,"shift")},some(t,e){return qa(this,"some",t,e,void 0,arguments)},splice(...t){return fl(this,"splice",t)},toReversed(){return Zo(this).toReversed()},toSorted(t){return Zo(this).toSorted(t)},toSpliced(...t){return Zo(this).toSpliced(...t)},unshift(...t){return fl(this,"unshift",t)},values(){return nh(this,"values",Jr)}};function nh(t,e,r){const n=vc(t),a=n[e]();return n!==t&&!Yn(t)&&(a._next=a.next,a.next=()=>{const i=a._next();return i.value&&(i.value=r(i.value)),i}),a}const XI=Array.prototype;function qa(t,e,r,n,a,i){const o=vc(t),s=o!==t&&!Yn(t),u=o[e];if(u!==XI[e]){const h=u.apply(t,i);return s?Jr(h):h}let f=r;o!==t&&(s?f=function(h,p){return r.call(this,Jr(h),p,t)}:r.length>2&&(f=function(h,p){return r.call(this,h,p,t)}));const c=u.call(o,f,n);return s&&a?a(c):c}function cC(t,e,r,n){const a=vc(t);let i=r;return a!==t&&(Yn(t)?r.length>3&&(i=function(o,s,u){return r.call(this,o,s,u,t)}):i=function(o,s,u){return r.call(this,o,Jr(s),u,t)}),a[e](i,...n)}function ah(t,e,r){const n=Nt(t);cn(n,"iterate",Bl);const a=n[e](...r);return(a===-1||a===!1)&&f1(r[0])?(r[0]=Nt(r[0]),n[e](...r)):a}function fl(t,e,r=[]){Ka(),a1();const n=Nt(t)[e].apply(t,r);return i1(),ja(),n}const KI=e1("__proto__,__v_isRef,__isVue"),BR=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(sa));function jI(t){sa(t)||(t=String(t));const e=Nt(this);return cn(e,"has",t),e.hasOwnProperty(t)}class qR{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const a=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(a?i?oF:UR:i?HR:GR).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=wt(e);if(!a){let u;if(o&&(u=YI[r]))return u;if(r==="hasOwnProperty")return jI}const s=Reflect.get(e,r,gr(e)?e:n);return(sa(r)?BR.has(r):KI(r))||(a||cn(e,"get",r),i)?s:gr(s)?o&&n1(r)?s:s.value:er(s)?a?VR(s):pc(s):s}}class zR extends qR{constructor(e=!1){super(!1,e)}set(e,r,n,a){let i=e[r];if(!this._isShallow){const u=Ai(i);if(!Yn(n)&&!Ai(n)&&(i=Nt(i),n=Nt(n)),!wt(e)&&gr(i)&&!gr(n))return u?!1:(i.value=n,!0)}const o=wt(e)&&n1(r)?Number(r)<e.length:Wt(e,r),s=Reflect.set(e,r,n,gr(e)?e:a);return e===Nt(a)&&(o?xi(n,i)&&Wa(e,"set",r,n):Wa(e,"add",r,n)),s}deleteProperty(e,r){const n=Wt(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&n&&Wa(e,"delete",r,void 0),a}has(e,r){const n=Reflect.has(e,r);return(!sa(r)||!BR.has(r))&&cn(e,"has",r),n}ownKeys(e){return cn(e,"iterate",wt(e)?"length":go),Reflect.ownKeys(e)}}class ZI extends qR{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const QI=new zR,JI=new ZI,eF=new zR(!0);const xb=t=>t,Qu=t=>Reflect.getPrototypeOf(t);function tF(t,e,r){return function(...n){const a=this.__v_raw,i=Nt(a),o=hs(i),s=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,f=a[t](...n),c=r?xb:e?qf:Jr;return!e&&cn(i,"iterate",u?wb:go),{next(){const{value:h,done:p}=f.next();return p?{value:h,done:p}:{value:s?[c(h[0]),c(h[1])]:c(h),done:p}},[Symbol.iterator](){return this}}}}function Ju(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function rF(t,e){const r={get(a){const i=this.__v_raw,o=Nt(i),s=Nt(a);t||(xi(a,s)&&cn(o,"get",a),cn(o,"get",s));const{has:u}=Qu(o),f=e?xb:t?qf:Jr;if(u.call(o,a))return f(i.get(a));if(u.call(o,s))return f(i.get(s));i!==o&&i.get(a)},get size(){const a=this.__v_raw;return!t&&cn(Nt(a),"iterate",go),Reflect.get(a,"size",a)},has(a){const i=this.__v_raw,o=Nt(i),s=Nt(a);return t||(xi(a,s)&&cn(o,"has",a),cn(o,"has",s)),a===s?i.has(a):i.has(a)||i.has(s)},forEach(a,i){const o=this,s=o.__v_raw,u=Nt(s),f=e?xb:t?qf:Jr;return!t&&cn(u,"iterate",go),s.forEach((c,h)=>a.call(i,f(c),f(h),o))}};return Yr(r,t?{add:Ju("add"),set:Ju("set"),delete:Ju("delete"),clear:Ju("clear")}:{add(a){!e&&!Yn(a)&&!Ai(a)&&(a=Nt(a));const i=Nt(this);return Qu(i).has.call(i,a)||(i.add(a),Wa(i,"add",a,a)),this},set(a,i){!e&&!Yn(i)&&!Ai(i)&&(i=Nt(i));const o=Nt(this),{has:s,get:u}=Qu(o);let f=s.call(o,a);f||(a=Nt(a),f=s.call(o,a));const c=u.call(o,a);return o.set(a,i),f?xi(i,c)&&Wa(o,"set",a,i):Wa(o,"add",a,i),this},delete(a){const i=Nt(this),{has:o,get:s}=Qu(i);let u=o.call(i,a);u||(a=Nt(a),u=o.call(i,a)),s&&s.call(i,a);const f=i.delete(a);return u&&Wa(i,"delete",a,void 0),f},clear(){const a=Nt(this),i=a.size!==0,o=a.clear();return i&&Wa(a,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=tF(a,t,e)}),r}function l1(t,e){const r=rF(t,e);return(n,a,i)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?n:Reflect.get(Wt(r,a)&&a in n?r:n,a,i)}const nF={get:l1(!1,!1)},aF={get:l1(!1,!0)},iF={get:l1(!0,!1)};const GR=new WeakMap,HR=new WeakMap,UR=new WeakMap,oF=new WeakMap;function sF(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lF(t){return t.__v_skip||!Object.isExtensible(t)?0:sF(PI(t))}function pc(t){return Ai(t)?t:u1(t,!1,QI,nF,GR)}function uF(t){return u1(t,!1,eF,aF,HR)}function VR(t){return u1(t,!0,JI,iF,UR)}function u1(t,e,r,n,a){if(!er(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=lF(t);if(i===0)return t;const o=a.get(t);if(o)return o;const s=new Proxy(t,i===2?n:r);return a.set(t,s),s}function Xa(t){return Ai(t)?Xa(t.__v_raw):!!(t&&t.__v_isReactive)}function Ai(t){return!!(t&&t.__v_isReadonly)}function Yn(t){return!!(t&&t.__v_isShallow)}function f1(t){return t?!!t.__v_raw:!1}function Nt(t){const e=t&&t.__v_raw;return e?Nt(e):t}function c1(t){return!Wt(t,"__v_skip")&&Object.isExtensible(t)&&CR(t,"__v_skip",!0),t}const Jr=t=>er(t)?pc(t):t,qf=t=>er(t)?VR(t):t;function gr(t){return t?t.__v_isRef===!0:!1}function bt(t){return fF(t,!1)}function fF(t,e){return gr(t)?t:new cF(t,e)}class cF{constructor(e,r){this.dep=new s1,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Nt(e),this._value=r?e:Jr(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Yn(e)||Ai(e);e=n?e:Nt(e),xi(e,r)&&(this._rawValue=e,this._value=n?e:Jr(e),this.dep.trigger())}}function Vt(t){return gr(t)?t.value:t}const dF={get:(t,e,r)=>e==="__v_raw"?t:Vt(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const a=t[e];return gr(a)&&!gr(r)?(a.value=r,!0):Reflect.set(t,e,r,n)}};function WR(t){return Xa(t)?t:new Proxy(t,dF)}function hF(t){const e=wt(t)?new Array(t.length):{};for(const r in t)e[r]=$R(t,r);return e}class vF{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return $I(Nt(this._object),this._key)}}class pF{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function gF(t,e,r){return gr(t)?t:St(t)?new pF(t):er(t)&&arguments.length>1?$R(t,e,r):bt(t)}function $R(t,e,r){const n=t[e];return gr(n)?n:new vF(t,e,r)}class yF{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new s1(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Fl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&or!==this)return PR(this,!0),!0}get value(){const e=this.dep.track();return OR(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function mF(t,e,r=!1){let n,a;return St(t)?n=t:(n=t.get,a=t.set),new yF(n,a,r)}const ef={},zf=new WeakMap;let oo;function bF(t,e=!1,r=oo){if(r){let n=zf.get(r);n||zf.set(r,n=[]),n.push(t)}}function wF(t,e,r=nr){const{immediate:n,deep:a,once:i,scheduler:o,augmentJob:s,call:u}=r,f=S=>a?S:Yn(S)||a===!1||a===0?$a(S,1):$a(S);let c,h,p,y,g=!1,E=!1;if(gr(t)?(h=()=>t.value,g=Yn(t)):Xa(t)?(h=()=>f(t),g=!0):wt(t)?(E=!0,g=t.some(S=>Xa(S)||Yn(S)),h=()=>t.map(S=>{if(gr(S))return S.value;if(Xa(S))return f(S);if(St(S))return u?u(S,2):S()})):St(t)?e?h=u?()=>u(t,2):t:h=()=>{if(p){Ka();try{p()}finally{ja()}}const S=oo;oo=c;try{return u?u(t,3,[y]):t(y)}finally{oo=S}}:h=Sa,e&&a){const S=h,A=a===!0?1/0:a;h=()=>$a(S(),A)}const w=_R(),v=()=>{c.stop(),w&&w.active&&r1(w.effects,c)};if(i&&e){const S=e;e=(...A)=>{S(...A),v()}}let C=E?new Array(t.length).fill(ef):ef;const x=S=>{if(!(!(c.flags&1)||!c.dirty&&!S))if(e){const A=c.run();if(a||g||(E?A.some((D,_)=>xi(D,C[_])):xi(A,C))){p&&p();const D=oo;oo=c;try{const _=[A,C===ef?void 0:E&&C[0]===ef?[]:C,y];C=A,u?u(e,3,_):e(..._)}finally{oo=D}}}else c.run()};return s&&s(x),c=new MR(h),c.scheduler=o?()=>o(x,!1):x,y=S=>bF(S,!1,c),p=c.onStop=()=>{const S=zf.get(c);if(S){if(u)u(S,4);else for(const A of S)A();zf.delete(c)}},e?n?x(!0):C=c.run():o?o(x.bind(null,!0),!0):c.run(),v.pause=c.pause.bind(c),v.resume=c.resume.bind(c),v.stop=v,v}function $a(t,e=1/0,r){if(e<=0||!er(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,gr(t))$a(t.value,e,r);else if(wt(t))for(let n=0;n<t.length;n++)$a(t[n],e,r);else if(fc(t)||hs(t))t.forEach(n=>{$a(n,e,r)});else if(wR(t)){for(const n in t)$a(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&$a(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ru(t,e,r,n){try{return n?t(...n):t()}catch(a){gc(a,e,r)}}function la(t,e,r,n){if(St(t)){const a=ru(t,e,r,n);return a&&mR(a)&&a.catch(i=>{gc(i,e,r)}),a}if(wt(t)){const a=[];for(let i=0;i<t.length;i++)a.push(la(t[i],e,r,n));return a}}function gc(t,e,r,n=!0){const a=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||nr;if(e){let s=e.parent;const u=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${r}`;for(;s;){const c=s.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,u,f)===!1)return}s=s.parent}if(i){Ka(),ru(i,null,10,[t,u,f]),ja();return}}xF(t,r,a,n,o)}function xF(t,e,r,n=!0,a=!1){if(a)throw t;console.error(t)}const Sn=[];let Ca=-1;const vs=[];let yi=null,ss=0;const YR=Promise.resolve();let Gf=null;function nu(t){const e=Gf||YR;return t?e.then(this?t.bind(this):t):e}function CF(t){let e=Ca+1,r=Sn.length;for(;e<r;){const n=e+r>>>1,a=Sn[n],i=ql(a);i<t||i===t&&a.flags&2?e=n+1:r=n}return e}function d1(t){if(!(t.flags&1)){const e=ql(t),r=Sn[Sn.length-1];!r||!(t.flags&2)&&e>=ql(r)?Sn.push(t):Sn.splice(CF(e),0,t),t.flags|=1,XR()}}function XR(){Gf||(Gf=YR.then(jR))}function EF(t){wt(t)?vs.push(...t):yi&&t.id===-1?yi.splice(ss+1,0,t):t.flags&1||(vs.push(t),t.flags|=1),XR()}function dC(t,e,r=Ca+1){for(;r<Sn.length;r++){const n=Sn[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Sn.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function KR(t){if(vs.length){const e=[...new Set(vs)].sort((r,n)=>ql(r)-ql(n));if(vs.length=0,yi){yi.push(...e);return}for(yi=e,ss=0;ss<yi.length;ss++){const r=yi[ss];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}yi=null,ss=0}}const ql=t=>t.id==null?t.flags&2?-1:1/0:t.id;function jR(t){try{for(Ca=0;Ca<Sn.length;Ca++){const e=Sn[Ca];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ru(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ca<Sn.length;Ca++){const e=Sn[Ca];e&&(e.flags&=-2)}Ca=-1,Sn.length=0,KR(),Gf=null,(Sn.length||vs.length)&&jR()}}let Wr=null,ZR=null;function Hf(t){const e=Wr;return Wr=t,ZR=t&&t.type.__scopeId||null,e}function ct(t,e=Wr,r){if(!e||t._n)return t;const n=(...a)=>{n._d&&CC(-1);const i=Hf(e);let o;try{o=t(...a)}finally{Hf(i),n._d&&CC(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Vn(t,e){if(Wr===null)return t;const r=xc(Wr),n=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[i,o,s,u=nr]=e[a];i&&(St(i)&&(i={mounted:i,updated:i}),i.deep&&$a(o),n.push({dir:i,instance:r,value:o,oldValue:void 0,arg:s,modifiers:u}))}return t}function Ji(t,e,r,n){const a=t.dirs,i=e&&e.dirs;for(let o=0;o<a.length;o++){const s=a[o];i&&(s.oldValue=i[o].value);let u=s.dir[n];u&&(Ka(),la(u,r,8,[t.el,s,t,e]),ja())}}const TF=Symbol("_vte"),QR=t=>t.__isTeleport,mi=Symbol("_leaveCb"),tf=Symbol("_enterCb");function SF(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return La(()=>{t.isMounted=!0}),oP(()=>{t.isUnmounting=!0}),t}const Hn=[Function,Array],JR={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Hn,onEnter:Hn,onAfterEnter:Hn,onEnterCancelled:Hn,onBeforeLeave:Hn,onLeave:Hn,onAfterLeave:Hn,onLeaveCancelled:Hn,onBeforeAppear:Hn,onAppear:Hn,onAfterAppear:Hn,onAppearCancelled:Hn},eP=t=>{const e=t.subTree;return e.component?eP(e.component):e},AF={name:"BaseTransition",props:JR,setup(t,{slots:e}){const r=CB(),n=SF();return()=>{const a=e.default&&nP(e.default(),!0);if(!a||!a.length)return;const i=tP(a),o=Nt(t),{mode:s}=o;if(n.isLeaving)return ih(i);const u=hC(i);if(!u)return ih(i);let f=Cb(u,o,n,r,h=>f=h);u.type!==dn&&zl(u,f);let c=r.subTree&&hC(r.subTree);if(c&&c.type!==dn&&!fo(u,c)&&eP(r).type!==dn){let h=Cb(c,o,n,r);if(zl(c,h),s==="out-in"&&u.type!==dn)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave,c=void 0},ih(i);s==="in-out"&&u.type!==dn?h.delayLeave=(p,y,g)=>{const E=rP(n,c);E[String(c.key)]=c,p[mi]=()=>{y(),p[mi]=void 0,delete f.delayedLeave,c=void 0},f.delayedLeave=()=>{g(),delete f.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function tP(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==dn){e=r;break}}return e}const LF=AF;function rP(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function Cb(t,e,r,n,a){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:p,onLeave:y,onAfterLeave:g,onLeaveCancelled:E,onBeforeAppear:w,onAppear:v,onAfterAppear:C,onAppearCancelled:x}=e,S=String(t.key),A=rP(r,t),D=(k,F)=>{k&&la(k,n,9,F)},_=(k,F)=>{const G=F[1];D(k,F),wt(k)?k.every(B=>B.length<=1)&&G():k.length<=1&&G()},M={mode:o,persisted:s,beforeEnter(k){let F=u;if(!r.isMounted)if(i)F=w||u;else return;k[mi]&&k[mi](!0);const G=A[S];G&&fo(t,G)&&G.el[mi]&&G.el[mi](),D(F,[k])},enter(k){let F=f,G=c,B=h;if(!r.isMounted)if(i)F=v||f,G=C||c,B=x||h;else return;let q=!1;const R=k[tf]=P=>{q||(q=!0,P?D(B,[k]):D(G,[k]),M.delayedLeave&&M.delayedLeave(),k[tf]=void 0)};F?_(F,[k,R]):R()},leave(k,F){const G=String(t.key);if(k[tf]&&k[tf](!0),r.isUnmounting)return F();D(p,[k]);let B=!1;const q=k[mi]=R=>{B||(B=!0,F(),R?D(E,[k]):D(g,[k]),k[mi]=void 0,A[G]===t&&delete A[G])};A[G]=t,y?_(y,[k,q]):q()},clone(k){const F=Cb(k,e,r,n,a);return a&&a(F),F}};return M}function ih(t){if(yc(t))return t=Li(t),t.children=null,t}function hC(t){if(!yc(t))return QR(t.type)&&t.children?tP(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&St(r.default))return r.default()}}function zl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,zl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function nP(t,e=!1,r){let n=[],a=0;for(let i=0;i<t.length;i++){let o=t[i];const s=r==null?o.key:String(r)+String(o.key!=null?o.key:i);o.type===zt?(o.patchFlag&128&&a++,n=n.concat(nP(o.children,e,s))):(e||o.type!==dn)&&n.push(s!=null?Li(o,{key:s}):o)}if(a>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Dr(t,e){return St(t)?Yr({name:t.name},e,{setup:t}):t}function aP(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Uf(t,e,r,n,a=!1){if(wt(t)){t.forEach((g,E)=>Uf(g,e&&(wt(e)?e[E]:e),r,n,a));return}if(ps(n)&&!a){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Uf(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?xc(n.component):n.el,o=a?null:i,{i:s,r:u}=t,f=e&&e.r,c=s.refs===nr?s.refs={}:s.refs,h=s.setupState,p=Nt(h),y=h===nr?()=>!1:g=>Wt(p,g);if(f!=null&&f!==u&&(Tr(f)?(c[f]=null,y(f)&&(h[f]=null)):gr(f)&&(f.value=null)),St(u))ru(u,s,12,[o,c]);else{const g=Tr(u),E=gr(u);if(g||E){const w=()=>{if(t.f){const v=g?y(u)?h[u]:c[u]:u.value;a?wt(v)&&r1(v,i):wt(v)?v.includes(i)||v.push(i):g?(c[u]=[i],y(u)&&(h[u]=c[u])):(u.value=[i],t.k&&(c[t.k]=u.value))}else g?(c[u]=o,y(u)&&(h[u]=o)):E&&(u.value=o,t.k&&(c[t.k]=o))};o?(w.id=-1,In(w,r)):w()}}}dc().requestIdleCallback;dc().cancelIdleCallback;const ps=t=>!!t.type.__asyncLoader,yc=t=>t.type.__isKeepAlive;function DF(t,e){iP(t,"a",e)}function _F(t,e){iP(t,"da",e)}function iP(t,e,r=en){const n=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(mc(e,n,r),r){let a=r.parent;for(;a&&a.parent;)yc(a.parent.vnode)&&MF(n,e,r,a),a=a.parent}}function MF(t,e,r,n){const a=mc(e,t,n,!0);Da(()=>{r1(n[e],a)},r)}function mc(t,e,r=en,n=!1){if(r){const a=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ka();const s=au(r),u=la(e,r,t,o);return s(),ja(),u});return n?a.unshift(i):a.push(i),i}}const Ja=t=>(e,r=en)=>{(!Ul||t==="sp")&&mc(t,(...n)=>e(...n),r)},RF=Ja("bm"),La=Ja("m"),PF=Ja("bu"),kF=Ja("u"),oP=Ja("bum"),Da=Ja("um"),NF=Ja("sp"),OF=Ja("rtg"),IF=Ja("rtc");function FF(t,e=en){mc("ec",t,e)}const BF=Symbol.for("v-ndc");function Bn(t,e,r,n){let a;const i=r,o=wt(t);if(o||Tr(t)){const s=o&&Xa(t);let u=!1,f=!1;s&&(u=!Yn(t),f=Ai(t),t=vc(t)),a=new Array(t.length);for(let c=0,h=t.length;c<h;c++)a[c]=e(u?f?qf(Jr(t[c])):Jr(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){a=new Array(t);for(let s=0;s<t;s++)a[s]=e(s+1,s,void 0,i)}else if(er(t))if(t[Symbol.iterator])a=Array.from(t,(s,u)=>e(s,u,void 0,i));else{const s=Object.keys(t);a=new Array(s.length);for(let u=0,f=s.length;u<f;u++){const c=s[u];a[u]=e(t[c],c,u,i)}}else a=[];return a}function gs(t,e,r={},n,a){if(Wr.ce||Wr.parent&&ps(Wr.parent)&&Wr.parent.ce)return e!=="default"&&(r.name=e),rt(),ua(zt,null,[st("slot",r,n)],64);let i=t[e];i&&i._c&&(i._d=!1),rt();const o=i&&sP(i(r)),s=r.key||o&&o.key,u=ua(zt,{key:(s&&!sa(s)?s:`_${e}`)+""},o||[],o&&t._===1?64:-2);return!a&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),i&&i._c&&(i._d=!0),u}function sP(t){return t.some(e=>Hl(e)?!(e.type===dn||e.type===zt&&!sP(e.children)):!0)?t:null}const Eb=t=>t?LP(t)?xc(t):Eb(t.parent):null,Ml=Yr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Eb(t.parent),$root:t=>Eb(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>uP(t),$forceUpdate:t=>t.f||(t.f=()=>{d1(t.update)}),$nextTick:t=>t.n||(t.n=nu.bind(t.proxy)),$watch:t=>sB.bind(t)}),oh=(t,e)=>t!==nr&&!t.__isScriptSetup&&Wt(t,e),qF={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:a,props:i,accessCache:o,type:s,appContext:u}=t;let f;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return n[e];case 2:return a[e];case 4:return r[e];case 3:return i[e]}else{if(oh(n,e))return o[e]=1,n[e];if(a!==nr&&Wt(a,e))return o[e]=2,a[e];if((f=t.propsOptions[0])&&Wt(f,e))return o[e]=3,i[e];if(r!==nr&&Wt(r,e))return o[e]=4,r[e];Tb&&(o[e]=0)}}const c=Ml[e];let h,p;if(c)return e==="$attrs"&&cn(t.attrs,"get",""),c(t);if((h=s.__cssModules)&&(h=h[e]))return h;if(r!==nr&&Wt(r,e))return o[e]=4,r[e];if(p=u.config.globalProperties,Wt(p,e))return p[e]},set({_:t},e,r){const{data:n,setupState:a,ctx:i}=t;return oh(a,e)?(a[e]=r,!0):n!==nr&&Wt(n,e)?(n[e]=r,!0):Wt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:a,propsOptions:i}},o){let s;return!!r[o]||t!==nr&&Wt(t,o)||oh(e,o)||(s=i[0])&&Wt(s,o)||Wt(n,o)||Wt(Ml,o)||Wt(a.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Wt(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function vC(t){return wt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Tb=!0;function zF(t){const e=uP(t),r=t.proxy,n=t.ctx;Tb=!1,e.beforeCreate&&pC(e.beforeCreate,t,"bc");const{data:a,computed:i,methods:o,watch:s,provide:u,inject:f,created:c,beforeMount:h,mounted:p,beforeUpdate:y,updated:g,activated:E,deactivated:w,beforeDestroy:v,beforeUnmount:C,destroyed:x,unmounted:S,render:A,renderTracked:D,renderTriggered:_,errorCaptured:M,serverPrefetch:k,expose:F,inheritAttrs:G,components:B,directives:q,filters:R}=e;if(f&&GF(f,n,null),o)for(const I in o){const z=o[I];St(z)&&(n[I]=z.bind(r))}if(a){const I=a.call(r,r);er(I)&&(t.data=pc(I))}if(Tb=!0,i)for(const I in i){const z=i[I],ae=St(z)?z.bind(r,r):St(z.get)?z.get.bind(r,r):Sa,re=!St(z)&&St(z.set)?z.set.bind(r):Sa,K=Gt({get:ae,set:re});Object.defineProperty(n,I,{enumerable:!0,configurable:!0,get:()=>K.value,set:V=>K.value=V})}if(s)for(const I in s)lP(s[I],n,r,I);if(u){const I=St(u)?u.call(r):u;Reflect.ownKeys(I).forEach(z=>{YF(z,I[z])})}c&&pC(c,t,"c");function N(I,z){wt(z)?z.forEach(ae=>I(ae.bind(r))):z&&I(z.bind(r))}if(N(RF,h),N(La,p),N(PF,y),N(kF,g),N(DF,E),N(_F,w),N(FF,M),N(IF,D),N(OF,_),N(oP,C),N(Da,S),N(NF,k),wt(F))if(F.length){const I=t.exposed||(t.exposed={});F.forEach(z=>{Object.defineProperty(I,z,{get:()=>r[z],set:ae=>r[z]=ae})})}else t.exposed||(t.exposed={});A&&t.render===Sa&&(t.render=A),G!=null&&(t.inheritAttrs=G),B&&(t.components=B),q&&(t.directives=q),k&&aP(t)}function GF(t,e,r=Sa){wt(t)&&(t=Sb(t));for(const n in t){const a=t[n];let i;er(a)?"default"in a?i=Rl(a.from||n,a.default,!0):i=Rl(a.from||n):i=Rl(a),gr(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function pC(t,e,r){la(wt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function lP(t,e,r,n){let a=n.includes(".")?CP(r,n):()=>r[n];if(Tr(t)){const i=e[t];St(i)&&wr(a,i)}else if(St(t))wr(a,t.bind(r));else if(er(t))if(wt(t))t.forEach(i=>lP(i,e,r,n));else{const i=St(t.handler)?t.handler.bind(r):e[t.handler];St(i)&&wr(a,i,t)}}function uP(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:a,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,s=i.get(e);let u;return s?u=s:!a.length&&!r&&!n?u=e:(u={},a.length&&a.forEach(f=>Vf(u,f,o,!0)),Vf(u,e,o)),er(e)&&i.set(e,u),u}function Vf(t,e,r,n=!1){const{mixins:a,extends:i}=e;i&&Vf(t,i,r,!0),a&&a.forEach(o=>Vf(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const s=HF[o]||r&&r[o];t[o]=s?s(t[o],e[o]):e[o]}return t}const HF={data:gC,props:yC,emits:yC,methods:wl,computed:wl,beforeCreate:En,created:En,beforeMount:En,mounted:En,beforeUpdate:En,updated:En,beforeDestroy:En,beforeUnmount:En,destroyed:En,unmounted:En,activated:En,deactivated:En,errorCaptured:En,serverPrefetch:En,components:wl,directives:wl,watch:VF,provide:gC,inject:UF};function gC(t,e){return e?t?function(){return Yr(St(t)?t.call(this,this):t,St(e)?e.call(this,this):e)}:e:t}function UF(t,e){return wl(Sb(t),Sb(e))}function Sb(t){if(wt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function En(t,e){return t?[...new Set([].concat(t,e))]:e}function wl(t,e){return t?Yr(Object.create(null),t,e):e}function yC(t,e){return t?wt(t)&&wt(e)?[...new Set([...t,...e])]:Yr(Object.create(null),vC(t),vC(e??{})):e}function VF(t,e){if(!t)return e;if(!e)return t;const r=Yr(Object.create(null),t);for(const n in e)r[n]=En(t[n],e[n]);return r}function fP(){return{app:null,config:{isNativeTag:MI,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let WF=0;function $F(t,e){return function(n,a=null){St(n)||(n=Yr({},n)),a!=null&&!er(a)&&(a=null);const i=fP(),o=new WeakSet,s=[];let u=!1;const f=i.app={_uid:WF++,_component:n,_props:a,_container:null,_context:i,_instance:null,version:_B,get config(){return i.config},set config(c){},use(c,...h){return o.has(c)||(c&&St(c.install)?(o.add(c),c.install(f,...h)):St(c)&&(o.add(c),c(f,...h))),f},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),f},component(c,h){return h?(i.components[c]=h,f):i.components[c]},directive(c,h){return h?(i.directives[c]=h,f):i.directives[c]},mount(c,h,p){if(!u){const y=f._ceVNode||st(n,a);return y.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(y,c,p),u=!0,f._container=c,c.__vue_app__=f,xc(y.component)}},onUnmount(c){s.push(c)},unmount(){u&&(la(s,f._instance,16),t(null,f._container),delete f._container.__vue_app__)},provide(c,h){return i.provides[c]=h,f},runWithContext(c){const h=yo;yo=f;try{return c()}finally{yo=h}}};return f}}let yo=null;function YF(t,e){if(en){let r=en.provides;const n=en.parent&&en.parent.provides;n===r&&(r=en.provides=Object.create(n)),r[t]=e}}function Rl(t,e,r=!1){const n=en||Wr;if(n||yo){let a=yo?yo._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(a&&t in a)return a[t];if(arguments.length>1)return r&&St(e)?e.call(n&&n.proxy):e}}function XF(){return!!(en||Wr||yo)}const cP={},dP=()=>Object.create(cP),hP=t=>Object.getPrototypeOf(t)===cP;function KF(t,e,r,n=!1){const a={},i=dP();t.propsDefaults=Object.create(null),vP(t,e,a,i);for(const o in t.propsOptions[0])o in a||(a[o]=void 0);r?t.props=n?a:uF(a):t.type.props?t.props=a:t.props=i,t.attrs=i}function jF(t,e,r,n){const{props:a,attrs:i,vnode:{patchFlag:o}}=t,s=Nt(a),[u]=t.propsOptions;let f=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let p=c[h];if(bc(t.emitsOptions,p))continue;const y=e[p];if(u)if(Wt(i,p))y!==i[p]&&(i[p]=y,f=!0);else{const g=Si(p);a[g]=Ab(u,s,g,y,t,!1)}else y!==i[p]&&(i[p]=y,f=!0)}}}else{vP(t,e,a,i)&&(f=!0);let c;for(const h in s)(!e||!Wt(e,h)&&((c=Oi(h))===h||!Wt(e,c)))&&(u?r&&(r[h]!==void 0||r[c]!==void 0)&&(a[h]=Ab(u,s,h,void 0,t,!0)):delete a[h]);if(i!==s)for(const h in i)(!e||!Wt(e,h))&&(delete i[h],f=!0)}f&&Wa(t.attrs,"set","")}function vP(t,e,r,n){const[a,i]=t.propsOptions;let o=!1,s;if(e)for(let u in e){if(Ll(u))continue;const f=e[u];let c;a&&Wt(a,c=Si(u))?!i||!i.includes(c)?r[c]=f:(s||(s={}))[c]=f:bc(t.emitsOptions,u)||(!(u in n)||f!==n[u])&&(n[u]=f,o=!0)}if(i){const u=Nt(r),f=s||nr;for(let c=0;c<i.length;c++){const h=i[c];r[h]=Ab(a,u,h,f[h],t,!Wt(f,h))}}return o}function Ab(t,e,r,n,a,i){const o=t[r];if(o!=null){const s=Wt(o,"default");if(s&&n===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&St(u)){const{propsDefaults:f}=a;if(r in f)n=f[r];else{const c=au(a);n=f[r]=u.call(null,e),c()}}else n=u;a.ce&&a.ce._setProp(r,n)}o[0]&&(i&&!s?n=!1:o[1]&&(n===""||n===Oi(r))&&(n=!0))}return n}const ZF=new WeakMap;function pP(t,e,r=!1){const n=r?ZF:e.propsCache,a=n.get(t);if(a)return a;const i=t.props,o={},s=[];let u=!1;if(!St(t)){const c=h=>{u=!0;const[p,y]=pP(h,e,!0);Yr(o,p),y&&s.push(...y)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!u)return er(t)&&n.set(t,ds),ds;if(wt(i))for(let c=0;c<i.length;c++){const h=Si(i[c]);mC(h)&&(o[h]=nr)}else if(i)for(const c in i){const h=Si(c);if(mC(h)){const p=i[c],y=o[h]=wt(p)||St(p)?{type:p}:Yr({},p),g=y.type;let E=!1,w=!0;if(wt(g))for(let v=0;v<g.length;++v){const C=g[v],x=St(C)&&C.name;if(x==="Boolean"){E=!0;break}else x==="String"&&(w=!1)}else E=St(g)&&g.name==="Boolean";y[0]=E,y[1]=w,(E||Wt(y,"default"))&&s.push(h)}}const f=[o,s];return er(t)&&n.set(t,f),f}function mC(t){return t[0]!=="$"&&!Ll(t)}const h1=t=>t[0]==="_"||t==="$stable",v1=t=>wt(t)?t.map(Ea):[Ea(t)],QF=(t,e,r)=>{if(e._n)return e;const n=ct((...a)=>v1(e(...a)),r);return n._c=!1,n},gP=(t,e,r)=>{const n=t._ctx;for(const a in t){if(h1(a))continue;const i=t[a];if(St(i))e[a]=QF(a,i,n);else if(i!=null){const o=v1(i);e[a]=()=>o}}},yP=(t,e)=>{const r=v1(e);t.slots.default=()=>r},mP=(t,e,r)=>{for(const n in e)(r||!h1(n))&&(t[n]=e[n])},JF=(t,e,r)=>{const n=t.slots=dP();if(t.vnode.shapeFlag&32){const a=e._;a?(mP(n,e,r),r&&CR(n,"_",a,!0)):gP(e,n)}else e&&yP(t,e)},eB=(t,e,r)=>{const{vnode:n,slots:a}=t;let i=!0,o=nr;if(n.shapeFlag&32){const s=e._;s?r&&s===1?i=!1:mP(a,e,r):(i=!e.$stable,gP(e,a)),o=e}else e&&(yP(t,e),o={default:1});if(i)for(const s in a)!h1(s)&&o[s]==null&&delete a[s]},In=vB;function tB(t){return rB(t)}function rB(t,e){const r=dc();r.__VUE__=!0;const{insert:n,remove:a,patchProp:i,createElement:o,createText:s,createComment:u,setText:f,setElementText:c,parentNode:h,nextSibling:p,setScopeId:y=Sa,insertStaticContent:g}=t,E=($,ne,le,Se=null,De=null,be=null,Te=void 0,ve=null,de=!!ne.dynamicChildren)=>{if($===ne)return;$&&!fo($,ne)&&(Se=ee($),V($,De,be,!0),$=null),ne.patchFlag===-2&&(de=!1,ne.dynamicChildren=null);const{type:ye,ref:Ce,shapeFlag:ue}=ne;switch(ye){case wc:w($,ne,le,Se);break;case dn:v($,ne,le,Se);break;case lh:$==null&&C(ne,le,Se,Te);break;case zt:B($,ne,le,Se,De,be,Te,ve,de);break;default:ue&1?A($,ne,le,Se,De,be,Te,ve,de):ue&6?q($,ne,le,Se,De,be,Te,ve,de):(ue&64||ue&128)&&ye.process($,ne,le,Se,De,be,Te,ve,de,ie)}Ce!=null&&De&&Uf(Ce,$&&$.ref,be,ne||$,!ne)},w=($,ne,le,Se)=>{if($==null)n(ne.el=s(ne.children),le,Se);else{const De=ne.el=$.el;ne.children!==$.children&&f(De,ne.children)}},v=($,ne,le,Se)=>{$==null?n(ne.el=u(ne.children||""),le,Se):ne.el=$.el},C=($,ne,le,Se)=>{[$.el,$.anchor]=g($.children,ne,le,Se,$.el,$.anchor)},x=({el:$,anchor:ne},le,Se)=>{let De;for(;$&&$!==ne;)De=p($),n($,le,Se),$=De;n(ne,le,Se)},S=({el:$,anchor:ne})=>{let le;for(;$&&$!==ne;)le=p($),a($),$=le;a(ne)},A=($,ne,le,Se,De,be,Te,ve,de)=>{ne.type==="svg"?Te="svg":ne.type==="math"&&(Te="mathml"),$==null?D(ne,le,Se,De,be,Te,ve,de):k($,ne,De,be,Te,ve,de)},D=($,ne,le,Se,De,be,Te,ve)=>{let de,ye;const{props:Ce,shapeFlag:ue,transition:Ae,dirs:Pe}=$;if(de=$.el=o($.type,be,Ce&&Ce.is,Ce),ue&8?c(de,$.children):ue&16&&M($.children,de,null,Se,De,sh($,be),Te,ve),Pe&&Ji($,null,Se,"created"),_(de,$,$.scopeId,Te,Se),Ce){for(const Ye in Ce)Ye!=="value"&&!Ll(Ye)&&i(de,Ye,null,Ce[Ye],be,Se);"value"in Ce&&i(de,"value",null,Ce.value,be),(ye=Ce.onVnodeBeforeMount)&&ya(ye,Se,$)}Pe&&Ji($,null,Se,"beforeMount");const Fe=nB(De,Ae);Fe&&Ae.beforeEnter(de),n(de,ne,le),((ye=Ce&&Ce.onVnodeMounted)||Fe||Pe)&&In(()=>{ye&&ya(ye,Se,$),Fe&&Ae.enter(de),Pe&&Ji($,null,Se,"mounted")},De)},_=($,ne,le,Se,De)=>{if(le&&y($,le),Se)for(let be=0;be<Se.length;be++)y($,Se[be]);if(De){let be=De.subTree;if(ne===be||TP(be.type)&&(be.ssContent===ne||be.ssFallback===ne)){const Te=De.vnode;_($,Te,Te.scopeId,Te.slotScopeIds,De.parent)}}},M=($,ne,le,Se,De,be,Te,ve,de=0)=>{for(let ye=de;ye<$.length;ye++){const Ce=$[ye]=ve?bi($[ye]):Ea($[ye]);E(null,Ce,ne,le,Se,De,be,Te,ve)}},k=($,ne,le,Se,De,be,Te)=>{const ve=ne.el=$.el;let{patchFlag:de,dynamicChildren:ye,dirs:Ce}=ne;de|=$.patchFlag&16;const ue=$.props||nr,Ae=ne.props||nr;let Pe;if(le&&eo(le,!1),(Pe=Ae.onVnodeBeforeUpdate)&&ya(Pe,le,ne,$),Ce&&Ji(ne,$,le,"beforeUpdate"),le&&eo(le,!0),(ue.innerHTML&&Ae.innerHTML==null||ue.textContent&&Ae.textContent==null)&&c(ve,""),ye?F($.dynamicChildren,ye,ve,le,Se,sh(ne,De),be):Te||z($,ne,ve,null,le,Se,sh(ne,De),be,!1),de>0){if(de&16)G(ve,ue,Ae,le,De);else if(de&2&&ue.class!==Ae.class&&i(ve,"class",null,Ae.class,De),de&4&&i(ve,"style",ue.style,Ae.style,De),de&8){const Fe=ne.dynamicProps;for(let Ye=0;Ye<Fe.length;Ye++){const Ve=Fe[Ye],Qe=ue[Ve],Xe=Ae[Ve];(Xe!==Qe||Ve==="value")&&i(ve,Ve,Qe,Xe,De,le)}}de&1&&$.children!==ne.children&&c(ve,ne.children)}else!Te&&ye==null&&G(ve,ue,Ae,le,De);((Pe=Ae.onVnodeUpdated)||Ce)&&In(()=>{Pe&&ya(Pe,le,ne,$),Ce&&Ji(ne,$,le,"updated")},Se)},F=($,ne,le,Se,De,be,Te)=>{for(let ve=0;ve<ne.length;ve++){const de=$[ve],ye=ne[ve],Ce=de.el&&(de.type===zt||!fo(de,ye)||de.shapeFlag&198)?h(de.el):le;E(de,ye,Ce,null,Se,De,be,Te,!0)}},G=($,ne,le,Se,De)=>{if(ne!==le){if(ne!==nr)for(const be in ne)!Ll(be)&&!(be in le)&&i($,be,ne[be],null,De,Se);for(const be in le){if(Ll(be))continue;const Te=le[be],ve=ne[be];Te!==ve&&be!=="value"&&i($,be,ve,Te,De,Se)}"value"in le&&i($,"value",ne.value,le.value,De)}},B=($,ne,le,Se,De,be,Te,ve,de)=>{const ye=ne.el=$?$.el:s(""),Ce=ne.anchor=$?$.anchor:s("");let{patchFlag:ue,dynamicChildren:Ae,slotScopeIds:Pe}=ne;Pe&&(ve=ve?ve.concat(Pe):Pe),$==null?(n(ye,le,Se),n(Ce,le,Se),M(ne.children||[],le,Ce,De,be,Te,ve,de)):ue>0&&ue&64&&Ae&&$.dynamicChildren?(F($.dynamicChildren,Ae,le,De,be,Te,ve),(ne.key!=null||De&&ne===De.subTree)&&bP($,ne,!0)):z($,ne,le,Ce,De,be,Te,ve,de)},q=($,ne,le,Se,De,be,Te,ve,de)=>{ne.slotScopeIds=ve,$==null?ne.shapeFlag&512?De.ctx.activate(ne,le,Se,Te,de):R(ne,le,Se,De,be,Te,de):P($,ne,de)},R=($,ne,le,Se,De,be,Te)=>{const ve=$.component=xB($,Se,De);if(yc($)&&(ve.ctx.renderer=ie),EB(ve,!1,Te),ve.asyncDep){if(De&&De.registerDep(ve,N,Te),!$.el){const de=ve.subTree=st(dn);v(null,de,ne,le)}}else N(ve,$,ne,le,De,be,Te)},P=($,ne,le)=>{const Se=ne.component=$.component;if(dB($,ne,le))if(Se.asyncDep&&!Se.asyncResolved){I(Se,ne,le);return}else Se.next=ne,Se.update();else ne.el=$.el,Se.vnode=ne},N=($,ne,le,Se,De,be,Te)=>{const ve=()=>{if($.isMounted){let{next:ue,bu:Ae,u:Pe,parent:Fe,vnode:Ye}=$;{const he=wP($);if(he){ue&&(ue.el=Ye.el,I($,ue,Te)),he.asyncDep.then(()=>{$.isUnmounted||ve()});return}}let Ve=ue,Qe;eo($,!1),ue?(ue.el=Ye.el,I($,ue,Te)):ue=Ye,Ae&&mf(Ae),(Qe=ue.props&&ue.props.onVnodeBeforeUpdate)&&ya(Qe,Fe,ue,Ye),eo($,!0);const Xe=wC($),We=$.subTree;$.subTree=Xe,E(We,Xe,h(We.el),ee(We),$,De,be),ue.el=Xe.el,Ve===null&&hB($,Xe.el),Pe&&In(Pe,De),(Qe=ue.props&&ue.props.onVnodeUpdated)&&In(()=>ya(Qe,Fe,ue,Ye),De)}else{let ue;const{el:Ae,props:Pe}=ne,{bm:Fe,m:Ye,parent:Ve,root:Qe,type:Xe}=$,We=ps(ne);eo($,!1),Fe&&mf(Fe),!We&&(ue=Pe&&Pe.onVnodeBeforeMount)&&ya(ue,Ve,ne),eo($,!0);{Qe.ce&&Qe.ce._injectChildStyle(Xe);const he=$.subTree=wC($);E(null,he,le,Se,$,De,be),ne.el=he.el}if(Ye&&In(Ye,De),!We&&(ue=Pe&&Pe.onVnodeMounted)){const he=ne;In(()=>ya(ue,Ve,he),De)}(ne.shapeFlag&256||Ve&&ps(Ve.vnode)&&Ve.vnode.shapeFlag&256)&&$.a&&In($.a,De),$.isMounted=!0,ne=le=Se=null}};$.scope.on();const de=$.effect=new MR(ve);$.scope.off();const ye=$.update=de.run.bind(de),Ce=$.job=de.runIfDirty.bind(de);Ce.i=$,Ce.id=$.uid,de.scheduler=()=>d1(Ce),eo($,!0),ye()},I=($,ne,le)=>{ne.component=$;const Se=$.vnode.props;$.vnode=ne,$.next=null,jF($,ne.props,Se,le),eB($,ne.children,le),Ka(),dC($),ja()},z=($,ne,le,Se,De,be,Te,ve,de=!1)=>{const ye=$&&$.children,Ce=$?$.shapeFlag:0,ue=ne.children,{patchFlag:Ae,shapeFlag:Pe}=ne;if(Ae>0){if(Ae&128){re(ye,ue,le,Se,De,be,Te,ve,de);return}else if(Ae&256){ae(ye,ue,le,Se,De,be,Te,ve,de);return}}Pe&8?(Ce&16&&Y(ye,De,be),ue!==ye&&c(le,ue)):Ce&16?Pe&16?re(ye,ue,le,Se,De,be,Te,ve,de):Y(ye,De,be,!0):(Ce&8&&c(le,""),Pe&16&&M(ue,le,Se,De,be,Te,ve,de))},ae=($,ne,le,Se,De,be,Te,ve,de)=>{$=$||ds,ne=ne||ds;const ye=$.length,Ce=ne.length,ue=Math.min(ye,Ce);let Ae;for(Ae=0;Ae<ue;Ae++){const Pe=ne[Ae]=de?bi(ne[Ae]):Ea(ne[Ae]);E($[Ae],Pe,le,null,De,be,Te,ve,de)}ye>Ce?Y($,De,be,!0,!1,ue):M(ne,le,Se,De,be,Te,ve,de,ue)},re=($,ne,le,Se,De,be,Te,ve,de)=>{let ye=0;const Ce=ne.length;let ue=$.length-1,Ae=Ce-1;for(;ye<=ue&&ye<=Ae;){const Pe=$[ye],Fe=ne[ye]=de?bi(ne[ye]):Ea(ne[ye]);if(fo(Pe,Fe))E(Pe,Fe,le,null,De,be,Te,ve,de);else break;ye++}for(;ye<=ue&&ye<=Ae;){const Pe=$[ue],Fe=ne[Ae]=de?bi(ne[Ae]):Ea(ne[Ae]);if(fo(Pe,Fe))E(Pe,Fe,le,null,De,be,Te,ve,de);else break;ue--,Ae--}if(ye>ue){if(ye<=Ae){const Pe=Ae+1,Fe=Pe<Ce?ne[Pe].el:Se;for(;ye<=Ae;)E(null,ne[ye]=de?bi(ne[ye]):Ea(ne[ye]),le,Fe,De,be,Te,ve,de),ye++}}else if(ye>Ae)for(;ye<=ue;)V($[ye],De,be,!0),ye++;else{const Pe=ye,Fe=ye,Ye=new Map;for(ye=Fe;ye<=Ae;ye++){const me=ne[ye]=de?bi(ne[ye]):Ea(ne[ye]);me.key!=null&&Ye.set(me.key,ye)}let Ve,Qe=0;const Xe=Ae-Fe+1;let We=!1,he=0;const j=new Array(Xe);for(ye=0;ye<Xe;ye++)j[ye]=0;for(ye=Pe;ye<=ue;ye++){const me=$[ye];if(Qe>=Xe){V(me,De,be,!0);continue}let we;if(me.key!=null)we=Ye.get(me.key);else for(Ve=Fe;Ve<=Ae;Ve++)if(j[Ve-Fe]===0&&fo(me,ne[Ve])){we=Ve;break}we===void 0?V(me,De,be,!0):(j[we-Fe]=ye+1,we>=he?he=we:We=!0,E(me,ne[we],le,null,De,be,Te,ve,de),Qe++)}const pe=We?aB(j):ds;for(Ve=pe.length-1,ye=Xe-1;ye>=0;ye--){const me=Fe+ye,we=ne[me],xe=me+1<Ce?ne[me+1].el:Se;j[ye]===0?E(null,we,le,xe,De,be,Te,ve,de):We&&(Ve<0||ye!==pe[Ve]?K(we,le,xe,2):Ve--)}}},K=($,ne,le,Se,De=null)=>{const{el:be,type:Te,transition:ve,children:de,shapeFlag:ye}=$;if(ye&6){K($.component.subTree,ne,le,Se);return}if(ye&128){$.suspense.move(ne,le,Se);return}if(ye&64){Te.move($,ne,le,ie);return}if(Te===zt){n(be,ne,le);for(let ue=0;ue<de.length;ue++)K(de[ue],ne,le,Se);n($.anchor,ne,le);return}if(Te===lh){x($,ne,le);return}if(Se!==2&&ye&1&&ve)if(Se===0)ve.beforeEnter(be),n(be,ne,le),In(()=>ve.enter(be),De);else{const{leave:ue,delayLeave:Ae,afterLeave:Pe}=ve,Fe=()=>{$.ctx.isUnmounted?a(be):n(be,ne,le)},Ye=()=>{ue(be,()=>{Fe(),Pe&&Pe()})};Ae?Ae(be,Fe,Ye):Ye()}else n(be,ne,le)},V=($,ne,le,Se=!1,De=!1)=>{const{type:be,props:Te,ref:ve,children:de,dynamicChildren:ye,shapeFlag:Ce,patchFlag:ue,dirs:Ae,cacheIndex:Pe}=$;if(ue===-2&&(De=!1),ve!=null&&(Ka(),Uf(ve,null,le,$,!0),ja()),Pe!=null&&(ne.renderCache[Pe]=void 0),Ce&256){ne.ctx.deactivate($);return}const Fe=Ce&1&&Ae,Ye=!ps($);let Ve;if(Ye&&(Ve=Te&&Te.onVnodeBeforeUnmount)&&ya(Ve,ne,$),Ce&6)W($.component,le,Se);else{if(Ce&128){$.suspense.unmount(le,Se);return}Fe&&Ji($,null,ne,"beforeUnmount"),Ce&64?$.type.remove($,ne,le,ie,Se):ye&&!ye.hasOnce&&(be!==zt||ue>0&&ue&64)?Y(ye,ne,le,!1,!0):(be===zt&&ue&384||!De&&Ce&16)&&Y(de,ne,le),Se&&Z($)}(Ye&&(Ve=Te&&Te.onVnodeUnmounted)||Fe)&&In(()=>{Ve&&ya(Ve,ne,$),Fe&&Ji($,null,ne,"unmounted")},le)},Z=$=>{const{type:ne,el:le,anchor:Se,transition:De}=$;if(ne===zt){U(le,Se);return}if(ne===lh){S($);return}const be=()=>{a(le),De&&!De.persisted&&De.afterLeave&&De.afterLeave()};if($.shapeFlag&1&&De&&!De.persisted){const{leave:Te,delayLeave:ve}=De,de=()=>Te(le,be);ve?ve($.el,be,de):de()}else be()},U=($,ne)=>{let le;for(;$!==ne;)le=p($),a($),$=le;a(ne)},W=($,ne,le)=>{const{bum:Se,scope:De,job:be,subTree:Te,um:ve,m:de,a:ye,parent:Ce,slots:{__:ue}}=$;bC(de),bC(ye),Se&&mf(Se),Ce&&wt(ue)&&ue.forEach(Ae=>{Ce.renderCache[Ae]=void 0}),De.stop(),be&&(be.flags|=8,V(Te,$,ne,le)),ve&&In(ve,ne),In(()=>{$.isUnmounted=!0},ne),ne&&ne.pendingBranch&&!ne.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===ne.pendingId&&(ne.deps--,ne.deps===0&&ne.resolve())},Y=($,ne,le,Se=!1,De=!1,be=0)=>{for(let Te=be;Te<$.length;Te++)V($[Te],ne,le,Se,De)},ee=$=>{if($.shapeFlag&6)return ee($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const ne=p($.anchor||$.el),le=ne&&ne[TF];return le?p(le):ne};let oe=!1;const te=($,ne,le)=>{$==null?ne._vnode&&V(ne._vnode,null,null,!0):E(ne._vnode||null,$,ne,null,null,null,le),ne._vnode=$,oe||(oe=!0,dC(),KR(),oe=!1)},ie={p:E,um:V,m:K,r:Z,mt:R,mc:M,pc:z,pbc:F,n:ee,o:t};return{render:te,hydrate:void 0,createApp:$F(te)}}function sh({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function eo({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function nB(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function bP(t,e,r=!1){const n=t.children,a=e.children;if(wt(n)&&wt(a))for(let i=0;i<n.length;i++){const o=n[i];let s=a[i];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[i]=bi(a[i]),s.el=o.el),!r&&s.patchFlag!==-2&&bP(o,s)),s.type===wc&&(s.el=o.el),s.type===dn&&!s.el&&(s.el=o.el)}}function aB(t){const e=t.slice(),r=[0];let n,a,i,o,s;const u=t.length;for(n=0;n<u;n++){const f=t[n];if(f!==0){if(a=r[r.length-1],t[a]<f){e[n]=a,r.push(n);continue}for(i=0,o=r.length-1;i<o;)s=i+o>>1,t[r[s]]<f?i=s+1:o=s;f<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,o=r[i-1];i-- >0;)r[i]=o,o=e[o];return r}function wP(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:wP(e)}function bC(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const iB=Symbol.for("v-scx"),oB=()=>Rl(iB);function wr(t,e,r){return xP(t,e,r)}function xP(t,e,r=nr){const{immediate:n,deep:a,flush:i,once:o}=r,s=Yr({},r),u=e&&n||!e&&i!=="post";let f;if(Ul){if(i==="sync"){const y=oB();f=y.__watcherHandles||(y.__watcherHandles=[])}else if(!u){const y=()=>{};return y.stop=Sa,y.resume=Sa,y.pause=Sa,y}}const c=en;s.call=(y,g,E)=>la(y,c,g,E);let h=!1;i==="post"?s.scheduler=y=>{In(y,c&&c.suspense)}:i!=="sync"&&(h=!0,s.scheduler=(y,g)=>{g?y():d1(y)}),s.augmentJob=y=>{e&&(y.flags|=4),h&&(y.flags|=2,c&&(y.id=c.uid,y.i=c))};const p=wF(t,e,s);return Ul&&(f?f.push(p):u&&p()),p}function sB(t,e,r){const n=this.proxy,a=Tr(t)?t.includes(".")?CP(n,t):()=>n[t]:t.bind(n,n);let i;St(e)?i=e:(i=e.handler,r=e);const o=au(this),s=xP(a,i.bind(n),r);return o(),s}function CP(t,e){const r=e.split(".");return()=>{let n=t;for(let a=0;a<r.length&&n;a++)n=n[r[a]];return n}}const lB=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Si(e)}Modifiers`]||t[`${Oi(e)}Modifiers`];function uB(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||nr;let a=r;const i=e.startsWith("update:"),o=i&&lB(n,e.slice(7));o&&(o.trim&&(a=r.map(c=>Tr(c)?c.trim():c)),o.number&&(a=r.map(mb)));let s,u=n[s=eh(e)]||n[s=eh(Si(e))];!u&&i&&(u=n[s=eh(Oi(e))]),u&&la(u,t,6,a);const f=n[s+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,la(f,t,6,a)}}function EP(t,e,r=!1){const n=e.emitsCache,a=n.get(t);if(a!==void 0)return a;const i=t.emits;let o={},s=!1;if(!St(t)){const u=f=>{const c=EP(f,e,!0);c&&(s=!0,Yr(o,c))};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!s?(er(t)&&n.set(t,null),null):(wt(i)?i.forEach(u=>o[u]=null):Yr(o,i),er(t)&&n.set(t,o),o)}function bc(t,e){return!t||!uc(e)?!1:(e=e.slice(2).replace(/Once$/,""),Wt(t,e[0].toLowerCase()+e.slice(1))||Wt(t,Oi(e))||Wt(t,e))}function wC(t){const{type:e,vnode:r,proxy:n,withProxy:a,propsOptions:[i],slots:o,attrs:s,emit:u,render:f,renderCache:c,props:h,data:p,setupState:y,ctx:g,inheritAttrs:E}=t,w=Hf(t);let v,C;try{if(r.shapeFlag&4){const S=a||n,A=S;v=Ea(f.call(A,S,c,h,y,p,g)),C=s}else{const S=e;v=Ea(S.length>1?S(h,{attrs:s,slots:o,emit:u}):S(h,null)),C=e.props?s:fB(s)}}catch(S){Pl.length=0,gc(S,t,1),v=st(dn)}let x=v;if(C&&E!==!1){const S=Object.keys(C),{shapeFlag:A}=x;S.length&&A&7&&(i&&S.some(t1)&&(C=cB(C,i)),x=Li(x,C,!1,!0))}return r.dirs&&(x=Li(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&zl(x,r.transition),v=x,Hf(w),v}const fB=t=>{let e;for(const r in t)(r==="class"||r==="style"||uc(r))&&((e||(e={}))[r]=t[r]);return e},cB=(t,e)=>{const r={};for(const n in t)(!t1(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function dB(t,e,r){const{props:n,children:a,component:i}=t,{props:o,children:s,patchFlag:u}=e,f=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&u>=0){if(u&1024)return!0;if(u&16)return n?xC(n,o,f):!!o;if(u&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const p=c[h];if(o[p]!==n[p]&&!bc(f,p))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?xC(n,o,f):!0:!!o;return!1}function xC(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let a=0;a<n.length;a++){const i=n[a];if(e[i]!==t[i]&&!bc(r,i))return!0}return!1}function hB({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const TP=t=>t.__isSuspense;function vB(t,e){e&&e.pendingBranch?wt(t)?e.effects.push(...t):e.effects.push(t):EF(t)}const zt=Symbol.for("v-fgt"),wc=Symbol.for("v-txt"),dn=Symbol.for("v-cmt"),lh=Symbol.for("v-stc"),Pl=[];let Fn=null;function rt(t=!1){Pl.push(Fn=t?null:[])}function pB(){Pl.pop(),Fn=Pl[Pl.length-1]||null}let Gl=1;function CC(t,e=!1){Gl+=t,t<0&&Fn&&e&&(Fn.hasOnce=!0)}function SP(t){return t.dynamicChildren=Gl>0?Fn||ds:null,pB(),Gl>0&&Fn&&Fn.push(t),t}function ut(t,e,r,n,a,i){return SP(Me(t,e,r,n,a,i,!0))}function ua(t,e,r,n,a){return SP(st(t,e,r,n,a,!0))}function Hl(t){return t?t.__v_isVNode===!0:!1}function fo(t,e){return t.type===e.type&&t.key===e.key}const AP=({key:t})=>t??null,bf=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Tr(t)||gr(t)||St(t)?{i:Wr,r:t,k:e,f:!!r}:t:null);function Me(t,e=null,r=null,n=0,a=null,i=t===zt?0:1,o=!1,s=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&AP(e),ref:e&&bf(e),scopeId:ZR,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Wr};return s?(p1(u,r),i&128&&t.normalize(u)):r&&(u.shapeFlag|=Tr(r)?8:16),Gl>0&&!o&&Fn&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Fn.push(u),u}const st=gB;function gB(t,e=null,r=null,n=0,a=null,i=!1){if((!t||t===BF)&&(t=dn),Hl(t)){const s=Li(t,e,!0);return r&&p1(s,r),Gl>0&&!i&&Fn&&(s.shapeFlag&6?Fn[Fn.indexOf(t)]=s:Fn.push(s)),s.patchFlag=-2,s}if(LB(t)&&(t=t.__vccOpts),e){e=yB(e);let{class:s,style:u}=e;s&&!Tr(s)&&(e.class=Kt(s)),er(u)&&(f1(u)&&!wt(u)&&(u=Yr({},u)),e.style=Ci(u))}const o=Tr(t)?1:TP(t)?128:QR(t)?64:er(t)?4:St(t)?2:0;return Me(t,e,r,n,a,o,i,!0)}function yB(t){return t?f1(t)||hP(t)?Yr({},t):t:null}function Li(t,e,r=!1,n=!1){const{props:a,ref:i,patchFlag:o,children:s,transition:u}=t,f=e?mB(a||{},e):a,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&AP(f),ref:e&&e.ref?r&&i?wt(i)?i.concat(bf(e)):[i,bf(e)]:bf(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==zt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Li(t.ssContent),ssFallback:t.ssFallback&&Li(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&n&&zl(c,u.clone(c)),c}function Et(t=" ",e=0){return st(wc,null,t,e)}function br(t="",e=!1){return e?(rt(),ua(dn,null,t)):st(dn,null,t)}function Ea(t){return t==null||typeof t=="boolean"?st(dn):wt(t)?st(zt,null,t.slice()):Hl(t)?bi(t):st(wc,null,String(t))}function bi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Li(t)}function p1(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(wt(e))r=16;else if(typeof e=="object")if(n&65){const a=e.default;a&&(a._c&&(a._d=!1),p1(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!hP(e)?e._ctx=Wr:a===3&&Wr&&(Wr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else St(e)?(e={default:e,_ctx:Wr},r=32):(e=String(e),n&64?(r=16,e=[Et(e)]):r=8);t.children=e,t.shapeFlag|=r}function mB(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const a in n)if(a==="class")e.class!==n.class&&(e.class=Kt([e.class,n.class]));else if(a==="style")e.style=Ci([e.style,n.style]);else if(uc(a)){const i=e[a],o=n[a];o&&i!==o&&!(wt(i)&&i.includes(o))&&(e[a]=i?[].concat(i,o):o)}else a!==""&&(e[a]=n[a])}return e}function ya(t,e,r,n=null){la(t,e,7,[r,n])}const bB=fP();let wB=0;function xB(t,e,r){const n=t.type,a=(e?e.appContext:t.appContext)||bB,i={uid:wB++,vnode:t,type:n,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new LR(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pP(n,a),emitsOptions:EP(n,a),emit:null,emitted:null,propsDefaults:nr,inheritAttrs:n.inheritAttrs,ctx:nr,data:nr,props:nr,attrs:nr,slots:nr,refs:nr,setupState:nr,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=uB.bind(null,i),t.ce&&t.ce(i),i}let en=null;const CB=()=>en||Wr;let Wf,Lb;{const t=dc(),e=(r,n)=>{let a;return(a=t[r])||(a=t[r]=[]),a.push(n),i=>{a.length>1?a.forEach(o=>o(i)):a[0](i)}};Wf=e("__VUE_INSTANCE_SETTERS__",r=>en=r),Lb=e("__VUE_SSR_SETTERS__",r=>Ul=r)}const au=t=>{const e=en;return Wf(t),t.scope.on(),()=>{t.scope.off(),Wf(e)}},EC=()=>{en&&en.scope.off(),Wf(null)};function LP(t){return t.vnode.shapeFlag&4}let Ul=!1;function EB(t,e=!1,r=!1){e&&Lb(e);const{props:n,children:a}=t.vnode,i=LP(t);KF(t,n,i,e),JF(t,a,r||e);const o=i?TB(t,e):void 0;return e&&Lb(!1),o}function TB(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,qF);const{setup:n}=r;if(n){Ka();const a=t.setupContext=n.length>1?AB(t):null,i=au(t),o=ru(n,t,0,[t.props,a]),s=mR(o);if(ja(),i(),(s||t.sp)&&!ps(t)&&aP(t),s){if(o.then(EC,EC),e)return o.then(u=>{TC(t,u)}).catch(u=>{gc(u,t,0)});t.asyncDep=o}else TC(t,o)}else DP(t)}function TC(t,e,r){St(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:er(e)&&(t.setupState=WR(e)),DP(t)}function DP(t,e,r){const n=t.type;t.render||(t.render=n.render||Sa);{const a=au(t);Ka();try{zF(t)}finally{ja(),a()}}}const SB={get(t,e){return cn(t,"get",""),t[e]}};function AB(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,SB),slots:t.slots,emit:t.emit,expose:e}}function xc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(WR(c1(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Ml)return Ml[r](t)},has(e,r){return r in e||r in Ml}})):t.proxy}function LB(t){return St(t)&&"__vccOpts"in t}const Gt=(t,e)=>mF(t,e,Ul);function DB(t,e,r){const n=arguments.length;return n===2?er(e)&&!wt(e)?Hl(e)?st(t,null,[e]):st(t,e):st(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Hl(r)&&(r=[r]),st(t,e,r))}const _B="3.5.15";/**
* @vue/runtime-dom v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Db;const SC=typeof window<"u"&&window.trustedTypes;if(SC)try{Db=SC.createPolicy("vue",{createHTML:t=>t})}catch{}const _P=Db?t=>Db.createHTML(t):t=>t,MB="http://www.w3.org/2000/svg",RB="http://www.w3.org/1998/Math/MathML",Ua=typeof document<"u"?document:null,AC=Ua&&Ua.createElement("template"),PB={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const a=e==="svg"?Ua.createElementNS(MB,t):e==="mathml"?Ua.createElementNS(RB,t):r?Ua.createElement(t,{is:r}):Ua.createElement(t);return t==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:t=>Ua.createTextNode(t),createComment:t=>Ua.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ua.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,a,i){const o=r?r.previousSibling:e.lastChild;if(a&&(a===i||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===i||!(a=a.nextSibling)););else{AC.innerHTML=_P(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const s=AC.content;if(n==="svg"||n==="mathml"){const u=s.firstChild;for(;u.firstChild;)s.appendChild(u.firstChild);s.removeChild(u)}e.insertBefore(s,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},hi="transition",cl="animation",Vl=Symbol("_vtc"),MP={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},kB=Yr({},JR,MP),NB=t=>(t.displayName="Transition",t.props=kB,t),g1=NB((t,{slots:e})=>DB(LF,OB(t),e)),to=(t,e=[])=>{wt(t)?t.forEach(r=>r(...e)):t&&t(...e)},LC=t=>t?wt(t)?t.some(e=>e.length>1):t.length>1:!1;function OB(t){const e={};for(const B in t)B in MP||(e[B]=t[B]);if(t.css===!1)return e;const{name:r="v",type:n,duration:a,enterFromClass:i=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:s=`${r}-enter-to`,appearFromClass:u=i,appearActiveClass:f=o,appearToClass:c=s,leaveFromClass:h=`${r}-leave-from`,leaveActiveClass:p=`${r}-leave-active`,leaveToClass:y=`${r}-leave-to`}=t,g=IB(a),E=g&&g[0],w=g&&g[1],{onBeforeEnter:v,onEnter:C,onEnterCancelled:x,onLeave:S,onLeaveCancelled:A,onBeforeAppear:D=v,onAppear:_=C,onAppearCancelled:M=x}=e,k=(B,q,R,P)=>{B._enterCancelled=P,ro(B,q?c:s),ro(B,q?f:o),R&&R()},F=(B,q)=>{B._isLeaving=!1,ro(B,h),ro(B,y),ro(B,p),q&&q()},G=B=>(q,R)=>{const P=B?_:C,N=()=>k(q,B,R);to(P,[q,N]),DC(()=>{ro(q,B?u:i),za(q,B?c:s),LC(P)||_C(q,n,E,N)})};return Yr(e,{onBeforeEnter(B){to(v,[B]),za(B,i),za(B,o)},onBeforeAppear(B){to(D,[B]),za(B,u),za(B,f)},onEnter:G(!1),onAppear:G(!0),onLeave(B,q){B._isLeaving=!0;const R=()=>F(B,q);za(B,h),B._enterCancelled?(za(B,p),PC()):(PC(),za(B,p)),DC(()=>{B._isLeaving&&(ro(B,h),za(B,y),LC(S)||_C(B,n,w,R))}),to(S,[B,R])},onEnterCancelled(B){k(B,!1,void 0,!0),to(x,[B])},onAppearCancelled(B){k(B,!0,void 0,!0),to(M,[B])},onLeaveCancelled(B){F(B),to(A,[B])}})}function IB(t){if(t==null)return null;if(er(t))return[uh(t.enter),uh(t.leave)];{const e=uh(t);return[e,e]}}function uh(t){return OI(t)}function za(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[Vl]||(t[Vl]=new Set)).add(e)}function ro(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[Vl];r&&(r.delete(e),r.size||(t[Vl]=void 0))}function DC(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let FB=0;function _C(t,e,r,n){const a=t._endId=++FB,i=()=>{a===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:o,timeout:s,propCount:u}=BB(t,e);if(!o)return n();const f=o+"end";let c=0;const h=()=>{t.removeEventListener(f,p),i()},p=y=>{y.target===t&&++c>=u&&h()};setTimeout(()=>{c<u&&h()},s+1),t.addEventListener(f,p)}function BB(t,e){const r=window.getComputedStyle(t),n=g=>(r[g]||"").split(", "),a=n(`${hi}Delay`),i=n(`${hi}Duration`),o=MC(a,i),s=n(`${cl}Delay`),u=n(`${cl}Duration`),f=MC(s,u);let c=null,h=0,p=0;e===hi?o>0&&(c=hi,h=o,p=i.length):e===cl?f>0&&(c=cl,h=f,p=u.length):(h=Math.max(o,f),c=h>0?o>f?hi:cl:null,p=c?c===hi?i.length:u.length:0);const y=c===hi&&/\b(transform|all)(,|$)/.test(n(`${hi}Property`).toString());return{type:c,timeout:h,propCount:p,hasTransform:y}}function MC(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>RC(r)+RC(t[n])))}function RC(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function PC(){return document.body.offsetHeight}function qB(t,e,r){const n=t[Vl];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const $f=Symbol("_vod"),RP=Symbol("_vsh"),Ga={beforeMount(t,{value:e},{transition:r}){t[$f]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):dl(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),dl(t,!0),n.enter(t)):n.leave(t,()=>{dl(t,!1)}):dl(t,e))},beforeUnmount(t,{value:e}){dl(t,e)}};function dl(t,e){t.style.display=e?t[$f]:"none",t[RP]=!e}const zB=Symbol(""),GB=/(^|;)\s*display\s*:/;function HB(t,e,r){const n=t.style,a=Tr(r);let i=!1;if(r&&!a){if(e)if(Tr(e))for(const o of e.split(";")){const s=o.slice(0,o.indexOf(":")).trim();r[s]==null&&wf(n,s,"")}else for(const o in e)r[o]==null&&wf(n,o,"");for(const o in r)o==="display"&&(i=!0),wf(n,o,r[o])}else if(a){if(e!==r){const o=n[zB];o&&(r+=";"+o),n.cssText=r,i=GB.test(r)}}else e&&t.removeAttribute("style");$f in t&&(t[$f]=i?n.display:"",t[RP]&&(n.display="none"))}const kC=/\s*!important$/;function wf(t,e,r){if(wt(r))r.forEach(n=>wf(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=UB(t,e);kC.test(r)?t.setProperty(Oi(n),r.replace(kC,""),"important"):t[n]=r}}const NC=["Webkit","Moz","ms"],fh={};function UB(t,e){const r=fh[e];if(r)return r;let n=Si(e);if(n!=="filter"&&n in t)return fh[e]=n;n=xR(n);for(let a=0;a<NC.length;a++){const i=NC[a]+n;if(i in t)return fh[e]=i}return e}const OC="http://www.w3.org/1999/xlink";function IC(t,e,r,n,a,i=GI(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(OC,e.slice(6,e.length)):t.setAttributeNS(OC,e,r):r==null||i&&!ER(r)?t.removeAttribute(e):t.setAttribute(e,i?"":sa(r)?String(r):r)}function FC(t,e,r,n,a){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?_P(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const s=i==="OPTION"?t.getAttribute("value")||"":t.value,u=r==null?t.type==="checkbox"?"on":"":String(r);(s!==u||!("_value"in t))&&(t.value=u),r==null&&t.removeAttribute(e),t._value=r;return}let o=!1;if(r===""||r==null){const s=typeof t[e];s==="boolean"?r=ER(r):r==null&&s==="string"?(r="",o=!0):s==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(a||e)}function co(t,e,r,n){t.addEventListener(e,r,n)}function VB(t,e,r,n){t.removeEventListener(e,r,n)}const BC=Symbol("_vei");function WB(t,e,r,n,a=null){const i=t[BC]||(t[BC]={}),o=i[e];if(n&&o)o.value=n;else{const[s,u]=$B(e);if(n){const f=i[e]=KB(n,a);co(t,s,f,u)}else o&&(VB(t,s,o,u),i[e]=void 0)}}const qC=/(?:Once|Passive|Capture)$/;function $B(t){let e;if(qC.test(t)){e={};let n;for(;n=t.match(qC);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Oi(t.slice(2)),e]}let ch=0;const YB=Promise.resolve(),XB=()=>ch||(YB.then(()=>ch=0),ch=Date.now());function KB(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;la(jB(n,r.value),e,5,[n])};return r.value=t,r.attached=XB(),r}function jB(t,e){if(wt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>a=>!a._stopped&&n&&n(a))}else return e}const zC=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ZB=(t,e,r,n,a,i)=>{const o=a==="svg";e==="class"?qB(t,n,o):e==="style"?HB(t,r,n):uc(e)?t1(e)||WB(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):QB(t,e,n,o))?(FC(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&IC(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Tr(n))?FC(t,Si(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),IC(t,e,n,o))};function QB(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&zC(e)&&St(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return zC(e)&&Tr(r)?!1:e in t}const Yf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return wt(e)?r=>mf(e,r):e};function JB(t){t.target.composing=!0}function GC(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ys=Symbol("_assign"),eq={created(t,{modifiers:{lazy:e,trim:r,number:n}},a){t[ys]=Yf(a);const i=n||a.props&&a.props.type==="number";co(t,e?"change":"input",o=>{if(o.target.composing)return;let s=t.value;r&&(s=s.trim()),i&&(s=mb(s)),t[ys](s)}),r&&co(t,"change",()=>{t.value=t.value.trim()}),e||(co(t,"compositionstart",JB),co(t,"compositionend",GC),co(t,"change",GC))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:a,number:i}},o){if(t[ys]=Yf(o),t.composing)return;const s=(i||t.type==="number")&&!/^0\d/.test(t.value)?mb(t.value):t.value,u=e??"";s!==u&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||a&&t.value.trim()===u)||(t.value=u))}},PP={deep:!0,created(t,e,r){t[ys]=Yf(r),co(t,"change",()=>{const n=t._modelValue,a=tq(t),i=t.checked,o=t[ys];if(wt(n)){const s=TR(n,a),u=s!==-1;if(i&&!u)o(n.concat(a));else if(!i&&u){const f=[...n];f.splice(s,1),o(f)}}else if(fc(n)){const s=new Set(n);i?s.add(a):s.delete(a),o(s)}else o(kP(t,i))})},mounted:HC,beforeUpdate(t,e,r){t[ys]=Yf(r),HC(t,e,r)}};function HC(t,{value:e,oldValue:r},n){t._modelValue=e;let a;if(wt(e))a=TR(e,n.props.value)>-1;else if(fc(e))a=e.has(n.props.value);else{if(e===r)return;a=hc(e,kP(t,!0))}t.checked!==a&&(t.checked=a)}function tq(t){return"_value"in t?t._value:t.value}function kP(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const rq=["ctrl","shift","alt","meta"],nq={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>rq.some(r=>t[`${r}Key`]&&!e.includes(r))},Ur=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(a,...i)=>{for(let o=0;o<e.length;o++){const s=nq[e[o]];if(s&&s(a,e))return}return t(a,...i)})},aq={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},_b=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=a=>{if(!("key"in a))return;const i=Oi(a.key);if(e.some(o=>o===i||aq[o]===i))return t(a)})},iq=Yr({patchProp:ZB},PB);let UC;function oq(){return UC||(UC=tB(iq))}const sq=(...t)=>{const e=oq().createApp(...t),{mount:r}=e;return e.mount=n=>{const a=uq(n);if(!a)return;const i=e._component;!St(i)&&!i.render&&!i.template&&(i.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const o=r(a,!1,lq(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),o},e};function lq(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function uq(t){return Tr(t)?document.querySelector(t):t}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let NP;const Cc=t=>NP=t,OP=Symbol();function Mb(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var kl;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(kl||(kl={}));function fq(){const t=DR(!0),e=t.run(()=>bt({}));let r=[],n=[];const a=c1({install(i){Cc(a),a._a=i,i.provide(OP,a),i.config.globalProperties.$pinia=a,n.forEach(o=>r.push(o)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return a}const IP=()=>{};function VC(t,e,r,n=IP){t.push(e);const a=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&_R()&&UI(a),a}function Qo(t,...e){t.slice().forEach(r=>{r(...e)})}const cq=t=>t(),WC=Symbol(),dh=Symbol();function Rb(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],a=t[r];Mb(a)&&Mb(n)&&t.hasOwnProperty(r)&&!gr(n)&&!Xa(n)?t[r]=Rb(a,n):t[r]=n}return t}const dq=Symbol();function hq(t){return!Mb(t)||!Object.prototype.hasOwnProperty.call(t,dq)}const{assign:gi}=Object;function vq(t){return!!(gr(t)&&t.effect)}function pq(t,e,r,n){const{state:a,actions:i,getters:o}=e,s=r.state.value[t];let u;function f(){s||(r.state.value[t]=a?a():{});const c=hF(r.state.value[t]);return gi(c,i,Object.keys(o||{}).reduce((h,p)=>(h[p]=c1(Gt(()=>{Cc(r);const y=r._s.get(t);return o[p].call(y,y)})),h),{}))}return u=FP(t,f,e,r,n,!0),u}function FP(t,e,r={},n,a,i){let o;const s=gi({actions:{}},r),u={deep:!0};let f,c,h=[],p=[],y;const g=n.state.value[t];!i&&!g&&(n.state.value[t]={}),bt({});let E;function w(M){let k;f=c=!1,typeof M=="function"?(M(n.state.value[t]),k={type:kl.patchFunction,storeId:t,events:y}):(Rb(n.state.value[t],M),k={type:kl.patchObject,payload:M,storeId:t,events:y});const F=E=Symbol();nu().then(()=>{E===F&&(f=!0)}),c=!0,Qo(h,k,n.state.value[t])}const v=i?function(){const{state:k}=r,F=k?k():{};this.$patch(G=>{gi(G,F)})}:IP;function C(){o.stop(),h=[],p=[],n._s.delete(t)}const x=(M,k="")=>{if(WC in M)return M[dh]=k,M;const F=function(){Cc(n);const G=Array.from(arguments),B=[],q=[];function R(I){B.push(I)}function P(I){q.push(I)}Qo(p,{args:G,name:F[dh],store:A,after:R,onError:P});let N;try{N=M.apply(this&&this.$id===t?this:A,G)}catch(I){throw Qo(q,I),I}return N instanceof Promise?N.then(I=>(Qo(B,I),I)).catch(I=>(Qo(q,I),Promise.reject(I))):(Qo(B,N),N)};return F[WC]=!0,F[dh]=k,F},S={_p:n,$id:t,$onAction:VC.bind(null,p),$patch:w,$reset:v,$subscribe(M,k={}){const F=VC(h,M,k.detached,()=>G()),G=o.run(()=>wr(()=>n.state.value[t],B=>{(k.flush==="sync"?c:f)&&M({storeId:t,type:kl.direct,events:y},B)},gi({},u,k)));return F},$dispose:C},A=pc(S);n._s.set(t,A);const _=(n._a&&n._a.runWithContext||cq)(()=>n._e.run(()=>(o=DR()).run(()=>e({action:x}))));for(const M in _){const k=_[M];if(gr(k)&&!vq(k)||Xa(k))i||(g&&hq(k)&&(gr(k)?k.value=g[M]:Rb(k,g[M])),n.state.value[t][M]=k);else if(typeof k=="function"){const F=x(k,M);_[M]=F,s.actions[M]=k}}return gi(A,_),gi(Nt(A),_),Object.defineProperty(A,"$state",{get:()=>n.state.value[t],set:M=>{w(k=>{gi(k,M)})}}),n._p.forEach(M=>{gi(A,o.run(()=>M({store:A,app:n._a,pinia:n,options:s})))}),g&&i&&r.hydrate&&r.hydrate(A.$state,g),f=!0,c=!0,A}/*! #__NO_SIDE_EFFECTS__ */function Ec(t,e,r){let n;const a=typeof e=="function";n=a?r:e;function i(o,s){const u=XF();return o=o||(u?Rl(OP,null):null),o&&Cc(o),o=NP,o._s.has(t)||(a?FP(t,e,n,o):pq(t,n,o)),o._s.get(t)}return i.$id=t,i}function Pb(t){const e=Nt(t),r={};for(const n in e){const a=e[n];a.effect?r[n]=Gt({get:()=>t[n],set(i){t[n]=i}}):(gr(a)||Xa(a))&&(r[n]=gF(t,n))}return r}function kb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function gq(t){if(Array.isArray(t))return t}function yq(t){if(Array.isArray(t))return kb(t)}function Ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qP(n.key),n)}}function Fi(t,e,r){return e&&mq(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=y1(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,i=u},f:function(){try{o||r.return==null||r.return()}finally{if(s)throw i}}}}function BP(t,e,r){return(e=qP(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bq(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wq(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,s=[],u=!0,f=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(c){f=!0,a=c}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(f)throw a}}return s}}function xq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fr(t,e){return gq(t)||wq(t,e)||y1(t,e)||xq()}function Xf(t){return yq(t)||bq(t)||y1(t)||Cq()}function Eq(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function qP(t){var e=Eq(t,"string");return typeof e=="symbol"?e:e+""}function qr(t){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(t)}function y1(t,e){if(t){if(typeof t=="string")return kb(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kb(t,e):void 0}}var Ir=typeof window>"u"?null:window,$C=Ir?Ir.navigator:null;Ir&&Ir.document;var Tq=qr(""),zP=qr({}),Sq=qr(function(){}),Aq=typeof HTMLElement>"u"?"undefined":qr(HTMLElement),iu=function(e){return e&&e.instanceString&&yr(e.instanceString)?e.instanceString():null},mt=function(e){return e!=null&&qr(e)==Tq},yr=function(e){return e!=null&&qr(e)===Sq},ar=function(e){return!qn(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},It=function(e){return e!=null&&qr(e)===zP&&!ar(e)&&e.constructor===Object},Lq=function(e){return e!=null&&qr(e)===zP},at=function(e){return e!=null&&qr(e)===qr(1)&&!isNaN(e)},Dq=function(e){return at(e)&&Math.floor(e)===e},Kf=function(e){if(Aq!=="undefined")return e!=null&&e instanceof HTMLElement},qn=function(e){return ou(e)||GP(e)},ou=function(e){return iu(e)==="collection"&&e._private.single},GP=function(e){return iu(e)==="collection"&&!e._private.single},m1=function(e){return iu(e)==="core"},HP=function(e){return iu(e)==="stylesheet"},_q=function(e){return iu(e)==="event"},Di=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Mq=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Rq=function(e){return It(e)&&at(e.x1)&&at(e.x2)&&at(e.y1)&&at(e.y2)},Pq=function(e){return Lq(e)&&yr(e.then)},kq=function(){return $C&&$C.userAgent.match(/msie|trident|edge/i)},Cs=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function(){var i=this,o=arguments,s,u=r.apply(i,o),f=n.cache;return(s=f[u])||(s=f[u]=e.apply(i,o)),s};return n.cache={},n},b1=Cs(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Tc=Cs(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),UP=Cs(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),YC=function(e){return Di(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Br="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Nq="rgb[a]?\\(("+Br+"[%]?)\\s*,\\s*("+Br+"[%]?)\\s*,\\s*("+Br+"[%]?)(?:\\s*,\\s*("+Br+"))?\\)",Oq="rgb[a]?\\((?:"+Br+"[%]?)\\s*,\\s*(?:"+Br+"[%]?)\\s*,\\s*(?:"+Br+"[%]?)(?:\\s*,\\s*(?:"+Br+"))?\\)",Iq="hsl[a]?\\(("+Br+")\\s*,\\s*("+Br+"[%])\\s*,\\s*("+Br+"[%])(?:\\s*,\\s*("+Br+"))?\\)",Fq="hsl[a]?\\((?:"+Br+")\\s*,\\s*(?:"+Br+"[%])\\s*,\\s*(?:"+Br+"[%])(?:\\s*,\\s*(?:"+Br+"))?\\)",Bq="\\#[0-9a-fA-F]{3}",qq="\\#[0-9a-fA-F]{6}",VP=function(e,r){return e<r?-1:e>r?1:0},zq=function(e,r){return-1*VP(e,r)},xt=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];t[o]=n[o]}}return t},Gq=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,o=16;return r?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},Hq=function(e){var r,n,a,i,o,s,u,f;function c(g,E,w){return w<0&&(w+=1),w>1&&(w-=1),w<1/6?g+(E-g)*6*w:w<1/2?E:w<2/3?g+(E-g)*(2/3-w)*6:g}var h=new RegExp("^"+Iq+"$").exec(e);if(h){if(n=parseInt(h[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(h[2]),a<0||a>100||(a=a/100,i=parseFloat(h[3]),i<0||i>100)||(i=i/100,o=h[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)s=u=f=Math.round(i*255);else{var p=i<.5?i*(1+a):i+a-i*a,y=2*i-p;s=Math.round(255*c(y,p,n+1/3)),u=Math.round(255*c(y,p,n)),f=Math.round(255*c(y,p,n-1/3))}r=[s,u,f,o]}return r},Uq=function(e){var r,n=new RegExp("^"+Nq+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;r.push(Math.floor(o))}var s=a[1]||a[2]||a[3],u=a[1]&&a[2]&&a[3];if(s&&!u)return;var f=n[4];if(f!==void 0){if(f=parseFloat(f),f<0||f>1)return;r.push(f)}}return r},Vq=function(e){return Wq[e.toLowerCase()]},WP=function(e){return(ar(e)?e:null)||Vq(e)||Gq(e)||Uq(e)||Hq(e)},Wq={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},$P=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(It(o))throw Error("Tried to set map with object key");i<n.length-1?(r[o]==null&&(r[o]={}),r=r[o]):r[o]=e.value}},YP=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(It(o))throw Error("Tried to get map with object key");if(r=r[o],r==null)return r}return r},rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function su(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hh,XC;function lu(){if(XC)return hh;XC=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return hh=t,hh}var vh,KC;function $q(){if(KC)return vh;KC=1;var t=typeof rf=="object"&&rf&&rf.Object===Object&&rf;return vh=t,vh}var ph,jC;function Sc(){if(jC)return ph;jC=1;var t=$q(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return ph=r,ph}var gh,ZC;function Yq(){if(ZC)return gh;ZC=1;var t=Sc(),e=function(){return t.Date.now()};return gh=e,gh}var yh,QC;function Xq(){if(QC)return yh;QC=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return yh=e,yh}var mh,JC;function Kq(){if(JC)return mh;JC=1;var t=Xq(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return mh=r,mh}var bh,eE;function w1(){if(eE)return bh;eE=1;var t=Sc(),e=t.Symbol;return bh=e,bh}var wh,tE;function jq(){if(tE)return wh;tE=1;var t=w1(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var s=r.call(o,a),u=o[a];try{o[a]=void 0;var f=!0}catch{}var c=n.call(o);return f&&(s?o[a]=u:delete o[a]),c}return wh=i,wh}var xh,rE;function Zq(){if(rE)return xh;rE=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return xh=r,xh}var Ch,nE;function XP(){if(nE)return Ch;nE=1;var t=w1(),e=jq(),r=Zq(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(s){return s==null?s===void 0?a:n:i&&i in Object(s)?e(s):r(s)}return Ch=o,Ch}var Eh,aE;function Qq(){if(aE)return Eh;aE=1;function t(e){return e!=null&&typeof e=="object"}return Eh=t,Eh}var Th,iE;function uu(){if(iE)return Th;iE=1;var t=XP(),e=Qq(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Th=n,Th}var Sh,oE;function Jq(){if(oE)return Sh;oE=1;var t=Kq(),e=lu(),r=uu(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(f){if(typeof f=="number")return f;if(r(f))return n;if(e(f)){var c=typeof f.valueOf=="function"?f.valueOf():f;f=e(c)?c+"":c}if(typeof f!="string")return f===0?f:+f;f=t(f);var h=i.test(f);return h||o.test(f)?s(f.slice(2),h?2:8):a.test(f)?n:+f}return Sh=u,Sh}var Ah,sE;function ez(){if(sE)return Ah;sE=1;var t=lu(),e=Yq(),r=Jq(),n="Expected a function",a=Math.max,i=Math.min;function o(s,u,f){var c,h,p,y,g,E,w=0,v=!1,C=!1,x=!0;if(typeof s!="function")throw new TypeError(n);u=r(u)||0,t(f)&&(v=!!f.leading,C="maxWait"in f,p=C?a(r(f.maxWait)||0,u):p,x="trailing"in f?!!f.trailing:x);function S(q){var R=c,P=h;return c=h=void 0,w=q,y=s.apply(P,R),y}function A(q){return w=q,g=setTimeout(M,u),v?S(q):y}function D(q){var R=q-E,P=q-w,N=u-R;return C?i(N,p-P):N}function _(q){var R=q-E,P=q-w;return E===void 0||R>=u||R<0||C&&P>=p}function M(){var q=e();if(_(q))return k(q);g=setTimeout(M,D(q))}function k(q){return g=void 0,x&&c?S(q):(c=h=void 0,y)}function F(){g!==void 0&&clearTimeout(g),w=0,c=E=h=g=void 0}function G(){return g===void 0?y:k(e())}function B(){var q=e(),R=_(q);if(c=arguments,h=this,E=q,R){if(g===void 0)return A(E);if(C)return clearTimeout(g),g=setTimeout(M,u),S(E)}return g===void 0&&(g=setTimeout(M,u)),y}return B.cancel=F,B.flush=G,B}return Ah=o,Ah}var tz=ez(),fu=su(tz),Lh=Ir?Ir.performance:null,KP=Lh&&Lh.now?function(){return Lh.now()}:function(){return Date.now()},rz=function(){if(Ir){if(Ir.requestAnimationFrame)return function(t){Ir.requestAnimationFrame(t)};if(Ir.mozRequestAnimationFrame)return function(t){Ir.mozRequestAnimationFrame(t)};if(Ir.webkitRequestAnimationFrame)return function(t){Ir.webkitRequestAnimationFrame(t)};if(Ir.msRequestAnimationFrame)return function(t){Ir.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(KP())},1e3/60)}}(),jf=function(e){return rz(e)},Za=KP,ho=9261,jP=65599,ls=5381,ZP=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ho,n=r,a;a=e.next(),!a.done;)n=n*jP+a.value|0;return n},Wl=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ho;return r*jP+e|0},$l=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ls;return(r<<5)+r+e|0},nz=function(e,r){return e*2097152+r},vi=function(e){return e[0]*2097152+e[1]},nf=function(e,r){return[Wl(e[0],r[0]),$l(e[1],r[1])]},lE=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return ZP(o,r)},mo=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return ZP(o,r)},QP=function(){return az(arguments)},az=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=mo(a):r=mo(a,r)}return r},uE=!0,iz=console.warn!=null,oz=console.trace!=null,x1=Number.MAX_SAFE_INTEGER||9007199254740991,JP=function(){return!0},Zf=function(){return!1},fE=function(){return 0},C1=function(){},pr=function(e){throw new Error(e)},ek=function(e){if(e!==void 0)uE=!!e;else return uE},Yt=function(e){ek()&&(iz?console.warn(e):(console.log(e),oz&&console.trace()))},sz=function(e){return xt({},e)},Ta=function(e){return e==null?e:ar(e)?e.slice():It(e)?sz(e):e},lz=function(e){return e.slice()},tk=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},uz={},rk=function(){return uz},nn=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var o=r[i],s=n==null?void 0:n[o];a[o]=s===void 0?e[o]:s}return a}},_i=function(e,r,n){for(var a=e.length-1;a>=0;a--)e[a]===r&&e.splice(a,1)},E1=function(e){e.splice(0,e.length)},fz=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},Mn=function(e,r,n){return n&&(r=UP(n,r)),e[r]},Va=function(e,r,n,a){n&&(r=UP(n,r)),e[r]=a},cz=function(){function t(){Ii(this,t),this._obj={}}return Fi(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),Ya=typeof Map<"u"?Map:cz,dz="undefined",hz=function(){function t(e){if(Ii(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return Fi(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])}(),As=(typeof Set>"u"?"undefined":qr(Set))!==dz?Set:hz,Ac=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!m1(e)){pr("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){pr("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new As,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var o=r.renderedPosition,s=e.pan(),u=e.zoom();i.position={x:(o.x-s.x)/u,y:(o.y-s.y)/u}}var f=[];ar(r.classes)?f=r.classes:mt(r.classes)&&(f=r.classes.split(/\s+/));for(var c=0,h=f.length;c<h;c++){var p=f[c];!p||p===""||i.classes.add(p)}this.createEmitter(),(n===void 0||n)&&this.restore();var y=r.style||r.css;y&&(Yt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(y))},cE=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;It(n)&&!qn(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!yr(a)?a:i,a=yr(a)?a:function(){};for(var s=this._private.cy,u=n=mt(n)?this.filter(n):n,f=[],c=[],h={},p={},y={},g=0,E,w=this.byGroup(),v=w.nodes,C=w.edges,x=0;x<u.length;x++){var S=u[x],A=S.id();S.isNode()&&(f.unshift(S),e.bfs&&(y[A]=!0,c.push(S)),p[A]=0)}for(var D=function(){var q=e.bfs?f.shift():f.pop(),R=q.id();if(e.dfs){if(y[R])return 0;y[R]=!0,c.push(q)}var P=p[R],N=h[R],I=N!=null?N.source():null,z=N!=null?N.target():null,ae=N==null?void 0:q.same(I)?z[0]:I[0],re;if(re=a(q,N,ae,g++,P),re===!0)return E=q,1;if(re===!1)return 1;for(var K=q.connectedEdges().filter(function(Y){return(!i||Y.source().same(q))&&C.has(Y)}),V=0;V<K.length;V++){var Z=K[V],U=Z.connectedNodes().filter(function(Y){return!Y.same(q)&&v.has(Y)}),W=U.id();U.length!==0&&!y[W]&&(U=U[0],f.push(U),e.bfs&&(y[W]=!0,c.push(U)),h[W]=Z,p[W]=p[R]+1)}},_;f.length!==0&&(_=D(),!(_!==0&&_===1)););for(var M=s.collection(),k=0;k<c.length;k++){var F=c[k],G=h[F.id()];G!=null&&M.push(G),M.push(F)}return{path:s.collection(M),found:s.collection(E)}}},Yl={breadthFirstSearch:cE({bfs:!0}),depthFirstSearch:cE({dfs:!0})};Yl.bfs=Yl.breadthFirstSearch;Yl.dfs=Yl.depthFirstSearch;var xf={exports:{}},vz=xf.exports,dE;function pz(){return dE||(dE=1,function(t,e){(function(){var r,n,a,i,o,s,u,f,c,h,p,y,g,E,w;a=Math.floor,h=Math.min,n=function(v,C){return v<C?-1:v>C?1:0},c=function(v,C,x,S,A){var D;if(x==null&&(x=0),A==null&&(A=n),x<0)throw new Error("lo must be non-negative");for(S==null&&(S=v.length);x<S;)D=a((x+S)/2),A(C,v[D])<0?S=D:x=D+1;return[].splice.apply(v,[x,x-x].concat(C)),C},s=function(v,C,x){return x==null&&(x=n),v.push(C),E(v,0,v.length-1,x)},o=function(v,C){var x,S;return C==null&&(C=n),x=v.pop(),v.length?(S=v[0],v[0]=x,w(v,0,C)):S=x,S},f=function(v,C,x){var S;return x==null&&(x=n),S=v[0],v[0]=C,w(v,0,x),S},u=function(v,C,x){var S;return x==null&&(x=n),v.length&&x(v[0],C)<0&&(S=[v[0],C],C=S[0],v[0]=S[1],w(v,0,x)),C},i=function(v,C){var x,S,A,D,_,M;for(C==null&&(C=n),D=(function(){M=[];for(var k=0,F=a(v.length/2);0<=F?k<F:k>F;0<=F?k++:k--)M.push(k);return M}).apply(this).reverse(),_=[],S=0,A=D.length;S<A;S++)x=D[S],_.push(w(v,x,C));return _},g=function(v,C,x){var S;if(x==null&&(x=n),S=v.indexOf(C),S!==-1)return E(v,0,S,x),w(v,S,x)},p=function(v,C,x){var S,A,D,_,M;if(x==null&&(x=n),A=v.slice(0,C),!A.length)return A;for(i(A,x),M=v.slice(C),D=0,_=M.length;D<_;D++)S=M[D],u(A,S,x);return A.sort(x).reverse()},y=function(v,C,x){var S,A,D,_,M,k,F,G,B;if(x==null&&(x=n),C*10<=v.length){if(D=v.slice(0,C).sort(x),!D.length)return D;for(A=D[D.length-1],F=v.slice(C),_=0,k=F.length;_<k;_++)S=F[_],x(S,A)<0&&(c(D,S,0,null,x),D.pop(),A=D[D.length-1]);return D}for(i(v,x),B=[],M=0,G=h(C,v.length);0<=G?M<G:M>G;0<=G?++M:--M)B.push(o(v,x));return B},E=function(v,C,x,S){var A,D,_;for(S==null&&(S=n),A=v[x];x>C;){if(_=x-1>>1,D=v[_],S(A,D)<0){v[x]=D,x=_;continue}break}return v[x]=A},w=function(v,C,x){var S,A,D,_,M;for(x==null&&(x=n),A=v.length,M=C,D=v[C],S=2*C+1;S<A;)_=S+1,_<A&&!(x(v[S],v[_])<0)&&(S=_),v[C]=v[S],C=S,S=2*C+1;return v[C]=D,E(v,M,C,x)},r=function(){v.push=s,v.pop=o,v.replace=f,v.pushpop=u,v.heapify=i,v.updateItem=g,v.nlargest=p,v.nsmallest=y;function v(C){this.cmp=C??n,this.nodes=[]}return v.prototype.push=function(C){return s(this.nodes,C,this.cmp)},v.prototype.pop=function(){return o(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(C){return this.nodes.indexOf(C)!==-1},v.prototype.replace=function(C){return f(this.nodes,C,this.cmp)},v.prototype.pushpop=function(C){return u(this.nodes,C,this.cmp)},v.prototype.heapify=function(){return i(this.nodes,this.cmp)},v.prototype.updateItem=function(C){return g(this.nodes,C,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var C;return C=new v,C.nodes=this.nodes.slice(0),C},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v}(),function(v,C){return t.exports=C()}(this,function(){return r})}).call(vz)}(xf)),xf.exports}var Dh,hE;function gz(){return hE||(hE=1,Dh=pz()),Dh}var yz=gz(),cu=su(yz),mz=nn({root:null,weight:function(e){return 1},directed:!1}),bz={dijkstra:function(e){if(!It(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=mz(e),a=n.root,i=n.weight,o=n.directed,s=this,u=i,f=mt(a)?this.filter(a)[0]:a[0],c={},h={},p={},y=this.byGroup(),g=y.nodes,E=y.edges;E.unmergeBy(function(P){return P.isLoop()});for(var w=function(N){return c[N.id()]},v=function(N,I){c[N.id()]=I,C.updateItem(N)},C=new cu(function(P,N){return w(P)-w(N)}),x=0;x<g.length;x++){var S=g[x];c[S.id()]=S.same(f)?0:1/0,C.push(S)}for(var A=function(N,I){for(var z=(o?N.edgesTo(I):N.edgesWith(I)).intersect(E),ae=1/0,re,K=0;K<z.length;K++){var V=z[K],Z=u(V);(Z<ae||!re)&&(ae=Z,re=V)}return{edge:re,dist:ae}};C.size()>0;){var D=C.pop(),_=w(D),M=D.id();if(p[M]=_,_!==1/0)for(var k=D.neighborhood().intersect(g),F=0;F<k.length;F++){var G=k[F],B=G.id(),q=A(D,G),R=_+q.dist;R<w(G)&&(v(G,R),h[B]={node:D,edge:q.edge})}}return{distanceTo:function(N){var I=mt(N)?g.filter(N)[0]:N[0];return p[I.id()]},pathTo:function(N){var I=mt(N)?g.filter(N)[0]:N[0],z=[],ae=I,re=ae.id();if(I.length>0)for(z.unshift(I);h[re];){var K=h[re];z.unshift(K.edge),z.unshift(K.node),ae=K.node,re=ae.id()}return s.spawn(z)}}}},wz={kruskal:function(e){e=e||function(x){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,o=new Array(i),s=n,u=function(S){for(var A=0;A<o.length;A++){var D=o[A];if(D.has(S))return A}},f=0;f<i;f++)o[f]=this.spawn(n[f]);for(var c=a.sort(function(x,S){return e(x)-e(S)}),h=0;h<c.length;h++){var p=c[h],y=p.source()[0],g=p.target()[0],E=u(y),w=u(g),v=o[E],C=o[w];E!==w&&(s.merge(p),v.merge(C),o.splice(w,1))}return s}},xz=nn({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Cz={aStar:function(e){var r=this.cy(),n=xz(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,u=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var f=a.id(),c=i.id(),h={},p={},y={},g=new cu(function(re,K){return p[re.id()]-p[K.id()]}),E=new As,w={},v={},C=function(K,V){g.push(K),E.add(V)},x,S,A=function(){x=g.pop(),S=x.id(),E.delete(S)},D=function(K){return E.has(K)};C(a,f),h[f]=0,p[f]=o(a);for(var _=0;g.size()>0;){if(A(),_++,S===c){for(var M=[],k=i,F=c,G=v[F];M.unshift(k),G!=null&&M.unshift(G),k=w[F],k!=null;)F=k.id(),G=v[F];return{found:!0,distance:h[S],path:this.spawn(M),steps:_}}y[S]=!0;for(var B=x._private.edges,q=0;q<B.length;q++){var R=B[q];if(this.hasElementWithId(R.id())&&!(s&&R.data("source")!==S)){var P=R.source(),N=R.target(),I=P.id()!==S?P:N,z=I.id();if(this.hasElementWithId(z)&&!y[z]){var ae=h[S]+u(R);if(!D(z)){h[z]=ae,p[z]=ae+o(I),C(I,z),w[z]=x,v[z]=R;continue}ae<h[z]&&(h[z]=ae,p[z]=ae+o(I),w[z]=x,v[z]=R)}}}}return{found:!1,distance:void 0,path:void 0,steps:_}}},Ez=nn({weight:function(e){return 1},directed:!1}),Tz={floydWarshall:function(e){for(var r=this.cy(),n=Ez(e),a=n.weight,i=n.directed,o=a,s=this.byGroup(),u=s.nodes,f=s.edges,c=u.length,h=c*c,p=function(Z){return u.indexOf(Z)},y=function(Z){return u[Z]},g=new Array(h),E=0;E<h;E++){var w=E%c,v=(E-w)/c;v===w?g[E]=0:g[E]=1/0}for(var C=new Array(h),x=new Array(h),S=0;S<f.length;S++){var A=f[S],D=A.source()[0],_=A.target()[0];if(D!==_){var M=p(D),k=p(_),F=M*c+k,G=o(A);if(g[F]>G&&(g[F]=G,C[F]=k,x[F]=A),!i){var B=k*c+M;!i&&g[B]>G&&(g[B]=G,C[B]=M,x[B]=A)}}}for(var q=0;q<c;q++)for(var R=0;R<c;R++)for(var P=R*c+q,N=0;N<c;N++){var I=R*c+N,z=q*c+N;g[P]+g[z]<g[I]&&(g[I]=g[P]+g[z],C[I]=C[P])}var ae=function(Z){return(mt(Z)?r.filter(Z):Z)[0]},re=function(Z){return p(ae(Z))},K={distance:function(Z,U){var W=re(Z),Y=re(U);return g[W*c+Y]},path:function(Z,U){var W=re(Z),Y=re(U),ee=y(W);if(W===Y)return ee.collection();if(C[W*c+Y]==null)return r.collection();var oe=r.collection(),te=W,ie;for(oe.merge(ee);W!==Y;)te=W,W=C[W*c+Y],ie=x[te*c+W],oe.merge(ie),oe.merge(y(W));return oe}};return K}},Sz=nn({weight:function(e){return 1},directed:!1,root:null}),Az={bellmanFord:function(e){var r=this,n=Sz(e),a=n.weight,i=n.directed,o=n.root,s=a,u=this,f=this.cy(),c=this.byGroup(),h=c.edges,p=c.nodes,y=p.length,g=new Ya,E=!1,w=[];o=f.collection(o)[0],h.unmergeBy(function(be){return be.isLoop()});for(var v=h.length,C=function(Te){var ve=g.get(Te.id());return ve||(ve={},g.set(Te.id(),ve)),ve},x=function(Te){return(mt(Te)?f.$(Te):Te)[0]},S=function(Te){return C(x(Te)).dist},A=function(Te){for(var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,de=x(Te),ye=[],Ce=de;;){if(Ce==null)return r.spawn();var ue=C(Ce),Ae=ue.edge,Pe=ue.pred;if(ye.unshift(Ce[0]),Ce.same(ve)&&ye.length>0)break;Ae!=null&&ye.unshift(Ae),Ce=Pe}return u.spawn(ye)},D=0;D<y;D++){var _=p[D],M=C(_);_.same(o)?M.dist=0:M.dist=1/0,M.pred=null,M.edge=null}for(var k=!1,F=function(Te,ve,de,ye,Ce,ue){var Ae=ye.dist+ue;Ae<Ce.dist&&!de.same(ye.edge)&&(Ce.dist=Ae,Ce.pred=Te,Ce.edge=de,k=!0)},G=1;G<y;G++){k=!1;for(var B=0;B<v;B++){var q=h[B],R=q.source(),P=q.target(),N=s(q),I=C(R),z=C(P);F(R,P,q,I,z,N),i||F(P,R,q,z,I,N)}if(!k)break}if(k)for(var ae=[],re=0;re<v;re++){var K=h[re],V=K.source(),Z=K.target(),U=s(K),W=C(V).dist,Y=C(Z).dist;if(W+U<Y||!i&&Y+U<W)if(E||(Yt("Graph contains a negative weight cycle for Bellman-Ford"),E=!0),e.findNegativeWeightCycles!==!1){var ee=[];W+U<Y&&ee.push(V),!i&&Y+U<W&&ee.push(Z);for(var oe=ee.length,te=0;te<oe;te++){var ie=ee[te],se=[ie];se.push(C(ie).edge);for(var $=C(ie).pred;se.indexOf($)===-1;)se.push($),se.push(C($).edge),$=C($).pred;se=se.slice(se.indexOf($));for(var ne=se[0].id(),le=0,Se=2;Se<se.length;Se+=2)se[Se].id()<ne&&(ne=se[Se].id(),le=Se);se=se.slice(le).concat(se.slice(0,le)),se.push(se[0]);var De=se.map(function(be){return be.id()}).join(",");ae.indexOf(De)===-1&&(w.push(u.spawn(se)),ae.push(De))}}else break}return{distanceTo:S,pathTo:A,hasNegativeWeightCycle:E,negativeWeightCycles:w}}},Lz=Math.sqrt(2),Dz=function(e,r,n){n.length===0&&pr("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],s=r[i],u=r[o],f=n,c=f.length-1;c>=0;c--){var h=f[c],p=h[1],y=h[2];(r[p]===s&&r[y]===u||r[p]===u&&r[y]===s)&&f.splice(c,1)}for(var g=0;g<f.length;g++){var E=f[g];E[1]===u?(f[g]=E.slice(),f[g][1]=s):E[2]===u&&(f[g]=E.slice(),f[g][2]=s)}for(var w=0;w<r.length;w++)r[w]===u&&(r[w]=s);return f},_h=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=Dz(i,e,r),n--}return r},_z={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(z){return z.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/Lz);if(i<2){pr("At least 2 nodes are required for Karger-Stein algorithm");return}for(var f=[],c=0;c<o;c++){var h=a[c];f.push([c,n.indexOf(h.source()),n.indexOf(h.target())])}for(var p=1/0,y=[],g=new Array(i),E=new Array(i),w=new Array(i),v=function(ae,re){for(var K=0;K<i;K++)re[K]=ae[K]},C=0;C<=s;C++){for(var x=0;x<i;x++)E[x]=x;var S=_h(E,f.slice(),i,u),A=S.slice();v(E,w);var D=_h(E,S,u,2),_=_h(w,A,u,2);D.length<=_.length&&D.length<p?(p=D.length,y=D,v(E,g)):_.length<=D.length&&_.length<p&&(p=_.length,y=_,v(w,g))}for(var M=this.spawn(y.map(function(z){return a[z[0]]})),k=this.spawn(),F=this.spawn(),G=g[0],B=0;B<g.length;B++){var q=g[B],R=n[B];q===G?k.merge(R):F.merge(R)}var P=function(ae){var re=e.spawn();return ae.forEach(function(K){re.merge(K),K.connectedEdges().forEach(function(V){e.contains(V)&&!M.contains(V)&&re.merge(V)})}),re},N=[P(k),P(F)],I={cut:M,components:N,partition1:k,partition2:F};return I}},Mz=function(e){return{x:e.x,y:e.y}},Lc=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},nk=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},us=function(e){return{x:e[0],y:e[1]}},Rz=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},Pz=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},kz=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=r;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i},Nz=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var s=0,u=e.length-1;u>=0;u--){var f=e[u];o?isFinite(f)||(e[u]=-1/0,s++):e.splice(u,1)}i&&e.sort(function(p,y){return p-y});var c=e.length,h=Math.floor(c/2);return c%2!==0?e[h+1+s]:(e[h-1+s]+e[h+s])/2},Oz=function(e){return Math.PI*e/180},af=function(e,r){return Math.atan2(r,e)-Math.PI/2},T1=Math.log2||function(t){return Math.log(t)/Math.log(2)},S1=function(e){return e>0?1:e<0?-1:0},bo=function(e,r){return Math.sqrt(so(e,r))},so=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},Iz=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},Vr=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},ms=function(e,r,n,a){return{x:Vr(e.x,r.x,n.x,a),y:Vr(e.y,r.y,n.y,a)}},Fz=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},o=bo(e,r),s={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+s.x*a,y:e.y+s.y*a}},Xl=function(e,r,n){return Math.max(e,Math.min(n,r))},Nn=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Bz=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},qz=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},zz=function(e,r,n){return{x1:e.x1+r,x2:e.x2+r,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},ak=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},Gz=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Cf=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Ef=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(r.length===1)n=a=i=o=r[0];else if(r.length===2)n=i=r[0],o=a=r[1];else if(r.length===4){var s=Fr(r,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},vE=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},A1=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Es=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},Hz=function(e,r){return Es(e,r.x,r.y)},Uz=function(e,r){return Es(e,r.x1,r.y1)&&Es(e,r.x2,r.y2)},ik=function(e,r,n,a,i,o,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",f=u==="auto"?Mi(i,o):u,c=i/2,h=o/2;f=Math.min(f,c,h);var p=f!==c,y=f!==h,g;if(p){var E=n-c+f-s,w=a-h-s,v=n+c-f+s,C=w;if(g=wi(e,r,n,a,E,w,v,C,!1),g.length>0)return g}if(y){var x=n+c+s,S=a-h+f-s,A=x,D=a+h-f+s;if(g=wi(e,r,n,a,x,S,A,D,!1),g.length>0)return g}if(p){var _=n-c+f-s,M=a+h+s,k=n+c-f+s,F=M;if(g=wi(e,r,n,a,_,M,k,F,!1),g.length>0)return g}if(y){var G=n-c-s,B=a-h+f-s,q=G,R=a+h-f+s;if(g=wi(e,r,n,a,G,B,q,R,!1),g.length>0)return g}var P;{var N=n-c+f,I=a-h+f;if(P=xl(e,r,n,a,N,I,f+s),P.length>0&&P[0]<=N&&P[1]<=I)return[P[0],P[1]]}{var z=n+c-f,ae=a-h+f;if(P=xl(e,r,n,a,z,ae,f+s),P.length>0&&P[0]>=z&&P[1]<=ae)return[P[0],P[1]]}{var re=n+c-f,K=a+h-f;if(P=xl(e,r,n,a,re,K,f+s),P.length>0&&P[0]>=re&&P[1]>=K)return[P[0],P[1]]}{var V=n-c+f,Z=a+h-f;if(P=xl(e,r,n,a,V,Z,f+s),P.length>0&&P[0]<=V&&P[1]>=Z)return[P[0],P[1]]}return[]},Vz=function(e,r,n,a,i,o,s){var u=s,f=Math.min(n,i),c=Math.max(n,i),h=Math.min(a,o),p=Math.max(a,o);return f-u<=e&&e<=c+u&&h-u<=r&&r<=p+u},Wz=function(e,r,n,a,i,o,s,u,f){var c={x1:Math.min(n,s,i)-f,x2:Math.max(n,s,i)+f,y1:Math.min(a,u,o)-f,y2:Math.max(a,u,o)+f};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},$z=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var o=Math.sqrt(i),s=2*e,u=(-r+o)/s,f=(-r-o)/s;return[u,f]},Yz=function(e,r,n,a,i){var o=1e-5;e===0&&(e=o),r/=e,n/=e,a/=e;var s,u,f,c,h,p,y,g;if(u=(3*n-r*r)/9,f=-(27*a)+r*(9*n-2*(r*r)),f/=54,s=u*u*u+f*f,i[1]=0,y=r/3,s>0){h=f+Math.sqrt(s),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),p=f-Math.sqrt(s),p=p<0?-Math.pow(-p,1/3):Math.pow(p,1/3),i[0]=-y+h+p,y+=(h+p)/2,i[4]=i[2]=-y,y=Math.sqrt(3)*(-p+h)/2,i[3]=y,i[5]=-y;return}if(i[5]=i[3]=0,s===0){g=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),i[0]=-y+2*g,i[4]=i[2]=-(g+y);return}u=-u,c=u*u*u,c=Math.acos(f/Math.sqrt(c)),g=2*Math.sqrt(u),i[0]=-y+g*Math.cos(c/3),i[2]=-y+g*Math.cos((c+2*Math.PI)/3),i[4]=-y+g*Math.cos((c+4*Math.PI)/3)},Xz=function(e,r,n,a,i,o,s,u){var f=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*u+4*o*o-4*o*u+u*u,c=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*u-6*o*o+3*o*u,h=1*3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*u-a*r+2*o*o+2*o*r-u*r,p=1*n*i-n*n+n*e-i*e+a*o-a*a+a*r-o*r,y=[];Yz(f,c,h,p,y);for(var g=1e-7,E=[],w=0;w<6;w+=2)Math.abs(y[w+1])<g&&y[w]>=0&&y[w]<=1&&E.push(y[w]);E.push(1),E.push(0);for(var v=-1,C,x,S,A=0;A<E.length;A++)C=Math.pow(1-E[A],2)*n+2*(1-E[A])*E[A]*i+E[A]*E[A]*s,x=Math.pow(1-E[A],2)*a+2*(1-E[A])*E[A]*o+E[A]*E[A]*u,S=Math.pow(C-e,2)+Math.pow(x-r,2),v>=0?S<v&&(v=S):v=S;return v},Kz=function(e,r,n,a,i,o){var s=[e-n,r-a],u=[i-n,o-a],f=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],h=s[0]*u[0]+s[1]*u[1],p=h*h/f;return h<0?c:p>f?(e-i)*(e-i)+(r-o)*(r-o):c-p},Rn=function(e,r,n){for(var a,i,o,s,u,f=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)u=(e-a)/(o-a)*(s-i)+i,u>r&&f++;else continue;return f%2!==0},Qa=function(e,r,n,a,i,o,s,u,f){var c=new Array(n.length),h;u[0]!=null?(h=Math.atan(u[1]/u[0]),u[0]<0?h=h+Math.PI/2:h=-h-Math.PI/2):h=u;for(var p=Math.cos(-h),y=Math.sin(-h),g=0;g<c.length/2;g++)c[g*2]=o/2*(n[g*2]*p-n[g*2+1]*y),c[g*2+1]=s/2*(n[g*2+1]*p+n[g*2]*y),c[g*2]+=a,c[g*2+1]+=i;var E;if(f>0){var w=Jf(c,-f);E=Qf(w)}else E=c;return Rn(e,r,E)},jz=function(e,r,n,a,i,o,s,u){for(var f=new Array(n.length*2),c=0;c<u.length;c++){var h=u[c];f[c*4+0]=h.startX,f[c*4+1]=h.startY,f[c*4+2]=h.stopX,f[c*4+3]=h.stopY;var p=Math.pow(h.cx-e,2)+Math.pow(h.cy-r,2);if(p<=Math.pow(h.radius,2))return!0}return Rn(e,r,f)},Qf=function(e){for(var r=new Array(e.length/2),n,a,i,o,s,u,f,c,h=0;h<e.length/4;h++){n=e[h*4],a=e[h*4+1],i=e[h*4+2],o=e[h*4+3],h<e.length/4-1?(s=e[(h+1)*4],u=e[(h+1)*4+1],f=e[(h+1)*4+2],c=e[(h+1)*4+3]):(s=e[0],u=e[1],f=e[2],c=e[3]);var p=wi(n,a,i,o,s,u,f,c,!0);r[h*2]=p[0],r[h*2+1]=p[1]}return r},Jf=function(e,r){for(var n=new Array(e.length*2),a,i,o,s,u=0;u<e.length/2;u++){a=e[u*2],i=e[u*2+1],u<e.length/2-1?(o=e[(u+1)*2],s=e[(u+1)*2+1]):(o=e[0],s=e[1]);var f=s-i,c=-(o-a),h=Math.sqrt(f*f+c*c),p=f/h,y=c/h;n[u*4]=a+p*r,n[u*4+1]=i+y*r,n[u*4+2]=o+p*r,n[u*4+3]=s+y*r}return n},Zz=function(e,r,n,a,i,o){var s=n-e,u=a-r;s/=i,u/=o;var f=Math.sqrt(s*s+u*u),c=f-1;if(c<0)return[];var h=c/f;return[(n-e)*h+e,(a-r)*h+r]},po=function(e,r,n,a,i,o,s){return e-=i,r-=o,e/=n/2+s,r/=a/2+s,e*e+r*r<=1},xl=function(e,r,n,a,i,o,s){var u=[n-e,a-r],f=[e-i,r-o],c=u[0]*u[0]+u[1]*u[1],h=2*(f[0]*u[0]+f[1]*u[1]),p=f[0]*f[0]+f[1]*f[1]-s*s,y=h*h-4*c*p;if(y<0)return[];var g=(-h+Math.sqrt(y))/(2*c),E=(-h-Math.sqrt(y))/(2*c),w=Math.min(g,E),v=Math.max(g,E),C=[];if(w>=0&&w<=1&&C.push(w),v>=0&&v<=1&&C.push(v),C.length===0)return[];var x=C[0]*u[0]+e,S=C[0]*u[1]+r;if(C.length>1){if(C[0]==C[1])return[x,S];var A=C[1]*u[0]+e,D=C[1]*u[1]+r;return[x,S,A,D]}else return[x,S]},Mh=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},wi=function(e,r,n,a,i,o,s,u,f){var c=e-i,h=n-e,p=s-i,y=r-o,g=a-r,E=u-o,w=p*y-E*c,v=h*y-g*c,C=E*h-p*g;if(C!==0){var x=w/C,S=v/C,A=.001,D=0-A,_=1+A;return D<=x&&x<=_&&D<=S&&S<=_?[e+x*h,r+x*g]:f?[e+x*h,r+x*g]:[]}else return w===0||v===0?Mh(e,n,s)===s?[s,u]:Mh(e,n,i)===i?[i,o]:Mh(i,s,n)===n?[n,a]:[]:[]},Kl=function(e,r,n,a,i,o,s,u){var f=[],c,h=new Array(n.length),p=!0;o==null&&(p=!1);var y;if(p){for(var g=0;g<h.length/2;g++)h[g*2]=n[g*2]*o+a,h[g*2+1]=n[g*2+1]*s+i;if(u>0){var E=Jf(h,-u);y=Qf(E)}else y=h}else y=n;for(var w,v,C,x,S=0;S<y.length/2;S++)w=y[S*2],v=y[S*2+1],S<y.length/2-1?(C=y[(S+1)*2],x=y[(S+1)*2+1]):(C=y[0],x=y[1]),c=wi(e,r,a,i,w,v,C,x),c.length!==0&&f.push(c[0],c[1]);return f},Qz=function(e,r,n,a,i,o,s,u,f){var c=[],h,p=new Array(n.length*2);f.forEach(function(C,x){x===0?(p[p.length-2]=C.startX,p[p.length-1]=C.startY):(p[x*4-2]=C.startX,p[x*4-1]=C.startY),p[x*4]=C.stopX,p[x*4+1]=C.stopY,h=xl(e,r,a,i,C.cx,C.cy,C.radius),h.length!==0&&c.push(h[0],h[1])});for(var y=0;y<p.length/4;y++)h=wi(e,r,a,i,p[y*4],p[y*4+1],p[y*4+2],p[y*4+3],!1),h.length!==0&&c.push(h[0],h[1]);if(c.length>2){for(var g=[c[0],c[1]],E=Math.pow(g[0]-e,2)+Math.pow(g[1]-r,2),w=1;w<c.length/2;w++){var v=Math.pow(c[w*2]-e,2)+Math.pow(c[w*2+1]-r,2);v<=E&&(g[0]=c[w*2],g[1]=c[w*2+1],E=v)}return g}return c},of=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[r[0]+o*a[0],r[1]+o*a[1]]},Tn=function(e,r){var n=Nb(e,r);return n=ok(n),n},ok=function(e){for(var r,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,u=-1/0,f=0;f<a;f++)r=e[2*f],n=e[2*f+1],i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),u=Math.max(u,n);for(var c=2/(s-i),h=2/(u-o),p=0;p<a;p++)r=e[2*p]=e[2*p]*c,n=e[2*p+1]=e[2*p+1]*h,i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),u=Math.max(u,n);if(o<-1)for(var y=0;y<a;y++)n=e[2*y+1]=e[2*y+1]+(-1-o);return e},Nb=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},Mi=function(e,r){return Math.min(e/4,r/4,8)},sk=function(e,r){return Math.min(e/10,r/10,8)},L1=function(){return 8},Jz=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Ob=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function eG(t,e){function r(h){for(var p=[],y=0;y<h.length;y++){var g=h[y],E=h[(y+1)%h.length],w={x:E.x-g.x,y:E.y-g.y},v={x:-w.y,y:w.x},C=Math.sqrt(v.x*v.x+v.y*v.y);p.push({x:v.x/C,y:v.y/C})}return p}function n(h,p){var y=1/0,g=-1/0,E=Pn(h),w;try{for(E.s();!(w=E.n()).done;){var v=w.value,C=v.x*p.x+v.y*p.y;y=Math.min(y,C),g=Math.max(g,C)}}catch(x){E.e(x)}finally{E.f()}return{min:y,max:g}}function a(h,p){return!(h.max<p.min||p.max<h.min)}var i=[].concat(Xf(r(t)),Xf(r(e))),o=Pn(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,f=n(t,u),c=n(e,u);if(!a(f,c))return!1}}catch(h){o.e(h)}finally{o.f()}return!0}var tG=nn({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),rG={pageRank:function(e){for(var r=tG(e),n=r.dampingFactor,a=r.precision,i=r.iterations,o=r.weight,s=this._private.cy,u=this.byGroup(),f=u.nodes,c=u.edges,h=f.length,p=h*h,y=c.length,g=new Array(p),E=new Array(h),w=(1-n)/h,v=0;v<h;v++){for(var C=0;C<h;C++){var x=v*h+C;g[x]=0}E[v]=0}for(var S=0;S<y;S++){var A=c[S],D=A.data("source"),_=A.data("target");if(D!==_){var M=f.indexOfId(D),k=f.indexOfId(_),F=o(A),G=k*h+M;g[G]+=F,E[M]+=F}}for(var B=1/h+w,q=0;q<h;q++)if(E[q]===0)for(var R=0;R<h;R++){var P=R*h+q;g[P]=B}else for(var N=0;N<h;N++){var I=N*h+q;g[I]=g[I]/E[q]+w}for(var z=new Array(h),ae=new Array(h),re,K=0;K<h;K++)z[K]=1;for(var V=0;V<i;V++){for(var Z=0;Z<h;Z++)ae[Z]=0;for(var U=0;U<h;U++)for(var W=0;W<h;W++){var Y=U*h+W;ae[U]+=g[Y]*z[W]}Iz(ae),re=z,z=ae,ae=re;for(var ee=0,oe=0;oe<h;oe++){var te=re[oe]-z[oe];ee+=te*te}if(ee<a)break}var ie={rank:function($){return $=s.collection($)[0],z[f.indexOf($)]}};return ie}},pE=nn({root:null,weight:function(e){return 1},directed:!1,alpha:0}),bs={degreeCentralityNormalized:function(e){e=pE(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},h={},p=0,y=0,g=0;g<a;g++){var E=n[g],w=E.id();e.root=E;var v=this.degreeCentrality(e);p<v.indegree&&(p=v.indegree),y<v.outdegree&&(y=v.outdegree),c[w]=v.indegree,h[w]=v.outdegree}return{indegree:function(x){return p==0?0:(mt(x)&&(x=r.filter(x)),c[x.id()]/p)},outdegree:function(x){return y===0?0:(mt(x)&&(x=r.filter(x)),h[x.id()]/y)}}}else{for(var i={},o=0,s=0;s<a;s++){var u=n[s];e.root=u;var f=this.degreeCentrality(e);o<f.degree&&(o=f.degree),i[u.id()]=f.degree}return{degree:function(x){return o===0?0:(mt(x)&&(x=r.filter(x)),i[x.id()]/o)}}}},degreeCentrality:function(e){e=pE(e);var r=this.cy(),n=this,a=e,i=a.root,o=a.weight,s=a.directed,u=a.alpha;if(i=r.collection(i)[0],s){for(var y=i.connectedEdges(),g=y.filter(function(D){return D.target().same(i)&&n.has(D)}),E=y.filter(function(D){return D.source().same(i)&&n.has(D)}),w=g.length,v=E.length,C=0,x=0,S=0;S<g.length;S++)C+=o(g[S]);for(var A=0;A<E.length;A++)x+=o(E[A]);return{indegree:Math.pow(w,1-u)*Math.pow(C,u),outdegree:Math.pow(v,1-u)*Math.pow(x,u)}}else{for(var f=i.connectedEdges().intersection(n),c=f.length,h=0,p=0;p<f.length;p++)h+=o(f[p]);return{degree:Math.pow(c,1-u)*Math.pow(h,u)}}}};bs.dc=bs.degreeCentrality;bs.dcn=bs.degreeCentralityNormalised=bs.degreeCentralityNormalized;var gE=nn({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),ws={closenessCentralityNormalized:function(e){for(var r=gE(e),n=r.harmonic,a=r.weight,i=r.directed,o=this.cy(),s={},u=0,f=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),h=0;h<f.length;h++){for(var p=0,y=f[h],g=0;g<f.length;g++)if(h!==g){var E=c.distance(y,f[g]);n?p+=1/E:p+=E}n||(p=1/p),u<p&&(u=p),s[y.id()]=p}return{closeness:function(v){return u==0?0:(mt(v)?v=o.filter(v)[0].id():v=v.id(),s[v]/u)}}},closenessCentrality:function(e){var r=gE(e),n=r.root,a=r.weight,i=r.directed,o=r.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),u=0,f=this.nodes(),c=0;c<f.length;c++){var h=f[c];if(!h.same(n)){var p=s.distanceTo(h);o?u+=1/p:u+=p}}return o?u:1/u}};ws.cc=ws.closenessCentrality;ws.ccn=ws.closenessCentralityNormalised=ws.closenessCentralityNormalized;var nG=nn({weight:null,directed:!1}),Ib={betweennessCentrality:function(e){for(var r=nG(e),n=r.directed,a=r.weight,i=a!=null,o=this.cy(),s=this.nodes(),u={},f={},c=0,h={set:function(x,S){f[x]=S,S>c&&(c=S)},get:function(x){return f[x]}},p=0;p<s.length;p++){var y=s[p],g=y.id();n?u[g]=y.outgoers().nodes():u[g]=y.openNeighborhood().nodes(),h.set(g,0)}for(var E=function(){for(var x=s[w].id(),S=[],A={},D={},_={},M=new cu(function(U,W){return _[U]-_[W]}),k=0;k<s.length;k++){var F=s[k].id();A[F]=[],D[F]=0,_[F]=1/0}for(D[x]=1,_[x]=0,M.push(x);!M.empty();){var G=M.pop();if(S.push(G),i)for(var B=0;B<u[G].length;B++){var q=u[G][B],R=o.getElementById(G),P=void 0;R.edgesTo(q).length>0?P=R.edgesTo(q)[0]:P=q.edgesTo(R)[0];var N=a(P);q=q.id(),_[q]>_[G]+N&&(_[q]=_[G]+N,M.nodes.indexOf(q)<0?M.push(q):M.updateItem(q),D[q]=0,A[q]=[]),_[q]==_[G]+N&&(D[q]=D[q]+D[G],A[q].push(G))}else for(var I=0;I<u[G].length;I++){var z=u[G][I].id();_[z]==1/0&&(M.push(z),_[z]=_[G]+1),_[z]==_[G]+1&&(D[z]=D[z]+D[G],A[z].push(G))}}for(var ae={},re=0;re<s.length;re++)ae[s[re].id()]=0;for(;S.length>0;){for(var K=S.pop(),V=0;V<A[K].length;V++){var Z=A[K][V];ae[Z]=ae[Z]+D[Z]/D[K]*(1+ae[K])}K!=s[w].id()&&h.set(K,h.get(K)+ae[K])}},w=0;w<s.length;w++)E();var v={betweenness:function(x){var S=o.collection(x).id();return h.get(S)},betweennessNormalized:function(x){if(c==0)return 0;var S=o.collection(x).id();return h.get(S)/c}};return v.betweennessNormalised=v.betweennessNormalized,v}};Ib.bc=Ib.betweennessCentrality;var aG=nn({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),iG=function(e){return aG(e)},oG=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},sG=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},lk=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var o=0;o<r;o++)e[o*r+a]=e[o*r+a]/n}},lG=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)a[i*n+u]+=e[i*n+s]*r[s*n+u]}return a},uG=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=lG(e,a,r);return e},fG=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return lk(a,r),a},cG=function(e,r,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return!1}return!0},dG=function(e,r,n,a){for(var i=[],o=0;o<r;o++){for(var s=[],u=0;u<r;u++)Math.round(e[o*r+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&i.push(a.collection(s))}return i},hG=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},vG=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&hG(e[r],e[n])&&e.splice(n,1);return e},yE=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=iG(e),o={},s=0;s<r.length;s++)o[r[s].id()]=s;for(var u=r.length,f=u*u,c=new Array(f),h,p=0;p<f;p++)c[p]=0;for(var y=0;y<n.length;y++){var g=n[y],E=o[g.source().id()],w=o[g.target().id()],v=oG(g,i.attributes);c[E*u+w]+=v,c[w*u+E]+=v}sG(c,u,i.multFactor),lk(c,u);for(var C=!0,x=0;C&&x<i.maxIterations;)C=!1,h=uG(c,u,i.expandFactor),c=fG(h,u,i.inflateFactor),cG(c,h,f,4)||(C=!0),x++;var S=dG(c,u,r,a);return S=vG(S),S},pG={markovClustering:yE,mcl:yE},gG=function(e){return e},uk=function(e,r){return Math.abs(r-e)},mE=function(e,r,n){return e+uk(r,n)},bE=function(e,r,n){return e+Math.pow(n-r,2)},yG=function(e){return Math.sqrt(e)},mG=function(e,r,n){return Math.max(e,uk(r,n))},hl=function(e,r,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:gG,s=a,u,f,c=0;c<e;c++)u=r(c),f=n(c),s=i(s,u,f);return o(s)},Ts={euclidean:function(e,r,n){return e>=2?hl(e,r,n,0,bE,yG):hl(e,r,n,0,mE)},squaredEuclidean:function(e,r,n){return hl(e,r,n,0,bE)},manhattan:function(e,r,n){return hl(e,r,n,0,mE)},max:function(e,r,n){return hl(e,r,n,-1/0,mG)}};Ts["squared-euclidean"]=Ts.squaredEuclidean;Ts.squaredeuclidean=Ts.squaredEuclidean;function Dc(t,e,r,n,a,i){var o;return yr(t)?o=t:o=Ts[t]||Ts.euclidean,e===0&&yr(t)?o(a,i):o(e,r,n,a,i)}var bG=nn({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),D1=function(e){return bG(e)},ec=function(e,r,n,a,i){var o=i!=="kMedoids",s=o?function(h){return n[h]}:function(h){return a[h](n)},u=function(p){return a[p](r)},f=n,c=r;return Dc(e,a.length,s,u,f,c)},Rh=function(e,r,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(r),u=null,f=0;f<a;f++)i[f]=e.min(n[f]).value,o[f]=e.max(n[f]).value;for(var c=0;c<r;c++){u=[];for(var h=0;h<a;h++)u[h]=Math.random()*(o[h]-i[h])+i[h];s[c]=u}return s},fk=function(e,r,n,a,i){for(var o=1/0,s=0,u=0;u<r.length;u++){var f=ec(n,e,r[u],a,i);f<o&&(o=f,s=u)}return s},ck=function(e,r,n){for(var a=[],i=null,o=0;o<r.length;o++)i=r[o],n[i.id()]===e&&a.push(i);return a},wG=function(e,r,n){return Math.abs(r-e)<=n},xG=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-r[a][i]);if(o>n)return!1}return!0},CG=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},wE=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];CG(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<r;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},xE=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=ec("manhattan",r[i],e,n,"kMedoids");return a},EG=function(e){var r=this.cy(),n=this.nodes(),a=null,i=D1(e),o=new Array(i.k),s={},u;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,u=Rh(n,i.k,i.attributes)):qr(i.testCentroids)==="object"?u=i.testCentroids:u=Rh(n,i.k,i.attributes):u=Rh(n,i.k,i.attributes);for(var f=!0,c=0;f&&c<i.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],s[a.id()]=fk(a,u,i.distance,i.attributes,"kMeans");f=!1;for(var p=0;p<i.k;p++){var y=ck(p,n,s);if(y.length!==0){for(var g=i.attributes.length,E=u[p],w=new Array(g),v=new Array(g),C=0;C<g;C++){v[C]=0;for(var x=0;x<y.length;x++)a=y[x],v[C]+=i.attributes[C](a);w[C]=v[C]/y.length,wG(w[C],E[C],i.sensitivityThreshold)||(f=!0)}u[p]=w,o[p]=r.collection(y)}}c++}return o},TG=function(e){var r=this.cy(),n=this.nodes(),a=null,i=D1(e),o=new Array(i.k),s,u={},f,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(qr(i.testCentroids)==="object"?s=i.testCentroids:s=wE(n,i.k)):s=wE(n,i.k);for(var h=!0,p=0;h&&p<i.maxIterations;){for(var y=0;y<n.length;y++)a=n[y],u[a.id()]=fk(a,s,i.distance,i.attributes,"kMedoids");h=!1;for(var g=0;g<s.length;g++){var E=ck(g,n,u);if(E.length!==0){c[g]=xE(s[g],E,i.attributes);for(var w=0;w<E.length;w++)f=xE(E[w],E,i.attributes),f<c[g]&&(c[g]=f,s[g]=E[w],h=!0);o[g]=r.collection(E)}}p++}return o},SG=function(e,r,n,a,i){for(var o,s,u=0;u<r.length;u++)for(var f=0;f<e.length;f++)a[u][f]=Math.pow(n[u][f],i.m);for(var c=0;c<e.length;c++)for(var h=0;h<i.attributes.length;h++){o=0,s=0;for(var p=0;p<r.length;p++)o+=a[p][c]*i.attributes[h](r[p]),s+=a[p][c];e[c][h]=o/s}},AG=function(e,r,n,a,i){for(var o=0;o<e.length;o++)r[o]=e[o].slice();for(var s,u,f,c=2/(i.m-1),h=0;h<n.length;h++)for(var p=0;p<a.length;p++){s=0;for(var y=0;y<n.length;y++)u=ec(i.distance,a[p],n[h],i.attributes,"cmeans"),f=ec(i.distance,a[p],n[y],i.attributes,"cmeans"),s+=Math.pow(u/f,c);e[p][h]=1/s}},LG=function(e,r,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,u,f=0;f<r.length;f++){s=-1/0,u=-1;for(var c=0;c<r[0].length;c++)r[f][c]>s&&(s=r[f][c],u=c);i[u].push(e[f])}for(var h=0;h<i.length;h++)i[h]=a.collection(i[h]);return i},CE=function(e){var r=this.cy(),n=this.nodes(),a=D1(e),i,o,s,u,f;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(a.k);s=new Array(n.length);for(var h=0;h<n.length;h++)s[h]=new Array(a.k);for(var p=0;p<n.length;p++){for(var y=0,g=0;g<a.k;g++)s[p][g]=Math.random(),y+=s[p][g];for(var E=0;E<a.k;E++)s[p][E]=s[p][E]/y}o=new Array(a.k);for(var w=0;w<a.k;w++)o[w]=new Array(a.attributes.length);f=new Array(n.length);for(var v=0;v<n.length;v++)f[v]=new Array(a.k);for(var C=!0,x=0;C&&x<a.maxIterations;)C=!1,SG(o,n,s,f,a),AG(s,u,o,n,a),xG(s,u,a.sensitivityThreshold)||(C=!0),x++;return i=LG(n,s,a,r),{clusters:i,degreeOfMembership:s}},DG={kMeans:EG,kMedoids:TG,fuzzyCMeans:CE,fcm:CE},_G=nn({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),MG={single:"min",complete:"max"},RG=function(e){var r=_G(e),n=MG[r.linkage];return n!=null&&(r.linkage=n),r},EE=function(e,r,n,a,i){for(var o=0,s=1/0,u,f=i.attributes,c=function(k,F){return Dc(i.distance,f.length,function(G){return f[G](k)},function(G){return f[G](F)},k,F)},h=0;h<e.length;h++){var p=e[h].key,y=n[p][a[p]];y<s&&(o=p,s=y)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var g=r[o],E=r[a[o]],w;i.mode==="dendrogram"?w={left:g,right:E,key:g.key}:w={value:g.value.concat(E.value),key:g.key},e[g.index]=w,e.splice(E.index,1),r[g.key]=w;for(var v=0;v<e.length;v++){var C=e[v];g.key===C.key?u=1/0:i.linkage==="min"?(u=n[g.key][C.key],n[g.key][C.key]>n[E.key][C.key]&&(u=n[E.key][C.key])):i.linkage==="max"?(u=n[g.key][C.key],n[g.key][C.key]<n[E.key][C.key]&&(u=n[E.key][C.key])):i.linkage==="mean"?u=(n[g.key][C.key]*g.size+n[E.key][C.key]*E.size)/(g.size+E.size):i.mode==="dendrogram"?u=c(C.value,g.value):u=c(C.value[0],g.value[0]),n[g.key][C.key]=n[C.key][g.key]=u}for(var x=0;x<e.length;x++){var S=e[x].key;if(a[S]===g.key||a[S]===E.key){for(var A=S,D=0;D<e.length;D++){var _=e[D].key;n[S][_]<n[S][A]&&(A=_)}a[S]=A}e[x].index=x}return g.key=E.key=g.index=E.index=null,!0},fs=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&fs(e.left,r),e.right&&fs(e.right,r)))},Fb=function(e,r){if(!e)return"";if(e.left&&e.right){var n=Fb(e.left,r),a=Fb(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Bb=function(e,r,n){if(!e)return[];var a=[],i=[],o=[];return r===0?(e.left&&fs(e.left,a),e.right&&fs(e.right,i),o=a.concat(i),[n.collection(o)]):r===1?e.value?[n.collection(e.value)]:(e.left&&fs(e.left,a),e.right&&fs(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=Bb(e.left,r-1,n)),e.right&&(i=Bb(e.right,r-1,n)),a.concat(i))},TE=function(e){for(var r=this.cy(),n=this.nodes(),a=RG(e),i=a.attributes,o=function(x,S){return Dc(a.distance,i.length,function(A){return i[A](x)},function(A){return i[A](S)},x,S)},s=[],u=[],f=[],c=[],h=0;h<n.length;h++){var p={value:a.mode==="dendrogram"?n[h]:[n[h]],key:h,index:h};s[h]=p,c[h]=p,u[h]=[],f[h]=0}for(var y=0;y<s.length;y++)for(var g=0;g<=y;g++){var E=void 0;a.mode==="dendrogram"?E=y===g?1/0:o(s[y].value,s[g].value):E=y===g?1/0:o(s[y].value[0],s[g].value[0]),u[y][g]=E,u[g][y]=E,E<u[y][f[y]]&&(f[y]=g)}for(var w=EE(s,c,u,f,a);w;)w=EE(s,c,u,f,a);var v;return a.mode==="dendrogram"?(v=Bb(s[0],a.dendrogramDepth,r),a.addDendrogram&&Fb(s[0],r)):(v=new Array(s.length),s.forEach(function(C,x){C.key=C.index=null,v[x]=r.collection(C.value)})),v},PG={hierarchicalClustering:TE,hca:TE},kG=nn({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),NG=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||pr("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||at(n)||pr("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),kG(e)},OG=function(e,r,n,a){var i=function(s,u){return a[u](s)};return-Dc(e,a.length,function(o){return i(r,o)},function(o){return i(n,o)},r,n)},IG=function(e,r){var n=null;return r==="median"?n=Nz(e):r==="mean"?n=kz(e):r==="min"?n=Rz(e):r==="max"?n=Pz(e):n=r,n},FG=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},SE=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,u=0;u<n.length;u++){var f=n[u];r[i*e+f]>s&&(o=f,s=r[i*e+f])}o>0&&a.push(o)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},BG=function(e,r,n){for(var a=SE(e,r,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var u=-1,f=-1/0,c=0;c<o.length;c++){for(var h=0,p=0;p<o.length;p++)h+=r[o[p]*e+o[c]];h>f&&(u=c,f=h)}n[i]=o[u]}return a=SE(e,r,n),a},AE=function(e){for(var r=this.cy(),n=this.nodes(),a=NG(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,u,f,c,h,p;s=n.length,u=s*s,f=new Array(u);for(var y=0;y<u;y++)f[y]=-1/0;for(var g=0;g<s;g++)for(var E=0;E<s;E++)g!==E&&(f[g*s+E]=OG(a.distance,n[g],n[E],a.attributes));c=IG(f,a.preference);for(var w=0;w<s;w++)f[w*s+w]=c;h=new Array(u);for(var v=0;v<u;v++)h[v]=0;p=new Array(u);for(var C=0;C<u;C++)p[C]=0;for(var x=new Array(s),S=new Array(s),A=new Array(s),D=0;D<s;D++)x[D]=0,S[D]=0,A[D]=0;for(var _=new Array(s*a.minIterations),M=0;M<_.length;M++)_[M]=0;var k;for(k=0;k<a.maxIterations;k++){for(var F=0;F<s;F++){for(var G=-1/0,B=-1/0,q=-1,R=0,P=0;P<s;P++)x[P]=h[F*s+P],R=p[F*s+P]+f[F*s+P],R>=G?(B=G,G=R,q=P):R>B&&(B=R);for(var N=0;N<s;N++)h[F*s+N]=(1-a.damping)*(f[F*s+N]-G)+a.damping*x[N];h[F*s+q]=(1-a.damping)*(f[F*s+q]-B)+a.damping*x[q]}for(var I=0;I<s;I++){for(var z=0,ae=0;ae<s;ae++)x[ae]=p[ae*s+I],S[ae]=Math.max(0,h[ae*s+I]),z+=S[ae];z-=S[I],S[I]=h[I*s+I],z+=S[I];for(var re=0;re<s;re++)p[re*s+I]=(1-a.damping)*Math.min(0,z-S[re])+a.damping*x[re];p[I*s+I]=(1-a.damping)*(z-S[I])+a.damping*x[I]}for(var K=0,V=0;V<s;V++){var Z=p[V*s+V]+h[V*s+V]>0?1:0;_[k%a.minIterations*s+V]=Z,K+=Z}if(K>0&&(k>=a.minIterations-1||k==a.maxIterations-1)){for(var U=0,W=0;W<s;W++){A[W]=0;for(var Y=0;Y<a.minIterations;Y++)A[W]+=_[Y*s+W];(A[W]===0||A[W]===a.minIterations)&&U++}if(U===s)break}}for(var ee=FG(s,h,p),oe=BG(s,f,ee),te={},ie=0;ie<ee.length;ie++)te[ee[ie]]=[];for(var se=0;se<n.length;se++){var $=i[n[se].id()],ne=oe[$];ne!=null&&te[ne].push(n[se])}for(var le=new Array(ee.length),Se=0;Se<ee.length;Se++)le[Se]=r.collection(te[ee[Se]]);return le},qG={affinityPropagation:AE,ap:AE},zG=nn({root:void 0,directed:!1}),GG={hierholzer:function(e){if(!It(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=zG(e),a=n.root,i=n.directed,o=this,s=!1,u,f,c;a&&(c=mt(a)?this.filter(a)[0].id():a[0].id());var h={},p={};i?o.forEach(function(C){var x=C.id();if(C.isNode()){var S=C.indegree(!0),A=C.outdegree(!0),D=S-A,_=A-S;D==1?u?s=!0:u=x:_==1?f?s=!0:f=x:(_>1||D>1)&&(s=!0),h[x]=[],C.outgoers().forEach(function(M){M.isEdge()&&h[x].push(M.id())})}else p[x]=[void 0,C.target().id()]}):o.forEach(function(C){var x=C.id();if(C.isNode()){var S=C.degree(!0);S%2&&(u?f?s=!0:f=x:u=x),h[x]=[],C.connectedEdges().forEach(function(A){return h[x].push(A.id())})}else p[x]=[C.source().id(),C.target().id()]});var y={found:!1,trail:void 0};if(s)return y;if(f&&u)if(i){if(c&&f!=c)return y;c=f}else{if(c&&f!=c&&u!=c)return y;c||(c=f)}else c||(c=o[0].id());var g=function(x){for(var S=x,A=[x],D,_,M;h[S].length;)D=h[S].shift(),_=p[D][0],M=p[D][1],S!=M?(h[M]=h[M].filter(function(k){return k!=D}),S=M):!i&&S!=_&&(h[_]=h[_].filter(function(k){return k!=D}),S=_),A.unshift(D),A.unshift(S);return A},E=[],w=[];for(w=g(c);w.length!=1;)h[w[0]].length==0?(E.unshift(o.getElementById(w.shift())),E.unshift(o.getElementById(w.shift()))):w=g(w.shift()).concat(w);E.unshift(o.getElementById(w.shift()));for(var v in h)if(h[v].length)return y;return y.found=!0,y.trail=this.spawn(E,!0),y}},sf=function(){var e=this,r={},n=0,a=0,i=[],o=[],s={},u=function(p,y){for(var g=o.length-1,E=[],w=e.spawn();o[g].x!=p||o[g].y!=y;)E.push(o.pop().edge),g--;E.push(o.pop().edge),E.forEach(function(v){var C=v.connectedNodes().intersection(e);w.merge(v),C.forEach(function(x){var S=x.id(),A=x.connectedEdges().intersection(e);w.merge(x),r[S].cutVertex?w.merge(A.filter(function(D){return D.isLoop()})):w.merge(A)})}),i.push(w)},f=function(p,y,g){p===g&&(a+=1),r[y]={id:n,low:n++,cutVertex:!1};var E=e.getElementById(y).connectedEdges().intersection(e);if(E.size()===0)i.push(e.spawn(e.getElementById(y)));else{var w,v,C,x;E.forEach(function(S){w=S.source().id(),v=S.target().id(),C=w===y?v:w,C!==g&&(x=S.id(),s[x]||(s[x]=!0,o.push({x:y,y:C,edge:S})),C in r?r[y].low=Math.min(r[y].low,r[C].id):(f(p,C,y),r[y].low=Math.min(r[y].low,r[C].low),r[y].id<=r[C].low&&(r[y].cutVertex=!0,u(y,C))))})}};e.forEach(function(h){if(h.isNode()){var p=h.id();p in r||(a=0,f(p,p),r[p].cutVertex=a>1)}});var c=Object.keys(r).filter(function(h){return r[h].cutVertex}).map(function(h){return e.getElementById(h)});return{cut:e.spawn(c),components:i}},HG={hopcroftTarjanBiconnected:sf,htbc:sf,htb:sf,hopcroftTarjanBiconnectedComponents:sf},lf=function(){var e=this,r={},n=0,a=[],i=[],o=e.spawn(e),s=function(f){i.push(f),r[f]={index:n,low:n++,explored:!1};var c=e.getElementById(f).connectedEdges().intersection(e);if(c.forEach(function(E){var w=E.target().id();w!==f&&(w in r||s(w),r[w].explored||(r[f].low=Math.min(r[f].low,r[w].low)))}),r[f].index===r[f].low){for(var h=e.spawn();;){var p=i.pop();if(h.merge(e.getElementById(p)),r[p].low=r[f].index,r[p].explored=!0,p===f)break}var y=h.edgesWith(h),g=h.merge(y);a.push(g),o=o.difference(g)}};return e.forEach(function(u){if(u.isNode()){var f=u.id();f in r||s(f)}}),{cut:o,components:a}},UG={tarjanStronglyConnected:lf,tsc:lf,tscc:lf,tarjanStronglyConnectedComponents:lf},dk={};[Yl,bz,wz,Cz,Tz,Az,_z,rG,bs,ws,Ib,pG,DG,PG,qG,GG,HG,UG].forEach(function(t){xt(dk,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var hk=0,vk=1,pk=2,fa=function(e){if(!(this instanceof fa))return new fa(e);this.id="Thenable/1.0.7",this.state=hk,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};fa.prototype={fulfill:function(e){return LE(this,vk,"fulfillValue",e)},reject:function(e){return LE(this,pk,"rejectReason",e)},then:function(e,r){var n=this,a=new fa;return n.onFulfilled.push(_E(e,a,"fulfill")),n.onRejected.push(_E(r,a,"reject")),gk(n),a.proxy}};var LE=function(e,r,n,a){return e.state===hk&&(e.state=r,e[n]=a,gk(e)),e},gk=function(e){e.state===vk?DE(e,"onFulfilled",e.fulfillValue):e.state===pk&&DE(e,"onRejected",e.rejectReason)},DE=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},_E=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(o){r.reject(o);return}yk(r,i)}}},yk=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(qr(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):yk(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};fa.all=function(t){return new fa(function(e,r){for(var n=new Array(t.length),a=0,i=function(u,f){n[u]=f,a++,a===t.length&&e(n)},o=0;o<t.length;o++)(function(s){var u=t[s],f=u!=null&&u.then!=null;if(f)u.then(function(h){i(s,h)},function(h){r(h)});else{var c=u;i(s,c)}})(o)})};fa.resolve=function(t){return new fa(function(e,r){e(t)})};fa.reject=function(t){return new fa(function(e,r){r(t)})};var Ls=typeof Promise<"u"?Promise:fa,qb=function(e,r,n){var a=m1(e),i=!a,o=this._private=xt({duration:1e3},r,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&yr(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var u=e.pan();o.startPan={x:u.x,y:u.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},wo=qb.prototype;xt(wo,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),qn(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(f,c){var h=e[f];h!=null&&(e[f]=e[c],e[c]=h)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new Ls(function(a,i){n.push(function(){a()})})}});wo.complete=wo.completed;wo.run=wo.play;wo.running=wo.playing;var VG={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var s=a[o];s._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this,u=!i,f=!u;if(!s.styleEnabled())return this;var c=s.style();r=xt({},r,n);var h=Object.keys(r).length===0;if(h)return new qb(o[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(f&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),f&&r.renderedPosition!=null){var p=r.renderedPosition,y=s.pan(),g=s.zoom();r.position=nk(p,g,y)}if(u&&r.panBy!=null){var E=r.panBy,w=s.pan();r.pan={x:w.x+E.x,y:w.y+E.y}}var v=r.center||r.centre;if(u&&v!=null){var C=s.getCenterPan(v.eles,r.zoom);C!=null&&(r.pan=C)}if(u&&r.fit!=null){var x=r.fit,S=s.getFitViewport(x.eles||x.boundingBox,x.padding);S!=null&&(r.pan=S.pan,r.zoom=S.zoom)}if(u&&It(r.zoom)){var A=s.getZoomedViewport(r.zoom);A!=null?(A.zoomed&&(r.zoom=A.zoom),A.panned&&(r.pan=A.pan)):r.zoom=null}return new qb(o[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(r=xt({},r,n));for(var u=0;u<o.length;u++){var f=o[u],c=f.animated()&&(r.queue===void 0||r.queue),h=f.animation(r,c?{queue:!0}:void 0);h.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<o.length;u++){for(var f=o[u],c=f._private,h=c.animation.current,p=0;p<h.length;p++){var y=h[p],g=y._private;n&&(g.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},Ph,ME;function _c(){if(ME)return Ph;ME=1;var t=Array.isArray;return Ph=t,Ph}var kh,RE;function WG(){if(RE)return kh;RE=1;var t=_c(),e=uu(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return kh=a,kh}var Nh,PE;function $G(){if(PE)return Nh;PE=1;var t=XP(),e=lu(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(s){if(!e(s))return!1;var u=t(s);return u==n||u==a||u==r||u==i}return Nh=o,Nh}var Oh,kE;function YG(){if(kE)return Oh;kE=1;var t=Sc(),e=t["__core-js_shared__"];return Oh=e,Oh}var Ih,NE;function XG(){if(NE)return Ih;NE=1;var t=YG(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return Ih=r,Ih}var Fh,OE;function KG(){if(OE)return Fh;OE=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Fh=r,Fh}var Bh,IE;function jG(){if(IE)return Bh;IE=1;var t=$G(),e=XG(),r=lu(),n=KG(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,f=s.hasOwnProperty,c=RegExp("^"+u.call(f).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(p){if(!r(p)||e(p))return!1;var y=t(p)?c:i;return y.test(n(p))}return Bh=h,Bh}var qh,FE;function ZG(){if(FE)return qh;FE=1;function t(e,r){return e==null?void 0:e[r]}return qh=t,qh}var zh,BE;function _1(){if(BE)return zh;BE=1;var t=jG(),e=ZG();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return zh=r,zh}var Gh,qE;function Mc(){if(qE)return Gh;qE=1;var t=_1(),e=t(Object,"create");return Gh=e,Gh}var Hh,zE;function QG(){if(zE)return Hh;zE=1;var t=Mc();function e(){this.__data__=t?t(null):{},this.size=0}return Hh=e,Hh}var Uh,GE;function JG(){if(GE)return Uh;GE=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Uh=t,Uh}var Vh,HE;function e5(){if(HE)return Vh;HE=1;var t=Mc(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var s=o[i];return s===e?void 0:s}return n.call(o,i)?o[i]:void 0}return Vh=a,Vh}var Wh,UE;function t5(){if(UE)return Wh;UE=1;var t=Mc(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Wh=n,Wh}var $h,VE;function r5(){if(VE)return $h;VE=1;var t=Mc(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return $h=r,$h}var Yh,WE;function n5(){if(WE)return Yh;WE=1;var t=QG(),e=JG(),r=e5(),n=t5(),a=r5();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Yh=i,Yh}var Xh,$E;function a5(){if($E)return Xh;$E=1;function t(){this.__data__=[],this.size=0}return Xh=t,Xh}var Kh,YE;function mk(){if(YE)return Kh;YE=1;function t(e,r){return e===r||e!==e&&r!==r}return Kh=t,Kh}var jh,XE;function Rc(){if(XE)return jh;XE=1;var t=mk();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return jh=e,jh}var Zh,KE;function i5(){if(KE)return Zh;KE=1;var t=Rc(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var s=i.length-1;return o==s?i.pop():r.call(i,o,1),--this.size,!0}return Zh=n,Zh}var Qh,jE;function o5(){if(jE)return Qh;jE=1;var t=Rc();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return Qh=e,Qh}var Jh,ZE;function s5(){if(ZE)return Jh;ZE=1;var t=Rc();function e(r){return t(this.__data__,r)>-1}return Jh=e,Jh}var ev,QE;function l5(){if(QE)return ev;QE=1;var t=Rc();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return ev=e,ev}var tv,JE;function u5(){if(JE)return tv;JE=1;var t=a5(),e=i5(),r=o5(),n=s5(),a=l5();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,tv=i,tv}var rv,eT;function f5(){if(eT)return rv;eT=1;var t=_1(),e=Sc(),r=t(e,"Map");return rv=r,rv}var nv,tT;function c5(){if(tT)return nv;tT=1;var t=n5(),e=u5(),r=f5();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return nv=n,nv}var av,rT;function d5(){if(rT)return av;rT=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return av=t,av}var iv,nT;function Pc(){if(nT)return iv;nT=1;var t=d5();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return iv=e,iv}var ov,aT;function h5(){if(aT)return ov;aT=1;var t=Pc();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return ov=e,ov}var sv,iT;function v5(){if(iT)return sv;iT=1;var t=Pc();function e(r){return t(this,r).get(r)}return sv=e,sv}var lv,oT;function p5(){if(oT)return lv;oT=1;var t=Pc();function e(r){return t(this,r).has(r)}return lv=e,lv}var uv,sT;function g5(){if(sT)return uv;sT=1;var t=Pc();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return uv=e,uv}var fv,lT;function y5(){if(lT)return fv;lT=1;var t=c5(),e=h5(),r=v5(),n=p5(),a=g5();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,fv=i,fv}var cv,uT;function m5(){if(uT)return cv;uT=1;var t=y5(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,s=a?a.apply(this,o):o[0],u=i.cache;if(u.has(s))return u.get(s);var f=n.apply(this,o);return i.cache=u.set(s,f)||u,f};return i.cache=new(r.Cache||t),i}return r.Cache=t,cv=r,cv}var dv,fT;function b5(){if(fT)return dv;fT=1;var t=m5(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return dv=r,dv}var hv,cT;function bk(){if(cT)return hv;cT=1;var t=b5(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,s,u,f){i.push(u?f.replace(r,"$1"):s||o)}),i});return hv=n,hv}var vv,dT;function wk(){if(dT)return vv;dT=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return vv=t,vv}var pv,hT;function w5(){if(hT)return pv;hT=1;var t=w1(),e=wk(),r=_c(),n=uu(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(s){if(typeof s=="string")return s;if(r(s))return e(s,o)+"";if(n(s))return i?i.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return pv=o,pv}var gv,vT;function xk(){if(vT)return gv;vT=1;var t=w5();function e(r){return r==null?"":t(r)}return gv=e,gv}var yv,pT;function Ck(){if(pT)return yv;pT=1;var t=_c(),e=WG(),r=bk(),n=xk();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return yv=a,yv}var mv,gT;function M1(){if(gT)return mv;gT=1;var t=uu();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return mv=e,mv}var bv,yT;function x5(){if(yT)return bv;yT=1;var t=Ck(),e=M1();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return bv=r,bv}var wv,mT;function C5(){if(mT)return wv;mT=1;var t=x5();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return wv=e,wv}var E5=C5(),T5=su(E5),xv,bT;function S5(){if(bT)return xv;bT=1;var t=_1(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return xv=e,xv}var Cv,wT;function A5(){if(wT)return Cv;wT=1;var t=S5();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return Cv=e,Cv}var Ev,xT;function L5(){if(xT)return Ev;xT=1;var t=A5(),e=mk(),r=Object.prototype,n=r.hasOwnProperty;function a(i,o,s){var u=i[o];(!(n.call(i,o)&&e(u,s))||s===void 0&&!(o in i))&&t(i,o,s)}return Ev=a,Ev}var Tv,CT;function D5(){if(CT)return Tv;CT=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return Tv=r,Tv}var Sv,ET;function _5(){if(ET)return Sv;ET=1;var t=L5(),e=Ck(),r=D5(),n=lu(),a=M1();function i(o,s,u,f){if(!n(o))return o;s=e(s,o);for(var c=-1,h=s.length,p=h-1,y=o;y!=null&&++c<h;){var g=a(s[c]),E=u;if(g==="__proto__"||g==="constructor"||g==="prototype")return o;if(c!=p){var w=y[g];E=f?f(w,g,y):void 0,E===void 0&&(E=n(w)?w:r(s[c+1])?[]:{})}t(y,g,E),y=y[g]}return o}return Sv=i,Sv}var Av,TT;function M5(){if(TT)return Av;TT=1;var t=_5();function e(r,n,a){return r==null?r:t(r,n,a)}return Av=e,Av}var R5=M5(),P5=su(R5),Lv,ST;function k5(){if(ST)return Lv;ST=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return Lv=t,Lv}var Dv,AT;function N5(){if(AT)return Dv;AT=1;var t=wk(),e=k5(),r=_c(),n=uu(),a=bk(),i=M1(),o=xk();function s(u){return r(u)?t(u,i):n(u)?[u]:e(a(o(u)))}return Dv=s,Dv}var O5=N5(),I5=su(O5),F5={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=xt({},r,e),function(a,i){var o=e,s=this,u=s.length!==void 0,f=u?s:[s],c=u?s[0]:s;if(mt(a)){var h=a.indexOf(".")!==-1,p=h&&I5(a);if(o.allowGetting&&i===void 0){var y;return c&&(o.beforeGet(c),p&&c._private[o.field][a]===void 0?y=T5(c._private[o.field],p):y=c._private[o.field][a]),y}else if(o.allowSetting&&i!==void 0){var g=!o.immutableKeys[a];if(g){var E=BP({},a,i);o.beforeSet(s,E);for(var w=0,v=f.length;w<v;w++){var C=f[w];o.canSet(C)&&(p&&c._private[o.field][a]===void 0?P5(C._private[o.field],p,i):C._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&It(a)){var x=a,S,A,D=Object.keys(x);o.beforeSet(s,x);for(var _=0;_<D.length;_++){S=D[_],A=x[S];var M=!o.immutableKeys[S];if(M)for(var k=0;k<f.length;k++){var F=f[k];o.canSet(F)&&(F._private[o.field][S]=A)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&yr(a)){var G=a;s.on(o.bindingEvent,G)}else if(o.allowGetting&&a===void 0){var B;return c&&(o.beforeGet(c),B=c._private[o.field]),B}return s}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=xt({},r,e),function(a){var i=e,o=this,s=o.length!==void 0,u=s?o:[o];if(mt(a)){for(var f=a.split(/\s+/),c=f.length,h=0;h<c;h++){var p=f[h];if(!Di(p)){var y=!i.immutableKeys[p];if(y)for(var g=0,E=u.length;g<E;g++)u[g]._private[i.field][p]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var w=0,v=u.length;w<v;w++)for(var C=u[w]._private[i.field],x=Object.keys(C),S=0;S<x.length;S++){var A=x[S],D=!i.immutableKeys[A];D&&(C[A]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},B5={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new Ls(function(s,u){var f=function(y){i.off.apply(i,h),s(y)},c=o.concat([f]),h=c.concat([]);i.on.apply(i,c)})}}},$t={};[VG,F5,B5].forEach(function(t){xt($t,t)});var q5={animate:$t.animate(),animation:$t.animation(),animated:$t.animated(),clearQueue:$t.clearQueue(),delay:$t.delay(),delayAnimation:$t.delayAnimation(),stop:$t.stop()},Tf={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(g){return n.push(g)}),n}else ar(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new As(e),o=0;o<r.length;o++){for(var s=r[o],u=s._private,f=u.classes,c=!1,h=0;h<e.length;h++){var p=e[h],y=f.has(p);if(!y){c=!0;break}}c||(c=f.size!==e.length),c&&(u.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){ar(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],o=0,s=n.length;o<s;o++)for(var u=n[o],f=u._private.classes,c=!1,h=0;h<e.length;h++){var p=e[h],y=f.has(p),g=!1;r||a&&!y?(f.add(p),g=!0):(!r||a&&y)&&(f.delete(p),g=!0),!c&&g&&(i.push(u),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Tf.className=Tf.classNames=Tf.classes;var Ot={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Br,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ot.variable="(?:[\\w-.]|(?:\\\\"+Ot.metaChar+"))+";Ot.className="(?:[\\w-]|(?:\\\\"+Ot.metaChar+"))+";Ot.value=Ot.string+"|"+Ot.number;Ot.id=Ot.variable;(function(){var t,e,r;for(t=Ot.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],Ot.comparatorOp+="|@"+e;for(t=Ot.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(Ot.comparatorOp+="|\\!"+e)})();var Jt=function(){return{checks:[]}},ht={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},zb=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return zq(t.selector,e.selector)}),z5=function(){for(var t={},e,r=0;r<zb.length;r++)e=zb[r],t[e.selector]=e.matches;return t}(),G5=function(e,r){return z5[e](r)},H5="("+zb.map(function(t){return t.selector}).join("|")+")",Jo=function(e){return e.replace(new RegExp("\\\\("+Ot.metaChar+")","g"),function(r,n){return n})},pi=function(e,r,n){e[e.length-1]=n},Gb=[{name:"group",query:!0,regex:"("+Ot.group+")",populate:function(e,r,n){var a=Fr(n,1),i=a[0];r.checks.push({type:ht.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:H5,populate:function(e,r,n){var a=Fr(n,1),i=a[0];r.checks.push({type:ht.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Ot.id+")",populate:function(e,r,n){var a=Fr(n,1),i=a[0];r.checks.push({type:ht.ID,value:Jo(i)})}},{name:"className",query:!0,regex:"\\.("+Ot.className+")",populate:function(e,r,n){var a=Fr(n,1),i=a[0];r.checks.push({type:ht.CLASS,value:Jo(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ot.variable+")\\s*\\]",populate:function(e,r,n){var a=Fr(n,1),i=a[0];r.checks.push({type:ht.DATA_EXIST,field:Jo(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ot.variable+")\\s*("+Ot.comparatorOp+")\\s*("+Ot.value+")\\s*\\]",populate:function(e,r,n){var a=Fr(n,3),i=a[0],o=a[1],s=a[2],u=new RegExp("^"+Ot.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),r.checks.push({type:ht.DATA_COMPARE,field:Jo(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ot.boolOp+")\\s*("+Ot.variable+")\\s*\\]",populate:function(e,r,n){var a=Fr(n,2),i=a[0],o=a[1];r.checks.push({type:ht.DATA_BOOL,field:Jo(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ot.meta+")\\s*("+Ot.comparatorOp+")\\s*("+Ot.number+")\\s*\\]\\]",populate:function(e,r,n){var a=Fr(n,3),i=a[0],o=a[1],s=a[2];r.checks.push({type:ht.META_COMPARE,field:Jo(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Ot.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Jt();return s}},{name:"directedEdge",separator:!0,regex:Ot.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Jt(),a=r,i=Jt();return n.checks.push({type:ht.DIRECTED_EDGE,source:a,target:i}),pi(e,r,n),e.edgeCount++,i}else{var o=Jt(),s=r,u=Jt();return o.checks.push({type:ht.NODE_SOURCE,source:s,target:u}),pi(e,r,o),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Ot.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Jt(),a=r,i=Jt();return n.checks.push({type:ht.UNDIRECTED_EDGE,nodes:[a,i]}),pi(e,r,n),e.edgeCount++,i}else{var o=Jt(),s=r,u=Jt();return o.checks.push({type:ht.NODE_NEIGHBOR,node:s,neighbor:u}),pi(e,r,o),u}}},{name:"child",separator:!0,regex:Ot.child,populate:function(e,r){if(e.currentSubject==null){var n=Jt(),a=Jt(),i=e[e.length-1];return n.checks.push({type:ht.CHILD,parent:i,child:a}),pi(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Jt(),s=e[e.length-1],u=Jt(),f=Jt(),c=Jt(),h=Jt();return o.checks.push({type:ht.COMPOUND_SPLIT,left:s,right:u,subject:f}),f.checks=r.checks,r.checks=[{type:ht.TRUE}],h.checks.push({type:ht.TRUE}),u.checks.push({type:ht.PARENT,parent:h,child:c}),pi(e,s,o),e.currentSubject=f,e.compoundCount++,c}else{var p=Jt(),y=Jt(),g=[{type:ht.PARENT,parent:p,child:y}];return p.checks=r.checks,r.checks=g,e.compoundCount++,y}}},{name:"descendant",separator:!0,regex:Ot.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Jt(),a=Jt(),i=e[e.length-1];return n.checks.push({type:ht.DESCENDANT,ancestor:i,descendant:a}),pi(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Jt(),s=e[e.length-1],u=Jt(),f=Jt(),c=Jt(),h=Jt();return o.checks.push({type:ht.COMPOUND_SPLIT,left:s,right:u,subject:f}),f.checks=r.checks,r.checks=[{type:ht.TRUE}],h.checks.push({type:ht.TRUE}),u.checks.push({type:ht.ANCESTOR,ancestor:h,descendant:c}),pi(e,s,o),e.currentSubject=f,e.compoundCount++,c}else{var p=Jt(),y=Jt(),g=[{type:ht.ANCESTOR,ancestor:p,descendant:y}];return p.checks=r.checks,r.checks=g,e.compoundCount++,y}}},{name:"subject",modifier:!0,regex:Ot.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Yt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===ht.DIRECTED_EDGE?a.type=ht.NODE_TARGET:i===ht.UNDIRECTED_EDGE&&(a.type=ht.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Gb.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var U5=function(e){for(var r,n,a,i=0;i<Gb.length;i++){var o=Gb[i],s=o.name,u=e.match(o.regexObj);if(u!=null){n=u,r=o,a=s;var f=u[0];e=e.substring(f.length);break}}return{expr:r,match:n,name:a,remaining:e}},V5=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},W5=function(e){var r=this,n=r.inputText=e,a=r[0]=Jt();for(r.length=1,n=V5(n);;){var i=U5(n);if(i.expr==null)return Yt("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(r,a,o);if(s===!1)return!1;if(s!=null&&(a=s),n=i.remaining,n.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var f=0;f<r.length;f++){var c=r[f];if(c.compoundCount>0&&c.edgeCount>0)return Yt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Yt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Yt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},$5=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return mt(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,h){var p=c.type,y=c.value;switch(p){case ht.GROUP:{var g=e(y);return g.substring(0,g.length-1)}case ht.DATA_COMPARE:{var E=c.field,w=c.operator;return"["+E+n(e(w))+r(y)+"]"}case ht.DATA_BOOL:{var v=c.operator,C=c.field;return"["+e(v)+C+"]"}case ht.DATA_EXIST:{var x=c.field;return"["+x+"]"}case ht.META_COMPARE:{var S=c.operator,A=c.field;return"[["+A+n(e(S))+r(y)+"]]"}case ht.STATE:return y;case ht.ID:return"#"+y;case ht.CLASS:return"."+y;case ht.PARENT:case ht.CHILD:return i(c.parent,h)+n(">")+i(c.child,h);case ht.ANCESTOR:case ht.DESCENDANT:return i(c.ancestor,h)+" "+i(c.descendant,h);case ht.COMPOUND_SPLIT:{var D=i(c.left,h),_=i(c.subject,h),M=i(c.right,h);return D+(D.length>0?" ":"")+_+M}case ht.TRUE:return""}},i=function(c,h){return c.checks.reduce(function(p,y,g){return p+(h===c&&g===0?"$":"")+a(y,h)},"")},o="",s=0;s<this.length;s++){var u=this[s];o+=i(u,u.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},Y5={parse:W5,toString:$5},Ek=function(e,r,n){var a,i=mt(e),o=at(e),s=mt(n),u,f,c=!1,h=!1,p=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),h=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||s||c)&&(u=!i&&!o?"":""+e,f=""+n),c&&(e=u=u.toLowerCase(),n=f=f.toLowerCase()),r){case"*=":a=u.indexOf(f)>=0;break;case"$=":a=u.indexOf(f,u.length-f.length)>=0;break;case"^=":a=u.indexOf(f)===0;break;case"=":a=e===n;break;case">":p=!0,a=e>n;break;case">=":p=!0,a=e>=n;break;case"<":p=!0,a=e<n;break;case"<=":p=!0,a=e<=n;break;default:a=!1;break}return h&&(e!=null||!p)&&(a=!a),a},X5=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},K5=function(e){return e!==void 0},R1=function(e,r){return e.data(r)},j5=function(e,r){return e[r]()},xr=[],fr=function(e,r){return e.checks.every(function(n){return xr[n.type](n,r)})};xr[ht.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};xr[ht.STATE]=function(t,e){var r=t.value;return G5(r,e)};xr[ht.ID]=function(t,e){var r=t.value;return e.id()===r};xr[ht.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};xr[ht.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Ek(j5(e,r),n,a)};xr[ht.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Ek(R1(e,r),n,a)};xr[ht.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return X5(R1(e,r),n)};xr[ht.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,K5(R1(e,r))};xr[ht.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return fr(r,a)&&fr(n,i)||fr(n,a)&&fr(r,i)};xr[ht.NODE_NEIGHBOR]=function(t,e){return fr(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&fr(t.neighbor,r)})};xr[ht.DIRECTED_EDGE]=function(t,e){return fr(t.source,e.source())&&fr(t.target,e.target())};xr[ht.NODE_SOURCE]=function(t,e){return fr(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&fr(t.target,r)})};xr[ht.NODE_TARGET]=function(t,e){return fr(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&fr(t.source,r)})};xr[ht.CHILD]=function(t,e){return fr(t.child,e)&&fr(t.parent,e.parent())};xr[ht.PARENT]=function(t,e){return fr(t.parent,e)&&e.children().some(function(r){return fr(t.child,r)})};xr[ht.DESCENDANT]=function(t,e){return fr(t.descendant,e)&&e.ancestors().some(function(r){return fr(t.ancestor,r)})};xr[ht.ANCESTOR]=function(t,e){return fr(t.ancestor,e)&&e.descendants().some(function(r){return fr(t.descendant,r)})};xr[ht.COMPOUND_SPLIT]=function(t,e){return fr(t.subject,e)&&fr(t.left,e)&&fr(t.right,e)};xr[ht.TRUE]=function(){return!0};xr[ht.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};xr[ht.FILTER]=function(t,e){var r=t.value;return r(e)};var Z5=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===ht.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var o=0;o<r.length;o++){var s=r[o];if(fr(s,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},Q5=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(fr(a,e))return!0}return!1},J5={matches:Q5,filter:Z5},Ri=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||mt(e)&&e.match(/^\s*$/)||(qn(e)?this.addQuery({checks:[{type:ht.COLLECTION,value:e.collection()}]}):yr(e)?this.addQuery({checks:[{type:ht.FILTER,value:e}]}):mt(e)?this.parse(e)||(this.invalid=!0):pr("A selector must be created from a string; found "))},Pi=Ri.prototype;[Y5,J5].forEach(function(t){return xt(Pi,t)});Pi.text=function(){return this.inputText};Pi.size=function(){return this.length};Pi.eq=function(t){return this[t]};Pi.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};Pi.addQuery=function(t){this[this.length++]=t};Pi.selector=Pi.toString;var Ei={allAre:function(e){var r=new Ri(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Ri(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Ei.allAreNeighbours=Ei.allAreNeighbors;Ei.has=Ei.contains;Ei.equal=Ei.equals=Ei.same;var $n=function(e,r){return function(a,i,o,s){var u=a,f=this,c;if(u==null?c="":qn(u)&&u.length===1&&(c=u.id()),f.length===1&&c){var h=f[0]._private,p=h.traversalCache=h.traversalCache||{},y=p[r]=p[r]||[],g=mo(c),E=y[g];return E||(y[g]=e.call(f,a,i,o,s))}else return e.call(f,a,i,o,s)}},Ss={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&r.push(o)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:$n(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];r.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function P1(t,e,r,n){for(var a=[],i=new As,o=t.cy(),s=o.hasCompoundNodes(),u=0;u<t.length;u++){var f=t[u];r?a.push(f):s&&n(a,i,f)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),s&&n(a,i,c)}return t}function Tk(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}Ss.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return P1(this,t,e,Tk)};function Sk(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}Ss.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return P1(this,t,e,Sk)};function eH(t,e,r){Sk(t,e,r),Tk(t,e,r)}Ss.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return P1(this,t,e,eH)};Ss.ancestors=Ss.parents;var jl,Ak;jl=Ak={data:$t.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:$t.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:$t.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$t.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:$t.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:$t.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};jl.attr=jl.data;jl.removeAttr=jl.removeData;var tH=Ak,kc={};function _v(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=t(a,s))}return n}else return}}xt(kc,{degree:_v(function(t,e){return e.source().same(e.target())?2:1}),indegree:_v(function(t,e){return e.target().same(t)?1:0}),outdegree:_v(function(t,e){return e.source().same(t)?1:0})});function es(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],s=o[t](r);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}xt(kc,{minDegree:es("degree",function(t,e){return t<e}),maxDegree:es("degree",function(t,e){return t>e}),minIndegree:es("indegree",function(t,e){return t<e}),maxIndegree:es("indegree",function(t,e){return t>e}),minOutdegree:es("outdegree",function(t,e){return t<e}),maxOutdegree:es("outdegree",function(t,e){return t>e})});xt(kc,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var oa,Lk,Dk=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},LT={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){Dk(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};oa=Lk={position:$t.data(LT),silentPosition:$t.data(xt({},LT,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){Dk(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(It(e))r?this.silentPosition(e):this.position(e);else if(yr(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=n(o,i))&&(r?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(It(e)?(a={x:at(e.x)?e.x:0,y:at(e.y)?e.y:0},n=r):mt(e)&&at(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),f={x:u.x+a.x,y:u.y+a.y};n?s.silentPosition(f):s.position(f)}}i.endBatch()}return this},silentShift:function(e,r){return It(e)?this.shift(e,!0):mt(e)&&at(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=It(e)?e:void 0,u=s!==void 0||r!==void 0&&mt(e);if(n&&n.isNode())if(u)for(var f=0;f<this.length;f++){var c=this[f];r!==void 0?c.position(e,(r-o[e])/i):s!==void 0&&c.position(nk(s,i,o))}else{var h=n.position();return s=Lc(h,i,o),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=It(e)?e:void 0,o=i!==void 0||r!==void 0&&mt(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var u=0;u<this.length;u++){var f=this[u],c=s?f.parent():null,h=c&&c.length>0,p=h;h&&(c=c[0]);var y=p?c.position():{x:0,y:0};r!==void 0?f.position(e,r+y[e]):i!==void 0&&f.position({x:i.x+y.x,y:i.y+y.y})}else{var g=n.position(),E=s?n.parent():null,w=E&&E.length>0,v=w;w&&(E=E[0]);var C=v?E.position():{x:0,y:0};return i={x:g.x-C.x,y:g.y-C.y},e===void 0?i:i[e]}else if(!o)return;return this}};oa.modelPosition=oa.point=oa.position;oa.modelPositions=oa.points=oa.positions;oa.renderedPoint=oa.renderedPosition;oa.relativePoint=oa.relativePosition;var rH=Lk,xs,Bi;xs=Bi={};Bi.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,u=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:u,w:o-i,h:u-s}};Bi.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Bi.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(o){if(!o.isParent())return;var s=o._private,u=o.children(),f=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},h=u.boundingBox({includeLabels:f,includeOverlays:!1,useCache:!1}),p=s.position;(h.w===0||h.h===0)&&(h={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},h.x1=p.x-h.w/2,h.x2=p.x+h.w/2,h.y1=p.y-h.h/2,h.y2=p.y+h.h/2);function y(k,F,G){var B=0,q=0,R=F+G;return k>0&&R>0&&(B=F/R*k,q=G/R*k),{biasDiff:B,biasComplementDiff:q}}function g(k,F,G,B){if(G.units==="%")switch(B){case"width":return k>0?G.pfValue*k:0;case"height":return F>0?G.pfValue*F:0;case"average":return k>0&&F>0?G.pfValue*(k+F)/2:0;case"min":return k>0&&F>0?k>F?G.pfValue*F:G.pfValue*k:0;case"max":return k>0&&F>0?k>F?G.pfValue*k:G.pfValue*F:0;default:return 0}else return G.units==="px"?G.pfValue:0}var E=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(E=E*100/c.width.val);var w=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(w=w*100/c.width.val);var v=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(v=v*100/c.height.val);var C=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(C=C*100/c.height.val);var x=y(c.width.val-h.w,E,w),S=x.biasDiff,A=x.biasComplementDiff,D=y(c.height.val-h.h,v,C),_=D.biasDiff,M=D.biasComplementDiff;s.autoPadding=g(h.w,h.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(h.w,c.width.val),p.x=(-S+h.x1+h.x2+A)/2,s.autoHeight=Math.max(h.h,c.height.val),p.y=(-_+h.y1+h.y2+M)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var Wn=function(e){return e===1/0||e===-1/0?0:e},na=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},lo=function(e,r){return r==null?e:na(e,r.x1,r.y1,r.x2,r.y2)},vl=function(e,r,n){return Mn(e,r,n)},uf=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,o=i.arrowWidth/2,s=r.pstyle(n+"-arrow-shape").value,u,f;if(s!=="none"){n==="source"?(u=i.srcX,f=i.srcY):n==="target"?(u=i.tgtX,f=i.tgtY):(u=i.midX,f=i.midY);var c=a.arrowBounds=a.arrowBounds||{},h=c[n]=c[n]||{};h.x1=u-o,h.y1=f-o,h.x2=u+o,h.y2=f+o,h.w=h.x2-h.x1,h.h=h.y2-h.y1,Cf(h,1),na(e,h.x1,h.y1,h.x2,h.y2)}}},Mv=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,o=i.rstyle,s=r.pstyle(a+"label").strValue;if(s){var u=r.pstyle("text-halign"),f=r.pstyle("text-valign"),c=vl(o,"labelWidth",n),h=vl(o,"labelHeight",n),p=vl(o,"labelX",n),y=vl(o,"labelY",n),g=r.pstyle(a+"text-margin-x").pfValue,E=r.pstyle(a+"text-margin-y").pfValue,w=r.isEdge(),v=r.pstyle(a+"text-rotation"),C=r.pstyle("text-outline-width").pfValue,x=r.pstyle("text-border-width").pfValue,S=x/2,A=r.pstyle("text-background-padding").pfValue,D=2,_=h,M=c,k=M/2,F=_/2,G,B,q,R;if(w)G=p-k,B=p+k,q=y-F,R=y+F;else{switch(u.value){case"left":G=p-M,B=p;break;case"center":G=p-k,B=p+k;break;case"right":G=p,B=p+M;break}switch(f.value){case"top":q=y-_,R=y;break;case"center":q=y-F,R=y+F;break;case"bottom":q=y,R=y+_;break}}var P=g-Math.max(C,S)-A-D,N=g+Math.max(C,S)+A+D,I=E-Math.max(C,S)-A-D,z=E+Math.max(C,S)+A+D;G+=P,B+=N,q+=I,R+=z;var ae=n||"main",re=i.labelBounds,K=re[ae]=re[ae]||{};K.x1=G,K.y1=q,K.x2=B,K.y2=R,K.w=B-G,K.h=R-q,K.leftPad=P,K.rightPad=N,K.topPad=I,K.botPad=z;var V=w&&v.strValue==="autorotate",Z=v.pfValue!=null&&v.pfValue!==0;if(V||Z){var U=V?vl(i.rstyle,"labelAngle",n):v.pfValue,W=Math.cos(U),Y=Math.sin(U),ee=(G+B)/2,oe=(q+R)/2;if(!w){switch(u.value){case"left":ee=B;break;case"right":ee=G;break}switch(f.value){case"top":oe=R;break;case"bottom":oe=q;break}}var te=function(be,Te){return be=be-ee,Te=Te-oe,{x:be*W-Te*Y+ee,y:be*Y+Te*W+oe}},ie=te(G,q),se=te(G,R),$=te(B,q),ne=te(B,R);G=Math.min(ie.x,se.x,$.x,ne.x),B=Math.max(ie.x,se.x,$.x,ne.x),q=Math.min(ie.y,se.y,$.y,ne.y),R=Math.max(ie.y,se.y,$.y,ne.y)}var le=ae+"Rot",Se=re[le]=re[le]||{};Se.x1=G,Se.y1=q,Se.x2=B,Se.y2=R,Se.w=B-G,Se.h=R-q,na(e,G,q,B,R),na(i.labelBounds.all,G,q,B,R)}return e}},nH=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value;if(n>0&&a>0){var i=r.pstyle("outline-offset").value,o=r.pstyle("shape").value,s=a+i,u=(e.w+s*2)/e.w,f=(e.h+s*2)/e.h,c=0,h=0;["diamond","pentagon","round-triangle"].includes(o)?(u=(e.w+s*2.4)/e.w,h=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?u=(e.w+s*2.4)/e.w:o==="star"?(u=(e.w+s*2.8)/e.w,f=(e.h+s*2.6)/e.h,h=-s/3.8):o==="triangle"?(u=(e.w+s*2.8)/e.w,f=(e.h+s*2.4)/e.h,h=-s/1.4):o==="vee"&&(u=(e.w+s*4.4)/e.w,f=(e.h+s*3.8)/e.h,h=-s*.5);var p=e.h*f-e.h,y=e.w*u-e.w;if(Ef(e,[Math.ceil(p/2),Math.ceil(y/2)]),c!=0||h!==0){var g=zz(e,c,h);ak(e,g)}}}},aH=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=Nn(),s=e._private,u=e.isNode(),f=e.isEdge(),c,h,p,y,g,E,w=s.rstyle,v=u&&a?e.pstyle("bounds-expansion").pfValue:[0],C=function(De){return De.pstyle("display").value!=="none"},x=!a||C(e)&&(!f||C(e.source())&&C(e.target()));if(x){var S=0,A=0;a&&r.includeOverlays&&(S=e.pstyle("overlay-opacity").value,S!==0&&(A=e.pstyle("overlay-padding").value));var D=0,_=0;a&&r.includeUnderlays&&(D=e.pstyle("underlay-opacity").value,D!==0&&(_=e.pstyle("underlay-padding").value));var M=Math.max(A,_),k=0,F=0;if(a&&(k=e.pstyle("width").pfValue,F=k/2),u&&r.includeNodes){var G=e.position();g=G.x,E=G.y;var B=e.outerWidth(),q=B/2,R=e.outerHeight(),P=R/2;c=g-q,h=g+q,p=E-P,y=E+P,na(o,c,p,h,y),a&&r.includeOutlines&&nH(o,e)}else if(f&&r.includeEdges)if(a&&!i){var N=e.pstyle("curve-style").strValue;if(c=Math.min(w.srcX,w.midX,w.tgtX),h=Math.max(w.srcX,w.midX,w.tgtX),p=Math.min(w.srcY,w.midY,w.tgtY),y=Math.max(w.srcY,w.midY,w.tgtY),c-=F,h+=F,p-=F,y+=F,na(o,c,p,h,y),N==="haystack"){var I=w.haystackPts;if(I&&I.length===2){if(c=I[0].x,p=I[0].y,h=I[1].x,y=I[1].y,c>h){var z=c;c=h,h=z}if(p>y){var ae=p;p=y,y=ae}na(o,c-F,p-F,h+F,y+F)}}else if(N==="bezier"||N==="unbundled-bezier"||N.endsWith("segments")||N.endsWith("taxi")){var re;switch(N){case"bezier":case"unbundled-bezier":re=w.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":re=w.linePts;break}if(re!=null)for(var K=0;K<re.length;K++){var V=re[K];c=V.x-F,h=V.x+F,p=V.y-F,y=V.y+F,na(o,c,p,h,y)}}}else{var Z=e.source(),U=Z.position(),W=e.target(),Y=W.position();if(c=U.x,h=Y.x,p=U.y,y=Y.y,c>h){var ee=c;c=h,h=ee}if(p>y){var oe=p;p=y,y=oe}c-=F,h+=F,p-=F,y+=F,na(o,c,p,h,y)}if(a&&r.includeEdges&&f&&(uf(o,e,"mid-source"),uf(o,e,"mid-target"),uf(o,e,"source"),uf(o,e,"target")),a){var te=e.pstyle("ghost").value==="yes";if(te){var ie=e.pstyle("ghost-offset-x").pfValue,se=e.pstyle("ghost-offset-y").pfValue;na(o,o.x1+ie,o.y1+se,o.x2+ie,o.y2+se)}}var $=s.bodyBounds=s.bodyBounds||{};vE($,o),Ef($,v),Cf($,1),a&&(c=o.x1,h=o.x2,p=o.y1,y=o.y2,na(o,c-M,p-M,h+M,y+M));var ne=s.overlayBounds=s.overlayBounds||{};vE(ne,o),Ef(ne,v),Cf(ne,1);var le=s.labelBounds=s.labelBounds||{};le.all!=null?qz(le.all):le.all=Nn(),a&&r.includeLabels&&(r.includeMainLabels&&Mv(o,e,null),f&&(r.includeSourceLabels&&Mv(o,e,"source"),r.includeTargetLabels&&Mv(o,e,"target")))}return o.x1=Wn(o.x1),o.y1=Wn(o.y1),o.x2=Wn(o.x2),o.y2=Wn(o.y2),o.w=Wn(o.x2-o.x1),o.h=Wn(o.y2-o.y1),o.w>0&&o.h>0&&x&&(Ef(o,v),Cf(o,1)),o},_k=function(e){var r=0,n=function(o){return(o?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},Mk=function(e){var r=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return lE([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=e.position();return lE([r(i.x),r(i.y)])}},DT=function(e,r){var n=e._private,a,i=e.isEdge(),o=r==null?_T:_k(r),s=o===_T;if(n.bbCache==null?(a=aH(e,Zl),n.bbCache=a,n.bbCachePosKey=Mk(e)):a=n.bbCache,!s){var u=e.isNode();a=Nn(),(r.includeNodes&&u||r.includeEdges&&!u)&&(r.includeOverlays?lo(a,n.overlayBounds):lo(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?lo(a,n.labelBounds.all):(r.includeMainLabels&&lo(a,n.labelBounds.mainRot),r.includeSourceLabels&&lo(a,n.labelBounds.sourceRot),r.includeTargetLabels&&lo(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Zl={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},_T=_k(Zl),MT=nn(Zl);Bi.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=Cs(function(c){var h=c._private;return h.bbCache==null||h.styleDirty||h.bbCachePosKey!==Mk(c)},function(c){return c.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=Zl:t=MT(t),e=DT(this[0],t);else{e=Nn(),t=t||Zl;var a=MT(t),i=this,o=i.cy(),s=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<i.length;u++){var f=i[u];n(f)&&f.dirtyBoundingBoxCache(),lo(e,DT(f,a))}}return e.x1=Wn(e.x1),e.y1=Wn(e.y1),e.x2=Wn(e.x2),e.y2=Wn(e.y2),e.w=Wn(e.x2-e.x1),e.h=Wn(e.y2-e.y1),e};Bi.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Bi.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(f){return f.isParent()}),e=e.not(a)),It(t)){var i=t;t=function(){return i}}var o=function(c,h){return c._private.bbAtOldPos=t(c,h)},s=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(o).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var u=Bz(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),u};xs.boundingbox=xs.bb=xs.boundingBox;xs.renderedBoundingbox=xs.renderedBoundingBox;var iH=Bi,Cl,du;Cl=du={};var Rk=function(e){e.uppercaseName=YC(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=YC(e.outerName),Cl[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Cl["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var s=n[e.name](),u=n.pstyle("border-position").value,f;u==="center"?f=n.pstyle("border-width").pfValue:u==="outside"?f=2*n.pstyle("border-width").pfValue:f=0;var c=2*n.padding();return s+f+c}else return 1},Cl["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},Cl["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};Rk({name:"width"});Rk({name:"height"});du.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};du.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};du.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var oH=du,sH=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},lH=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return Lc(r(e),n.zoom(),n.pan())}},uH=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(o){return Lc(o,i,a)})}},fH=function(e){return e.renderer().getControlPoints(e)},cH=function(e){return e.renderer().getSegmentPoints(e)},dH=function(e){return e.renderer().getSourceEndpoint(e)},hH=function(e){return e.renderer().getTargetEndpoint(e)},vH=function(e){return e.renderer().getEdgeMidpoint(e)},RT={controlPoints:{get:fH,mult:!0},segmentPoints:{get:cH,mult:!0},sourceEndpoint:{get:dH},targetEndpoint:{get:hH},midpoint:{get:vH}},pH=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},gH=Object.keys(RT).reduce(function(t,e){var r=RT[e],n=pH(e);return t[e]=function(){return sH(this,r.get)},r.mult?t[n]=function(){return uH(this,r.get)}:t[n]=function(){return lH(this,r.get)},t},{}),yH=xt({},rH,iH,oH,gH);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Pk=function(e,r){this.recycle(e,r)};function pl(){return!1}function ff(){return!0}Pk.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=pl,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ff:pl):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=ff;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=ff;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ff,this.stopPropagation()},isDefaultPrevented:pl,isPropagationStopped:pl,isImmediatePropagationStopped:pl};var kk=/^([^.]+)(\.(?:[^.]+))?$/,mH=".*",Nk={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},PT=Object.keys(Nk),bH={};function Nc(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bH,e=arguments.length>1?arguments[1]:void 0,r=0;r<PT.length;r++){var n=PT[r];this[n]=t[n]||Nk[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ki=Nc.prototype,Ok=function(e,r,n,a,i,o,s){yr(a)&&(i=a,a=null),s&&(o==null?o=s:o=xt({},o,s));for(var u=ar(n)?n:n.split(/\s+/),f=0;f<u.length;f++){var c=u[f];if(!Di(c)){var h=c.match(kk);if(h){var p=h[1],y=h[2]?h[2]:null,g=r(e,c,p,y,a,i,o);if(g===!1)break}}}},kT=function(e,r){return e.addEventFields(e.context,r),new Pk(r.type,r)},wH=function(e,r,n){if(_q(n)){r(e,n);return}else if(It(n)){r(e,kT(e,n));return}for(var a=ar(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!Di(o)){var s=o.match(kk);if(s){var u=s[1],f=s[2]?s[2]:null,c=kT(e,{type:u,namespace:f,target:e.context});r(e,c)}}}};ki.on=ki.addListener=function(t,e,r,n,a){return Ok(this,function(i,o,s,u,f,c,h){yr(c)&&i.listeners.push({event:o,callback:c,type:s,namespace:u,qualifier:f,conf:h})},t,e,r,n,a),this};ki.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};ki.removeListener=ki.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=lz(this.listeners));for(var i=this.listeners,o=function(f){var c=i[f];Ok(a,function(h,p,y,g,E,w){if((c.type===y||t==="*")&&(!g&&c.namespace!==".*"||c.namespace===g)&&(!E||h.qualifierCompare(c.qualifier,E))&&(!w||c.callback===w))return i.splice(f,1),!1},t,e,r,n)},s=i.length-1;s>=0;s--)o(s);return this};ki.removeAllListeners=function(){return this.removeListener("*")};ki.emit=ki.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,ar(e)||(e=[e]),wH(this,function(i,o){r!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}],a=n.length);for(var s=function(){var c=n[u];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===mH)&&i.eventMatches(i.context,c,o)){var h=[o];e!=null&&fz(h,e),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(g){return g!==c}));var p=i.callbackContext(i.context,c,o),y=c.callback.apply(p,h);i.afterEmit(i.context,c,o),y===!1&&(o.stopPropagation(),o.preventDefault())}},u=0;u<a;u++)s();i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},t),this.emitting--,this};var xH={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ou(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},cf=function(e){return mt(e)?new Ri(e):e},Ik={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new Nc(xH,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=cf(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=cf(r),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=cf(r),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=cf(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};$t.eventAliasesOn(Ik);var Fk={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(mt(e)||qn(e))return new Ri(e).filter(this);if(yr(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){mt(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(mt(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,s=o?a:i,u=o?i:a,f=0;f<s.length;f++){var c=s[f];u.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;mt(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,o=function(u,f){for(var c=0;c<u.length;c++){var h=u[c],p=h._private.data.id,y=f.hasElementWithId(p);y||n.push(h)}};return o(a,i),o(i,a),n},diff:function(e){var r=this._private.cy;mt(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,s=e,u=function(c,h,p){for(var y=0;y<c.length;y++){var g=c[y],E=g._private.data.id,w=h.hasElementWithId(E);w?i.merge(g):p.push(g)}};return u(o,s,n),u(s,o,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(mt(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&a.push(o)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&mt(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,o=0;o<e.length;o++){var s=e[o],u=s._private.data.id,f=!i.has(u);if(f){var c=this.length++;this[c]=s,i.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,u=this[s],f=u._private.data.id;this[s]=void 0,this[e]=u,i.set(f,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&mt(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],u=r?e.apply(r,[s,o,i]):e(s,o,i);u>n&&(n=u,a=s)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],u=r?e.apply(r,[s,o,i]):e(s,o,i);u<n&&(n=u,a=s)}return{value:n,ele:a}}},qt=Fk;qt.u=qt["|"]=qt["+"]=qt.union=qt.or=qt.add;qt["\\"]=qt["!"]=qt["-"]=qt.difference=qt.relativeComplement=qt.subtract=qt.not;qt.n=qt["&"]=qt["."]=qt.and=qt.intersection=qt.intersect;qt["^"]=qt["(+)"]=qt["(-)"]=qt.symmetricDifference=qt.symdiff=qt.xor;qt.fnFilter=qt.filterFn=qt.stdFilter=qt.filter;qt.complement=qt.abscomp=qt.absoluteComplement;var CH={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Bk=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var h=c.pstyle("z-compound-depth");return h.value==="auto"?a?c.zDepth():0:h.value==="bottom"?-1:h.value==="top"?x1:0}var o=i(e)-i(r);if(o!==0)return o;function s(c){var h=c.pstyle("z-index-compare");return h.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(r);if(u!==0)return u;var f=e.pstyle("z-index").value-r.pstyle("z-index").value;return f!==0?f:e.poolIndex()-r.poolIndex()},tc={forEach:function(e,r){if(yr(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=r?e.apply(r,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!yr(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(Bk)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:x1-1}else{var i=r.source,o=r.target,s=i.zDepth(),u=o.zDepth();return Math.max(s,u,0)}}}};tc.each=tc.forEach;var EH=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":qr(Symbol))!=e&&qr(Symbol.iterator)!=e;r&&(tc[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return BP({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};EH();var TH=nn({nodeDimensionsIncludeLabels:!1}),Sf={layoutDimensions:function(e){e=TH(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(A){return!A.isParent()}),i=this.cy(),o=r.eles,s=function(D){return D.id()},u=Cs(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var f=function(D,_,M){var k={x:_.x1+_.w/2,y:_.y1+_.h/2},F={x:(M.x-k.x)*D,y:(M.y-k.y)*D};return{x:k.x+F.x,y:k.y+F.y}},c=r.spacingFactor&&r.spacingFactor!==1,h=function(){if(!c)return null;for(var D=Nn(),_=0;_<a.length;_++){var M=a[_],k=u(M,_);Gz(D,k.x,k.y)}return D},p=h(),y=Cs(function(A,D){var _=u(A,D);if(c){var M=Math.abs(r.spacingFactor);_=f(M,p,_)}return r.transform!=null&&(_=r.transform(A,_)),_},s);if(r.animate){for(var g=0;g<a.length;g++){var E=a[g],w=y(E,g),v=r.animateFilter==null||r.animateFilter(E,g);if(v){var C=E.animation({position:w,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(C)}else E.position(w)}if(r.fit){var x=i.animation({fit:{boundingBox:o.boundingBoxAt(y),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(x)}else if(r.zoom!==void 0&&r.pan!==void 0){var S=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(S)}e.animations.forEach(function(A){return A.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),Ls.all(e.animations.map(function(A){return A.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(y),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(xt({},e,{eles:this}))}};Sf.createLayout=Sf.makeLayout=Sf.layout;function qk(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function Oc(t,e){return t=mo(t),function(n){return qk(t,e,n)}}function Ic(t,e){t=mo(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return qk(t,r,a)}}var tn={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(It(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(mt(e))if(r===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var f=i[u];a.removeBypasses(f,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var u=o[s],f=u.pstyle("opacity").value;i=f*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Rv(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function k1(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||Rv(i,n);var u=s.source,f=s.target;return r(u)&&(!o||Rv(u,r))&&(u===f||r(f)&&(!o||Rv(f,r)))}}}var Ds=Oc("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});tn.takesUpSpace=Ic("takesUpSpace",k1({ok:Ds}));var SH=Oc("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Ds(t)}),AH=Oc("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&Ds(t)});tn.interactive=Ic("interactive",k1({ok:SH,parentOk:AH,edgeOkViaNode:Ds}));tn.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var LH=Oc("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Ds(t)}),DH=Ds;tn.visible=Ic("visible",k1({ok:LH,edgeOkViaNode:DH}));tn.hidden=function(){var t=this[0];if(t)return!t.visible()};tn.isBundledBezier=Ic("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});tn.bypass=tn.css=tn.style;tn.renderedCss=tn.renderedStyle;tn.removeBypass=tn.removeCss=tn.removeStyle;tn.pstyle=tn.parsedStyle;var Ti={};function NT(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&yr(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&ar(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],f=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var h=t.overrideAble(u);if(h!==void 0&&(f=h,!h))return this}f&&(u._private[t.field]=t.value,c&&r.push(u))}var p=this.spawn(r);p.updateStyle(),p.emit(t.event),o&&p.emit(o)}return this}}function _s(t){Ti[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Ti[t.on]=NT({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Ti[t.off]=NT({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}_s({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});_s({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});_s({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});_s({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Ti.deselect=Ti.unselect;Ti.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};_s({field:"active",on:"activate",off:"unactivate"});_s({field:"pannable",on:"panify",off:"unpanify"});Ti.inactive=function(){var t=this[0];if(t)return!t._private.active};var hn={},OT=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var s=a[o];if(s.isNode()){for(var u=!1,f=s.connectedEdges(),c=0;c<f.length;c++){var h=f[c],p=h.source(),y=h.target();if(e.noIncomingEdges&&y===s&&p!==s||e.noOutgoingEdges&&p===s&&y!==s){u=!0;break}}u||i.push(s)}}return this.spawn(i,!0).filter(n)}},IT=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var s=o.connectedEdges(),u=0;u<s.length;u++){var f=s[u],c=f.source(),h=f.target();e.outgoing&&c===o?(a.push(f),a.push(h)):e.incoming&&h===o&&(a.push(f),a.push(c))}}return this.spawn(a,!0).filter(r)}},FT=function(e){return function(r){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,u=0;u<o.length;u++){var f=o[u],c=f.id();i[c]||(i[c]=!0,a.push(f),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(r)}};hn.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};xt(hn,{roots:OT({noIncomingEdges:!0}),leaves:OT({noOutgoingEdges:!0}),outgoers:$n(IT({outgoing:!0}),"outgoers"),successors:FT({outgoing:!0}),incomers:$n(IT({incoming:!0}),"incomers"),predecessors:FT({})});xt(hn,{neighborhood:$n(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],u=s.source(),f=s.target(),c=a===u?f:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});hn.neighbourhood=hn.neighborhood;hn.closedNeighbourhood=hn.closedNeighborhood;hn.openNeighbourhood=hn.openNeighborhood;xt(hn,{source:$n(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:$n(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:BT({attr:"source"}),targets:BT({attr:"target"})});function BT(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[t.attr];o&&n.push(o)}return this.spawn(n,!0).filter(r)}}xt(hn,{edgesWith:$n(qT(),"edgesWith"),edgesTo:$n(qT({thisIsSrc:!0}),"edgesTo")});function qT(t){return function(r){var n=[],a=this._private.cy,i=t||{};mt(r)&&(r=a.$(r));for(var o=0;o<r.length;o++)for(var s=r[o]._private.edges,u=0;u<s.length;u++){var f=s[u],c=f._private.data,h=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),p=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),y=h||p;y&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!h||i.thisIsTgt&&!p)||n.push(f))}return this.spawn(n,!0)}}xt(hn,{connectedEdges:$n(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:$n(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:$n(zT(),"parallelEdges"),codirectedEdges:$n(zT({codirected:!0}),"codirectedEdges")});function zT(t){var e={codirected:!1};return t=xt({},e,t),function(n){for(var a=[],i=this.edges(),o=t,s=0;s<i.length;s++)for(var u=i[s],f=u._private,c=f.source,h=c._private.data.id,p=f.data.target,y=c._private.edges,g=0;g<y.length;g++){var E=y[g],w=E._private.data,v=w.target,C=w.source,x=v===p&&C===h,S=h===v&&p===C;(o.codirected&&x||!o.codirected&&(x||S))&&a.push(E)}return this.spawn(a,!0).filter(n)}}xt(hn,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(c,h){a.merge(c),i.unmerge(c),h.merge(c)};if(i.empty())return r.spawn();var u=function(){var c=n.collection();o.push(c);var h=i[0];s(h,c),r.bfs({directed:!1,roots:h,visit:function(y){return s(y,c)}}),c.forEach(function(p){p.connectedEdges().forEach(function(y){r.has(y)&&c.has(y.source())&&c.has(y.target())&&c.merge(y)})})};do u();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});hn.componentsOf=hn.components;var rn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){pr("A collection must have a reference to the core");return}var i=new Ya,o=!1;if(!r)r=[];else if(r.length>0&&It(r[0])&&!ou(r[0])){o=!0;for(var s=[],u=new As,f=0,c=r.length;f<c;f++){var h=r[f];h.data==null&&(h.data={});var p=h.data;if(p.id==null)p.id=tk();else if(e.hasElementWithId(p.id)||u.has(p.id))continue;var y=new Ac(e,h,!1);s.push(y),u.add(p.id)}r=s}this.length=0;for(var g=0,E=r.length;g<E;g++){var w=r[g][0];if(w!=null){var v=w._private.data.id;(!n||!i.has(v))&&(n&&i.set(v,{index:this.length,ele:w}),this[this.length]=w,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(C){this.lazyMap=C},rebuildMap:function(){for(var x=this.lazyMap=new Ya,S=this.eles,A=0;A<S.length;A++){var D=S[A];x.set(D.id(),{index:A,ele:D})}}},n&&(this._private.map=i),o&&!a&&this.restore()},sr=Ac.prototype=rn.prototype=Object.create(Array.prototype);sr.instanceString=function(){return"collection"};sr.spawn=function(t,e){return new rn(this.cy(),t,e)};sr.spawnSelf=function(){return this.spawn(this)};sr.cy=function(){return this._private.cy};sr.renderer=function(){return this._private.cy.renderer()};sr.element=function(){return this[0]};sr.collection=function(){return GP(this)?this:new rn(this._private.cy,[this])};sr.unique=function(){return new rn(this._private.cy,this,!0)};sr.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};sr.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new rn(e)};sr.$id=sr.getElementById;sr.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};sr.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};sr.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};sr.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(It(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=t.data.source,u=t.data.target;s!=null&&s!=a.source&&(o.source=""+s,i=!0),u!=null&&u!=a.target&&(o.target=""+u,i=!0),i&&(e=e.move(o))}else{var f="parent"in t.data,c=t.data.parent;f&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var h=function(E,w,v){var C=t[E];C!=null&&C!==n[E]&&(C?e[w]():e[v]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var p={data:Ta(n.data),position:Ta(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};p.classes="";var y=0;return n.classes.forEach(function(g){return p.classes+=y++===0?g:" "+g}),p}}};sr.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};sr.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new Ac(t,a,!1);e.push(i)}return new rn(t,e)};sr.copy=sr.clone;sr.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],o=[],s,u=0,f=r.length;u<f;u++){var c=r[u];e&&!c.removed()||(c.isNode()?i.push(c):o.push(c))}s=i.concat(o);var h,p=function(){s.splice(h,1),h--};for(h=0;h<s.length;h++){var y=s[h],g=y._private,E=g.data;if(y.clearTraversalCache(),!(!e&&!g.removed)){if(E.id===void 0)E.id=tk();else if(at(E.id))E.id=""+E.id;else if(Di(E.id)||!mt(E.id)){pr("Can not create element with invalid string ID `"+E.id+"`"),p();continue}else if(n.hasElementWithId(E.id)){pr("Can not create second element with ID `"+E.id+"`"),p();continue}}var w=E.id;if(y.isNode()){var v=g.position;v.x==null&&(v.x=0),v.y==null&&(v.y=0)}if(y.isEdge()){for(var C=y,x=["source","target"],S=x.length,A=!1,D=0;D<S;D++){var _=x[D],M=E[_];at(M)&&(M=E[_]=""+E[_]),M==null||M===""?(pr("Can not create edge `"+w+"` with unspecified "+_),A=!0):n.hasElementWithId(M)||(pr("Can not create edge `"+w+"` with nonexistant "+_+" `"+M+"`"),A=!0)}if(A){p();continue}var k=n.getElementById(E.source),F=n.getElementById(E.target);k.same(F)?k._private.edges.push(C):(k._private.edges.push(C),F._private.edges.push(C)),C._private.source=k,C._private.target=F}g.map=new Ya,g.map.set(w,{ele:y,index:0}),g.removed=!1,e&&n.addToPool(y)}for(var G=0;G<i.length;G++){var B=i[G],q=B._private.data;at(q.parent)&&(q.parent=""+q.parent);var R=q.parent,P=R!=null;if(P||B._private.parent){var N=B._private.parent?n.collection().merge(B._private.parent):n.getElementById(R);if(N.empty())q.parent=void 0;else if(N[0].removed())Yt("Node added with missing parent, reference to parent removed"),q.parent=void 0,B._private.parent=null;else{for(var I=!1,z=N;!z.empty();){if(B.same(z)){I=!0,q.parent=void 0;break}z=z.parent()}I||(N[0]._private.children.push(B),B._private.parent=N[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var ae=s.length===r.length?r:new rn(n,s),re=0;re<ae.length;re++){var K=ae[re];K.isNode()||(K.parallelEdges().clearTraversalCache(),K.source().clearTraversalCache(),K.target().clearTraversalCache())}var V;a.hasCompoundNodes?V=n.collection().merge(ae).merge(ae.connectedNodes()).merge(ae.parent()):V=ae,V.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?ae.emitAndNotify("add"):e&&ae.emit("add")}return r};sr.removed=function(){var t=this[0];return t&&t._private.removed};sr.inside=function(){var t=this[0];return t&&!t._private.removed};sr.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function o(R){for(var P=R._private.edges,N=0;N<P.length;N++)u(P[N])}function s(R){for(var P=R._private.children,N=0;N<P.length;N++)u(P[N])}function u(R){var P=a[R.id()];e&&R.removed()||P||(a[R.id()]=!0,R.isNode()?(n.push(R),o(R),s(R)):n.unshift(R))}for(var f=0,c=r.length;f<c;f++){var h=r[f];u(h)}function p(R,P){var N=R._private.edges;_i(N,P),R.clearTraversalCache()}function y(R){R.clearTraversalCache()}var g=[];g.ids={};function E(R,P){P=P[0],R=R[0];var N=R._private.children,I=R.id();_i(N,P),P._private.parent=null,g.ids[I]||(g.ids[I]=!0,g.push(R))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var w=0;w<n.length;w++){var v=n[w];if(v.isEdge()){var C=v.source()[0],x=v.target()[0];p(C,v),p(x,v);for(var S=v.parallelEdges(),A=0;A<S.length;A++){var D=S[A];y(D),D.isBundledBezier()&&D.dirtyBoundingBoxCache()}}else{var _=v.parent();_.length!==0&&E(_,v)}e&&(v._private.removed=!0)}var M=i._private.elements;i._private.hasCompoundNodes=!1;for(var k=0;k<M.length;k++){var F=M[k];if(F.isParent()){i._private.hasCompoundNodes=!0;break}}var G=new rn(this.cy(),n);G.size()>0&&(t?G.emitAndNotify("remove"):e&&G.emit("remove"));for(var B=0;B<g.length;B++){var q=g[B];(!e||!q.removed())&&q.updateStyle()}return G};sr.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(g){return g==null?g:""+g};if(t.source!==void 0||t.target!==void 0){var o=i(t.source),s=i(t.target),u=o!=null&&e.hasElementWithId(o),f=s!=null&&e.hasElementWithId(s);(u||f)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var y=0;y<r.length;y++){var g=r[y],E=g._private.data;g.isEdge()&&(u&&(E.source=o),f&&(E.target=s))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),h=c===null||e.hasElementWithId(c);if(h){var p=c===null?void 0:c;e.batch(function(){var y=r.remove(n,a);y.emitAndNotify("moveout");for(var g=0;g<r.length;g++){var E=r[g],w=E._private.data;E.isNode()&&(w.parent=p)}y.restore(n,a)}),r.emitAndNotify("move")}}return this};[dk,q5,Tf,Ei,Ss,tH,kc,yH,Ik,Fk,CH,tc,Sf,tn,Ti,hn].forEach(function(t){xt(sr,t)});var _H={add:function(e){var r,n=this;if(qn(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],o=0;o<a.length;o++){var s=a[o];i.push(s.json())}r=new rn(n,i)}}else if(ar(e)){var u=e;r=new rn(n,u)}else if(It(e)&&(ar(e.nodes)||ar(e.edges))){for(var f=e,c=[],h=["nodes","edges"],p=0,y=h.length;p<y;p++){var g=h[p],E=f[g];if(ar(E))for(var w=0,v=E.length;w<v;w++){var C=xt({group:g},E[w]);c.push(C)}}r=new rn(n,c)}else{var x=e;r=new Ac(n,x).collection()}return r},remove:function(e){if(!qn(e)){if(mt(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function MH(t,e,r,n){var a=4,i=.001,o=1e-7,s=10,u=11,f=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var p=c?new Float32Array(u):new Array(u);function y(F,G){return 1-3*G+3*F}function g(F,G){return 3*G-6*F}function E(F){return 3*F}function w(F,G,B){return((y(G,B)*F+g(G,B))*F+E(G))*F}function v(F,G,B){return 3*y(G,B)*F*F+2*g(G,B)*F+E(G)}function C(F,G){for(var B=0;B<a;++B){var q=v(G,t,r);if(q===0)return G;var R=w(G,t,r)-F;G-=R/q}return G}function x(){for(var F=0;F<u;++F)p[F]=w(F*f,t,r)}function S(F,G,B){var q,R,P=0;do R=G+(B-G)/2,q=w(R,t,r)-F,q>0?B=R:G=R;while(Math.abs(q)>o&&++P<s);return R}function A(F){for(var G=0,B=1,q=u-1;B!==q&&p[B]<=F;++B)G+=f;--B;var R=(F-p[B])/(p[B+1]-p[B]),P=G+R*f,N=v(P,t,r);return N>=i?C(F,P):N===0?P:S(F,G,G+f)}var D=!1;function _(){D=!0,(t!==e||r!==n)&&x()}var M=function(G){return D||_(),t===e&&r===n?G:G===0?0:G===1?1:w(A(G),e,n)};M.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var k="generateBezier("+[t,e,r,n]+")";return M.toString=function(){return k},M}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var RH=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:t(o)}}function r(n,a){var i={dx:n.v,dv:t(n)},o=e(n,a*.5,i),s=e(n,a*.5,o),u=e(n,a,s),f=1/6*(i.dx+2*(o.dx+s.dx)+u.dx),c=1/6*(i.dv+2*(o.dv+s.dv)+u.dv);return n.x=n.x+f*a,n.v=n.v+c*a,n}return function n(a,i,o){var s={x:-1,v:0,tension:null,friction:null},u=[0],f=0,c=1/1e4,h=16/1e3,p,y,g;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,p=o!==null,p?(f=n(a,i),y=f/o*h):y=h;g=r(g||s,y),u.push(1+g.x),f+=16,Math.abs(g.x)>c&&Math.abs(g.v)>c;);return p?function(E){return u[E*(u.length-1)|0]}:f}}(),ir=function(e,r,n,a){var i=MH(e,r,n,a);return function(o,s,u){return o+(s-o)*i(u)}},Af={linear:function(e,r,n){return e+(r-e)*n},ease:ir(.25,.1,.25,1),"ease-in":ir(.42,0,1,1),"ease-out":ir(0,0,.58,1),"ease-in-out":ir(.42,0,.58,1),"ease-in-sine":ir(.47,0,.745,.715),"ease-out-sine":ir(.39,.575,.565,1),"ease-in-out-sine":ir(.445,.05,.55,.95),"ease-in-quad":ir(.55,.085,.68,.53),"ease-out-quad":ir(.25,.46,.45,.94),"ease-in-out-quad":ir(.455,.03,.515,.955),"ease-in-cubic":ir(.55,.055,.675,.19),"ease-out-cubic":ir(.215,.61,.355,1),"ease-in-out-cubic":ir(.645,.045,.355,1),"ease-in-quart":ir(.895,.03,.685,.22),"ease-out-quart":ir(.165,.84,.44,1),"ease-in-out-quart":ir(.77,0,.175,1),"ease-in-quint":ir(.755,.05,.855,.06),"ease-out-quint":ir(.23,1,.32,1),"ease-in-out-quint":ir(.86,0,.07,1),"ease-in-expo":ir(.95,.05,.795,.035),"ease-out-expo":ir(.19,1,.22,1),"ease-in-out-expo":ir(1,0,0,1),"ease-in-circ":ir(.6,.04,.98,.335),"ease-out-circ":ir(.075,.82,.165,1),"ease-in-out-circ":ir(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return Af.linear;var a=RH(e,r,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":ir};function GT(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function HT(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function ts(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var o=HT(t,a),s=HT(e,a);if(at(o)&&at(s))return GT(i,o,s,r,n);if(ar(o)&&ar(s)){for(var u=[],f=0;f<s.length;f++){var c=o[f],h=s[f];if(c!=null&&h!=null){var p=GT(i,c,h,r,n);u.push(p)}else u.push(h)}return u}}function PH(t,e,r,n){var a=!n,i=t._private,o=e._private,s=o.easing,u=o.startTime,f=n?t:t.cy(),c=f.style();if(!o.easingImpl)if(s==null)o.easingImpl=Af.linear;else{var h;if(mt(s)){var p=c.parse("transition-timing-function",s);h=p.value}else h=s;var y,g;mt(h)?(y=h,g=[]):(y=h[1],g=h.slice(2).map(function(ae){return+ae})),g.length>0?(y==="spring"&&g.push(o.duration),o.easingImpl=Af[y].apply(null,g)):o.easingImpl=Af[y]}var E=o.easingImpl,w;if(o.duration===0?w=1:w=(r-u)/o.duration,o.applying&&(w=o.progress),w<0?w=0:w>1&&(w=1),o.delay==null){var v=o.startPosition,C=o.position;if(C&&a&&!t.locked()){var x={};gl(v.x,C.x)&&(x.x=ts(v.x,C.x,w,E)),gl(v.y,C.y)&&(x.y=ts(v.y,C.y,w,E)),t.position(x)}var S=o.startPan,A=o.pan,D=i.pan,_=A!=null&&n;_&&(gl(S.x,A.x)&&(D.x=ts(S.x,A.x,w,E)),gl(S.y,A.y)&&(D.y=ts(S.y,A.y,w,E)),t.emit("pan"));var M=o.startZoom,k=o.zoom,F=k!=null&&n;F&&(gl(M,k)&&(i.zoom=Xl(i.minZoom,ts(M,k,w,E),i.maxZoom)),t.emit("zoom")),(_||F)&&t.emit("viewport");var G=o.style;if(G&&G.length>0&&a){for(var B=0;B<G.length;B++){var q=G[B],R=q.name,P=q,N=o.startStyle[R],I=c.properties[N.name],z=ts(N,P,w,E,I);c.overrideBypass(t,R,z)}t.emit("style")}}return o.progress=w,w}function gl(t,e){return t==null||e==null?!1:at(t)&&at(e)?!0:!!(t&&e)}function kH(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function UT(t,e){var r=e._private.aniEles,n=[];function a(c,h){var p=c._private,y=p.animation.current,g=p.animation.queue,E=!1;if(y.length===0){var w=g.shift();w&&y.push(w)}for(var v=function(D){for(var _=D.length-1;_>=0;_--){var M=D[_];M()}D.splice(0,D.length)},C=y.length-1;C>=0;C--){var x=y[C],S=x._private;if(S.stopped){y.splice(C,1),S.hooked=!1,S.playing=!1,S.started=!1,v(S.frames);continue}!S.playing&&!S.applying||(S.playing&&S.applying&&(S.applying=!1),S.started||kH(c,x,t),PH(c,x,t,h),S.applying&&(S.applying=!1),v(S.frames),S.step!=null&&S.step(t),x.completed()&&(y.splice(C,1),S.hooked=!1,S.playing=!1,S.started=!1,v(S.completes)),E=!0)}return!h&&y.length===0&&g.length===0&&n.push(c),E}for(var i=!1,o=0;o<r.length;o++){var s=r[o],u=a(s);i=i||u}var f=a(e,!0);(i||f)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var NH={animate:$t.animate(),animation:$t.animation(),animated:$t.animated(),clearQueue:$t.clearQueue(),delay:$t.delay(),delayAnimation:$t.delayAnimation(),stop:$t.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&jf(function(i){UT(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){UT(o,e)},n.beforeRenderPriorities.animations):r()}},OH={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ou(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},df=function(e){return mt(e)?new Ri(e):e},zk={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Nc(OH,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,df(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,df(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,df(r),n),this},once:function(e,r,n){return this.emitter().one(e,df(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};$t.eventAliasesOn(zk);var Hb={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};Hb.jpeg=Hb.jpg;var Lf={layout:function(e){var r=this;if(e==null){pr("Layout options must be specified to make a layout");return}if(e.name==null){pr("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){pr("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;mt(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var o=new a(xt({},e,{cy:r,eles:i}));return o}};Lf.createLayout=Lf.makeLayout=Lf.layout;var IH={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],s=r.getElementById(i);s.data(o)}})}},FH=nn({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Ub={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){pr("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Yt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=FH(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Ub.invalidateDimensions=Ub.resize;var Df={collection:function(e,r){return mt(e)?this.$(e):qn(e)?e.collection():ar(e)?(r||(r={}),new rn(this,e,r.unique,r.removed)):new rn(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Df.elements=Df.filter=Df.$;var Xr={},Nl="t",BH="f";Xr.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var o=t[i],s=e.getContextMeta(o);if(!s.empty){var u=e.getContextStyle(s),f=e.applyContextStyle(s,u,o);o._private.appliedInitStyle?e.updateTransitions(o,f.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&a.push(o)}}return a};Xr.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},u=0;u<r.length;u++){var f=r[u],c=t[u]===Nl,h=e[u]===Nl,p=c!==h,y=f.mappedProperties.length>0;if(p||h&&y){var g=void 0;p&&y||p?g=f.properties:y&&(g=f.mappedProperties);for(var E=0;E<g.length;E++){for(var w=g[E],v=w.name,C=!1,x=u+1;x<r.length;x++){var S=r[x],A=e[x]===Nl;if(A&&(C=S.properties[w.name]!=null,C))break}!s[v]&&!C&&(s[v]=!0,o.push(v))}}}return n[a]=o,o};Xr.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(t);s?r+=Nl:r+=BH}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};Xr.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var o=r[i],s=e[i]===Nl;if(s)for(var u=0;u<o.properties.length;u++){var f=o.properties[u];a[f.name]=f}}return n[e]=a,a};Xr.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},o=n.types,s=0;s<a.length;s++){var u=a[s],f=e[u],c=r.pstyle(u);if(!f)if(c)c.bypass?f={name:u,deleteBypassed:!0}:f={name:u,delete:!0};else continue;if(c!==f){if(f.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===f.value){var h=c.mapping,p=h.fnValue=f.value(r);if(p===h.prevFnValue)continue}var y=i[u]={prev:c};n.applyParsedProperty(r,f),y.next=r.pstyle(u),y.next&&y.next.bypass&&(y.next=y.next.bypassed)}}return{diffProps:i}};Xr.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function($,ne,le){return r.getPropertiesHash($,ne,le)},o=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var f=0;f<a.length;f++){var c=a[f];e.styleKeys[c]=[ho,ls]}for(var h=function($,ne){return e.styleKeys[ne][0]=Wl($,e.styleKeys[ne][0])},p=function($,ne){return e.styleKeys[ne][1]=$l($,e.styleKeys[ne][1])},y=function($,ne){h($,ne),p($,ne)},g=function($,ne){for(var le=0;le<$.length;le++){var Se=$.charCodeAt(le);h(Se,ne),p(Se,ne)}},E=2e9,w=function($){return-128<$&&$<128&&Math.floor($)!==$?E-($*1024|0):$},v=0;v<n.length;v++){var C=n[v],x=u[C];if(x!=null){var S=this.properties[C],A=S.type,D=S.groupKey,_=void 0;S.hashOverride!=null?_=S.hashOverride(t,x):x.pfValue!=null&&(_=x.pfValue);var M=S.enums==null?x.value:null,k=_!=null,F=M!=null,G=k||F,B=x.units;if(A.number&&G&&!A.multiple){var q=k?_:M;y(w(q),D),!k&&B!=null&&g(B,D)}else g(x.strValue,D)}}for(var R=[ho,ls],P=0;P<a.length;P++){var N=a[P],I=e.styleKeys[N];R[0]=Wl(I[0],R[0]),R[1]=$l(I[1],R[1])}e.styleKey=nz(R[0],R[1]);var z=e.styleKeys;e.labelDimsKey=vi(z.labelDimensions);var ae=i(t,["label"],z.labelDimensions);if(e.labelKey=vi(ae),e.labelStyleKey=vi(nf(z.commonLabel,ae)),!s){var re=i(t,["source-label"],z.labelDimensions);e.sourceLabelKey=vi(re),e.sourceLabelStyleKey=vi(nf(z.commonLabel,re));var K=i(t,["target-label"],z.labelDimensions);e.targetLabelKey=vi(K),e.targetLabelStyleKey=vi(nf(z.commonLabel,K))}if(s){var V=e.styleKeys,Z=V.nodeBody,U=V.nodeBorder,W=V.nodeOutline,Y=V.backgroundImage,ee=V.compound,oe=V.pie,te=V.stripe,ie=[Z,U,W,Y,ee,oe,te].filter(function(se){return se!=null}).reduce(nf,[ho,ls]);e.nodeKey=vi(ie),e.hasPie=oe!=null&&oe[0]!==ho&&oe[1]!==ls,e.hasStripe=te!=null&&te[0]!==ho&&te[1]!==ls}return o!==e.styleKey};Xr.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};Xr.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,o=r.types,s=r.properties[n.name].type,u=n.bypass,f=a[n.name],c=f&&f.bypass,h=t._private,p="mapping",y=function(Z){return Z==null?null:Z.pfValue!=null?Z.pfValue:Z.value},g=function(){var Z=y(f),U=y(n);r.checkTriggers(t,n.name,Z,U)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return a[n.name]=void 0,g(),!0;if(n.deleteBypassed)return f?f.bypass?(f.bypassed=void 0,g(),!0):!1:(g(),!0);if(n.deleteBypass)return f?f.bypass?(a[n.name]=f.bypassed,g(),!0):!1:(g(),!0);var E=function(){Yt("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var w=n.field.split("."),v=h.data,C=0;C<w.length&&v;C++){var x=w[C];v=v[x]}if(v==null)return E(),!1;var S;if(at(v)){var A=n.fieldMax-n.fieldMin;A===0?S=0:S=(v-n.fieldMin)/A}else return Yt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+v+"` for `"+t.id()+"` is non-numeric)"),!1;if(S<0?S=0:S>1&&(S=1),s.color){var D=n.valueMin[0],_=n.valueMax[0],M=n.valueMin[1],k=n.valueMax[1],F=n.valueMin[2],G=n.valueMax[2],B=n.valueMin[3]==null?1:n.valueMin[3],q=n.valueMax[3]==null?1:n.valueMax[3],R=[Math.round(D+(_-D)*S),Math.round(M+(k-M)*S),Math.round(F+(G-F)*S),Math.round(B+(q-B)*S)];i={bypass:n.bypass,name:n.name,value:R,strValue:"rgb("+R[0]+", "+R[1]+", "+R[2]+")"}}else if(s.number){var P=n.valueMin+(n.valueMax-n.valueMin)*S;i=this.parse(n.name,P,n.bypass,p)}else return!1;if(!i)return E(),!1;i.mapping=n,n=i;break}case o.data:{for(var N=n.field.split("."),I=h.data,z=0;z<N.length&&I;z++){var ae=N[z];I=I[ae]}if(I!=null&&(i=this.parse(n.name,I,n.bypass,p)),!i)return E(),!1;i.mapping=n,n=i;break}case o.fn:{var re=n.value,K=n.fnValue!=null?n.fnValue:re(t);if(n.prevFnValue=K,K==null)return Yt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,K,n.bypass,p),!i)return Yt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Ta(n),n=i;break}case void 0:break;default:return!1}return u?(c?n.bypassed=f.bypassed:n.bypassed=f,a[n.name]=n):c?f.bypassed=n:a[n.name]=n,g(),!0};Xr.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],u=a[s];u!=null&&(u.bypass?u.bypassed=null:a[s]=null)}}};Xr.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};Xr.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},u=!1,f=0;f<a.length;f++){var c=a[f],h=t.pstyle(c),p=e[c];if(p){var y=p.prev,g=y,E=p.next!=null?p.next:h,w=!1,v=void 0,C=1e-6;g&&(at(g.pfValue)&&at(E.pfValue)?(w=E.pfValue-g.pfValue,v=g.pfValue+C*w):at(g.value)&&at(E.value)?(w=E.value-g.value,v=g.value+C*w):ar(g.value)&&ar(E.value)&&(w=g.value[0]!==E.value[0]||g.value[1]!==E.value[1]||g.value[2]!==E.value[2],v=g.strValue),w&&(s[c]=E.strValue,this.applyBypass(t,c,v),u=!0))}}if(!u)return;n.transitioning=!0,new Ls(function(x){o>0?t.delayAnimation(o).play().promise().then(x):x()}).then(function(){return t.animation({style:s,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};Xr.checkTrigger=function(t,e,r,n,a,i){var o=this.properties[e],s=a(o);t.removed()||s!=null&&s(r,n,t)&&i(o)};Xr.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};Xr.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};Xr.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Xr.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Xr.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};var hu={};hu.applyBypass=function(t,e,r,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var s=0;s<a.properties.length;s++){var u=a.properties[s],f=u.name,c=this.parse(f,r,!0);c&&i.push(c)}}else if(mt(e)){var h=this.parse(e,r,!0);h&&i.push(h)}else if(It(e)){var p=e;n=r;for(var y=Object.keys(p),g=0;g<y.length;g++){var E=y[g],w=p[E];if(w===void 0&&(w=p[Tc(E)]),w!==void 0){var v=this.parse(E,w,!0);v&&i.push(v)}}}else return!1;if(i.length===0)return!1;for(var C=!1,x=0;x<t.length;x++){for(var S=t[x],A={},D=void 0,_=0;_<i.length;_++){var M=i[_];if(n){var k=S.pstyle(M.name);D=A[M.name]={prev:k}}C=this.applyParsedProperty(S,Ta(M))||C,n&&(D.next=S.pstyle(M.name))}C&&this.updateStyleHints(S),n&&this.updateTransitions(S,A,o)}return C};hu.overrideBypass=function(t,e,r){e=b1(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,u=o.mutiple,f=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),s?i.strValue="rgb("+r.join(",")+")":u?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,f,r)}};hu.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};hu.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],o={},s=0;s<e.length;s++){var u=e[s],f=this.properties[u],c=i.pstyle(f.name);if(!(!c||!c.bypass)){var h="",p=this.parse(u,h,!0),y=o[f.name]={prev:c};this.applyParsedProperty(i,p),y.next=i.pstyle(f.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,o,n)}};var N1={};N1.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};N1.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var Aa={};Aa.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};Aa.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],o=r.getStylePropertyValue(t,i.name,e);o!=null&&(n[i.name]=o,n[Tc(i.name)]=o)}return n}};Aa.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};Aa.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=t.pstyle(a.name);if(o){var s=o.value,u=o.units,f=o.strValue;if(r&&i.number&&s!=null&&at(s)){var c=t.cy().zoom(),h=function(w){return w*c},p=function(w,v){return h(w)+v},y=ar(s),g=y?u.every(function(E){return E!=null}):u!=null;return g?y?s.map(function(E,w){return p(E,u[w])}).join(" "):p(s,u):y?s.map(function(E){return mt(E)?E:""+h(E)}).join(" "):""+h(s)}else if(f!=null)return f}return null}};Aa.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=t.pstyle(i);o!==void 0&&(It(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(r[i]=o)}return r};Aa.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],u=n[s],f=a[s]||a[b1(s)],c=this.parse(f.name,u);c&&r.push(c)}return r};Aa.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,o,s,u,f;for(u=0;u<e.length;u++)if(a=e[u],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Wl(s,n[0]),n[1]=$l(s,n[1]);else for(o=i.strValue,f=0;f<o.length;f++)s=o.charCodeAt(f),n[0]=Wl(s,n[0]),n[1]=$l(s,n[1]);return n};Aa.getPropertiesHash=Aa.getNonDefaultPropertiesHash;var Fc={};Fc.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var u=o[s],f=i[u];e.css(u,f)}}return e};Fc.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Fc.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var O1={};O1.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function u(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var f=n.match(/^\s*$/);if(f)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Yt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var h=c[1];if(h!=="core"){var p=new Ri(h);if(p.invalid){Yt("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),s();continue}}var y=c[2],g=!1;i=y;for(var E=[];;){var w=i.match(/^\s*$/);if(w)break;var v=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!v){Yt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+y),g=!0;break}o=v[0];var C=v[1],x=v[2],S=e.properties[C];if(!S){Yt("Skipping property: Invalid property name in: "+o),u();continue}var A=r.parse(C,x);if(!A){Yt("Skipping property: Invalid property definition in: "+o),u();continue}E.push({name:C,val:x}),u()}if(g){s();break}r.selector(h);for(var D=0;D<E.length;D++){var _=E[D];r.css(_.name,_.val)}s()}return r};O1.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var Lr={};(function(){var t=Br,e=Oq,r=Fq,n=Bq,a=qq,i=function(se){return"^"+se+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(se){var $=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+se+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+$+")\\s*\\,\\s*("+$+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Lr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(se,$){switch(se.length){case 2:return $[0]!=="deg"&&$[0]!=="rad"&&$[1]!=="deg"&&$[1]!=="rad";case 1:return mt(se[0])||$[0]==="deg"||$[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(se){var $=se.length;return $===1||$===2||$===4}}};var u={zeroNonZero:function(se,$){return(se==null||$==null)&&se!==$||se==0&&$!=0?!0:se!=0&&$==0},any:function(se,$){return se!=$},emptyNonEmpty:function(se,$){var ne=Di(se),le=Di($);return ne&&!le||!ne&&le}},f=Lr.types,c=[{name:"label",type:f.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:f.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:f.bidirectionalSize,triggersBounds:u.any}],h=[{name:"source-label",type:f.text,triggersBounds:u.any},{name:"source-text-rotation",type:f.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:f.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:f.size,triggersBounds:u.any}],p=[{name:"target-label",type:f.text,triggersBounds:u.any},{name:"target-text-rotation",type:f.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:f.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:f.size,triggersBounds:u.any}],y=[{name:"font-family",type:f.fontFamily,triggersBounds:u.any},{name:"font-style",type:f.fontStyle,triggersBounds:u.any},{name:"font-weight",type:f.fontWeight,triggersBounds:u.any},{name:"font-size",type:f.size,triggersBounds:u.any},{name:"text-transform",type:f.textTransform,triggersBounds:u.any},{name:"text-wrap",type:f.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:f.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:f.size,triggersBounds:u.any},{name:"text-outline-width",type:f.size,triggersBounds:u.any},{name:"line-height",type:f.positiveNumber,triggersBounds:u.any}],g=[{name:"text-valign",type:f.valign,triggersBounds:u.any},{name:"text-halign",type:f.halign,triggersBounds:u.any},{name:"color",type:f.color},{name:"text-outline-color",type:f.color},{name:"text-outline-opacity",type:f.zeroOneNumber},{name:"text-background-color",type:f.color},{name:"text-background-opacity",type:f.zeroOneNumber},{name:"text-background-padding",type:f.size,triggersBounds:u.any},{name:"text-border-opacity",type:f.zeroOneNumber},{name:"text-border-color",type:f.color},{name:"text-border-width",type:f.size,triggersBounds:u.any},{name:"text-border-style",type:f.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:f.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:f.justification},{name:"box-select-labels",type:f.bool,triggersBounds:u.any}],E=[{name:"events",type:f.bool,triggersZOrder:u.any},{name:"text-events",type:f.bool,triggersZOrder:u.any}],w=[{name:"display",type:f.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(se,$,ne){return se===$?!1:ne.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:f.visibility,triggersZOrder:u.any},{name:"opacity",type:f.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:f.zeroOneNumber},{name:"min-zoomed-font-size",type:f.size},{name:"z-compound-depth",type:f.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:f.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:f.number,triggersZOrder:u.any}],v=[{name:"overlay-padding",type:f.size,triggersBounds:u.any},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:f.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:f.cornerRadius}],C=[{name:"underlay-padding",type:f.size,triggersBounds:u.any},{name:"underlay-color",type:f.color},{name:"underlay-opacity",type:f.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:f.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:f.cornerRadius}],x=[{name:"transition-property",type:f.propList},{name:"transition-duration",type:f.time},{name:"transition-delay",type:f.time},{name:"transition-timing-function",type:f.easing}],S=function(se,$){return $.value==="label"?-se.poolIndex():$.pfValue},A=[{name:"height",type:f.nodeSize,triggersBounds:u.any,hashOverride:S},{name:"width",type:f.nodeSize,triggersBounds:u.any,hashOverride:S},{name:"shape",type:f.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:f.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:f.cornerRadius},{name:"background-color",type:f.color},{name:"background-fill",type:f.fill},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-blacken",type:f.nOneOneNumber},{name:"background-gradient-stop-colors",type:f.colors},{name:"background-gradient-stop-positions",type:f.percentages},{name:"background-gradient-direction",type:f.gradientDirection},{name:"padding",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:f.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:f.boundsExpansion,triggersBounds:u.any}],D=[{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size,triggersBounds:u.any},{name:"border-style",type:f.borderStyle},{name:"border-cap",type:f.lineCap},{name:"border-join",type:f.lineJoin},{name:"border-dash-pattern",type:f.numbers},{name:"border-dash-offset",type:f.number},{name:"border-position",type:f.linePosition}],_=[{name:"outline-color",type:f.color},{name:"outline-opacity",type:f.zeroOneNumber},{name:"outline-width",type:f.size,triggersBounds:u.any},{name:"outline-style",type:f.borderStyle},{name:"outline-offset",type:f.size,triggersBounds:u.any}],M=[{name:"background-image",type:f.urls},{name:"background-image-crossorigin",type:f.bgCrossOrigin},{name:"background-image-opacity",type:f.zeroOneNumbers},{name:"background-image-containment",type:f.bgContainment},{name:"background-image-smoothing",type:f.bools},{name:"background-position-x",type:f.bgPos},{name:"background-position-y",type:f.bgPos},{name:"background-width-relative-to",type:f.bgRelativeTo},{name:"background-height-relative-to",type:f.bgRelativeTo},{name:"background-repeat",type:f.bgRepeat},{name:"background-fit",type:f.bgFit},{name:"background-clip",type:f.bgClip},{name:"background-width",type:f.bgWH},{name:"background-height",type:f.bgWH},{name:"background-offset-x",type:f.bgPos},{name:"background-offset-y",type:f.bgPos}],k=[{name:"position",type:f.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:f.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:f.size,triggersBounds:u.any},{name:"min-width-bias-left",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:f.size,triggersBounds:u.any},{name:"min-height-bias-top",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:f.sizeMaybePercent,triggersBounds:u.any}],F=[{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"line-fill",type:f.fill},{name:"line-cap",type:f.lineCap},{name:"line-opacity",type:f.zeroOneNumber},{name:"line-dash-pattern",type:f.numbers},{name:"line-dash-offset",type:f.number},{name:"line-outline-width",type:f.size},{name:"line-outline-color",type:f.color},{name:"line-gradient-stop-colors",type:f.colors},{name:"line-gradient-stop-positions",type:f.percentages},{name:"curve-style",type:f.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(se,$){return se===$?!1:se==="bezier"||$==="bezier"}},{name:"haystack-radius",type:f.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:f.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:f.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:f.size,triggersBounds:u.any},{name:"control-point-distances",type:f.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:f.numbers,triggersBounds:u.any},{name:"segment-distances",type:f.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:f.numbers,triggersBounds:u.any},{name:"segment-radii",type:f.numbers,triggersBounds:u.any},{name:"radius-type",type:f.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:f.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:f.size,triggersBounds:u.any},{name:"taxi-direction",type:f.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:f.number,triggersBounds:u.any},{name:"edge-distances",type:f.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:f.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:f.angle,triggersBounds:u.any},{name:"loop-sweep",type:f.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:f.size,triggersBounds:u.any},{name:"target-distance-from-node",type:f.size,triggersBounds:u.any}],G=[{name:"ghost",type:f.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:f.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:f.zeroOneNumber}],B=[{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size},{name:"outside-texture-bg-color",type:f.color},{name:"outside-texture-bg-opacity",type:f.zeroOneNumber}],q=[];Lr.pieBackgroundN=16,q.push({name:"pie-size",type:f.sizeMaybePercent}),q.push({name:"pie-hole",type:f.sizeMaybePercent}),q.push({name:"pie-start-angle",type:f.angle});for(var R=1;R<=Lr.pieBackgroundN;R++)q.push({name:"pie-"+R+"-background-color",type:f.color}),q.push({name:"pie-"+R+"-background-size",type:f.percent}),q.push({name:"pie-"+R+"-background-opacity",type:f.zeroOneNumber});var P=[];Lr.stripeBackgroundN=16,P.push({name:"stripe-size",type:f.sizeMaybePercent}),P.push({name:"stripe-direction",type:f.axisDirectionPrimary});for(var N=1;N<=Lr.stripeBackgroundN;N++)P.push({name:"stripe-"+N+"-background-color",type:f.color}),P.push({name:"stripe-"+N+"-background-size",type:f.percent}),P.push({name:"stripe-"+N+"-background-opacity",type:f.zeroOneNumber});var I=[],z=Lr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:f.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:f.color},{name:"arrow-fill",type:f.arrowFill},{name:"arrow-width",type:f.arrowWidth}].forEach(function(ie){z.forEach(function(se){var $=se+"-"+ie.name,ne=ie.type,le=ie.triggersBounds;I.push({name:$,type:ne,triggersBounds:le})})},{});var ae=Lr.properties=[].concat(E,x,w,v,C,G,g,y,c,h,p,A,D,_,M,q,P,k,F,I,B),re=Lr.propertyGroups={behavior:E,transition:x,visibility:w,overlay:v,underlay:C,ghost:G,commonLabel:g,labelDimensions:y,mainLabel:c,sourceLabel:h,targetLabel:p,nodeBody:A,nodeBorder:D,nodeOutline:_,backgroundImage:M,pie:q,stripe:P,compound:k,edgeLine:F,edgeArrow:I,core:B},K=Lr.propertyGroupNames={},V=Lr.propertyGroupKeys=Object.keys(re);V.forEach(function(ie){K[ie]=re[ie].map(function(se){return se.name}),re[ie].forEach(function(se){return se.groupKey=ie})});var Z=Lr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Lr.propertyNames=ae.map(function(ie){return ie.name});for(var U=0;U<ae.length;U++){var W=ae[U];ae[W.name]=W}for(var Y=0;Y<Z.length;Y++){var ee=Z[Y],oe=ae[ee.pointsTo],te={name:ee.name,alias:!0,pointsTo:oe};ae.push(te),ae[ee.name]=te}})();Lr.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};Lr.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=xt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,f){for(var c=1;c<=Lr.pieBackgroundN;c++){var h=f.name.replace("{{i}}",c),p=f.value;u[h]=p}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,f){for(var c=1;c<=Lr.stripeBackgroundN;c++){var h=f.name.replace("{{i}}",c),p=f.value;u[h]=p}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,f){return Lr.arrowPrefixes.forEach(function(c){var h=c+"-"+f.name,p=f.value;u[h]=p}),u},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],s=this.parse(i,o);r[i]=s}}return t.defaultProperties=r,t.defaultProperties};Lr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Bc={};Bc.parse=function(t,e,r,n){var a=this;if(yr(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=r?"t":"f",s=""+e,u=QP(t,s,o,i),f=a.propCache=a.propCache||[],c;return(c=f[u])||(c=f[u]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=Ta(c),c&&(c.value=Ta(c.value))),c};Bc.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Yt("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Yt("The style value of `label` is deprecated for `"+a.name+"`"),a};Bc.parseImpl=function(t,e,r,n){var a=this;t=b1(t);var i=a.properties[t],o=e,s=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var u=mt(e);u&&(e=e.trim());var f=i.type;if(!f)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(yr(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:r};var c,h;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(r)return!1;var p=s.data;return{name:t,value:c,strValue:""+e,mapped:p,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(h=new RegExp(s.mapData.regex).exec(e))){if(r||f.multiple)return!1;var y=s.mapData;if(!(f.color||f.number))return!1;var g=this.parse(t,h[4]);if(!g||g.mapped)return!1;var E=this.parse(t,h[5]);if(!E||E.mapped)return!1;if(g.pfValue===E.pfValue||g.strValue===E.strValue)return Yt("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+g.strValue+"`"),this.parse(t,g.strValue);if(f.color){var w=g.value,v=E.value,C=w[0]===v[0]&&w[1]===v[1]&&w[2]===v[2]&&(w[3]===v[3]||(w[3]==null||w[3]===1)&&(v[3]==null||v[3]===1));if(C)return!1}return{name:t,value:h,strValue:""+e,mapped:y,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:g.value,valueMax:E.value,bypass:r}}}if(f.multiple&&n!=="multiple"){var x;if(u?x=e.split(/\s+/):ar(e)?x=e:x=[e],f.evenMultiple&&x.length%2!==0)return null;for(var S=[],A=[],D=[],_="",M=!1,k=0;k<x.length;k++){var F=a.parse(t,x[k],r,"multiple");M=M||mt(F.value),S.push(F.value),D.push(F.pfValue!=null?F.pfValue:F.value),A.push(F.units),_+=(k>0?" ":"")+F.strValue}return f.validate&&!f.validate(S,A)?null:f.singleEnum&&M?S.length===1&&mt(S[0])?{name:t,value:S[0],strValue:S[0],bypass:r}:null:{name:t,value:S,pfValue:D,strValue:_,bypass:r,units:A}}var G=function(){for(var te=0;te<f.enums.length;te++){var ie=f.enums[te];if(ie===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(f.number){var B,q="px";if(f.units&&(B=f.units),f.implicitUnits&&(q=f.implicitUnits),!f.unitless)if(u){var R="px|em"+(f.allowPercent?"|\\%":"");B&&(R=B);var P=e.match("^("+Br+")("+R+")?$");P&&(e=P[1],B=P[2]||q)}else(!B||f.implicitUnits)&&(B=q);if(e=parseFloat(e),isNaN(e)&&f.enums===void 0)return null;if(isNaN(e)&&f.enums!==void 0)return e=o,G();if(f.integer&&!Dq(e)||f.min!==void 0&&(e<f.min||f.strictMin&&e===f.min)||f.max!==void 0&&(e>f.max||f.strictMax&&e===f.max))return null;var N={name:t,value:e,strValue:""+e+(B||""),units:B,bypass:r};return f.unitless||B!=="px"&&B!=="em"?N.pfValue=e:N.pfValue=B==="px"||!B?e:this.getEmSizeInPixels()*e,(B==="ms"||B==="s")&&(N.pfValue=B==="ms"?e:1e3*e),(B==="deg"||B==="rad")&&(N.pfValue=B==="rad"?e:Oz(e)),B==="%"&&(N.pfValue=e/100),N}else if(f.propList){var I=[],z=""+e;if(z!=="none"){for(var ae=z.split(/\s*,\s*|\s+/),re=0;re<ae.length;re++){var K=ae[re].trim();a.properties[K]?I.push(K):Yt("`"+K+"` is not a valid property name")}if(I.length===0)return null}return{name:t,value:I,strValue:I.length===0?"none":I.join(" "),bypass:r}}else if(f.color){var V=WP(e);return V?{name:t,value:V,pfValue:V,strValue:"rgb("+V[0]+","+V[1]+","+V[2]+")",bypass:r}:null}else if(f.regex||f.regexes){if(f.enums){var Z=G();if(Z)return Z}for(var U=f.regexes?f.regexes:[f.regex],W=0;W<U.length;W++){var Y=new RegExp(U[W]),ee=Y.exec(e);if(ee)return{name:t,value:f.singleRegexMatchValue?ee[1]:ee,strValue:""+e,bypass:r}}return null}else return f.string?{name:t,value:""+e,strValue:""+e,bypass:r}:f.enums?G():null};var $r=function(e){if(!(this instanceof $r))return new $r(e);if(!m1(e)){pr("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},vn=$r.prototype;vn.instanceString=function(){return"style"};vn.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};vn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};vn.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};vn.selector=function(t){var e=t==="core"?null:new Ri(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};vn.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[Tc(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};vn.style=vn.css;vn.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};vn.append=function(t){return HP(t)?t.appendToStyle(this):ar(t)?this.appendFromJson(t):mt(t)&&this.appendFromString(t),this};$r.fromJson=function(t,e){var r=new $r(t);return r.fromJson(e),r};$r.fromString=function(t,e){return new $r(t).fromString(e)};[Xr,hu,N1,Aa,Fc,O1,Lr,Bc].forEach(function(t){xt(vn,t)});$r.types=vn.types;$r.properties=vn.properties;$r.propertyGroups=vn.propertyGroups;$r.propertyGroupNames=vn.propertyGroupNames;$r.propertyGroupKeys=vn.propertyGroupKeys;var qH={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return HP(e)?r.style=e.generateStyle(this):ar(e)?r.style=$r.fromJson(this,e):mt(e)?r.style=$r.fromString(this,e):r.style=$r(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},zH="single",xo={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=zH),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,o,s;switch(e.length){case 0:return r;case 1:if(mt(e[0]))return n=e[0],r[n];if(It(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,at(o)&&(r.x=o),at(s)&&(r.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&at(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,o,s,u,f;if(!this._private.panningEnabled)return this;switch(n.length){case 1:It(e)&&(s=n[0],u=s.x,f=s.y,at(u)&&(a.x+=u),at(f)&&(a.y+=f),this.emit("pan viewport"));break;case 2:i=e,o=r,(i==="x"||i==="y")&&at(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(at(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(mt(e)){var a=e;e=this.$(a)}else if(Rq(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else qn(e)||(e=this.mutableElements());if(!(qn(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),u;if(r=at(r)?r:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((o-2*r)/n.w,(s-2*r)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var f={x:(o-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:f}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return at(e)&&at(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):at(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:at(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,o,s=!1;if(r.zoomingEnabled||(s=!0),at(e)?o=e:It(e)&&(o=e.level,e.position!=null?i=Lc(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(s=!0)),o=o>r.maxZoom?r.maxZoom:o,o=o<r.minZoom?r.minZoom:o,s||!at(o)||o===a||i!=null&&(!at(i.x)||!at(i.y)))return null;if(i!=null){var u=n,f=a,c=o,h={x:-c/f*(i.x-u.x)+i.x,y:-c/f*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:h}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(at(e.zoom)||(n=!1),It(e.pan)||(a=!1),!n&&!a)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=u,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&r.panningEnabled){var f=e.pan;at(f.x)&&(r.pan.x=f.x,s=!1),at(f.y)&&(r.pan.y=f.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(mt(e)){var n=e;e=this.mutableElements().filter(n)}else qn(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();r=r===void 0?this._private.zoom:r;var s={x:(i-r*(a.x1+a.x2))/2,y:(o-r*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),i=function(s){return parseFloat(a.getPropertyValue(s))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};xo.centre=xo.center;xo.autolockNodes=xo.autolock;xo.autoungrabifyNodes=xo.autoungrabify;var Ql={data:$t.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:$t.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:$t.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$t.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Ql.attr=Ql.data;Ql.removeAttr=Ql.removeData;var Jl=function(e){var r=this;e=xt({},e);var n=e.container;n&&!Kf(n)&&Kf(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var o=Ir!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=xt({name:o?"grid":"null"},s.layout),s.renderer=xt({name:o?"canvas":"null"},s.renderer);var u=function(g,E,w){return E!==void 0?E:w!==void 0?w:g},f=this._private={container:n,ready:!1,options:s,elements:new rn(this),listeners:[],aniEles:new rn(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:at(s.zoom)?s.zoom:1,pan:{x:It(s.pan)&&at(s.pan.x)?s.pan.x:0,y:It(s.pan)&&at(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(g,E){var w=g.some(Pq);if(w)return Ls.all(g).then(E);E(g)};f.styleEnabled&&r.setStyle([]);var h=xt({},s,s.renderer);r.initRenderer(h);var p=function(g,E,w){r.notifications(!1);var v=r.mutableElements();v.length>0&&v.remove(),g!=null&&(It(g)||ar(g))&&r.add(g),r.one("layoutready",function(x){r.notifications(!0),r.emit(x),r.one("load",E),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",w),r.emit("done")});var C=xt({},r._private.options.layout);C.eles=r.elements(),r.layout(C).run()};c([s.style,s.elements],function(y){var g=y[0],E=y[1];f.styleEnabled&&r.style().append(g),p(E,function(){r.startAnimationLoop(),f.ready=!0,yr(s.ready)&&r.on("ready",s.ready);for(var w=0;w<i.length;w++){var v=i[w];r.on("ready",v)}a&&(a.readies=[]),r.emit("ready")},s.done)})},rc=Jl.prototype;xt(rc,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Ir;var r=this._private.container.ownerDocument;return r===void 0||r==null?Ir:r.defaultView||Ir},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!Kf(e)&&Kf(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(xt({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Ta(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(S){return r.getElementById(S.id())};if(It(e)){if(r.startBatch(),e.elements){var o={},s=function(S,A){for(var D=[],_=[],M=0;M<S.length;M++){var k=S[M];if(!k.data.id){Yt("cy.json() cannot handle elements without an ID attribute");continue}var F=""+k.data.id,G=r.getElementById(F);o[F]=!0,G.length!==0?_.push({ele:G,json:k}):(A&&(k.group=A),D.push(k))}r.add(D);for(var B=0;B<_.length;B++){var q=_[B],R=q.ele,P=q.json;R.json(P)}};if(ar(e.elements))s(e.elements);else for(var u=["nodes","edges"],f=0;f<u.length;f++){var c=u[f],h=e.elements[c];ar(h)&&s(h,c)}var p=r.collection();a.filter(function(x){return!o[x.id()]}).forEach(function(x){x.isParent()?p.merge(x):x.remove()}),p.forEach(function(x){return x.children().move({parent:null})}),p.forEach(function(x){return i(x).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var y=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],g=0;g<y.length;g++){var E=y[g];e[E]!=null&&r[E](e[E])}return r.endBatch(),this}else{var w=!!e,v={};w?v.elements=this.elements().map(function(x){return x.json()}):(v.elements={},a.forEach(function(x){var S=x.group();v.elements[S]||(v.elements[S]=[]),v.elements[S].push(x.json())})),this._private.styleEnabled&&(v.style=r.style().json()),v.data=Ta(r.data());var C=n.options;return v.zoomingEnabled=n.zoomingEnabled,v.userZoomingEnabled=n.userZoomingEnabled,v.zoom=n.zoom,v.minZoom=n.minZoom,v.maxZoom=n.maxZoom,v.panningEnabled=n.panningEnabled,v.userPanningEnabled=n.userPanningEnabled,v.pan=Ta(n.pan),v.boxSelectionEnabled=n.boxSelectionEnabled,v.renderer=Ta(C.renderer),v.hideEdgesOnViewport=C.hideEdgesOnViewport,v.textureOnViewport=C.textureOnViewport,v.wheelSensitivity=C.wheelSensitivity,v.motionBlur=C.motionBlur,v.multiClickDebounceTime=C.multiClickDebounceTime,v}}});rc.$id=rc.getElementById;[_H,NH,zk,Hb,Lf,IH,Ub,Df,qH,xo,Ql].forEach(function(t){xt(rc,t)});var GH={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},HH={maximal:!1,acyclic:!1},rs=function(e){return e.scratch("breadthfirst")},VT=function(e,r){return e.scratch("breadthfirst",r)};function Gk(t){this.options=xt({},GH,HH,t)}Gk.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(Te){return Te.isChildless()}),a=r,i=t.directed,o=t.acyclic||t.maximal||t.maximalAdjustments>0,s=!!t.boundingBox,u=e.extent(),f=Nn(s?t.boundingBox:{x1:u.x1,y1:u.y1,w:u.w,h:u.h}),c;if(qn(t.roots))c=t.roots;else if(ar(t.roots)){for(var h=[],p=0;p<t.roots.length;p++){var y=t.roots[p],g=e.getElementById(y);h.push(g)}c=e.collection(h)}else if(mt(t.roots))c=e.$(t.roots);else if(i)c=n.roots();else{var E=r.components();c=e.collection();for(var w=function(){var ve=E[v],de=ve.maxDegree(!1),ye=ve.filter(function(Ce){return Ce.degree(!1)===de});c=c.add(ye)},v=0;v<E.length;v++)w()}var C=[],x={},S=function(ve,de){C[de]==null&&(C[de]=[]);var ye=C[de].length;C[de].push(ve),VT(ve,{index:ye,depth:de})},A=function(ve,de){var ye=rs(ve),Ce=ye.depth,ue=ye.index;C[Ce][ue]=null,ve.isChildless()&&S(ve,de)};a.bfs({roots:c,directed:t.directed,visit:function(ve,de,ye,Ce,ue){var Ae=ve[0],Pe=Ae.id();Ae.isChildless()&&S(Ae,ue),x[Pe]=!0}});for(var D=[],_=0;_<n.length;_++){var M=n[_];x[M.id()]||D.push(M)}var k=function(ve){for(var de=C[ve],ye=0;ye<de.length;ye++){var Ce=de[ye];if(Ce==null){de.splice(ye,1),ye--;continue}VT(Ce,{depth:ve,index:ye})}},F=function(ve,de){for(var ye=rs(ve),Ce=ve.incomers().filter(function(Qe){return Qe.isNode()&&r.has(Qe)}),ue=-1,Ae=ve.id(),Pe=0;Pe<Ce.length;Pe++){var Fe=Ce[Pe],Ye=rs(Fe);ue=Math.max(ue,Ye.depth)}if(ye.depth<=ue){if(!t.acyclic&&de[Ae])return null;var Ve=ue+1;return A(ve,Ve),de[Ae]=Ve,!0}return!1};if(i&&o){var G=[],B={},q=function(ve){return G.push(ve)},R=function(){return G.shift()};for(n.forEach(function(Te){return G.push(Te)});G.length>0;){var P=R(),N=F(P,B);if(N)P.outgoers().filter(function(Te){return Te.isNode()&&r.has(Te)}).forEach(q);else if(N===null){Yt("Detected double maximal shift for node `"+P.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var I=0;if(t.avoidOverlap)for(var z=0;z<n.length;z++){var ae=n[z],re=ae.layoutDimensions(t),K=re.w,V=re.h;I=Math.max(I,K,V)}var Z={},U=function(ve){if(Z[ve.id()])return Z[ve.id()];for(var de=rs(ve).depth,ye=ve.neighborhood(),Ce=0,ue=0,Ae=0;Ae<ye.length;Ae++){var Pe=ye[Ae];if(!(Pe.isEdge()||Pe.isParent()||!n.has(Pe))){var Fe=rs(Pe);if(Fe!=null){var Ye=Fe.index,Ve=Fe.depth;if(!(Ye==null||Ve==null)){var Qe=C[Ve].length;Ve<de&&(Ce+=Ye/Qe,ue++)}}}}return ue=Math.max(1,ue),Ce=Ce/ue,ue===0&&(Ce=0),Z[ve.id()]=Ce,Ce},W=function(ve,de){var ye=U(ve),Ce=U(de),ue=ye-Ce;return ue===0?VP(ve.id(),de.id()):ue};t.depthSort!==void 0&&(W=t.depthSort);for(var Y=C.length,ee=0;ee<Y;ee++)C[ee].sort(W),k(ee);for(var oe=[],te=0;te<D.length;te++)oe.push(D[te]);var ie=function(){for(var ve=0;ve<Y;ve++)k(ve)};oe.length&&(C.unshift(oe),Y=C.length,ie());for(var se=0,$=0;$<Y;$++)se=Math.max(C[$].length,se);var ne={x:f.x1+f.w/2,y:f.y1+f.h/2},le=n.reduce(function(Te,ve){return function(de){return{w:Te.w===-1?de.w:(Te.w+de.w)/2,h:Te.h===-1?de.h:(Te.h+de.h)/2}}(ve.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),Se=Math.max(Y===1?0:s?(f.h-t.padding*2-le.h)/(Y-1):(f.h-t.padding*2-le.h)/(Y+1),I),De=C.reduce(function(Te,ve){return Math.max(Te,ve.length)},0),be=function(ve){var de=rs(ve),ye=de.depth,Ce=de.index;if(t.circle){var ue=Math.min(f.w/2/Y,f.h/2/Y);ue=Math.max(ue,I);var Ae=ue*ye+ue-(Y>0&&C[0].length<=3?ue/2:0),Pe=2*Math.PI/C[ye].length*Ce;return ye===0&&C[0].length===1&&(Ae=1),{x:ne.x+Ae*Math.cos(Pe),y:ne.y+Ae*Math.sin(Pe)}}else{var Fe=C[ye].length,Ye=Math.max(Fe===1?0:s?(f.w-t.padding*2-le.w)/((t.grid?De:Fe)-1):(f.w-t.padding*2-le.w)/((t.grid?De:Fe)+1),I),Ve={x:ne.x+(Ce+1-(Fe+1)/2)*Ye,y:ne.y+(ye+1-(Y+1)/2)*Se};return Ve}};return r.nodes().layoutPositions(this,t,be),this};var UH={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Hk(t){this.options=xt({},UH,t)}Hk.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=Nn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,f=u/Math.max(1,i.length-1),c,h=0,p=0;p<i.length;p++){var y=i[p],g=y.layoutDimensions(e),E=g.w,w=g.h;h=Math.max(h,E,w)}if(at(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(o.h,o.w)/2-h,i.length>1&&e.avoidOverlap){h*=1.75;var v=Math.cos(f)-Math.cos(0),C=Math.sin(f)-Math.sin(0),x=Math.sqrt(h*h/(v*v+C*C));c=Math.max(x,c)}var S=function(D,_){var M=e.startAngle+_*f*(a?1:-1),k=c*Math.cos(M),F=c*Math.sin(M),G={x:s.x+k,y:s.y+F};return G};return n.nodes().layoutPositions(this,e,S),this};var VH={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Uk(t){this.options=xt({},VH,t)}Uk.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),o=Nn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],f=0,c=0;c<i.length;c++){var h=i[c],p=void 0;p=e.concentric(h),u.push({value:p,node:h}),h._private.scratch.concentric=p}i.updateStyle();for(var y=0;y<i.length;y++){var g=i[y],E=g.layoutDimensions(e);f=Math.max(f,E.w,E.h)}u.sort(function(le,Se){return Se.value-le.value});for(var w=e.levelWidth(i),v=[[]],C=v[0],x=0;x<u.length;x++){var S=u[x];if(C.length>0){var A=Math.abs(C[0].value-S.value);A>=w&&(C=[],v.push(C))}C.push(S)}var D=f+e.minNodeSpacing;if(!e.avoidOverlap){var _=v.length>0&&v[0].length>1,M=Math.min(o.w,o.h)/2-D,k=M/(v.length+_?1:0);D=Math.min(D,k)}for(var F=0,G=0;G<v.length;G++){var B=v[G],q=e.sweep===void 0?2*Math.PI-2*Math.PI/B.length:e.sweep,R=B.dTheta=q/Math.max(1,B.length-1);if(B.length>1&&e.avoidOverlap){var P=Math.cos(R)-Math.cos(0),N=Math.sin(R)-Math.sin(0),I=Math.sqrt(D*D/(P*P+N*N));F=Math.max(I,F)}B.r=F,F+=D}if(e.equidistant){for(var z=0,ae=0,re=0;re<v.length;re++){var K=v[re],V=K.r-ae;z=Math.max(z,V)}ae=0;for(var Z=0;Z<v.length;Z++){var U=v[Z];Z===0&&(ae=U.r),U.r=ae,ae+=z}}for(var W={},Y=0;Y<v.length;Y++)for(var ee=v[Y],oe=ee.dTheta,te=ee.r,ie=0;ie<ee.length;ie++){var se=ee[ie],$=e.startAngle+(r?1:-1)*oe*ie,ne={x:s.x+te*Math.cos($),y:s.y+te*Math.sin($)};W[se.node.id()]=ne}return a.nodes().layoutPositions(this,e,function(le){var Se=le.id();return W[Se]}),this};var Pv,WH={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function qc(t){this.options=xt({},WH,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),s=e.some(function(f){return f.data("id")===i}),u=e.some(function(f){return f.data("id")===o});return!s||!u});this.options.eles=this.options.eles.not(n)}qc.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Pv=!0:Pv=!1;var n=$H(e,r,t);Pv&&XH(n),t.randomize&&KH(n);var a=Za(),i=function(){jH(n,e,t),t.fit===!0&&e.fit(t.padding)},o=function(p){return!(r.stopped||p>=t.numIter||(ZH(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var p=t.eles.nodes(),y=Wk(n,t,p);p.layoutPositions(r,t,y)}},u=0,f=!0;if(t.animate===!0){var c=function(){for(var p=0;f&&p<t.refresh;)f=o(u),u++,p++;if(!f)$T(n,t),s();else{var y=Za();y-a>=t.animationThreshold&&i(),jf(c)}};c()}else{for(;f;)f=o(u),u++;$T(n,t),s()}return this};qc.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};qc.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var $H=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=Nn(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},u=n.eles.components(),f={},c=0;c<u.length;c++)for(var h=u[c],p=0;p<h.length;p++){var y=h[p];f[y.id()]=c}for(var c=0;c<s.nodeSize;c++){var g=i[c],E=g.layoutDimensions(n),w={};w.isLocked=g.locked(),w.id=g.data("id"),w.parentId=g.data("parent"),w.cmptId=f[g.id()],w.children=[],w.positionX=g.position("x"),w.positionY=g.position("y"),w.offsetX=0,w.offsetY=0,w.height=E.w,w.width=E.h,w.maxX=w.positionX+w.width/2,w.minX=w.positionX-w.width/2,w.maxY=w.positionY+w.height/2,w.minY=w.positionY-w.height/2,w.padLeft=parseFloat(g.style("padding")),w.padRight=parseFloat(g.style("padding")),w.padTop=parseFloat(g.style("padding")),w.padBottom=parseFloat(g.style("padding")),w.nodeRepulsion=yr(n.nodeRepulsion)?n.nodeRepulsion(g):n.nodeRepulsion,s.layoutNodes.push(w),s.idToIndex[w.id]=c}for(var v=[],C=0,x=-1,S=[],c=0;c<s.nodeSize;c++){var g=s.layoutNodes[c],A=g.parentId;A!=null?s.layoutNodes[s.idToIndex[A]].children.push(g.id):(v[++x]=g.id,S.push(g.id))}for(s.graphSet.push(S);C<=x;){var D=v[C++],_=s.idToIndex[D],y=s.layoutNodes[_],M=y.children;if(M.length>0){s.graphSet.push(M);for(var c=0;c<M.length;c++)v[++x]=M[c]}}for(var c=0;c<s.graphSet.length;c++)for(var k=s.graphSet[c],p=0;p<k.length;p++){var F=s.idToIndex[k[p]];s.indexToGraph[F]=c}for(var c=0;c<s.edgeSize;c++){var G=a[c],B={};B.id=G.data("id"),B.sourceId=G.data("source"),B.targetId=G.data("target");var q=yr(n.idealEdgeLength)?n.idealEdgeLength(G):n.idealEdgeLength,R=yr(n.edgeElasticity)?n.edgeElasticity(G):n.edgeElasticity,P=s.idToIndex[B.sourceId],N=s.idToIndex[B.targetId],I=s.indexToGraph[P],z=s.indexToGraph[N];if(I!=z){for(var ae=YH(B.sourceId,B.targetId,s),re=s.graphSet[ae],K=0,w=s.layoutNodes[P];re.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],K++;for(w=s.layoutNodes[N];re.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],K++;q*=K*n.nestingFactor}B.idealLength=q,B.elasticity=R,s.layoutEdges.push(B)}return s},YH=function(e,r,n){var a=Vk(e,r,0,n);return 2>a.count?0:a.graph},Vk=function(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var u=i[s],f=a.idToIndex[u],c=a.layoutNodes[f].children;if(c.length!==0){var h=a.indexToGraph[a.idToIndex[c[0]]],p=Vk(e,r,h,a);if(p.count!==0)if(p.count===1){if(o++,o===2)break}else return p}}return{count:o,graph:n}},XH,KH=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},Wk=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var u=e.layoutNodes[e.idToIndex[o.data("id")]];if(r.boundingBox){var f=(u.positionX-i.x1)/i.w,c=(u.positionY-i.y1)/i.h;return{x:a.x1+f*a.w,y:a.y1+c*a.h}}else return{x:u.positionX,y:u.positionY}}},jH=function(e,r,n){var a=n.layout,i=n.eles.nodes(),o=Wk(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},ZH=function(e,r,n){QH(e,r),tU(e),rU(e,r),nU(e),aU(e)},QH=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],u=o+1;u<i;u++){var f=e.layoutNodes[e.idToIndex[a[u]]];JH(s,f,e,r)}},WT=function(e){return-1+2*e*Math.random()},JH=function(e,r,n,a){var i=e.cmptId,o=r.cmptId;if(!(i!==o&&!n.isCompound)){var s=r.positionX-e.positionX,u=r.positionY-e.positionY,f=1;s===0&&u===0&&(s=WT(f),u=WT(f));var c=eU(e,r,s,u);if(c>0)var h=a.nodeOverlap*c,p=Math.sqrt(s*s+u*u),y=h*s/p,g=h*u/p;else var E=nc(e,s,u),w=nc(r,-1*s,-1*u),v=w.x-E.x,C=w.y-E.y,x=v*v+C*C,p=Math.sqrt(x),h=(e.nodeRepulsion+r.nodeRepulsion)/x,y=h*v/p,g=h*C/p;e.isLocked||(e.offsetX-=y,e.offsetY-=g),r.isLocked||(r.offsetX+=y,r.offsetY+=g)}},eU=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var o=e.maxY-r.minY;else var o=r.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},nc=function(e,r,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,u=n/r,f=o/s,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=i+o/2,c):0<r&&-1*f<=u&&u<=f?(c.x=a+s/2,c.y=i+s*n/2/r,c):0>r&&-1*f<=u&&u<=f?(c.x=a-s/2,c.y=i-s*n/2/r,c):0<n&&(u<=-1*f||u>=f)?(c.x=a+o*r/2/n,c.y=i+o/2,c):(0>n&&(u<=-1*f||u>=f)&&(c.x=a-o*r/2/n,c.y=i-o/2),c)},tU=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],s=e.idToIndex[a.targetId],u=e.layoutNodes[s],f=u.positionX-o.positionX,c=u.positionY-o.positionY;if(!(f===0&&c===0)){var h=nc(o,f,c),p=nc(u,-1*f,-1*c),y=p.x-h.x,g=p.y-h.y,E=Math.sqrt(y*y+g*g),w=Math.pow(a.idealLength-E,2)/a.elasticity;if(E!==0)var v=w*y/E,C=w*g/E;else var v=0,C=0;o.isLocked||(o.offsetX+=v,o.offsetY+=C),u.isLocked||(u.offsetX-=v,u.offsetY-=C)}}},rU=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var f=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[f.parentId]],s=c.positionX,u=c.positionY;for(var h=0;h<o;h++){var p=e.layoutNodes[e.idToIndex[i[h]]];if(!p.isLocked){var y=s-p.positionX,g=u-p.positionY,E=Math.sqrt(y*y+g*g);if(E>n){var w=r.gravity*y/E,v=r.gravity*g/E;p.offsetX+=w,p.offsetY+=v}}}}},nU=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],s=e.idToIndex[o],u=e.layoutNodes[s],f=u.children;if(0<f.length&&!u.isLocked){for(var c=u.offsetX,h=u.offsetY,p=0;p<f.length;p++){var y=e.layoutNodes[e.idToIndex[f[p]]];y.offsetX+=c,y.offsetY+=h,n[++i]=f[p]}u.offsetX=0,u.offsetY=0}}},aU=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=iU(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,$k(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},iU=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},$k=function(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return $k(a,r)}},$T=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId,u=a[s]=a[s]||[];u.push(o)}for(var f=0,i=0;i<a.length;i++){var c=a[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var h=0;h<c.length;h++){var p=c[h];c.x1=Math.min(c.x1,p.positionX-p.width/2),c.x2=Math.max(c.x2,p.positionX+p.width/2),c.y1=Math.min(c.y1,p.positionY-p.height/2),c.y2=Math.max(c.y2,p.positionY+p.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,f+=c.w*c.h}}a.sort(function(C,x){return x.w*x.h-C.w*C.h});for(var y=0,g=0,E=0,w=0,v=Math.sqrt(f)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(c){for(var h=0;h<c.length;h++){var p=c[h];p.isLocked||(p.positionX+=y-c.x1,p.positionY+=g-c.y1)}y+=c.w+r.componentSpacing,E+=c.w+r.componentSpacing,w=Math.max(w,c.h),E>v&&(g+=w+r.componentSpacing,y=0,E=0,w=0)}}},oU={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Yk(t){this.options=xt({},oU,t)}Yk.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Nn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(Z){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),u=Math.round(s),f=Math.round(i.w/i.h*s),c=function(U){if(U==null)return Math.min(u,f);var W=Math.min(u,f);W==u?u=U:f=U},h=function(U){if(U==null)return Math.max(u,f);var W=Math.max(u,f);W==u?u=U:f=U},p=e.rows,y=e.cols!=null?e.cols:e.columns;if(p!=null&&y!=null)u=p,f=y;else if(p!=null&&y==null)u=p,f=Math.ceil(o/u);else if(p==null&&y!=null)f=y,u=Math.ceil(o/f);else if(f*u>o){var g=c(),E=h();(g-1)*E>=o?c(g-1):(E-1)*g>=o&&h(E-1)}else for(;f*u<o;){var w=c(),v=h();(v+1)*w>=o?h(v+1):c(w+1)}var C=i.w/f,x=i.h/u;if(e.condense&&(C=0,x=0),e.avoidOverlap)for(var S=0;S<a.length;S++){var A=a[S],D=A._private.position;(D.x==null||D.y==null)&&(D.x=0,D.y=0);var _=A.layoutDimensions(e),M=e.avoidOverlapPadding,k=_.w+M,F=_.h+M;C=Math.max(C,k),x=Math.max(x,F)}for(var G={},B=function(U,W){return!!G["c-"+U+"-"+W]},q=function(U,W){G["c-"+U+"-"+W]=!0},R=0,P=0,N=function(){P++,P>=f&&(P=0,R++)},I={},z=0;z<a.length;z++){var ae=a[z],re=e.position(ae);if(re&&(re.row!==void 0||re.col!==void 0)){var K={row:re.row,col:re.col};if(K.col===void 0)for(K.col=0;B(K.row,K.col);)K.col++;else if(K.row===void 0)for(K.row=0;B(K.row,K.col);)K.row++;I[ae.id()]=K,q(K.row,K.col)}}var V=function(U,W){var Y,ee;if(U.locked()||U.isParent())return!1;var oe=I[U.id()];if(oe)Y=oe.col*C+C/2+i.x1,ee=oe.row*x+x/2+i.y1;else{for(;B(R,P);)N();Y=P*C+C/2+i.x1,ee=R*x+x/2+i.y1,q(R,P),N()}return{x:Y,y:ee}};a.layoutPositions(this,e,V)}return this};var sU={ready:function(){},stop:function(){}};function I1(t){this.options=xt({},sU,t)}I1.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};I1.prototype.stop=function(){return this};var lU={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Xk(t){this.options=xt({},lU,t)}Xk.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=yr(t.positions);function a(i){if(t.positions==null)return Mz(i.position());if(n)return t.positions(i);var o=t.positions[i._private.data.id];return o??null}return r.layoutPositions(this,t,function(i,o){var s=a(i);return i.locked()||s==null?!1:s}),this};var uU={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Kk(t){this.options=xt({},uU,t)}Kk.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=Nn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var fU=[{name:"breadthfirst",impl:Gk},{name:"circle",impl:Hk},{name:"concentric",impl:Uk},{name:"cose",impl:qc},{name:"grid",impl:Yk},{name:"null",impl:I1},{name:"preset",impl:Xk},{name:"random",impl:Kk}];function jk(t){this.options=t,this.notifications=0}var YT=function(){},XT=function(){throw new Error("A headless instance can not render images")};jk.prototype={recalculateRenderedStyle:YT,notify:function(){this.notifications++},init:YT,isHeadless:function(){return!0},png:XT,jpg:XT};var F1={};F1.arrowShapeWidth=.3;F1.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(f,c,h,p,y,g,E){var w=y.x-h/2-E,v=y.x+h/2+E,C=y.y-h/2-E,x=y.y+h/2+E,S=w<=f&&f<=v&&C<=c&&c<=x;return S},n=function(f,c,h,p,y){var g=f*Math.cos(p)-c*Math.sin(p),E=f*Math.sin(p)+c*Math.cos(p),w=g*h,v=E*h,C=w+y.x,x=v+y.y;return{x:C,y:x}},a=function(f,c,h,p){for(var y=[],g=0;g<f.length;g+=2){var E=f[g],w=f[g+1];y.push(n(E,w,c,h,p))}return y},i=function(f){for(var c=[],h=0;h<f.length;h++){var p=f[h];c.push(p.x,p.y)}return c},o=function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").pfValue*2},s=function(f,c){mt(c)&&(c=t[c]),t[f]=xt({name:f,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(p,y,g,E,w,v){var C=i(a(this.points,g+2*v,E,w)),x=Rn(p,y,C);return x},roughCollide:r,draw:function(p,y,g,E){var w=a(this.points,y,g,E);e.arrowShapeImpl("polygon")(p,w)},spacing:function(p){return 0},gap:o},c)};s("none",{collide:Zf,roughCollide:Zf,draw:C1,spacing:fE,gap:fE}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(f,c,h,p,y){var g=a(this.points,c,h,p),E=this.controlPoint,w=n(E[0],E[1],c,h,p);e.arrowShapeImpl(this.name)(f,g,w)},gap:function(f){return o(f)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(f,c,h,p,y,g,E){var w=i(a(this.points,h+2*E,p,y)),v=i(a(this.pointsTee,h+2*E,p,y)),C=Rn(f,c,w)||Rn(f,c,v);return C},draw:function(f,c,h,p,y){var g=a(this.points,c,h,p),E=a(this.pointsTee,c,h,p);e.arrowShapeImpl(this.name)(f,g,E)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(f,c,h,p,y,g,E){var w=y,v=Math.pow(w.x-f,2)+Math.pow(w.y-c,2)<=Math.pow((h+2*E)*this.radius,2),C=i(a(this.points,h+2*E,p,y));return Rn(f,c,C)||v},draw:function(f,c,h,p,y){var g=a(this.pointsTr,c,h,p);e.arrowShapeImpl(this.name)(f,g,p.x,p.y,this.radius*c)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(f,c){var h=this.baseCrossLinePts.slice(),p=c/f,y=3,g=5;return h[y]=h[y]-p,h[g]=h[g]-p,h},collide:function(f,c,h,p,y,g,E){var w=i(a(this.points,h+2*E,p,y)),v=i(a(this.crossLinePts(h,g),h+2*E,p,y)),C=Rn(f,c,w)||Rn(f,c,v);return C},draw:function(f,c,h,p,y){var g=a(this.points,c,h,p),E=a(this.crossLinePts(c,y),c,h,p);e.arrowShapeImpl(this.name)(f,g,E)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(f){return o(f)*.525}}),s("circle",{radius:.15,collide:function(f,c,h,p,y,g,E){var w=y,v=Math.pow(w.x-f,2)+Math.pow(w.y-c,2)<=Math.pow((h+2*E)*this.radius,2);return v},draw:function(f,c,h,p,y){e.arrowShapeImpl(this.name)(f,p.x,p.y,this.radius*c)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(f){return 1},gap:function(f){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(f){return .95*f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}})};var Eo={};Eo.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=r.pan(),u=r.zoom(),f=((t-a)/o-s.x)/u,c=((e-i)/o-s.y)/u;return[f,c]};Eo.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(v){return parseFloat(r.getPropertyValue(v))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=t.clientWidth,s=t.clientHeight,u=a.left+a.right,f=a.top+a.bottom,c=i.left+i.right,h=e.width/(o+c),p=o-u,y=s-f,g=e.left+a.left+i.left,E=e.top+a.top+i.top;return this.containerBB=[g,E,p,y,h]};Eo.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Eo.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};Eo.findNearestElements=function(t,e,r,n){var a=this,i=this,o=i.getCachedZSortedEles(),s=[],u=i.cy.zoom(),f=i.cy.hasCompoundNodes(),c=(n?24:8)/u,h=(n?8:2)/u,p=(n?8:2)/u,y=1/0,g,E;r&&(o=o.interactive);function w(_,M){if(_.isNode()){if(E)return;E=_,s.push(_)}if(_.isEdge()&&(M==null||M<y))if(g){if(g.pstyle("z-compound-depth").value===_.pstyle("z-compound-depth").value&&g.pstyle("z-compound-depth").value===_.pstyle("z-compound-depth").value){for(var k=0;k<s.length;k++)if(s[k].isEdge()){s[k]=_,g=_,y=M??y;break}}}else s.push(_),g=_,y=M??y}function v(_){var M=_.outerWidth()+2*h,k=_.outerHeight()+2*h,F=M/2,G=k/2,B=_.position(),q=_.pstyle("corner-radius").value==="auto"?"auto":_.pstyle("corner-radius").pfValue,R=_._private.rscratch;if(B.x-F<=t&&t<=B.x+F&&B.y-G<=e&&e<=B.y+G){var P=i.nodeShapes[a.getNodeShape(_)];if(P.checkPoint(t,e,0,M,k,B.x,B.y,q,R))return w(_,0),!0}}function C(_){var M=_._private,k=M.rscratch,F=_.pstyle("width").pfValue,G=_.pstyle("arrow-scale").value,B=F/2+c,q=B*B,R=B*2,z=M.source,ae=M.target,P;if(k.edgeType==="segments"||k.edgeType==="straight"||k.edgeType==="haystack"){for(var N=k.allpts,I=0;I+3<N.length;I+=2)if(Vz(t,e,N[I],N[I+1],N[I+2],N[I+3],R)&&q>(P=Kz(t,e,N[I],N[I+1],N[I+2],N[I+3])))return w(_,P),!0}else if(k.edgeType==="bezier"||k.edgeType==="multibezier"||k.edgeType==="self"||k.edgeType==="compound"){for(var N=k.allpts,I=0;I+5<k.allpts.length;I+=4)if(Wz(t,e,N[I],N[I+1],N[I+2],N[I+3],N[I+4],N[I+5],R)&&q>(P=Xz(t,e,N[I],N[I+1],N[I+2],N[I+3],N[I+4],N[I+5])))return w(_,P),!0}for(var z=z||M.source,ae=ae||M.target,re=a.getArrowWidth(F,G),K=[{name:"source",x:k.arrowStartX,y:k.arrowStartY,angle:k.srcArrowAngle},{name:"target",x:k.arrowEndX,y:k.arrowEndY,angle:k.tgtArrowAngle},{name:"mid-source",x:k.midX,y:k.midY,angle:k.midsrcArrowAngle},{name:"mid-target",x:k.midX,y:k.midY,angle:k.midtgtArrowAngle}],I=0;I<K.length;I++){var V=K[I],Z=i.arrowShapes[_.pstyle(V.name+"-arrow-shape").value],U=_.pstyle("width").pfValue;if(Z.roughCollide(t,e,re,V.angle,{x:V.x,y:V.y},U,c)&&Z.collide(t,e,re,V.angle,{x:V.x,y:V.y},U,c))return w(_),!0}f&&s.length>0&&(v(z),v(ae))}function x(_,M,k){return Mn(_,M,k)}function S(_,M){var k=_._private,F=p,G;M?G=M+"-":G="",_.boundingBox();var B=k.labelBounds[M||"main"],q=_.pstyle(G+"label").value,R=_.pstyle("text-events").strValue==="yes";if(!(!R||!q)){var P=x(k.rscratch,"labelX",M),N=x(k.rscratch,"labelY",M),I=x(k.rscratch,"labelAngle",M),z=_.pstyle(G+"text-margin-x").pfValue,ae=_.pstyle(G+"text-margin-y").pfValue,re=B.x1-F-z,K=B.x2+F-z,V=B.y1-F-ae,Z=B.y2+F-ae;if(I){var U=Math.cos(I),W=Math.sin(I),Y=function(ne,le){return ne=ne-P,le=le-N,{x:ne*U-le*W+P,y:ne*W+le*U+N}},ee=Y(re,V),oe=Y(re,Z),te=Y(K,V),ie=Y(K,Z),se=[ee.x+z,ee.y+ae,te.x+z,te.y+ae,ie.x+z,ie.y+ae,oe.x+z,oe.y+ae];if(Rn(t,e,se))return w(_),!0}else if(Es(B,t,e))return w(_),!0}}for(var A=o.length-1;A>=0;A--){var D=o[A];D.isNode()?v(D)||S(D):C(D)||S(D)||S(D,"source")||S(D,"target")}return s};Eo.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),o=2/i,s=[],u=Math.min(t,r),f=Math.max(t,r),c=Math.min(e,n),h=Math.max(e,n);t=u,r=f,e=c,n=h;var p=Nn({x1:t,y1:e,x2:r,y2:n});function y(q,R,P){return Mn(q,R,P)}function g(q,R){var P=q._private,N=o,I="";q.boundingBox();var z=P.labelBounds.main,ae=y(P.rscratch,"labelX",R),re=y(P.rscratch,"labelY",R),K=y(P.rscratch,"labelAngle",R),V=q.pstyle(I+"text-margin-x").pfValue,Z=q.pstyle(I+"text-margin-y").pfValue,U=z.x1-N-V,W=z.x2+N-V,Y=z.y1-N-Z,ee=z.y2+N-Z;if(K){var oe=Math.cos(K),te=Math.sin(K),ie=function($,ne){return $=$-ae,ne=ne-re,{x:$*oe-ne*te+ae,y:$*te+ne*oe+re}};return[ie(U,Y),ie(W,Y),ie(W,ee),ie(U,ee)]}else return[{x:U,y:Y},{x:W,y:Y},{x:W,y:ee},{x:U,y:ee}]}for(var E=0;E<a.length;E++){var w=a[E];if(w.isNode()){var v=w,C=v.pstyle("text-events").strValue==="yes",x=v.pstyle("box-select-labels").strValue==="yes",S=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:x&&C});if(A1(p,S)){var A=g(v),D=[{x:p.x1,y:p.y1},{x:p.x2,y:p.y1},{x:p.x2,y:p.y2},{x:p.x1,y:p.y2}];eG(A,D)&&s.push(v)}}else{var _=w,M=_._private,k=M.rscratch;if(k.startX!=null&&k.startY!=null&&!Es(p,k.startX,k.startY)||k.endX!=null&&k.endY!=null&&!Es(p,k.endX,k.endY))continue;if(k.edgeType==="bezier"||k.edgeType==="multibezier"||k.edgeType==="self"||k.edgeType==="compound"||k.edgeType==="segments"||k.edgeType==="haystack"){for(var F=M.rstyle.bezierPts||M.rstyle.linePts||M.rstyle.haystackPts,G=!0,B=0;B<F.length;B++)if(!Hz(p,F[B])){G=!1;break}G&&s.push(_)}else(k.edgeType==="haystack"||k.edgeType==="straight")&&s.push(_)}}return s};var ac={};ac.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",u,f,c,h,p,y,v,C;if(r?(c=e.haystackPts[0],h=e.haystackPts[1],p=e.haystackPts[2],y=e.haystackPts[3]):(c=e.arrowStartX,h=e.arrowStartY,p=e.arrowEndX,y=e.arrowEndY),v=e.midX,C=e.midY,i)u=c-e.segpts[0],f=h-e.segpts[1];else if(a||o||s||n){var g=e.allpts,E=Vr(g[0],g[2],g[4],.1),w=Vr(g[1],g[3],g[5],.1);u=c-E,f=h-w}else u=c-v,f=h-C;e.srcArrowAngle=af(u,f);var v=e.midX,C=e.midY;if(r&&(v=(c+p)/2,C=(h+y)/2),u=p-c,f=y-h,i){var g=e.allpts;if(g.length/2%2===0){var x=g.length/2,S=x-2;u=g[x]-g[S],f=g[x+1]-g[S+1]}else if(e.isRound)u=e.midVector[1],f=-e.midVector[0];else{var x=g.length/2-1,S=x-2;u=g[x]-g[S],f=g[x+1]-g[S+1]}}else if(a||o||s){var g=e.allpts,A=e.ctrlpts,D,_,M,k;if(A.length/2%2===0){var F=g.length/2-1,G=F+2,B=G+2;D=Vr(g[F],g[G],g[B],0),_=Vr(g[F+1],g[G+1],g[B+1],0),M=Vr(g[F],g[G],g[B],1e-4),k=Vr(g[F+1],g[G+1],g[B+1],1e-4)}else{var G=g.length/2-1,F=G-2,B=G+2;D=Vr(g[F],g[G],g[B],.4999),_=Vr(g[F+1],g[G+1],g[B+1],.4999),M=Vr(g[F],g[G],g[B],.5),k=Vr(g[F+1],g[G+1],g[B+1],.5)}u=M-D,f=k-_}if(e.midtgtArrowAngle=af(u,f),e.midDispX=u,e.midDispY=f,u*=-1,f*=-1,i){var g=e.allpts;if(g.length/2%2!==0){if(!e.isRound){var x=g.length/2-1,q=x+2;u=-(g[q]-g[x]),f=-(g[q+1]-g[x+1])}}}if(e.midsrcArrowAngle=af(u,f),i)u=p-e.segpts[e.segpts.length-2],f=y-e.segpts[e.segpts.length-1];else if(a||o||s||n){var g=e.allpts,R=g.length,E=Vr(g[R-6],g[R-4],g[R-2],.9),w=Vr(g[R-5],g[R-3],g[R-1],.9);u=p-E,f=y-w}else u=p-v,f=y-C;e.tgtArrowAngle=af(u,f)};ac.getArrowWidth=ac.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var Vb,Wb,xa={},Un={},KT,jT,vo,_f,Ha,no,uo,ma,ns,hf,Zk,Qk,$b,Yb,ZT,QT=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},cU=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},dU=function(e,r,n,a,i){if(e!==ZT?QT(r,e,xa):cU(Un,xa),QT(r,n,Un),KT=xa.nx*Un.ny-xa.ny*Un.nx,jT=xa.nx*Un.nx-xa.ny*-Un.ny,Ha=Math.asin(Math.max(-1,Math.min(1,KT))),Math.abs(Ha)<1e-6){Vb=r.x,Wb=r.y,uo=ns=0;return}vo=1,_f=!1,jT<0?Ha<0?Ha=Math.PI+Ha:(Ha=Math.PI-Ha,vo=-1,_f=!0):Ha>0&&(vo=-1,_f=!0),r.radius!==void 0?ns=r.radius:ns=a,no=Ha/2,hf=Math.min(xa.len/2,Un.len/2),i?(ma=Math.abs(Math.cos(no)*ns/Math.sin(no)),ma>hf?(ma=hf,uo=Math.abs(ma*Math.sin(no)/Math.cos(no))):uo=ns):(ma=Math.min(hf,ns),uo=Math.abs(ma*Math.sin(no)/Math.cos(no))),$b=r.x+Un.nx*ma,Yb=r.y+Un.ny*ma,Vb=$b-Un.ny*uo*vo,Wb=Yb+Un.nx*uo*vo,Zk=r.x+xa.nx*ma,Qk=r.y+xa.ny*ma,ZT=r};function Jk(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function B1(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(dU(t,e,r,n,a),{cx:Vb,cy:Wb,radius:uo,startX:Zk,startY:Qk,stopX:$b,stopY:Yb,startAngle:xa.ang+Math.PI/2*vo,endAngle:Un.ang-Math.PI/2*vo,counterClockwise:_f})}var eu=.01,hU=Math.sqrt(2*eu),pn={};pn.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,o=t.pstyle("source-endpoint"),s=t.pstyle("target-endpoint"),u=o.units!=null&&s.units!=null,f=function(A,D,_,M){var k=M-D,F=_-A,G=Math.sqrt(F*F+k*k);return{x:-k/G,y:F/G}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(u){var h=this.manualEndptToPx(t.source()[0],o),p=Fr(h,2),y=p[0],g=p[1],E=this.manualEndptToPx(t.target()[0],s),w=Fr(E,2),v=w[0],C=w[1],x={x1:y,y1:g,x2:v,y2:C};a=f(y,g,v,C),i=x}else Yt("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};pn.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,u=o.position(),f=s.position(),c=o.width(),h=s.width(),p=o.height(),y=s.height(),g=r.pstyle("haystack-radius").value,E=g/2;a.haystackPts=a.allpts=[a.source.x*c*E+u.x,a.source.y*p*E+u.y,a.target.x*h*E+f.x,a.target.y*y*E+f.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};pn.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),o=t.pstyle("radius-type"),s=Math.min(n.pfValue.length,a.pfValue.length),u=i.pfValue[i.pfValue.length-1],f=o.pfValue[o.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<s;c++){var h=n.pfValue[c],p=a.pfValue[c],y=1-h,g=h,E=this.findMidptPtsEtc(t,e),w=E.midptPts,v=E.vectorNormInverse,C={x:w.x1*y+w.x2*g,y:w.y1*y+w.y2*g};r.segpts.push(C.x+v.x*p,C.y+v.y*p),r.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:u),r.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:f)==="arc-radius")}};pn.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,f=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,h=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var p=r,y=h;n&&(p=0,y=u);var g=f-Math.PI/2,E=g-c/2,w=g+c/2,v=f+"_"+c;p=i[v]===void 0?i[v]=0:++i[v],a.ctrlpts=[o.x+Math.cos(E)*1.4*y*(p/3+1),o.y+Math.sin(E)*1.4*y*(p/3+1),o.x+Math.cos(w)*1.4*y*(p/3+1),o.y+Math.sin(w)*1.4*y*(p/3+1)]};pn.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,u=e.srcH,f=e.tgtW,c=e.tgtH,h=t.pstyle("control-point-step-size").pfValue,p=t.pstyle("control-point-distances"),y=p?p.pfValue[0]:void 0,g=r,E=h;n&&(g=0,E=y);var w=50,v={x:i.x-s/2,y:i.y-u/2},C={x:o.x-f/2,y:o.y-c/2},x={x:Math.min(v.x,C.x),y:Math.min(v.y,C.y)},S=.5,A=Math.max(S,Math.log(s*eu)),D=Math.max(S,Math.log(f*eu));a.ctrlpts=[x.x,x.y-(1+Math.pow(w,1.12)/100)*E*(g/3+1)*A,x.x-(1+Math.pow(w,1.12)/100)*E*(g/3+1)*D,x.y]};pn.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};pn.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,o=t.pstyle("control-point-step-size").pfValue,s=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),f=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,h=u.value[0],p=n;i.edgeType=p?"multibezier":"bezier",i.ctrlpts=[];for(var y=0;y<f;y++){var g=(.5-e.eles.length/2+r)*o*(a?-1:1),E=void 0,w=S1(g);p&&(c=s?s.pfValue[y]:o,h=u.value[y]),n?E=c:E=c!==void 0?w*c:void 0;var v=E!==void 0?E:g,C=1-h,x=h,S=this.findMidptPtsEtc(t,e),A=S.midptPts,D=S.vectorNormInverse,_={x:A.x1*C+A.x2*x,y:A.y1*C+A.y2*x};i.ctrlpts.push(_.x+D.x*v,_.y+D.y*v)}};pn.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",u="upward",f="auto",c=e.posPts,h=e.srcW,p=e.srcH,y=e.tgtW,g=e.tgtH,E=t.pstyle("edge-distances").value,w=E!=="node-position",v=t.pstyle("taxi-direction").value,C=v,x=t.pstyle("taxi-turn"),S=x.units==="%",A=x.pfValue,D=A<0,_=t.pstyle("taxi-turn-min-distance").pfValue,M=w?(h+y)/2:0,k=w?(p+g)/2:0,F=c.x2-c.x1,G=c.y2-c.y1,B=function(j,pe){return j>0?Math.max(j-pe,0):Math.min(j+pe,0)},q=B(F,M),R=B(G,k),P=!1;C===f?v=Math.abs(q)>Math.abs(R)?a:n:C===u||C===s?(v=n,P=!0):(C===i||C===o)&&(v=a,P=!0);var N=v===n,I=N?R:q,z=N?G:F,ae=S1(z),re=!1;!(P&&(S||D))&&(C===s&&z<0||C===u&&z>0||C===i&&z>0||C===o&&z<0)&&(ae*=-1,I=ae*Math.abs(I),re=!0);var K;if(S){var V=A<0?1+A:A;K=V*I}else{var Z=A<0?I:0;K=Z+A*ae}var U=function(j){return Math.abs(j)<_||Math.abs(j)>=Math.abs(I)},W=U(K),Y=U(Math.abs(I)-Math.abs(K)),ee=W||Y;if(ee&&!re)if(N){var oe=Math.abs(z)<=p/2,te=Math.abs(F)<=y/2;if(oe){var ie=(c.x1+c.x2)/2,se=c.y1,$=c.y2;r.segpts=[ie,se,ie,$]}else if(te){var ne=(c.y1+c.y2)/2,le=c.x1,Se=c.x2;r.segpts=[le,ne,Se,ne]}else r.segpts=[c.x1,c.y2]}else{var De=Math.abs(z)<=h/2,be=Math.abs(G)<=g/2;if(De){var Te=(c.y1+c.y2)/2,ve=c.x1,de=c.x2;r.segpts=[ve,Te,de,Te]}else if(be){var ye=(c.x1+c.x2)/2,Ce=c.y1,ue=c.y2;r.segpts=[ye,Ce,ye,ue]}else r.segpts=[c.x2,c.y1]}else if(N){var Ae=c.y1+K+(w?p/2*ae:0),Pe=c.x1,Fe=c.x2;r.segpts=[Pe,Ae,Fe,Ae]}else{var Ye=c.x1+K+(w?h/2*ae:0),Ve=c.y1,Qe=c.y2;r.segpts=[Ye,Ve,Ye,Qe]}if(r.isRound){var Xe=t.pstyle("taxi-radius").value,We=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Xe),r.isArcRadius=new Array(r.segpts.length/2).fill(We)}};pn.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,u=e.tgtH,f=e.srcShape,c=e.tgtShape,h=e.srcCornerRadius,p=e.tgtCornerRadius,y=e.srcRs,g=e.tgtRs,E=!at(r.startX)||!at(r.startY),w=!at(r.arrowStartX)||!at(r.arrowStartY),v=!at(r.endX)||!at(r.endY),C=!at(r.arrowEndX)||!at(r.arrowEndY),x=3,S=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,A=x*S,D=bo({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),_=D<A,M=bo({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),k=M<A,F=!1;if(E||w||_){F=!0;var G={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},B=Math.sqrt(G.x*G.x+G.y*G.y),q={x:G.x/B,y:G.y/B},R=Math.max(i,o),P={x:r.ctrlpts[0]+q.x*2*R,y:r.ctrlpts[1]+q.y*2*R},N=f.intersectLine(n.x,n.y,i,o,P.x,P.y,0,h,y);_?(r.ctrlpts[0]=r.ctrlpts[0]+q.x*(A-D),r.ctrlpts[1]=r.ctrlpts[1]+q.y*(A-D)):(r.ctrlpts[0]=N[0]+q.x*A,r.ctrlpts[1]=N[1]+q.y*A)}if(v||C||k){F=!0;var I={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},z=Math.sqrt(I.x*I.x+I.y*I.y),ae={x:I.x/z,y:I.y/z},re=Math.max(i,o),K={x:r.ctrlpts[0]+ae.x*2*re,y:r.ctrlpts[1]+ae.y*2*re},V=c.intersectLine(a.x,a.y,s,u,K.x,K.y,0,p,g);k?(r.ctrlpts[0]=r.ctrlpts[0]+ae.x*(A-M),r.ctrlpts[1]=r.ctrlpts[1]+ae.y*(A-M)):(r.ctrlpts[0]=V[0]+ae.x*A,r.ctrlpts[1]=V[1]+ae.y*A)}F&&this.findEndpoints(t)}};pn.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=Vr(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=Vr(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],s=e.isArcRadius[i/2-1];e.roundCorners.push(B1({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,f=u-2;e.midX=(e.segpts[f]+e.segpts[u])/2,e.midY=(e.segpts[f+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var h={x:e.segpts[c],y:e.segpts[c+1]},p=e.roundCorners[c/2];if(p.radius===0){var y={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=h.x,e.midY=h.y,e.midVector=[h.y-y.y,y.x-h.x]}else{var g=[h.x-p.cx,h.y-p.cy],E=p.radius/Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2));g=g.map(function(w){return w*E}),e.midX=p.cx+g[0],e.midY=p.cy+g[1],e.midVector=g}}}}};pn.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||at(e.startX)&&at(e.startY)&&at(e.endX)&&at(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Yt("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};pn.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i=new Ya,o=function(k,F){return[].concat(Xf(k),[F?1:0]).join("-")},s=[],u=[],f=0;f<t.length;f++){var c=t[f],h=c._private,p=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(p==="haystack"){u.push(c);continue}var y=p==="unbundled-bezier"||p.endsWith("segments")||p==="straight"||p==="straight-triangle"||p.endsWith("taxi"),g=p==="unbundled-bezier"||p==="bezier",E=h.source,w=h.target,v=E.poolIndex(),C=w.poolIndex(),x=[v,C].sort(),S=o(x,y),A=i.get(S);A==null&&(A={eles:[]},s.push({pairId:x,edgeIsUnbundled:y}),i.set(S,A)),A.eles.push(c),y&&(A.hasUnbundled=!0),g&&(A.hasBezier=!0)}}for(var D=function(){var k=s[_],F=k.pairId,G=k.edgeIsUnbundled,B=o(F,G),q=i.get(B),R;if(!q.hasUnbundled){var P=q.eles[0].parallelEdges().filter(function(We){return We.isBundledBezier()});E1(q.eles),P.forEach(function(We){return q.eles.push(We)}),q.eles.sort(function(We,he){return We.poolIndex()-he.poolIndex()})}var N=q.eles[0],I=N.source(),z=N.target();if(I.poolIndex()>z.poolIndex()){var ae=I;I=z,z=ae}var re=q.srcPos=I.position(),K=q.tgtPos=z.position(),V=q.srcW=I.outerWidth(),Z=q.srcH=I.outerHeight(),U=q.tgtW=z.outerWidth(),W=q.tgtH=z.outerHeight(),Y=q.srcShape=r.nodeShapes[e.getNodeShape(I)],ee=q.tgtShape=r.nodeShapes[e.getNodeShape(z)],oe=q.srcCornerRadius=I.pstyle("corner-radius").value==="auto"?"auto":I.pstyle("corner-radius").pfValue,te=q.tgtCornerRadius=z.pstyle("corner-radius").value==="auto"?"auto":z.pstyle("corner-radius").pfValue,ie=q.tgtRs=z._private.rscratch,se=q.srcRs=I._private.rscratch;q.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var $=0;$<q.eles.length;$++){var ne=q.eles[$],le=ne[0]._private.rscratch,Se=ne.pstyle("curve-style").value,De=Se==="unbundled-bezier"||Se.endsWith("segments")||Se.endsWith("taxi"),be=!I.same(ne.source());if(!q.calculatedIntersection&&I!==z&&(q.hasBezier||q.hasUnbundled)){q.calculatedIntersection=!0;var Te=Y.intersectLine(re.x,re.y,V,Z,K.x,K.y,0,oe,se),ve=q.srcIntn=Te,de=ee.intersectLine(K.x,K.y,U,W,re.x,re.y,0,te,ie),ye=q.tgtIntn=de,Ce=q.intersectionPts={x1:Te[0],x2:de[0],y1:Te[1],y2:de[1]},ue=q.posPts={x1:re.x,x2:K.x,y1:re.y,y2:K.y},Ae=de[1]-Te[1],Pe=de[0]-Te[0],Fe=Math.sqrt(Pe*Pe+Ae*Ae);at(Fe)&&Fe>=hU||(Fe=Math.sqrt(Math.max(Pe*Pe,eu)+Math.max(Ae*Ae,eu)));var Ye=q.vector={x:Pe,y:Ae},Ve=q.vectorNorm={x:Ye.x/Fe,y:Ye.y/Fe},Qe={x:-Ve.y,y:Ve.x};q.nodesOverlap=!at(Fe)||ee.checkPoint(Te[0],Te[1],0,U,W,K.x,K.y,te,ie)||Y.checkPoint(de[0],de[1],0,V,Z,re.x,re.y,oe,se),q.vectorNormInverse=Qe,R={nodesOverlap:q.nodesOverlap,dirCounts:q.dirCounts,calculatedIntersection:!0,hasBezier:q.hasBezier,hasUnbundled:q.hasUnbundled,eles:q.eles,srcPos:K,srcRs:ie,tgtPos:re,tgtRs:se,srcW:U,srcH:W,tgtW:V,tgtH:Z,srcIntn:ye,tgtIntn:ve,srcShape:ee,tgtShape:Y,posPts:{x1:ue.x2,y1:ue.y2,x2:ue.x1,y2:ue.y1},intersectionPts:{x1:Ce.x2,y1:Ce.y2,x2:Ce.x1,y2:Ce.y1},vector:{x:-Ye.x,y:-Ye.y},vectorNorm:{x:-Ve.x,y:-Ve.y},vectorNormInverse:{x:-Qe.x,y:-Qe.y}}}var Xe=be?R:q;le.nodesOverlap=Xe.nodesOverlap,le.srcIntn=Xe.srcIntn,le.tgtIntn=Xe.tgtIntn,le.isRound=Se.startsWith("round"),a&&(I.isParent()||I.isChild()||z.isParent()||z.isChild())&&(I.parents().anySame(z)||z.parents().anySame(I)||I.same(z)&&I.isParent())?e.findCompoundLoopPoints(ne,Xe,$,De):I===z?e.findLoopPoints(ne,Xe,$,De):Se.endsWith("segments")?e.findSegmentsPoints(ne,Xe):Se.endsWith("taxi")?e.findTaxiPoints(ne,Xe):Se==="straight"||!De&&q.eles.length%2===1&&$===Math.floor(q.eles.length/2)?e.findStraightEdgePoints(ne):e.findBezierPoints(ne,Xe,$,De,be),e.findEndpoints(ne),e.tryToCorrectInvalidPoints(ne,Xe),e.checkForInvalidEdgeWarning(ne),e.storeAllpts(ne),e.storeEdgeProjections(ne),e.calculateArrowAngles(ne),e.recalculateEdgeLabelProjections(ne),e.calculateLabelAngles(ne)}},_=0;_<s.length;_++)D();this.findHaystackPoints(u)}};function eN(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}pn.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return eN(e.segpts)};pn.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return eN(e.ctrlpts)};pn.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var vu={};vu.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),o=t._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*a),e.units[1]==="%"&&(s[1]=s[1]*i),s[0]+=n.x,s[1]+=n.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var f=2*Math.max(a,i),c=[n.x+Math.cos(u)*f,n.y+Math.sin(u)*f];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,o)}};vu.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],i=n.position(),o=a.position(),s=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,f=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,h=n._private.rscratch,p=a._private.rscratch,y=t.pstyle("curve-style").value,g=t._private.rscratch,E=g.edgeType,w=y==="taxi",v=E==="self"||E==="compound",C=E==="bezier"||E==="multibezier"||v,x=E!=="bezier",S=E==="straight"||E==="segments",A=E==="segments",D=C||x||S,_=v||w,M=t.pstyle("source-endpoint"),k=_?"outside-to-node":M.value,F=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,G=t.pstyle("target-endpoint"),B=_?"outside-to-node":G.value,q=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;g.srcManEndpt=M,g.tgtManEndpt=G;var R,P,N,I;if(C){var z=[g.ctrlpts[0],g.ctrlpts[1]],ae=x?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:z;R=ae,P=z}else if(S){var re=A?g.segpts.slice(0,2):[o.x,o.y],K=A?g.segpts.slice(g.segpts.length-2):[i.x,i.y];R=K,P=re}if(B==="inside-to-node")r=[o.x,o.y];else if(G.units)r=this.manualEndptToPx(a,G);else if(B==="outside-to-line")r=g.tgtIntn;else if(B==="outside-to-node"||B==="outside-to-node-or-label"?N=R:(B==="outside-to-line"||B==="outside-to-line-or-label")&&(N=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),N[0],N[1],0,q,p),B==="outside-to-node-or-label"||B==="outside-to-line-or-label"){var V=a._private.rscratch,Z=V.labelWidth,U=V.labelHeight,W=V.labelX,Y=V.labelY,ee=Z/2,oe=U/2,te=a.pstyle("text-valign").value;te==="top"?Y-=oe:te==="bottom"&&(Y+=oe);var ie=a.pstyle("text-halign").value;ie==="left"?W-=ee:ie==="right"&&(W+=ee);var se=Kl(N[0],N[1],[W-ee,Y-oe,W+ee,Y-oe,W+ee,Y+oe,W-ee,Y+oe],o.x,o.y);if(se.length>0){var $=i,ne=so($,us(r)),le=so($,us(se)),Se=ne;if(le<ne&&(r=se,Se=le),se.length>2){var De=so($,{x:se[2],y:se[3]});De<Se&&(r=[se[2],se[3]])}}}var be=of(r,R,e.arrowShapes[s].spacing(t)+f),Te=of(r,R,e.arrowShapes[s].gap(t)+f);if(g.endX=Te[0],g.endY=Te[1],g.arrowEndX=be[0],g.arrowEndY=be[1],k==="inside-to-node")r=[i.x,i.y];else if(M.units)r=this.manualEndptToPx(n,M);else if(k==="outside-to-line")r=g.srcIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?I=P:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(I=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),I[0],I[1],0,F,h),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var ve=n._private.rscratch,de=ve.labelWidth,ye=ve.labelHeight,Ce=ve.labelX,ue=ve.labelY,Ae=de/2,Pe=ye/2,Fe=n.pstyle("text-valign").value;Fe==="top"?ue-=Pe:Fe==="bottom"&&(ue+=Pe);var Ye=n.pstyle("text-halign").value;Ye==="left"?Ce-=Ae:Ye==="right"&&(Ce+=Ae);var Ve=Kl(I[0],I[1],[Ce-Ae,ue-Pe,Ce+Ae,ue-Pe,Ce+Ae,ue+Pe,Ce-Ae,ue+Pe],i.x,i.y);if(Ve.length>0){var Qe=o,Xe=so(Qe,us(r)),We=so(Qe,us(Ve)),he=Xe;if(We<Xe&&(r=[Ve[0],Ve[1]],he=We),Ve.length>2){var j=so(Qe,{x:Ve[2],y:Ve[3]});j<he&&(r=[Ve[2],Ve[3]])}}}var pe=of(r,P,e.arrowShapes[u].spacing(t)+c),me=of(r,P,e.arrowShapes[u].gap(t)+c);g.startX=me[0],g.startY=me[1],g.arrowStartX=pe[0],g.arrowStartY=pe[1],D&&(!at(g.startX)||!at(g.startY)||!at(g.endX)||!at(g.endY)?g.badLine=!0:g.badLine=!1)};vu.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};vu.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var q1={};function vU(t,e,r){for(var n=function(f,c,h,p){return Vr(f,c,h,p)},a=e._private,i=a.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}q1.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)vU(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var o=r.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};q1.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var _a={};_a.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!Di(e)){var r,n,a=t._private,i=t.width(),o=t.height(),s=t.padding(),u=t.position(),f=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,h=a.rscratch,p=a.rstyle;switch(f){case"left":r=u.x-i/2-s;break;case"right":r=u.x+i/2+s;break;default:r=u.x}switch(c){case"top":n=u.y-o/2-s;break;case"bottom":n=u.y+o/2+s;break;default:n=u.y}h.labelX=r,h.labelY=n,p.labelX=r,p.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var tN=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},rN=function(e,r){var n=r.x-e.x,a=r.y-e.y;return tN(n,a)},pU=function(e,r,n,a){var i=Xl(0,a-.001,1),o=Xl(0,a+.001,1),s=ms(e,r,n,i),u=ms(e,r,n,o);return rN(s,u)};_a.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var o=function(h,p,y){Va(r.rscratch,h,p,y),Va(r.rstyle,h,p,y)};o("labelX",null,e.x),o("labelY",null,e.y);var s=tN(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var h=[],p=0;p+5<n.allpts.length;p+=4){var y={x:n.allpts[p],y:n.allpts[p+1]},g={x:n.allpts[p+2],y:n.allpts[p+3]},E={x:n.allpts[p+4],y:n.allpts[p+5]};h.push({p0:y,p1:g,p2:E,startDist:0,length:0,segments:[]})}var w=r.rstyle.bezierPts,v=a.bezierProjPcts.length;function C(_,M,k,F,G){var B=bo(M,k),q=_.segments[_.segments.length-1],R={p0:M,p1:k,t0:F,t1:G,startDist:q?q.startDist+q.length:0,length:B};_.segments.push(R),_.length+=B}for(var x=0;x<h.length;x++){var S=h[x],A=h[x-1];A&&(S.startDist=A.startDist+A.length),C(S,S.p0,w[x*v],0,a.bezierProjPcts[0]);for(var D=0;D<v-1;D++)C(S,w[x*v+D],w[x*v+D+1],a.bezierProjPcts[D],a.bezierProjPcts[D+1]);C(S,w[x*v+v-1],S.p2,a.bezierProjPcts[v-1],1)}return u.cache=h},f=function(h){var p,y=h==="source";if(i[h]){var g=t.pstyle(h+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var E=u(),w,v=0,C=0,x=0;x<E.length;x++){for(var S=E[y?x:E.length-1-x],A=0;A<S.segments.length;A++){var D=S.segments[y?A:S.segments.length-1-A],_=x===E.length-1&&A===S.segments.length-1;if(v=C,C+=D.length,C>=g||_){w={cp:S,segment:D};break}}if(w)break}var M=w.cp,k=w.segment,F=(g-v)/k.length,G=k.t1-k.t0,B=y?k.t0+G*F:k.t1-G*F;B=Xl(0,B,1),e=ms(M.p0,M.p1,M.p2,B),p=pU(M.p0,M.p1,M.p2,B);break}case"straight":case"segments":case"haystack":{for(var q=0,R,P,N,I,z=n.allpts.length,ae=0;ae+3<z&&(y?(N={x:n.allpts[ae],y:n.allpts[ae+1]},I={x:n.allpts[ae+2],y:n.allpts[ae+3]}):(N={x:n.allpts[z-2-ae],y:n.allpts[z-1-ae]},I={x:n.allpts[z-4-ae],y:n.allpts[z-3-ae]}),R=bo(N,I),P=q,q+=R,!(q>=g));ae+=2);var re=g-P,K=re/R;K=Xl(0,K,1),e=Fz(N,I,K),p=rN(N,I);break}}o("labelX",h,e.x),o("labelY",h,e.y),o("labelAutoAngle",h,p)}};f("source"),f("target"),this.applyLabelDimensions(t)}};_a.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};_a.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=mo(n,t._private.labelDimsKey);if(Mn(r.rscratch,"prefixedLabelDimsKey",e)!==a){Va(r.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(t,n),o=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,u=Mn(r.rscratch,"labelWrapCachedLines",e)||[],f=s!=="wrap"?1:Math.max(u.length,1),c=i.height/f,h=c*o,p=i.width,y=i.height+(f-1)*(o-1)*c;Va(r.rstyle,"labelWidth",e,p),Va(r.rscratch,"labelWidth",e,p),Va(r.rstyle,"labelHeight",e,y),Va(r.rscratch,"labelHeight",e,y),Va(r.rscratch,"labelLineHeight",e,h)}};_a.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,o=function(Z,U){return U?(Va(r.rscratch,Z,e,U),U):Mn(r.rscratch,Z,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var f="​",c=a.split(`
`),h=t.pstyle("text-max-width").pfValue,p=t.pstyle("text-overflow-wrap").value,y=p==="anywhere",g=[],E=/[\s\u200b]+|$/g,w=0;w<c.length;w++){var v=c[w],C=this.calculateLabelDimensions(t,v),x=C.width;if(y){var S=v.split("").join(f);v=S}if(x>h){var A=v.matchAll(E),D="",_=0,M=Pn(A),k;try{for(M.s();!(k=M.n()).done;){var F=k.value,G=F[0],B=v.substring(_,F.index);_=F.index+G.length;var q=D.length===0?B:D+B+G,R=this.calculateLabelDimensions(t,q),P=R.width;P<=h?D+=B+G:(D&&g.push(D),D=B+G)}}catch(V){M.e(V)}finally{M.f()}D.match(/^[\s\u200b]+$/)||g.push(D)}else g.push(v)}o("labelWrapCachedLines",g),a=o("labelWrapCachedText",g.join(`
`)),o("labelWrapKey",u)}else if(s==="ellipsis"){var N=t.pstyle("text-max-width").pfValue,I="",z="…",ae=!1;if(this.calculateLabelDimensions(t,a).width<N)return a;for(var re=0;re<a.length;re++){var K=this.calculateLabelDimensions(t,I+a[re]+z).width;if(K>N)break;I+=a[re],re===a.length-1&&(ae=!0)}return ae||(I+=z),I}return a};_a.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};_a.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=0,o=t.pstyle("font-style").strValue,s=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,f=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=a.createElement("canvas"),h=this.labelCalcCanvasContext=c.getContext("2d");var p=c.style;p.position="absolute",p.left="-9999px",p.top="-9999px",p.zIndex="-1",p.visibility="hidden",p.pointerEvents="none"}h.font="".concat(o," ").concat(f," ").concat(s,"px ").concat(u);for(var y=0,g=0,E=e.split(`
`),w=0;w<E.length;w++){var v=E[w],C=h.measureText(v),x=Math.ceil(C.width),S=s;y=Math.max(x,y),g+=S}return y+=i,g+=i,{width:y,height:g}};_a.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};_a.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var nN={},JT=28,eS=!1;nN.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<JT||t.height()<JT))return eS||(Yt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),eS=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var zc={};zc.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var u=0;u<o.length;u++){var f=o[u],c=f._private,h=c.rstyle;h.clean=!1,h.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var a=function(o){if(o){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var f=e[u],c=f._private.rstyle;f.isNode()&&!c.cleanConnected&&(n(f.connectedEdges()),c.cleanConnected=!0)}if(s)for(var h=0;h<s.length;h++){var p=s[h];p(o,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};zc.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};zc.recalculateRenderedStyle=function(t,e){var r=function(S){return S._private.rstyle.cleanConnected};if(t.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],s=o._private,u=s.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(u.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(x){return!x._private.rstyle.clean&&x.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(o):n.push(o),u.clean=!0)}for(var f=0;f<a.length;f++){var c=a[f],h=c._private,p=h.rstyle,y=c.position();this.recalculateNodeLabelProjection(c),p.nodeX=y.x,p.nodeY=y.y,p.nodeW=c.pstyle("width").pfValue,p.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var g=0;g<n.length;g++){var E=n[g],w=E._private,v=w.rstyle,C=w.rscratch;v.srcX=C.arrowStartX,v.srcY=C.arrowStartY,v.tgtX=C.arrowEndX,v.tgtY=C.arrowEndY,v.midX=C.midX,v.midY=C.midY,v.labelAngle=C.labelAngle,v.sourceLabelAngle=C.sourceLabelAngle,v.targetLabelAngle=C.targetLabelAngle}}}};var Gc={};Gc.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Gc.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Gc.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Bk),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var aN={};[Eo,ac,pn,vu,q1,_a,nN,zc,Gc].forEach(function(t){xt(aN,t)});var iN={};iN.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var o=i.image=new Image;o.addEventListener("load",r),o.addEventListener("error",function(){o.error=!0});var s="data:",u=t.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,o.crossOrigin=e),o.src=t,o};var Ms={};Ms.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],o=0;o<t.length;o++){var s=t[o];if(s!==void 0){var u=this.binder(s);i.push(u.on.apply(u,a))}}return i}var u=this.binder(t);return u.on.apply(u,a)};Ms.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||Mq(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var o=function(u,f,c){var h=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(h[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:h}),(t.addEventListener||t.on).apply(t,h),this};return{on:o,addEventListener:o,addListener:o,bind:o}};Ms.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};Ms.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};Ms.load=function(){var t=this,e=t.cy.window(),r=function(j){return j.selected()},n=function(j){var pe=j.getRootNode();if(pe&&pe.nodeType===11&&pe.host!==void 0)return pe},a=function(j,pe,me,we){j==null&&(j=t.cy);for(var xe=0;xe<pe.length;xe++){var qe=pe[xe];j.emit({originalEvent:me,type:qe,position:we})}},i=function(j){return j.shiftKey||j.metaKey||j.ctrlKey},o=function(j,pe){var me=!0;if(t.cy.hasCompoundNodes()&&j&&j.pannable())for(var we=0;pe&&we<pe.length;we++){var j=pe[we];if(j.isNode()&&j.isParent()&&!j.pannable()){me=!1;break}}else me=!0;return me},s=function(j){j[0]._private.grabbed=!0},u=function(j){j[0]._private.grabbed=!1},f=function(j){j[0]._private.rscratch.inDragLayer=!0},c=function(j){j[0]._private.rscratch.inDragLayer=!1},h=function(j){j[0]._private.rscratch.isGrabTarget=!0},p=function(j){j[0]._private.rscratch.isGrabTarget=!1},y=function(j,pe){var me=pe.addToList,we=me.has(j);!we&&j.grabbable()&&!j.locked()&&(me.merge(j),s(j))},g=function(j,pe){if(j.cy().hasCompoundNodes()&&!(pe.inDragLayer==null&&pe.addToList==null)){var me=j.descendants();pe.inDragLayer&&(me.forEach(f),me.connectedEdges().forEach(f)),pe.addToList&&y(me,pe)}},E=function(j,pe){pe=pe||{};var me=j.cy().hasCompoundNodes();pe.inDragLayer&&(j.forEach(f),j.neighborhood().stdFilter(function(we){return!me||we.isEdge()}).forEach(f)),pe.addToList&&j.forEach(function(we){y(we,pe)}),g(j,pe),C(j,{inDragLayer:pe.inDragLayer}),t.updateCachedGrabbedEles()},w=E,v=function(j){j&&(t.getCachedZSortedEles().forEach(function(pe){u(pe),c(pe),p(pe)}),t.updateCachedGrabbedEles())},C=function(j,pe){if(!(pe.inDragLayer==null&&pe.addToList==null)&&j.cy().hasCompoundNodes()){var me=j.ancestors().orphans();if(!me.same(j)){var we=me.descendants().spawnSelf().merge(me).unmerge(j).unmerge(j.descendants()),xe=we.connectedEdges();pe.inDragLayer&&(xe.forEach(f),we.forEach(f)),pe.addToList&&we.forEach(function(qe){y(qe,pe)})}}},x=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},S=typeof MutationObserver<"u",A=typeof ResizeObserver<"u";S?(t.removeObserver=new MutationObserver(function(he){for(var j=0;j<he.length;j++){var pe=he[j],me=pe.removedNodes;if(me)for(var we=0;we<me.length;we++){var xe=me[we];if(xe===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(he){t.destroy()});var D=fu(function(){t.cy.resize()},100);S&&(t.styleObserver=new MutationObserver(D),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",D),A&&(t.resizeObserver=new ResizeObserver(D),t.resizeObserver.observe(t.container));var _=function(j,pe){for(;j!=null;)pe(j),j=j.parentNode},M=function(){t.invalidateContainerClientCoordsCache()};_(t.container,function(he){t.registerBinding(he,"transitionend",M),t.registerBinding(he,"animationend",M),t.registerBinding(he,"scroll",M)}),t.registerBinding(t.container,"contextmenu",function(he){he.preventDefault()});var k=function(){return t.selection[4]!==0},F=function(j){for(var pe=t.findContainerClientCoords(),me=pe[0],we=pe[1],xe=pe[2],qe=pe[3],Ee=j.touches?j.touches:[j],Oe=!1,Ie=0;Ie<Ee.length;Ie++){var He=Ee[Ie];if(me<=He.clientX&&He.clientX<=me+xe&&we<=He.clientY&&He.clientY<=we+qe){Oe=!0;break}}if(!Oe)return!1;for(var Ue=t.container,je=j.target,Je=je.parentNode,Ge=!1;Je;){if(Je===Ue){Ge=!0;break}Je=Je.parentNode}return!!Ge};t.registerBinding(t.container,"mousedown",function(j){if(F(j)&&!(t.hoverData.which===1&&j.which!==1)){j.preventDefault(),x(),t.hoverData.capture=!0,t.hoverData.which=j.which;var pe=t.cy,me=[j.clientX,j.clientY],we=t.projectIntoViewport(me[0],me[1]),xe=t.selection,qe=t.findNearestElements(we[0],we[1],!0,!1),Ee=qe[0],Oe=t.dragData.possibleDragElements;t.hoverData.mdownPos=we,t.hoverData.mdownGPos=me;var Ie=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var $e=t.hoverData.down;$e?$e.emit({originalEvent:j,type:"taphold",position:{x:we[0],y:we[1]}}):pe.emit({originalEvent:j,type:"taphold",position:{x:we[0],y:we[1]}})}},t.tapholdDuration)};if(j.which==3){t.hoverData.cxtStarted=!0;var He={originalEvent:j,type:"cxttapstart",position:{x:we[0],y:we[1]}};Ee?(Ee.activate(),Ee.emit(He),t.hoverData.down=Ee):pe.emit(He),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(j.which==1){Ee&&Ee.activate();{if(Ee!=null&&t.nodeIsGrabbable(Ee)){var Ue=function($e){return{originalEvent:j,type:$e,position:{x:we[0],y:we[1]}}},je=function($e){$e.emit(Ue("grab"))};if(h(Ee),!Ee.selected())Oe=t.dragData.possibleDragElements=pe.collection(),w(Ee,{addToList:Oe}),Ee.emit(Ue("grabon")).emit(Ue("grab"));else{Oe=t.dragData.possibleDragElements=pe.collection();var Je=pe.$(function(Ge){return Ge.isNode()&&Ge.selected()&&t.nodeIsGrabbable(Ge)});E(Je,{addToList:Oe}),Ee.emit(Ue("grabon")),Je.forEach(je)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=Ee,t.hoverData.downs=qe,t.hoverData.downTime=new Date().getTime()}a(Ee,["mousedown","tapstart","vmousedown"],j,{x:we[0],y:we[1]}),Ee==null?(xe[4]=1,t.data.bgActivePosistion={x:we[0],y:we[1]},t.redrawHint("select",!0),t.redraw()):Ee.pannable()&&(xe[4]=1),Ie()}xe[0]=xe[2]=we[0],xe[1]=xe[3]=we[1]}},!1);var G=n(t.container);t.registerBinding([e,G],"mousemove",function(j){var pe=t.hoverData.capture;if(!(!pe&&!F(j))){var me=!1,we=t.cy,xe=we.zoom(),qe=[j.clientX,j.clientY],Ee=t.projectIntoViewport(qe[0],qe[1]),Oe=t.hoverData.mdownPos,Ie=t.hoverData.mdownGPos,He=t.selection,Ue=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(Ue=t.findNearestElement(Ee[0],Ee[1],!0,!1));var je=t.hoverData.last,Je=t.hoverData.down,Ge=[Ee[0]-He[2],Ee[1]-He[3]],$e=t.dragData.possibleDragElements,vt;if(Ie){var nt=qe[0]-Ie[0],it=nt*nt,Tt=qe[1]-Ie[1],dt=Tt*Tt,gt=it+dt;t.hoverData.isOverThresholdDrag=vt=gt>=t.desktopTapThreshold2}var _t=i(j);vt&&(t.hoverData.tapholdCancelled=!0);var Mt=function(){var rr=t.hoverData.dragDelta=t.hoverData.dragDelta||[];rr.length===0?(rr.push(Ge[0]),rr.push(Ge[1])):(rr[0]+=Ge[0],rr[1]+=Ge[1])};me=!0,a(Ue,["mousemove","vmousemove","tapdrag"],j,{x:Ee[0],y:Ee[1]});var jt=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||we.emit({originalEvent:j,type:"boxstart",position:{x:Ee[0],y:Ee[1]}}),He[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(vt){var Lt={originalEvent:j,type:"cxtdrag",position:{x:Ee[0],y:Ee[1]}};Je?Je.emit(Lt):we.emit(Lt),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||Ue!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:j,type:"cxtdragout",position:{x:Ee[0],y:Ee[1]}}),t.hoverData.cxtOver=Ue,Ue&&Ue.emit({originalEvent:j,type:"cxtdragover",position:{x:Ee[0],y:Ee[1]}}))}}else if(t.hoverData.dragging){if(me=!0,we.panningEnabled()&&we.userPanningEnabled()){var Ht;if(t.hoverData.justStartedPan){var Sr=t.hoverData.mdownPos;Ht={x:(Ee[0]-Sr[0])*xe,y:(Ee[1]-Sr[1])*xe},t.hoverData.justStartedPan=!1}else Ht={x:Ge[0]*xe,y:Ge[1]*xe};we.panBy(Ht),we.emit("dragpan"),t.hoverData.dragged=!0}Ee=t.projectIntoViewport(j.clientX,j.clientY)}else if(He[4]==1&&(Je==null||Je.pannable())){if(vt){if(!t.hoverData.dragging&&we.boxSelectionEnabled()&&(_t||!we.panningEnabled()||!we.userPanningEnabled()))jt();else if(!t.hoverData.selecting&&we.panningEnabled()&&we.userPanningEnabled()){var on=o(Je,t.hoverData.downs);on&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,He[4]=0,t.data.bgActivePosistion=us(Oe),t.redrawHint("select",!0),t.redraw())}Je&&Je.pannable()&&Je.active()&&Je.unactivate()}}else{if(Je&&Je.pannable()&&Je.active()&&Je.unactivate(),(!Je||!Je.grabbed())&&Ue!=je&&(je&&a(je,["mouseout","tapdragout"],j,{x:Ee[0],y:Ee[1]}),Ue&&a(Ue,["mouseover","tapdragover"],j,{x:Ee[0],y:Ee[1]}),t.hoverData.last=Ue),Je)if(vt){if(we.boxSelectionEnabled()&&_t)Je&&Je.grabbed()&&(v($e),Je.emit("freeon"),$e.emit("free"),t.dragData.didDrag&&(Je.emit("dragfreeon"),$e.emit("dragfree"))),jt();else if(Je&&Je.grabbed()&&t.nodeIsDraggable(Je)){var Rt=!t.dragData.didDrag;Rt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||E($e,{inDragLayer:!0});var tr={x:0,y:0};if(at(Ge[0])&&at(Ge[1])&&(tr.x+=Ge[0],tr.y+=Ge[1],Rt)){var Zt=t.hoverData.dragDelta;Zt&&at(Zt[0])&&at(Zt[1])&&(tr.x+=Zt[0],tr.y+=Zt[1])}t.hoverData.draggingEles=!0,$e.silentShift(tr).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else Mt();me=!0}if(He[2]=Ee[0],He[3]=Ee[1],me)return j.stopPropagation&&j.stopPropagation(),j.preventDefault&&j.preventDefault(),!1}},!1);var B,q,R;t.registerBinding(e,"mouseup",function(j){if(!(t.hoverData.which===1&&j.which!==1&&t.hoverData.capture)){var pe=t.hoverData.capture;if(pe){t.hoverData.capture=!1;var me=t.cy,we=t.projectIntoViewport(j.clientX,j.clientY),xe=t.selection,qe=t.findNearestElement(we[0],we[1],!0,!1),Ee=t.dragData.possibleDragElements,Oe=t.hoverData.down,Ie=i(j);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,Oe&&Oe.unactivate(),t.hoverData.which===3){var He={originalEvent:j,type:"cxttapend",position:{x:we[0],y:we[1]}};if(Oe?Oe.emit(He):me.emit(He),!t.hoverData.cxtDragged){var Ue={originalEvent:j,type:"cxttap",position:{x:we[0],y:we[1]}};Oe?Oe.emit(Ue):me.emit(Ue)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(a(qe,["mouseup","tapend","vmouseup"],j,{x:we[0],y:we[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(a(Oe,["click","tap","vclick"],j,{x:we[0],y:we[1]}),q=!1,j.timeStamp-R<=me.multiClickDebounceTime()?(B&&clearTimeout(B),q=!0,R=null,a(Oe,["dblclick","dbltap","vdblclick"],j,{x:we[0],y:we[1]})):(B=setTimeout(function(){q||a(Oe,["oneclick","onetap","voneclick"],j,{x:we[0],y:we[1]})},me.multiClickDebounceTime()),R=j.timeStamp)),Oe==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(j)&&(me.$(r).unselect(["tapunselect"]),Ee.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=Ee=me.collection()),qe==Oe&&!t.dragData.didDrag&&!t.hoverData.selecting&&qe!=null&&qe._private.selectable&&(t.hoverData.dragging||(me.selectionType()==="additive"||Ie?qe.selected()?qe.unselect(["tapunselect"]):qe.select(["tapselect"]):Ie||(me.$(r).unmerge(qe).unselect(["tapunselect"]),qe.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var je=me.collection(t.getAllInBox(xe[0],xe[1],xe[2],xe[3]));t.redrawHint("select",!0),je.length>0&&t.redrawHint("eles",!0),me.emit({type:"boxend",originalEvent:j,position:{x:we[0],y:we[1]}});var Je=function(vt){return vt.selectable()&&!vt.selected()};me.selectionType()==="additive"||Ie||me.$(r).unmerge(je).unselect(),je.emit("box").stdFilter(Je).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!xe[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Ge=Oe&&Oe.grabbed();v(Ee),Ge&&(Oe.emit("freeon"),Ee.emit("free"),t.dragData.didDrag&&(Oe.emit("dragfreeon"),Ee.emit("dragfree")))}}xe[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var P=[],N=4,I,z=1e5,ae=function(j,pe){for(var me=0;me<j.length;me++)if(j[me]%pe!==0)return!1;return!0},re=function(j){for(var pe=Math.abs(j[0]),me=1;me<j.length;me++)if(Math.abs(j[me])!==pe)return!1;return!0},K=function(j){var pe=!1,me=j.deltaY;if(me==null&&(j.wheelDeltaY!=null?me=j.wheelDeltaY/4:j.wheelDelta!=null&&(me=j.wheelDelta/4)),I==null)if(P.length>=N){var we=P;if(I=ae(we,5),!I){var xe=Math.abs(we[0]);I=re(we)&&xe>5}if(I)for(var qe=0;qe<we.length;qe++)z=Math.min(Math.abs(we[qe]),z)}else P.push(me),pe=!0;else I&&(z=Math.min(Math.abs(me),z));if(!t.scrollingPage){var Ee=t.cy,Oe=Ee.zoom(),Ie=Ee.pan(),He=t.projectIntoViewport(j.clientX,j.clientY),Ue=[He[0]*Oe+Ie.x,He[1]*Oe+Ie.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||k()){j.preventDefault();return}if(Ee.panningEnabled()&&Ee.userPanningEnabled()&&Ee.zoomingEnabled()&&Ee.userZoomingEnabled()){j.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var je;pe&&Math.abs(me)>5&&(me=S1(me)*5),je=me/-250,I&&(je/=z,je*=3),je=je*t.wheelSensitivity;var Je=j.deltaMode===1;Je&&(je*=33);var Ge=Ee.zoom()*Math.pow(10,je);j.type==="gesturechange"&&(Ge=t.gestureStartZoom*j.scale),Ee.zoom({level:Ge,renderedPosition:{x:Ue[0],y:Ue[1]}}),Ee.emit(j.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",K,!0),t.registerBinding(e,"scroll",function(j){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(j){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||j.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(he){t.hasTouchStarted||K(he)},!0),t.registerBinding(t.container,"mouseout",function(j){var pe=t.projectIntoViewport(j.clientX,j.clientY);t.cy.emit({originalEvent:j,type:"mouseout",position:{x:pe[0],y:pe[1]}})},!1),t.registerBinding(t.container,"mouseover",function(j){var pe=t.projectIntoViewport(j.clientX,j.clientY);t.cy.emit({originalEvent:j,type:"mouseover",position:{x:pe[0],y:pe[1]}})},!1);var V,Z,U,W,Y,ee,oe,te,ie,se,$,ne,le,Se=function(j,pe,me,we){return Math.sqrt((me-j)*(me-j)+(we-pe)*(we-pe))},De=function(j,pe,me,we){return(me-j)*(me-j)+(we-pe)*(we-pe)},be;t.registerBinding(t.container,"touchstart",be=function(j){if(t.hasTouchStarted=!0,!!F(j)){x(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var pe=t.cy,me=t.touchData.now,we=t.touchData.earlier;if(j.touches[0]){var xe=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);me[0]=xe[0],me[1]=xe[1]}if(j.touches[1]){var xe=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);me[2]=xe[0],me[3]=xe[1]}if(j.touches[2]){var xe=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);me[4]=xe[0],me[5]=xe[1]}if(j.touches[1]){t.touchData.singleTouchMoved=!0,v(t.dragData.touchDragEles);var qe=t.findContainerClientCoords();ie=qe[0],se=qe[1],$=qe[2],ne=qe[3],V=j.touches[0].clientX-ie,Z=j.touches[0].clientY-se,U=j.touches[1].clientX-ie,W=j.touches[1].clientY-se,le=0<=V&&V<=$&&0<=U&&U<=$&&0<=Z&&Z<=ne&&0<=W&&W<=ne;var Ee=pe.pan(),Oe=pe.zoom();Y=Se(V,Z,U,W),ee=De(V,Z,U,W),oe=[(V+U)/2,(Z+W)/2],te=[(oe[0]-Ee.x)/Oe,(oe[1]-Ee.y)/Oe];var Ie=200,He=Ie*Ie;if(ee<He&&!j.touches[2]){var Ue=t.findNearestElement(me[0],me[1],!0,!0),je=t.findNearestElement(me[2],me[3],!0,!0);Ue&&Ue.isNode()?(Ue.activate().emit({originalEvent:j,type:"cxttapstart",position:{x:me[0],y:me[1]}}),t.touchData.start=Ue):je&&je.isNode()?(je.activate().emit({originalEvent:j,type:"cxttapstart",position:{x:me[0],y:me[1]}}),t.touchData.start=je):pe.emit({originalEvent:j,type:"cxttapstart",position:{x:me[0],y:me[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(j.touches[2])pe.boxSelectionEnabled()&&j.preventDefault();else if(!j.touches[1]){if(j.touches[0]){var Je=t.findNearestElements(me[0],me[1],!0,!0),Ge=Je[0];if(Ge!=null&&(Ge.activate(),t.touchData.start=Ge,t.touchData.starts=Je,t.nodeIsGrabbable(Ge))){var $e=t.dragData.touchDragEles=pe.collection(),vt=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Ge.selected()?(vt=pe.$(function(gt){return gt.selected()&&t.nodeIsGrabbable(gt)}),E(vt,{addToList:$e})):w(Ge,{addToList:$e}),h(Ge);var nt=function(_t){return{originalEvent:j,type:_t,position:{x:me[0],y:me[1]}}};Ge.emit(nt("grabon")),vt?vt.forEach(function(gt){gt.emit(nt("grab"))}):Ge.emit(nt("grab"))}a(Ge,["touchstart","tapstart","vmousedown"],j,{x:me[0],y:me[1]}),Ge==null&&(t.data.bgActivePosistion={x:xe[0],y:xe[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&a(t.touchData.start,["taphold"],j,{x:me[0],y:me[1]})},t.tapholdDuration)}}if(j.touches.length>=1){for(var it=t.touchData.startPosition=[null,null,null,null,null,null],Tt=0;Tt<me.length;Tt++)it[Tt]=we[Tt]=me[Tt];var dt=j.touches[0];t.touchData.startGPosition=[dt.clientX,dt.clientY]}}},!1);var Te;t.registerBinding(e,"touchmove",Te=function(j){var pe=t.touchData.capture;if(!(!pe&&!F(j))){var me=t.selection,we=t.cy,xe=t.touchData.now,qe=t.touchData.earlier,Ee=we.zoom();if(j.touches[0]){var Oe=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);xe[0]=Oe[0],xe[1]=Oe[1]}if(j.touches[1]){var Oe=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);xe[2]=Oe[0],xe[3]=Oe[1]}if(j.touches[2]){var Oe=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);xe[4]=Oe[0],xe[5]=Oe[1]}var Ie=t.touchData.startGPosition,He;if(pe&&j.touches[0]&&Ie){for(var Ue=[],je=0;je<xe.length;je++)Ue[je]=xe[je]-qe[je];var Je=j.touches[0].clientX-Ie[0],Ge=Je*Je,$e=j.touches[0].clientY-Ie[1],vt=$e*$e,nt=Ge+vt;He=nt>=t.touchTapThreshold2}if(pe&&t.touchData.cxt){j.preventDefault();var it=j.touches[0].clientX-ie,Tt=j.touches[0].clientY-se,dt=j.touches[1].clientX-ie,gt=j.touches[1].clientY-se,_t=De(it,Tt,dt,gt),Mt=_t/ee,jt=150,Lt=jt*jt,Ht=1.5,Sr=Ht*Ht;if(Mt>=Sr||_t>=Lt){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var on={originalEvent:j,type:"cxttapend",position:{x:xe[0],y:xe[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(on),t.touchData.start=null):we.emit(on)}}if(pe&&t.touchData.cxt){var on={originalEvent:j,type:"cxtdrag",position:{x:xe[0],y:xe[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(on):we.emit(on),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Rt=t.findNearestElement(xe[0],xe[1],!0,!0);(!t.touchData.cxtOver||Rt!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:j,type:"cxtdragout",position:{x:xe[0],y:xe[1]}}),t.touchData.cxtOver=Rt,Rt&&Rt.emit({originalEvent:j,type:"cxtdragover",position:{x:xe[0],y:xe[1]}}))}else if(pe&&j.touches[2]&&we.boxSelectionEnabled())j.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||we.emit({originalEvent:j,type:"boxstart",position:{x:xe[0],y:xe[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,me[4]=1,!me||me.length===0||me[0]===void 0?(me[0]=(xe[0]+xe[2]+xe[4])/3,me[1]=(xe[1]+xe[3]+xe[5])/3,me[2]=(xe[0]+xe[2]+xe[4])/3+1,me[3]=(xe[1]+xe[3]+xe[5])/3+1):(me[2]=(xe[0]+xe[2]+xe[4])/3,me[3]=(xe[1]+xe[3]+xe[5])/3),t.redrawHint("select",!0),t.redraw();else if(pe&&j.touches[1]&&!t.touchData.didSelect&&we.zoomingEnabled()&&we.panningEnabled()&&we.userZoomingEnabled()&&we.userPanningEnabled()){j.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var tr=t.dragData.touchDragEles;if(tr){t.redrawHint("drag",!0);for(var Zt=0;Zt<tr.length;Zt++){var cr=tr[Zt]._private;cr.grabbed=!1,cr.rscratch.inDragLayer=!1}}var rr=t.touchData.start,it=j.touches[0].clientX-ie,Tt=j.touches[0].clientY-se,dt=j.touches[1].clientX-ie,gt=j.touches[1].clientY-se,jr=Se(it,Tt,dt,gt),gn=jr/Y;if(le){var jn=it-V,Ln=Tt-Z,Zn=dt-U,sn=gt-W,Pa=(jn+Zn)/2,Gn=(Ln+sn)/2,Ft=we.zoom(),ft=Ft*gn,Gr=we.pan(),Qn=te[0]*Ft+Gr.x,Pt=te[1]*Ft+Gr.y,Q={x:-ft/Ft*(Qn-Gr.x-Pa)+Qn,y:-ft/Ft*(Pt-Gr.y-Gn)+Pt};if(rr&&rr.active()){var tr=t.dragData.touchDragEles;v(tr),t.redrawHint("drag",!0),t.redrawHint("eles",!0),rr.unactivate().emit("freeon"),tr.emit("free"),t.dragData.didDrag&&(rr.emit("dragfreeon"),tr.emit("dragfree"))}we.viewport({zoom:ft,pan:Q,cancelOnFailedZoom:!0}),we.emit("pinchzoom"),Y=jr,V=it,Z=Tt,U=dt,W=gt,t.pinching=!0}if(j.touches[0]){var Oe=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);xe[0]=Oe[0],xe[1]=Oe[1]}if(j.touches[1]){var Oe=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);xe[2]=Oe[0],xe[3]=Oe[1]}if(j.touches[2]){var Oe=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);xe[4]=Oe[0],xe[5]=Oe[1]}}else if(j.touches[0]&&!t.touchData.didSelect){var fe=t.touchData.start,ke=t.touchData.last,Rt;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Rt=t.findNearestElement(xe[0],xe[1],!0,!0)),pe&&fe!=null&&j.preventDefault(),pe&&fe!=null&&t.nodeIsDraggable(fe))if(He){var tr=t.dragData.touchDragEles,ze=!t.dragData.didDrag;ze&&E(tr,{inDragLayer:!0}),t.dragData.didDrag=!0;var Re={x:0,y:0};if(at(Ue[0])&&at(Ue[1])&&(Re.x+=Ue[0],Re.y+=Ue[1],ze)){t.redrawHint("eles",!0);var Ze=t.touchData.dragDelta;Ze&&at(Ze[0])&&at(Ze[1])&&(Re.x+=Ze[0],Re.y+=Ze[1])}t.hoverData.draggingEles=!0,tr.silentShift(Re).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==qe[0]&&t.touchData.startPosition[1]==qe[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Ze=t.touchData.dragDelta=t.touchData.dragDelta||[];Ze.length===0?(Ze.push(Ue[0]),Ze.push(Ue[1])):(Ze[0]+=Ue[0],Ze[1]+=Ue[1])}if(a(fe||Rt,["touchmove","tapdrag","vmousemove"],j,{x:xe[0],y:xe[1]}),(!fe||!fe.grabbed())&&Rt!=ke&&(ke&&ke.emit({originalEvent:j,type:"tapdragout",position:{x:xe[0],y:xe[1]}}),Rt&&Rt.emit({originalEvent:j,type:"tapdragover",position:{x:xe[0],y:xe[1]}})),t.touchData.last=Rt,pe)for(var Zt=0;Zt<xe.length;Zt++)xe[Zt]&&t.touchData.startPosition[Zt]&&He&&(t.touchData.singleTouchMoved=!0);if(pe&&(fe==null||fe.pannable())&&we.panningEnabled()&&we.userPanningEnabled()){var kt=o(fe,t.touchData.starts);kt&&(j.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=us(t.touchData.startPosition)),t.swipePanning?(we.panBy({x:Ue[0]*Ee,y:Ue[1]*Ee}),we.emit("dragpan")):He&&(t.swipePanning=!0,we.panBy({x:Je*Ee,y:$e*Ee}),we.emit("dragpan"),fe&&(fe.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var Oe=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);xe[0]=Oe[0],xe[1]=Oe[1]}}for(var je=0;je<xe.length;je++)qe[je]=xe[je];pe&&j.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var ve;t.registerBinding(e,"touchcancel",ve=function(j){var pe=t.touchData.start;t.touchData.capture=!1,pe&&pe.unactivate()});var de,ye,Ce,ue;if(t.registerBinding(e,"touchend",de=function(j){var pe=t.touchData.start,me=t.touchData.capture;if(me)j.touches.length===0&&(t.touchData.capture=!1),j.preventDefault();else return;var we=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var xe=t.cy,qe=xe.zoom(),Ee=t.touchData.now,Oe=t.touchData.earlier;if(j.touches[0]){var Ie=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);Ee[0]=Ie[0],Ee[1]=Ie[1]}if(j.touches[1]){var Ie=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);Ee[2]=Ie[0],Ee[3]=Ie[1]}if(j.touches[2]){var Ie=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);Ee[4]=Ie[0],Ee[5]=Ie[1]}pe&&pe.unactivate();var He;if(t.touchData.cxt){if(He={originalEvent:j,type:"cxttapend",position:{x:Ee[0],y:Ee[1]}},pe?pe.emit(He):xe.emit(He),!t.touchData.cxtDragged){var Ue={originalEvent:j,type:"cxttap",position:{x:Ee[0],y:Ee[1]}};pe?pe.emit(Ue):xe.emit(Ue)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!j.touches[2]&&xe.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var je=xe.collection(t.getAllInBox(we[0],we[1],we[2],we[3]));we[0]=void 0,we[1]=void 0,we[2]=void 0,we[3]=void 0,we[4]=0,t.redrawHint("select",!0),xe.emit({type:"boxend",originalEvent:j,position:{x:Ee[0],y:Ee[1]}});var Je=function(Lt){return Lt.selectable()&&!Lt.selected()};je.emit("box").stdFilter(Je).select().emit("boxselect"),je.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(pe!=null&&pe.unactivate(),j.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!j.touches[1]){if(!j.touches[0]){if(!j.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ge=t.dragData.touchDragEles;if(pe!=null){var $e=pe._private.grabbed;v(Ge),t.redrawHint("drag",!0),t.redrawHint("eles",!0),$e&&(pe.emit("freeon"),Ge.emit("free"),t.dragData.didDrag&&(pe.emit("dragfreeon"),Ge.emit("dragfree"))),a(pe,["touchend","tapend","vmouseup","tapdragout"],j,{x:Ee[0],y:Ee[1]}),pe.unactivate(),t.touchData.start=null}else{var vt=t.findNearestElement(Ee[0],Ee[1],!0,!0);a(vt,["touchend","tapend","vmouseup","tapdragout"],j,{x:Ee[0],y:Ee[1]})}var nt=t.touchData.startPosition[0]-Ee[0],it=nt*nt,Tt=t.touchData.startPosition[1]-Ee[1],dt=Tt*Tt,gt=it+dt,_t=gt*qe*qe;t.touchData.singleTouchMoved||(pe||xe.$(":selected").unselect(["tapunselect"]),a(pe,["tap","vclick"],j,{x:Ee[0],y:Ee[1]}),ye=!1,j.timeStamp-ue<=xe.multiClickDebounceTime()?(Ce&&clearTimeout(Ce),ye=!0,ue=null,a(pe,["dbltap","vdblclick"],j,{x:Ee[0],y:Ee[1]})):(Ce=setTimeout(function(){ye||a(pe,["onetap","voneclick"],j,{x:Ee[0],y:Ee[1]})},xe.multiClickDebounceTime()),ue=j.timeStamp)),pe!=null&&!t.dragData.didDrag&&pe._private.selectable&&_t<t.touchTapThreshold2&&!t.pinching&&(xe.selectionType()==="single"?(xe.$(r).unmerge(pe).unselect(["tapunselect"]),pe.select(["tapselect"])):pe.selected()?pe.unselect(["tapunselect"]):pe.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Mt=0;Mt<Ee.length;Mt++)Oe[Mt]=Ee[Mt];t.dragData.didDrag=!1,j.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),j.touches.length<2&&(j.touches.length===1&&(t.touchData.startGPosition=[j.touches[0].clientX,j.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var Ae=[],Pe=function(j){return{clientX:j.clientX,clientY:j.clientY,force:1,identifier:j.pointerId,pageX:j.pageX,pageY:j.pageY,radiusX:j.width/2,radiusY:j.height/2,screenX:j.screenX,screenY:j.screenY,target:j.target}},Fe=function(j){return{event:j,touch:Pe(j)}},Ye=function(j){Ae.push(Fe(j))},Ve=function(j){for(var pe=0;pe<Ae.length;pe++){var me=Ae[pe];if(me.event.pointerId===j.pointerId){Ae.splice(pe,1);return}}},Qe=function(j){var pe=Ae.filter(function(me){return me.event.pointerId===j.pointerId})[0];pe.event=j,pe.touch=Pe(j)},Xe=function(j){j.touches=Ae.map(function(pe){return pe.touch})},We=function(j){return j.pointerType==="mouse"||j.pointerType===4};t.registerBinding(t.container,"pointerdown",function(he){We(he)||(he.preventDefault(),Ye(he),Xe(he),be(he))}),t.registerBinding(t.container,"pointerup",function(he){We(he)||(Ve(he),Xe(he),de(he))}),t.registerBinding(t.container,"pointercancel",function(he){We(he)||(Ve(he),Xe(he),ve(he))}),t.registerBinding(t.container,"pointermove",function(he){We(he)||(he.preventDefault(),Qe(he),Xe(he),Te(he))})}};var ei={};ei.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,o,s,u){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,u,f,c){return Kl(s,u,this.points,n,a,i/2,o/2,f)},checkPoint:function(n,a,i,o,s,u,f,c){return Qa(n,a,this.points,u,f,o,s,[0,-1],i)}}};ei.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s,u){return Zz(i,o,e,r,n/2+s,a/2+s)},checkPoint:function(e,r,n,a,i,o,s,u){return po(e,r,a,i,o,s,n)}}};ei.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,o,s,u,f){if(u[f]!==void 0&&u[f+"-cx"]===n&&u[f+"-cy"]===a)return u[f];u[f]=new Array(e.length/2),u[f+"-cx"]=n,u[f+"-cy"]=a;var c=i/2,h=o/2;s=s==="auto"?sk(i,o):s;for(var p=new Array(e.length/2),y=0;y<e.length/2;y++)p[y]={x:n+c*e[y*2],y:a+h*e[y*2+1]};var g,E,w,v,C=p.length;for(E=p[C-1],g=0;g<C;g++)w=p[g%C],v=p[(g+1)%C],u[f][g]=B1(E,w,v,s),E=w,w=v;return u[f]},draw:function(n,a,i,o,s,u,f){this.renderer.nodeShapeImpl("round-polygon",n,a,i,o,s,this.points,this.getOrCreateCorners(a,i,o,s,u,f,"drawCorners"))},intersectLine:function(n,a,i,o,s,u,f,c,h){return Qz(s,u,this.points,n,a,i,o,f,this.getOrCreateCorners(n,a,i,o,c,h,"corners"))},checkPoint:function(n,a,i,o,s,u,f,c,h){return jz(n,a,this.points,u,f,o,s,this.getOrCreateCorners(u,f,o,s,c,h,"corners"))}}};ei.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,o)},intersectLine:function(e,r,n,a,i,o,s,u){return ik(i,o,e,r,n,a,s,u)},checkPoint:function(e,r,n,a,i,o,s,u){var f=a/2,c=i/2;u=u==="auto"?Mi(a,i):u,u=Math.min(f,c,u);var h=u*2;return!!(Qa(e,r,this.points,o,s,a,i-h,[0,-1],n)||Qa(e,r,this.points,o,s,a-h,i,[0,-1],n)||po(e,r,h,h,o-f+u,s-c+u,n)||po(e,r,h,h,o+f-u,s-c+u,n)||po(e,r,h,h,o+f-u,s+c-u,n)||po(e,r,h,h,o-f+u,s+c-u,n))}}};ei.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:L1(),points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,o)},generateCutTrianglePts:function(e,r,n,a,i){var o=i==="auto"?this.cornerLength:i,s=r/2,u=e/2,f=n-u,c=n+u,h=a-s,p=a+s;return{topLeft:[f,h+o,f+o,h,f+o,h+o],topRight:[c-o,h,c,h+o,c-o,h+o],bottomRight:[c,p-o,c-o,p,c-o,p-o],bottomLeft:[f+o,p,f,p-o,f+o,p-o]}},intersectLine:function(e,r,n,a,i,o,s,u){var f=this.generateCutTrianglePts(n+2*s,a+2*s,e,r,u),c=[].concat.apply([],[f.topLeft.splice(0,4),f.topRight.splice(0,4),f.bottomRight.splice(0,4),f.bottomLeft.splice(0,4)]);return Kl(i,o,c,e,r)},checkPoint:function(e,r,n,a,i,o,s,u){var f=u==="auto"?this.cornerLength:u;if(Qa(e,r,this.points,o,s,a,i-2*f,[0,-1],n)||Qa(e,r,this.points,o,s,a-2*f,i,[0,-1],n))return!0;var c=this.generateCutTrianglePts(a,i,o,s);return Rn(e,r,c.topLeft)||Rn(e,r,c.topRight)||Rn(e,r,c.bottomRight)||Rn(e,r,c.bottomLeft)}}};ei.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s,u){var f=.15,c=.5,h=.85,p=this.generateBarrelBezierPts(n+2*s,a+2*s,e,r),y=function(w){var v=ms({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},f),C=ms({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},c),x=ms({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},h);return[w[0],w[1],v.x,v.y,C.x,C.y,x.x,x.y,w[4],w[5]]},g=[].concat(y(p.topLeft),y(p.topRight),y(p.bottomRight),y(p.bottomLeft));return Kl(i,o,g,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,o=e/2,s=n-o,u=n+o,f=a-i,c=a+i,h=Ob(e,r),p=h.heightOffset,y=h.widthOffset,g=h.ctrlPtOffsetPct*e,E={topLeft:[s,f+p,s+g,f,s+y,f],topRight:[u-y,f,u-g,f,u,f+p],bottomRight:[u,c-p,u-g,c,u-y,c],bottomLeft:[s+y,c,s+g,c,s,c-p]};return E.topLeft.isTop=!0,E.topRight.isTop=!0,E.bottomLeft.isBottom=!0,E.bottomRight.isBottom=!0,E},checkPoint:function(e,r,n,a,i,o,s,u){var f=Ob(a,i),c=f.heightOffset,h=f.widthOffset;if(Qa(e,r,this.points,o,s,a,i-2*c,[0,-1],n)||Qa(e,r,this.points,o,s,a-2*h,i,[0,-1],n))return!0;for(var p=this.generateBarrelBezierPts(a,i,o,s),y=function(M,k,F){var G=F[4],B=F[2],q=F[0],R=F[5],P=F[1],N=Math.min(G,q),I=Math.max(G,q),z=Math.min(R,P),ae=Math.max(R,P);if(N<=M&&M<=I&&z<=k&&k<=ae){var re=Jz(G,B,q),K=$z(re[0],re[1],re[2],M),V=K.filter(function(Z){return 0<=Z&&Z<=1});if(V.length>0)return V[0]}return null},g=Object.keys(p),E=0;E<g.length;E++){var w=g[E],v=p[w],C=y(e,r,v);if(C!=null){var x=v[5],S=v[3],A=v[1],D=Vr(x,S,A,C);if(v.isTop&&D<=r||v.isBottom&&r<=D)return!0}}return!1}}};ei.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,o)},intersectLine:function(e,r,n,a,i,o,s,u){var f=e-(n/2+s),c=r-(a/2+s),h=c,p=e+(n/2+s),y=wi(i,o,e,r,f,c,p,h,!1);return y.length>0?y:ik(i,o,e,r,n,a,s,u)},checkPoint:function(e,r,n,a,i,o,s,u){u=u==="auto"?Mi(a,i):u;var f=2*u;if(Qa(e,r,this.points,o,s,a,i-f,[0,-1],n)||Qa(e,r,this.points,o,s,a-f,i,[0,-1],n))return!0;var c=a/2+2*n,h=i/2+2*n,p=[o-c,s-h,o-c,s,o+c,s,o+c,s-h];return!!(Rn(e,r,p)||po(e,r,f,f,o+a/2-u,s+i/2-u,n)||po(e,r,f,f,o-a/2+u,s+i/2-u,n))}}};ei.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Tn(3,0)),this.generateRoundPolygon("round-triangle",Tn(3,0)),this.generatePolygon("rectangle",Tn(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Tn(5,0)),this.generateRoundPolygon("round-pentagon",Tn(5,0)),this.generatePolygon("hexagon",Tn(6,0)),this.generateRoundPolygon("round-hexagon",Tn(6,0)),this.generatePolygon("heptagon",Tn(7,0)),this.generateRoundPolygon("round-heptagon",Tn(7,0)),this.generatePolygon("octagon",Tn(8,0)),this.generateRoundPolygon("round-octagon",Tn(8,0));var n=new Array(20);{var a=Nb(5,0),i=Nb(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=i[s*2],n[s*4+3]=i[s*2+1]}n=ok(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(f){var c=f.join("$"),h="polygon-"+c,p;return(p=this[h])?p:e.generatePolygon(h,f)}};var pu={};pu.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};pu.redraw=function(t){t=t||rk();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};pu.beforeRender=function(t,e){if(!this.destroyed){e==null&&pr("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var tS=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};pu.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){tS(t,!0,a);var i=Za();t.render(t.renderOptions);var o=t.lastDrawTime=Za();t.averageRedrawTime===void 0&&(t.averageRedrawTime=o-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=o-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else tS(t,!1,a);t.skipFrame=!1,jf(r)}};jf(r)}};var gU=function(e){this.init(e)},oN=gU,Rs=oN.prototype;Rs.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Rs.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",u=a.getElementById(o)!=null;if(r.className.indexOf(s)<0&&(r.className=(r.className||"")+" "+s),!u){var f=a.createElement("style");f.id=o,f.textContent="."+s+" { position: relative; }",i.insertBefore(f,i.children[0])}var c=n.getComputedStyle(r),h=c.getPropertyValue("position");h==="static"&&Yt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=at(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Rs.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Rs.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};Rs.isHeadless=function(){return!1};[F1,aN,iN,Ms,ei,pu].forEach(function(t){xt(Rs,t)});var kv=1e3/60,sN={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=fu(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(f,c){var h=Za(),p=a.averageRedrawTime,y=a.lastRedrawTime,g=[],E=a.cy.extent(),w=a.getPixelRatio();for(f||a.flushRenderedStyleQueue();;){var v=Za(),C=v-h,x=v-c;if(y<kv){var S=kv-(f?p:0);if(x>=e.deqFastCost*S)break}else if(f){if(C>=e.deqCost*y||C>=e.deqAvgCost*p)break}else if(x>=e.deqNoDrawCost*kv)break;var A=e.deq(n,w,E);if(A.length>0)for(var D=0;D<A.length;D++)g.push(A[D]);else break}g.length>0&&(e.onDeqd(n,g),!f&&e.shouldRedraw(n,g,w,E)&&i())},s=e.priority||C1;a.beforeRender(o,s(n))}}}},yU=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zf;Ii(this,t),this.idsByKey=new Ya,this.keyForId=new Ya,this.cachesByLvl=new Ya,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Fi(t,[{key:"getIdsFor",value:function(r){r==null&&pr("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new As,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new Ya,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])}(),rS=25,vf=50,Mf=-4,Xb=3,lN=7.99,mU=8,bU=1024,wU=1024,xU=1024,CU=.2,EU=.8,TU=10,SU=.15,AU=.1,LU=.9,DU=.9,_U=100,MU=1,cs={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},RU=nn({getKey:null,doesEleInvalidateKey:Zf,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:JP,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),El=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=RU(r);xt(n,a),n.lookup=new yU(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},zr=El.prototype;zr.reasons=cs;zr.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};zr.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};zr.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new cu(function(r,n){return n.reqs-r.reqs});return e};zr.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};zr.getElement=function(t,e,r,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(T1(s*r))),n<Mf)n=Mf;else if(s>=lN||n>Xb)return null;var f=Math.pow(2,n),c=e.h*f,h=e.w*f,p=o.eleTextBiggerThanMin(t,f);if(!this.isVisible(t,p))return null;var y=u.get(t,n);if(y&&y.invalidated&&(y.invalidated=!1,y.texture.invalidatedWidth-=y.width),y)return y;var g;if(c<=rS?g=rS:c<=vf?g=vf:g=Math.ceil(c/vf)*vf,c>xU||h>wU)return null;var E=i.getTextureQueue(g),w=E[E.length-2],v=function(){return i.recycleTexture(g,h)||i.addTexture(g,h)};w||(w=E[E.length-1]),w||(w=v()),w.width-w.usedWidth<h&&(w=v());for(var C=function(N){return N&&N.scaledLabelShown===p},x=a&&a===cs.dequeue,S=a&&a===cs.highQuality,A=a&&a===cs.downscale,D,_=n+1;_<=Xb;_++){var M=u.get(t,_);if(M){D=M;break}}var k=D&&D.level===n+1?D:null,F=function(){w.context.drawImage(k.texture.canvas,k.x,0,k.width,k.height,w.usedWidth,0,h,c)};if(w.context.setTransform(1,0,0,1,0,0),w.context.clearRect(w.usedWidth,0,h,g),C(k))F();else if(C(D))if(S){for(var G=D.level;G>n;G--)k=i.getElement(t,e,r,G,cs.downscale);F()}else return i.queueElement(t,D.level-1),D;else{var B;if(!x&&!S&&!A)for(var q=n-1;q>=Mf;q--){var R=u.get(t,q);if(R){B=R;break}}if(C(B))return i.queueElement(t,n),B;w.context.translate(w.usedWidth,0),w.context.scale(f,f),this.drawElement(w.context,t,e,p,!1),w.context.scale(1/f,1/f),w.context.translate(-w.usedWidth,0)}return y={x:w.usedWidth,texture:w,level:n,scale:f,width:h,height:c,scaledLabelShown:p},w.usedWidth+=Math.ceil(h+mU),w.eleCaches.push(y),u.set(t,n,y),i.checkTextureFullness(w),y};zr.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};zr.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=Mf;i<=Xb;i++){var o=r.getForCachedKey(t,i);o&&n.push(o)}var s=r.invalidate(t);if(s)for(var u=0;u<n.length;u++){var f=n[u],c=f.texture;c.invalidatedWidth+=f.width,f.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};zr.checkTextureUtility=function(t){t.invalidatedWidth>=CU*t.width&&this.retireTexture(t)};zr.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>EU&&t.fullnessChecks>=TU?_i(r,t):t.fullnessChecks++};zr.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;_i(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}E1(i);var u=e.getRetiredTextureQueue(r);u.push(t)};zr.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(bU,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};zr.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,E1(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),_i(a,o),n.push(o),o}};zr.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(s),a[i]=s}};zr.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<MU&&r.size()>0;o++){var s=r.pop(),u=s.key,f=s.eles[0],c=i.hasCache(f,s.level);if(n[u]=null,c)continue;a.push(s);var h=e.getBoundingBox(f);e.getElement(f,h,t,s.level,cs.dequeue)}return a};zr.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=x1,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};zr.onDequeue=function(t){this.onDequeues.push(t)};zr.offDequeue=function(t){_i(this.onDequeues,t)};zr.setupDequeueing=sN.setupDequeueing({deqRedrawThreshold:_U,deqCost:SU,deqAvgCost:AU,deqNoDrawCost:LU,deqFastCost:DU,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var o=r[i].eles,s=0;s<o.length;s++){var u=o[s].boundingBox();if(A1(u,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var PU=1,Ol=-4,ic=2,kU=3.99,NU=50,OU=50,IU=.15,FU=.1,BU=.9,qU=.9,zU=1,nS=250,GU=4e3*4e3,aS=32767,HU=!0,uN=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Za()-2*nS,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=fu(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},OU),n.beforeRender(function(o,s){s-r.lastInvalidationTime<=nS?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(s,u){return u.reqs-s.reqs};r.layersQueue=new cu(i),r.setupDequeueing()},an=uN.prototype,iS=0,UU=Math.pow(2,53)-1;an.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),o={id:iS=++iS%UU,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,f=-o.bb.y1;return s.scale(r,r),s.translate(u,f),o};an.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),s=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(T1(o*e)),r<Ol)r=Ol;else if(o>=kU||r>ic)return null}n.validateLayersElesOrdering(r,t);var u=n.layersByLevel,f=Math.pow(2,r),c=u[r]=u[r]||[],h,p=n.levelIsComplete(r,t),y,g=function(){var F=function(P){if(n.validateLayersElesOrdering(P,t),n.levelIsComplete(P,t))return y=u[P],!0},G=function(P){if(!y)for(var N=r+P;Ol<=N&&N<=ic&&!F(N);N+=P);};G(1),G(-1);for(var B=c.length-1;B>=0;B--){var q=c[B];q.invalid&&_i(c,q)}};if(!p)g();else return c;var E=function(){if(!h){h=Nn();for(var F=0;F<t.length;F++)ak(h,t[F].boundingBox())}return h},w=function(F){F=F||{};var G=F.after;E();var B=Math.ceil(h.w*f),q=Math.ceil(h.h*f);if(B>aS||q>aS)return null;var R=B*q;if(R>GU)return null;var P=n.makeLayer(h,r);if(G!=null){var N=c.indexOf(G)+1;c.splice(N,0,P)}else(F.insert===void 0||F.insert)&&c.unshift(P);return P};if(n.skipping&&!s)return null;for(var v=null,C=t.length/PU,x=!s,S=0;S<t.length;S++){var A=t[S],D=A._private.rscratch,_=D.imgLayerCaches=D.imgLayerCaches||{},M=_[r];if(M){v=M;continue}if((!v||v.eles.length>=C||!Uz(v.bb,A.boundingBox()))&&(v=w({insert:!0,after:v}),!v))return null;y||x?n.queueLayer(v,A):n.drawEleInLayer(v,A,r,e),v.eles.push(A),_[r]=v}return y||(x?null:c)};an.getEleLevelForLayerLevel=function(t,e){return t};an.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,o=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,r,HU),i.setImgSmoothing(o,!0))};an.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};an.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var s=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}};an.updateElementsInLayers=function(t,e){for(var r=this,n=ou(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],o=n?t[a]:t[a].ele,s=o._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},f=Ol;f<=ic;f++){var c=u[f];c&&(i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,o,i))}};an.haveLayers=function(){for(var t=this,e=!1,r=Ol;r<=ic;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};an.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=Za(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};an.invalidateLayer=function(t){if(this.lastInvalidationTime=Za(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];_i(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};an.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};an.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};an.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};an.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<zU&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};an.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};an.requestRedraw=fu(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);an.setupDequeueing=sN.setupDequeueing({deqRedrawThreshold:NU,deqCost:IU,deqAvgCost:FU,deqNoDrawCost:BU,deqFastCost:qU,deq:function(e,r){return e.dequeue(r)},onDeqd:C1,shouldRedraw:JP,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var fN={},oS;function VU(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function WU(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function sS(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var o=r,s=r[0];t.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function $U(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,o=i[0];t.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var u=i[s];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function YU(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}fN.arrowShapeImpl=function(t){return(oS||(oS={polygon:VU,"triangle-backcurve":WU,"triangle-tee":sS,"circle-triangle":$U,"triangle-cross":sS,circle:YU}))[t]};var Ma={};Ma.drawElement=function(t,e,r,n,a,i){var o=this;e.isNode()?o.drawNode(t,e,r,n,a,i):o.drawEdge(t,e,r,n,a,i)};Ma.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};Ma.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};Ma.drawCachedElementPortion=function(t,e,r,n,a,i,o,s){var u=this,f=r.getBoundingBox(e);if(!(f.w===0||f.h===0)){var c=r.getElement(e,f,n,a,i);if(c!=null){var h=s(u,e);if(h===0)return;var p=o(u,e),y=f.x1,g=f.y1,E=f.w,w=f.h,v,C,x,S,A;if(p!==0){var D=r.getRotationPoint(e);x=D.x,S=D.y,t.translate(x,S),t.rotate(p),A=u.getImgSmoothing(t),A||u.setImgSmoothing(t,!0);var _=r.getRotationOffset(e);v=_.x,C=_.y}else v=y,C=g;var M;h!==1&&(M=t.globalAlpha,t.globalAlpha=M*h),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,v,C,E,w),h!==1&&(t.globalAlpha=M),p!==0&&(t.rotate(-p),t.translate(-x,-S),A||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var XU=function(){return 0},KU=function(e,r){return e.getTextAngle(r,null)},jU=function(e,r){return e.getTextAngle(r,"source")},ZU=function(e,r){return e.getTextAngle(r,"target")},QU=function(e,r){return r.effectiveOpacity()},Nv=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Ma.drawCachedElement=function(t,e,r,n,a,i){var o=this,s=o.data,u=s.eleTxrCache,f=s.lblTxrCache,c=s.slbTxrCache,h=s.tlbTxrCache,p=e.boundingBox(),y=i===!0?u.reasons.highQuality:null;if(!(p.w===0||p.h===0||!e.visible())&&(!n||A1(p,n))){var g=e.isEdge(),E=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,u,r,a,y,XU,QU),(!g||!E)&&o.drawCachedElementPortion(t,e,f,r,a,y,KU,Nv),g&&!E&&(o.drawCachedElementPortion(t,e,c,r,a,y,jU,Nv),o.drawCachedElementPortion(t,e,h,r,a,y,ZU,Nv)),o.drawElementOverlay(t,e)}};Ma.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};Ma.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(t,o,r,n)}};Ma.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&a.drawCachedElement(t,o,r,n)}};Ma.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var o=0;o<i.length;o++){var s=i[o],u=s.bb;u.w===0||u.h===0||t.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else a.drawCachedElements(t,e,r,n)};var ti={};ti.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var f=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,h=e.pstyle("curve-style").value,p=e.pstyle("line-style").value,y=e.pstyle("width").pfValue,g=e.pstyle("line-cap").value,E=e.pstyle("line-outline-width").value,w=e.pstyle("line-outline-color").value,v=f*c,C=f*c,x=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;h==="straight-triangle"?(o.eleStrokeStyle(t,e,P),o.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=y,t.lineCap=g,o.eleStrokeStyle(t,e,P),o.drawEdgePath(e,t,s.allpts,p),t.lineCap="butt")},S=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;if(t.lineWidth=y+E,t.lineCap=g,E>0)o.colorStrokeStyle(t,w[0],w[1],w[2],P);else{t.lineCap="butt";return}h==="straight-triangle"?o.drawEdgeTrianglePath(e,t,s.allpts):(o.drawEdgePath(e,t,s.allpts,p),t.lineCap="butt")},A=function(){a&&o.drawEdgeOverlay(t,e)},D=function(){a&&o.drawEdgeUnderlay(t,e)},_=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C;o.drawArrowheads(t,e,P)},M=function(){o.drawElementText(t,e,null,n)};t.lineJoin="round";var k=e.pstyle("ghost").value==="yes";if(k){var F=e.pstyle("ghost-offset-x").pfValue,G=e.pstyle("ghost-offset-y").pfValue,B=e.pstyle("ghost-opacity").value,q=v*B;t.translate(F,G),x(q),_(q),t.translate(-F,-G)}else S();D(),x(),_(),A(),M(),r&&t.translate(u.x1,u.y1)}};var cN=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,f=2*u,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=f,s.edgeType==="self"&&!o?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],a),i.drawEdgePath(n,r,s.allpts,"solid")}}}};ti.drawEdgeOverlay=cN("overlay");ti.drawEdgeUnderlay=cN("underlay");ti.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,o,s=!1,u=this.usePaths(),f=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var h=r.join("$"),p=a.pathCacheKey&&a.pathCacheKey===h;p?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=h,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(f),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var y=2;y+3<r.length;y+=4)e.quadraticCurveTo(r[y],r[y+1],r[y+2],r[y+3]);break;case"straight":case"haystack":for(var g=2;g+1<r.length;g+=2)e.lineTo(r[g],r[g+1]);break;case"segments":if(a.isRound){var E=Pn(a.roundCorners),w;try{for(E.s();!(w=E.n()).done;){var v=w.value;Jk(e,v)}}catch(x){E.e(x)}finally{E.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var C=2;C+1<r.length;C+=2)e.lineTo(r[C],r[C+1]);break}e=i,u?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};ti.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(r[a]-u[0],r[a+1]-u[1]),e.lineTo(r[a]+u[0],r[a+1]+u[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};ti.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};ti.drawArrowhead=function(t,e,r,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var s=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var f=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,h=e.pstyle("width").pfValue,p=e.pstyle(r+"-arrow-width"),y=p.value==="match-line"?h:p.pfValue;p.units==="%"&&(y*=h);var g=e.pstyle("opacity").value;o===void 0&&(o=g);var E=t.globalCompositeOperation;(o!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,f,h,u,y,n,a,i),t.globalCompositeOperation=E);var w=e.pstyle(r+"-arrow-color").value;s.colorFillStyle(t,w[0],w[1],w[2],o),s.colorStrokeStyle(t,w[0],w[1],w[2],o),s.drawArrowShape(e,t,c,h,u,y,n,a,i)}}};ti.drawArrowShape=function(t,e,r,n,a,i,o,s,u){var f=this,c=this.usePaths()&&a!=="triangle-cross",h=!1,p,y=e,g={x:o,y:s},E=t.pstyle("arrow-scale").value,w=this.getArrowWidth(n,E),v=f.arrowShapes[a];if(c){var C=f.arrowPathCache=f.arrowPathCache||[],x=mo(a),S=C[x];S!=null?(p=e=S,h=!0):(p=e=new Path2D,C[x]=p)}h||(e.beginPath&&e.beginPath(),c?v.draw(e,1,0,{x:0,y:0},1):v.draw(e,w,u,g,n),e.closePath&&e.closePath()),e=y,c&&(e.translate(o,s),e.rotate(u),e.scale(w,w)),(r==="filled"||r==="both")&&(c?e.fill(p):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(c?w:1),e.lineJoin="miter",c?e.stroke(p):e.stroke()),c&&(e.scale(1/w,1/w),e.rotate(-u),e.translate(-o,-s))};var z1={};z1.safeDrawImage=function(t,e,r,n,a,i,o,s,u,f){if(!(a<=0||i<=0||u<=0||f<=0))try{t.drawImage(e,r,n,a,i,o,s,u,f)}catch(c){Yt(c)}};z1.drawInscribedImage=function(t,e,r,n,a){var i=this,o=r.position(),s=o.x,u=o.y,f=r.cy().style(),c=f.getIndexedStyle.bind(f),h=c(r,"background-fit","value",n),p=c(r,"background-repeat","value",n),y=r.width(),g=r.height(),E=r.padding()*2,w=y+(c(r,"background-width-relative-to","value",n)==="inner"?0:E),v=g+(c(r,"background-height-relative-to","value",n)==="inner"?0:E),C=r._private.rscratch,x=c(r,"background-clip","value",n),S=x==="node",A=c(r,"background-image-opacity","value",n)*a,D=c(r,"background-image-smoothing","value",n),_=r.pstyle("corner-radius").value;_!=="auto"&&(_=r.pstyle("corner-radius").pfValue);var M=e.width||e.cachedW,k=e.height||e.cachedH;(M==null||k==null)&&(document.body.appendChild(e),M=e.cachedW=e.width||e.offsetWidth,k=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var F=M,G=k;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?F=c(r,"background-width","pfValue",n)*w:F=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?G=c(r,"background-height","pfValue",n)*v:G=c(r,"background-height","pfValue",n)),!(F===0||G===0)){if(h==="contain"){var B=Math.min(w/F,v/G);F*=B,G*=B}else if(h==="cover"){var B=Math.max(w/F,v/G);F*=B,G*=B}var q=s-w/2,R=c(r,"background-position-x","units",n),P=c(r,"background-position-x","pfValue",n);R==="%"?q+=(w-F)*P:q+=P;var N=c(r,"background-offset-x","units",n),I=c(r,"background-offset-x","pfValue",n);N==="%"?q+=(w-F)*I:q+=I;var z=u-v/2,ae=c(r,"background-position-y","units",n),re=c(r,"background-position-y","pfValue",n);ae==="%"?z+=(v-G)*re:z+=re;var K=c(r,"background-offset-y","units",n),V=c(r,"background-offset-y","pfValue",n);K==="%"?z+=(v-G)*V:z+=V,C.pathCache&&(q-=s,z-=u,s=0,u=0);var Z=t.globalAlpha;t.globalAlpha=A;var U=i.getImgSmoothing(t),W=!1;if(D==="no"&&U?(i.setImgSmoothing(t,!1),W=!0):D==="yes"&&!U&&(i.setImgSmoothing(t,!0),W=!0),p==="no-repeat")S&&(t.save(),C.pathCache?t.clip(C.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,s,u,w,v,_,C),t.clip())),i.safeDrawImage(t,e,0,0,M,k,q,z,F,G),S&&t.restore();else{var Y=t.createPattern(e,p);t.fillStyle=Y,i.nodeShapes[i.getNodeShape(r)].draw(t,s,u,w,v,_,C),t.translate(q,z),t.fill(),t.translate(-q,-z)}t.globalAlpha=Z,W&&i.setImgSmoothing(t,U)}};var To={};To.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(T1(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,o=t.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};To.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var f=e.element()._private.rscratch.badLine,c=e.pstyle("label"),h=e.pstyle("source-label"),p=e.pstyle("target-label");if(f||(!c||!c.value)&&(!h||!h.value)&&(!p||!p.value))return;t.textAlign="center",t.textBaseline="bottom"}var y=!r,g;r&&(g=r,t.translate(-g.x1,-g.y1)),a==null?(o.drawText(t,e,null,y,i),e.isEdge()&&(o.drawText(t,e,"source",y,i),o.drawText(t,e,"target",y,i))):o.drawText(t,e,a,y,i),r&&t.translate(g.x1,g.y1)};To.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};To.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,f=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+o+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,f[0],f[1],f[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function Ov(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+a-i),t.quadraticCurveTo(e+n,r+a,e+n-i,r+a),t.lineTo(e+i,r+a),t.quadraticCurveTo(e,r+a,e,r+a-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),o?t.stroke():t.fill()}To.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",o=t.pstyle(i+"text-rotation");if(o.strValue==="autorotate"){var s=Mn(a,"labelAngle",e);r=t.isEdge()?s:0}else o.strValue==="none"?r=0:r=o.pfValue;return r};To.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Mn(o,"labelX",r),f=Mn(o,"labelY",r),c,h,p=this.getLabelText(e,r);if(p!=null&&p!==""&&!isNaN(u)&&!isNaN(f)){this.setupTextStyle(t,e,a);var y=r?r+"-":"",g=Mn(o,"labelWidth",r),E=Mn(o,"labelHeight",r),w=e.pstyle(y+"text-margin-x").pfValue,v=e.pstyle(y+"text-margin-y").pfValue,C=e.isEdge(),x=e.pstyle("text-halign").value,S=e.pstyle("text-valign").value;C&&(x="center",S="center"),u+=w,f+=v;var A;switch(n?A=this.getTextAngle(e,r):A=0,A!==0&&(c=u,h=f,t.translate(c,h),t.rotate(A),u=0,f=0),S){case"top":break;case"center":f+=E/2;break;case"bottom":f+=E;break}var D=e.pstyle("text-background-opacity").value,_=e.pstyle("text-border-opacity").value,M=e.pstyle("text-border-width").pfValue,k=e.pstyle("text-background-padding").pfValue,F=e.pstyle("text-background-shape").strValue,G=F.indexOf("round")===0,B=2;if(D>0||M>0&&_>0){var q=u-k;switch(x){case"left":q-=g;break;case"center":q-=g/2;break}var R=f-E-k,P=g+2*k,N=E+2*k;if(D>0){var I=t.fillStyle,z=e.pstyle("text-background-color").value;t.fillStyle="rgba("+z[0]+","+z[1]+","+z[2]+","+D*s+")",G?Ov(t,q,R,P,N,B):t.fillRect(q,R,P,N),t.fillStyle=I}if(M>0&&_>0){var ae=t.strokeStyle,re=t.lineWidth,K=e.pstyle("text-border-color").value,V=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+K[0]+","+K[1]+","+K[2]+","+_*s+")",t.lineWidth=M,t.setLineDash)switch(V){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=M/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(G?Ov(t,q,R,P,N,B,"stroke"):t.strokeRect(q,R,P,N),V==="double"){var Z=M/2;G?Ov(t,q+Z,R+Z,P-Z*2,N-Z*2,B,"stroke"):t.strokeRect(q+Z,R+Z,P-Z*2,N-Z*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=re,t.strokeStyle=ae}}var U=2*e.pstyle("text-outline-width").pfValue;if(U>0&&(t.lineWidth=U),e.pstyle("text-wrap").value==="wrap"){var W=Mn(o,"labelWrapCachedLines",r),Y=Mn(o,"labelLineHeight",r),ee=g/2,oe=this.getLabelJustification(e);switch(oe==="auto"||(x==="left"?oe==="left"?u+=-g:oe==="center"&&(u+=-ee):x==="center"?oe==="left"?u+=-ee:oe==="right"&&(u+=ee):x==="right"&&(oe==="center"?u+=ee:oe==="right"&&(u+=g))),S){case"top":f-=(W.length-1)*Y;break;case"center":case"bottom":f-=(W.length-1)*Y;break}for(var te=0;te<W.length;te++)U>0&&t.strokeText(W[te],u,f),t.fillText(W[te],u,f),f+=Y}else U>0&&t.strokeText(p,u,f),t.fillText(p,u,f);A!==0&&(t.rotate(-A),t.translate(-c,-h))}}};var qi={};qi.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,u,f=e._private,c=f.rscratch,h=e.position();if(!(!at(h.x)||!at(h.y))&&!(i&&!e.visible())){var p=i?e.effectiveOpacity():1,y=o.usePaths(),g,E=!1,w=e.padding();s=e.width()+2*w,u=e.height()+2*w;var v;r&&(v=r,t.translate(-v.x1,-v.y1));for(var C=e.pstyle("background-image"),x=C.value,S=new Array(x.length),A=new Array(x.length),D=0,_=0;_<x.length;_++){var M=x[_],k=S[_]=M!=null&&M!=="none";if(k){var F=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",_);D++,A[_]=o.getCachedImage(M,F,function(){f.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var G=e.pstyle("background-blacken").value,B=e.pstyle("border-width").pfValue,q=e.pstyle("background-opacity").value*p,R=e.pstyle("border-color").value,P=e.pstyle("border-style").value,N=e.pstyle("border-join").value,I=e.pstyle("border-cap").value,z=e.pstyle("border-position").value,ae=e.pstyle("border-dash-pattern").pfValue,re=e.pstyle("border-dash-offset").pfValue,K=e.pstyle("border-opacity").value*p,V=e.pstyle("outline-width").pfValue,Z=e.pstyle("outline-color").value,U=e.pstyle("outline-style").value,W=e.pstyle("outline-opacity").value*p,Y=e.pstyle("outline-offset").value,ee=e.pstyle("corner-radius").value;ee!=="auto"&&(ee=e.pstyle("corner-radius").pfValue);var oe=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q;o.eleFillStyle(t,e,We)},te=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K;o.colorStrokeStyle(t,R[0],R[1],R[2],We)},ie=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W;o.colorStrokeStyle(t,Z[0],Z[1],Z[2],We)},se=function(We,he,j,pe){var me=o.nodePathCache=o.nodePathCache||[],we=QP(j==="polygon"?j+","+pe.join(","):j,""+he,""+We,""+ee),xe=me[we],qe,Ee=!1;return xe!=null?(qe=xe,Ee=!0,c.pathCache=qe):(qe=new Path2D,me[we]=c.pathCache=qe),{path:qe,cacheHit:Ee}},$=e.pstyle("shape").strValue,ne=e.pstyle("shape-polygon-points").pfValue;if(y){t.translate(h.x,h.y);var le=se(s,u,$,ne);g=le.path,E=le.cacheHit}var Se=function(){if(!E){var We=h;y&&(We={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(g||t,We.x,We.y,s,u,ee,c)}y?t.fill(g):t.fill()},De=function(){for(var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,j=f.backgrounding,pe=0,me=0;me<A.length;me++){var we=e.cy().style().getIndexedStyle(e,"background-image-containment","value",me);if(he&&we==="over"||!he&&we==="inside"){pe++;continue}S[me]&&A[me].complete&&!A[me].error&&(pe++,o.drawInscribedImage(t,A[me],e,me,We))}f.backgrounding=pe!==D,j!==f.backgrounding&&e.updateStyle(!1)},be=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;o.hasPie(e)&&(o.drawPie(t,e,he),We&&(y||o.nodeShapes[o.getNodeShape(e)].draw(t,h.x,h.y,s,u,ee,c)))},Te=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;o.hasStripe(e)&&(t.save(),y?t.clip(c.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(t,h.x,h.y,s,u,ee,c),t.clip()),o.drawStripe(t,e,he),t.restore(),We&&(y||o.nodeShapes[o.getNodeShape(e)].draw(t,h.x,h.y,s,u,ee,c)))},ve=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,he=(G>0?G:-G)*We,j=G>0?0:255;G!==0&&(o.colorFillStyle(t,j,j,j,he),y?t.fill(g):t.fill())},de=function(){if(B>0){if(t.lineWidth=B,t.lineCap=I,t.lineJoin=N,t.setLineDash)switch(P){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(ae),t.lineDashOffset=re;break;case"solid":case"double":t.setLineDash([]);break}if(z!=="center"){if(t.save(),t.lineWidth*=2,z==="inside")y?t.clip(g):t.clip();else{var We=new Path2D;We.rect(-s/2-B,-u/2-B,s+2*B,u+2*B),We.addPath(g),t.clip(We,"evenodd")}y?t.stroke(g):t.stroke(),t.restore()}else y?t.stroke(g):t.stroke();if(P==="double"){t.lineWidth=B/3;var he=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",y?t.stroke(g):t.stroke(),t.globalCompositeOperation=he}t.setLineDash&&t.setLineDash([])}},ye=function(){if(V>0){if(t.lineWidth=V,t.lineCap="butt",t.setLineDash)switch(U){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var We=h;y&&(We={x:0,y:0});var he=o.getNodeShape(e),j=B;z==="inside"&&(j=0),z==="outside"&&(j*=2);var pe=(s+j+(V+Y))/s,me=(u+j+(V+Y))/u,we=s*pe,xe=u*me,qe=o.nodeShapes[he].points,Ee;if(y){var Oe=se(we,xe,he,qe);Ee=Oe.path}if(he==="ellipse")o.drawEllipsePath(Ee||t,We.x,We.y,we,xe);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(he)){var Ie=0,He=0,Ue=0;he==="round-diamond"?Ie=(j+Y+V)*1.4:he==="round-heptagon"?(Ie=(j+Y+V)*1.075,Ue=-(j/2+Y+V)/35):he==="round-hexagon"?Ie=(j+Y+V)*1.12:he==="round-pentagon"?(Ie=(j+Y+V)*1.13,Ue=-(j/2+Y+V)/15):he==="round-tag"?(Ie=(j+Y+V)*1.12,He=(j/2+V+Y)*.07):he==="round-triangle"&&(Ie=(j+Y+V)*(Math.PI/2),Ue=-(j+Y/2+V)/Math.PI),Ie!==0&&(pe=(s+Ie)/s,we=s*pe,["round-hexagon","round-tag"].includes(he)||(me=(u+Ie)/u,xe=u*me)),ee=ee==="auto"?sk(we,xe):ee;for(var je=we/2,Je=xe/2,Ge=ee+(j+V+Y)/2,$e=new Array(qe.length/2),vt=new Array(qe.length/2),nt=0;nt<qe.length/2;nt++)$e[nt]={x:We.x+He+je*qe[nt*2],y:We.y+Ue+Je*qe[nt*2+1]};var it,Tt,dt,gt,_t=$e.length;for(Tt=$e[_t-1],it=0;it<_t;it++)dt=$e[it%_t],gt=$e[(it+1)%_t],vt[it]=B1(Tt,dt,gt,Ge),Tt=dt,dt=gt;o.drawRoundPolygonPath(Ee||t,We.x+He,We.y+Ue,s*pe,u*me,qe,vt)}else if(["roundrectangle","round-rectangle"].includes(he))ee=ee==="auto"?Mi(we,xe):ee,o.drawRoundRectanglePath(Ee||t,We.x,We.y,we,xe,ee+(j+V+Y)/2);else if(["cutrectangle","cut-rectangle"].includes(he))ee=ee==="auto"?L1():ee,o.drawCutRectanglePath(Ee||t,We.x,We.y,we,xe,null,ee+(j+V+Y)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(he))ee=ee==="auto"?Mi(we,xe):ee,o.drawBottomRoundRectanglePath(Ee||t,We.x,We.y,we,xe,ee+(j+V+Y)/2);else if(he==="barrel")o.drawBarrelPath(Ee||t,We.x,We.y,we,xe);else if(he.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(he)){var Mt=(j+V+Y)/s;qe=Qf(Jf(qe,Mt)),o.drawPolygonPath(Ee||t,We.x,We.y,s,u,qe)}else{var jt=(j+V+Y)/s;qe=Qf(Jf(qe,-jt)),o.drawPolygonPath(Ee||t,We.x,We.y,s,u,qe)}if(y?t.stroke(Ee):t.stroke(),U==="double"){t.lineWidth=j/3;var Lt=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",y?t.stroke(Ee):t.stroke(),t.globalCompositeOperation=Lt}t.setLineDash&&t.setLineDash([])}},Ce=function(){a&&o.drawNodeOverlay(t,e,h,s,u)},ue=function(){a&&o.drawNodeUnderlay(t,e,h,s,u)},Ae=function(){o.drawElementText(t,e,null,n)},Pe=e.pstyle("ghost").value==="yes";if(Pe){var Fe=e.pstyle("ghost-offset-x").pfValue,Ye=e.pstyle("ghost-offset-y").pfValue,Ve=e.pstyle("ghost-opacity").value,Qe=Ve*p;t.translate(Fe,Ye),ie(),ye(),oe(Ve*q),Se(),De(Qe,!0),te(Ve*K),de(),be(G!==0||B!==0),Te(G!==0||B!==0),De(Qe,!1),ve(Qe),t.translate(-Fe,-Ye)}y&&t.translate(-h.x,-h.y),ue(),y&&t.translate(h.x,h.y),ie(),ye(),oe(),Se(),De(p,!0),te(),de(),be(G!==0||B!==0),Te(G!==0||B!==0),De(p,!1),ve(),y&&t.translate(-h.x,-h.y),Ae(),Ce(),r&&t.translate(v.x1,v.y1)}};var dN=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,o){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,f=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,h=n.pstyle("".concat(e,"-shape")).value,p=n.pstyle("".concat(e,"-corner-radius")).value;if(f>0){if(a=a||n.position(),i==null||o==null){var y=n.padding();i=n.width()+2*y,o=n.height()+2*y}s.colorFillStyle(r,c[0],c[1],c[2],f),s.nodeShapes[h].draw(r,a.x,a.y,i+u*2,o+u*2,p),r.fill()}}}};qi.drawNodeOverlay=dN("overlay");qi.drawNodeUnderlay=dN("underlay");qi.hasPie=function(t){return t=t[0],t._private.hasPie};qi.hasStripe=function(t){return t=t[0],t._private.hasStripe};qi.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,u=n.x,f=n.y,c=e.width(),h=e.height(),p=Math.min(c,h)/2,y,g=0,E=this.usePaths();if(E&&(u=0,f=0),i.units==="%"?p=p*i.pfValue:i.pfValue!==void 0&&(p=i.pfValue/2),o.units==="%"?y=p*o.pfValue:o.pfValue!==void 0&&(y=o.pfValue/2),!(y>=p))for(var w=1;w<=a.pieBackgroundN;w++){var v=e.pstyle("pie-"+w+"-background-size").value,C=e.pstyle("pie-"+w+"-background-color").value,x=e.pstyle("pie-"+w+"-background-opacity").value*r,S=v/100;S+g>1&&(S=1-g);var A=1.5*Math.PI+2*Math.PI*g;A+=s;var D=2*Math.PI*S,_=A+D;v===0||g>=1||g+S>1||(y===0?(t.beginPath(),t.moveTo(u,f),t.arc(u,f,p,A,_),t.closePath()):(t.beginPath(),t.arc(u,f,p,A,_),t.arc(u,f,y,_,A,!0),t.closePath()),this.colorFillStyle(t,C[0],C[1],C[2],x),t.fill(),g+=S)}};qi.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,o=n.y,s=e.width(),u=e.height(),f=0,c=this.usePaths();t.save();var h=e.pstyle("stripe-direction").value,p=e.pstyle("stripe-size");switch(h){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var y=s,g=u;p.units==="%"?(y=y*p.pfValue,g=g*p.pfValue):p.pfValue!==void 0&&(y=p.pfValue,g=p.pfValue),c&&(i=0,o=0),o-=y/2,i-=g/2;for(var E=1;E<=a.stripeBackgroundN;E++){var w=e.pstyle("stripe-"+E+"-background-size").value,v=e.pstyle("stripe-"+E+"-background-color").value,C=e.pstyle("stripe-"+E+"-background-opacity").value*r,x=w/100;x+f>1&&(x=1-f),!(w===0||f>=1||f+x>1)&&(t.beginPath(),t.rect(i,o+g*f,y,g*x),t.closePath(),this.colorFillStyle(t,v[0],v[1],v[2],C),t.fill(),f+=x)}t.restore()};var An={},JU=100;An.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};An.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};An.createGradientStyleFor=function(t,e,r,n,a){var i,o=this.usePaths(),s=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var f=r.sourceEndpoint(),c=r.targetEndpoint(),h=r.midpoint(),p=bo(f,h),y=bo(c,h);i=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(p,y))}else{var g=o?{x:0,y:0}:r.position(),E=r.paddedWidth(),w=r.paddedHeight();i=t.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(E,w))}else if(r.isEdge()){var v=r.sourceEndpoint(),C=r.targetEndpoint();i=t.createLinearGradient(v.x,v.y,C.x,C.y)}else{var x=o?{x:0,y:0}:r.position(),S=r.paddedWidth(),A=r.paddedHeight(),D=S/2,_=A/2,M=r.pstyle("background-gradient-direction").value;switch(M){case"to-bottom":i=t.createLinearGradient(x.x,x.y-_,x.x,x.y+_);break;case"to-top":i=t.createLinearGradient(x.x,x.y+_,x.x,x.y-_);break;case"to-left":i=t.createLinearGradient(x.x+D,x.y,x.x-D,x.y);break;case"to-right":i=t.createLinearGradient(x.x-D,x.y,x.x+D,x.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(x.x-D,x.y-_,x.x+D,x.y+_);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(x.x-D,x.y+_,x.x+D,x.y-_);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(x.x+D,x.y-_,x.x-D,x.y+_);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(x.x+D,x.y+_,x.x-D,x.y-_);break}}if(!i)return null;for(var k=u.length===s.length,F=s.length,G=0;G<F;G++)i.addColorStop(k?u[G]:G/(F-1),"rgba("+s[G][0]+","+s[G][1]+","+s[G][2]+","+a+")");return i};An.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};An.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};An.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};An.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};An.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};An.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};An.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var u=a*o,f=i*o,c;if(!(u===e.canvasWidth&&f===e.canvasHeight)){e.fontCaches=null;var h=r.canvasContainer;h.style.width=a+"px",h.style.height=i+"px";for(var p=0;p<e.CANVAS_LAYERS;p++)c=r.canvases[p],c.width=u,c.height=f,c.style.width=a+"px",c.style.height=i+"px";for(var p=0;p<e.BUFFER_COUNT;p++)c=r.bufferCanvases[p],c.width=u,c.height=f,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,o<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=f*e.textureMult),e.canvasWidth=u,e.canvasHeight=f,e.pixelRatio=o}};An.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};An.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};An.render=function(t){var e=this;t=t||rk();var r=e.cy,n=t.forcedContext,a=t.drawAllLayers,i=t.drawOnlyNodeLayer,o=t.forcedZoom,s=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,f=e.data,c=f.canvasNeedsRedraw,h=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),p=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,y=e.motionBlurPxRatio,g=r.hasCompoundNodes(),E=e.hoverData.draggingEles,w=!!(e.hoverData.selecting||e.touchData.selecting);p=p&&!n&&e.motionBlurEnabled&&!w;var v=p;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),p&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(v=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!h&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var C=r.style(),x=r.zoom(),S=o!==void 0?o:x,A=r.pan(),D={x:A.x,y:A.y},_={zoom:x,pan:{x:A.x,y:A.y}},M=e.prevViewport,k=M===void 0||_.zoom!==M.zoom||_.pan.x!==M.pan.x||_.pan.y!==M.pan.y;!k&&!(E&&!g)&&(e.motionBlurPxRatio=1),s&&(D=s),S*=u,D.x*=u,D.y*=u;var F=e.getCachedZSortedEles();function G(te,ie,se,$,ne){var le=te.globalCompositeOperation;te.globalCompositeOperation="destination-out",e.colorFillStyle(te,255,255,255,e.motionBlurTransparency),te.fillRect(ie,se,$,ne),te.globalCompositeOperation=le}function B(te,ie){var se,$,ne,le;!e.clearingMotionBlur&&(te===f.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||te===f.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(se={x:A.x*y,y:A.y*y},$=x*y,ne=e.canvasWidth*y,le=e.canvasHeight*y):(se=D,$=S,ne=e.canvasWidth,le=e.canvasHeight),te.setTransform(1,0,0,1,0,0),ie==="motionBlur"?G(te,0,0,ne,le):!n&&(ie===void 0||ie)&&te.clearRect(0,0,ne,le),a||(te.translate(se.x,se.y),te.scale($,$)),s&&te.translate(s.x,s.y),o&&te.scale(o,o)}if(h||(e.textureDrawLastFrame=!1),h){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var q=e.data.bufferContexts[e.TEXTURE_BUFFER];q.setTransform(1,0,0,1,0,0),q.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:q,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var _=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};_.mpan={x:(0-_.pan.x)/_.zoom,y:(0-_.pan.y)/_.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var R=f.contexts[e.NODE],P=e.textureCache.texture,_=e.textureCache.viewport;R.setTransform(1,0,0,1,0,0),p?G(R,0,0,_.width,_.height):R.clearRect(0,0,_.width,_.height);var N=C.core("outside-texture-bg-color").value,I=C.core("outside-texture-bg-opacity").value;e.colorFillStyle(R,N[0],N[1],N[2],I),R.fillRect(0,0,_.width,_.height);var x=r.zoom();B(R,!1),R.clearRect(_.mpan.x,_.mpan.y,_.width/_.zoom/u,_.height/_.zoom/u),R.drawImage(P,_.mpan.x,_.mpan.y,_.width/_.zoom/u,_.height/_.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var z=r.extent(),ae=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),re=e.hideEdgesOnViewport&&ae,K=[];if(K[e.NODE]=!c[e.NODE]&&p&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,K[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),K[e.DRAG]=!c[e.DRAG]&&p&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,K[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||a||i||K[e.NODE]){var V=p&&!K[e.NODE]&&y!==1,R=n||(V?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:f.contexts[e.NODE]),Z=p&&!V?"motionBlur":void 0;B(R,Z),re?e.drawCachedNodes(R,F.nondrag,u,z):e.drawLayeredElements(R,F.nondrag,u,z),e.debug&&e.drawDebugPoints(R,F.nondrag),!a&&!p&&(c[e.NODE]=!1)}if(!i&&(c[e.DRAG]||a||K[e.DRAG])){var V=p&&!K[e.DRAG]&&y!==1,R=n||(V?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:f.contexts[e.DRAG]);B(R,p&&!V?"motionBlur":void 0),re?e.drawCachedNodes(R,F.drag,u,z):e.drawCachedElements(R,F.drag,u,z),e.debug&&e.drawDebugPoints(R,F.drag),!a&&!p&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,B),p&&y!==1){var U=f.contexts[e.NODE],W=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Y=f.contexts[e.DRAG],ee=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],oe=function(ie,se,$){ie.setTransform(1,0,0,1,0,0),$||!v?ie.clearRect(0,0,e.canvasWidth,e.canvasHeight):G(ie,0,0,e.canvasWidth,e.canvasHeight);var ne=y;ie.drawImage(se,0,0,e.canvasWidth*ne,e.canvasHeight*ne,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||K[e.NODE])&&(oe(U,W,K[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||K[e.DRAG])&&(oe(Y,ee,K[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=_,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),p&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!h,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},JU)),n||r.emit("render")};var yl;An.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,a=r.data,i=n.style(),o=t.drawOnlyNodeLayer,s=t.drawAllLayers,u=a.canvasNeedsRedraw,f=t.forcedContext;if(r.showFps||!o&&u[r.SELECT_BOX]&&!s){var c=f||a.contexts[r.SELECT_BOX];if(e(c),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var h=r.cy.zoom(),p=i.core("selection-box-border-width").value/h;c.lineWidth=p,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),p>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(a.bgActivePosistion&&!r.hoverData.selecting){var h=r.cy.zoom(),y=a.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(y.x,y.y,i.core("active-bg-size").pfValue/h,0,2*Math.PI),c.fill()}var g=r.lastRedrawTime;if(r.showFps&&g){g=Math.round(g);var E=Math.round(1e3/g),w="1 frame = "+g+" ms = "+E+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!yl){var v=c.measureText(w);yl=v.actualBoundingBoxAscent}c.fillText(w,0,yl);var C=60;c.strokeRect(0,yl+10,250,20),c.fillRect(0,yl+10,250*Math.min(E/C,1),20)}s||(u[r.SELECT_BOX]=!1)}};function lS(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function eV(t,e,r){var n=lS(t,t.VERTEX_SHADER,e),a=lS(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function tV(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function G1(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function rV(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function nV(t,e,r,n,a){var i=n*r+e.x,o=a*r+e.y;return o=Math.round(t.canvasHeight-o),[i,o]}function aV(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function iV(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function ao(t,e,r){var n=t[0]/255,a=t[1]/255,i=t[2]/255,o=e,s=r||new Array(4);return s[0]=n*o,s[1]=a*o,s[2]=i*o,s[3]=o,s}function as(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function oV(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function sV(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function hN(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function vN(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function lV(t,e,r,n,a,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*n,a);case t.INT:return new Int32Array(r.buffer,i*n,a)}}function uV(t,e,r,n){var a=hN(t,e),i=Fr(a,2),o=i[0],s=i[1],u=vN(t,s,n),f=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),s===t.FLOAT?t.vertexAttribPointer(r,o,s,!1,0,0):s===t.INT&&t.vertexAttribIPointer(r,o,s,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),f}function ba(t,e,r,n){var a=hN(t,r),i=Fr(a,3),o=i[0],s=i[1],u=i[2],f=vN(t,s,e*o),c=o*u,h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),s===t.FLOAT?t.vertexAttribPointer(n,o,s,!1,c,0):s===t.INT&&t.vertexAttribIPointer(n,o,s,c,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var p=new Array(e),y=0;y<e;y++)p[y]=lV(t,s,f,c,o,y);return h.dataArray=f,h.stride=c,h.size=o,h.getView=function(g){return p[g]},h.setPoint=function(g,E,w){var v=p[g];v[0]=E,v[1]=w},h.bufferSubData=function(g){t.bindBuffer(t.ARRAY_BUFFER,h),g?t.bufferSubData(t.ARRAY_BUFFER,0,f,0,g*o):t.bufferSubData(t.ARRAY_BUFFER,0,f)},h}function fV(t,e,r){for(var n=9,a=new Float32Array(e*n),i=new Array(e),o=0;o<e;o++){var s=o*n*4;i[o]=new Float32Array(a.buffer,s,n)}var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,a.byteLength,t.DYNAMIC_DRAW);for(var f=0;f<3;f++){var c=r+f;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,3*12,f*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),u.getMatrixView=function(h){return i[h]},u.setData=function(h,p){i[p].set(h,0)},u.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferSubData(t.ARRAY_BUFFER,0,a)},u}function cV(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var uS=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Iv(){var t=new uS(9);return uS!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function fS(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function dV(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],p=r[0],y=r[1],g=r[2],E=r[3],w=r[4],v=r[5],C=r[6],x=r[7],S=r[8];return t[0]=p*n+y*o+g*f,t[1]=p*a+y*s+g*c,t[2]=p*i+y*u+g*h,t[3]=E*n+w*o+v*f,t[4]=E*a+w*s+v*c,t[5]=E*i+w*u+v*h,t[6]=C*n+x*o+S*f,t[7]=C*a+x*s+S*c,t[8]=C*i+x*u+S*h,t}function Rf(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],p=r[0],y=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=p*n+y*o+f,t[7]=p*a+y*s+c,t[8]=p*i+y*u+h,t}function cS(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],p=Math.sin(r),y=Math.cos(r);return t[0]=y*n+p*o,t[1]=y*a+p*s,t[2]=y*i+p*u,t[3]=y*o-p*n,t[4]=y*s-p*a,t[5]=y*u-p*i,t[6]=f,t[7]=c,t[8]=h,t}function Kb(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function hV(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var vV=function(){function t(e,r,n,a){Ii(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,r,r),this.scratch=a(e,r,this.texHeight,"scratch")}return Fi(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,a=r.h,i=this.texHeight,o=this.texSize,s=i/a,u=n*s,f=a*s;return u>o&&(s=o/n,u=n*s,f=a*s),{scale:s,texW:u,texH:f}}},{key:"draw",value:function(r,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,s=this.texRows,u=this.texHeight,f=this.getScale(n),c=f.scale,h=f.texW,p=f.texH,y=function(x,S){if(a&&S){var A=S.context,D=x.x,_=x.row,M=D,k=u*_;A.save(),A.translate(M,k),A.scale(c,c),a(A,n),A.restore()}},g=[null,null],E=function(){y(i.freePointer,i.canvas),g[0]={x:i.freePointer.x,y:i.freePointer.row*u,w:h,h:p},g[1]={x:i.freePointer.x+h,y:i.freePointer.row*u,w:0,h:p},i.freePointer.x+=h,i.freePointer.x==o&&(i.freePointer.x=0,i.freePointer.row++)},w=function(){var x=i.scratch,S=i.canvas;x.clear(),y({x:0,row:0},x);var A=o-i.freePointer.x,D=h-A,_=u;{var M=i.freePointer.x,k=i.freePointer.row*u,F=A;S.context.drawImage(x,0,0,F,_,M,k,F,_),g[0]={x:M,y:k,w:F,h:p}}{var G=A,B=(i.freePointer.row+1)*u,q=D;S&&S.context.drawImage(x,G,0,q,_,0,B,q,_),g[1]={x:0,y:B,w:q,h:p}}i.freePointer.x=D,i.freePointer.row++},v=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+h<=o)E();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===o?(v(),E()):this.enableWrapping?w():(v(),E())}return this.keyToLocation.set(r,g),this.needsBuffer=!0,g}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(r),o=i.texW;return this.freePointer.x+o>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=sV(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),pV=function(){function t(e,r,n,a){Ii(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Fi(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new vV(r,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,o=Math.floor(n/a);this.scratch=i(r,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,a){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,n,a),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,o=null,s=Pn(this.atlases),u;try{var f=function(){var h=u.value,p=h.getKeys(),y=gV(n,p);if(y.size===0)return a.push(h),p.forEach(function(A){return i.set(A,h)}),1;o||(o=r._createAtlas(),a.push(o));var g=Pn(p),E;try{for(g.s();!(E=g.n()).done;){var w=E.value;if(!y.has(w)){var v=h.getOffsets(w),C=Fr(v,2),x=C[0],S=C[1];o.canFit({w:x.w+S.w,h:x.h})||(o.lock(),o=r._createAtlas(),a.push(o)),h.canvas&&(r._copyTextureToNewAtlas(w,h,o),i.set(w,o))}}}catch(A){g.e(A)}finally{g.f()}h.dispose()};for(s.s();!(u=s.n()).done;)f()}catch(c){s.e(c)}finally{s.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,a){var i=n.getOffsets(r),o=Fr(i,2),s=o[0],u=o[1];if(u.w===0)a.draw(r,s,function(p){p.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var f=this._getScratchCanvas();f.clear(),f.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),f.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,h=s.h;a.draw(r,{w:c,h},function(p){p.drawImage(f,0,0,c,h,0,0,c,h)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function gV(t,e){return t.intersection?t.intersection(e):new Set(Xf(t).filter(function(r){return e.has(r)}))}var yV=function(){function t(e,r){Ii(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Fi(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var a=this.globalOptions,i=a.webglTexSize,o=a.createTextureCanvas,s=n.texRows,u=this._cacheScratchCanvas(o),f=new pV(this.r,i,s,u);this.collections.set(r,f)}},{key:"addRenderType",value:function(r,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),o=xt({type:r,atlasCollection:i},n);this.renderTypes.set(r,o)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,a=-1,i=null;return function(o,s,u,f){return f?((!i||s!=n||u!=a)&&(n=s,a=u,i=r(o,s,u)),i):r(o,s,u)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,o=i===void 0?!1:i,s=a.filterEle,u=s===void 0?function(){return!0}:s,f=a.filterType,c=f===void 0?function(){return!0}:f,h=!1,p=!1,y=Pn(r),g;try{for(y.s();!(g=y.n()).done;){var E=g.value;if(u(E)){var w=Pn(this.renderTypes.values()),v;try{var C=function(){var S=v.value,A=S.type;if(c(A)){var D=n.collections.get(S.collection),_=S.getKey(E),M=Array.isArray(_)?_:[_];if(o)M.forEach(function(B){return D.markKeyForGC(B)}),p=!0;else{var k=S.getID?S.getID(E):E.id(),F=n._key(A,k),G=n.typeAndIdToKey.get(F);G!==void 0&&!iV(M,G)&&(h=!0,n.typeAndIdToKey.delete(F),G.forEach(function(B){return D.markKeyForGC(B)}))}}};for(w.s();!(v=w.n()).done;)C()}catch(x){w.e(x)}finally{w.f()}}}}catch(x){y.e(x)}finally{y.f()}return p&&(this.gc(),h=!1),h}},{key:"gc",value:function(){var r=Pn(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;a.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,a,i){var o=this.renderTypes.get(n),s=this.collections.get(o.collection),u=!1,f=s.draw(i,a,function(p){o.drawClipped?(p.save(),p.beginPath(),p.rect(0,0,a.w,a.h),p.clip(),o.drawElement(p,r,a,!0,!0),p.restore()):o.drawElement(p,r,a,!0,!0),u=!0});if(u){var c=o.getID?o.getID(r):r.id(),h=this._key(n,c);this.typeAndIdToKey.has(h)?this.typeAndIdToKey.get(h).push(i):this.typeAndIdToKey.set(h,[i])}return f}},{key:"getAtlasInfo",value:function(r,n){var a=this,i=this.renderTypes.get(n),o=i.getKey(r),s=Array.isArray(o)?o:[o];return s.map(function(u){var f=i.getBoundingBox(r,u),c=a.getOrCreateAtlas(r,n,f,u),h=c.getOffsets(u),p=Fr(h,2),y=p[0],g=p[1];return{atlas:c,tex:y,tex1:y,tex2:g,bb:f}})}},{key:"getDebugInfo",value:function(){var r=[],n=Pn(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=Fr(a.value,2),o=i[0],s=i[1],u=s.getCounts(),f=u.keyCount,c=u.atlasCount;r.push({type:o,keyCount:f,atlasCount:c})}}catch(h){n.e(h)}finally{n.f()}return r}}])}(),mV=function(){function t(e){Ii(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Fi(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])}(),bV=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,wV=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,xV=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,CV=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Il={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},oc={IGNORE:1,USE_BB:2},Fv=0,dS=1,hS=2,Bv=3,is=4,pf=5,ml=6,bl=7,EV=function(){function t(e,r,n){Ii(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=tV,this.atlasManager=new yV(e,n),this.batchManager=new mV(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Il.SCREEN),this.pickingProgram=this._createShaderProgram(Il.PICKING),this.vao=this._createVAO()}return Fi(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(r,{filterType:function(s){return s===a},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Fv,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(is," || aVertType == ").concat(bl,` 
             || aVertType == `).concat(pf," || aVertType == ").concat(ml,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(dS,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(hS,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(Bv,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(f){return"uniform sampler2D uTexture".concat(f,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(bV,`
      `).concat(wV,`
      `).concat(xV,`
      `).concat(CV,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Fv,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(f){return"if(vAtlasId == ".concat(f,") outColor = texture(uTexture").concat(f,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(Bv,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(is,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(is," || vVertType == ").concat(bl,` 
          || vVertType == `).concat(pf," || vVertType == ").concat(ml,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(is,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(bl,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(bl,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=eV(n,a,o);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.aCornerRadius=n.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=n.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uZoom=n.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,a=this.gl,i=this.program,o=a.createVertexArray();return a.bindVertexArray(o),uV(a,"vec2",i.aPosition,r),this.transformBuffer=fV(a,n,i.aTransform),this.indexBuffer=ba(a,n,"vec4",i.aIndex),this.vertTypeBuffer=ba(a,n,"int",i.aVertType),this.atlasIdBuffer=ba(a,n,"int",i.aAtlasId),this.texBuffer=ba(a,n,"vec4",i.aTex),this.pointAPointBBuffer=ba(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=ba(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=ba(a,n,"vec2",i.aLineWidth),this.colorBuffer=ba(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=ba(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=ba(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),o}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Il.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,a){var i=this.atlasManager,o=this.batchManager,s=i.getRenderTypeOpts(a);if(this._isVisible(r,s)){if(this.renderTarget.picking&&s.getTexPickingMode){var u=s.getTexPickingMode(r);if(u===oc.IGNORE)return;if(u==oc.USE_BB){this.drawPickingRectangle(r,n,a);return}}var f=i.getAtlasInfo(r,a),c=Pn(f),h;try{for(c.s();!(h=c.n()).done;){var p=h.value,y=p.atlas,g=p.tex1,E=p.tex2;o.canAddToCurrentBatch(y)||this.endBatch();for(var w=o.getAtlasIndexForBatch(y),v=0,C=[[g,!0],[E,!1]];v<C.length;v++){var x=Fr(C[v],2),S=x[0],A=x[1];if(S.w!=0){var D=this.instanceCount;this.vertTypeBuffer.getView(D)[0]=Fv;var _=this.indexBuffer.getView(D);as(n,_);var M=this.atlasIdBuffer.getView(D);M[0]=w;var k=this.texBuffer.getView(D);k[0]=S.x,k[1]=S.y,k[2]=S.w,k[3]=S.h;var F=this.transformBuffer.getMatrixView(D);this.setTransformMatrix(r,F,s,p,A),this.instanceCount++,A||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(G){c.e(G)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(r,n,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(a.shapeProps&&a.shapeProps.padding&&(s=r.pstyle(a.shapeProps.padding).pfValue),i){var u=i.bb,f=i.tex1,c=i.tex2,h=f.w/(f.w+c.w);o||(h=1-h);var p=this._getAdjustedBB(u,s,o,h);this._applyTransformMatrix(n,p,a,r)}else{var y=a.getBoundingBox(r),g=this._getAdjustedBB(y,s,!0,1);this._applyTransformMatrix(n,g,a,r)}}},{key:"_applyTransformMatrix",value:function(r,n,a,i){var o,s;fS(r);var u=a.getRotation?a.getRotation(i):0;if(u!==0){var f=a.getRotationPoint(i),c=f.x,h=f.y;Rf(r,r,[c,h]),cS(r,r,u);var p=a.getRotationOffset(i);o=p.x+(n.xOffset||0),s=p.y+(n.yOffset||0)}else o=n.x1,s=n.y1;Rf(r,r,[o,s]),Kb(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,a,i){var o=r.x1,s=r.y1,u=r.w,f=r.h,c=r.yOffset;n&&(o-=n,s-=n,u+=2*n,f+=2*n);var h=0,p=u*i;return a&&i<1?u=p:!a&&i<1&&(h=u-p,o+=h,u=p),{x1:o,y1:s,w:u,h:f,xOffset:h,yOffset:c}}},{key:"drawPickingRectangle",value:function(r,n,a){var i=this.atlasManager.getRenderTypeOpts(a),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=is;var s=this.indexBuffer.getView(o);as(n,s);var u=this.colorBuffer.getView(o);ao([0,0,0],1,u);var f=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(r,f,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(r,i)){var o=i.shapeProps,s=this._getVertTypeForShape(r,o.shape);if(s===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,n,a);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=s,s===pf||s===ml){var f=i.getBoundingBox(r),c=this._getCornerRadius(r,o.radius,f),h=this.cornerRadiusBuffer.getView(u);h[0]=c,h[1]=c,h[2]=c,h[3]=c,s===ml&&(h[0]=0,h[2]=0)}var p=this.indexBuffer.getView(u);as(n,p);var y=r.pstyle(o.color).value,g=r.pstyle(o.opacity).value,E=this.colorBuffer.getView(u);ao(y,g,E);var w=this.lineWidthBuffer.getView(u);if(w[0]=0,w[1]=0,o.border){var v=r.pstyle("border-width").value;if(v>0){var C=r.pstyle("border-color").value,x=r.pstyle("border-opacity").value,S=this.borderColorBuffer.getView(u);ao(C,x,S);var A=r.pstyle("border-position").value;if(A==="inside")w[0]=0,w[1]=-v;else if(A==="outside")w[0]=v,w[1]=0;else{var D=v/2;w[0]=D,w[1]=-D}}}var _=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,_,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var a=r.pstyle(n).value;switch(a){case"rectangle":return is;case"ellipse":return bl;case"roundrectangle":case"round-rectangle":return pf;case"bottom-round-rectangle":return ml;default:return}}},{key:"_getCornerRadius",value:function(r,n,a){var i=a.w,o=a.h;if(r.pstyle(n).value==="auto")return Mi(i,o);var s=r.pstyle(n).pfValue,u=i/2,f=o/2;return Math.min(s,f,u)}},{key:"drawEdgeArrow",value:function(r,n,a){if(r.visible()){var i=r._private.rscratch,o,s,u;if(a==="source"?(o=i.arrowStartX,s=i.arrowStartY,u=i.srcArrowAngle):(o=i.arrowEndX,s=i.arrowEndY,u=i.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(s)||s==null||isNaN(u)||u==null)){var f=r.pstyle(a+"-arrow-shape").value;if(f!=="none"){var c=r.pstyle(a+"-arrow-color").value,h=r.pstyle("opacity").value,p=r.pstyle("line-opacity").value,y=h*p,g=r.pstyle("width").pfValue,E=r.pstyle("arrow-scale").value,w=this.r.getArrowWidth(g,E),v=this.instanceCount,C=this.transformBuffer.getMatrixView(v);fS(C),Rf(C,C,[o,s]),Kb(C,C,[w,w]),cS(C,C,u),this.vertTypeBuffer.getView(v)[0]=Bv;var x=this.indexBuffer.getView(v);as(n,x);var S=this.colorBuffer.getView(v);ao(c,y,S),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var a=this._getEdgePoints(r);if(a){var i=r.pstyle("opacity").value,o=r.pstyle("line-opacity").value,s=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,f=i*o;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=dS;var h=this.indexBuffer.getView(c);as(n,h);var p=this.colorBuffer.getView(c);ao(u,f,p);var y=this.lineWidthBuffer.getView(c);y[0]=s;var g=this.pointAPointBBuffer.getView(c);g[0]=a[0],g[1]=a[1],g[2]=a[2],g[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var E=0;E<a.length-2;E+=2){var w=this.instanceCount;this.vertTypeBuffer.getView(w)[0]=hS;var v=this.indexBuffer.getView(w);as(n,v);var C=this.colorBuffer.getView(w);ao(u,f,C);var x=this.lineWidthBuffer.getView(w);x[0]=s;var S=a[E-2],A=a[E-1],D=a[E],_=a[E+1],M=a[E+2],k=a[E+3],F=a[E+4],G=a[E+5];E==0&&(S=2*D-M+.001,A=2*_-k+.001),E==a.length-4&&(F=2*M-D+.001,G=2*k-_+.001);var B=this.pointAPointBBuffer.getView(w);B[0]=S,B[1]=A,B[2]=D,B[3]=_;var q=this.pointCPointDBuffer.getView(w);q[0]=M,q[1]=k,q[2]=F,q[3]=G,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=r[0],a[1]=r[1];else if(i==n)a[i*2]=r[r.length-2],a[i*2+1]=r[r.length-1];else{var o=i/n;this._setCurvePoint(r,o,a,i*2)}return a}},{key:"_setCurvePoint",value:function(r,n,a,i){if(r.length<=2)a[i]=r[0],a[i+1]=r[1];else{for(var o=Array(r.length-2),s=0;s<o.length;s+=2){var u=(1-n)*r[s]+n*r[s+2],f=(1-n)*r[s+1]+n*r[s+3];o[s]=u,o[s+1]=f}return this._setCurvePoint(o,n,a,i)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(o),r.bindVertexArray(n);var s=Pn(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var f=u.value;f.bufferSubData(i)}}catch(g){s.e(g)}finally{s.f()}for(var c=this.batchManager.getAtlases(),h=0;h<c.length;h++)c[h].bufferIfNeeded(r);for(var p=0;p<c.length;p++)r.activeTexture(r.TEXTURE0+p),r.bindTexture(r.TEXTURE_2D,c[p].texture),r.uniform1i(o.uTextures[p],p);r.uniform1f(o.uZoom,rV(this.r)),r.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var y=ao(this.bgColor,1);r.uniform4fv(o.uBGColor,y),r.drawArraysInstanced(r.TRIANGLES,0,a,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(o,s){return o+s.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(o,s){return o+s.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])}(),pN={};pN.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=TV(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=cV(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new EV(r,n,t);var a=function(h){return function(p){return r.getTextAngle(p,h)}},i=function(h){return function(p){var y=p.pstyle(h);return y&&y.value}},o=function(h){return function(p){return p.pstyle("".concat(h,"-opacity")).value>0}},s=function(h){var p=h.pstyle("text-events").strValue==="yes";return p?oc.USE_BB:oc.IGNORE},u=function(h){var p=h.position(),y=p.x,g=p.y,E=h.outerWidth(),w=h.outerHeight();return{w:E,h:w,x1:y-E/2,y1:g-w/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:aV,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:qv(e.getLabelKey,null),getBoundingBox:zv(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:qv(e.getSourceLabelKey,"source"),getBoundingBox:zv(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:qv(e.getTargetLabelKey,"target"),getBoundingBox:zv(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var f=fu(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(c,h){var p=!1;h&&h.length>0&&(p|=r.drawing.invalidate(h)),p&&f()}),SV(r)};function TV(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return WP(r)}function gN(t,e){var r=t._private.rscratch;return Mn(r,"labelWrapCachedLines",e)||[]}var qv=function(e,r){return function(n){var a=e(n),i=gN(n,r);return i.length>1?i.map(function(o,s){return"".concat(a,"_").concat(s)}):a}},zv=function(e,r){return function(n,a){var i=e(n);if(typeof a=="string"){var o=a.indexOf("_");if(o>0){var s=Number(a.substring(o+1)),u=gN(n,r),f=i.h/u.length,c=f*s,h=i.y1+c;return{x1:i.x1,w:i.w,y1:h,h:f,yOffset:c}}}return i}};function SV(t){{var e=t.render;t.render=function(i){i=i||{};var o=t.cy;t.webgl&&(o.zoom()>lN?(AV(t),e.call(t,i)):(LV(t),mN(t,i,Il.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,o,s,u){return kV(t,i,o)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var a=t.notify;t.notify=function(i,o){a.call(t,i,o),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(o,{type:"node-body"})}}}function AV(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function LV(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function DV(t){var e=t.canvasWidth,r=t.canvasHeight,n=G1(t),a=n.pan,i=n.zoom,o=Iv();Rf(o,o,[a.x,a.y]),Kb(o,o,[i,i]);var s=Iv();hV(s,e,r);var u=Iv();return dV(u,s,o),u}function yN(t,e){var r=t.canvasWidth,n=t.canvasHeight,a=G1(t),i=a.pan,o=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(i.x,i.y),e.scale(o,o)}function _V(t,e){t.drawSelectionRectangle(e,function(r){return yN(t,r)})}function MV(t){var e=t.data.contexts[t.NODE];e.save(),yN(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function RV(t){var e=function(a,i,o){for(var s=a.atlasManager.getAtlasCollection(i),u=t.data.contexts[t.NODE],f=s.atlases,c=0;c<f.length;c++){var h=f[c],p=h.canvas;if(p){var y=p.width,g=p.height,E=y*c,w=p.height*o,v=.4;u.save(),u.scale(v,v),u.drawImage(p,E,w),u.strokeStyle="black",u.rect(E,w,y,g),u.stroke(),u.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function PV(t,e,r,n,a){var i,o,s,u,f=G1(t),c=f.pan,h=f.zoom;{var p=nV(t,c,h,e,r),y=Fr(p,2),g=y[0],E=y[1],w=6;i=g-w/2,o=E-w/2,s=w,u=w}if(s===0||u===0)return[];var v=t.data.contexts[t.WEBGL];v.bindFramebuffer(v.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(v.viewport(0,0,v.canvas.width,v.canvas.height),mN(t,null,Il.PICKING),t.pickingFrameBuffer.needsDraw=!1);var C=s*u,x=new Uint8Array(C*4);v.readPixels(i,o,s,u,v.RGBA,v.UNSIGNED_BYTE,x),v.bindFramebuffer(v.FRAMEBUFFER,null);for(var S=new Set,A=0;A<C;A++){var D=x.slice(A*4,A*4+4),_=oV(D)-1;_>=0&&S.add(_)}return S}function kV(t,e,r){var n=PV(t,e,r),a=t.getCachedZSortedEles(),i,o,s=Pn(n),u;try{for(s.s();!(u=s.n()).done;){var f=u.value,c=a[f];if(!i&&c.isNode()&&(i=c),!o&&c.isEdge()&&(o=c),i&&o)break}}catch(h){s.e(h)}finally{s.f()}return[i,o].filter(Boolean)}function Gv(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function mN(t,e,r){var n;t.webglDebug&&(n=performance.now());var a=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&_V(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var o=t.data.contexts[t.WEBGL];r.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var s=DV(t),u=t.getCachedZSortedEles();if(i=u.length,a.startFrame(s,r),r.screen){for(var f=0;f<u.nondrag.length;f++)Gv(t,f,u.nondrag[f]);for(var c=0;c<u.drag.length;c++)Gv(t,c,u.drag[c])}else if(r.picking)for(var h=0;h<u.length;h++)Gv(t,h,u[h]);a.endFrame(),r.screen&&t.webglDebugShowAtlases&&(MV(t),RV(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var p=performance.now(),y=!1,g=Math.ceil(p-n),E=a.getDebugInfo(),w=["".concat(i," elements"),"".concat(E.totalInstances," instances"),"".concat(E.batchCount," batches"),"".concat(E.totalAtlases," atlases"),"".concat(E.wrappedCount," wrapped textures"),"".concat(E.simpleCount," simple shapes")].join(", ");if(y)console.log("WebGL (".concat(r.name,") - time ").concat(g,"ms, ").concat(w));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(g,"ms")),console.log("Totals:"),console.log("  ".concat(w)),console.log("Texture Atlases Used:");var v=E.atlasInfo,C=Pn(v),x;try{for(C.s();!(x=C.n()).done;){var S=x.value;console.log("  ".concat(S.type,": ").concat(S.keyCount," keys, ").concat(S.atlasCount," atlases"))}}catch(A){C.e(A)}finally{C.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc())}var zi={};zi.drawPolygonPath=function(t,e,r,n,a,i){var o=n/2,s=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*i[0],r+s*i[1]);for(var u=1;u<i.length/2;u++)t.lineTo(e+o*i[u*2],r+s*i[u*2+1]);t.closePath()};zi.drawRoundPolygonPath=function(t,e,r,n,a,i,o){o.forEach(function(s){return Jk(t,s)}),t.closePath()};zi.drawRoundRectanglePath=function(t,e,r,n,a,i){var o=n/2,s=a/2,u=i==="auto"?Mi(n,a):Math.min(i,s,o);t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.arcTo(e+o,r-s,e+o,r,u),t.arcTo(e+o,r+s,e,r+s,u),t.arcTo(e-o,r+s,e-o,r,u),t.arcTo(e-o,r-s,e,r-s,u),t.lineTo(e,r-s),t.closePath()};zi.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var o=n/2,s=a/2,u=i==="auto"?Mi(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.lineTo(e+o,r-s),t.lineTo(e+o,r),t.arcTo(e+o,r+s,e,r+s,u),t.arcTo(e-o,r+s,e-o,r,u),t.lineTo(e-o,r-s),t.lineTo(e,r-s),t.closePath()};zi.drawCutRectanglePath=function(t,e,r,n,a,i,o){var s=n/2,u=a/2,f=o==="auto"?L1():o;t.beginPath&&t.beginPath(),t.moveTo(e-s+f,r-u),t.lineTo(e+s-f,r-u),t.lineTo(e+s,r-u+f),t.lineTo(e+s,r+u-f),t.lineTo(e+s-f,r+u),t.lineTo(e-s+f,r+u),t.lineTo(e-s,r+u-f),t.lineTo(e-s,r-u+f),t.closePath()};zi.drawBarrelPath=function(t,e,r,n,a){var i=n/2,o=a/2,s=e-i,u=e+i,f=r-o,c=r+o,h=Ob(n,a),p=h.widthOffset,y=h.heightOffset,g=h.ctrlPtOffsetPct*p;t.beginPath&&t.beginPath(),t.moveTo(s,f+y),t.lineTo(s,c-y),t.quadraticCurveTo(s+g,c,s+p,c),t.lineTo(u-p,c),t.quadraticCurveTo(u-g,c,u,c-y),t.lineTo(u,f+y),t.quadraticCurveTo(u-g,f,u-p,f),t.lineTo(s+p,f),t.quadraticCurveTo(s+g,f,s,f+y),t.closePath()};var vS=Math.sin(0),pS=Math.cos(0),jb={},Zb={},bN=Math.PI/40;for(var os=0*Math.PI;os<2*Math.PI;os+=bN)jb[os]=Math.sin(os),Zb[os]=Math.cos(os);zi.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,u=a/2,f=0*Math.PI;f<2*Math.PI;f+=bN)i=e-s*jb[f]*vS+s*Zb[f]*pS,o=r+u*Zb[f]*vS+u*jb[f]*pS,f===0?t.moveTo(i,o):t.lineTo(i,o);t.closePath()};var gu={};gu.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};gu.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],o=t.full?Math.ceil(n.h):a[3],s=at(t.maxWidth)||at(t.maxHeight),u=this.getPixelRatio(),f=1;if(t.scale!==void 0)i*=t.scale,o*=t.scale,f=t.scale;else if(s){var c=1/0,h=1/0;at(t.maxWidth)&&(c=f*t.maxWidth/i),at(t.maxHeight)&&(h=f*t.maxHeight/o),f=Math.min(c,h),i*=f,o*=f}s||(i*=u,o*=u,f*=u);var p=document.createElement("canvas");p.width=i,p.height=o,p.style.width=i+"px",p.style.height=o+"px";var y=p.getContext("2d");if(i>0&&o>0){y.clearRect(0,0,i,o),y.globalCompositeOperation="source-over";var g=this.getCachedZSortedEles();if(t.full)y.translate(-n.x1*f,-n.y1*f),y.scale(f,f),this.drawElements(y,g),y.scale(1/f,1/f),y.translate(n.x1*f,n.y1*f);else{var E=e.pan(),w={x:E.x*f,y:E.y*f};f*=e.zoom(),y.translate(w.x,w.y),y.scale(f,f),this.drawElements(y,g),y.scale(1/f,1/f),y.translate(-w.x,-w.y)}t.bg&&(y.globalCompositeOperation="destination-over",y.fillStyle=t.bg,y.rect(0,0,i,o),y.fill())}return p};function NV(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function gS(t){var e=t.indexOf(",");return t.substr(e+1)}function wN(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new Ls(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(o){i(o)}});case"blob":return NV(gS(n()),r);case"base64":return gS(n());case"base64uri":default:return n()}}gu.png=function(t){return wN(t,this.bufferCanvasImage(t),"image/png")};gu.jpg=function(t){return wN(t,this.bufferCanvasImage(t),"image/jpeg")};var xN={};xN.nodeShapeImpl=function(t,e,r,n,a,i,o,s){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,s);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var OV=CN,Dt=CN.prototype;Dt.CANVAS_LAYERS=3;Dt.SELECT_BOX=0;Dt.DRAG=1;Dt.NODE=2;Dt.WEBGL=3;Dt.CANVAS_TYPES=["2d","2d","2d","webgl2"];Dt.BUFFER_COUNT=3;Dt.TEXTURE_BUFFER=0;Dt.MOTIONBLUR_BUFFER_NODE=1;Dt.MOTIONBLUR_BUFFER_DRAG=2;function CN(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(Dt.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Dt.CANVAS_LAYERS),contexts:new Array(Dt.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Dt.CANVAS_LAYERS),bufferCanvases:new Array(Dt.BUFFER_COUNT),bufferContexts:new Array(Dt.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),s.style[a]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};kq()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var f=0;f<Dt.CANVAS_LAYERS;f++){var c=e.data.canvases[f]=n.createElement("canvas"),h=Dt.CANVAS_TYPES[f];e.data.contexts[f]=c.getContext(h),e.data.contexts[f]||pr("Could not create canvas of type "+h),Object.keys(u).forEach(function(te){c.style[te]=u[te]}),c.style.position="absolute",c.setAttribute("data-id","layer"+f),c.style.zIndex=String(Dt.CANVAS_LAYERS-f),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[f]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Dt.NODE].setAttribute("data-id","layer"+Dt.NODE+"-node"),e.data.canvases[Dt.SELECT_BOX].setAttribute("data-id","layer"+Dt.SELECT_BOX+"-selectbox"),e.data.canvases[Dt.DRAG].setAttribute("data-id","layer"+Dt.DRAG+"-drag"),e.data.canvases[Dt.WEBGL]&&e.data.canvases[Dt.WEBGL].setAttribute("data-id","layer"+Dt.WEBGL+"-webgl");for(var f=0;f<Dt.BUFFER_COUNT;f++)e.data.bufferCanvases[f]=n.createElement("canvas"),e.data.bufferContexts[f]=e.data.bufferCanvases[f].getContext("2d"),e.data.bufferCanvases[f].style.position="absolute",e.data.bufferCanvases[f].setAttribute("data-id","buffer"+f),e.data.bufferCanvases[f].style.zIndex=String(-f-1),e.data.bufferCanvases[f].style.visibility="hidden";e.pathsEnabled=!0;var p=Nn(),y=function(ie){return{x:(ie.x1+ie.x2)/2,y:(ie.y1+ie.y2)/2}},g=function(ie){return{x:-ie.w/2,y:-ie.h/2}},E=function(ie){var se=ie[0]._private,$=se.oldBackgroundTimestamp===se.backgroundTimestamp;return!$},w=function(ie){return ie[0]._private.nodeKey},v=function(ie){return ie[0]._private.labelStyleKey},C=function(ie){return ie[0]._private.sourceLabelStyleKey},x=function(ie){return ie[0]._private.targetLabelStyleKey},S=function(ie,se,$,ne,le){return e.drawElement(ie,se,$,!1,!1,le)},A=function(ie,se,$,ne,le){return e.drawElementText(ie,se,$,ne,"main",le)},D=function(ie,se,$,ne,le){return e.drawElementText(ie,se,$,ne,"source",le)},_=function(ie,se,$,ne,le){return e.drawElementText(ie,se,$,ne,"target",le)},M=function(ie){return ie.boundingBox(),ie[0]._private.bodyBounds},k=function(ie){return ie.boundingBox(),ie[0]._private.labelBounds.main||p},F=function(ie){return ie.boundingBox(),ie[0]._private.labelBounds.source||p},G=function(ie){return ie.boundingBox(),ie[0]._private.labelBounds.target||p},B=function(ie,se){return se},q=function(ie){return y(M(ie))},R=function(ie,se,$){var ne=ie?ie+"-":"";return{x:se.x+$.pstyle(ne+"text-margin-x").pfValue,y:se.y+$.pstyle(ne+"text-margin-y").pfValue}},P=function(ie,se,$){var ne=ie[0]._private.rscratch;return{x:ne[se],y:ne[$]}},N=function(ie){return R("",P(ie,"labelX","labelY"),ie)},I=function(ie){return R("source",P(ie,"sourceLabelX","sourceLabelY"),ie)},z=function(ie){return R("target",P(ie,"targetLabelX","targetLabelY"),ie)},ae=function(ie){return g(M(ie))},re=function(ie){return g(F(ie))},K=function(ie){return g(G(ie))},V=function(ie){var se=k(ie),$=g(k(ie));if(ie.isNode()){switch(ie.pstyle("text-halign").value){case"left":$.x=-se.w-(se.leftPad||0);break;case"right":$.x=-(se.rightPad||0);break}switch(ie.pstyle("text-valign").value){case"top":$.y=-se.h-(se.topPad||0);break;case"bottom":$.y=-(se.botPad||0);break}}return $},Z=e.data.eleTxrCache=new El(e,{getKey:w,doesEleInvalidateKey:E,drawElement:S,getBoundingBox:M,getRotationPoint:q,getRotationOffset:ae,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),U=e.data.lblTxrCache=new El(e,{getKey:v,drawElement:A,getBoundingBox:k,getRotationPoint:N,getRotationOffset:V,isVisible:B}),W=e.data.slbTxrCache=new El(e,{getKey:C,drawElement:D,getBoundingBox:F,getRotationPoint:I,getRotationOffset:re,isVisible:B}),Y=e.data.tlbTxrCache=new El(e,{getKey:x,drawElement:_,getBoundingBox:G,getRotationPoint:z,getRotationOffset:K,isVisible:B}),ee=e.data.lyrTxrCache=new uN(e);e.onUpdateEleCalcs(function(ie,se){Z.invalidateElements(se),U.invalidateElements(se),W.invalidateElements(se),Y.invalidateElements(se),ee.invalidateElements(se);for(var $=0;$<se.length;$++){var ne=se[$]._private;ne.oldBackgroundTimestamp=ne.backgroundTimestamp}});var oe=function(ie){for(var se=0;se<ie.length;se++)ee.enqueueElementRefinement(ie[se].ele)};Z.onDequeue(oe),U.onDequeue(oe),W.onDequeue(oe),Y.onDequeue(oe),t.webgl&&e.initWebgl(t,{getStyleKey:w,getLabelKey:v,getSourceLabelKey:C,getTargetLabelKey:x,drawElement:S,drawLabel:A,drawSourceLabel:D,drawTargetLabel:_,getElementBox:M,getLabelBox:k,getSourceLabelBox:F,getTargetLabelBox:G,getElementRotationPoint:q,getElementRotationOffset:ae,getLabelRotationPoint:N,getSourceLabelRotationPoint:I,getTargetLabelRotationPoint:z,getLabelRotationOffset:V,getSourceLabelRotationOffset:re,getTargetLabelRotationOffset:K})}Dt.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Dt.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Dt.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Dt.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var IV=typeof Path2D<"u";Dt.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Dt.usePaths=function(){return IV&&this.pathsEnabled};Dt.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Dt.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Dt.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":qr(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[fN,Ma,ti,z1,To,qi,An,pN,zi,gu,xN].forEach(function(t){xt(Dt,t)});var FV=[{name:"null",impl:jk},{name:"base",impl:oN},{name:"canvas",impl:OV}],BV=[{type:"layout",extensions:fU},{type:"renderer",extensions:FV}],EN={},TN={};function SN(t,e,r){var n=r,a=function(M){Yt("Can not register `"+e+"` for `"+t+"` since `"+M+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Jl.prototype[e])return a(e);Jl.prototype[e]=r}else if(t==="collection"){if(rn.prototype[e])return a(e);rn.prototype[e]=r}else if(t==="layout"){for(var i=function(M){this.options=M,r.call(this,M),It(this._private)||(this._private={}),this._private.cy=M.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(r.prototype),s=[],u=0;u<s.length;u++){var f=s[u];o[f]=o[f]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=r.prototype.stop;o.stop=function(){var _=this.options;if(_&&_.animate){var M=this.animations;if(M)for(var k=0;k<M.length;k++)M[k].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var h=function(M){return M._private.cy},p={addEventFields:function(M,k){k.layout=M,k.cy=h(M),k.target=M},bubble:function(){return!0},parent:function(M){return h(M)}};xt(o,{createEmitter:function(){return this._private.emitter=new Nc(p,this),this},emitter:function(){return this._private.emitter},on:function(M,k){return this.emitter().on(M,k),this},one:function(M,k){return this.emitter().one(M,k),this},once:function(M,k){return this.emitter().one(M,k),this},removeListener:function(M,k){return this.emitter().removeListener(M,k),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(M,k){return this.emitter().emit(M,k),this}}),$t.eventAliasesOn(o),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var y=AN("renderer","base"),g=y.prototype,E=r,w=r.prototype,v=function(){y.apply(this,arguments),E.apply(this,arguments)},C=v.prototype;for(var x in g){var S=g[x],A=w[x]!=null;if(A)return a(x);C[x]=S}for(var D in w)C[D]=w[D];g.clientFunctions.forEach(function(_){C[_]=C[_]||function(){pr("Renderer does not implement `renderer."+_+"()` on its prototype")}}),n=v}else if(t==="__proto__"||t==="constructor"||t==="prototype")return pr(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return $P({map:EN,keys:[t,e],value:n})}function AN(t,e){return YP({map:EN,keys:[t,e]})}function qV(t,e,r,n,a){return $P({map:TN,keys:[t,e,r,n],value:a})}function zV(t,e,r,n){return YP({map:TN,keys:[t,e,r,n]})}var Qb=function(){if(arguments.length===2)return AN.apply(null,arguments);if(arguments.length===3)return SN.apply(null,arguments);if(arguments.length===4)return zV.apply(null,arguments);if(arguments.length===5)return qV.apply(null,arguments);pr("Invalid extension access syntax")};Jl.prototype.extension=Qb;BV.forEach(function(t){t.extensions.forEach(function(e){SN(t.type,e.name,e.impl)})});var sc=function(){if(!(this instanceof sc))return new sc;this.length=0},Co=sc.prototype;Co.instanceString=function(){return"stylesheet"};Co.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Co.css=function(t,e){var r=this.length-1;if(mt(t))this[r].properties.push({name:t,value:e});else if(It(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(s!=null){var u=$r.properties[o]||$r.properties[Tc(o)];if(u!=null){var f=u.name,c=s;this[r].properties.push({name:f,value:c})}}}return this};Co.style=Co.css;Co.generateStyle=function(t){var e=new $r(t);return this.appendToStyle(e)};Co.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var o=a[i];t.css(o.name,o.value)}}return t};var GV="3.32.0",zn=function(e){if(e===void 0&&(e={}),It(e))return new Jl(e);if(mt(e))return Qb.apply(Qb,arguments)};zn.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(zn),t.apply(null,e),this};zn.warnings=function(t){return ek(t)};zn.version=GV;zn.stylesheet=zn.Stylesheet=sc;var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function So(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hv={exports:{}},yS={},mS;function HV(){return mS||(mS=1,Object.extend=function(t){t=t||{};for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var n in r)r.hasOwnProperty(n)&&(Array.isArray(r[n])?t[n]=r[n].slice():typeof r[n]=="object"?t[n]=Object.extend(t[n],r[n]):t[n]=r[n])}return t}),yS}var Uv,bS;function UV(){return bS||(bS=1,Uv=function(t,e,r){var n={};n.changeOptions=function(i){e=i.gridSpacing,r=i.snapToGridCenter?.5:0};var a=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};return n.snapPos=function(i){var o=r?Math.floor(i.x/e):Math.round(i.x/e),s=r?Math.floor(i.y/e):Math.round(i.y/e),u={x:(o+r)*e,y:(s+r)*e};return u},n.snapNode=function(i){var o=i.position(),s=n.snapPos(o);i.position(s)},n.snapNodesTopDown=function(i){t.startBatch(),i.union(i.descendants()).filter(":childless").positions(function(o,s){typeof o=="number"&&(o=s);var u=o.position();return n.snapPos(u)}),t.endBatch()},n.onFreeNode=function(i){var o,s=i.target||i.cyTarget;s.selected()?o=i.cy.$(":selected"):o=s,n.snapNodesTopDown(o)},n.recoverSnapNode=function(i){var o=a(i).snap;o&&i.position(o.oldPos)},n}),Uv}var Vv,wS;function VV(){return wS||(wS=1,Vv=function(t,e){var r={},n,a,i,o;r.onTapStartNode=function(c){if(!(c.originalEvent.altKey||c.originalEvent.ctrlKey||c.originalEvent.metaKey||c.originalEvent.shiftKey)){var h=c.target||c.cyTarget;h.selected()?a=c.cy.$(":selected"):a=h,i=c.position||c.cyPosition,h.grabbable()&&!h.locked()&&(n=h,n.lock(),t.on("tapdrag",f),t.on("tapend",s))}};var s=function(c){t.off("tapdrag",f),t.off("tapend",s),n.unlock(),c.preventDefault()},u=function(){return{x:o.x-i.x,y:o.y-i.y}},f=function(c){n.position(),o=c.position||c.cyPosition,o=e.snapPos(o);var h=u();if(h.x!=0||h.y!=0){n.unlock();var p=a.union(a.descendants());p.filter(":childless").positions(function(y,g){typeof y=="number"&&(y=g);var E=y.position();return e.snapPos({x:E.x+h.x,y:E.y+h.y})}),i=o,n.lock(),n.trigger("drag")}};return r}),Vv}var Wv,xS;function WV(){return xS||(xS=1,Wv=function(t,e,r){var n=t,a=function(y){n=y},i=function(y){var g=y.getBoundingClientRect();return{top:g.top+document.documentElement.scrollTop,left:g.left+document.documentElement.scrollLeft}},o=document.createElement("canvas"),s=e.container(),u=o.getContext("2d");s.appendChild(o);var f=function(){o.height=0,o.width=0,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder};f();var c=function(){var y=e.zoom(),g=e.width(),E=e.height(),w=n.gridSpacing*y,v=e.pan(),C=v.x%w,x=v.y%w;u.strokeStyle=n.gridColor,u.lineWidth=n.lineWidth;var S='	<svg width="'+g+'" height="'+E+`" xmlns="http://www.w3.org/2000/svg">
	            <defs>
	                <pattern id="horizontalLines" width="`+w+'" height="'+w+`" patternUnits="userSpaceOnUse">
	                    <path d="M `+w+' 0 L 0 0 0 0" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	                <pattern id="verticalLines" width="`+w+'" height="'+w+`" patternUnits="userSpaceOnUse">
	                    <path d="M 0 0 L 0 0 0 `+w+'" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	            </defs>
	            <rect width="100%" height="100%" fill="url(#horizontalLines)" transform="translate(0, `+x+`)" />
	            <rect width="100%" height="100%" fill="url(#verticalLines)" transform="translate(`+C+`, 0)" />
	        </svg>
`,A=new Image;S=encodeURIComponent(S),A.onload=function(){h(),u.drawImage(A,0,0)},A.src="data:image/svg+xml,"+S},h=function(){var y=e.width(),g=e.height();u.clearRect(0,0,y,g)},p=r(function(){o.height=e.height(),o.width=e.width(),o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder,setTimeout(function(){o.height=e.height(),o.width=e.width();var y=i(o),g=i(s);o.style.top=-(y.top-g.top),o.style.left=-(y.left-g.left),c()},0)},250);return{initCanvas:p,resizeCanvas:p,resetCanvas:f,clearCanvas:h,drawGrid:c,changeOptions:a,sizeCanvas:c}}),Wv}var $v,CS;function $V(){return CS||(CS=1,$v=function(t){var e=function(i){t=Number(i.gridSpacing)},r=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};function n(i){var o=i.width(),s=i.height(),u=Math.round((o-t)/(t*2))*(t*2),f=Math.round((s-t)/(t*2))*(t*2);u=u>0?u+t:t,f=f>0?f+t:t,(o!=u||s!=f)&&(i.style({width:u,height:f}),r(i).resize={oldWidth:o,oldHeight:s})}function a(i){var o=r(i).resize;o&&i.style({width:o.oldWidth,height:o.oldHeight})}return{resizeNode:n,recoverNodeDimensions:a,changeOptions:e}}),$v}var Yv,ES;function YV(){return ES||(ES=1,Yv=function(t,e,r,n,a,i,o,s){var u=function(U){return function(W){U(W)}},f={snapToGridDuringDrag:new u(g),resize:new u(v),snapToGridOnRelease:new u(A),drawGrid:new u(M),guidelines:new u(N),parentPadding:new u(ae)};function c(U,W){return function(Y){var ee=Y.target||Y.cyTarget;(!ee.is(":parent")||W)&&U(ee)}}function h(U){return function(){t.nodes().not(":parent").each(function(W,Y){typeof W=="number"&&(W=Y),U(W)})}}function p(U){return function(){t.nodes().each(function(W,Y){typeof W=="number"&&(W=Y),U(W)})}}function y(U){return U?"on":"off"}function g(U){t[y(U)]("tapstart","node",n.onTapStartNode)}var E=h(r.resizeNode);c(r.resizeNode);var w=h(r.recoverNodeDimensions);function v(U){t[y(U)]("ready",E),U?E():w()}var C=p(e.snapNodesTopDown),x=p(e.recoverSnapNode),S=c(e.snapNode,!0);function A(U){t[y(U)]("add","node",S),t[y(U)]("ready",C),t[y(U)]("free","node",e.onFreeNode),U?C():x()}var D=function(){K.zoomDash&&a.drawGrid()},_=function(){K.panGrid&&a.drawGrid()};function M(U){t[y(U)]("zoom",D),t[y(U)]("pan",_),U?(a.initCanvas(),t.on("resize",a.resizeCanvas)):(a.clearCanvas(),a.resetCanvas(),t.off("resize",a.resizeCanvas))}var k=null,F=function(U){var W=U.target||U.cyTarget,Y=W.selected()?U.cy.$(":selected"):W;k=i.getTopMostNodes(Y.nodes()),i.lines.init(k)},G=function(U){this.id()==k.id()&&(i.lines.update(k),K.snapToAlignmentLocationDuringDrag&&i.lines.snapToAlignmentLocation(k))},B=function(U){K.snapToAlignmentLocationOnRelease&&i.lines.snapToAlignmentLocation(k),i.lines.destroy(),k=null},q=function(U){i.lines.resize()},R=function(U){i.getMousePos(U)},P=function(U){k&&(i.setMousePos(t.pan()),i.lines.init(k))};function N(U){U?(i.resizeCanvas(),t.on("tapstart","node",R),t.on("grab",F),t.on("pan",P),t.on("drag","node",G),t.on("free",B),window.addEventListener("resize",q)):(t.off("tapstart","node",R),t.off("grab",F),t.off("pan",P),t.off("drag","node",G),t.off("free",B),i.resetCanvas(),window.removeEventListener("resize",q))}var I=function(U){o.setPaddingOfParent(t.nodes(":parent"),U)},z=function(U){o.setPaddingOfParent(U,!0)};function ae(U){I(U),t[y(U)]("ready",I),t[y(U)]("add","node:parent",c(z,!0))}var re={},K,V={drawGrid:["gridSpacing","zoomDash","panGrid","gridStackOrder","gridColor","lineWidth","lineDash"],guidelines:["gridSpacing","guidelinesStackOrder","guidelinesTolerance","guidelinesStyle","distributionGuidelines","range","minDistRange","geometricGuidelineRange"],resize:["gridSpacing"],parentPadding:["gridSpacing","parentSpacing"],snapToGridOnRelease:["gridSpacing","snapToGridCenter"]};function Z(U){K=Object.extend({},U),U.guidelines=U.initPosAlignment||U.distributionGuidelines||U.geometricGuideline;for(var W in U)if(re[W]!=U[W])if(f.hasOwnProperty(W))f[W](U[W]);else for(var Y in V){var ee=V[Y];ee.indexOf(W)>=0&&(Y=="drawGrid"&&(a.changeOptions(U),U.drawGrid&&a.resizeCanvas()),Y=="snapToGridOnRelease"&&(e.changeOptions(U),U.snapToGridOnRelease&&C()),Y=="guidelines"&&i.changeOptions(U),Y=="resize"&&(r.changeOptions(U),U.resize&&E()),Y=="parentPadding"&&o.changeOptions(U))}re=Object.extend({},re,U)}return{init:Z,syncWithOptions:Z}}),Yv}var Xv,TS;function XV(){if(TS)return Xv;TS=1,Xv=w;var t=0,e=1;function r(v,C,x,S,A,D){this._color=v,this.key=C,this.value=x,this.left=S,this.right=A,this._count=D}function n(v){return new r(v._color,v.key,v.value,v.left,v.right,v._count)}function a(v,C){return new r(v,C.key,C.value,C.left,C.right,C._count)}function i(v){v._count=1+(v.left?v.left._count:0)+(v.right?v.right._count:0)}function o(v,C){this._compare=v,this.root=C}var s=o.prototype;Object.defineProperty(s,"keys",{get:function(){var v=[];return this.forEach(function(C,x){v.push(C)}),v}}),Object.defineProperty(s,"values",{get:function(){var v=[];return this.forEach(function(C,x){v.push(x)}),v}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(v,C){for(var x=this._compare,S=this.root,A=[],D=[];S;){var _=x(v,S.key);A.push(S),D.push(_),_<=0?S=S.left:S=S.right}A.push(new r(t,v,C,null,null,1));for(var M=A.length-2;M>=0;--M){var S=A[M];D[M]<=0?A[M]=new r(S._color,S.key,S.value,A[M+1],S.right,S._count+1):A[M]=new r(S._color,S.key,S.value,S.left,A[M+1],S._count+1)}for(var M=A.length-1;M>1;--M){var k=A[M-1],S=A[M];if(k._color===e||S._color===e)break;var F=A[M-2];if(F.left===k)if(k.left===S){var G=F.right;if(G&&G._color===t)k._color=e,F.right=a(e,G),F._color=t,M-=1;else{if(F._color=t,F.left=k.right,k._color=e,k.right=F,A[M-2]=k,A[M-1]=S,i(F),i(k),M>=3){var B=A[M-3];B.left===F?B.left=k:B.right=k}break}}else{var G=F.right;if(G&&G._color===t)k._color=e,F.right=a(e,G),F._color=t,M-=1;else{if(k.right=S.left,F._color=t,F.left=S.right,S._color=e,S.left=k,S.right=F,A[M-2]=S,A[M-1]=k,i(F),i(k),i(S),M>=3){var B=A[M-3];B.left===F?B.left=S:B.right=S}break}}else if(k.right===S){var G=F.left;if(G&&G._color===t)k._color=e,F.left=a(e,G),F._color=t,M-=1;else{if(F._color=t,F.right=k.left,k._color=e,k.left=F,A[M-2]=k,A[M-1]=S,i(F),i(k),M>=3){var B=A[M-3];B.right===F?B.right=k:B.left=k}break}}else{var G=F.left;if(G&&G._color===t)k._color=e,F.left=a(e,G),F._color=t,M-=1;else{if(k.left=S.right,F._color=t,F.right=S.left,S._color=e,S.right=k,S.left=F,A[M-2]=S,A[M-1]=k,i(F),i(k),i(S),M>=3){var B=A[M-3];B.right===F?B.right=S:B.left=S}break}}}return A[0]._color=e,new o(x,A[0])};function u(v,C){if(C.left){var x=u(v,C.left);if(x)return x}var x=v(C.key,C.value);if(x)return x;if(C.right)return u(v,C.right)}function f(v,C,x,S){var A=C(v,S.key);if(A<=0){if(S.left){var D=f(v,C,x,S.left);if(D)return D}var D=x(S.key,S.value);if(D)return D}if(S.right)return f(v,C,x,S.right)}function c(v,C,x,S,A){var D=x(v,A.key),_=x(C,A.key),M;if(D<=0&&(A.left&&(M=c(v,C,x,S,A.left),M)||_>0&&(M=S(A.key,A.value),M)))return M;if(_>0&&A.right)return c(v,C,x,S,A.right)}s.forEach=function(C,x,S){if(this.root)switch(arguments.length){case 1:return u(C,this.root);case 2:return f(x,this._compare,C,this.root);case 3:return this._compare(x,S)>=0?void 0:c(x,S,this._compare,C,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var v=[],C=this.root;C;)v.push(C),C=C.left;return new h(this,v)}}),Object.defineProperty(s,"end",{get:function(){for(var v=[],C=this.root;C;)v.push(C),C=C.right;return new h(this,v)}}),s.at=function(v){if(v<0)return new h(this,[]);for(var C=this.root,x=[];;){if(x.push(C),C.left){if(v<C.left._count){C=C.left;continue}v-=C.left._count}if(!v)return new h(this,x);if(v-=1,C.right){if(v>=C.right._count)break;C=C.right}else break}return new h(this,[])},s.ge=function(v){for(var C=this._compare,x=this.root,S=[],A=0;x;){var D=C(v,x.key);S.push(x),D<=0&&(A=S.length),D<=0?x=x.left:x=x.right}return S.length=A,new h(this,S)},s.gt=function(v){for(var C=this._compare,x=this.root,S=[],A=0;x;){var D=C(v,x.key);S.push(x),D<0&&(A=S.length),D<0?x=x.left:x=x.right}return S.length=A,new h(this,S)},s.lt=function(v){for(var C=this._compare,x=this.root,S=[],A=0;x;){var D=C(v,x.key);S.push(x),D>0&&(A=S.length),D<=0?x=x.left:x=x.right}return S.length=A,new h(this,S)},s.le=function(v){for(var C=this._compare,x=this.root,S=[],A=0;x;){var D=C(v,x.key);S.push(x),D>=0&&(A=S.length),D<0?x=x.left:x=x.right}return S.length=A,new h(this,S)},s.find=function(v){for(var C=this._compare,x=this.root,S=[];x;){var A=C(v,x.key);if(S.push(x),A===0)return new h(this,S);A<=0?x=x.left:x=x.right}return new h(this,[])},s.remove=function(v){var C=this.find(v);return C?C.remove():this},s.get=function(v){for(var C=this._compare,x=this.root;x;){var S=C(v,x.key);if(S===0)return x.value;S<=0?x=x.left:x=x.right}};function h(v,C){this.tree=v,this._stack=C}var p=h.prototype;Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(p,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),p.clone=function(){return new h(this.tree,this._stack.slice())};function y(v,C){v.key=C.key,v.value=C.value,v.left=C.left,v.right=C.right,v._color=C._color,v._count=C._count}function g(v){for(var C,x,S,A,D=v.length-1;D>=0;--D){if(C=v[D],D===0){C._color=e;return}if(x=v[D-1],x.left===C){if(S=x.right,S.right&&S.right._color===t){if(S=x.right=n(S),A=S.right=n(S.right),x.right=S.left,S.left=x,S.right=A,S._color=x._color,C._color=e,x._color=e,A._color=e,i(x),i(S),D>1){var _=v[D-2];_.left===x?_.left=S:_.right=S}v[D-1]=S;return}else if(S.left&&S.left._color===t){if(S=x.right=n(S),A=S.left=n(S.left),x.right=A.left,S.left=A.right,A.left=x,A.right=S,A._color=x._color,x._color=e,S._color=e,C._color=e,i(x),i(S),i(A),D>1){var _=v[D-2];_.left===x?_.left=A:_.right=A}v[D-1]=A;return}if(S._color===e)if(x._color===t){x._color=e,x.right=a(t,S);return}else{x.right=a(t,S);continue}else{if(S=n(S),x.right=S.left,S.left=x,S._color=x._color,x._color=t,i(x),i(S),D>1){var _=v[D-2];_.left===x?_.left=S:_.right=S}v[D-1]=S,v[D]=x,D+1<v.length?v[D+1]=C:v.push(C),D=D+2}}else{if(S=x.left,S.left&&S.left._color===t){if(S=x.left=n(S),A=S.left=n(S.left),x.left=S.right,S.right=x,S.left=A,S._color=x._color,C._color=e,x._color=e,A._color=e,i(x),i(S),D>1){var _=v[D-2];_.right===x?_.right=S:_.left=S}v[D-1]=S;return}else if(S.right&&S.right._color===t){if(S=x.left=n(S),A=S.right=n(S.right),x.left=A.right,S.right=A.left,A.right=x,A.left=S,A._color=x._color,x._color=e,S._color=e,C._color=e,i(x),i(S),i(A),D>1){var _=v[D-2];_.right===x?_.right=A:_.left=A}v[D-1]=A;return}if(S._color===e)if(x._color===t){x._color=e,x.left=a(t,S);return}else{x.left=a(t,S);continue}else{if(S=n(S),x.left=S.right,S.right=x,S._color=x._color,x._color=t,i(x),i(S),D>1){var _=v[D-2];_.right===x?_.right=S:_.left=S}v[D-1]=S,v[D]=x,D+1<v.length?v[D+1]=C:v.push(C),D=D+2}}}}p.remove=function(){var v=this._stack;if(v.length===0)return this.tree;var C=new Array(v.length),x=v[v.length-1];C[C.length-1]=new r(x._color,x.key,x.value,x.left,x.right,x._count);for(var S=v.length-2;S>=0;--S){var x=v[S];x.left===v[S+1]?C[S]=new r(x._color,x.key,x.value,C[S+1],x.right,x._count):C[S]=new r(x._color,x.key,x.value,x.left,C[S+1],x._count)}if(x=C[C.length-1],x.left&&x.right){var A=C.length;for(x=x.left;x.right;)C.push(x),x=x.right;var D=C[A-1];C.push(new r(x._color,D.key,D.value,x.left,x.right,x._count)),C[A-1].key=x.key,C[A-1].value=x.value;for(var S=C.length-2;S>=A;--S)x=C[S],C[S]=new r(x._color,x.key,x.value,x.left,C[S+1],x._count);C[A-1].left=C[A]}if(x=C[C.length-1],x._color===t){var _=C[C.length-2];_.left===x?_.left=null:_.right===x&&(_.right=null),C.pop();for(var S=0;S<C.length;++S)C[S]._count--;return new o(this.tree._compare,C[0])}else if(x.left||x.right){x.left?y(x,x.left):x.right&&y(x,x.right),x._color=e;for(var S=0;S<C.length-1;++S)C[S]._count--;return new o(this.tree._compare,C[0])}else{if(C.length===1)return new o(this.tree._compare,null);for(var S=0;S<C.length;++S)C[S]._count--;var M=C[C.length-2];g(C),M.left===x?M.left=null:M.right=null}return new o(this.tree._compare,C[0])},Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(p,"index",{get:function(){var v=0,C=this._stack;if(C.length===0){var x=this.tree.root;return x?x._count:0}else C[C.length-1].left&&(v=C[C.length-1].left._count);for(var S=C.length-2;S>=0;--S)C[S+1]===C[S].right&&(++v,C[S].left&&(v+=C[S].left._count));return v},enumerable:!0}),p.next=function(){var v=this._stack;if(v.length!==0){var C=v[v.length-1];if(C.right)for(C=C.right;C;)v.push(C),C=C.left;else for(v.pop();v.length>0&&v[v.length-1].right===C;)C=v[v.length-1],v.pop()}},Object.defineProperty(p,"hasNext",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].right)return!0;for(var C=v.length-1;C>0;--C)if(v[C-1].left===v[C])return!0;return!1}}),p.update=function(v){var C=this._stack;if(C.length===0)throw new Error("Can't update empty node!");var x=new Array(C.length),S=C[C.length-1];x[x.length-1]=new r(S._color,S.key,v,S.left,S.right,S._count);for(var A=C.length-2;A>=0;--A)S=C[A],S.left===C[A+1]?x[A]=new r(S._color,S.key,S.value,x[A+1],S.right,S._count):x[A]=new r(S._color,S.key,S.value,S.left,x[A+1],S._count);return new o(this.tree._compare,x[0])},p.prev=function(){var v=this._stack;if(v.length!==0){var C=v[v.length-1];if(C.left)for(C=C.left;C;)v.push(C),C=C.right;else for(v.pop();v.length>0&&v[v.length-1].left===C;)C=v[v.length-1],v.pop()}},Object.defineProperty(p,"hasPrev",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].left)return!0;for(var C=v.length-1;C>0;--C)if(v[C-1].right===v[C])return!0;return!1}});function E(v,C){return v<C?-1:v>C?1:0}function w(v){return new o(v||E,null)}return Xv}var Kv,SS;function KV(){return SS||(SS=1,Kv=function(t,e,r){var n=XV(),a=t,i=function(N){a=N,a.guidelinesTolerance==0&&(a.guidelinesTolerance=.001)},o=function(N){var I=N.getBoundingClientRect();return{top:I.top+document.documentElement.scrollTop,left:I.left+document.documentElement.scrollLeft}},s=r(function(){u(),f.height=e.height(),f.width=e.width(),f.style.position="absolute",f.style.top=0,f.style.left=0,f.style.zIndex=a.guidelinesStackOrder,setTimeout(function(){f.height=e.height(),f.width=e.width();var N=o(f),I=o(c);f.style.top=-(N.top-I.top),f.style.left=-(N.left-I.left)},0)},250),u=function(){var N=e.width(),I=e.height();h.clearRect(0,0,N,I)},f=document.createElement("canvas"),c=e.container(),h=f.getContext("2d");c.appendChild(f);var p=function(){f.height=0,f.width=0,f.style.position="absolute",f.style.top=0,f.style.left=0,f.style.zIndex=a.guidelinesStackOrder};p();var y=null,g=null,E,w,v={},C={},x={h:null,v:null};v.getDims=function(N){var I=N.renderedPosition(),z=N.renderedWidth(),ae=N.renderedHeight(),re={left:Number(N.renderedStyle("padding-left").replace("px","")),right:Number(N.renderedStyle("padding-right").replace("px","")),top:Number(N.renderedStyle("padding-top").replace("px","")),bottom:Number(N.renderedStyle("padding-bottom").replace("px",""))};return{horizontal:{center:I.x,left:Math.round(I.x-(re.left+z/2)),right:Math.round(I.x+(re.right+z/2))},vertical:{center:I.y,top:Math.round(I.y-(re.top+ae/2)),bottom:Math.round(I.y+(re.bottom+ae/2))}}},v.init=function(N){y=n(),g=n(),E||(C.x=e.pan("x"),C.y=e.pan("y"),E=N.renderedPosition());var I=e.nodes(":visible");w=N.union(N.ancestors()),w=w.union(N.descendants()),I.not(w).each(function(z,ae){typeof z=="number"&&(z=ae);var re=v.getDims(z);["left","center","right"].forEach(function(K){var V=re.horizontal[K];g.get(V)?g.get(V).push(z):g=g.insert(V,[z])}),["top","center","bottom"].forEach(function(K){var V=re.vertical[K];y.get(V)?y.get(V).push(z):y=y.insert(V,[z])})}),h.lineWidth=a.lineWidth,v.update(N)},v.destroy=function(){v.clear(),y=null,g=null,E=null,D={},x={h:null,v:null},P&&(P.unlock(),P=void 0)},v.clear=u,v.drawLine=function(N,I,z,ae){h.setLineDash(ae),h.beginPath(),h.moveTo(N.x,N.y),h.lineTo(I.x,I.y),h.strokeStyle=z,h.stroke()},v.drawArrow=function(N,I){I=="right"?(h.setLineDash([]),h.beginPath(),h.moveTo(N.x-5,N.y-5),h.lineTo(N.x,N.y),h.lineTo(N.x-5,N.y+5),h.stroke()):I=="left"?(h.setLineDash([]),h.beginPath(),h.moveTo(N.x+5,N.y-5),h.lineTo(N.x,N.y),h.lineTo(N.x+5,N.y+5),h.stroke()):I=="top"?(h.setLineDash([]),h.beginPath(),h.moveTo(N.x-5,N.y+5),h.lineTo(N.x,N.y),h.lineTo(N.x+5,N.y+5),h.stroke()):I=="bottom"&&(h.setLineDash([]),h.beginPath(),h.moveTo(N.x-5,N.y-5),h.lineTo(N.x,N.y),h.lineTo(N.x+5,N.y-5),h.stroke())},v.drawCross=function(N){h.setLineDash([]),h.beginPath(),h.moveTo(N.x-5,N.y+5),h.lineTo(N.x+5,N.y-5),h.moveTo(N.x-5,N.y-5),h.lineTo(N.x+5,N.y+5),h.stroke()};var S=function(N,I){for(var z=N[0],ae=v.getDims(z)[I].center,re=N[0],K=v.getDims(re)[I].center,V=0;V<N.length;V++){var Z=N[V];v.getDims(Z)[I].center<ae&&(ae=v.getDims(Z)[I].center,z=Z),v.getDims(Z)[I].center>K&&(K=v.getDims(Z)[I].center,re=Z)}if(I=="horizontal")var U=(ae+K)/2<v.getDims(N[1])[I].center?K+(.5*re.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():ae-(.5*z.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();else var U=(ae+K)/2<v.getDims(N[1])[I].center?K+(.5*re.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():ae-(.5*z.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();return U};v.horizontalDistribution=function(N){var I=null,z=null,ae=v.getDims(N),re=ae.horizontal.center,K=ae.vertical.center;if(g.forEach(function(U,W){for(var Y=0;Y<W.length;Y++){var ee=W[Y],oe=v.getDims(ee);if(Math.abs(oe.vertical.center-ae.vertical.center)<a.guidelinesStyle.range*e.zoom()&&oe.horizontal.right==U&&ae.horizontal.left-oe.horizontal.right>a.guidelinesStyle.minDistRange){var te=Math.round(2*re)-U;g.forEach(function(ie,se){for(var $=0;$<se.length;$++){var ne=se[$];Math.abs(v.getDims(ne).vertical.center-K)<a.guidelinesStyle.range*e.zoom()&&Math.abs(te-v.getDims(ne).horizontal.left)<2*a.guidelinesTolerance&&(I=ee,z=ne)}},te-a.guidelinesTolerance,te+a.guidelinesTolerance)}}},re-a.guidelinesStyle.range*e.zoom(),re),I){x.hd=re-(v.getDims(z).horizontal.left+v.getDims(I).horizontal.right)/2,(!a.geometricGuideline||x.h==null||Math.abs(x.h)>Math.abs(x.hd))&&(x.h=x.hd);var V=S([I,N,z],"vertical");v.drawLine({x:v.getDims(I).horizontal.right,y:V},{x:ae.horizontal.left,y:V},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(z).horizontal.left,y:V},{x:ae.horizontal.right,y:V},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(I).horizontal.right,y:V},{x:v.getDims(I).horizontal.right,y:v.getDims(I).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(z).horizontal.left,y:V},{x:v.getDims(z).horizontal.left,y:v.getDims(z).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:ae.horizontal.left,y:V},{x:ae.horizontal.left,y:K},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:ae.horizontal.right,y:V},{x:ae.horizontal.right,y:K},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(I).horizontal.right,y:V},"left"),v.drawArrow({x:ae.horizontal.left,y:V},"right"),v.drawArrow({x:ae.horizontal.right,y:V},"left"),v.drawArrow({x:v.getDims(z).horizontal.left,y:V},"right")}else{var Z=v.horizontalDistributionNext(N,"left");Z||v.horizontalDistributionNext(N,"right")}},v.verticalDistribution=function(N){var I=null,z=null,ae=v.getDims(N),re=ae.horizontal.center,K=ae.vertical.center;if(y.forEach(function(U,W){for(var Y=0;Y<W.length;Y++){var ee=W[Y],oe=v.getDims(ee);if(Math.abs(oe.horizontal.center-ae.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&oe.vertical.bottom==U&&ae.vertical.top-oe.vertical.bottom>a.guidelinesStyle.minDistRange){var te=Math.round(2*K-U);y.forEach(function(ie,se){for(var $=0;$<se.length;$++){var ne=se[$];Math.abs(v.getDims(ne).horizontal.center-re)<a.guidelinesStyle.range*e.zoom()&&Math.abs(te-v.getDims(ne).vertical.top)<2*a.guidelinesTolerance&&(I=ee,z=ne)}},te-a.guidelinesTolerance,te+a.guidelinesTolerance)}}},K-a.guidelinesStyle.range*e.zoom(),K),I){x.vd=K-(v.getDims(I).vertical.bottom+v.getDims(z).vertical.top)/2,(!a.geometricGuideline||x.v==null||Math.abs(x.v)>Math.abs(x.vd))&&(x.v=x.vd);var V=S([I,N,z],"horizontal");v.drawLine({y:v.getDims(I).vertical.bottom,x:V},{y:ae.vertical.top,x:V},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(z).vertical.top,x:V},{y:ae.vertical.bottom,x:V},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(I).vertical.bottom,x:V},{y:v.getDims(I).vertical.bottom,x:v.getDims(I).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(z).vertical.top,x:V},{y:v.getDims(z).vertical.top,x:v.getDims(z).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:ae.vertical.bottom,x:V},{y:ae.vertical.bottom,x:re},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:ae.vertical.top,x:V},{y:ae.vertical.top,x:re},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawArrow({x:V,y:v.getDims(I).vertical.bottom},"top"),v.drawArrow({x:V,y:ae.vertical.top},"bottom"),v.drawArrow({x:V,y:v.getDims(z).vertical.top},"bottom"),v.drawArrow({x:V,y:ae.vertical.bottom},"top")}else{var Z=v.verticalDistributionNext(N,"below");Z||v.verticalDistributionNext(N,"above")}},v.searchForLine=function(N,I){var z,ae,re,K,V,Z,U,W=v.getDims(I)[N],Y=Number.MAX_SAFE_INTEGER;N=="horizontal"?(Z=g,K="y",V="x",x.h=null):(Z=y,K="x",V="y",x.v=null),re=I.renderedPosition(K);for(var ee in W)if(z=W[ee],Z.forEach(function(oe,te){for(var ie=0;ie<te.length;ie++){var se=te[ie];if(a.centerToEdgeAlignment||ee!="center"&&se.renderedPosition(V)!=oe||ee=="center"&&se.renderedPosition(V)==oe){var $=Math.abs(re-se.renderedPosition(K));$<Y&&$<a.guidelinesStyle.geometricGuidelineRange*e.zoom()&&(ae=se,Y=$,U=oe)}}},z-Number(a.guidelinesTolerance),z+Number(a.guidelinesTolerance)),ae){Y=v.getDims(I)[N][ee],N=="horizontal"?(x.h=Y-U,v.drawLine({x:Y,y:I.renderedPosition("y")},{x:Y,y:ae.renderedPosition("y")},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash)):(x.v=Y-U,v.drawLine({x:I.renderedPosition("x"),y:Y},{x:ae.renderedPosition("x"),y:Y},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash));break}},v.horizontalDistributionNext=function(N,I){var z=null,ae=null,re=v.getDims(N),K=re.horizontal.center,V=re.vertical.center,Z="right",U="left",W=K;if(I=="left"){Z="left",U="right";var W=K-a.guidelinesStyle.range*e.zoom()}var Y={left:function(ee,oe){return oe-ee>a.guidelinesStyle.minDistRange},right:function(ee,oe){return ee-oe>a.guidelinesStyle.minDistRange}};return g.forEach(function(ee,oe){for(var te=0;te<oe.length;te++){var ie=oe[te],se=v.getDims(ie);if(Math.abs(se.vertical.center-re.vertical.center)<a.guidelinesStyle.range*e.zoom()&&se.horizontal[U]==ee&&Y[I](se.horizontal[U],re.horizontal[Z])){var $=se.horizontal[Z]-(re.horizontal[Z]-ee);g.forEach(function(ne,le){for(var Se=0;Se<le.length;Se++){var De=le[Se];Math.abs(v.getDims(De).vertical.center-V)<a.guidelinesStyle.range*e.zoom()&&Math.abs($-v.getDims(De).horizontal[U])<2*a.guidelinesTolerance&&(z=ie,ae=De)}},$-a.guidelinesTolerance,$+a.guidelinesTolerance)}}},W,W+a.guidelinesStyle.range*e.zoom()),z?(x.hd=v.getDims(N).horizontal[Z]-v.getDims(z).horizontal[U]-(v.getDims(z).horizontal[Z]-v.getDims(ae).horizontal[U]),(!a.geometricGuideline||x.h==null||Math.abs(x.h)>Math.abs(x.hd))&&(x.h=x.hd),v.drawDH(N,z,ae,I),!0):(a.geometricGuideline||(x.h=null),!1)},v.drawDH=function(N,I,z,ae){var re=v.getDims(N).vertical.center,K="right",V="left";ae=="left"&&(K="left",V="right");var Z=S([I,N,z],"vertical");v.drawLine({x:v.getDims(I).horizontal[V],y:Z},{x:v.getDims(N).horizontal[K],y:Z},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(N).horizontal[K],y:Z},{x:v.getDims(N).horizontal[K],y:re},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(z).horizontal[V],y:Z},{x:v.getDims(I).horizontal[K],y:Z},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(z).horizontal[V],y:Z},{x:v.getDims(z).horizontal[V],y:v.getDims(z).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(I).horizontal[V],y:Z},{x:v.getDims(I).horizontal[V],y:v.getDims(I).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(I).horizontal[K],y:Z},{x:v.getDims(I).horizontal[K],y:v.getDims(I).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(N).horizontal[K],y:Z},V),v.drawArrow({x:v.getDims(I).horizontal[V],y:Z},K),v.drawArrow({x:v.getDims(I).horizontal[K],y:Z},V),v.drawArrow({x:v.getDims(z).horizontal[V],y:Z},K)},v.verticalDistributionNext=function(N,I){var z=null,ae=null,re=v.getDims(N),K=re.horizontal.center,V=re.vertical.center,Z="top",U="bottom",W=V-a.guidelinesStyle.range*e.zoom();I=="above"&&(Z="bottom",U="top",W=V);var Y={below:function(ee,oe){return oe-ee>a.guidelinesStyle.minDistRange},above:function(ee,oe){return ee-oe>a.guidelinesStyle.minDistRange}};return y.forEach(function(ee,oe){for(var te=0;te<oe.length;te++){var ie=oe[te],se=v.getDims(ie);if(Math.abs(se.horizontal.center-re.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&se.vertical[U]==ee&&Y[I](se.vertical[U],re.vertical[Z])){var $=se.vertical[Z]-(re.vertical[Z]-ee);y.forEach(function(ne,le){for(var Se=0;Se<le.length;Se++){var De=le[Se];Math.abs(v.getDims(De).horizontal.center-K)<a.guidelinesStyle.range*e.zoom()&&Math.abs($-v.getDims(De).vertical[U])<2*a.guidelinesTolerance&&(z=ie,ae=De)}},$-a.guidelinesTolerance,$+a.guidelinesTolerance)}}},W,W+a.guidelinesStyle.range*e.zoom()),z?(x.vd=v.getDims(N).vertical[Z]-v.getDims(z).vertical[U]-(v.getDims(z).vertical[Z]-v.getDims(ae).vertical[U]),(!a.geometricGuideline||x.v==null||Math.abs(x.v)>Math.abs(x.vd))&&(x.v=x.vd),v.drawDV(N,z,ae,I),!0):(a.geometricGuideline||(x.v=null),!1)},v.drawDV=function(N,I,z,ae){var re=v.getDims(N),K=re.horizontal.center,V="top",Z="bottom";ae=="above"&&(V="bottom",Z="top");var U=S([I,N,z],"horizontal");v.drawLine({x:U,y:re.vertical[V]},{x:U,y:v.getDims(I).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:U,y:v.getDims(I).vertical[V]},{x:U,y:v.getDims(z).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:K,y:re.vertical[V]},{x:U,y:re.vertical[V]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(I).horizontal.center,y:v.getDims(I).vertical[Z]},{x:U,y:v.getDims(I).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(I).horizontal.center,y:v.getDims(I).vertical[V]},{x:U,y:v.getDims(I).vertical[V]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:U,y:v.getDims(z).vertical[Z]},{x:v.getDims(z).horizontal.center,y:v.getDims(z).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawArrow({x:U,y:re.vertical[V]},Z),v.drawArrow({x:U,y:v.getDims(I).vertical[Z]},V),v.drawArrow({x:U,y:v.getDims(I).vertical[V]},Z),v.drawArrow({x:U,y:v.getDims(z).vertical[Z]},V)},v.update=function(N){v.clear(),a.initPosAlignment&&F(N),N.each(function(I,z){typeof I=="number"&&(I=z),a.geometricGuideline&&(v.searchForLine("horizontal",I),v.searchForLine("vertical",I)),a.distributionGuidelines&&(v.horizontalDistribution(I),v.verticalDistribution(I))})},v.resize=function(){s()};function A(N){for(var I={},z=0;z<N.length;z++)I[N[z].id()]=!0;var ae=N.filter(function(re,K){typeof re=="number"&&(re=K);for(var V=re.parent()[0];V!=null;){if(I[V.id()])return!1;V=V.parent()[0]}return!0});return ae}var D={},_={},M=function(N){D=N.renderedPosition||N.cyRenderedPosition,_.x=D.x,_.y=D.y},k=function(N){_.x+=N.x-C.x,_.y+=N.y-C.y,C.x=N.x,C.y=N.y},F=function(N){var I=N.renderedPosition();Math.abs(E.y-I.y)<a.guidelinesTolerance?(v.drawLine({x:_.x,y:D.y},{x:I.x,y:D.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),D.y==_.y?v.drawCross(_):v.drawCross(D)):Math.abs(E.x-I.x)<a.guidelinesTolerance&&(v.drawLine({x:D.x,y:_.y},{x:D.x,y:I.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),D.x==_.x?v.drawCross(_):v.drawCross(D))};function G(N,I){var z=A(I),ae=z.union(z.descendants());ae.filter(":childless").forEach(function(re,K){typeof re=="number"&&(re=K);var V={x:N.x+re.renderedPosition("x"),y:N.y+re.renderedPosition("y")};re.renderedPosition(V)})}var B;e.on("tapstart","node",function(){B=this});var q,R={x:0,y:0};e.on("mousemove",function(N){q=N.renderedPosition||N.cyRenderedPosition,P&&P.each(function(I,z){if(typeof I=="number"&&(I=z),I.locked()&&(Math.abs(q.x-R.x)>2*a.guidelinesTolerance||Math.abs(q.y-R.y)>2*a.guidelinesTolerance)){I.unlock();var ae={};ae.x=q.x-B.renderedPosition("x"),ae.y=q.y-B.renderedPosition("y"),G(ae,I)}})});var P;return v.snapToAlignmentLocation=function(N){P=N,N.each(function(I,z){typeof I=="number"&&(I=z);var ae=I.renderedPosition();x.h&&(R=q,ae.x-=x.h,I.renderedPosition(ae)),x.v&&(R=q,ae.y-=x.v,I.renderedPosition(ae)),(x.v||x.h)&&(x.h=null,x.v=null,P.lock())}),v.update(N)},{changeOptions:i,lines:v,getTopMostNodes:A,getMousePos:M,setMousePos:k,resizeCanvas:s,resetCanvas:p}}),Kv}var jv,AS;function jV(){return AS||(AS=1,jv=function(t,e){var r=t,n="_gridParentPadding",a;function i(){e.style().selector("."+n).style("compound-sizing-wrt-labels","exclude").style("padding-left",a).style("padding-right",a).style("padding-top",a).style("padding-bottom",a).update()}function o(u){r=u,a=r.parentSpacing<0?r.gridSpacing:r.parentSpacing,i()}function s(u,f){f?u.addClass(n):u.removeClass(n)}return{changeOptions:o,setPaddingOfParent:s}}),jv}var Zv,LS;function ZV(){return LS||(LS=1,Zv=function(t,e,r){function n(u,f,c){var h=u.union(u.descendants());h.filter(":childless").positions(function(p,y){typeof p=="number"&&(p=y);var g=p.position();return{x:g.x+f,y:g.y+c}})}function a(u){for(var f={},c=0;c<u.length;c++)f[u[c].id()]=!0;var h=u.filter(function(p,y){typeof p=="number"&&(p=y);for(var g=p.parent()[0];g!=null;){if(f[g.id()])return!1;g=g.parent()[0]}return!0});return h}if(r||t("collection","align",function(u,f,c){var h=a(this.nodes(":visible")),p=c||h[0];h=h.not(p),u=u||"none",f=f||"none";var y=0,g=0;f=="left"?y=-1:f=="right"&&(y=1),u=="top"?g=-1:u=="bottom"&&(g=1);for(var E=0;E<h.length;E++){var w=h[E],v=Object.assign({},w.position()),C=Object.assign({},w.position());f!="none"&&(C.x=p.position("x")+y*(p.outerWidth()-w.outerWidth())/2),u!="none"&&(C.y=p.position("y")+g*(p.outerHeight()-w.outerHeight())/2),n(w,C.x-v.x,C.y-v.y)}return this}),e.undoRedo){let u=function(){for(var c={},h=e.nodes(),p=0;p<h.length;p++){var y=h[p];c[y.id()]={x:y.position("x"),y:y.position("y")}}return c},f=function(c){var h={};return e.nodes().not(":parent").positions(function(p,y){typeof p=="number"&&(p=y),h[p.id()]={x:p.position("x"),y:p.position("y")};var g=c[p.id()];return{x:g.x,y:g.y}}),h};var o=u,s=f,i=e.undoRedo(null,!0);i.action("align",function(c){var h;return c.firstTime?(h=u(),c.nodes.align(c.horizontal,c.vertical,c.alignTo)):h=f(c),h},function(c){return f(c)})}}),Zv}var Qv,DS;function QV(){if(DS)return Qv;DS=1;var t=function(){var e="Expected a function",r=Math.max,n=Date.now,a=n||function(){return new Date().getTime()};function i(s,u,f){var c,h,p,y,g,E,w,v=0,C=!1,x=!0;if(typeof s!="function")throw new TypeError(e);if(u=u<0?0:+u||0,f===!0){var S=!0;x=!1}else o(f)&&(S=!!f.leading,C="maxWait"in f&&r(+f.maxWait||0,u),x="trailing"in f?!!f.trailing:x);function A(){E&&clearTimeout(E),h&&clearTimeout(h),v=0,h=E=w=void 0}function D(F,G){G&&clearTimeout(G),h=E=w=void 0,F&&(v=a(),p=s.apply(g,c),!E&&!h&&(c=g=void 0))}function _(){var F=u-(a()-y);F<=0||F>u?D(w,h):E=setTimeout(_,F)}function M(){D(x,E)}function k(){if(c=arguments,y=a(),g=this,w=x&&(E||!S),C===!1)var F=S&&!E;else{!h&&!S&&(v=y);var G=C-(y-v),B=G<=0||G>C;B?(h&&(h=clearTimeout(h)),v=y,p=s.apply(g,c)):h||(h=setTimeout(M,G))}return B&&E?E=clearTimeout(E):!E&&u!==C&&(E=setTimeout(_,u)),F&&(B=!0,p=s.apply(g,c)),B&&!E&&!h&&(c=g=void 0),p}return k.cancel=A,k}function o(s){var u=typeof s;return!!s&&(u=="object"||u=="function")}return i}();return Qv=t,Qv}var _S;function JV(){return _S||(_S=1,function(t){(function(){var e=function(r){if(!r)return;HV();var n=!1,a={snapToGridOnRelease:!0,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!1,geometricGuideline:!1,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:20,snapToGridCenter:!0,zoomDash:!0,panGrid:!1,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1},i=UV(),o=VV(),s=WV(),u=$V(),f=YV(),c=KV(),h=jV(),p=ZV(),y=QV();function g(E){return E.scratch("_gridGuide")||E.scratch("_gridGuide",{}),E.scratch("_gridGuide")}r("core","gridGuide",function(E){var w=this,v=g(w),C=Object.extend({},v.options||a,E);if(v.options=C,v.initialized){var _=v.eventsController;_.syncWithOptions(C)}else{var x,S,A,D,_,M,k;x=i(w,C.gridSpacing,C.snapToGridCenter),S=u(C.gridSpacing),A=o(w,x),D=s(C,w,y),M=c(C,w,y),k=h(C,w),_=f(w,x,S,A,D,M,k,C),p(r,w,n),n=!0,_.init(C),v.initialized=!0,v.eventsController=_}return this})};t.exports&&(t.exports=e),typeof cytoscape<"u"&&e(cytoscape)})()}(Hv)),Hv.exports}var eW=JV();const tW=So(eW);var Pf={exports:{}},rW=Pf.exports,MS;function nW(){return MS||(MS=1,function(t,e){(function(r,n){t.exports=n()})(rW,function(){return(()=>{var r={621:(i,o,s)=>{function u(V,Z){(Z==null||Z>V.length)&&(Z=V.length);for(var U=0,W=new Array(Z);U<Z;U++)W[U]=V[U];return W}function f(V,Z){var U={};for(var W in V)U[W]=V[W];for(var Y in Z)U[Y]instanceof Array?U[Y]=U[Y].concat(Z[Y]):U[Y]=Z[Y];return U}function c(V){for(var Z="",U=0;U<V.length;U++)Z+=V[U],U!==V.length-1&&(Z+=" ");return Z}function h(V,Z,U){U?V.setAttribute(Z,""):V.removeAttribute(Z)}function p(V,Z,U){customElements.get(V)===void 0&&customElements.define(V,Z,{extends:U})}s.r(o),s.d(o,{contextMenus:()=>K});var y="cy-context-menus-divider",g={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function E(V){return(E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z})(V)}function w(V,Z){var U;if(typeof Symbol>"u"||V[Symbol.iterator]==null){if(Array.isArray(V)||(U=function(ie,se){if(ie){if(typeof ie=="string")return v(ie,se);var $=Object.prototype.toString.call(ie).slice(8,-1);return $==="Object"&&ie.constructor&&($=ie.constructor.name),$==="Map"||$==="Set"?Array.from(ie):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?v(ie,se):void 0}}(V))||Z){U&&(V=U);var W=0,Y=function(){};return{s:Y,n:function(){return W>=V.length?{done:!0}:{done:!1,value:V[W++]}},e:function(ie){throw ie},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ee,oe=!0,te=!1;return{s:function(){U=V[Symbol.iterator]()},n:function(){var ie=U.next();return oe=ie.done,ie},e:function(ie){te=!0,ee=ie},f:function(){try{oe||U.return==null||U.return()}finally{if(te)throw ee}}}}function v(V,Z){(Z==null||Z>V.length)&&(Z=V.length);for(var U=0,W=new Array(Z);U<Z;U++)W[U]=V[U];return W}function C(V,Z){if(!(V instanceof Z))throw new TypeError("Cannot call a class as a function")}function x(V,Z){for(var U=0;U<Z.length;U++){var W=Z[U];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(V,W.key,W)}}function S(V,Z,U){return Z&&x(V.prototype,Z),U&&x(V,U),V}function A(V,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(Z&&Z.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),Z&&q(V,Z)}function D(V){var Z=B();return function(){var U,W=R(V);if(Z){var Y=R(this).constructor;U=Reflect.construct(W,arguments,Y)}else U=W.apply(this,arguments);return _(this,U)}}function _(V,Z){return!Z||E(Z)!=="object"&&typeof Z!="function"?M(V):Z}function M(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function k(V,Z,U){return(k=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(W,Y,ee){var oe=function(ie,se){for(;!Object.prototype.hasOwnProperty.call(ie,se)&&(ie=R(ie))!==null;);return ie}(W,Y);if(oe){var te=Object.getOwnPropertyDescriptor(oe,Y);return te.get?te.get.call(ee):te.value}})(V,Z,U||V)}function F(V){var Z=typeof Map=="function"?new Map:void 0;return(F=function(U){if(U===null||(W=U,Function.toString.call(W).indexOf("[native code]")===-1))return U;var W;if(typeof U!="function")throw new TypeError("Super expression must either be null or a function");if(Z!==void 0){if(Z.has(U))return Z.get(U);Z.set(U,Y)}function Y(){return G(U,arguments,R(this).constructor)}return Y.prototype=Object.create(U.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),q(Y,U)})(V)}function G(V,Z,U){return(G=B()?Reflect.construct:function(W,Y,ee){var oe=[null];oe.push.apply(oe,Y);var te=new(Function.bind.apply(W,oe));return ee&&q(te,ee.prototype),te}).apply(null,arguments)}function B(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function q(V,Z){return(q=Object.setPrototypeOf||function(U,W){return U.__proto__=W,U})(V,Z)}function R(V){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(Z){return Z.__proto__||Object.getPrototypeOf(Z)})(V)}function P(V){V.preventDefault(),V.stopPropagation()}var N=function(V){A(U,V);var Z=D(U);function U(W,Y,ee){var oe,te,ie,se,$,ne,le,Se,De,be;C(this,U),k((te=M(be=Z.call(this)),R(U.prototype)),"setAttribute",te).call(te,"id",W.id);var Te=be._getMenuItemClassStr(ee.cxtMenuItemClasses,W.hasTrailingDivider);if(k((ie=M(be),R(U.prototype)),"setAttribute",ie).call(ie,"class",Te),k((se=M(be),R(U.prototype)),"setAttribute",se).call(se,"title",(oe=W.tooltipText)!==null&&oe!==void 0?oe:""),W.disabled&&h(M(be),"disabled",!0),W.image){var ve=document.createElement("img");ve.src=W.image.src,ve.width=W.image.width,ve.height=W.image.height,ve.style.position="absolute",ve.style.top=W.image.y+"px",ve.style.left=W.image.x+"px",k(($=M(be),R(U.prototype)),"appendChild",$).call($,ve)}if(be.innerHTML+=W.content,be.onMenuItemClick=Y,be.data={},be.clickFns=[],be.selector=W.selector,be.hasTrailingDivider=W.hasTrailingDivider,be.show=W.show===void 0||W.show,be.coreAsWell=W.coreAsWell||!1,be.scratchpad=ee,W.onClickFunction===void 0&&W.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return be.onClickFunction=W.onClickFunction,W.submenu instanceof Array&&be._createSubmenu(W.submenu),k((ne=M(be),R(U.prototype)),"addEventListener",ne).call(ne,"mousedown",P),k((le=M(be),R(U.prototype)),"addEventListener",le).call(le,"mouseup",P),k((Se=M(be),R(U.prototype)),"addEventListener",Se).call(Se,"touchstart",P),k((De=M(be),R(U.prototype)),"addEventListener",De).call(De,"touchend",P),be}return S(U,[{key:"bindOnClickFunction",value:function(W){this.clickFns.push(W),k(R(U.prototype),"addEventListener",this).call(this,"click",W)}},{key:"unbindOnClickFunctions",value:function(){var W,Y=w(this.clickFns);try{for(Y.s();!(W=Y.n()).done;){var ee=W.value;k(R(U.prototype),"removeEventListener",this).call(this,"click",ee)}}catch(oe){Y.e(oe)}finally{Y.f()}this.clickFns=[]}},{key:"enable",value:function(){h(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){h(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(W){this.hasTrailingDivider=W}},{key:"hasSubmenu",value:function(){return this.submenu instanceof I}},{key:"appendSubmenuItem",value:function(W){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(W,Y)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(W){var Y=this.getBoundingClientRect(),ee=function($){$.style.opacity="0",$.style.display="block";var ne=$.getBoundingClientRect();return $.style.opacity="1",$.style.display="none",ne}(this.submenu),oe=Y.right+ee.width>window.innerWidth,te=Y.top+ee.height>window.innerHeight;oe||te?oe&&!te?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):oe&&te?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var ie=Array.from(this.submenu.children).filter(function($){if($ instanceof U)return $.isVisible()}),se=ie.length;ie.forEach(function($,ne){$ instanceof U&&(ne<se-1&&$.getHasTrailingDivider()?$.classList.add(y):$.getHasTrailingDivider()&&$.classList.remove(y))})}},{key:"_onMouseLeave",value:function(W){var Y,ee,oe,te,ie;Y={x:W.clientX,y:W.clientY},ee=this.submenu,te=Y.y,(oe=Y.x)>=(ie=ee.getBoundingClientRect()).left&&oe<=ie.right&&te>=ie.top&&te<=ie.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new I(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var Y,ee=w(W);try{for(ee.s();!(Y=ee.n()).done;){var oe=Y.value,te=new U(oe,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(te)}}catch(ie){ee.e(ie)}finally{ee.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(W,Y){return Y?W+" "+y:W}}],[{key:"define",value:function(){p("ctx-menu-item",U,"button")}}]),U}(F(HTMLButtonElement)),I=function(V){A(U,V);var Z=D(U);function U(W,Y){var ee,oe;return C(this,U),k((ee=M(oe=Z.call(this)),R(U.prototype)),"setAttribute",ee).call(ee,"class",Y.cxtMenuClasses),oe.style.position="absolute",oe.onMenuItemClick=W,oe.scratchpad=Y,oe}return S(U,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var W,Y=w(this.children);try{for(Y.s();!(W=Y.n()).done;){var ee=W.value;ee instanceof HTMLElement?ee.style.display="none":console.warn("".concat(ee," is not a HTMLElement"))}}catch(oe){Y.e(oe)}finally{Y.f()}}},{key:"hideSubmenus",value:function(){var W,Y=w(this.children);try{for(Y.s();!(W=Y.n()).done;){var ee=W.value;ee instanceof N&&ee.submenu&&ee.submenu.hide()}}catch(oe){Y.e(oe)}finally{Y.f()}}},{key:"appendMenuItem",value:function(W){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(Y!==void 0){if(Y.parentNode!==this)throw new Error("The item with id='".concat(Y.id,"' is not a child of the context menu"));this.insertBefore(W,Y)}else this.appendChild(W);W.isClickable()&&this._performBindings(W)}},{key:"moveBefore",value:function(W,Y){if(W.parentNode!==this)throw new Error("The item with id='".concat(W.id,"' is not a child of context menu"));if(Y.parentNode!==this)throw new Error("The item with id='".concat(Y.id,"' is not a child of context menu"));this.removeChild(W),this.insertBefore(W,Y)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var W=this.lastChild;W instanceof N?this._removeImmediateMenuItem(W):(console.warn("Found non menu item in the context menu: ",W),this.removeChild(W))}}},{key:"_removeImmediateMenuItem",value:function(W){if(!this._detachImmediateMenuItem(W))throw new Error("menu item(id=".concat(W.id,") is not in the context menu"));W.detachSubmenu(),W.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(W){if(W.parentNode===this){if(this.removeChild(W),this.children.length<=0){var Y=this.parentNode;Y instanceof N&&Y.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(W){var Y=this._bindOnClick(W.onClickFunction);W.bindOnClickFunction(Y),W.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(W){var Y=this;return function(){var ee=Y.scratchpad.currentCyEvent;W(ee)}}}],[{key:"define",value:function(){p("menu-item-list",U,"div")}}]),U}(F(HTMLDivElement)),z=function(V){A(U,V);var Z=D(U);function U(W,Y){var ee;return C(this,U),(ee=Z.call(this,W,Y)).onMenuItemClick=function(oe){P(oe),ee.hide(),W()},ee}return S(U,[{key:"removeMenuItem",value:function(W){var Y=W.parentElement;Y instanceof I&&this.contains(Y)&&Y._removeImmediateMenuItem(W)}},{key:"appendMenuItem",value:function(W){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(W.id),k(R(U.prototype),"appendMenuItem",this).call(this,W,Y)}},{key:"insertMenuItem",value:function(W){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=Y.before,oe=Y.parent;if(this.ensureDoesntContain(W.id),ee!==void 0){if(!this.contains(ee))throw new Error("before(id=".concat(ee.id,") is not in the context menu"));var te=ee.parentNode;if(!(te instanceof I))throw new Error("Parent of before(id=".concat(ee.id,") is not a submenu"));te.appendMenuItem(W,ee)}else if(oe!==void 0){if(!this.contains(oe))throw new Error("parent(id=".concat(oe.id,") is not a descendant of the context menu"));oe.appendSubmenuItem(W)}else this.appendMenuItem(W)}},{key:"moveBefore",value:function(W,Y){var ee=W.parentElement;if(!this.contains(ee))throw new Error("parent(id=".concat(ee.id,") is not in the contex menu"));if(!this.contains(Y))throw new Error("before(id=".concat(Y.id,") is not in the context menu"));ee.removeChild(W),this.insertMenuItem(W,{before:Y})}},{key:"moveToSubmenu",value:function(W){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,oe=W.parentElement;if(!(oe instanceof I))throw new Error("current parent(id=".concat(oe.id,") is not a submenu"));if(!this.contains(oe))throw new Error("parent of the menu item(id=".concat(oe.id,") is not in the context menu"));if(Y!==null){if(!this.contains(Y))throw new Error("parent(id=".concat(Y.id,") is not in the context menu"));oe._detachImmediateMenuItem(W),Y.appendSubmenuItem(W)}else ee!==null&&(W.selector=ee.selector,W.coreAsWell=ee.coreAsWell),oe._detachImmediateMenuItem(W),this.appendMenuItem(W)}},{key:"ensureDoesntContain",value:function(W){var Y=document.getElementById(W);if(Y!==void 0&&this.contains(Y))throw new Error("There is already an element with id=".concat(W," in the context menu"))}},{key:"ensureContains",value:function(W){var Y=document.getElementById(W);if(Y==null||Y==null||!this.contains(Y))throw new Error("An element with id '".concat(W,"' does not exist!"))}}],[{key:"define",value:function(){p("ctx-menu",U,"div")}}]),U}(I);function ae(V,Z){var U;if(typeof Symbol>"u"||V[Symbol.iterator]==null){if(Array.isArray(V)||(U=function(ie,se){if(ie){if(typeof ie=="string")return re(ie,se);var $=Object.prototype.toString.call(ie).slice(8,-1);return $==="Object"&&ie.constructor&&($=ie.constructor.name),$==="Map"||$==="Set"?Array.from(ie):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?re(ie,se):void 0}}(V))||Z){U&&(V=U);var W=0,Y=function(){};return{s:Y,n:function(){return W>=V.length?{done:!0}:{done:!1,value:V[W++]}},e:function(ie){throw ie},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ee,oe=!0,te=!1;return{s:function(){U=V[Symbol.iterator]()},n:function(){var ie=U.next();return oe=ie.done,ie},e:function(ie){te=!0,ee=ie},f:function(){try{oe||U.return==null||U.return()}finally{if(te)throw ee}}}}function re(V,Z){(Z==null||Z>V.length)&&(Z=V.length);for(var U=0,W=new Array(Z);U<Z;U++)W[U]=V[U];return W}function K(V){var Z=this;Z.scratch("cycontextmenus")||Z.scratch("cycontextmenus",{});var U,W,Y=function(ve){return Z.scratch("cycontextmenus")[ve]},ee=function(ve,de){return Z.scratch("cycontextmenus")[ve]=de},oe=Y("options"),te=Y("cxtMenu"),ie=function(ve){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,ye=$(ve);if(de!==void 0){var Ce=le(de);te.insertMenuItem(ye,{parent:Ce})}else te.insertMenuItem(ye)},se=function(ve){for(var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,ye=0;ye<ve.length;ye++)ie(ve[ye],de)},$=function(ve){var de=Z.scratch("cycontextmenus");return new N(ve,te.onMenuItemClick,de)},ne=function(){Y("active")&&(te.removeAllMenuItems(),Z.off("tapstart",Y("eventCyTapStart")),Z.off(oe.evtType,Y("onCxttap")),Z.off("viewport",Y("onViewport")),document.removeEventListener("mouseup",Y("hideOnNonCyClick")),te.parentNode.removeChild(te),te=void 0,ee("cxtMenu",void 0),ee("active",!1),ee("anyVisibleChild",!1),ee("onCxttap",void 0),ee("onViewport",void 0),ee("hideOnNonCyClick",void 0))},le=function(ve){var de=document.getElementById(ve);if(de instanceof N)return de;throw new Error("The item with id=".concat(ve," is not a menu item"))},Se=function(){var ve,de=!1,ye=ae(te.children);try{for(ye.s();!(ve=ye.n()).done;){var Ce=ve.value;if(Ce instanceof N&&Ce.show&&Ce.style.display!="none"){de=!0;break}}}catch(ue){ye.e(ue)}finally{ye.f()}de?te.display():te.hide()};if(V!=="get"){N.define(),I.define(),z.define(),oe=f(g,V),ee("options",oe),Y("active")&&ne(),ee("active",!0),ee("submenuIndicatorGen",(function(ve){var de=document.createElement("img");return de.src=ve.src,de.width=ve.width,de.height=ve.height,de.classList.add("cy-context-menus-submenu-indicator"),de}).bind(void 0,oe.submenuIndicator));var De=c(oe.contextMenuClasses);ee("cxtMenuClasses",De);var be=Z.scratch("cycontextmenus");te=new z(function(){return ee("cxtMenuPosition",void 0)},be),ee("cxtMenu",te),Z.container().appendChild(te),ee("cxtMenuItemClasses",c(oe.menuItemClasses));var Te=oe.menuItems;se(Te),W=function(ve){ee("currentCyEvent",ve),function(Fe){var Ye,Ve=Z.container(),Qe=Y("cxtMenuPosition"),Xe=Fe.position||Fe.cyPosition;if(Qe!=Xe){te.hideMenuItems(),ee("anyVisibleChild",!1),ee("cxtMenuPosition",Xe);var We={top:(Ye=Ve.getBoundingClientRect()).top,left:Ye.left},he=Fe.renderedPosition||Fe.cyRenderedPosition,j=getComputedStyle(Ve)["border-width"],pe=parseInt(j.replace("px",""))||0;pe>0&&(We.top+=pe,We.left+=pe);var me=Ve.clientHeight,we=Ve.clientWidth,xe=me/2,qe=we/2;he.y>xe&&he.x<=qe?(te.style.left=he.x+"px",te.style.bottom=me-he.y+"px",te.style.right="auto",te.style.top="auto"):he.y>xe&&he.x>qe?(te.style.right=we-he.x+"px",te.style.bottom=me-he.y+"px",te.style.left="auto",te.style.top="auto"):he.y<=xe&&he.x<=qe?(te.style.left=he.x+"px",te.style.top=he.y+"px",te.style.right="auto",te.style.bottom="auto"):(te.style.right=we-he.x+"px",te.style.top=he.y+"px",te.style.left="auto",te.style.bottom="auto")}}(ve);var de,ye=ve.target||ve.cyTarget,Ce=ae(te.children);try{for(Ce.s();!(de=Ce.n()).done;){var ue=de.value;ue instanceof N&&(ye===Z?ue.coreAsWell:ye.is(ue.selector))&&ue.show&&(te.display(),ee("anyVisibleChild",!0),ue.display())}}catch(Fe){Ce.e(Fe)}finally{Ce.f()}var Ae=Array.from(te.children).filter(function(Fe){if(Fe instanceof N)return Fe.isVisible()}),Pe=Ae.length;Ae.forEach(function(Fe,Ye){Fe instanceof N&&(Ye<Pe-1&&Fe.getHasTrailingDivider()?Fe.classList.add(y):Fe.getHasTrailingDivider()&&Fe.classList.remove(y))}),!Y("anyVisibleChild")&&!function(Fe){return Fe.offsetWidth<=0&&Fe.offsetHeight<=0||Fe.style&&Fe.style.display||getComputedStyle(Fe).display}(te)&&te.hide()},Z.on(oe.evtType,W),ee("onCxttap",W),function(){var ve=function(ye){if(te.contains(ye.originalEvent.target))return!1;te.hide(),ee("cxtMenuPosition",void 0),ee("currentCyEvent",void 0)};Z.on("tapstart",ve),ee("eventCyTapStart",ve);var de=function(){te.hide()};Z.on("viewport",de),ee("onViewport",de)}(),U=function(ve){Z.container().contains(ve.target)||te.contains(ve.target)||(te.hide(),ee("cxtMenuPosition",void 0))},document.addEventListener("mouseup",U),ee("hideOnNonCyClick",U),function(){var ve,de=function(ye,Ce){var ue;if(typeof Symbol>"u"||ye[Symbol.iterator]==null){if(Array.isArray(ye)||(ue=function(Qe,Xe){if(Qe){if(typeof Qe=="string")return u(Qe,Xe);var We=Object.prototype.toString.call(Qe).slice(8,-1);return We==="Object"&&Qe.constructor&&(We=Qe.constructor.name),We==="Map"||We==="Set"?Array.from(Qe):We==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(We)?u(Qe,Xe):void 0}}(ye))||Ce){ue&&(ye=ue);var Ae=0,Pe=function(){};return{s:Pe,n:function(){return Ae>=ye.length?{done:!0}:{done:!1,value:ye[Ae++]}},e:function(Qe){throw Qe},f:Pe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fe,Ye=!0,Ve=!1;return{s:function(){ue=ye[Symbol.iterator]()},n:function(){var Qe=ue.next();return Ye=Qe.done,Qe},e:function(Qe){Ve=!0,Fe=Qe},f:function(){try{Ye||ue.return==null||ue.return()}finally{if(Ve)throw Fe}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(de.s();!(ve=de.n()).done;)ve.value.addEventListener("contextmenu",function(ye){return ye.preventDefault()})}catch(ye){de.e(ye)}finally{de.f()}}()}return function(ve){return{isActive:function(){return Y("active")},appendMenuItem:function(de){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return ie(de,ye),ve},appendMenuItems:function(de){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return se(de,ye),ve},removeMenuItem:function(de){var ye=le(de);return te.removeMenuItem(ye),ve},setTrailingDivider:function(de,ye){var Ce=le(de);return Ce.setHasTrailingDivider(ye),ye?Ce.classList.add(y):Ce.classList.remove(y),ve},insertBeforeMenuItem:function(de,ye){var Ce=$(de),ue=le(ye);return te.insertMenuItem(Ce,{before:ue}),ve},moveToSubmenu:function(de){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Ce=le(de);if(ye===null)te.moveToSubmenu(Ce);else if(typeof ye=="string"){var ue=le(ye.toString());te.moveToSubmenu(Ce,ue)}else ye.coreAsWell!==void 0||ye.selector!==void 0?te.moveToSubmenu(Ce,null,ye):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return ve},moveBeforeOtherMenuItem:function(de,ye){var Ce=le(de),ue=le(ye);return te.moveBefore(Ce,ue),ve},disableMenuItem:function(de){return le(de).disable(),ve},enableMenuItem:function(de){return le(de).enable(),ve},hideMenuItem:function(de){return le(de).hide(),Se(),ve},showMenuItem:function(de){return le(de).display(),Se(),ve},destroy:function(){return ne(),ve},getOptions:function(){return f(g,oe)},swapItems:function(de,ye){te.ensureContains(de),te.ensureContains(ye);var Ce=document.getElementById(de),ue=document.getElementById(ye),Ae=Ce.nextSibling,Pe=ue.nextSibling,Fe=Ce.parentNode,Ye=ue.parentNode;if(!Fe.isSameNode(Ye))throw new Error("To swap, the items should have the same parent!");Ae&&Ae.isSameNode(ue)?Fe.insertBefore(ue,Ce):Pe&&Pe.isSameNode(Ce)?Fe.insertBefore(Ce,ue):(Fe.insertBefore(ue,Ce),Fe.insertBefore(Ce,Pe))}}}(this)}},579:(i,o,s)=>{var u=s(621).contextMenus,f=function(c){c&&c("core","contextMenus",u)};typeof cytoscape<"u"&&f(cytoscape),i.exports=f}},n={};function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return r[i](s,s.exports,a),s.exports}return a.d=(i,o)=>{for(var s in o)a.o(o,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},a.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a(579)})()})}(Pf)),Pf.exports}var aW=nW();const iW=So(aW);var kf={exports:{}};function H1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Jv,RS;function oW(){if(RS)return Jv;RS=1;function t(){this.__data__=[],this.size=0}return Jv=t,Jv}var ep,PS;function Ps(){if(PS)return ep;PS=1;function t(e,r){return e===r||e!==e&&r!==r}return ep=t,ep}var tp,kS;function Hc(){if(kS)return tp;kS=1;var t=Ps();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return tp=e,tp}var rp,NS;function sW(){if(NS)return rp;NS=1;var t=Hc(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var s=i.length-1;return o==s?i.pop():r.call(i,o,1),--this.size,!0}return rp=n,rp}var np,OS;function lW(){if(OS)return np;OS=1;var t=Hc();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return np=e,np}var ap,IS;function uW(){if(IS)return ap;IS=1;var t=Hc();function e(r){return t(this.__data__,r)>-1}return ap=e,ap}var ip,FS;function fW(){if(FS)return ip;FS=1;var t=Hc();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return ip=e,ip}var op,BS;function Uc(){if(BS)return op;BS=1;var t=oW(),e=sW(),r=lW(),n=uW(),a=fW();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,op=i,op}var sp,qS;function cW(){if(qS)return sp;qS=1;var t=Uc();function e(){this.__data__=new t,this.size=0}return sp=e,sp}var lp,zS;function dW(){if(zS)return lp;zS=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return lp=t,lp}var up,GS;function hW(){if(GS)return up;GS=1;function t(e){return this.__data__.get(e)}return up=t,up}var fp,HS;function vW(){if(HS)return fp;HS=1;function t(e){return this.__data__.has(e)}return fp=t,fp}var cp,US;function LN(){if(US)return cp;US=1;var t=typeof gf=="object"&&gf&&gf.Object===Object&&gf;return cp=t,cp}var dp,VS;function da(){if(VS)return dp;VS=1;var t=LN(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return dp=r,dp}var hp,WS;function ks(){if(WS)return hp;WS=1;var t=da(),e=t.Symbol;return hp=e,hp}var vp,$S;function pW(){if($S)return vp;$S=1;var t=ks(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var s=r.call(o,a),u=o[a];try{o[a]=void 0;var f=!0}catch{}var c=n.call(o);return f&&(s?o[a]=u:delete o[a]),c}return vp=i,vp}var pp,YS;function gW(){if(YS)return pp;YS=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return pp=r,pp}var gp,XS;function Ao(){if(XS)return gp;XS=1;var t=ks(),e=pW(),r=gW(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(s){return s==null?s===void 0?a:n:i&&i in Object(s)?e(s):r(s)}return gp=o,gp}var yp,KS;function Xn(){if(KS)return yp;KS=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return yp=t,yp}var mp,jS;function yu(){if(jS)return mp;jS=1;var t=Ao(),e=Xn(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(s){if(!e(s))return!1;var u=t(s);return u==n||u==a||u==r||u==i}return mp=o,mp}var bp,ZS;function yW(){if(ZS)return bp;ZS=1;var t=da(),e=t["__core-js_shared__"];return bp=e,bp}var wp,QS;function mW(){if(QS)return wp;QS=1;var t=yW(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return wp=r,wp}var xp,JS;function DN(){if(JS)return xp;JS=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return xp=r,xp}var Cp,eA;function bW(){if(eA)return Cp;eA=1;var t=yu(),e=mW(),r=Xn(),n=DN(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,f=s.hasOwnProperty,c=RegExp("^"+u.call(f).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(p){if(!r(p)||e(p))return!1;var y=t(p)?c:i;return y.test(n(p))}return Cp=h,Cp}var Ep,tA;function wW(){if(tA)return Ep;tA=1;function t(e,r){return e==null?void 0:e[r]}return Ep=t,Ep}var Tp,rA;function Lo(){if(rA)return Tp;rA=1;var t=bW(),e=wW();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Tp=r,Tp}var Sp,nA;function U1(){if(nA)return Sp;nA=1;var t=Lo(),e=da(),r=t(e,"Map");return Sp=r,Sp}var Ap,aA;function Vc(){if(aA)return Ap;aA=1;var t=Lo(),e=t(Object,"create");return Ap=e,Ap}var Lp,iA;function xW(){if(iA)return Lp;iA=1;var t=Vc();function e(){this.__data__=t?t(null):{},this.size=0}return Lp=e,Lp}var Dp,oA;function CW(){if(oA)return Dp;oA=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Dp=t,Dp}var _p,sA;function EW(){if(sA)return _p;sA=1;var t=Vc(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var s=o[i];return s===e?void 0:s}return n.call(o,i)?o[i]:void 0}return _p=a,_p}var Mp,lA;function TW(){if(lA)return Mp;lA=1;var t=Vc(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Mp=n,Mp}var Rp,uA;function SW(){if(uA)return Rp;uA=1;var t=Vc(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Rp=r,Rp}var Pp,fA;function AW(){if(fA)return Pp;fA=1;var t=xW(),e=CW(),r=EW(),n=TW(),a=SW();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Pp=i,Pp}var kp,cA;function LW(){if(cA)return kp;cA=1;var t=AW(),e=Uc(),r=U1();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return kp=n,kp}var Np,dA;function DW(){if(dA)return Np;dA=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Np=t,Np}var Op,hA;function Wc(){if(hA)return Op;hA=1;var t=DW();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Op=e,Op}var Ip,vA;function _W(){if(vA)return Ip;vA=1;var t=Wc();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Ip=e,Ip}var Fp,pA;function MW(){if(pA)return Fp;pA=1;var t=Wc();function e(r){return t(this,r).get(r)}return Fp=e,Fp}var Bp,gA;function RW(){if(gA)return Bp;gA=1;var t=Wc();function e(r){return t(this,r).has(r)}return Bp=e,Bp}var qp,yA;function PW(){if(yA)return qp;yA=1;var t=Wc();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return qp=e,qp}var zp,mA;function V1(){if(mA)return zp;mA=1;var t=LW(),e=_W(),r=MW(),n=RW(),a=PW();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,zp=i,zp}var Gp,bA;function kW(){if(bA)return Gp;bA=1;var t=Uc(),e=U1(),r=V1(),n=200;function a(i,o){var s=this.__data__;if(s instanceof t){var u=s.__data__;if(!e||u.length<n-1)return u.push([i,o]),this.size=++s.size,this;s=this.__data__=new r(u)}return s.set(i,o),this.size=s.size,this}return Gp=a,Gp}var Hp,wA;function $c(){if(wA)return Hp;wA=1;var t=Uc(),e=cW(),r=dW(),n=hW(),a=vW(),i=kW();function o(s){var u=this.__data__=new t(s);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,Hp=o,Hp}var Up,xA;function W1(){if(xA)return Up;xA=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a&&r(e[n],n,e)!==!1;);return e}return Up=t,Up}var Vp,CA;function _N(){if(CA)return Vp;CA=1;var t=Lo(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Vp=e,Vp}var Wp,EA;function Yc(){if(EA)return Wp;EA=1;var t=_N();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return Wp=e,Wp}var $p,TA;function Xc(){if(TA)return $p;TA=1;var t=Yc(),e=Ps(),r=Object.prototype,n=r.hasOwnProperty;function a(i,o,s){var u=i[o];(!(n.call(i,o)&&e(u,s))||s===void 0&&!(o in i))&&t(i,o,s)}return $p=a,$p}var Yp,SA;function mu(){if(SA)return Yp;SA=1;var t=Xc(),e=Yc();function r(n,a,i,o){var s=!i;i||(i={});for(var u=-1,f=a.length;++u<f;){var c=a[u],h=o?o(i[c],n[c],c,i,n):void 0;h===void 0&&(h=n[c]),s?e(i,c,h):t(i,c,h)}return i}return Yp=r,Yp}var Xp,AA;function NW(){if(AA)return Xp;AA=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return Xp=t,Xp}var Kp,LA;function Ra(){if(LA)return Kp;LA=1;function t(e){return e!=null&&typeof e=="object"}return Kp=t,Kp}var jp,DA;function OW(){if(DA)return jp;DA=1;var t=Ao(),e=Ra(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return jp=n,jp}var Zp,_A;function bu(){if(_A)return Zp;_A=1;var t=OW(),e=Ra(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t(function(){return arguments}())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return Zp=i,Zp}var Qp,MA;function _r(){if(MA)return Qp;MA=1;var t=Array.isArray;return Qp=t,Qp}var Tl={exports:{}},Jp,RA;function IW(){if(RA)return Jp;RA=1;function t(){return!1}return Jp=t,Jp}Tl.exports;var PA;function Ns(){return PA||(PA=1,function(t,e){var r=da(),n=IW(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,s=o?r.Buffer:void 0,u=s?s.isBuffer:void 0,f=u||n;t.exports=f}(Tl,Tl.exports)),Tl.exports}var eg,kA;function Kc(){if(kA)return eg;kA=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return eg=r,eg}var tg,NA;function $1(){if(NA)return tg;NA=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return tg=e,tg}var rg,OA;function FW(){if(OA)return rg;OA=1;var t=Ao(),e=$1(),r=Ra(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",s="[object Error]",u="[object Function]",f="[object Map]",c="[object Number]",h="[object Object]",p="[object RegExp]",y="[object Set]",g="[object String]",E="[object WeakMap]",w="[object ArrayBuffer]",v="[object DataView]",C="[object Float32Array]",x="[object Float64Array]",S="[object Int8Array]",A="[object Int16Array]",D="[object Int32Array]",_="[object Uint8Array]",M="[object Uint8ClampedArray]",k="[object Uint16Array]",F="[object Uint32Array]",G={};G[C]=G[x]=G[S]=G[A]=G[D]=G[_]=G[M]=G[k]=G[F]=!0,G[n]=G[a]=G[w]=G[i]=G[v]=G[o]=G[s]=G[u]=G[f]=G[c]=G[h]=G[p]=G[y]=G[g]=G[E]=!1;function B(q){return r(q)&&e(q.length)&&!!G[t(q)]}return rg=B,rg}var ng,IA;function jc(){if(IA)return ng;IA=1;function t(e){return function(r){return e(r)}}return ng=t,ng}var Sl={exports:{}};Sl.exports;var FA;function Y1(){return FA||(FA=1,function(t,e){var r=LN(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,s=function(){try{var u=a&&a.require&&a.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s}(Sl,Sl.exports)),Sl.exports}var ag,BA;function wu(){if(BA)return ag;BA=1;var t=FW(),e=jc(),r=Y1(),n=r&&r.isTypedArray,a=n?e(n):t;return ag=a,ag}var ig,qA;function MN(){if(qA)return ig;qA=1;var t=NW(),e=bu(),r=_r(),n=Ns(),a=Kc(),i=wu(),o=Object.prototype,s=o.hasOwnProperty;function u(f,c){var h=r(f),p=!h&&e(f),y=!h&&!p&&n(f),g=!h&&!p&&!y&&i(f),E=h||p||y||g,w=E?t(f.length,String):[],v=w.length;for(var C in f)(c||s.call(f,C))&&!(E&&(C=="length"||y&&(C=="offset"||C=="parent")||g&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||a(C,v)))&&w.push(C);return w}return ig=u,ig}var og,zA;function Zc(){if(zA)return og;zA=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return og=e,og}var sg,GA;function RN(){if(GA)return sg;GA=1;function t(e,r){return function(n){return e(r(n))}}return sg=t,sg}var lg,HA;function BW(){if(HA)return lg;HA=1;var t=RN(),e=t(Object.keys,Object);return lg=e,lg}var ug,UA;function X1(){if(UA)return ug;UA=1;var t=Zc(),e=BW(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var s in Object(i))n.call(i,s)&&s!="constructor"&&o.push(s);return o}return ug=a,ug}var fg,VA;function ri(){if(VA)return fg;VA=1;var t=yu(),e=$1();function r(n){return n!=null&&e(n.length)&&!t(n)}return fg=r,fg}var cg,WA;function Gi(){if(WA)return cg;WA=1;var t=MN(),e=X1(),r=ri();function n(a){return r(a)?t(a):e(a)}return cg=n,cg}var dg,$A;function qW(){if($A)return dg;$A=1;var t=mu(),e=Gi();function r(n,a){return n&&t(a,e(a),n)}return dg=r,dg}var hg,YA;function zW(){if(YA)return hg;YA=1;function t(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}return hg=t,hg}var vg,XA;function GW(){if(XA)return vg;XA=1;var t=Xn(),e=Zc(),r=zW(),n=Object.prototype,a=n.hasOwnProperty;function i(o){if(!t(o))return r(o);var s=e(o),u=[];for(var f in o)f=="constructor"&&(s||!a.call(o,f))||u.push(f);return u}return vg=i,vg}var pg,KA;function Do(){if(KA)return pg;KA=1;var t=MN(),e=GW(),r=ri();function n(a){return r(a)?t(a,!0):e(a)}return pg=n,pg}var gg,jA;function HW(){if(jA)return gg;jA=1;var t=mu(),e=Do();function r(n,a){return n&&t(a,e(a),n)}return gg=r,gg}var Al={exports:{}};Al.exports;var ZA;function PN(){return ZA||(ZA=1,function(t,e){var r=da(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;function u(f,c){if(c)return f.slice();var h=f.length,p=s?s(h):new f.constructor(h);return f.copy(p),p}t.exports=u}(Al,Al.exports)),Al.exports}var yg,QA;function kN(){if(QA)return yg;QA=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return yg=t,yg}var mg,JA;function NN(){if(JA)return mg;JA=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var s=e[n];r(s,n,e)&&(o[i++]=s)}return o}return mg=t,mg}var bg,eL;function ON(){if(eL)return bg;eL=1;function t(){return[]}return bg=t,bg}var wg,tL;function K1(){if(tL)return wg;tL=1;var t=NN(),e=ON(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(s){return n.call(o,s)}))}:e;return wg=i,wg}var xg,rL;function UW(){if(rL)return xg;rL=1;var t=mu(),e=K1();function r(n,a){return t(n,e(n),a)}return xg=r,xg}var Cg,nL;function j1(){if(nL)return Cg;nL=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return Cg=t,Cg}var Eg,aL;function Qc(){if(aL)return Eg;aL=1;var t=RN(),e=t(Object.getPrototypeOf,Object);return Eg=e,Eg}var Tg,iL;function IN(){if(iL)return Tg;iL=1;var t=j1(),e=Qc(),r=K1(),n=ON(),a=Object.getOwnPropertySymbols,i=a?function(o){for(var s=[];o;)t(s,r(o)),o=e(o);return s}:n;return Tg=i,Tg}var Sg,oL;function VW(){if(oL)return Sg;oL=1;var t=mu(),e=IN();function r(n,a){return t(n,e(n),a)}return Sg=r,Sg}var Ag,sL;function FN(){if(sL)return Ag;sL=1;var t=j1(),e=_r();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return Ag=r,Ag}var Lg,lL;function BN(){if(lL)return Lg;lL=1;var t=FN(),e=K1(),r=Gi();function n(a){return t(a,r,e)}return Lg=n,Lg}var Dg,uL;function WW(){if(uL)return Dg;uL=1;var t=FN(),e=IN(),r=Do();function n(a){return t(a,r,e)}return Dg=n,Dg}var _g,fL;function $W(){if(fL)return _g;fL=1;var t=Lo(),e=da(),r=t(e,"DataView");return _g=r,_g}var Mg,cL;function YW(){if(cL)return Mg;cL=1;var t=Lo(),e=da(),r=t(e,"Promise");return Mg=r,Mg}var Rg,dL;function qN(){if(dL)return Rg;dL=1;var t=Lo(),e=da(),r=t(e,"Set");return Rg=r,Rg}var Pg,hL;function XW(){if(hL)return Pg;hL=1;var t=Lo(),e=da(),r=t(e,"WeakMap");return Pg=r,Pg}var kg,vL;function Os(){if(vL)return kg;vL=1;var t=$W(),e=U1(),r=YW(),n=qN(),a=XW(),i=Ao(),o=DN(),s="[object Map]",u="[object Object]",f="[object Promise]",c="[object Set]",h="[object WeakMap]",p="[object DataView]",y=o(t),g=o(e),E=o(r),w=o(n),v=o(a),C=i;return(t&&C(new t(new ArrayBuffer(1)))!=p||e&&C(new e)!=s||r&&C(r.resolve())!=f||n&&C(new n)!=c||a&&C(new a)!=h)&&(C=function(x){var S=i(x),A=S==u?x.constructor:void 0,D=A?o(A):"";if(D)switch(D){case y:return p;case g:return s;case E:return f;case w:return c;case v:return h}return S}),kg=C,kg}var Ng,pL;function KW(){if(pL)return Ng;pL=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n){var a=n.length,i=new n.constructor(a);return a&&typeof n[0]=="string"&&e.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return Ng=r,Ng}var Og,gL;function zN(){if(gL)return Og;gL=1;var t=da(),e=t.Uint8Array;return Og=e,Og}var Ig,yL;function Z1(){if(yL)return Ig;yL=1;var t=zN();function e(r){var n=new r.constructor(r.byteLength);return new t(n).set(new t(r)),n}return Ig=e,Ig}var Fg,mL;function jW(){if(mL)return Fg;mL=1;var t=Z1();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}return Fg=e,Fg}var Bg,bL;function ZW(){if(bL)return Bg;bL=1;var t=/\w*$/;function e(r){var n=new r.constructor(r.source,t.exec(r));return n.lastIndex=r.lastIndex,n}return Bg=e,Bg}var qg,wL;function QW(){if(wL)return qg;wL=1;var t=ks(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function n(a){return r?Object(r.call(a)):{}}return qg=n,qg}var zg,xL;function GN(){if(xL)return zg;xL=1;var t=Z1();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}return zg=e,zg}var Gg,CL;function JW(){if(CL)return Gg;CL=1;var t=Z1(),e=jW(),r=ZW(),n=QW(),a=GN(),i="[object Boolean]",o="[object Date]",s="[object Map]",u="[object Number]",f="[object RegExp]",c="[object Set]",h="[object String]",p="[object Symbol]",y="[object ArrayBuffer]",g="[object DataView]",E="[object Float32Array]",w="[object Float64Array]",v="[object Int8Array]",C="[object Int16Array]",x="[object Int32Array]",S="[object Uint8Array]",A="[object Uint8ClampedArray]",D="[object Uint16Array]",_="[object Uint32Array]";function M(k,F,G){var B=k.constructor;switch(F){case y:return t(k);case i:case o:return new B(+k);case g:return e(k,G);case E:case w:case v:case C:case x:case S:case A:case D:case _:return a(k,G);case s:return new B;case u:case h:return new B(k);case f:return r(k);case c:return new B;case p:return n(k)}}return Gg=M,Gg}var Hg,EL;function HN(){if(EL)return Hg;EL=1;var t=Xn(),e=Object.create,r=function(){function n(){}return function(a){if(!t(a))return{};if(e)return e(a);n.prototype=a;var i=new n;return n.prototype=void 0,i}}();return Hg=r,Hg}var Ug,TL;function UN(){if(TL)return Ug;TL=1;var t=HN(),e=Qc(),r=Zc();function n(a){return typeof a.constructor=="function"&&!r(a)?t(e(a)):{}}return Ug=n,Ug}var Vg,SL;function e3(){if(SL)return Vg;SL=1;var t=Os(),e=Ra(),r="[object Map]";function n(a){return e(a)&&t(a)==r}return Vg=n,Vg}var Wg,AL;function t3(){if(AL)return Wg;AL=1;var t=e3(),e=jc(),r=Y1(),n=r&&r.isMap,a=n?e(n):t;return Wg=a,Wg}var $g,LL;function r3(){if(LL)return $g;LL=1;var t=Os(),e=Ra(),r="[object Set]";function n(a){return e(a)&&t(a)==r}return $g=n,$g}var Yg,DL;function n3(){if(DL)return Yg;DL=1;var t=r3(),e=jc(),r=Y1(),n=r&&r.isSet,a=n?e(n):t;return Yg=a,Yg}var Xg,_L;function VN(){if(_L)return Xg;_L=1;var t=$c(),e=W1(),r=Xc(),n=qW(),a=HW(),i=PN(),o=kN(),s=UW(),u=VW(),f=BN(),c=WW(),h=Os(),p=KW(),y=JW(),g=UN(),E=_r(),w=Ns(),v=t3(),C=Xn(),x=n3(),S=Gi(),A=Do(),D=1,_=2,M=4,k="[object Arguments]",F="[object Array]",G="[object Boolean]",B="[object Date]",q="[object Error]",R="[object Function]",P="[object GeneratorFunction]",N="[object Map]",I="[object Number]",z="[object Object]",ae="[object RegExp]",re="[object Set]",K="[object String]",V="[object Symbol]",Z="[object WeakMap]",U="[object ArrayBuffer]",W="[object DataView]",Y="[object Float32Array]",ee="[object Float64Array]",oe="[object Int8Array]",te="[object Int16Array]",ie="[object Int32Array]",se="[object Uint8Array]",$="[object Uint8ClampedArray]",ne="[object Uint16Array]",le="[object Uint32Array]",Se={};Se[k]=Se[F]=Se[U]=Se[W]=Se[G]=Se[B]=Se[Y]=Se[ee]=Se[oe]=Se[te]=Se[ie]=Se[N]=Se[I]=Se[z]=Se[ae]=Se[re]=Se[K]=Se[V]=Se[se]=Se[$]=Se[ne]=Se[le]=!0,Se[q]=Se[R]=Se[Z]=!1;function De(be,Te,ve,de,ye,Ce){var ue,Ae=Te&D,Pe=Te&_,Fe=Te&M;if(ve&&(ue=ye?ve(be,de,ye,Ce):ve(be)),ue!==void 0)return ue;if(!C(be))return be;var Ye=E(be);if(Ye){if(ue=p(be),!Ae)return o(be,ue)}else{var Ve=h(be),Qe=Ve==R||Ve==P;if(w(be))return i(be,Ae);if(Ve==z||Ve==k||Qe&&!ye){if(ue=Pe||Qe?{}:g(be),!Ae)return Pe?u(be,a(ue,be)):s(be,n(ue,be))}else{if(!Se[Ve])return ye?be:{};ue=y(be,Ve,Ae)}}Ce||(Ce=new t);var Xe=Ce.get(be);if(Xe)return Xe;Ce.set(be,ue),x(be)?be.forEach(function(j){ue.add(De(j,Te,ve,j,be,Ce))}):v(be)&&be.forEach(function(j,pe){ue.set(pe,De(j,Te,ve,pe,be,Ce))});var We=Fe?Pe?c:f:Pe?A:S,he=Ye?void 0:We(be);return e(he||be,function(j,pe){he&&(pe=j,j=be[pe]),r(ue,pe,De(j,Te,ve,pe,be,Ce))}),ue}return Xg=De,Xg}var Kg,ML;function a3(){if(ML)return Kg;ML=1;var t=VN(),e=4;function r(n){return t(n,e)}return Kg=r,Kg}var jg,RL;function Q1(){if(RL)return jg;RL=1;function t(e){return function(){return e}}return jg=t,jg}var Zg,PL;function i3(){if(PL)return Zg;PL=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),s=a(r),u=s.length;u--;){var f=s[e?u:++i];if(n(o[f],f,o)===!1)break}return r}}return Zg=t,Zg}var Qg,kL;function J1(){if(kL)return Qg;kL=1;var t=i3(),e=t();return Qg=e,Qg}var Jg,NL;function ew(){if(NL)return Jg;NL=1;var t=J1(),e=Gi();function r(n,a){return n&&t(n,a,e)}return Jg=r,Jg}var ey,OL;function o3(){if(OL)return ey;OL=1;var t=ri();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,s=n?o:-1,u=Object(a);(n?s--:++s<o)&&i(u[s],s,u)!==!1;);return a}}return ey=e,ey}var ty,IL;function Jc(){if(IL)return ty;IL=1;var t=ew(),e=o3(),r=e(t);return ty=r,ty}var ry,FL;function _o(){if(FL)return ry;FL=1;function t(e){return e}return ry=t,ry}var ny,BL;function WN(){if(BL)return ny;BL=1;var t=_o();function e(r){return typeof r=="function"?r:t}return ny=e,ny}var ay,qL;function $N(){if(qL)return ay;qL=1;var t=W1(),e=Jc(),r=WN(),n=_r();function a(i,o){var s=n(i)?t:e;return s(i,r(o))}return ay=a,ay}var iy,zL;function YN(){return zL||(zL=1,iy=$N()),iy}var oy,GL;function s3(){if(GL)return oy;GL=1;var t=Jc();function e(r,n){var a=[];return t(r,function(i,o,s){n(i,o,s)&&a.push(i)}),a}return oy=e,oy}var sy,HL;function l3(){if(HL)return sy;HL=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return sy=e,sy}var ly,UL;function u3(){if(UL)return ly;UL=1;function t(e){return this.__data__.has(e)}return ly=t,ly}var uy,VL;function XN(){if(VL)return uy;VL=1;var t=V1(),e=l3(),r=u3();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,uy=n,uy}var fy,WL;function f3(){if(WL)return fy;WL=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return fy=t,fy}var cy,$L;function KN(){if($L)return cy;$L=1;function t(e,r){return e.has(r)}return cy=t,cy}var dy,YL;function jN(){if(YL)return dy;YL=1;var t=XN(),e=f3(),r=KN(),n=1,a=2;function i(o,s,u,f,c,h){var p=u&n,y=o.length,g=s.length;if(y!=g&&!(p&&g>y))return!1;var E=h.get(o),w=h.get(s);if(E&&w)return E==s&&w==o;var v=-1,C=!0,x=u&a?new t:void 0;for(h.set(o,s),h.set(s,o);++v<y;){var S=o[v],A=s[v];if(f)var D=p?f(A,S,v,s,o,h):f(S,A,v,o,s,h);if(D!==void 0){if(D)continue;C=!1;break}if(x){if(!e(s,function(_,M){if(!r(x,M)&&(S===_||c(S,_,u,f,h)))return x.push(M)})){C=!1;break}}else if(!(S===A||c(S,A,u,f,h))){C=!1;break}}return h.delete(o),h.delete(s),C}return dy=i,dy}var hy,XL;function c3(){if(XL)return hy;XL=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return hy=t,hy}var vy,KL;function tw(){if(KL)return vy;KL=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return vy=t,vy}var py,jL;function d3(){if(jL)return py;jL=1;var t=ks(),e=zN(),r=Ps(),n=jN(),a=c3(),i=tw(),o=1,s=2,u="[object Boolean]",f="[object Date]",c="[object Error]",h="[object Map]",p="[object Number]",y="[object RegExp]",g="[object Set]",E="[object String]",w="[object Symbol]",v="[object ArrayBuffer]",C="[object DataView]",x=t?t.prototype:void 0,S=x?x.valueOf:void 0;function A(D,_,M,k,F,G,B){switch(M){case C:if(D.byteLength!=_.byteLength||D.byteOffset!=_.byteOffset)return!1;D=D.buffer,_=_.buffer;case v:return!(D.byteLength!=_.byteLength||!G(new e(D),new e(_)));case u:case f:case p:return r(+D,+_);case c:return D.name==_.name&&D.message==_.message;case y:case E:return D==_+"";case h:var q=a;case g:var R=k&o;if(q||(q=i),D.size!=_.size&&!R)return!1;var P=B.get(D);if(P)return P==_;k|=s,B.set(D,_);var N=n(q(D),q(_),k,F,G,B);return B.delete(D),N;case w:if(S)return S.call(D)==S.call(_)}return!1}return py=A,py}var gy,ZL;function h3(){if(ZL)return gy;ZL=1;var t=BN(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,s,u,f,c){var h=s&e,p=t(i),y=p.length,g=t(o),E=g.length;if(y!=E&&!h)return!1;for(var w=y;w--;){var v=p[w];if(!(h?v in o:n.call(o,v)))return!1}var C=c.get(i),x=c.get(o);if(C&&x)return C==o&&x==i;var S=!0;c.set(i,o),c.set(o,i);for(var A=h;++w<y;){v=p[w];var D=i[v],_=o[v];if(u)var M=h?u(_,D,v,o,i,c):u(D,_,v,i,o,c);if(!(M===void 0?D===_||f(D,_,s,u,c):M)){S=!1;break}A||(A=v=="constructor")}if(S&&!A){var k=i.constructor,F=o.constructor;k!=F&&"constructor"in i&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof F=="function"&&F instanceof F)&&(S=!1)}return c.delete(i),c.delete(o),S}return gy=a,gy}var yy,QL;function v3(){if(QL)return yy;QL=1;var t=$c(),e=jN(),r=d3(),n=h3(),a=Os(),i=_r(),o=Ns(),s=wu(),u=1,f="[object Arguments]",c="[object Array]",h="[object Object]",p=Object.prototype,y=p.hasOwnProperty;function g(E,w,v,C,x,S){var A=i(E),D=i(w),_=A?c:a(E),M=D?c:a(w);_=_==f?h:_,M=M==f?h:M;var k=_==h,F=M==h,G=_==M;if(G&&o(E)){if(!o(w))return!1;A=!0,k=!1}if(G&&!k)return S||(S=new t),A||s(E)?e(E,w,v,C,x,S):r(E,w,_,v,C,x,S);if(!(v&u)){var B=k&&y.call(E,"__wrapped__"),q=F&&y.call(w,"__wrapped__");if(B||q){var R=B?E.value():E,P=q?w.value():w;return S||(S=new t),x(R,P,v,C,S)}}return G?(S||(S=new t),n(E,w,v,C,x,S)):!1}return yy=g,yy}var my,JL;function ZN(){if(JL)return my;JL=1;var t=v3(),e=Ra();function r(n,a,i,o,s){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,s)}return my=r,my}var by,eD;function p3(){if(eD)return by;eD=1;var t=$c(),e=ZN(),r=1,n=2;function a(i,o,s,u){var f=s.length,c=f,h=!u;if(i==null)return!c;for(i=Object(i);f--;){var p=s[f];if(h&&p[2]?p[1]!==i[p[0]]:!(p[0]in i))return!1}for(;++f<c;){p=s[f];var y=p[0],g=i[y],E=p[1];if(h&&p[2]){if(g===void 0&&!(y in i))return!1}else{var w=new t;if(u)var v=u(g,E,y,i,o,w);if(!(v===void 0?e(E,g,r|n,u,w):v))return!1}}return!0}return by=a,by}var wy,tD;function QN(){if(tD)return wy;tD=1;var t=Xn();function e(r){return r===r&&!t(r)}return wy=e,wy}var xy,rD;function g3(){if(rD)return xy;rD=1;var t=QN(),e=Gi();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],s=n[o];a[i]=[o,s,t(s)]}return a}return xy=r,xy}var Cy,nD;function JN(){if(nD)return Cy;nD=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return Cy=t,Cy}var Ey,aD;function y3(){if(aD)return Ey;aD=1;var t=p3(),e=g3(),r=JN();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return Ey=n,Ey}var Ty,iD;function Is(){if(iD)return Ty;iD=1;var t=Ao(),e=Ra(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Ty=n,Ty}var Sy,oD;function rw(){if(oD)return Sy;oD=1;var t=_r(),e=Is(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return Sy=a,Sy}var Ay,sD;function m3(){if(sD)return Ay;sD=1;var t=V1(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,s=a?a.apply(this,o):o[0],u=i.cache;if(u.has(s))return u.get(s);var f=n.apply(this,o);return i.cache=u.set(s,f)||u,f};return i.cache=new(r.Cache||t),i}return r.Cache=t,Ay=r,Ay}var Ly,lD;function b3(){if(lD)return Ly;lD=1;var t=m3(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return Ly=r,Ly}var Dy,uD;function w3(){if(uD)return Dy;uD=1;var t=b3(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,s,u,f){i.push(u?f.replace(r,"$1"):s||o)}),i});return Dy=n,Dy}var _y,fD;function ed(){if(fD)return _y;fD=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return _y=t,_y}var My,cD;function x3(){if(cD)return My;cD=1;var t=ks(),e=ed(),r=_r(),n=Is(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(s){if(typeof s=="string")return s;if(r(s))return e(s,o)+"";if(n(s))return i?i.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return My=o,My}var Ry,dD;function eO(){if(dD)return Ry;dD=1;var t=x3();function e(r){return r==null?"":t(r)}return Ry=e,Ry}var Py,hD;function td(){if(hD)return Py;hD=1;var t=_r(),e=rw(),r=w3(),n=eO();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return Py=a,Py}var ky,vD;function xu(){if(vD)return ky;vD=1;var t=Is();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return ky=e,ky}var Ny,pD;function rd(){if(pD)return Ny;pD=1;var t=td(),e=xu();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return Ny=r,Ny}var Oy,gD;function C3(){if(gD)return Oy;gD=1;var t=rd();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return Oy=e,Oy}var Iy,yD;function E3(){if(yD)return Iy;yD=1;function t(e,r){return e!=null&&r in Object(e)}return Iy=t,Iy}var Fy,mD;function tO(){if(mD)return Fy;mD=1;var t=td(),e=bu(),r=_r(),n=Kc(),a=$1(),i=xu();function o(s,u,f){u=t(u,s);for(var c=-1,h=u.length,p=!1;++c<h;){var y=i(u[c]);if(!(p=s!=null&&f(s,y)))break;s=s[y]}return p||++c!=h?p:(h=s==null?0:s.length,!!h&&a(h)&&n(y,h)&&(r(s)||e(s)))}return Fy=o,Fy}var By,bD;function rO(){if(bD)return By;bD=1;var t=E3(),e=tO();function r(n,a){return n!=null&&e(n,a,t)}return By=r,By}var qy,wD;function T3(){if(wD)return qy;wD=1;var t=ZN(),e=C3(),r=rO(),n=rw(),a=QN(),i=JN(),o=xu(),s=1,u=2;function f(c,h){return n(c)&&a(h)?i(o(c),h):function(p){var y=e(p,c);return y===void 0&&y===h?r(p,c):t(h,y,s|u)}}return qy=f,qy}var zy,xD;function nO(){if(xD)return zy;xD=1;function t(e){return function(r){return r==null?void 0:r[e]}}return zy=t,zy}var Gy,CD;function S3(){if(CD)return Gy;CD=1;var t=rd();function e(r){return function(n){return t(n,r)}}return Gy=e,Gy}var Hy,ED;function A3(){if(ED)return Hy;ED=1;var t=nO(),e=S3(),r=rw(),n=xu();function a(i){return r(i)?t(n(i)):e(i)}return Hy=a,Hy}var Uy,TD;function ni(){if(TD)return Uy;TD=1;var t=y3(),e=T3(),r=_o(),n=_r(),a=A3();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return Uy=i,Uy}var Vy,SD;function aO(){if(SD)return Vy;SD=1;var t=NN(),e=s3(),r=ni(),n=_r();function a(i,o){var s=n(i)?t:e;return s(i,r(o,3))}return Vy=a,Vy}var Wy,AD;function L3(){if(AD)return Wy;AD=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n,a){return n!=null&&e.call(n,a)}return Wy=r,Wy}var $y,LD;function iO(){if(LD)return $y;LD=1;var t=L3(),e=tO();function r(n,a){return n!=null&&e(n,a,t)}return $y=r,$y}var Yy,DD;function D3(){if(DD)return Yy;DD=1;var t=X1(),e=Os(),r=bu(),n=_r(),a=ri(),i=Ns(),o=Zc(),s=wu(),u="[object Map]",f="[object Set]",c=Object.prototype,h=c.hasOwnProperty;function p(y){if(y==null)return!0;if(a(y)&&(n(y)||typeof y=="string"||typeof y.splice=="function"||i(y)||s(y)||r(y)))return!y.length;var g=e(y);if(g==u||g==f)return!y.size;if(o(y))return!t(y).length;for(var E in y)if(h.call(y,E))return!1;return!0}return Yy=p,Yy}var Xy,_D;function oO(){if(_D)return Xy;_D=1;function t(e){return e===void 0}return Xy=t,Xy}var Ky,MD;function sO(){if(MD)return Ky;MD=1;var t=Jc(),e=ri();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(s,u,f){o[++i]=a(s,u,f)}),o}return Ky=r,Ky}var jy,RD;function lO(){if(RD)return jy;RD=1;var t=ed(),e=ni(),r=sO(),n=_r();function a(i,o){var s=n(i)?t:r;return s(i,e(o,3))}return jy=a,jy}var Zy,PD;function _3(){if(PD)return Zy;PD=1;function t(e,r,n,a){var i=-1,o=e==null?0:e.length;for(a&&o&&(n=e[++i]);++i<o;)n=r(n,e[i],i,e);return n}return Zy=t,Zy}var Qy,kD;function M3(){if(kD)return Qy;kD=1;function t(e,r,n,a,i){return i(e,function(o,s,u){n=a?(a=!1,o):r(n,o,s,u)}),n}return Qy=t,Qy}var Jy,ND;function uO(){if(ND)return Jy;ND=1;var t=_3(),e=Jc(),r=ni(),n=M3(),a=_r();function i(o,s,u){var f=a(o)?t:n,c=arguments.length<3;return f(o,r(s,4),u,c,e)}return Jy=i,Jy}var em,OD;function R3(){if(OD)return em;OD=1;var t=Ao(),e=_r(),r=Ra(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return em=a,em}var tm,ID;function P3(){if(ID)return tm;ID=1;var t=nO(),e=t("length");return tm=e,tm}var rm,FD;function k3(){if(FD)return rm;FD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+t+a+i+"]");function u(f){return s.test(f)}return rm=u,rm}var nm,BD;function N3(){if(BD)return nm;BD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="["+t+"]",s="["+a+"]",u="\\ud83c[\\udffb-\\udfff]",f="(?:"+s+"|"+u+")",c="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",g=f+"?",E="["+i+"]?",w="(?:"+y+"(?:"+[c,h,p].join("|")+")"+E+g+")*",v=E+g+w,C="(?:"+[c+s+"?",s,h,p,o].join("|")+")",x=RegExp(u+"(?="+u+")|"+C+v,"g");function S(A){for(var D=x.lastIndex=0;x.test(A);)++D;return D}return nm=S,nm}var am,qD;function O3(){if(qD)return am;qD=1;var t=P3(),e=k3(),r=N3();function n(a){return e(a)?r(a):t(a)}return am=n,am}var im,zD;function I3(){if(zD)return im;zD=1;var t=X1(),e=Os(),r=ri(),n=R3(),a=O3(),i="[object Map]",o="[object Set]";function s(u){if(u==null)return 0;if(r(u))return n(u)?a(u):u.length;var f=e(u);return f==i||f==o?u.size:t(u).length}return im=s,im}var om,GD;function F3(){if(GD)return om;GD=1;var t=W1(),e=HN(),r=ew(),n=ni(),a=Qc(),i=_r(),o=Ns(),s=yu(),u=Xn(),f=wu();function c(h,p,y){var g=i(h),E=g||o(h)||f(h);if(p=n(p,4),y==null){var w=h&&h.constructor;E?y=g?new w:[]:u(h)?y=s(w)?e(a(h)):{}:y={}}return(E?t:r)(h,function(v,C,x){return p(y,v,C,x)}),y}return om=c,om}var sm,HD;function B3(){if(HD)return sm;HD=1;var t=ks(),e=bu(),r=_r(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return sm=a,sm}var lm,UD;function nw(){if(UD)return lm;UD=1;var t=j1(),e=B3();function r(n,a,i,o,s){var u=-1,f=n.length;for(i||(i=e),s||(s=[]);++u<f;){var c=n[u];a>0&&i(c)?a>1?r(c,a-1,i,o,s):t(s,c):o||(s[s.length]=c)}return s}return lm=r,lm}var um,VD;function q3(){if(VD)return um;VD=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return um=t,um}var fm,WD;function fO(){if(WD)return fm;WD=1;var t=q3(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,s=-1,u=e(o.length-a,0),f=Array(u);++s<u;)f[s]=o[a+s];s=-1;for(var c=Array(a+1);++s<a;)c[s]=o[s];return c[a]=i(f),t(n,this,c)}}return fm=r,fm}var cm,$D;function z3(){if($D)return cm;$D=1;var t=Q1(),e=_N(),r=_o(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return cm=n,cm}var dm,YD;function G3(){if(YD)return dm;YD=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var s=r(),u=e-(s-o);if(o=s,u>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return dm=n,dm}var hm,XD;function cO(){if(XD)return hm;XD=1;var t=z3(),e=G3(),r=e(t);return hm=r,hm}var vm,KD;function nd(){if(KD)return vm;KD=1;var t=_o(),e=fO(),r=cO();function n(a,i){return r(e(a,i,t),a+"")}return vm=n,vm}var pm,jD;function dO(){if(jD)return pm;jD=1;function t(e,r,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return pm=t,pm}var gm,ZD;function H3(){if(ZD)return gm;ZD=1;function t(e){return e!==e}return gm=t,gm}var ym,QD;function U3(){if(QD)return ym;QD=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return ym=t,ym}var mm,JD;function V3(){if(JD)return mm;JD=1;var t=dO(),e=H3(),r=U3();function n(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return mm=n,mm}var bm,e_;function W3(){if(e_)return bm;e_=1;var t=V3();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return bm=e,bm}var wm,t_;function $3(){if(t_)return wm;t_=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return wm=t,wm}var xm,r_;function Y3(){if(r_)return xm;r_=1;function t(){}return xm=t,xm}var Cm,n_;function X3(){if(n_)return Cm;n_=1;var t=qN(),e=Y3(),r=tw(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return Cm=a,Cm}var Em,a_;function K3(){if(a_)return Em;a_=1;var t=XN(),e=W3(),r=$3(),n=KN(),a=X3(),i=tw(),o=200;function s(u,f,c){var h=-1,p=e,y=u.length,g=!0,E=[],w=E;if(c)g=!1,p=r;else if(y>=o){var v=f?null:a(u);if(v)return i(v);g=!1,p=n,w=new t}else w=f?[]:E;e:for(;++h<y;){var C=u[h],x=f?f(C):C;if(C=c||C!==0?C:0,g&&x===x){for(var S=w.length;S--;)if(w[S]===x)continue e;f&&w.push(x),E.push(C)}else p(w,x,c)||(w!==E&&w.push(x),E.push(C))}return E}return Em=s,Em}var Tm,i_;function hO(){if(i_)return Tm;i_=1;var t=ri(),e=Ra();function r(n){return e(n)&&t(n)}return Tm=r,Tm}var Sm,o_;function j3(){if(o_)return Sm;o_=1;var t=nw(),e=nd(),r=K3(),n=hO(),a=e(function(i){return r(t(i,1,n,!0))});return Sm=a,Sm}var Am,s_;function Z3(){if(s_)return Am;s_=1;var t=ed();function e(r,n){return t(n,function(a){return r[a]})}return Am=e,Am}var Lm,l_;function vO(){if(l_)return Lm;l_=1;var t=Z3(),e=Gi();function r(n){return n==null?[]:t(n,e(n))}return Lm=r,Lm}var Dm,u_;function Kn(){if(u_)return Dm;u_=1;var t;if(typeof H1=="function")try{t={clone:a3(),constant:Q1(),each:YN(),filter:aO(),has:iO(),isArray:_r(),isEmpty:D3(),isFunction:yu(),isUndefined:oO(),keys:Gi(),map:lO(),reduce:uO(),size:I3(),transform:F3(),union:j3(),values:vO()}}catch{}return t||(t=window._),Dm=t,Dm}var _m,f_;function aw(){if(f_)return _m;f_=1;var t=Kn();_m=a;var e="\0",r="\0",n="";function a(c){this._isDirected=t.has(c,"directed")?c.directed:!0,this._isMultigraph=t.has(c,"multigraph")?c.multigraph:!1,this._isCompound=t.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(c){return this._label=c,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultNodeLabelFn=c,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return t.keys(this._nodes)},a.prototype.sources=function(){var c=this;return t.filter(this.nodes(),function(h){return t.isEmpty(c._in[h])})},a.prototype.sinks=function(){var c=this;return t.filter(this.nodes(),function(h){return t.isEmpty(c._out[h])})},a.prototype.setNodes=function(c,h){var p=arguments,y=this;return t.each(c,function(g){p.length>1?y.setNode(g,h):y.setNode(g)}),this},a.prototype.setNode=function(c,h){return t.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=h),this):(this._nodes[c]=arguments.length>1?h:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=r,this._children[c]={},this._children[r][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},a.prototype.node=function(c){return this._nodes[c]},a.prototype.hasNode=function(c){return t.has(this._nodes,c)},a.prototype.removeNode=function(c){var h=this;if(t.has(this._nodes,c)){var p=function(y){h.removeEdge(h._edgeObjs[y])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],t.each(this.children(c),function(y){h.setParent(y)}),delete this._children[c]),t.each(t.keys(this._in[c]),p),delete this._in[c],delete this._preds[c],t.each(t.keys(this._out[c]),p),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},a.prototype.setParent=function(c,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(h))h=r;else{h+="";for(var p=h;!t.isUndefined(p);p=this.parent(p))if(p===c)throw new Error("Setting "+h+" as parent of "+c+" would create a cycle");this.setNode(h)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=h,this._children[h][c]=!0,this},a.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},a.prototype.parent=function(c){if(this._isCompound){var h=this._parent[c];if(h!==r)return h}},a.prototype.children=function(c){if(t.isUndefined(c)&&(c=r),this._isCompound){var h=this._children[c];if(h)return t.keys(h)}else{if(c===r)return this.nodes();if(this.hasNode(c))return[]}},a.prototype.predecessors=function(c){var h=this._preds[c];if(h)return t.keys(h)},a.prototype.successors=function(c){var h=this._sucs[c];if(h)return t.keys(h)},a.prototype.neighbors=function(c){var h=this.predecessors(c);if(h)return t.union(h,this.successors(c))},a.prototype.isLeaf=function(c){var h;return this.isDirected()?h=this.successors(c):h=this.neighbors(c),h.length===0},a.prototype.filterNodes=function(c){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var p=this;t.each(this._nodes,function(E,w){c(w)&&h.setNode(w,E)}),t.each(this._edgeObjs,function(E){h.hasNode(E.v)&&h.hasNode(E.w)&&h.setEdge(E,p.edge(E))});var y={};function g(E){var w=p.parent(E);return w===void 0||h.hasNode(w)?(y[E]=w,w):w in y?y[w]:g(w)}return this._isCompound&&t.each(h.nodes(),function(E){h.setParent(E,g(E))}),h},a.prototype.setDefaultEdgeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultEdgeLabelFn=c,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return t.values(this._edgeObjs)},a.prototype.setPath=function(c,h){var p=this,y=arguments;return t.reduce(c,function(g,E){return y.length>1?p.setEdge(g,E,h):p.setEdge(g,E),E}),this},a.prototype.setEdge=function(){var c,h,p,y,g=!1,E=arguments[0];typeof E=="object"&&E!==null&&"v"in E?(c=E.v,h=E.w,p=E.name,arguments.length===2&&(y=arguments[1],g=!0)):(c=E,h=arguments[1],p=arguments[3],arguments.length>2&&(y=arguments[2],g=!0)),c=""+c,h=""+h,t.isUndefined(p)||(p=""+p);var w=s(this._isDirected,c,h,p);if(t.has(this._edgeLabels,w))return g&&(this._edgeLabels[w]=y),this;if(!t.isUndefined(p)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(h),this._edgeLabels[w]=g?y:this._defaultEdgeLabelFn(c,h,p);var v=u(this._isDirected,c,h,p);return c=v.v,h=v.w,Object.freeze(v),this._edgeObjs[w]=v,i(this._preds[h],c),i(this._sucs[c],h),this._in[h][w]=v,this._out[c][w]=v,this._edgeCount++,this},a.prototype.edge=function(c,h,p){var y=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,h,p);return this._edgeLabels[y]},a.prototype.hasEdge=function(c,h,p){var y=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,h,p);return t.has(this._edgeLabels,y)},a.prototype.removeEdge=function(c,h,p){var y=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,h,p),g=this._edgeObjs[y];return g&&(c=g.v,h=g.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[h],c),o(this._sucs[c],h),delete this._in[h][y],delete this._out[c][y],this._edgeCount--),this},a.prototype.inEdges=function(c,h){var p=this._in[c];if(p){var y=t.values(p);return h?t.filter(y,function(g){return g.v===h}):y}},a.prototype.outEdges=function(c,h){var p=this._out[c];if(p){var y=t.values(p);return h?t.filter(y,function(g){return g.w===h}):y}},a.prototype.nodeEdges=function(c,h){var p=this.inEdges(c,h);if(p)return p.concat(this.outEdges(c,h))};function i(c,h){c[h]?c[h]++:c[h]=1}function o(c,h){--c[h]||delete c[h]}function s(c,h,p,y){var g=""+h,E=""+p;if(!c&&g>E){var w=g;g=E,E=w}return g+n+E+n+(t.isUndefined(y)?e:y)}function u(c,h,p,y){var g=""+h,E=""+p;if(!c&&g>E){var w=g;g=E,E=w}var v={v:g,w:E};return y&&(v.name=y),v}function f(c,h){return s(c,h.v,h.w,h.name)}return _m}var Mm,c_;function Q3(){return c_||(c_=1,Mm="2.1.8"),Mm}var Rm,d_;function J3(){return d_||(d_=1,Rm={Graph:aw(),version:Q3()}),Rm}var Pm,h_;function e$(){if(h_)return Pm;h_=1;var t=Kn(),e=aw();Pm={write:r,read:i};function r(o){var s={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:a(o)};return t.isUndefined(o.graph())||(s.value=t.clone(o.graph())),s}function n(o){return t.map(o.nodes(),function(s){var u=o.node(s),f=o.parent(s),c={v:s};return t.isUndefined(u)||(c.value=u),t.isUndefined(f)||(c.parent=f),c})}function a(o){return t.map(o.edges(),function(s){var u=o.edge(s),f={v:s.v,w:s.w};return t.isUndefined(s.name)||(f.name=s.name),t.isUndefined(u)||(f.value=u),f})}function i(o){var s=new e(o.options).setGraph(o.value);return t.each(o.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),t.each(o.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return Pm}var km,v_;function t$(){if(v_)return km;v_=1;var t=Kn();km=e;function e(r){var n={},a=[],i;function o(s){t.has(n,s)||(n[s]=!0,i.push(s),t.each(r.successors(s),o),t.each(r.predecessors(s),o))}return t.each(r.nodes(),function(s){i=[],o(s),i.length&&a.push(i)}),a}return km}var Nm,p_;function pO(){if(p_)return Nm;p_=1;var t=Kn();Nm=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(r){return r.key})},e.prototype.has=function(r){return t.has(this._keyIndices,r)},e.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(r,n){var a=this._keyIndices;if(r=String(r),!t.has(a,r)){var i=this._arr,o=i.length;return a[r]=o,i.push({key:r,priority:n}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},e.prototype.decrease=function(r,n){var a=this._keyIndices[r];if(n>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[a].priority+" New: "+n);this._arr[a].priority=n,this._decrease(a)},e.prototype._heapify=function(r){var n=this._arr,a=2*r,i=a+1,o=r;a<n.length&&(o=n[a].priority<n[o].priority?a:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==r&&(this._swap(r,o),this._heapify(o)))},e.prototype._decrease=function(r){for(var n=this._arr,a=n[r].priority,i;r!==0&&(i=r>>1,!(n[i].priority<a));)this._swap(r,i),r=i},e.prototype._swap=function(r,n){var a=this._arr,i=this._keyIndices,o=a[r],s=a[n];a[r]=s,a[n]=o,i[s.key]=r,i[o.key]=n},Nm}var Om,g_;function gO(){if(g_)return Om;g_=1;var t=Kn(),e=pO();Om=n;var r=t.constant(1);function n(i,o,s,u){return a(i,String(o),s||r,u||function(f){return i.outEdges(f)})}function a(i,o,s,u){var f={},c=new e,h,p,y=function(g){var E=g.v!==h?g.v:g.w,w=f[E],v=s(g),C=p.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+v);C<w.distance&&(w.distance=C,w.predecessor=h,c.decrease(E,C))};for(i.nodes().forEach(function(g){var E=g===o?0:Number.POSITIVE_INFINITY;f[g]={distance:E},c.add(g,E)});c.size()>0&&(h=c.removeMin(),p=f[h],p.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(y);return f}return Om}var Im,y_;function r$(){if(y_)return Im;y_=1;var t=gO(),e=Kn();Im=r;function r(n,a,i){return e.transform(n.nodes(),function(o,s){o[s]=t(n,s,a,i)},{})}return Im}var Fm,m_;function yO(){if(m_)return Fm;m_=1;var t=Kn();Fm=e;function e(r){var n=0,a=[],i={},o=[];function s(u){var f=i[u]={onStack:!0,lowlink:n,index:n++};if(a.push(u),r.successors(u).forEach(function(p){t.has(i,p)?i[p].onStack&&(f.lowlink=Math.min(f.lowlink,i[p].index)):(s(p),f.lowlink=Math.min(f.lowlink,i[p].lowlink))}),f.lowlink===f.index){var c=[],h;do h=a.pop(),i[h].onStack=!1,c.push(h);while(u!==h);o.push(c)}}return r.nodes().forEach(function(u){t.has(i,u)||s(u)}),o}return Fm}var Bm,b_;function n$(){if(b_)return Bm;b_=1;var t=Kn(),e=yO();Bm=r;function r(n){return t.filter(e(n),function(a){return a.length>1||a.length===1&&n.hasEdge(a[0],a[0])})}return Bm}var qm,w_;function a$(){if(w_)return qm;w_=1;var t=Kn();qm=r;var e=t.constant(1);function r(a,i,o){return n(a,i||e,o||function(s){return a.outEdges(s)})}function n(a,i,o){var s={},u=a.nodes();return u.forEach(function(f){s[f]={},s[f][f]={distance:0},u.forEach(function(c){f!==c&&(s[f][c]={distance:Number.POSITIVE_INFINITY})}),o(f).forEach(function(c){var h=c.v===f?c.w:c.v,p=i(c);s[f][h]={distance:p,predecessor:f}})}),u.forEach(function(f){var c=s[f];u.forEach(function(h){var p=s[h];u.forEach(function(y){var g=p[f],E=c[y],w=p[y],v=g.distance+E.distance;v<w.distance&&(w.distance=v,w.predecessor=E.predecessor)})})}),s}return qm}var zm,x_;function mO(){if(x_)return zm;x_=1;var t=Kn();zm=e,e.CycleException=r;function e(n){var a={},i={},o=[];function s(u){if(t.has(i,u))throw new r;t.has(a,u)||(i[u]=!0,a[u]=!0,t.each(n.predecessors(u),s),delete i[u],o.push(u))}if(t.each(n.sinks(),s),t.size(a)!==n.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,zm}var Gm,C_;function i$(){if(C_)return Gm;C_=1;var t=mO();Gm=e;function e(r){try{t(r)}catch(n){if(n instanceof t.CycleException)return!1;throw n}return!0}return Gm}var Hm,E_;function bO(){if(E_)return Hm;E_=1;var t=Kn();Hm=e;function e(n,a,i){t.isArray(a)||(a=[a]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),s=[],u={};return t.each(a,function(f){if(!n.hasNode(f))throw new Error("Graph does not have node: "+f);r(n,f,i==="post",u,o,s)}),s}function r(n,a,i,o,s,u){t.has(o,a)||(o[a]=!0,i||u.push(a),t.each(s(a),function(f){r(n,f,i,o,s,u)}),i&&u.push(a))}return Hm}var Um,T_;function o$(){if(T_)return Um;T_=1;var t=bO();Um=e;function e(r,n){return t(r,n,"post")}return Um}var Vm,S_;function s$(){if(S_)return Vm;S_=1;var t=bO();Vm=e;function e(r,n){return t(r,n,"pre")}return Vm}var Wm,A_;function l$(){if(A_)return Wm;A_=1;var t=Kn(),e=aw(),r=pO();Wm=n;function n(a,i){var o=new e,s={},u=new r,f;function c(p){var y=p.v===f?p.w:p.v,g=u.priority(y);if(g!==void 0){var E=i(p);E<g&&(s[y]=f,u.decrease(y,E))}}if(a.nodeCount()===0)return o;t.each(a.nodes(),function(p){u.add(p,Number.POSITIVE_INFINITY),o.setNode(p)}),u.decrease(a.nodes()[0],0);for(var h=!1;u.size()>0;){if(f=u.removeMin(),t.has(s,f))o.setEdge(f,s[f]);else{if(h)throw new Error("Input graph is not connected: "+a);h=!0}a.nodeEdges(f).forEach(c)}return o}return Wm}var $m,L_;function u$(){return L_||(L_=1,$m={components:t$(),dijkstra:gO(),dijkstraAll:r$(),findCycles:n$(),floydWarshall:a$(),isAcyclic:i$(),postorder:o$(),preorder:s$(),prim:l$(),tarjan:yO(),topsort:mO()}),$m}var Ym,D_;function f$(){if(D_)return Ym;D_=1;var t=J3();return Ym={Graph:t.Graph,json:e$(),alg:u$(),version:t.version},Ym}var Xm,__;function ca(){if(__)return Xm;__=1;var t;if(typeof H1=="function")try{t=f$()}catch{}return t||(t=window.graphlib),Xm=t,Xm}var Km,M_;function c$(){if(M_)return Km;M_=1;var t=VN(),e=1,r=4;function n(a){return t(a,e|r)}return Km=n,Km}var jm,R_;function ad(){if(R_)return jm;R_=1;var t=Ps(),e=ri(),r=Kc(),n=Xn();function a(i,o,s){if(!n(s))return!1;var u=typeof o;return(u=="number"?e(s)&&r(o,s.length):u=="string"&&o in s)?t(s[o],i):!1}return jm=a,jm}var Zm,P_;function d$(){if(P_)return Zm;P_=1;var t=nd(),e=Ps(),r=ad(),n=Do(),a=Object.prototype,i=a.hasOwnProperty,o=t(function(s,u){s=Object(s);var f=-1,c=u.length,h=c>2?u[2]:void 0;for(h&&r(u[0],u[1],h)&&(c=1);++f<c;)for(var p=u[f],y=n(p),g=-1,E=y.length;++g<E;){var w=y[g],v=s[w];(v===void 0||e(v,a[w])&&!i.call(s,w))&&(s[w]=p[w])}return s});return Zm=o,Zm}var Qm,k_;function h$(){if(k_)return Qm;k_=1;var t=ni(),e=ri(),r=Gi();function n(a){return function(i,o,s){var u=Object(i);if(!e(i)){var f=t(o,3);i=r(i),o=function(h){return f(u[h],h,u)}}var c=a(i,o,s);return c>-1?u[f?i[c]:c]:void 0}}return Qm=n,Qm}var Jm,N_;function v$(){if(N_)return Jm;N_=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return Jm=e,Jm}var e0,O_;function p$(){if(O_)return e0;O_=1;var t=v$(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return e0=r,e0}var t0,I_;function g$(){if(I_)return t0;I_=1;var t=p$(),e=Xn(),r=Is(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(f){if(typeof f=="number")return f;if(r(f))return n;if(e(f)){var c=typeof f.valueOf=="function"?f.valueOf():f;f=e(c)?c+"":c}if(typeof f!="string")return f===0?f:+f;f=t(f);var h=i.test(f);return h||o.test(f)?s(f.slice(2),h?2:8):a.test(f)?n:+f}return t0=u,t0}var r0,F_;function wO(){if(F_)return r0;F_=1;var t=g$(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-1/0){var i=a<0?-1:1;return i*r}return a===a?a:0}return r0=n,r0}var n0,B_;function y$(){if(B_)return n0;B_=1;var t=wO();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return n0=e,n0}var a0,q_;function m$(){if(q_)return a0;q_=1;var t=dO(),e=ni(),r=y$(),n=Math.max;function a(i,o,s){var u=i==null?0:i.length;if(!u)return-1;var f=s==null?0:r(s);return f<0&&(f=n(u+f,0)),t(i,e(o,3),f)}return a0=a,a0}var i0,z_;function b$(){if(z_)return i0;z_=1;var t=h$(),e=m$(),r=t(e);return i0=r,i0}var o0,G_;function xO(){if(G_)return o0;G_=1;var t=nw();function e(r){var n=r==null?0:r.length;return n?t(r,1):[]}return o0=e,o0}var s0,H_;function w$(){if(H_)return s0;H_=1;var t=J1(),e=WN(),r=Do();function n(a,i){return a==null?a:t(a,e(i),r)}return s0=n,s0}var l0,U_;function x$(){if(U_)return l0;U_=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return l0=t,l0}var u0,V_;function C$(){if(V_)return u0;V_=1;var t=Yc(),e=ew(),r=ni();function n(a,i){var o={};return i=r(i,3),e(a,function(s,u,f){t(o,u,i(s,u,f))}),o}return u0=n,u0}var f0,W_;function iw(){if(W_)return f0;W_=1;var t=Is();function e(r,n,a){for(var i=-1,o=r.length;++i<o;){var s=r[i],u=n(s);if(u!=null&&(f===void 0?u===u&&!t(u):a(u,f)))var f=u,c=s}return c}return f0=e,f0}var c0,$_;function E$(){if($_)return c0;$_=1;function t(e,r){return e>r}return c0=t,c0}var d0,Y_;function T$(){if(Y_)return d0;Y_=1;var t=iw(),e=E$(),r=_o();function n(a){return a&&a.length?t(a,r,e):void 0}return d0=n,d0}var h0,X_;function CO(){if(X_)return h0;X_=1;var t=Yc(),e=Ps();function r(n,a,i){(i!==void 0&&!e(n[a],i)||i===void 0&&!(a in n))&&t(n,a,i)}return h0=r,h0}var v0,K_;function S$(){if(K_)return v0;K_=1;var t=Ao(),e=Qc(),r=Ra(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,s=i.hasOwnProperty,u=o.call(Object);function f(c){if(!r(c)||t(c)!=n)return!1;var h=e(c);if(h===null)return!0;var p=s.call(h,"constructor")&&h.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==u}return v0=f,v0}var p0,j_;function EO(){if(j_)return p0;j_=1;function t(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return p0=t,p0}var g0,Z_;function A$(){if(Z_)return g0;Z_=1;var t=mu(),e=Do();function r(n){return t(n,e(n))}return g0=r,g0}var y0,Q_;function L$(){if(Q_)return y0;Q_=1;var t=CO(),e=PN(),r=GN(),n=kN(),a=UN(),i=bu(),o=_r(),s=hO(),u=Ns(),f=yu(),c=Xn(),h=S$(),p=wu(),y=EO(),g=A$();function E(w,v,C,x,S,A,D){var _=y(w,C),M=y(v,C),k=D.get(M);if(k){t(w,C,k);return}var F=A?A(_,M,C+"",w,v,D):void 0,G=F===void 0;if(G){var B=o(M),q=!B&&u(M),R=!B&&!q&&p(M);F=M,B||q||R?o(_)?F=_:s(_)?F=n(_):q?(G=!1,F=e(M,!0)):R?(G=!1,F=r(M,!0)):F=[]:h(M)||i(M)?(F=_,i(_)?F=g(_):(!c(_)||f(_))&&(F=a(M))):G=!1}G&&(D.set(M,F),S(F,M,x,A,D),D.delete(M)),t(w,C,F)}return y0=E,y0}var m0,J_;function D$(){if(J_)return m0;J_=1;var t=$c(),e=CO(),r=J1(),n=L$(),a=Xn(),i=Do(),o=EO();function s(u,f,c,h,p){u!==f&&r(f,function(y,g){if(p||(p=new t),a(y))n(u,f,g,c,s,h,p);else{var E=h?h(o(u,g),y,g+"",u,f,p):void 0;E===void 0&&(E=y),e(u,g,E)}},i)}return m0=s,m0}var b0,eM;function _$(){if(eM)return b0;eM=1;var t=nd(),e=ad();function r(n){return t(function(a,i){var o=-1,s=i.length,u=s>1?i[s-1]:void 0,f=s>2?i[2]:void 0;for(u=n.length>3&&typeof u=="function"?(s--,u):void 0,f&&e(i[0],i[1],f)&&(u=s<3?void 0:u,s=1),a=Object(a);++o<s;){var c=i[o];c&&n(a,c,o,u)}return a})}return b0=r,b0}var w0,tM;function M$(){if(tM)return w0;tM=1;var t=D$(),e=_$(),r=e(function(n,a,i){t(n,a,i)});return w0=r,w0}var x0,rM;function TO(){if(rM)return x0;rM=1;function t(e,r){return e<r}return x0=t,x0}var C0,nM;function R$(){if(nM)return C0;nM=1;var t=iw(),e=TO(),r=_o();function n(a){return a&&a.length?t(a,r,e):void 0}return C0=n,C0}var E0,aM;function P$(){if(aM)return E0;aM=1;var t=iw(),e=ni(),r=TO();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return E0=n,E0}var T0,iM;function k$(){if(iM)return T0;iM=1;var t=da(),e=function(){return t.Date.now()};return T0=e,T0}var S0,oM;function N$(){if(oM)return S0;oM=1;var t=Xc(),e=td(),r=Kc(),n=Xn(),a=xu();function i(o,s,u,f){if(!n(o))return o;s=e(s,o);for(var c=-1,h=s.length,p=h-1,y=o;y!=null&&++c<h;){var g=a(s[c]),E=u;if(g==="__proto__"||g==="constructor"||g==="prototype")return o;if(c!=p){var w=y[g];E=f?f(w,g,y):void 0,E===void 0&&(E=n(w)?w:r(s[c+1])?[]:{})}t(y,g,E),y=y[g]}return o}return S0=i,S0}var A0,sM;function O$(){if(sM)return A0;sM=1;var t=rd(),e=N$(),r=td();function n(a,i,o){for(var s=-1,u=i.length,f={};++s<u;){var c=i[s],h=t(a,c);o(h,c)&&e(f,r(c,a),h)}return f}return A0=n,A0}var L0,lM;function I$(){if(lM)return L0;lM=1;var t=O$(),e=rO();function r(n,a){return t(n,a,function(i,o){return e(n,o)})}return L0=r,L0}var D0,uM;function F$(){if(uM)return D0;uM=1;var t=xO(),e=fO(),r=cO();function n(a){return r(e(a,void 0,t),a+"")}return D0=n,D0}var _0,fM;function B$(){if(fM)return _0;fM=1;var t=I$(),e=F$(),r=e(function(n,a){return n==null?{}:t(n,a)});return _0=r,_0}var M0,cM;function q$(){if(cM)return M0;cM=1;var t=Math.ceil,e=Math.max;function r(n,a,i,o){for(var s=-1,u=e(t((a-n)/(i||1)),0),f=Array(u);u--;)f[o?u:++s]=n,n+=i;return f}return M0=r,M0}var R0,dM;function z$(){if(dM)return R0;dM=1;var t=q$(),e=ad(),r=wO();function n(a){return function(i,o,s){return s&&typeof s!="number"&&e(i,o,s)&&(o=s=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),s=s===void 0?i<o?1:-1:r(s),t(i,o,s,a)}}return R0=n,R0}var P0,hM;function G$(){if(hM)return P0;hM=1;var t=z$(),e=t();return P0=e,P0}var k0,vM;function H$(){if(vM)return k0;vM=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return k0=t,k0}var N0,pM;function U$(){if(pM)return N0;pM=1;var t=Is();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,s=t(r),u=n!==void 0,f=n===null,c=n===n,h=t(n);if(!f&&!h&&!s&&r>n||s&&u&&c&&!f&&!h||i&&u&&c||!a&&c||!o)return 1;if(!i&&!s&&!h&&r<n||h&&a&&o&&!i&&!s||f&&a&&o||!u&&o||!c)return-1}return 0}return N0=e,N0}var O0,gM;function V$(){if(gM)return O0;gM=1;var t=U$();function e(r,n,a){for(var i=-1,o=r.criteria,s=n.criteria,u=o.length,f=a.length;++i<u;){var c=t(o[i],s[i]);if(c){if(i>=f)return c;var h=a[i];return c*(h=="desc"?-1:1)}}return r.index-n.index}return O0=e,O0}var I0,yM;function W$(){if(yM)return I0;yM=1;var t=ed(),e=rd(),r=ni(),n=sO(),a=H$(),i=jc(),o=V$(),s=_o(),u=_r();function f(c,h,p){h.length?h=t(h,function(E){return u(E)?function(w){return e(w,E.length===1?E[0]:E)}:E}):h=[s];var y=-1;h=t(h,i(r));var g=n(c,function(E,w,v){var C=t(h,function(x){return x(E)});return{criteria:C,index:++y,value:E}});return a(g,function(E,w){return o(E,w,p)})}return I0=f,I0}var F0,mM;function $$(){if(mM)return F0;mM=1;var t=nw(),e=W$(),r=nd(),n=ad(),a=r(function(i,o){if(i==null)return[];var s=o.length;return s>1&&n(i,o[0],o[1])?o=[]:s>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return F0=a,F0}var B0,bM;function Y$(){if(bM)return B0;bM=1;var t=eO(),e=0;function r(n){var a=++e;return t(n)+a}return B0=r,B0}var q0,wM;function X$(){if(wM)return q0;wM=1;function t(e,r,n){for(var a=-1,i=e.length,o=r.length,s={};++a<i;){var u=a<o?r[a]:void 0;n(s,e[a],u)}return s}return q0=t,q0}var z0,xM;function K$(){if(xM)return z0;xM=1;var t=Xc(),e=X$();function r(n,a){return e(n||[],a||[],t)}return z0=r,z0}var G0,CM;function hr(){if(CM)return G0;CM=1;var t;if(typeof H1=="function")try{t={cloneDeep:c$(),constant:Q1(),defaults:d$(),each:YN(),filter:aO(),find:b$(),flatten:xO(),forEach:$N(),forIn:w$(),has:iO(),isUndefined:oO(),last:x$(),map:lO(),mapValues:C$(),max:T$(),merge:M$(),min:R$(),minBy:P$(),now:k$(),pick:B$(),range:G$(),reduce:uO(),sortBy:$$(),uniqueId:Y$(),values:vO(),zipObject:K$()}}catch{}return t||(t=window._),G0=t,G0}var H0,EM;function j$(){if(EM)return H0;EM=1,H0=t;function t(){var n={};n._next=n._prev=n,this._sentinel=n}t.prototype.dequeue=function(){var n=this._sentinel,a=n._prev;if(a!==n)return e(a),a},t.prototype.enqueue=function(n){var a=this._sentinel;n._prev&&n._next&&e(n),n._next=a._next,a._next._prev=n,a._next=n,n._prev=a},t.prototype.toString=function(){for(var n=[],a=this._sentinel,i=a._prev;i!==a;)n.push(JSON.stringify(i,r)),i=i._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,a){if(n!=="_next"&&n!=="_prev")return a}return H0}var U0,TM;function Z$(){if(TM)return U0;TM=1;var t=hr(),e=ca().Graph,r=j$();U0=a;var n=t.constant(1);function a(f,c){if(f.nodeCount()<=1)return[];var h=s(f,c||n),p=i(h.graph,h.buckets,h.zeroIdx);return t.flatten(t.map(p,function(y){return f.outEdges(y.v,y.w)}),!0)}function i(f,c,h){for(var p=[],y=c[c.length-1],g=c[0],E;f.nodeCount();){for(;E=g.dequeue();)o(f,c,h,E);for(;E=y.dequeue();)o(f,c,h,E);if(f.nodeCount()){for(var w=c.length-2;w>0;--w)if(E=c[w].dequeue(),E){p=p.concat(o(f,c,h,E,!0));break}}}return p}function o(f,c,h,p,y){var g=y?[]:void 0;return t.forEach(f.inEdges(p.v),function(E){var w=f.edge(E),v=f.node(E.v);y&&g.push({v:E.v,w:E.w}),v.out-=w,u(c,h,v)}),t.forEach(f.outEdges(p.v),function(E){var w=f.edge(E),v=E.w,C=f.node(v);C.in-=w,u(c,h,C)}),f.removeNode(p.v),g}function s(f,c){var h=new e,p=0,y=0;t.forEach(f.nodes(),function(w){h.setNode(w,{v:w,in:0,out:0})}),t.forEach(f.edges(),function(w){var v=h.edge(w.v,w.w)||0,C=c(w),x=v+C;h.setEdge(w.v,w.w,x),y=Math.max(y,h.node(w.v).out+=C),p=Math.max(p,h.node(w.w).in+=C)});var g=t.range(y+p+3).map(function(){return new r}),E=p+1;return t.forEach(h.nodes(),function(w){u(g,E,h.node(w))}),{graph:h,buckets:g,zeroIdx:E}}function u(f,c,h){h.out?h.in?f[h.out-h.in+c].enqueue(h):f[f.length-1].enqueue(h):f[0].enqueue(h)}return U0}var V0,SM;function Q$(){if(SM)return V0;SM=1;var t=hr(),e=Z$();V0={run:r,undo:a};function r(i){var o=i.graph().acyclicer==="greedy"?e(i,s(i)):n(i);t.forEach(o,function(u){var f=i.edge(u);i.removeEdge(u),f.forwardName=u.name,f.reversed=!0,i.setEdge(u.w,u.v,f,t.uniqueId("rev"))});function s(u){return function(f){return u.edge(f).weight}}}function n(i){var o=[],s={},u={};function f(c){t.has(u,c)||(u[c]=!0,s[c]=!0,t.forEach(i.outEdges(c),function(h){t.has(s,h.w)?o.push(h):f(h.w)}),delete s[c])}return t.forEach(i.nodes(),f),o}function a(i){t.forEach(i.edges(),function(o){var s=i.edge(o);if(s.reversed){i.removeEdge(o);var u=s.forwardName;delete s.reversed,delete s.forwardName,i.setEdge(o.w,o.v,s,u)}})}return V0}var W0,AM;function kn(){if(AM)return W0;AM=1;var t=hr(),e=ca().Graph;W0={addDummyNode:r,simplify:n,asNonCompoundGraph:a,successorWeights:i,predecessorWeights:o,intersectRect:s,buildLayerMatrix:u,normalizeRanks:f,removeEmptyRanks:c,addBorderNode:h,maxRank:p,partition:y,time:g,notime:E};function r(w,v,C,x){var S;do S=t.uniqueId(x);while(w.hasNode(S));return C.dummy=v,w.setNode(S,C),S}function n(w){var v=new e().setGraph(w.graph());return t.forEach(w.nodes(),function(C){v.setNode(C,w.node(C))}),t.forEach(w.edges(),function(C){var x=v.edge(C.v,C.w)||{weight:0,minlen:1},S=w.edge(C);v.setEdge(C.v,C.w,{weight:x.weight+S.weight,minlen:Math.max(x.minlen,S.minlen)})}),v}function a(w){var v=new e({multigraph:w.isMultigraph()}).setGraph(w.graph());return t.forEach(w.nodes(),function(C){w.children(C).length||v.setNode(C,w.node(C))}),t.forEach(w.edges(),function(C){v.setEdge(C,w.edge(C))}),v}function i(w){var v=t.map(w.nodes(),function(C){var x={};return t.forEach(w.outEdges(C),function(S){x[S.w]=(x[S.w]||0)+w.edge(S).weight}),x});return t.zipObject(w.nodes(),v)}function o(w){var v=t.map(w.nodes(),function(C){var x={};return t.forEach(w.inEdges(C),function(S){x[S.v]=(x[S.v]||0)+w.edge(S).weight}),x});return t.zipObject(w.nodes(),v)}function s(w,v){var C=w.x,x=w.y,S=v.x-C,A=v.y-x,D=w.width/2,_=w.height/2;if(!S&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var M,k;return Math.abs(A)*D>Math.abs(S)*_?(A<0&&(_=-_),M=_*S/A,k=_):(S<0&&(D=-D),M=D,k=D*A/S),{x:C+M,y:x+k}}function u(w){var v=t.map(t.range(p(w)+1),function(){return[]});return t.forEach(w.nodes(),function(C){var x=w.node(C),S=x.rank;t.isUndefined(S)||(v[S][x.order]=C)}),v}function f(w){var v=t.min(t.map(w.nodes(),function(C){return w.node(C).rank}));t.forEach(w.nodes(),function(C){var x=w.node(C);t.has(x,"rank")&&(x.rank-=v)})}function c(w){var v=t.min(t.map(w.nodes(),function(A){return w.node(A).rank})),C=[];t.forEach(w.nodes(),function(A){var D=w.node(A).rank-v;C[D]||(C[D]=[]),C[D].push(A)});var x=0,S=w.graph().nodeRankFactor;t.forEach(C,function(A,D){t.isUndefined(A)&&D%S!==0?--x:x&&t.forEach(A,function(_){w.node(_).rank+=x})})}function h(w,v,C,x){var S={width:0,height:0};return arguments.length>=4&&(S.rank=C,S.order=x),r(w,"border",S,v)}function p(w){return t.max(t.map(w.nodes(),function(v){var C=w.node(v).rank;if(!t.isUndefined(C))return C}))}function y(w,v){var C={lhs:[],rhs:[]};return t.forEach(w,function(x){v(x)?C.lhs.push(x):C.rhs.push(x)}),C}function g(w,v){var C=t.now();try{return v()}finally{console.log(w+" time: "+(t.now()-C)+"ms")}}function E(w,v){return v()}return W0}var $0,LM;function J$(){if(LM)return $0;LM=1;var t=hr(),e=kn();$0={run:r,undo:a};function r(i){i.graph().dummyChains=[],t.forEach(i.edges(),function(o){n(i,o)})}function n(i,o){var s=o.v,u=i.node(s).rank,f=o.w,c=i.node(f).rank,h=o.name,p=i.edge(o),y=p.labelRank;if(c!==u+1){i.removeEdge(o);var g,E,w;for(w=0,++u;u<c;++w,++u)p.points=[],E={width:0,height:0,edgeLabel:p,edgeObj:o,rank:u},g=e.addDummyNode(i,"edge",E,"_d"),u===y&&(E.width=p.width,E.height=p.height,E.dummy="edge-label",E.labelpos=p.labelpos),i.setEdge(s,g,{weight:p.weight},h),w===0&&i.graph().dummyChains.push(g),s=g;i.setEdge(s,f,{weight:p.weight},h)}}function a(i){t.forEach(i.graph().dummyChains,function(o){var s=i.node(o),u=s.edgeLabel,f;for(i.setEdge(s.edgeObj,u);s.dummy;)f=i.successors(o)[0],i.removeNode(o),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),o=f,s=i.node(o)})}return $0}var Y0,DM;function lc(){if(DM)return Y0;DM=1;var t=hr();Y0={longestPath:e,slack:r};function e(n){var a={};function i(o){var s=n.node(o);if(t.has(a,o))return s.rank;a[o]=!0;var u=t.min(t.map(n.outEdges(o),function(f){return i(f.w)-n.edge(f).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}t.forEach(n.sources(),i)}function r(n,a){return n.node(a.w).rank-n.node(a.v).rank-n.edge(a).minlen}return Y0}var X0,_M;function SO(){if(_M)return X0;_M=1;var t=hr(),e=ca().Graph,r=lc().slack;X0=n;function n(s){var u=new e({directed:!1}),f=s.nodes()[0],c=s.nodeCount();u.setNode(f,{});for(var h,p;a(u,s)<c;)h=i(u,s),p=u.hasNode(h.v)?r(s,h):-r(s,h),o(u,s,p);return u}function a(s,u){function f(c){t.forEach(u.nodeEdges(c),function(h){var p=h.v,y=c===p?h.w:p;!s.hasNode(y)&&!r(u,h)&&(s.setNode(y,{}),s.setEdge(c,y,{}),f(y))})}return t.forEach(s.nodes(),f),s.nodeCount()}function i(s,u){return t.minBy(u.edges(),function(f){if(s.hasNode(f.v)!==s.hasNode(f.w))return r(u,f)})}function o(s,u,f){t.forEach(s.nodes(),function(c){u.node(c).rank+=f})}return X0}var K0,MM;function e4(){if(MM)return K0;MM=1;var t=hr(),e=SO(),r=lc().slack,n=lc().longestPath,a=ca().alg.preorder,i=ca().alg.postorder,o=kn().simplify;K0=s,s.initLowLimValues=h,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=y,s.enterEdge=g,s.exchangeEdges=E;function s(x){x=o(x),n(x);var S=e(x);h(S),u(S,x);for(var A,D;A=y(S);)D=g(S,x,A),E(S,x,A,D)}function u(x,S){var A=i(x,x.nodes());A=A.slice(0,A.length-1),t.forEach(A,function(D){f(x,S,D)})}function f(x,S,A){var D=x.node(A),_=D.parent;x.edge(A,_).cutvalue=c(x,S,A)}function c(x,S,A){var D=x.node(A),_=D.parent,M=!0,k=S.edge(A,_),F=0;return k||(M=!1,k=S.edge(_,A)),F=k.weight,t.forEach(S.nodeEdges(A),function(G){var B=G.v===A,q=B?G.w:G.v;if(q!==_){var R=B===M,P=S.edge(G).weight;if(F+=R?P:-P,v(x,A,q)){var N=x.edge(A,q).cutvalue;F+=R?-N:N}}}),F}function h(x,S){arguments.length<2&&(S=x.nodes()[0]),p(x,{},1,S)}function p(x,S,A,D,_){var M=A,k=x.node(D);return S[D]=!0,t.forEach(x.neighbors(D),function(F){t.has(S,F)||(A=p(x,S,A,F,D))}),k.low=M,k.lim=A++,_?k.parent=_:delete k.parent,A}function y(x){return t.find(x.edges(),function(S){return x.edge(S).cutvalue<0})}function g(x,S,A){var D=A.v,_=A.w;S.hasEdge(D,_)||(D=A.w,_=A.v);var M=x.node(D),k=x.node(_),F=M,G=!1;M.lim>k.lim&&(F=k,G=!0);var B=t.filter(S.edges(),function(q){return G===C(x,x.node(q.v),F)&&G!==C(x,x.node(q.w),F)});return t.minBy(B,function(q){return r(S,q)})}function E(x,S,A,D){var _=A.v,M=A.w;x.removeEdge(_,M),x.setEdge(D.v,D.w,{}),h(x),u(x,S),w(x,S)}function w(x,S){var A=t.find(x.nodes(),function(_){return!S.node(_).parent}),D=a(x,A);D=D.slice(1),t.forEach(D,function(_){var M=x.node(_).parent,k=S.edge(_,M),F=!1;k||(k=S.edge(M,_),F=!0),S.node(_).rank=S.node(M).rank+(F?k.minlen:-k.minlen)})}function v(x,S,A){return x.hasEdge(S,A)}function C(x,S,A){return A.low<=S.lim&&S.lim<=A.lim}return K0}var j0,RM;function t4(){if(RM)return j0;RM=1;var t=lc(),e=t.longestPath,r=SO(),n=e4();j0=a;function a(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":o(u);break;case"longest-path":i(u);break;default:s(u)}}var i=e;function o(u){e(u),r(u)}function s(u){n(u)}return j0}var Z0,PM;function r4(){if(PM)return Z0;PM=1;var t=hr();Z0=e;function e(a){var i=n(a);t.forEach(a.graph().dummyChains,function(o){for(var s=a.node(o),u=s.edgeObj,f=r(a,i,u.v,u.w),c=f.path,h=f.lca,p=0,y=c[p],g=!0;o!==u.w;){if(s=a.node(o),g){for(;(y=c[p])!==h&&a.node(y).maxRank<s.rank;)p++;y===h&&(g=!1)}if(!g){for(;p<c.length-1&&a.node(y=c[p+1]).minRank<=s.rank;)p++;y=c[p]}a.setParent(o,y),o=a.successors(o)[0]}})}function r(a,i,o,s){var u=[],f=[],c=Math.min(i[o].low,i[s].low),h=Math.max(i[o].lim,i[s].lim),p,y;p=o;do p=a.parent(p),u.push(p);while(p&&(i[p].low>c||h>i[p].lim));for(y=p,p=s;(p=a.parent(p))!==y;)f.push(p);return{path:u.concat(f.reverse()),lca:y}}function n(a){var i={},o=0;function s(u){var f=o;t.forEach(a.children(u),s),i[u]={low:f,lim:o++}}return t.forEach(a.children(),s),i}return Z0}var Q0,kM;function n4(){if(kM)return Q0;kM=1;var t=hr(),e=kn();Q0={run:r,cleanup:o};function r(s){var u=e.addDummyNode(s,"root",{},"_root"),f=a(s),c=t.max(t.values(f))-1,h=2*c+1;s.graph().nestingRoot=u,t.forEach(s.edges(),function(y){s.edge(y).minlen*=h});var p=i(s)+1;t.forEach(s.children(),function(y){n(s,u,h,p,c,f,y)}),s.graph().nodeRankFactor=h}function n(s,u,f,c,h,p,y){var g=s.children(y);if(!g.length){y!==u&&s.setEdge(u,y,{weight:0,minlen:f});return}var E=e.addBorderNode(s,"_bt"),w=e.addBorderNode(s,"_bb"),v=s.node(y);s.setParent(E,y),v.borderTop=E,s.setParent(w,y),v.borderBottom=w,t.forEach(g,function(C){n(s,u,f,c,h,p,C);var x=s.node(C),S=x.borderTop?x.borderTop:C,A=x.borderBottom?x.borderBottom:C,D=x.borderTop?c:2*c,_=S!==A?1:h-p[y]+1;s.setEdge(E,S,{weight:D,minlen:_,nestingEdge:!0}),s.setEdge(A,w,{weight:D,minlen:_,nestingEdge:!0})}),s.parent(y)||s.setEdge(u,E,{weight:0,minlen:h+p[y]})}function a(s){var u={};function f(c,h){var p=s.children(c);p&&p.length&&t.forEach(p,function(y){f(y,h+1)}),u[c]=h}return t.forEach(s.children(),function(c){f(c,1)}),u}function i(s){return t.reduce(s.edges(),function(u,f){return u+s.edge(f).weight},0)}function o(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,t.forEach(s.edges(),function(f){var c=s.edge(f);c.nestingEdge&&s.removeEdge(f)})}return Q0}var J0,NM;function a4(){if(NM)return J0;NM=1;var t=hr(),e=kn();J0=r;function r(a){function i(o){var s=a.children(o),u=a.node(o);if(s.length&&t.forEach(s,i),t.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var f=u.minRank,c=u.maxRank+1;f<c;++f)n(a,"borderLeft","_bl",o,u,f),n(a,"borderRight","_br",o,u,f)}}t.forEach(a.children(),i)}function n(a,i,o,s,u,f){var c={width:0,height:0,rank:f,borderType:i},h=u[i][f-1],p=e.addDummyNode(a,"border",c,o);u[i][f]=p,a.setParent(p,s),h&&a.setEdge(h,p,{weight:1})}return J0}var eb,OM;function i4(){if(OM)return eb;OM=1;var t=hr();eb={adjust:e,undo:r};function e(f){var c=f.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(f)}function r(f){var c=f.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&i(f),(c==="lr"||c==="rl")&&(s(f),n(f))}function n(f){t.forEach(f.nodes(),function(c){a(f.node(c))}),t.forEach(f.edges(),function(c){a(f.edge(c))})}function a(f){var c=f.width;f.width=f.height,f.height=c}function i(f){t.forEach(f.nodes(),function(c){o(f.node(c))}),t.forEach(f.edges(),function(c){var h=f.edge(c);t.forEach(h.points,o),t.has(h,"y")&&o(h)})}function o(f){f.y=-f.y}function s(f){t.forEach(f.nodes(),function(c){u(f.node(c))}),t.forEach(f.edges(),function(c){var h=f.edge(c);t.forEach(h.points,u),t.has(h,"x")&&u(h)})}function u(f){var c=f.x;f.x=f.y,f.y=c}return eb}var tb,IM;function o4(){if(IM)return tb;IM=1;var t=hr();tb=e;function e(r){var n={},a=t.filter(r.nodes(),function(f){return!r.children(f).length}),i=t.max(t.map(a,function(f){return r.node(f).rank})),o=t.map(t.range(i+1),function(){return[]});function s(f){if(!t.has(n,f)){n[f]=!0;var c=r.node(f);o[c.rank].push(f),t.forEach(r.successors(f),s)}}var u=t.sortBy(a,function(f){return r.node(f).rank});return t.forEach(u,s),o}return tb}var rb,FM;function s4(){if(FM)return rb;FM=1;var t=hr();rb=e;function e(n,a){for(var i=0,o=1;o<a.length;++o)i+=r(n,a[o-1],a[o]);return i}function r(n,a,i){for(var o=t.zipObject(i,t.map(i,function(p,y){return y})),s=t.flatten(t.map(a,function(p){return t.sortBy(t.map(n.outEdges(p),function(y){return{pos:o[y.w],weight:n.edge(y).weight}}),"pos")}),!0),u=1;u<i.length;)u<<=1;var f=2*u-1;u-=1;var c=t.map(new Array(f),function(){return 0}),h=0;return t.forEach(s.forEach(function(p){var y=p.pos+u;c[y]+=p.weight;for(var g=0;y>0;)y%2&&(g+=c[y+1]),y=y-1>>1,c[y]+=p.weight;h+=p.weight*g})),h}return rb}var nb,BM;function l4(){if(BM)return nb;BM=1;var t=hr();nb=e;function e(r,n){return t.map(n,function(a){var i=r.inEdges(a);if(i.length){var o=t.reduce(i,function(s,u){var f=r.edge(u),c=r.node(u.v);return{sum:s.sum+f.weight*c.order,weight:s.weight+f.weight}},{sum:0,weight:0});return{v:a,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:a}})}return nb}var ab,qM;function u4(){if(qM)return ab;qM=1;var t=hr();ab=e;function e(a,i){var o={};t.forEach(a,function(u,f){var c=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:f};t.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),t.forEach(i.edges(),function(u){var f=o[u.v],c=o[u.w];!t.isUndefined(f)&&!t.isUndefined(c)&&(c.indegree++,f.out.push(o[u.w]))});var s=t.filter(o,function(u){return!u.indegree});return r(s)}function r(a){var i=[];function o(f){return function(c){c.merged||(t.isUndefined(c.barycenter)||t.isUndefined(f.barycenter)||c.barycenter>=f.barycenter)&&n(f,c)}}function s(f){return function(c){c.in.push(f),--c.indegree===0&&a.push(c)}}for(;a.length;){var u=a.pop();i.push(u),t.forEach(u.in.reverse(),o(u)),t.forEach(u.out,s(u))}return t.map(t.filter(i,function(f){return!f.merged}),function(f){return t.pick(f,["vs","i","barycenter","weight"])})}function n(a,i){var o=0,s=0;a.weight&&(o+=a.barycenter*a.weight,s+=a.weight),i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),a.vs=i.vs.concat(a.vs),a.barycenter=o/s,a.weight=s,a.i=Math.min(i.i,a.i),i.merged=!0}return ab}var ib,zM;function f4(){if(zM)return ib;zM=1;var t=hr(),e=kn();ib=r;function r(i,o){var s=e.partition(i,function(E){return t.has(E,"barycenter")}),u=s.lhs,f=t.sortBy(s.rhs,function(E){return-E.i}),c=[],h=0,p=0,y=0;u.sort(a(!!o)),y=n(c,f,y),t.forEach(u,function(E){y+=E.vs.length,c.push(E.vs),h+=E.barycenter*E.weight,p+=E.weight,y=n(c,f,y)});var g={vs:t.flatten(c,!0)};return p&&(g.barycenter=h/p,g.weight=p),g}function n(i,o,s){for(var u;o.length&&(u=t.last(o)).i<=s;)o.pop(),i.push(u.vs),s++;return s}function a(i){return function(o,s){return o.barycenter<s.barycenter?-1:o.barycenter>s.barycenter?1:i?s.i-o.i:o.i-s.i}}return ib}var ob,GM;function c4(){if(GM)return ob;GM=1;var t=hr(),e=l4(),r=u4(),n=f4();ob=a;function a(s,u,f,c){var h=s.children(u),p=s.node(u),y=p?p.borderLeft:void 0,g=p?p.borderRight:void 0,E={};y&&(h=t.filter(h,function(A){return A!==y&&A!==g}));var w=e(s,h);t.forEach(w,function(A){if(s.children(A.v).length){var D=a(s,A.v,f,c);E[A.v]=D,t.has(D,"barycenter")&&o(A,D)}});var v=r(w,f);i(v,E);var C=n(v,c);if(y&&(C.vs=t.flatten([y,C.vs,g],!0),s.predecessors(y).length)){var x=s.node(s.predecessors(y)[0]),S=s.node(s.predecessors(g)[0]);t.has(C,"barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+x.order+S.order)/(C.weight+2),C.weight+=2}return C}function i(s,u){t.forEach(s,function(f){f.vs=t.flatten(f.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function o(s,u){t.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return ob}var sb,HM;function d4(){if(HM)return sb;HM=1;var t=hr(),e=ca().Graph;sb=r;function r(a,i,o){var s=n(a),u=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(f){return a.node(f)});return t.forEach(a.nodes(),function(f){var c=a.node(f),h=a.parent(f);(c.rank===i||c.minRank<=i&&i<=c.maxRank)&&(u.setNode(f),u.setParent(f,h||s),t.forEach(a[o](f),function(p){var y=p.v===f?p.w:p.v,g=u.edge(y,f),E=t.isUndefined(g)?0:g.weight;u.setEdge(y,f,{weight:a.edge(p).weight+E})}),t.has(c,"minRank")&&u.setNode(f,{borderLeft:c.borderLeft[i],borderRight:c.borderRight[i]}))}),u}function n(a){for(var i;a.hasNode(i=t.uniqueId("_root")););return i}return sb}var lb,UM;function h4(){if(UM)return lb;UM=1;var t=hr();lb=e;function e(r,n,a){var i={},o;t.forEach(a,function(s){for(var u=r.parent(s),f,c;u;){if(f=r.parent(u),f?(c=i[f],i[f]=u):(c=o,o=u),c&&c!==u){n.setEdge(c,u);return}u=f}})}return lb}var ub,VM;function v4(){if(VM)return ub;VM=1;var t=hr(),e=o4(),r=s4(),n=c4(),a=d4(),i=h4(),o=ca().Graph,s=kn();ub=u;function u(p){var y=s.maxRank(p),g=f(p,t.range(1,y+1),"inEdges"),E=f(p,t.range(y-1,-1,-1),"outEdges"),w=e(p);h(p,w);for(var v=Number.POSITIVE_INFINITY,C,x=0,S=0;S<4;++x,++S){c(x%2?g:E,x%4>=2),w=s.buildLayerMatrix(p);var A=r(p,w);A<v&&(S=0,C=t.cloneDeep(w),v=A)}h(p,C)}function f(p,y,g){return t.map(y,function(E){return a(p,E,g)})}function c(p,y){var g=new o;t.forEach(p,function(E){var w=E.graph().root,v=n(E,w,g,y);t.forEach(v.vs,function(C,x){E.node(C).order=x}),i(E,g,v.vs)})}function h(p,y){t.forEach(y,function(g){t.forEach(g,function(E,w){p.node(E).order=w})})}return ub}var fb,WM;function p4(){if(WM)return fb;WM=1;var t=hr(),e=ca().Graph,r=kn();fb={positionX:g,findType1Conflicts:n,findType2Conflicts:a,addConflict:o,hasConflict:s,verticalAlignment:u,horizontalCompaction:f,alignCoordinates:p,findSmallestWidthAlignment:h,balance:y};function n(v,C){var x={};function S(A,D){var _=0,M=0,k=A.length,F=t.last(D);return t.forEach(D,function(G,B){var q=i(v,G),R=q?v.node(q).order:k;(q||G===F)&&(t.forEach(D.slice(M,B+1),function(P){t.forEach(v.predecessors(P),function(N){var I=v.node(N),z=I.order;(z<_||R<z)&&!(I.dummy&&v.node(P).dummy)&&o(x,N,P)})}),M=B+1,_=R)}),D}return t.reduce(C,S),x}function a(v,C){var x={};function S(D,_,M,k,F){var G;t.forEach(t.range(_,M),function(B){G=D[B],v.node(G).dummy&&t.forEach(v.predecessors(G),function(q){var R=v.node(q);R.dummy&&(R.order<k||R.order>F)&&o(x,q,G)})})}function A(D,_){var M=-1,k,F=0;return t.forEach(_,function(G,B){if(v.node(G).dummy==="border"){var q=v.predecessors(G);q.length&&(k=v.node(q[0]).order,S(_,F,B,M,k),F=B,M=k)}S(_,F,_.length,k,D.length)}),_}return t.reduce(C,A),x}function i(v,C){if(v.node(C).dummy)return t.find(v.predecessors(C),function(x){return v.node(x).dummy})}function o(v,C,x){if(C>x){var S=C;C=x,x=S}var A=v[C];A||(v[C]=A={}),A[x]=!0}function s(v,C,x){if(C>x){var S=C;C=x,x=S}return t.has(v[C],x)}function u(v,C,x,S){var A={},D={},_={};return t.forEach(C,function(M){t.forEach(M,function(k,F){A[k]=k,D[k]=k,_[k]=F})}),t.forEach(C,function(M){var k=-1;t.forEach(M,function(F){var G=S(F);if(G.length){G=t.sortBy(G,function(N){return _[N]});for(var B=(G.length-1)/2,q=Math.floor(B),R=Math.ceil(B);q<=R;++q){var P=G[q];D[F]===F&&k<_[P]&&!s(x,F,P)&&(D[P]=F,D[F]=A[F]=A[P],k=_[P])}}})}),{root:A,align:D}}function f(v,C,x,S,A){var D={},_=c(v,C,x,A),M=A?"borderLeft":"borderRight";function k(B,q){for(var R=_.nodes(),P=R.pop(),N={};P;)N[P]?B(P):(N[P]=!0,R.push(P),R=R.concat(q(P))),P=R.pop()}function F(B){D[B]=_.inEdges(B).reduce(function(q,R){return Math.max(q,D[R.v]+_.edge(R))},0)}function G(B){var q=_.outEdges(B).reduce(function(P,N){return Math.min(P,D[N.w]-_.edge(N))},Number.POSITIVE_INFINITY),R=v.node(B);q!==Number.POSITIVE_INFINITY&&R.borderType!==M&&(D[B]=Math.max(D[B],q))}return k(F,_.predecessors.bind(_)),k(G,_.successors.bind(_)),t.forEach(S,function(B){D[B]=D[x[B]]}),D}function c(v,C,x,S){var A=new e,D=v.graph(),_=E(D.nodesep,D.edgesep,S);return t.forEach(C,function(M){var k;t.forEach(M,function(F){var G=x[F];if(A.setNode(G),k){var B=x[k],q=A.edge(B,G);A.setEdge(B,G,Math.max(_(v,F,k),q||0))}k=F})}),A}function h(v,C){return t.minBy(t.values(C),function(x){var S=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return t.forIn(x,function(D,_){var M=w(v,_)/2;S=Math.max(D+M,S),A=Math.min(D-M,A)}),S-A})}function p(v,C){var x=t.values(C),S=t.min(x),A=t.max(x);t.forEach(["u","d"],function(D){t.forEach(["l","r"],function(_){var M=D+_,k=v[M],F;if(k!==C){var G=t.values(k);F=_==="l"?S-t.min(G):A-t.max(G),F&&(v[M]=t.mapValues(k,function(B){return B+F}))}})})}function y(v,C){return t.mapValues(v.ul,function(x,S){if(C)return v[C.toLowerCase()][S];var A=t.sortBy(t.map(v,S));return(A[1]+A[2])/2})}function g(v){var C=r.buildLayerMatrix(v),x=t.merge(n(v,C),a(v,C)),S={},A;t.forEach(["u","d"],function(_){A=_==="u"?C:t.values(C).reverse(),t.forEach(["l","r"],function(M){M==="r"&&(A=t.map(A,function(B){return t.values(B).reverse()}));var k=(_==="u"?v.predecessors:v.successors).bind(v),F=u(v,A,x,k),G=f(v,A,F.root,F.align,M==="r");M==="r"&&(G=t.mapValues(G,function(B){return-B})),S[_+M]=G})});var D=h(v,S);return p(S,D),y(S,v.graph().align)}function E(v,C,x){return function(S,A,D){var _=S.node(A),M=S.node(D),k=0,F;if(k+=_.width/2,t.has(_,"labelpos"))switch(_.labelpos.toLowerCase()){case"l":F=-_.width/2;break;case"r":F=_.width/2;break}if(F&&(k+=x?F:-F),F=0,k+=(_.dummy?C:v)/2,k+=(M.dummy?C:v)/2,k+=M.width/2,t.has(M,"labelpos"))switch(M.labelpos.toLowerCase()){case"l":F=M.width/2;break;case"r":F=-M.width/2;break}return F&&(k+=x?F:-F),F=0,k}}function w(v,C){return v.node(C).width}return fb}var cb,$M;function g4(){if($M)return cb;$M=1;var t=hr(),e=kn(),r=p4().positionX;cb=n;function n(i){i=e.asNonCompoundGraph(i),a(i),t.forEach(r(i),function(o,s){i.node(s).x=o})}function a(i){var o=e.buildLayerMatrix(i),s=i.graph().ranksep,u=0;t.forEach(o,function(f){var c=t.max(t.map(f,function(h){return i.node(h).height}));t.forEach(f,function(h){i.node(h).y=u+c/2}),u+=c+s})}return cb}var db,YM;function y4(){if(YM)return db;YM=1;var t=hr(),e=Q$(),r=J$(),n=t4(),a=kn().normalizeRanks,i=r4(),o=kn().removeEmptyRanks,s=n4(),u=a4(),f=i4(),c=v4(),h=g4(),p=kn(),y=ca().Graph;db=g;function g(U,W){var Y=W&&W.debugTiming?p.time:p.notime;Y("layout",function(){var ee=Y("  buildLayoutGraph",function(){return k(U)});Y("  runLayout",function(){E(ee,Y)}),Y("  updateInputGraph",function(){w(U,ee)})})}function E(U,W){W("    makeSpaceForEdgeLabels",function(){F(U)}),W("    removeSelfEdges",function(){ae(U)}),W("    acyclic",function(){e.run(U)}),W("    nestingGraph.run",function(){s.run(U)}),W("    rank",function(){n(p.asNonCompoundGraph(U))}),W("    injectEdgeLabelProxies",function(){G(U)}),W("    removeEmptyRanks",function(){o(U)}),W("    nestingGraph.cleanup",function(){s.cleanup(U)}),W("    normalizeRanks",function(){a(U)}),W("    assignRankMinMax",function(){B(U)}),W("    removeEdgeLabelProxies",function(){q(U)}),W("    normalize.run",function(){r.run(U)}),W("    parentDummyChains",function(){i(U)}),W("    addBorderSegments",function(){u(U)}),W("    order",function(){c(U)}),W("    insertSelfEdges",function(){re(U)}),W("    adjustCoordinateSystem",function(){f.adjust(U)}),W("    position",function(){h(U)}),W("    positionSelfEdges",function(){K(U)}),W("    removeBorderNodes",function(){z(U)}),W("    normalize.undo",function(){r.undo(U)}),W("    fixupEdgeLabelCoords",function(){N(U)}),W("    undoCoordinateSystem",function(){f.undo(U)}),W("    translateGraph",function(){R(U)}),W("    assignNodeIntersects",function(){P(U)}),W("    reversePoints",function(){I(U)}),W("    acyclic.undo",function(){e.undo(U)})}function w(U,W){t.forEach(U.nodes(),function(Y){var ee=U.node(Y),oe=W.node(Y);ee&&(ee.x=oe.x,ee.y=oe.y,W.children(Y).length&&(ee.width=oe.width,ee.height=oe.height))}),t.forEach(U.edges(),function(Y){var ee=U.edge(Y),oe=W.edge(Y);ee.points=oe.points,t.has(oe,"x")&&(ee.x=oe.x,ee.y=oe.y)}),U.graph().width=W.graph().width,U.graph().height=W.graph().height}var v=["nodesep","edgesep","ranksep","marginx","marginy"],C={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],S=["width","height"],A={width:0,height:0},D=["minlen","weight","width","height","labeloffset"],_={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},M=["labelpos"];function k(U){var W=new y({multigraph:!0,compound:!0}),Y=Z(U.graph());return W.setGraph(t.merge({},C,V(Y,v),t.pick(Y,x))),t.forEach(U.nodes(),function(ee){var oe=Z(U.node(ee));W.setNode(ee,t.defaults(V(oe,S),A)),W.setParent(ee,U.parent(ee))}),t.forEach(U.edges(),function(ee){var oe=Z(U.edge(ee));W.setEdge(ee,t.merge({},_,V(oe,D),t.pick(oe,M)))}),W}function F(U){var W=U.graph();W.ranksep/=2,t.forEach(U.edges(),function(Y){var ee=U.edge(Y);ee.minlen*=2,ee.labelpos.toLowerCase()!=="c"&&(W.rankdir==="TB"||W.rankdir==="BT"?ee.width+=ee.labeloffset:ee.height+=ee.labeloffset)})}function G(U){t.forEach(U.edges(),function(W){var Y=U.edge(W);if(Y.width&&Y.height){var ee=U.node(W.v),oe=U.node(W.w),te={rank:(oe.rank-ee.rank)/2+ee.rank,e:W};p.addDummyNode(U,"edge-proxy",te,"_ep")}})}function B(U){var W=0;t.forEach(U.nodes(),function(Y){var ee=U.node(Y);ee.borderTop&&(ee.minRank=U.node(ee.borderTop).rank,ee.maxRank=U.node(ee.borderBottom).rank,W=t.max(W,ee.maxRank))}),U.graph().maxRank=W}function q(U){t.forEach(U.nodes(),function(W){var Y=U.node(W);Y.dummy==="edge-proxy"&&(U.edge(Y.e).labelRank=Y.rank,U.removeNode(W))})}function R(U){var W=Number.POSITIVE_INFINITY,Y=0,ee=Number.POSITIVE_INFINITY,oe=0,te=U.graph(),ie=te.marginx||0,se=te.marginy||0;function $(ne){var le=ne.x,Se=ne.y,De=ne.width,be=ne.height;W=Math.min(W,le-De/2),Y=Math.max(Y,le+De/2),ee=Math.min(ee,Se-be/2),oe=Math.max(oe,Se+be/2)}t.forEach(U.nodes(),function(ne){$(U.node(ne))}),t.forEach(U.edges(),function(ne){var le=U.edge(ne);t.has(le,"x")&&$(le)}),W-=ie,ee-=se,t.forEach(U.nodes(),function(ne){var le=U.node(ne);le.x-=W,le.y-=ee}),t.forEach(U.edges(),function(ne){var le=U.edge(ne);t.forEach(le.points,function(Se){Se.x-=W,Se.y-=ee}),t.has(le,"x")&&(le.x-=W),t.has(le,"y")&&(le.y-=ee)}),te.width=Y-W+ie,te.height=oe-ee+se}function P(U){t.forEach(U.edges(),function(W){var Y=U.edge(W),ee=U.node(W.v),oe=U.node(W.w),te,ie;Y.points?(te=Y.points[0],ie=Y.points[Y.points.length-1]):(Y.points=[],te=oe,ie=ee),Y.points.unshift(p.intersectRect(ee,te)),Y.points.push(p.intersectRect(oe,ie))})}function N(U){t.forEach(U.edges(),function(W){var Y=U.edge(W);if(t.has(Y,"x"))switch((Y.labelpos==="l"||Y.labelpos==="r")&&(Y.width-=Y.labeloffset),Y.labelpos){case"l":Y.x-=Y.width/2+Y.labeloffset;break;case"r":Y.x+=Y.width/2+Y.labeloffset;break}})}function I(U){t.forEach(U.edges(),function(W){var Y=U.edge(W);Y.reversed&&Y.points.reverse()})}function z(U){t.forEach(U.nodes(),function(W){if(U.children(W).length){var Y=U.node(W),ee=U.node(Y.borderTop),oe=U.node(Y.borderBottom),te=U.node(t.last(Y.borderLeft)),ie=U.node(t.last(Y.borderRight));Y.width=Math.abs(ie.x-te.x),Y.height=Math.abs(oe.y-ee.y),Y.x=te.x+Y.width/2,Y.y=ee.y+Y.height/2}}),t.forEach(U.nodes(),function(W){U.node(W).dummy==="border"&&U.removeNode(W)})}function ae(U){t.forEach(U.edges(),function(W){if(W.v===W.w){var Y=U.node(W.v);Y.selfEdges||(Y.selfEdges=[]),Y.selfEdges.push({e:W,label:U.edge(W)}),U.removeEdge(W)}})}function re(U){var W=p.buildLayerMatrix(U);t.forEach(W,function(Y){var ee=0;t.forEach(Y,function(oe,te){var ie=U.node(oe);ie.order=te+ee,t.forEach(ie.selfEdges,function(se){p.addDummyNode(U,"selfedge",{width:se.label.width,height:se.label.height,rank:ie.rank,order:te+ ++ee,e:se.e,label:se.label},"_se")}),delete ie.selfEdges})})}function K(U){t.forEach(U.nodes(),function(W){var Y=U.node(W);if(Y.dummy==="selfedge"){var ee=U.node(Y.e.v),oe=ee.x+ee.width/2,te=ee.y,ie=Y.x-oe,se=ee.height/2;U.setEdge(Y.e,Y.label),U.removeNode(W),Y.label.points=[{x:oe+2*ie/3,y:te-se},{x:oe+5*ie/6,y:te-se},{x:oe+ie,y:te},{x:oe+5*ie/6,y:te+se},{x:oe+2*ie/3,y:te+se}],Y.label.x=Y.x,Y.label.y=Y.y}})}function V(U,W){return t.mapValues(t.pick(U,W),Number)}function Z(U){var W={};return t.forEach(U,function(Y,ee){W[ee.toLowerCase()]=Y}),W}return db}var hb,XM;function m4(){if(XM)return hb;XM=1;var t=hr(),e=kn(),r=ca().Graph;hb={debugOrdering:n};function n(a){var i=e.buildLayerMatrix(a),o=new r({compound:!0,multigraph:!0}).setGraph({});return t.forEach(a.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+a.node(s).rank)}),t.forEach(a.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),t.forEach(i,function(s,u){var f="layer"+u;o.setNode(f,{rank:"same"}),t.reduce(s,function(c,h){return o.setEdge(c,h,{style:"invis"}),h})}),o}return hb}var vb,KM;function b4(){return KM||(KM=1,vb="0.8.5"),vb}var pb,jM;function w4(){return jM||(jM=1,pb={graphlib:ca(),layout:y4(),debug:m4(),util:{time:kn().time,notime:kn().notime},version:b4()}),pb}var x4=kf.exports,ZM;function C4(){return ZM||(ZM=1,function(t,e){(function(n,a){t.exports=a(w4())})(x4,function(r){return function(n){var a={};function i(o){if(a[o])return a[o].exports;var s=a[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=n,i.c=a,i.d=function(o,s,u){i.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:u})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,s){if(s&1&&(o=i(o)),s&8||s&4&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(i.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),s&2&&typeof o!="string")for(var f in o)i.d(u,f,(function(c){return o[c]}).bind(null,f));return u},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=0)}([function(n,a,i){var o=i(1),s=function(f){f&&f("layout","dagre",o)};typeof cytoscape<"u"&&s(cytoscape),n.exports=s},function(n,a,i){function o(p){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(g){return typeof g}:o=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o(p)}var s=function(y){return typeof y=="function"},u=i(2),f=i(3),c=i(4);function h(p){this.options=f({},u,p)}h.prototype.run=function(){var p=this.options,y=this,g=p.cy,E=p.eles,w=function(K,V){return s(V)?V.apply(K,[K]):V},v=p.boundingBox||{x1:0,y1:0,w:g.width(),h:g.height()};v.x2===void 0&&(v.x2=v.x1+v.w),v.w===void 0&&(v.w=v.x2-v.x1),v.y2===void 0&&(v.y2=v.y1+v.h),v.h===void 0&&(v.h=v.y2-v.y1);var C=new c.graphlib.Graph({multigraph:!0,compound:!0}),x={},S=function(K,V){V!=null&&(x[K]=V)};S("nodesep",p.nodeSep),S("edgesep",p.edgeSep),S("ranksep",p.rankSep),S("rankdir",p.rankDir),S("align",p.align),S("ranker",p.ranker),S("acyclicer",p.acyclicer),C.setGraph(x),C.setDefaultEdgeLabel(function(){return{}}),C.setDefaultNodeLabel(function(){return{}});var A=E.nodes();s(p.sort)&&(A=A.sort(p.sort));for(var D=0;D<A.length;D++){var _=A[D],M=_.layoutDimensions(p);C.setNode(_.id(),{width:M.w,height:M.h,name:_.id()})}for(var k=0;k<A.length;k++){var F=A[k];F.isChild()&&C.setParent(F.id(),F.parent().id())}var G=E.edges().stdFilter(function(re){return!re.source().isParent()&&!re.target().isParent()});s(p.sort)&&(G=G.sort(p.sort));for(var B=0;B<G.length;B++){var q=G[B];C.setEdge(q.source().id(),q.target().id(),{minlen:w(q,p.minLen),weight:w(q,p.edgeWeight),name:q.id()},q.id())}c.layout(C);for(var R=C.nodes(),P=0;P<R.length;P++){var N=R[P],I=C.node(N);g.getElementById(N).scratch().dagre=I}var z;p.boundingBox?(z={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},A.forEach(function(re){var K=re.scratch().dagre;z.x1=Math.min(z.x1,K.x),z.x2=Math.max(z.x2,K.x),z.y1=Math.min(z.y1,K.y),z.y2=Math.max(z.y2,K.y)}),z.w=z.x2-z.x1,z.h=z.y2-z.y1):z=v;var ae=function(K){if(p.boundingBox){var V=z.w===0?0:(K.x-z.x1)/z.w,Z=z.h===0?0:(K.y-z.y1)/z.h;return{x:v.x1+V*v.w,y:v.y1+Z*v.h}}else return K};return A.layoutPositions(y,p,function(re){re=o(re)==="object"?re:this;var K=re.scratch().dagre;return ae({x:K.x,y:K.y})}),this},n.exports=h},function(n,a){var i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(s){return 1},edgeWeight:function(s){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(s,u){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(s,u){return u},ready:function(){},sort:void 0,stop:function(){}};n.exports=i},function(n,a){n.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return s.forEach(function(f){Object.keys(f).forEach(function(c){return i[c]=f[c]})}),i}},function(n,a){n.exports=r}])})}(kf)),kf.exports}var E4=C4();const T4=So(E4);var Nf={exports:{}},Of={exports:{}},If={exports:{}},S4=If.exports,QM;function A4(){return QM||(QM=1,function(t,e){(function(n,a){t.exports=a()})(S4,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.i=function(i){return i},a.d=function(i,o,s){a.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:s})},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=28)}([function(r,n,a){function i(){}i.QUALITY=1,i.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,i.DEFAULT_INCREMENTAL=!1,i.DEFAULT_ANIMATION_ON_LAYOUT=!0,i.DEFAULT_ANIMATION_DURING_LAYOUT=!1,i.DEFAULT_ANIMATION_PERIOD=50,i.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,i.DEFAULT_GRAPH_MARGIN=15,i.NODE_DIMENSIONS_INCLUDE_LABELS=!1,i.SIMPLE_NODE_SIZE=40,i.SIMPLE_NODE_HALF_SIZE=i.SIMPLE_NODE_SIZE/2,i.EMPTY_COMPOUND_NODE_SIZE=40,i.MIN_EDGE_LENGTH=1,i.WORLD_BOUNDARY=1e6,i.INITIAL_WORLD_BOUNDARY=i.WORLD_BOUNDARY/1e3,i.WORLD_CENTER_X=1200,i.WORLD_CENTER_Y=900,r.exports=i},function(r,n,a){var i=a(2),o=a(8),s=a(9);function u(c,h,p){i.call(this,p),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=p,this.bendpoints=[],this.source=c,this.target=h}u.prototype=Object.create(i.prototype);for(var f in i)u[f]=i[f];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(c){if(this.source===c)return this.target;if(this.target===c)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(c,h){for(var p=this.getOtherEnd(c),y=h.getGraphManager().getRoot();;){if(p.getOwner()==h)return p;if(p.getOwner()==y)break;p=p.getOwner().getParent()}return null},u.prototype.updateLength=function(){var c=new Array(4);this.isOverlapingSourceAndTarget=o.getIntersection(this.target.getRect(),this.source.getRect(),c),this.isOverlapingSourceAndTarget||(this.lengthX=c[0]-c[2],this.lengthY=c[1]-c[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=u},function(r,n,a){function i(o){this.vGraphObject=o}r.exports=i},function(r,n,a){var i=a(2),o=a(10),s=a(13),u=a(0),f=a(16),c=a(5);function h(y,g,E,w){E==null&&w==null&&(w=g),i.call(this,w),y.graphManager!=null&&(y=y.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=w,this.edges=[],this.graphManager=y,E!=null&&g!=null?this.rect=new s(g.x,g.y,E.width,E.height):this.rect=new s}h.prototype=Object.create(i.prototype);for(var p in i)h[p]=i[p];h.prototype.getEdges=function(){return this.edges},h.prototype.getChild=function(){return this.child},h.prototype.getOwner=function(){return this.owner},h.prototype.getWidth=function(){return this.rect.width},h.prototype.setWidth=function(y){this.rect.width=y},h.prototype.getHeight=function(){return this.rect.height},h.prototype.setHeight=function(y){this.rect.height=y},h.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},h.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},h.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},h.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},h.prototype.getRect=function(){return this.rect},h.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},h.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},h.prototype.setRect=function(y,g){this.rect.x=y.x,this.rect.y=y.y,this.rect.width=g.width,this.rect.height=g.height},h.prototype.setCenter=function(y,g){this.rect.x=y-this.rect.width/2,this.rect.y=g-this.rect.height/2},h.prototype.setLocation=function(y,g){this.rect.x=y,this.rect.y=g},h.prototype.moveBy=function(y,g){this.rect.x+=y,this.rect.y+=g},h.prototype.getEdgeListToNode=function(y){var g=[],E=this;return E.edges.forEach(function(w){if(w.target==y){if(w.source!=E)throw"Incorrect edge source!";g.push(w)}}),g},h.prototype.getEdgesBetween=function(y){var g=[],E=this;return E.edges.forEach(function(w){if(!(w.source==E||w.target==E))throw"Incorrect edge source and/or target";(w.target==y||w.source==y)&&g.push(w)}),g},h.prototype.getNeighborsList=function(){var y=new Set,g=this;return g.edges.forEach(function(E){if(E.source==g)y.add(E.target);else{if(E.target!=g)throw"Incorrect incidency!";y.add(E.source)}}),y},h.prototype.withChildren=function(){var y=new Set,g,E;if(y.add(this),this.child!=null)for(var w=this.child.getNodes(),v=0;v<w.length;v++)g=w[v],E=g.withChildren(),E.forEach(function(C){y.add(C)});return y},h.prototype.getNoOfChildren=function(){var y=0,g;if(this.child==null)y=1;else for(var E=this.child.getNodes(),w=0;w<E.length;w++)g=E[w],y+=g.getNoOfChildren();return y==0&&(y=1),y},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},h.prototype.scatter=function(){var y,g,E=-u.INITIAL_WORLD_BOUNDARY,w=u.INITIAL_WORLD_BOUNDARY;y=u.WORLD_CENTER_X+f.nextDouble()*(w-E)+E;var v=-u.INITIAL_WORLD_BOUNDARY,C=u.INITIAL_WORLD_BOUNDARY;g=u.WORLD_CENTER_Y+f.nextDouble()*(C-v)+v,this.rect.x=y,this.rect.y=g},h.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var y=this.getChild();if(y.updateBounds(!0),this.rect.x=y.getLeft(),this.rect.y=y.getTop(),this.setWidth(y.getRight()-y.getLeft()),this.setHeight(y.getBottom()-y.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var g=y.getRight()-y.getLeft(),E=y.getBottom()-y.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(g+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>g?(this.rect.x-=(this.labelWidth-g)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(g+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(E+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>E?(this.rect.y-=(this.labelHeight-E)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(E+this.labelHeight))}}},h.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},h.prototype.transform=function(y){var g=this.rect.x;g>u.WORLD_BOUNDARY?g=u.WORLD_BOUNDARY:g<-u.WORLD_BOUNDARY&&(g=-u.WORLD_BOUNDARY);var E=this.rect.y;E>u.WORLD_BOUNDARY?E=u.WORLD_BOUNDARY:E<-u.WORLD_BOUNDARY&&(E=-u.WORLD_BOUNDARY);var w=new c(g,E),v=y.inverseTransformPoint(w);this.setLocation(v.x,v.y)},h.prototype.getLeft=function(){return this.rect.x},h.prototype.getRight=function(){return this.rect.x+this.rect.width},h.prototype.getTop=function(){return this.rect.y},h.prototype.getBottom=function(){return this.rect.y+this.rect.height},h.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=h},function(r,n,a){var i=a(0);function o(){}for(var s in i)o[s]=i[s];o.MAX_ITERATIONS=2500,o.DEFAULT_EDGE_LENGTH=50,o.DEFAULT_SPRING_STRENGTH=.45,o.DEFAULT_REPULSION_STRENGTH=4500,o.DEFAULT_GRAVITY_STRENGTH=.4,o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,o.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,o.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,o.COOLING_ADAPTATION_FACTOR=.33,o.ADAPTATION_LOWER_NODE_LIMIT=1e3,o.ADAPTATION_UPPER_NODE_LIMIT=5e3,o.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,o.MAX_NODE_DISPLACEMENT=o.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,o.MIN_REPULSION_DIST=o.DEFAULT_EDGE_LENGTH/10,o.CONVERGENCE_CHECK_PERIOD=100,o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,o.MIN_EDGE_LENGTH=1,o.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=o},function(r,n,a){function i(o,s){o==null&&s==null?(this.x=0,this.y=0):(this.x=o,this.y=s)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.setX=function(o){this.x=o},i.prototype.setY=function(o){this.y=o},i.prototype.getDifference=function(o){return new DimensionD(this.x-o.x,this.y-o.y)},i.prototype.getCopy=function(){return new i(this.x,this.y)},i.prototype.translate=function(o){return this.x+=o.width,this.y+=o.height,this},r.exports=i},function(r,n,a){var i=a(2),o=a(10),s=a(0),u=a(7),f=a(3),c=a(1),h=a(13),p=a(12),y=a(11);function g(w,v,C){i.call(this,C),this.estimatedSize=o.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=w,v!=null&&v instanceof u?this.graphManager=v:v!=null&&v instanceof Layout&&(this.graphManager=v.graphManager)}g.prototype=Object.create(i.prototype);for(var E in i)g[E]=i[E];g.prototype.getNodes=function(){return this.nodes},g.prototype.getEdges=function(){return this.edges},g.prototype.getGraphManager=function(){return this.graphManager},g.prototype.getParent=function(){return this.parent},g.prototype.getLeft=function(){return this.left},g.prototype.getRight=function(){return this.right},g.prototype.getTop=function(){return this.top},g.prototype.getBottom=function(){return this.bottom},g.prototype.isConnected=function(){return this.isConnected},g.prototype.add=function(w,v,C){if(v==null&&C==null){var x=w;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(x)>-1)throw"Node already in graph!";return x.owner=this,this.getNodes().push(x),x}else{var S=w;if(!(this.getNodes().indexOf(v)>-1&&this.getNodes().indexOf(C)>-1))throw"Source or target not in graph!";if(!(v.owner==C.owner&&v.owner==this))throw"Both owners must be this graph!";return v.owner!=C.owner?null:(S.source=v,S.target=C,S.isInterGraph=!1,this.getEdges().push(S),v.edges.push(S),C!=v&&C.edges.push(S),S)}},g.prototype.remove=function(w){var v=w;if(w instanceof f){if(v==null)throw"Node is null!";if(!(v.owner!=null&&v.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var C=v.edges.slice(),x,S=C.length,A=0;A<S;A++)x=C[A],x.isInterGraph?this.graphManager.remove(x):x.source.owner.remove(x);var D=this.nodes.indexOf(v);if(D==-1)throw"Node not in owner node list!";this.nodes.splice(D,1)}else if(w instanceof c){var x=w;if(x==null)throw"Edge is null!";if(!(x.source!=null&&x.target!=null))throw"Source and/or target is null!";if(!(x.source.owner!=null&&x.target.owner!=null&&x.source.owner==this&&x.target.owner==this))throw"Source and/or target owner is invalid!";var _=x.source.edges.indexOf(x),M=x.target.edges.indexOf(x);if(!(_>-1&&M>-1))throw"Source and/or target doesn't know this edge!";x.source.edges.splice(_,1),x.target!=x.source&&x.target.edges.splice(M,1);var D=x.source.owner.getEdges().indexOf(x);if(D==-1)throw"Not in owner's edge list!";x.source.owner.getEdges().splice(D,1)}},g.prototype.updateLeftTop=function(){for(var w=o.MAX_VALUE,v=o.MAX_VALUE,C,x,S,A=this.getNodes(),D=A.length,_=0;_<D;_++){var M=A[_];C=M.getTop(),x=M.getLeft(),w>C&&(w=C),v>x&&(v=x)}return w==o.MAX_VALUE?null:(A[0].getParent().paddingLeft!=null?S=A[0].getParent().paddingLeft:S=this.margin,this.left=v-S,this.top=w-S,new p(this.left,this.top))},g.prototype.updateBounds=function(w){for(var v=o.MAX_VALUE,C=-o.MAX_VALUE,x=o.MAX_VALUE,S=-o.MAX_VALUE,A,D,_,M,k,F=this.nodes,G=F.length,B=0;B<G;B++){var q=F[B];w&&q.child!=null&&q.updateBounds(),A=q.getLeft(),D=q.getRight(),_=q.getTop(),M=q.getBottom(),v>A&&(v=A),C<D&&(C=D),x>_&&(x=_),S<M&&(S=M)}var R=new h(v,x,C-v,S-x);v==o.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),F[0].getParent().paddingLeft!=null?k=F[0].getParent().paddingLeft:k=this.margin,this.left=R.x-k,this.right=R.x+R.width+k,this.top=R.y-k,this.bottom=R.y+R.height+k},g.calculateBounds=function(w){for(var v=o.MAX_VALUE,C=-o.MAX_VALUE,x=o.MAX_VALUE,S=-o.MAX_VALUE,A,D,_,M,k=w.length,F=0;F<k;F++){var G=w[F];A=G.getLeft(),D=G.getRight(),_=G.getTop(),M=G.getBottom(),v>A&&(v=A),C<D&&(C=D),x>_&&(x=_),S<M&&(S=M)}var B=new h(v,x,C-v,S-x);return B},g.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},g.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},g.prototype.calcEstimatedSize=function(){for(var w=0,v=this.nodes,C=v.length,x=0;x<C;x++){var S=v[x];w+=S.calcEstimatedSize()}return w==0?this.estimatedSize=s.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=w/Math.sqrt(this.nodes.length),this.estimatedSize},g.prototype.updateConnected=function(){var w=this;if(this.nodes.length==0){this.isConnected=!0;return}var v=new y,C=new Set,x=this.nodes[0],S,A,D=x.withChildren();for(D.forEach(function(B){v.push(B),C.add(B)});v.length!==0;){x=v.shift(),S=x.getEdges();for(var _=S.length,M=0;M<_;M++){var k=S[M];if(A=k.getOtherEndInGraph(x,this),A!=null&&!C.has(A)){var F=A.withChildren();F.forEach(function(B){v.push(B),C.add(B)})}}}if(this.isConnected=!1,C.size>=this.nodes.length){var G=0;C.forEach(function(B){B.owner==w&&G++}),G==this.nodes.length&&(this.isConnected=!0)}},r.exports=g},function(r,n,a){var i,o=a(1);function s(u){i=a(6),this.layout=u,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var u=this.layout.newGraph(),f=this.layout.newNode(null),c=this.add(u,f);return this.setRootGraph(c),this.rootGraph},s.prototype.add=function(u,f,c,h,p){if(c==null&&h==null&&p==null){if(u==null)throw"Graph is null!";if(f==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(f.child!=null)throw"Already has a child!";return u.parent=f,f.child=u,u}else{p=c,h=f,c=u;var y=h.getOwner(),g=p.getOwner();if(!(y!=null&&y.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(g!=null&&g.getGraphManager()==this))throw"Target not in this graph mgr!";if(y==g)return c.isInterGraph=!1,y.add(c,h,p);if(c.isInterGraph=!0,c.source=h,c.target=p,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),!(c.source!=null&&c.target!=null))throw"Edge source and/or target is null!";if(!(c.source.edges.indexOf(c)==-1&&c.target.edges.indexOf(c)==-1))throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c}},s.prototype.remove=function(u){if(u instanceof i){var f=u;if(f.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(f==this.rootGraph||f.parent!=null&&f.parent.graphManager==this))throw"Invalid parent node!";var c=[];c=c.concat(f.getEdges());for(var h,p=c.length,y=0;y<p;y++)h=c[y],f.remove(h);var g=[];g=g.concat(f.getNodes());var E;p=g.length;for(var y=0;y<p;y++)E=g[y],f.remove(E);f==this.rootGraph&&this.setRootGraph(null);var w=this.graphs.indexOf(f);this.graphs.splice(w,1),f.parent=null}else if(u instanceof o){if(h=u,h==null)throw"Edge is null!";if(!h.isInterGraph)throw"Not an inter-graph edge!";if(!(h.source!=null&&h.target!=null))throw"Source and/or target is null!";if(!(h.source.edges.indexOf(h)!=-1&&h.target.edges.indexOf(h)!=-1))throw"Source and/or target doesn't know this edge!";var w=h.source.edges.indexOf(h);if(h.source.edges.splice(w,1),w=h.target.edges.indexOf(h),h.target.edges.splice(w,1),!(h.source.owner!=null&&h.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(h.source.owner.getGraphManager().edges.indexOf(h)==-1)throw"Not in owner graph manager's edge list!";var w=h.source.owner.getGraphManager().edges.indexOf(h);h.source.owner.getGraphManager().edges.splice(w,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],f=this.getGraphs(),c=f.length,h=0;h<c;h++)u=u.concat(f[h].getNodes());this.allNodes=u}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],f=this.getGraphs();f.length;for(var c=0;c<f.length;c++)u=u.concat(f[c].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(u,f){if(!(u!=null&&f!=null))throw"assert failed";if(u==f)return!0;var c=u.getOwner(),h;do{if(h=c.getParent(),h==null)break;if(h==f)return!0;if(c=h.getOwner(),c==null)break}while(!0);c=f.getOwner();do{if(h=c.getParent(),h==null)break;if(h==u)return!0;if(c=h.getOwner(),c==null)break}while(!0);return!1},s.prototype.calcLowestCommonAncestors=function(){for(var u,f,c,h,p,y=this.getAllEdges(),g=y.length,E=0;E<g;E++){if(u=y[E],f=u.source,c=u.target,u.lca=null,u.sourceInLca=f,u.targetInLca=c,f==c){u.lca=f.getOwner();continue}for(h=f.getOwner();u.lca==null;){for(u.targetInLca=c,p=c.getOwner();u.lca==null;){if(p==h){u.lca=p;break}if(p==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=p.getParent(),p=u.targetInLca.getOwner()}if(h==this.rootGraph)break;u.lca==null&&(u.sourceInLca=h.getParent(),h=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},s.prototype.calcLowestCommonAncestor=function(u,f){if(u==f)return u.getOwner();var c=u.getOwner();do{if(c==null)break;var h=f.getOwner();do{if(h==null)break;if(h==c)return h;h=h.getParent().getOwner()}while(!0);c=c.getParent().getOwner()}while(!0);return c},s.prototype.calcInclusionTreeDepths=function(u,f){u==null&&f==null&&(u=this.rootGraph,f=1);for(var c,h=u.getNodes(),p=h.length,y=0;y<p;y++)c=h[y],c.inclusionTreeDepth=f,c.child!=null&&this.calcInclusionTreeDepths(c.child,f+1)},s.prototype.includesInvalidEdge=function(){for(var u,f=[],c=this.edges.length,h=0;h<c;h++)u=this.edges[h],this.isOneAncestorOfOther(u.source,u.target)&&f.push(u);for(var h=0;h<f.length;h++)this.remove(f[h]);return!1},r.exports=s},function(r,n,a){var i=a(12);function o(){}o.calcSeparationAmount=function(s,u,f,c){if(!s.intersects(u))throw"assert failed";var h=new Array(2);this.decideDirectionsForOverlappingNodes(s,u,h),f[0]=Math.min(s.getRight(),u.getRight())-Math.max(s.x,u.x),f[1]=Math.min(s.getBottom(),u.getBottom())-Math.max(s.y,u.y),s.getX()<=u.getX()&&s.getRight()>=u.getRight()?f[0]+=Math.min(u.getX()-s.getX(),s.getRight()-u.getRight()):u.getX()<=s.getX()&&u.getRight()>=s.getRight()&&(f[0]+=Math.min(s.getX()-u.getX(),u.getRight()-s.getRight())),s.getY()<=u.getY()&&s.getBottom()>=u.getBottom()?f[1]+=Math.min(u.getY()-s.getY(),s.getBottom()-u.getBottom()):u.getY()<=s.getY()&&u.getBottom()>=s.getBottom()&&(f[1]+=Math.min(s.getY()-u.getY(),u.getBottom()-s.getBottom()));var p=Math.abs((u.getCenterY()-s.getCenterY())/(u.getCenterX()-s.getCenterX()));u.getCenterY()===s.getCenterY()&&u.getCenterX()===s.getCenterX()&&(p=1);var y=p*f[0],g=f[1]/p;f[0]<g?g=f[0]:y=f[1],f[0]=-1*h[0]*(g/2+c),f[1]=-1*h[1]*(y/2+c)},o.decideDirectionsForOverlappingNodes=function(s,u,f){s.getCenterX()<u.getCenterX()?f[0]=-1:f[0]=1,s.getCenterY()<u.getCenterY()?f[1]=-1:f[1]=1},o.getIntersection2=function(s,u,f){var c=s.getCenterX(),h=s.getCenterY(),p=u.getCenterX(),y=u.getCenterY();if(s.intersects(u))return f[0]=c,f[1]=h,f[2]=p,f[3]=y,!0;var g=s.getX(),E=s.getY(),w=s.getRight(),v=s.getX(),C=s.getBottom(),x=s.getRight(),S=s.getWidthHalf(),A=s.getHeightHalf(),D=u.getX(),_=u.getY(),M=u.getRight(),k=u.getX(),F=u.getBottom(),G=u.getRight(),B=u.getWidthHalf(),q=u.getHeightHalf(),R=!1,P=!1;if(c===p){if(h>y)return f[0]=c,f[1]=E,f[2]=p,f[3]=F,!1;if(h<y)return f[0]=c,f[1]=C,f[2]=p,f[3]=_,!1}else if(h===y){if(c>p)return f[0]=g,f[1]=h,f[2]=M,f[3]=y,!1;if(c<p)return f[0]=w,f[1]=h,f[2]=D,f[3]=y,!1}else{var N=s.height/s.width,I=u.height/u.width,z=(y-h)/(p-c),ae=void 0,re=void 0,K=void 0,V=void 0,Z=void 0,U=void 0;if(-N===z?c>p?(f[0]=v,f[1]=C,R=!0):(f[0]=w,f[1]=E,R=!0):N===z&&(c>p?(f[0]=g,f[1]=E,R=!0):(f[0]=x,f[1]=C,R=!0)),-I===z?p>c?(f[2]=k,f[3]=F,P=!0):(f[2]=M,f[3]=_,P=!0):I===z&&(p>c?(f[2]=D,f[3]=_,P=!0):(f[2]=G,f[3]=F,P=!0)),R&&P)return!1;if(c>p?h>y?(ae=this.getCardinalDirection(N,z,4),re=this.getCardinalDirection(I,z,2)):(ae=this.getCardinalDirection(-N,z,3),re=this.getCardinalDirection(-I,z,1)):h>y?(ae=this.getCardinalDirection(-N,z,1),re=this.getCardinalDirection(-I,z,3)):(ae=this.getCardinalDirection(N,z,2),re=this.getCardinalDirection(I,z,4)),!R)switch(ae){case 1:V=E,K=c+-A/z,f[0]=K,f[1]=V;break;case 2:K=x,V=h+S*z,f[0]=K,f[1]=V;break;case 3:V=C,K=c+A/z,f[0]=K,f[1]=V;break;case 4:K=v,V=h+-S*z,f[0]=K,f[1]=V;break}if(!P)switch(re){case 1:U=_,Z=p+-q/z,f[2]=Z,f[3]=U;break;case 2:Z=G,U=y+B*z,f[2]=Z,f[3]=U;break;case 3:U=F,Z=p+q/z,f[2]=Z,f[3]=U;break;case 4:Z=k,U=y+-B*z,f[2]=Z,f[3]=U;break}}return!1},o.getCardinalDirection=function(s,u,f){return s>u?f:1+f%4},o.getIntersection=function(s,u,f,c){if(c==null)return this.getIntersection2(s,u,f);var h=s.x,p=s.y,y=u.x,g=u.y,E=f.x,w=f.y,v=c.x,C=c.y,x=void 0,S=void 0,A=void 0,D=void 0,_=void 0,M=void 0,k=void 0,F=void 0,G=void 0;return A=g-p,_=h-y,k=y*p-h*g,D=C-w,M=E-v,F=v*w-E*C,G=A*M-D*_,G===0?null:(x=(_*F-M*k)/G,S=(D*k-A*F)/G,new i(x,S))},o.angleOfVector=function(s,u,f,c){var h=void 0;return s!==f?(h=Math.atan((c-u)/(f-s)),f<s?h+=Math.PI:c<u&&(h+=this.TWO_PI)):c<u?h=this.ONE_AND_HALF_PI:h=this.HALF_PI,h},o.doIntersect=function(s,u,f,c){var h=s.x,p=s.y,y=u.x,g=u.y,E=f.x,w=f.y,v=c.x,C=c.y,x=(y-h)*(C-w)-(v-E)*(g-p);if(x===0)return!1;var S=((C-w)*(v-h)+(E-v)*(C-p))/x,A=((p-g)*(v-h)+(y-h)*(C-p))/x;return 0<S&&S<1&&0<A&&A<1},o.findCircleLineIntersections=function(s,u,f,c,h,p,y){var g=(f-s)*(f-s)+(c-u)*(c-u),E=2*((s-h)*(f-s)+(u-p)*(c-u)),w=(s-h)*(s-h)+(u-p)*(u-p)-y*y,v=E*E-4*g*w;if(v>=0){var C=(-E+Math.sqrt(E*E-4*g*w))/(2*g),x=(-E-Math.sqrt(E*E-4*g*w))/(2*g),S=null;return C>=0&&C<=1?[C]:x>=0&&x<=1?[x]:S}else return null},o.HALF_PI=.5*Math.PI,o.ONE_AND_HALF_PI=1.5*Math.PI,o.TWO_PI=2*Math.PI,o.THREE_PI=3*Math.PI,r.exports=o},function(r,n,a){function i(){}i.sign=function(o){return o>0?1:o<0?-1:0},i.floor=function(o){return o<0?Math.ceil(o):Math.floor(o)},i.ceil=function(o){return o<0?Math.floor(o):Math.ceil(o)},r.exports=i},function(r,n,a){function i(){}i.MAX_VALUE=2147483647,i.MIN_VALUE=-2147483648,r.exports=i},function(r,n,a){var i=function(){function h(p,y){for(var g=0;g<y.length;g++){var E=y[g];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(p,E.key,E)}}return function(p,y,g){return y&&h(p.prototype,y),g&&h(p,g),p}}();function o(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}var s=function(p){return{value:p,next:null,prev:null}},u=function(p,y,g,E){return p!==null?p.next=y:E.head=y,g!==null?g.prev=y:E.tail=y,y.prev=p,y.next=g,E.length++,y},f=function(p,y){var g=p.prev,E=p.next;return g!==null?g.next=E:y.head=E,E!==null?E.prev=g:y.tail=g,p.prev=p.next=null,y.length--,p},c=function(){function h(p){var y=this;o(this,h),this.length=0,this.head=null,this.tail=null,p!=null&&p.forEach(function(g){return y.push(g)})}return i(h,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(y,g){return u(g.prev,s(y),g,this)}},{key:"insertAfter",value:function(y,g){return u(g,s(y),g.next,this)}},{key:"insertNodeBefore",value:function(y,g){return u(g.prev,y,g,this)}},{key:"insertNodeAfter",value:function(y,g){return u(g,y,g.next,this)}},{key:"push",value:function(y){return u(this.tail,s(y),null,this)}},{key:"unshift",value:function(y){return u(null,s(y),this.head,this)}},{key:"remove",value:function(y){return f(y,this)}},{key:"pop",value:function(){return f(this.tail,this).value}},{key:"popNode",value:function(){return f(this.tail,this)}},{key:"shift",value:function(){return f(this.head,this).value}},{key:"shiftNode",value:function(){return f(this.head,this)}},{key:"get_object_at",value:function(y){if(y<=this.length()){for(var g=1,E=this.head;g<y;)E=E.next,g++;return E.value}}},{key:"set_object_at",value:function(y,g){if(y<=this.length()){for(var E=1,w=this.head;E<y;)w=w.next,E++;w.value=g}}}]),h}();r.exports=c},function(r,n,a){function i(o,s,u){this.x=null,this.y=null,o==null&&s==null&&u==null?(this.x=0,this.y=0):typeof o=="number"&&typeof s=="number"&&u==null?(this.x=o,this.y=s):o.constructor.name=="Point"&&s==null&&u==null&&(u=o,this.x=u.x,this.y=u.y)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.getLocation=function(){return new i(this.x,this.y)},i.prototype.setLocation=function(o,s,u){o.constructor.name=="Point"&&s==null&&u==null?(u=o,this.setLocation(u.x,u.y)):typeof o=="number"&&typeof s=="number"&&u==null&&(parseInt(o)==o&&parseInt(s)==s?this.move(o,s):(this.x=Math.floor(o+.5),this.y=Math.floor(s+.5)))},i.prototype.move=function(o,s){this.x=o,this.y=s},i.prototype.translate=function(o,s){this.x+=o,this.y+=s},i.prototype.equals=function(o){if(o.constructor.name=="Point"){var s=o;return this.x==s.x&&this.y==s.y}return this==o},i.prototype.toString=function(){return new i().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=i},function(r,n,a){function i(o,s,u,f){this.x=0,this.y=0,this.width=0,this.height=0,o!=null&&s!=null&&u!=null&&f!=null&&(this.x=o,this.y=s,this.width=u,this.height=f)}i.prototype.getX=function(){return this.x},i.prototype.setX=function(o){this.x=o},i.prototype.getY=function(){return this.y},i.prototype.setY=function(o){this.y=o},i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(o){this.width=o},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(o){this.height=o},i.prototype.getRight=function(){return this.x+this.width},i.prototype.getBottom=function(){return this.y+this.height},i.prototype.intersects=function(o){return!(this.getRight()<o.x||this.getBottom()<o.y||o.getRight()<this.x||o.getBottom()<this.y)},i.prototype.getCenterX=function(){return this.x+this.width/2},i.prototype.getMinX=function(){return this.getX()},i.prototype.getMaxX=function(){return this.getX()+this.width},i.prototype.getCenterY=function(){return this.y+this.height/2},i.prototype.getMinY=function(){return this.getY()},i.prototype.getMaxY=function(){return this.getY()+this.height},i.prototype.getWidthHalf=function(){return this.width/2},i.prototype.getHeightHalf=function(){return this.height/2},r.exports=i},function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function o(){}o.lastID=0,o.createID=function(s){return o.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=o.getString(),o.lastID++),s.uniqueID)},o.getString=function(s){return s==null&&(s=o.lastID),"Object#"+s},o.isPrimitive=function(s){var u=typeof s>"u"?"undefined":i(s);return s==null||u!="object"&&u!="function"},r.exports=o},function(r,n,a){function i(E){if(Array.isArray(E)){for(var w=0,v=Array(E.length);w<E.length;w++)v[w]=E[w];return v}else return Array.from(E)}var o=a(0),s=a(7),u=a(3),f=a(1),c=a(6),h=a(5),p=a(17),y=a(29);function g(E){y.call(this),this.layoutQuality=o.QUALITY,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=o.DEFAULT_INCREMENTAL,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,E!=null&&(this.isRemoteUse=E)}g.RANDOM_SEED=1,g.prototype=Object.create(y.prototype),g.prototype.getGraphManager=function(){return this.graphManager},g.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},g.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},g.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},g.prototype.newGraphManager=function(){var E=new s(this);return this.graphManager=E,E},g.prototype.newGraph=function(E){return new c(null,this.graphManager,E)},g.prototype.newNode=function(E){return new u(this.graphManager,E)},g.prototype.newEdge=function(E){return new f(null,null,E)},g.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},g.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var E;return this.checkLayoutSuccess()?E=!1:E=this.layout(),o.ANIMATE==="during"?!1:(E&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,E)},g.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},g.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var E=this.graphManager.getAllEdges(),w=0;w<E.length;w++)E[w];for(var v=this.graphManager.getRoot().getNodes(),w=0;w<v.length;w++)v[w];this.update(this.graphManager.getRoot())}},g.prototype.update=function(E){if(E==null)this.update2();else if(E instanceof u){var w=E;if(w.getChild()!=null)for(var v=w.getChild().getNodes(),C=0;C<v.length;C++)update(v[C]);if(w.vGraphObject!=null){var x=w.vGraphObject;x.update(w)}}else if(E instanceof f){var S=E;if(S.vGraphObject!=null){var A=S.vGraphObject;A.update(S)}}else if(E instanceof c){var D=E;if(D.vGraphObject!=null){var _=D.vGraphObject;_.update(D)}}},g.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=o.QUALITY,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=o.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},g.prototype.transform=function(E){if(E==null)this.transform(new h(0,0));else{var w=new p,v=this.graphManager.getRoot().updateLeftTop();if(v!=null){w.setWorldOrgX(E.x),w.setWorldOrgY(E.y),w.setDeviceOrgX(v.x),w.setDeviceOrgY(v.y);for(var C=this.getAllNodes(),x,S=0;S<C.length;S++)x=C[S],x.transform(w)}}},g.prototype.positionNodesRandomly=function(E){if(E==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var w,v,C=E.getNodes(),x=0;x<C.length;x++)w=C[x],v=w.getChild(),v==null||v.getNodes().length==0?w.scatter():(this.positionNodesRandomly(v),w.updateBounds())},g.prototype.getFlatForest=function(){for(var E=[],w=!0,v=this.graphManager.getRoot().getNodes(),C=!0,x=0;x<v.length;x++)v[x].getChild()!=null&&(C=!1);if(!C)return E;var S=new Set,A=[],D=new Map,_=[];for(_=_.concat(v);_.length>0&&w;){for(A.push(_[0]);A.length>0&&w;){var M=A[0];A.splice(0,1),S.add(M);for(var k=M.getEdges(),x=0;x<k.length;x++){var F=k[x].getOtherEnd(M);if(D.get(M)!=F)if(!S.has(F))A.push(F),D.set(F,M);else{w=!1;break}}}if(!w)E=[];else{var G=[].concat(i(S));E.push(G);for(var x=0;x<G.length;x++){var B=G[x],q=_.indexOf(B);q>-1&&_.splice(q,1)}S=new Set,D=new Map}}return E},g.prototype.createDummyNodesForBendpoints=function(E){for(var w=[],v=E.source,C=this.graphManager.calcLowestCommonAncestor(E.source,E.target),x=0;x<E.bendpoints.length;x++){var S=this.newNode(null);S.setRect(new Point(0,0),new Dimension(1,1)),C.add(S);var A=this.newEdge(null);this.graphManager.add(A,v,S),w.add(S),v=S}var A=this.newEdge(null);return this.graphManager.add(A,v,E.target),this.edgeToDummyNodes.set(E,w),E.isInterGraph()?this.graphManager.remove(E):C.remove(E),w},g.prototype.createBendpointsFromDummyNodes=function(){var E=[];E=E.concat(this.graphManager.getAllEdges()),E=[].concat(i(this.edgeToDummyNodes.keys())).concat(E);for(var w=0;w<E.length;w++){var v=E[w];if(v.bendpoints.length>0){for(var C=this.edgeToDummyNodes.get(v),x=0;x<C.length;x++){var S=C[x],A=new h(S.getCenterX(),S.getCenterY()),D=v.bendpoints.get(x);D.x=A.x,D.y=A.y,S.getOwner().remove(S)}this.graphManager.add(v,v.source,v.target)}}},g.transform=function(E,w,v,C){if(v!=null&&C!=null){var x=w;if(E<=50){var S=w/v;x-=(w-S)/50*(50-E)}else{var A=w*C;x+=(A-w)/50*(E-50)}return x}else{var D,_;return E<=50?(D=9*w/500,_=w/10):(D=9*w/50,_=-8*w),D*E+_}},g.findCenterOfTree=function(E){var w=[];w=w.concat(E);var v=[],C=new Map,x=!1,S=null;(w.length==1||w.length==2)&&(x=!0,S=w[0]);for(var A=0;A<w.length;A++){var D=w[A],_=D.getNeighborsList().size;C.set(D,D.getNeighborsList().size),_==1&&v.push(D)}var M=[];for(M=M.concat(v);!x;){var k=[];k=k.concat(M),M=[];for(var A=0;A<w.length;A++){var D=w[A],F=w.indexOf(D);F>=0&&w.splice(F,1);var G=D.getNeighborsList();G.forEach(function(R){if(v.indexOf(R)<0){var P=C.get(R),N=P-1;N==1&&M.push(R),C.set(R,N)}})}v=v.concat(M),(w.length==1||w.length==2)&&(x=!0,S=w[0])}return S},g.prototype.setGraphManager=function(E){this.graphManager=E},r.exports=g},function(r,n,a){function i(){}i.seed=1,i.x=0,i.nextDouble=function(){return i.x=Math.sin(i.seed++)*1e4,i.x-Math.floor(i.x)},r.exports=i},function(r,n,a){var i=a(5);function o(s,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}o.prototype.getWorldOrgX=function(){return this.lworldOrgX},o.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},o.prototype.getWorldOrgY=function(){return this.lworldOrgY},o.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},o.prototype.getWorldExtX=function(){return this.lworldExtX},o.prototype.setWorldExtX=function(s){this.lworldExtX=s},o.prototype.getWorldExtY=function(){return this.lworldExtY},o.prototype.setWorldExtY=function(s){this.lworldExtY=s},o.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},o.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},o.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},o.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},o.prototype.getDeviceExtX=function(){return this.ldeviceExtX},o.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},o.prototype.getDeviceExtY=function(){return this.ldeviceExtY},o.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},o.prototype.transformX=function(s){var u=0,f=this.lworldExtX;return f!=0&&(u=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/f),u},o.prototype.transformY=function(s){var u=0,f=this.lworldExtY;return f!=0&&(u=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/f),u},o.prototype.inverseTransformX=function(s){var u=0,f=this.ldeviceExtX;return f!=0&&(u=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/f),u},o.prototype.inverseTransformY=function(s){var u=0,f=this.ldeviceExtY;return f!=0&&(u=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/f),u},o.prototype.inverseTransformPoint=function(s){var u=new i(this.inverseTransformX(s.x),this.inverseTransformY(s.y));return u},r.exports=o},function(r,n,a){function i(y){if(Array.isArray(y)){for(var g=0,E=Array(y.length);g<y.length;g++)E[g]=y[g];return E}else return Array.from(y)}var o=a(15),s=a(4),u=a(0),f=a(8),c=a(9);function h(){o.call(this),this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=s.MAX_ITERATIONS}h.prototype=Object.create(o.prototype);for(var p in o)h[p]=o[p];h.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},h.prototype.calcIdealEdgeLengths=function(){for(var y,g,E,w,v,C,x,S=this.getGraphManager().getAllEdges(),A=0;A<S.length;A++)y=S[A],g=y.idealLength,y.isInterGraph&&(w=y.getSource(),v=y.getTarget(),C=y.getSourceInLca().getEstimatedSize(),x=y.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(y.idealLength+=C+x-2*u.SIMPLE_NODE_SIZE),E=y.getLca().getInclusionTreeDepth(),y.idealLength+=g*s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(w.getInclusionTreeDepth()+v.getInclusionTreeDepth()-2*E))},h.prototype.initSpringEmbedder=function(){var y=this.getAllNodes().length;this.incremental?(y>s.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*s.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(y-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-s.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT_INCREMENTAL):(y>s.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(s.COOLING_ADAPTATION_FACTOR,1-(y-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*(1-s.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},h.prototype.calcSpringForces=function(){for(var y=this.getAllEdges(),g,E=0;E<y.length;E++)g=y[E],this.calcSpringForce(g,g.idealLength)},h.prototype.calcRepulsionForces=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E,w,v,C,x=this.getAllNodes(),S;if(this.useFRGridVariant)for(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&y&&this.updateGrid(),S=new Set,E=0;E<x.length;E++)v=x[E],this.calculateRepulsionForceOfANode(v,S,y,g),S.add(v);else for(E=0;E<x.length;E++)for(v=x[E],w=E+1;w<x.length;w++)C=x[w],v.getOwner()==C.getOwner()&&this.calcRepulsionForce(v,C)},h.prototype.calcGravitationalForces=function(){for(var y,g=this.getAllNodesToApplyGravitation(),E=0;E<g.length;E++)y=g[E],this.calcGravitationalForce(y)},h.prototype.moveNodes=function(){for(var y=this.getAllNodes(),g,E=0;E<y.length;E++)g=y[E],g.move()},h.prototype.calcSpringForce=function(y,g){var E=y.getSource(),w=y.getTarget(),v,C,x,S;if(this.uniformLeafNodeSizes&&E.getChild()==null&&w.getChild()==null)y.updateLengthSimple();else if(y.updateLength(),y.isOverlapingSourceAndTarget)return;v=y.getLength(),v!=0&&(C=y.edgeElasticity*(v-g),x=C*(y.lengthX/v),S=C*(y.lengthY/v),E.springForceX+=x,E.springForceY+=S,w.springForceX-=x,w.springForceY-=S)},h.prototype.calcRepulsionForce=function(y,g){var E=y.getRect(),w=g.getRect(),v=new Array(2),C=new Array(4),x,S,A,D,_,M,k;if(E.intersects(w)){f.calcSeparationAmount(E,w,v,s.DEFAULT_EDGE_LENGTH/2),M=2*v[0],k=2*v[1];var F=y.noOfChildren*g.noOfChildren/(y.noOfChildren+g.noOfChildren);y.repulsionForceX-=F*M,y.repulsionForceY-=F*k,g.repulsionForceX+=F*M,g.repulsionForceY+=F*k}else this.uniformLeafNodeSizes&&y.getChild()==null&&g.getChild()==null?(x=w.getCenterX()-E.getCenterX(),S=w.getCenterY()-E.getCenterY()):(f.getIntersection(E,w,C),x=C[2]-C[0],S=C[3]-C[1]),Math.abs(x)<s.MIN_REPULSION_DIST&&(x=c.sign(x)*s.MIN_REPULSION_DIST),Math.abs(S)<s.MIN_REPULSION_DIST&&(S=c.sign(S)*s.MIN_REPULSION_DIST),A=x*x+S*S,D=Math.sqrt(A),_=(y.nodeRepulsion/2+g.nodeRepulsion/2)*y.noOfChildren*g.noOfChildren/A,M=_*x/D,k=_*S/D,y.repulsionForceX-=M,y.repulsionForceY-=k,g.repulsionForceX+=M,g.repulsionForceY+=k},h.prototype.calcGravitationalForce=function(y){var g,E,w,v,C,x,S,A;g=y.getOwner(),E=(g.getRight()+g.getLeft())/2,w=(g.getTop()+g.getBottom())/2,v=y.getCenterX()-E,C=y.getCenterY()-w,x=Math.abs(v)+y.getWidth()/2,S=Math.abs(C)+y.getHeight()/2,y.getOwner()==this.graphManager.getRoot()?(A=g.getEstimatedSize()*this.gravityRangeFactor,(x>A||S>A)&&(y.gravitationForceX=-this.gravityConstant*v,y.gravitationForceY=-this.gravityConstant*C)):(A=g.getEstimatedSize()*this.compoundGravityRangeFactor,(x>A||S>A)&&(y.gravitationForceX=-this.gravityConstant*v*this.compoundGravityConstant,y.gravitationForceY=-this.gravityConstant*C*this.compoundGravityConstant))},h.prototype.isConverged=function(){var y,g=!1;return this.totalIterations>this.maxIterations/3&&(g=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),y=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,y||g},h.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},h.prototype.calcNoOfChildrenForAllNodes=function(){for(var y,g=this.graphManager.getAllNodes(),E=0;E<g.length;E++)y=g[E],y.noOfChildren=y.getNoOfChildren()},h.prototype.calcGrid=function(y){var g=0,E=0;g=parseInt(Math.ceil((y.getRight()-y.getLeft())/this.repulsionRange)),E=parseInt(Math.ceil((y.getBottom()-y.getTop())/this.repulsionRange));for(var w=new Array(g),v=0;v<g;v++)w[v]=new Array(E);for(var v=0;v<g;v++)for(var C=0;C<E;C++)w[v][C]=new Array;return w},h.prototype.addNodeToGrid=function(y,g,E){var w=0,v=0,C=0,x=0;w=parseInt(Math.floor((y.getRect().x-g)/this.repulsionRange)),v=parseInt(Math.floor((y.getRect().width+y.getRect().x-g)/this.repulsionRange)),C=parseInt(Math.floor((y.getRect().y-E)/this.repulsionRange)),x=parseInt(Math.floor((y.getRect().height+y.getRect().y-E)/this.repulsionRange));for(var S=w;S<=v;S++)for(var A=C;A<=x;A++)this.grid[S][A].push(y),y.setGridCoordinates(w,v,C,x)},h.prototype.updateGrid=function(){var y,g,E=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),y=0;y<E.length;y++)g=E[y],this.addNodeToGrid(g,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},h.prototype.calculateRepulsionForceOfANode=function(y,g,E,w){if(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&E||w){var v=new Set;y.surrounding=new Array;for(var C,x=this.grid,S=y.startX-1;S<y.finishX+2;S++)for(var A=y.startY-1;A<y.finishY+2;A++)if(!(S<0||A<0||S>=x.length||A>=x[0].length)){for(var D=0;D<x[S][A].length;D++)if(C=x[S][A][D],!(y.getOwner()!=C.getOwner()||y==C)&&!g.has(C)&&!v.has(C)){var _=Math.abs(y.getCenterX()-C.getCenterX())-(y.getWidth()/2+C.getWidth()/2),M=Math.abs(y.getCenterY()-C.getCenterY())-(y.getHeight()/2+C.getHeight()/2);_<=this.repulsionRange&&M<=this.repulsionRange&&v.add(C)}}y.surrounding=[].concat(i(v))}for(S=0;S<y.surrounding.length;S++)this.calcRepulsionForce(y,y.surrounding[S])},h.prototype.calcRepulsionRange=function(){return 0},r.exports=h},function(r,n,a){var i=a(1),o=a(4);function s(f,c,h){i.call(this,f,c,h),this.idealLength=o.DEFAULT_EDGE_LENGTH,this.edgeElasticity=o.DEFAULT_SPRING_STRENGTH}s.prototype=Object.create(i.prototype);for(var u in i)s[u]=i[u];r.exports=s},function(r,n,a){var i=a(3),o=a(4);function s(f,c,h,p){i.call(this,f,c,h,p),this.nodeRepulsion=o.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}s.prototype=Object.create(i.prototype);for(var u in i)s[u]=i[u];s.prototype.setGridCoordinates=function(f,c,h,p){this.startX=f,this.finishX=c,this.startY=h,this.finishY=p},r.exports=s},function(r,n,a){function i(o,s){this.width=0,this.height=0,o!==null&&s!==null&&(this.height=s,this.width=o)}i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(o){this.width=o},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(o){this.height=o},r.exports=i},function(r,n,a){var i=a(14);function o(){this.map={},this.keys=[]}o.prototype.put=function(s,u){var f=i.createID(s);this.contains(f)||(this.map[f]=u,this.keys.push(s))},o.prototype.contains=function(s){return i.createID(s),this.map[s]!=null},o.prototype.get=function(s){var u=i.createID(s);return this.map[u]},o.prototype.keySet=function(){return this.keys},r.exports=o},function(r,n,a){var i=a(14);function o(){this.set={}}o.prototype.add=function(s){var u=i.createID(s);this.contains(u)||(this.set[u]=s)},o.prototype.remove=function(s){delete this.set[i.createID(s)]},o.prototype.clear=function(){this.set={}},o.prototype.contains=function(s){return this.set[i.createID(s)]==s},o.prototype.isEmpty=function(){return this.size()===0},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAllTo=function(s){for(var u=Object.keys(this.set),f=u.length,c=0;c<f;c++)s.push(this.set[u[c]])},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAll=function(s){for(var u=s.length,f=0;f<u;f++){var c=s[f];this.add(c)}},r.exports=o},function(r,n,a){function i(){}i.multMat=function(o,s){for(var u=[],f=0;f<o.length;f++){u[f]=[];for(var c=0;c<s[0].length;c++){u[f][c]=0;for(var h=0;h<o[0].length;h++)u[f][c]+=o[f][h]*s[h][c]}}return u},i.transpose=function(o){for(var s=[],u=0;u<o[0].length;u++){s[u]=[];for(var f=0;f<o.length;f++)s[u][f]=o[f][u]}return s},i.multCons=function(o,s){for(var u=[],f=0;f<o.length;f++)u[f]=o[f]*s;return u},i.minusOp=function(o,s){for(var u=[],f=0;f<o.length;f++)u[f]=o[f]-s[f];return u},i.dotProduct=function(o,s){for(var u=0,f=0;f<o.length;f++)u+=o[f]*s[f];return u},i.mag=function(o){return Math.sqrt(this.dotProduct(o,o))},i.normalize=function(o){for(var s=[],u=this.mag(o),f=0;f<o.length;f++)s[f]=o[f]/u;return s},i.multGamma=function(o){for(var s=[],u=0,f=0;f<o.length;f++)u+=o[f];u*=-1/o.length;for(var c=0;c<o.length;c++)s[c]=u+o[c];return s},i.multL=function(o,s,u){for(var f=[],c=[],h=[],p=0;p<s[0].length;p++){for(var y=0,g=0;g<s.length;g++)y+=-.5*s[g][p]*o[g];c[p]=y}for(var E=0;E<u.length;E++){for(var w=0,v=0;v<u.length;v++)w+=u[E][v]*c[v];h[E]=w}for(var C=0;C<s.length;C++){for(var x=0,S=0;S<s[0].length;S++)x+=s[C][S]*h[S];f[C]=x}return f},r.exports=i},function(r,n,a){var i=function(){function f(c,h){for(var p=0;p<h.length;p++){var y=h[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(c,y.key,y)}}return function(c,h,p){return h&&f(c.prototype,h),p&&f(c,p),c}}();function o(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}var s=a(11),u=function(){function f(c,h){o(this,f),(h!==null||h!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var p=void 0;c instanceof s?p=c.size():p=c.length,this._quicksort(c,0,p-1)}return i(f,[{key:"_quicksort",value:function(h,p,y){if(p<y){var g=this._partition(h,p,y);this._quicksort(h,p,g),this._quicksort(h,g+1,y)}}},{key:"_partition",value:function(h,p,y){for(var g=this._get(h,p),E=p,w=y;;){for(;this.compareFunction(g,this._get(h,w));)w--;for(;this.compareFunction(this._get(h,E),g);)E++;if(E<w)this._swap(h,E,w),E++,w--;else return w}}},{key:"_get",value:function(h,p){return h instanceof s?h.get_object_at(p):h[p]}},{key:"_set",value:function(h,p,y){h instanceof s?h.set_object_at(p,y):h[p]=y}},{key:"_swap",value:function(h,p,y){var g=this._get(h,p);this._set(h,p,this._get(h,y)),this._set(h,y,g)}},{key:"_defaultCompareFunction",value:function(h,p){return p>h}}]),f}();r.exports=u},function(r,n,a){function i(){}i.svd=function(o){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=o.length,this.n=o[0].length;var s=Math.min(this.m,this.n);this.s=function(dt){for(var gt=[];dt-- >0;)gt.push(0);return gt}(Math.min(this.m+1,this.n)),this.U=function(dt){var gt=function _t(Mt){if(Mt.length==0)return 0;for(var jt=[],Lt=0;Lt<Mt[0];Lt++)jt.push(_t(Mt.slice(1)));return jt};return gt(dt)}([this.m,s]),this.V=function(dt){var gt=function _t(Mt){if(Mt.length==0)return 0;for(var jt=[],Lt=0;Lt<Mt[0];Lt++)jt.push(_t(Mt.slice(1)));return jt};return gt(dt)}([this.n,this.n]);for(var u=function(dt){for(var gt=[];dt-- >0;)gt.push(0);return gt}(this.n),f=function(dt){for(var gt=[];dt-- >0;)gt.push(0);return gt}(this.m),c=!0,h=Math.min(this.m-1,this.n),p=Math.max(0,Math.min(this.n-2,this.m)),y=0;y<Math.max(h,p);y++){if(y<h){this.s[y]=0;for(var g=y;g<this.m;g++)this.s[y]=i.hypot(this.s[y],o[g][y]);if(this.s[y]!==0){o[y][y]<0&&(this.s[y]=-this.s[y]);for(var E=y;E<this.m;E++)o[E][y]/=this.s[y];o[y][y]+=1}this.s[y]=-this.s[y]}for(var w=y+1;w<this.n;w++){if(function(dt,gt){return dt&&gt}(y<h,this.s[y]!==0)){for(var v=0,C=y;C<this.m;C++)v+=o[C][y]*o[C][w];v=-v/o[y][y];for(var x=y;x<this.m;x++)o[x][w]+=v*o[x][y]}u[w]=o[y][w]}if(function(dt,gt){return gt}(c,y<h))for(var S=y;S<this.m;S++)this.U[S][y]=o[S][y];if(y<p){u[y]=0;for(var A=y+1;A<this.n;A++)u[y]=i.hypot(u[y],u[A]);if(u[y]!==0){u[y+1]<0&&(u[y]=-u[y]);for(var D=y+1;D<this.n;D++)u[D]/=u[y];u[y+1]+=1}if(u[y]=-u[y],function(dt,gt){return dt&&gt}(y+1<this.m,u[y]!==0)){for(var _=y+1;_<this.m;_++)f[_]=0;for(var M=y+1;M<this.n;M++)for(var k=y+1;k<this.m;k++)f[k]+=u[M]*o[k][M];for(var F=y+1;F<this.n;F++)for(var G=-u[F]/u[y+1],B=y+1;B<this.m;B++)o[B][F]+=G*f[B]}for(var q=y+1;q<this.n;q++)this.V[q][y]=u[q]}}var R=Math.min(this.n,this.m+1);h<this.n&&(this.s[h]=o[h][h]),this.m<R&&(this.s[R-1]=0),p+1<R&&(u[p]=o[p][R-1]),u[R-1]=0;{for(var P=h;P<s;P++){for(var N=0;N<this.m;N++)this.U[N][P]=0;this.U[P][P]=1}for(var I=h-1;I>=0;I--)if(this.s[I]!==0){for(var z=I+1;z<s;z++){for(var ae=0,re=I;re<this.m;re++)ae+=this.U[re][I]*this.U[re][z];ae=-ae/this.U[I][I];for(var K=I;K<this.m;K++)this.U[K][z]+=ae*this.U[K][I]}for(var V=I;V<this.m;V++)this.U[V][I]=-this.U[V][I];this.U[I][I]=1+this.U[I][I];for(var Z=0;Z<I-1;Z++)this.U[Z][I]=0}else{for(var U=0;U<this.m;U++)this.U[U][I]=0;this.U[I][I]=1}}for(var W=this.n-1;W>=0;W--){if(function(dt,gt){return dt&&gt}(W<p,u[W]!==0))for(var Y=W+1;Y<s;Y++){for(var ee=0,oe=W+1;oe<this.n;oe++)ee+=this.V[oe][W]*this.V[oe][Y];ee=-ee/this.V[W+1][W];for(var te=W+1;te<this.n;te++)this.V[te][Y]+=ee*this.V[te][W]}for(var ie=0;ie<this.n;ie++)this.V[ie][W]=0;this.V[W][W]=1}for(var se=R-1,$=Math.pow(2,-52),ne=Math.pow(2,-966);R>0;){var le=void 0,Se=void 0;for(le=R-2;le>=-1&&le!==-1;le--)if(Math.abs(u[le])<=ne+$*(Math.abs(this.s[le])+Math.abs(this.s[le+1]))){u[le]=0;break}if(le===R-2)Se=4;else{var De=void 0;for(De=R-1;De>=le&&De!==le;De--){var be=(De!==R?Math.abs(u[De]):0)+(De!==le+1?Math.abs(u[De-1]):0);if(Math.abs(this.s[De])<=ne+$*be){this.s[De]=0;break}}De===le?Se=3:De===R-1?Se=1:(Se=2,le=De)}switch(le++,Se){case 1:{var Te=u[R-2];u[R-2]=0;for(var ve=R-2;ve>=le;ve--){var de=i.hypot(this.s[ve],Te),ye=this.s[ve]/de,Ce=Te/de;this.s[ve]=de,ve!==le&&(Te=-Ce*u[ve-1],u[ve-1]=ye*u[ve-1]);for(var ue=0;ue<this.n;ue++)de=ye*this.V[ue][ve]+Ce*this.V[ue][R-1],this.V[ue][R-1]=-Ce*this.V[ue][ve]+ye*this.V[ue][R-1],this.V[ue][ve]=de}}break;case 2:{var Ae=u[le-1];u[le-1]=0;for(var Pe=le;Pe<R;Pe++){var Fe=i.hypot(this.s[Pe],Ae),Ye=this.s[Pe]/Fe,Ve=Ae/Fe;this.s[Pe]=Fe,Ae=-Ve*u[Pe],u[Pe]=Ye*u[Pe];for(var Qe=0;Qe<this.m;Qe++)Fe=Ye*this.U[Qe][Pe]+Ve*this.U[Qe][le-1],this.U[Qe][le-1]=-Ve*this.U[Qe][Pe]+Ye*this.U[Qe][le-1],this.U[Qe][Pe]=Fe}}break;case 3:{var Xe=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[R-1]),Math.abs(this.s[R-2])),Math.abs(u[R-2])),Math.abs(this.s[le])),Math.abs(u[le])),We=this.s[R-1]/Xe,he=this.s[R-2]/Xe,j=u[R-2]/Xe,pe=this.s[le]/Xe,me=u[le]/Xe,we=((he+We)*(he-We)+j*j)/2,xe=We*j*(We*j),qe=0;(function(dt,gt){return dt||gt})(we!==0,xe!==0)&&(qe=Math.sqrt(we*we+xe),we<0&&(qe=-qe),qe=xe/(we+qe));for(var Ee=(pe+We)*(pe-We)+qe,Oe=pe*me,Ie=le;Ie<R-1;Ie++){var He=i.hypot(Ee,Oe),Ue=Ee/He,je=Oe/He;Ie!==le&&(u[Ie-1]=He),Ee=Ue*this.s[Ie]+je*u[Ie],u[Ie]=Ue*u[Ie]-je*this.s[Ie],Oe=je*this.s[Ie+1],this.s[Ie+1]=Ue*this.s[Ie+1];for(var Je=0;Je<this.n;Je++)He=Ue*this.V[Je][Ie]+je*this.V[Je][Ie+1],this.V[Je][Ie+1]=-je*this.V[Je][Ie]+Ue*this.V[Je][Ie+1],this.V[Je][Ie]=He;if(He=i.hypot(Ee,Oe),Ue=Ee/He,je=Oe/He,this.s[Ie]=He,Ee=Ue*u[Ie]+je*this.s[Ie+1],this.s[Ie+1]=-je*u[Ie]+Ue*this.s[Ie+1],Oe=je*u[Ie+1],u[Ie+1]=Ue*u[Ie+1],Ie<this.m-1)for(var Ge=0;Ge<this.m;Ge++)He=Ue*this.U[Ge][Ie]+je*this.U[Ge][Ie+1],this.U[Ge][Ie+1]=-je*this.U[Ge][Ie]+Ue*this.U[Ge][Ie+1],this.U[Ge][Ie]=He}u[R-2]=Ee}break;case 4:{if(this.s[le]<=0){this.s[le]=this.s[le]<0?-this.s[le]:0;for(var $e=0;$e<=se;$e++)this.V[$e][le]=-this.V[$e][le]}for(;le<se&&!(this.s[le]>=this.s[le+1]);){var vt=this.s[le];if(this.s[le]=this.s[le+1],this.s[le+1]=vt,le<this.n-1)for(var nt=0;nt<this.n;nt++)vt=this.V[nt][le+1],this.V[nt][le+1]=this.V[nt][le],this.V[nt][le]=vt;if(le<this.m-1)for(var it=0;it<this.m;it++)vt=this.U[it][le+1],this.U[it][le+1]=this.U[it][le],this.U[it][le]=vt;le++}R--}break}}var Tt={U:this.U,V:this.V,S:this.s};return Tt},i.hypot=function(o,s){var u=void 0;return Math.abs(o)>Math.abs(s)?(u=s/o,u=Math.abs(o)*Math.sqrt(1+u*u)):s!=0?(u=o/s,u=Math.abs(s)*Math.sqrt(1+u*u)):u=0,u},r.exports=i},function(r,n,a){var i=function(){function u(f,c){for(var h=0;h<c.length;h++){var p=c[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,p.key,p)}}return function(f,c,h){return c&&u(f.prototype,c),h&&u(f,h),f}}();function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var s=function(){function u(f,c){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;o(this,u),this.sequence1=f,this.sequence2=c,this.match_score=h,this.mismatch_penalty=p,this.gap_penalty=y,this.iMax=f.length+1,this.jMax=c.length+1,this.grid=new Array(this.iMax);for(var g=0;g<this.iMax;g++){this.grid[g]=new Array(this.jMax);for(var E=0;E<this.jMax;E++)this.grid[g][E]=0}this.tracebackGrid=new Array(this.iMax);for(var w=0;w<this.iMax;w++){this.tracebackGrid[w]=new Array(this.jMax);for(var v=0;v<this.jMax;v++)this.tracebackGrid[w][v]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return i(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var c=1;c<this.jMax;c++)this.grid[0][c]=this.grid[0][c-1]+this.gap_penalty,this.tracebackGrid[0][c]=[!1,!1,!0];for(var h=1;h<this.iMax;h++)this.grid[h][0]=this.grid[h-1][0]+this.gap_penalty,this.tracebackGrid[h][0]=[!1,!0,!1];for(var p=1;p<this.iMax;p++)for(var y=1;y<this.jMax;y++){var g=void 0;this.sequence1[p-1]===this.sequence2[y-1]?g=this.grid[p-1][y-1]+this.match_score:g=this.grid[p-1][y-1]+this.mismatch_penalty;var E=this.grid[p-1][y]+this.gap_penalty,w=this.grid[p][y-1]+this.gap_penalty,v=[g,E,w],C=this.arrayAllMaxIndexes(v);this.grid[p][y]=v[C[0]],this.tracebackGrid[p][y]=[C.includes(0),C.includes(1),C.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var c=[];for(c.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});c[0];){var h=c[0],p=this.tracebackGrid[h.pos[0]][h.pos[1]];p[0]&&c.push({pos:[h.pos[0]-1,h.pos[1]-1],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),p[1]&&c.push({pos:[h.pos[0]-1,h.pos[1]],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:"-"+h.seq2}),p[2]&&c.push({pos:[h.pos[0],h.pos[1]-1],seq1:"-"+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),h.pos[0]===0&&h.pos[1]===0&&this.alignments.push({sequence1:h.seq1,sequence2:h.seq2}),c.shift()}return this.alignments}},{key:"getAllIndexes",value:function(c,h){for(var p=[],y=-1;(y=c.indexOf(h,y+1))!==-1;)p.push(y);return p}},{key:"arrayAllMaxIndexes",value:function(c){return this.getAllIndexes(c,Math.max.apply(null,c))}}]),u}();r.exports=s},function(r,n,a){var i=function(){};i.FDLayout=a(18),i.FDLayoutConstants=a(4),i.FDLayoutEdge=a(19),i.FDLayoutNode=a(20),i.DimensionD=a(21),i.HashMap=a(22),i.HashSet=a(23),i.IGeometry=a(8),i.IMath=a(9),i.Integer=a(10),i.Point=a(12),i.PointD=a(5),i.RandomSeed=a(16),i.RectangleD=a(13),i.Transform=a(17),i.UniqueIDGeneretor=a(14),i.Quicksort=a(25),i.LinkedList=a(11),i.LGraphObject=a(2),i.LGraph=a(6),i.LEdge=a(1),i.LGraphManager=a(7),i.LNode=a(3),i.Layout=a(15),i.LayoutConstants=a(0),i.NeedlemanWunsch=a(27),i.Matrix=a(24),i.SVD=a(26),r.exports=i},function(r,n,a){function i(){this.listeners=[]}var o=i.prototype;o.addListener=function(s,u){this.listeners.push({event:s,callback:u})},o.removeListener=function(s,u){for(var f=this.listeners.length;f>=0;f--){var c=this.listeners[f];c.event===s&&c.callback===u&&this.listeners.splice(f,1)}},o.emit=function(s,u){for(var f=0;f<this.listeners.length;f++){var c=this.listeners[f];s===c.event&&c.callback(u)}},r.exports=i}])})}(If)),If.exports}var L4=Of.exports,JM;function D4(){return JM||(JM=1,function(t,e){(function(n,a){t.exports=a(A4())})(L4,function(r){return(()=>{var n={45:(s,u,f)=>{var c={};c.layoutBase=f(551),c.CoSEConstants=f(806),c.CoSEEdge=f(767),c.CoSEGraph=f(880),c.CoSEGraphManager=f(578),c.CoSELayout=f(765),c.CoSENode=f(991),c.ConstraintHandler=f(902),s.exports=c},806:(s,u,f)=>{var c=f(551).FDLayoutConstants;function h(){}for(var p in c)h[p]=c[p];h.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,h.DEFAULT_RADIAL_SEPARATION=c.DEFAULT_EDGE_LENGTH,h.DEFAULT_COMPONENT_SEPERATION=60,h.TILE=!0,h.TILING_PADDING_VERTICAL=10,h.TILING_PADDING_HORIZONTAL=10,h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!0,h.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,h.TREE_REDUCTION_ON_INCREMENTAL=!0,h.PURE_INCREMENTAL=h.DEFAULT_INCREMENTAL,s.exports=h},767:(s,u,f)=>{var c=f(551).FDLayoutEdge;function h(y,g,E){c.call(this,y,g,E)}h.prototype=Object.create(c.prototype);for(var p in c)h[p]=c[p];s.exports=h},880:(s,u,f)=>{var c=f(551).LGraph;function h(y,g,E){c.call(this,y,g,E)}h.prototype=Object.create(c.prototype);for(var p in c)h[p]=c[p];s.exports=h},578:(s,u,f)=>{var c=f(551).LGraphManager;function h(y){c.call(this,y)}h.prototype=Object.create(c.prototype);for(var p in c)h[p]=c[p];s.exports=h},765:(s,u,f)=>{var c=f(551).FDLayout,h=f(578),p=f(880),y=f(991),g=f(767),E=f(806),w=f(902),v=f(551).FDLayoutConstants,C=f(551).LayoutConstants,x=f(551).Point,S=f(551).PointD,A=f(551).DimensionD,D=f(551).Layout,_=f(551).Integer,M=f(551).IGeometry,k=f(551).LGraph,F=f(551).Transform,G=f(551).LinkedList;function B(){c.call(this),this.toBeTiled={},this.constraints={}}B.prototype=Object.create(c.prototype);for(var q in c)B[q]=c[q];B.prototype.newGraphManager=function(){var R=new h(this);return this.graphManager=R,R},B.prototype.newGraph=function(R){return new p(null,this.graphManager,R)},B.prototype.newNode=function(R){return new y(this.graphManager,R)},B.prototype.newEdge=function(R){return new g(null,null,R)},B.prototype.initParameters=function(){c.prototype.initParameters.call(this,arguments),this.isSubLayout||(E.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=E.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=E.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=v.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=v.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=v.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},B.prototype.initSpringEmbedder=function(){c.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/v.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},B.prototype.layout=function(){var R=C.DEFAULT_CREATE_BENDS_AS_NEEDED;return R&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},B.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(E.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var P=new Set(this.getAllNodes()),N=this.nodesWithGravity.filter(function(ae){return P.has(ae)});this.graphManager.setAllNodesToApplyGravitation(N)}}else{var R=this.getFlatForest();if(R.length>0)this.positionNodesRadially(R);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var P=new Set(this.getAllNodes()),N=this.nodesWithGravity.filter(function(I){return P.has(I)});this.graphManager.setAllNodesToApplyGravitation(N),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(w.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),E.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},B.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%v.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var R=new Set(this.getAllNodes()),P=this.nodesWithGravity.filter(function(z){return R.has(z)});this.graphManager.setAllNodesToApplyGravitation(P),this.graphManager.updateBounds(),this.updateGrid(),E.PURE_INCREMENTAL?this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),E.PURE_INCREMENTAL?this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var N=!this.isTreeGrowing&&!this.isGrowthFinished,I=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(N,I),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},B.prototype.getPositionsData=function(){for(var R=this.graphManager.getAllNodes(),P={},N=0;N<R.length;N++){var I=R[N].rect,z=R[N].id;P[z]={id:z,x:I.getCenterX(),y:I.getCenterY(),w:I.width,h:I.height}}return P},B.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var R=!1;if(v.ANIMATE==="during")this.emit("layoutstarted");else{for(;!R;)R=this.tick();this.graphManager.updateBounds()}},B.prototype.moveNodes=function(){for(var R=this.getAllNodes(),P,N=0;N<R.length;N++)P=R[N],P.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var N=0;N<R.length;N++)P=R[N],P.move()},B.prototype.initConstraintVariables=function(){var R=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var P=this.graphManager.getAllNodes(),N=0;N<P.length;N++){var I=P[N];this.idToNodeMap.set(I.id,I)}var z=function te(ie){for(var se=ie.getChild().getNodes(),$,ne=0,le=0;le<se.length;le++)$=se[le],$.getChild()==null?R.fixedNodeSet.has($.id)&&(ne+=100):ne+=te($);return ne};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(se){R.fixedNodeSet.add(se.nodeId)});for(var P=this.graphManager.getAllNodes(),I,N=0;N<P.length;N++)if(I=P[N],I.getChild()!=null){var ae=z(I);ae>0&&(I.fixedNodeWeight=ae)}}if(this.constraints.relativePlacementConstraint){var re=new Map,K=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(te){R.fixedNodesOnHorizontal.add(te),R.fixedNodesOnVertical.add(te)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var V=this.constraints.alignmentConstraint.vertical,N=0;N<V.length;N++)this.dummyToNodeForVerticalAlignment.set("dummy"+N,[]),V[N].forEach(function(ie){re.set(ie,"dummy"+N),R.dummyToNodeForVerticalAlignment.get("dummy"+N).push(ie),R.fixedNodeSet.has(ie)&&R.fixedNodesOnHorizontal.add("dummy"+N)});if(this.constraints.alignmentConstraint.horizontal)for(var Z=this.constraints.alignmentConstraint.horizontal,N=0;N<Z.length;N++)this.dummyToNodeForHorizontalAlignment.set("dummy"+N,[]),Z[N].forEach(function(ie){K.set(ie,"dummy"+N),R.dummyToNodeForHorizontalAlignment.get("dummy"+N).push(ie),R.fixedNodeSet.has(ie)&&R.fixedNodesOnVertical.add("dummy"+N)})}if(E.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(te){var ie,se,$;for($=te.length-1;$>=2*te.length/3;$--)ie=Math.floor(Math.random()*($+1)),se=te[$],te[$]=te[ie],te[ie]=se;return te},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(te){if(te.left){var ie=re.has(te.left)?re.get(te.left):te.left,se=re.has(te.right)?re.get(te.right):te.right;R.nodesInRelativeHorizontal.includes(ie)||(R.nodesInRelativeHorizontal.push(ie),R.nodeToRelativeConstraintMapHorizontal.set(ie,[]),R.dummyToNodeForVerticalAlignment.has(ie)?R.nodeToTempPositionMapHorizontal.set(ie,R.idToNodeMap.get(R.dummyToNodeForVerticalAlignment.get(ie)[0]).getCenterX()):R.nodeToTempPositionMapHorizontal.set(ie,R.idToNodeMap.get(ie).getCenterX())),R.nodesInRelativeHorizontal.includes(se)||(R.nodesInRelativeHorizontal.push(se),R.nodeToRelativeConstraintMapHorizontal.set(se,[]),R.dummyToNodeForVerticalAlignment.has(se)?R.nodeToTempPositionMapHorizontal.set(se,R.idToNodeMap.get(R.dummyToNodeForVerticalAlignment.get(se)[0]).getCenterX()):R.nodeToTempPositionMapHorizontal.set(se,R.idToNodeMap.get(se).getCenterX())),R.nodeToRelativeConstraintMapHorizontal.get(ie).push({right:se,gap:te.gap}),R.nodeToRelativeConstraintMapHorizontal.get(se).push({left:ie,gap:te.gap})}else{var $=K.has(te.top)?K.get(te.top):te.top,ne=K.has(te.bottom)?K.get(te.bottom):te.bottom;R.nodesInRelativeVertical.includes($)||(R.nodesInRelativeVertical.push($),R.nodeToRelativeConstraintMapVertical.set($,[]),R.dummyToNodeForHorizontalAlignment.has($)?R.nodeToTempPositionMapVertical.set($,R.idToNodeMap.get(R.dummyToNodeForHorizontalAlignment.get($)[0]).getCenterY()):R.nodeToTempPositionMapVertical.set($,R.idToNodeMap.get($).getCenterY())),R.nodesInRelativeVertical.includes(ne)||(R.nodesInRelativeVertical.push(ne),R.nodeToRelativeConstraintMapVertical.set(ne,[]),R.dummyToNodeForHorizontalAlignment.has(ne)?R.nodeToTempPositionMapVertical.set(ne,R.idToNodeMap.get(R.dummyToNodeForHorizontalAlignment.get(ne)[0]).getCenterY()):R.nodeToTempPositionMapVertical.set(ne,R.idToNodeMap.get(ne).getCenterY())),R.nodeToRelativeConstraintMapVertical.get($).push({bottom:ne,gap:te.gap}),R.nodeToRelativeConstraintMapVertical.get(ne).push({top:$,gap:te.gap})}});else{var U=new Map,W=new Map;this.constraints.relativePlacementConstraint.forEach(function(te){if(te.left){var ie=re.has(te.left)?re.get(te.left):te.left,se=re.has(te.right)?re.get(te.right):te.right;U.has(ie)?U.get(ie).push(se):U.set(ie,[se]),U.has(se)?U.get(se).push(ie):U.set(se,[ie])}else{var $=K.has(te.top)?K.get(te.top):te.top,ne=K.has(te.bottom)?K.get(te.bottom):te.bottom;W.has($)?W.get($).push(ne):W.set($,[ne]),W.has(ne)?W.get(ne).push($):W.set(ne,[$])}});var Y=function(ie,se){var $=[],ne=[],le=new G,Se=new Set,De=0;return ie.forEach(function(be,Te){if(!Se.has(Te)){$[De]=[],ne[De]=!1;var ve=Te;for(le.push(ve),Se.add(ve),$[De].push(ve);le.length!=0;){ve=le.shift(),se.has(ve)&&(ne[De]=!0);var de=ie.get(ve);de.forEach(function(ye){Se.has(ye)||(le.push(ye),Se.add(ye),$[De].push(ye))})}De++}}),{components:$,isFixed:ne}},ee=Y(U,R.fixedNodesOnHorizontal);this.componentsOnHorizontal=ee.components,this.fixedComponentsOnHorizontal=ee.isFixed;var oe=Y(W,R.fixedNodesOnVertical);this.componentsOnVertical=oe.components,this.fixedComponentsOnVertical=oe.isFixed}}},B.prototype.updateDisplacements=function(){var R=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(oe){var te=R.idToNodeMap.get(oe.nodeId);te.displacementX=0,te.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var P=this.constraints.alignmentConstraint.vertical,N=0;N<P.length;N++){for(var I=0,z=0;z<P[N].length;z++){if(this.fixedNodeSet.has(P[N][z])){I=0;break}I+=this.idToNodeMap.get(P[N][z]).displacementX}for(var ae=I/P[N].length,z=0;z<P[N].length;z++)this.idToNodeMap.get(P[N][z]).displacementX=ae}if(this.constraints.alignmentConstraint.horizontal)for(var re=this.constraints.alignmentConstraint.horizontal,N=0;N<re.length;N++){for(var K=0,z=0;z<re[N].length;z++){if(this.fixedNodeSet.has(re[N][z])){K=0;break}K+=this.idToNodeMap.get(re[N][z]).displacementY}for(var V=K/re[N].length,z=0;z<re[N].length;z++)this.idToNodeMap.get(re[N][z]).displacementY=V}}if(this.constraints.relativePlacementConstraint)if(E.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(oe){if(!R.fixedNodesOnHorizontal.has(oe)){var te=0;R.dummyToNodeForVerticalAlignment.has(oe)?te=R.idToNodeMap.get(R.dummyToNodeForVerticalAlignment.get(oe)[0]).displacementX:te=R.idToNodeMap.get(oe).displacementX,R.nodeToRelativeConstraintMapHorizontal.get(oe).forEach(function(ie){if(ie.right){var se=R.nodeToTempPositionMapHorizontal.get(ie.right)-R.nodeToTempPositionMapHorizontal.get(oe)-te;se<ie.gap&&(te-=ie.gap-se)}else{var se=R.nodeToTempPositionMapHorizontal.get(oe)-R.nodeToTempPositionMapHorizontal.get(ie.left)+te;se<ie.gap&&(te+=ie.gap-se)}}),R.nodeToTempPositionMapHorizontal.set(oe,R.nodeToTempPositionMapHorizontal.get(oe)+te),R.dummyToNodeForVerticalAlignment.has(oe)?R.dummyToNodeForVerticalAlignment.get(oe).forEach(function(ie){R.idToNodeMap.get(ie).displacementX=te}):R.idToNodeMap.get(oe).displacementX=te}}),this.nodesInRelativeVertical.forEach(function(oe){if(!R.fixedNodesOnHorizontal.has(oe)){var te=0;R.dummyToNodeForHorizontalAlignment.has(oe)?te=R.idToNodeMap.get(R.dummyToNodeForHorizontalAlignment.get(oe)[0]).displacementY:te=R.idToNodeMap.get(oe).displacementY,R.nodeToRelativeConstraintMapVertical.get(oe).forEach(function(ie){if(ie.bottom){var se=R.nodeToTempPositionMapVertical.get(ie.bottom)-R.nodeToTempPositionMapVertical.get(oe)-te;se<ie.gap&&(te-=ie.gap-se)}else{var se=R.nodeToTempPositionMapVertical.get(oe)-R.nodeToTempPositionMapVertical.get(ie.top)+te;se<ie.gap&&(te+=ie.gap-se)}}),R.nodeToTempPositionMapVertical.set(oe,R.nodeToTempPositionMapVertical.get(oe)+te),R.dummyToNodeForHorizontalAlignment.has(oe)?R.dummyToNodeForHorizontalAlignment.get(oe).forEach(function(ie){R.idToNodeMap.get(ie).displacementY=te}):R.idToNodeMap.get(oe).displacementY=te}});else{for(var N=0;N<this.componentsOnHorizontal.length;N++){var Z=this.componentsOnHorizontal[N];if(this.fixedComponentsOnHorizontal[N])for(var z=0;z<Z.length;z++)this.dummyToNodeForVerticalAlignment.has(Z[z])?this.dummyToNodeForVerticalAlignment.get(Z[z]).forEach(function(ie){R.idToNodeMap.get(ie).displacementX=0}):this.idToNodeMap.get(Z[z]).displacementX=0;else{for(var U=0,W=0,z=0;z<Z.length;z++)if(this.dummyToNodeForVerticalAlignment.has(Z[z])){var Y=this.dummyToNodeForVerticalAlignment.get(Z[z]);U+=Y.length*this.idToNodeMap.get(Y[0]).displacementX,W+=Y.length}else U+=this.idToNodeMap.get(Z[z]).displacementX,W++;for(var ee=U/W,z=0;z<Z.length;z++)this.dummyToNodeForVerticalAlignment.has(Z[z])?this.dummyToNodeForVerticalAlignment.get(Z[z]).forEach(function(ie){R.idToNodeMap.get(ie).displacementX=ee}):this.idToNodeMap.get(Z[z]).displacementX=ee}}for(var N=0;N<this.componentsOnVertical.length;N++){var Z=this.componentsOnVertical[N];if(this.fixedComponentsOnVertical[N])for(var z=0;z<Z.length;z++)this.dummyToNodeForHorizontalAlignment.has(Z[z])?this.dummyToNodeForHorizontalAlignment.get(Z[z]).forEach(function(se){R.idToNodeMap.get(se).displacementY=0}):this.idToNodeMap.get(Z[z]).displacementY=0;else{for(var U=0,W=0,z=0;z<Z.length;z++)if(this.dummyToNodeForHorizontalAlignment.has(Z[z])){var Y=this.dummyToNodeForHorizontalAlignment.get(Z[z]);U+=Y.length*this.idToNodeMap.get(Y[0]).displacementY,W+=Y.length}else U+=this.idToNodeMap.get(Z[z]).displacementY,W++;for(var ee=U/W,z=0;z<Z.length;z++)this.dummyToNodeForHorizontalAlignment.has(Z[z])?this.dummyToNodeForHorizontalAlignment.get(Z[z]).forEach(function(le){R.idToNodeMap.get(le).displacementY=ee}):this.idToNodeMap.get(Z[z]).displacementY=ee}}}},B.prototype.calculateNodesToApplyGravitationTo=function(){var R=[],P,N=this.graphManager.getGraphs(),I=N.length,z;for(z=0;z<I;z++)P=N[z],P.updateConnected(),P.isConnected||(R=R.concat(P.getNodes()));return R},B.prototype.createBendpoints=function(){var R=[];R=R.concat(this.graphManager.getAllEdges());var P=new Set,N;for(N=0;N<R.length;N++){var I=R[N];if(!P.has(I)){var z=I.getSource(),ae=I.getTarget();if(z==ae)I.getBendpoints().push(new S),I.getBendpoints().push(new S),this.createDummyNodesForBendpoints(I),P.add(I);else{var re=[];if(re=re.concat(z.getEdgeListToNode(ae)),re=re.concat(ae.getEdgeListToNode(z)),!P.has(re[0])){if(re.length>1){var K;for(K=0;K<re.length;K++){var V=re[K];V.getBendpoints().push(new S),this.createDummyNodesForBendpoints(V)}}re.forEach(function(Z){P.add(Z)})}}}if(P.size==R.length)break}},B.prototype.positionNodesRadially=function(R){for(var P=new x(0,0),N=Math.ceil(Math.sqrt(R.length)),I=0,z=0,ae=0,re=new S(0,0),K=0;K<R.length;K++){K%N==0&&(ae=0,z=I,K!=0&&(z+=E.DEFAULT_COMPONENT_SEPERATION),I=0);var V=R[K],Z=D.findCenterOfTree(V);P.x=ae,P.y=z,re=B.radialLayout(V,Z,P),re.y>I&&(I=Math.floor(re.y)),ae=Math.floor(re.x+E.DEFAULT_COMPONENT_SEPERATION)}this.transform(new S(C.WORLD_CENTER_X-re.x/2,C.WORLD_CENTER_Y-re.y/2))},B.radialLayout=function(R,P,N){var I=Math.max(this.maxDiagonalInTree(R),E.DEFAULT_RADIAL_SEPARATION);B.branchRadialLayout(P,null,0,359,0,I);var z=k.calculateBounds(R),ae=new F;ae.setDeviceOrgX(z.getMinX()),ae.setDeviceOrgY(z.getMinY()),ae.setWorldOrgX(N.x),ae.setWorldOrgY(N.y);for(var re=0;re<R.length;re++){var K=R[re];K.transform(ae)}var V=new S(z.getMaxX(),z.getMaxY());return ae.inverseTransformPoint(V)},B.branchRadialLayout=function(R,P,N,I,z,ae){var re=(I-N+1)/2;re<0&&(re+=180);var K=(re+N)%360,V=K*M.TWO_PI/360,Z=z*Math.cos(V),U=z*Math.sin(V);R.setCenter(Z,U);var W=[];W=W.concat(R.getEdges());var Y=W.length;P!=null&&Y--;for(var ee=0,oe=W.length,te,ie=R.getEdgesBetween(P);ie.length>1;){var se=ie[0];ie.splice(0,1);var $=W.indexOf(se);$>=0&&W.splice($,1),oe--,Y--}P!=null?te=(W.indexOf(ie[0])+1)%oe:te=0;for(var ne=Math.abs(I-N)/Y,le=te;ee!=Y;le=++le%oe){var Se=W[le].getOtherEnd(R);if(Se!=P){var De=(N+ee*ne)%360,be=(De+ne)%360;B.branchRadialLayout(Se,R,De,be,z+ae,ae),ee++}}},B.maxDiagonalInTree=function(R){for(var P=_.MIN_VALUE,N=0;N<R.length;N++){var I=R[N],z=I.getDiagonal();z>P&&(P=z)}return P},B.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},B.prototype.groupZeroDegreeMembers=function(){var R=this,P={};this.memberGroups={},this.idToDummyNode={};for(var N=[],I=this.graphManager.getAllNodes(),z=0;z<I.length;z++){var ae=I[z],re=ae.getParent();this.getNodeDegreeWithChildren(ae)===0&&(re.id==null||!this.getToBeTiled(re))&&N.push(ae)}for(var z=0;z<N.length;z++){var ae=N[z],K=ae.getParent().id;typeof P[K]>"u"&&(P[K]=[]),P[K]=P[K].concat(ae)}Object.keys(P).forEach(function(V){if(P[V].length>1){var Z="DummyCompound_"+V;R.memberGroups[Z]=P[V];var U=P[V][0].getParent(),W=new y(R.graphManager);W.id=Z,W.paddingLeft=U.paddingLeft||0,W.paddingRight=U.paddingRight||0,W.paddingBottom=U.paddingBottom||0,W.paddingTop=U.paddingTop||0,R.idToDummyNode[Z]=W;var Y=R.getGraphManager().add(R.newGraph(),W),ee=U.getChild();ee.add(W);for(var oe=0;oe<P[V].length;oe++){var te=P[V][oe];ee.remove(te),Y.add(te)}}})},B.prototype.clearCompounds=function(){var R={},P={};this.performDFSOnCompounds();for(var N=0;N<this.compoundOrder.length;N++)P[this.compoundOrder[N].id]=this.compoundOrder[N],R[this.compoundOrder[N].id]=[].concat(this.compoundOrder[N].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[N].getChild()),this.compoundOrder[N].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(R,P)},B.prototype.clearZeroDegreeMembers=function(){var R=this,P=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(N){var I=R.idToDummyNode[N];if(P[N]=R.tileNodes(R.memberGroups[N],I.paddingLeft+I.paddingRight),I.rect.width=P[N].width,I.rect.height=P[N].height,I.setCenter(P[N].centerX,P[N].centerY),I.labelMarginLeft=0,I.labelMarginTop=0,E.NODE_DIMENSIONS_INCLUDE_LABELS){var z=I.rect.width,ae=I.rect.height;I.labelWidth&&(I.labelPosHorizontal=="left"?(I.rect.x-=I.labelWidth,I.setWidth(z+I.labelWidth),I.labelMarginLeft=I.labelWidth):I.labelPosHorizontal=="center"&&I.labelWidth>z?(I.rect.x-=(I.labelWidth-z)/2,I.setWidth(I.labelWidth),I.labelMarginLeft=(I.labelWidth-z)/2):I.labelPosHorizontal=="right"&&I.setWidth(z+I.labelWidth)),I.labelHeight&&(I.labelPosVertical=="top"?(I.rect.y-=I.labelHeight,I.setHeight(ae+I.labelHeight),I.labelMarginTop=I.labelHeight):I.labelPosVertical=="center"&&I.labelHeight>ae?(I.rect.y-=(I.labelHeight-ae)/2,I.setHeight(I.labelHeight),I.labelMarginTop=(I.labelHeight-ae)/2):I.labelPosVertical=="bottom"&&I.setHeight(ae+I.labelHeight))}})},B.prototype.repopulateCompounds=function(){for(var R=this.compoundOrder.length-1;R>=0;R--){var P=this.compoundOrder[R],N=P.id,I=P.paddingLeft,z=P.paddingTop,ae=P.labelMarginLeft,re=P.labelMarginTop;this.adjustLocations(this.tiledMemberPack[N],P.rect.x,P.rect.y,I,z,ae,re)}},B.prototype.repopulateZeroDegreeMembers=function(){var R=this,P=this.tiledZeroDegreePack;Object.keys(P).forEach(function(N){var I=R.idToDummyNode[N],z=I.paddingLeft,ae=I.paddingTop,re=I.labelMarginLeft,K=I.labelMarginTop;R.adjustLocations(P[N],I.rect.x,I.rect.y,z,ae,re,K)})},B.prototype.getToBeTiled=function(R){var P=R.id;if(this.toBeTiled[P]!=null)return this.toBeTiled[P];var N=R.getChild();if(N==null)return this.toBeTiled[P]=!1,!1;for(var I=N.getNodes(),z=0;z<I.length;z++){var ae=I[z];if(this.getNodeDegree(ae)>0)return this.toBeTiled[P]=!1,!1;if(ae.getChild()==null){this.toBeTiled[ae.id]=!1;continue}if(!this.getToBeTiled(ae))return this.toBeTiled[P]=!1,!1}return this.toBeTiled[P]=!0,!0},B.prototype.getNodeDegree=function(R){R.id;for(var P=R.getEdges(),N=0,I=0;I<P.length;I++){var z=P[I];z.getSource().id!==z.getTarget().id&&(N=N+1)}return N},B.prototype.getNodeDegreeWithChildren=function(R){var P=this.getNodeDegree(R);if(R.getChild()==null)return P;for(var N=R.getChild().getNodes(),I=0;I<N.length;I++){var z=N[I];P+=this.getNodeDegreeWithChildren(z)}return P},B.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},B.prototype.fillCompexOrderByDFS=function(R){for(var P=0;P<R.length;P++){var N=R[P];N.getChild()!=null&&this.fillCompexOrderByDFS(N.getChild().getNodes()),this.getToBeTiled(N)&&this.compoundOrder.push(N)}},B.prototype.adjustLocations=function(R,P,N,I,z,ae,re){P+=I+ae,N+=z+re;for(var K=P,V=0;V<R.rows.length;V++){var Z=R.rows[V];P=K;for(var U=0,W=0;W<Z.length;W++){var Y=Z[W];Y.rect.x=P,Y.rect.y=N,P+=Y.rect.width+R.horizontalPadding,Y.rect.height>U&&(U=Y.rect.height)}N+=U+R.verticalPadding}},B.prototype.tileCompoundMembers=function(R,P){var N=this;this.tiledMemberPack=[],Object.keys(R).forEach(function(I){var z=P[I];if(N.tiledMemberPack[I]=N.tileNodes(R[I],z.paddingLeft+z.paddingRight),z.rect.width=N.tiledMemberPack[I].width,z.rect.height=N.tiledMemberPack[I].height,z.setCenter(N.tiledMemberPack[I].centerX,N.tiledMemberPack[I].centerY),z.labelMarginLeft=0,z.labelMarginTop=0,E.NODE_DIMENSIONS_INCLUDE_LABELS){var ae=z.rect.width,re=z.rect.height;z.labelWidth&&(z.labelPosHorizontal=="left"?(z.rect.x-=z.labelWidth,z.setWidth(ae+z.labelWidth),z.labelMarginLeft=z.labelWidth):z.labelPosHorizontal=="center"&&z.labelWidth>ae?(z.rect.x-=(z.labelWidth-ae)/2,z.setWidth(z.labelWidth),z.labelMarginLeft=(z.labelWidth-ae)/2):z.labelPosHorizontal=="right"&&z.setWidth(ae+z.labelWidth)),z.labelHeight&&(z.labelPosVertical=="top"?(z.rect.y-=z.labelHeight,z.setHeight(re+z.labelHeight),z.labelMarginTop=z.labelHeight):z.labelPosVertical=="center"&&z.labelHeight>re?(z.rect.y-=(z.labelHeight-re)/2,z.setHeight(z.labelHeight),z.labelMarginTop=(z.labelHeight-re)/2):z.labelPosVertical=="bottom"&&z.setHeight(re+z.labelHeight))}})},B.prototype.tileNodes=function(R,P){var N=this.tileNodesByFavoringDim(R,P,!0),I=this.tileNodesByFavoringDim(R,P,!1),z=this.getOrgRatio(N),ae=this.getOrgRatio(I),re;return ae<z?re=I:re=N,re},B.prototype.getOrgRatio=function(R){var P=R.width,N=R.height,I=P/N;return I<1&&(I=1/I),I},B.prototype.calcIdealRowWidth=function(R,P){var N=E.TILING_PADDING_VERTICAL,I=E.TILING_PADDING_HORIZONTAL,z=R.length,ae=0,re=0,K=0;R.forEach(function(oe){ae+=oe.getWidth(),re+=oe.getHeight(),oe.getWidth()>K&&(K=oe.getWidth())});var V=ae/z,Z=re/z,U=Math.pow(N-I,2)+4*(V+I)*(Z+N)*z,W=(I-N+Math.sqrt(U))/(2*(V+I)),Y;P?(Y=Math.ceil(W),Y==W&&Y++):Y=Math.floor(W);var ee=Y*(V+I)-I;return K>ee&&(ee=K),ee+=I*2,ee},B.prototype.tileNodesByFavoringDim=function(R,P,N){var I=E.TILING_PADDING_VERTICAL,z=E.TILING_PADDING_HORIZONTAL,ae=E.TILING_COMPARE_BY,re={rows:[],rowWidth:[],rowHeight:[],width:0,height:P,verticalPadding:I,horizontalPadding:z,centerX:0,centerY:0};ae&&(re.idealRowWidth=this.calcIdealRowWidth(R,N));var K=function(te){return te.rect.width*te.rect.height},V=function(te,ie){return K(ie)-K(te)};R.sort(function(oe,te){var ie=V;return re.idealRowWidth?(ie=ae,ie(oe.id,te.id)):ie(oe,te)});for(var Z=0,U=0,W=0;W<R.length;W++){var Y=R[W];Z+=Y.getCenterX(),U+=Y.getCenterY()}re.centerX=Z/R.length,re.centerY=U/R.length;for(var W=0;W<R.length;W++){var Y=R[W];if(re.rows.length==0)this.insertNodeToRow(re,Y,0,P);else if(this.canAddHorizontal(re,Y.rect.width,Y.rect.height)){var ee=re.rows.length-1;re.idealRowWidth||(ee=this.getShortestRowIndex(re)),this.insertNodeToRow(re,Y,ee,P)}else this.insertNodeToRow(re,Y,re.rows.length,P);this.shiftToLastRow(re)}return re},B.prototype.insertNodeToRow=function(R,P,N,I){var z=I;if(N==R.rows.length){var ae=[];R.rows.push(ae),R.rowWidth.push(z),R.rowHeight.push(0)}var re=R.rowWidth[N]+P.rect.width;R.rows[N].length>0&&(re+=R.horizontalPadding),R.rowWidth[N]=re,R.width<re&&(R.width=re);var K=P.rect.height;N>0&&(K+=R.verticalPadding);var V=0;K>R.rowHeight[N]&&(V=R.rowHeight[N],R.rowHeight[N]=K,V=R.rowHeight[N]-V),R.height+=V,R.rows[N].push(P)},B.prototype.getShortestRowIndex=function(R){for(var P=-1,N=Number.MAX_VALUE,I=0;I<R.rows.length;I++)R.rowWidth[I]<N&&(P=I,N=R.rowWidth[I]);return P},B.prototype.getLongestRowIndex=function(R){for(var P=-1,N=Number.MIN_VALUE,I=0;I<R.rows.length;I++)R.rowWidth[I]>N&&(P=I,N=R.rowWidth[I]);return P},B.prototype.canAddHorizontal=function(R,P,N){if(R.idealRowWidth){var I=R.rows.length-1,z=R.rowWidth[I];return z+P+R.horizontalPadding<=R.idealRowWidth}var ae=this.getShortestRowIndex(R);if(ae<0)return!0;var re=R.rowWidth[ae];if(re+R.horizontalPadding+P<=R.width)return!0;var K=0;R.rowHeight[ae]<N&&ae>0&&(K=N+R.verticalPadding-R.rowHeight[ae]);var V;R.width-re>=P+R.horizontalPadding?V=(R.height+K)/(re+P+R.horizontalPadding):V=(R.height+K)/R.width,K=N+R.verticalPadding;var Z;return R.width<P?Z=(R.height+K)/P:Z=(R.height+K)/R.width,Z<1&&(Z=1/Z),V<1&&(V=1/V),V<Z},B.prototype.shiftToLastRow=function(R){var P=this.getLongestRowIndex(R),N=R.rowWidth.length-1,I=R.rows[P],z=I[I.length-1],ae=z.width+R.horizontalPadding;if(R.width-R.rowWidth[N]>ae&&P!=N){I.splice(-1,1),R.rows[N].push(z),R.rowWidth[P]=R.rowWidth[P]-ae,R.rowWidth[N]=R.rowWidth[N]+ae,R.width=R.rowWidth[instance.getLongestRowIndex(R)];for(var re=Number.MIN_VALUE,K=0;K<I.length;K++)I[K].height>re&&(re=I[K].height);P>0&&(re+=R.verticalPadding);var V=R.rowHeight[P]+R.rowHeight[N];R.rowHeight[P]=re,R.rowHeight[N]<z.height+R.verticalPadding&&(R.rowHeight[N]=z.height+R.verticalPadding);var Z=R.rowHeight[P]+R.rowHeight[N];R.height+=Z-V,this.shiftToLastRow(R)}},B.prototype.tilingPreLayout=function(){E.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},B.prototype.tilingPostLayout=function(){E.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},B.prototype.reduceTrees=function(){for(var R=[],P=!0,N;P;){var I=this.graphManager.getAllNodes(),z=[];P=!1;for(var ae=0;ae<I.length;ae++)if(N=I[ae],N.getEdges().length==1&&!N.getEdges()[0].isInterGraph&&N.getChild()==null){if(E.PURE_INCREMENTAL){var re=N.getEdges()[0].getOtherEnd(N),K=new A(N.getCenterX()-re.getCenterX(),N.getCenterY()-re.getCenterY());z.push([N,N.getEdges()[0],N.getOwner(),K])}else z.push([N,N.getEdges()[0],N.getOwner()]);P=!0}if(P==!0){for(var V=[],Z=0;Z<z.length;Z++)z[Z][0].getEdges().length==1&&(V.push(z[Z]),z[Z][0].getOwner().remove(z[Z][0]));R.push(V),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=R},B.prototype.growTree=function(R){for(var P=R.length,N=R[P-1],I,z=0;z<N.length;z++)I=N[z],this.findPlaceforPrunedNode(I),I[2].add(I[0]),I[2].add(I[1],I[1].source,I[1].target);R.splice(R.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},B.prototype.findPlaceforPrunedNode=function(R){var P,N,I=R[0];if(I==R[1].source?N=R[1].target:N=R[1].source,E.PURE_INCREMENTAL)I.setCenter(N.getCenterX()+R[3].getWidth(),N.getCenterY()+R[3].getHeight());else{var z=N.startX,ae=N.finishX,re=N.startY,K=N.finishY,V=0,Z=0,U=0,W=0,Y=[V,U,Z,W];if(re>0)for(var ee=z;ee<=ae;ee++)Y[0]+=this.grid[ee][re-1].length+this.grid[ee][re].length-1;if(ae<this.grid.length-1)for(var ee=re;ee<=K;ee++)Y[1]+=this.grid[ae+1][ee].length+this.grid[ae][ee].length-1;if(K<this.grid[0].length-1)for(var ee=z;ee<=ae;ee++)Y[2]+=this.grid[ee][K+1].length+this.grid[ee][K].length-1;if(z>0)for(var ee=re;ee<=K;ee++)Y[3]+=this.grid[z-1][ee].length+this.grid[z][ee].length-1;for(var oe=_.MAX_VALUE,te,ie,se=0;se<Y.length;se++)Y[se]<oe?(oe=Y[se],te=1,ie=se):Y[se]==oe&&te++;if(te==3&&oe==0)Y[0]==0&&Y[1]==0&&Y[2]==0?P=1:Y[0]==0&&Y[1]==0&&Y[3]==0?P=0:Y[0]==0&&Y[2]==0&&Y[3]==0?P=3:Y[1]==0&&Y[2]==0&&Y[3]==0&&(P=2);else if(te==2&&oe==0){var $=Math.floor(Math.random()*2);Y[0]==0&&Y[1]==0?$==0?P=0:P=1:Y[0]==0&&Y[2]==0?$==0?P=0:P=2:Y[0]==0&&Y[3]==0?$==0?P=0:P=3:Y[1]==0&&Y[2]==0?$==0?P=1:P=2:Y[1]==0&&Y[3]==0?$==0?P=1:P=3:$==0?P=2:P=3}else if(te==4&&oe==0){var $=Math.floor(Math.random()*4);P=$}else P=ie;P==0?I.setCenter(N.getCenterX(),N.getCenterY()-N.getHeight()/2-v.DEFAULT_EDGE_LENGTH-I.getHeight()/2):P==1?I.setCenter(N.getCenterX()+N.getWidth()/2+v.DEFAULT_EDGE_LENGTH+I.getWidth()/2,N.getCenterY()):P==2?I.setCenter(N.getCenterX(),N.getCenterY()+N.getHeight()/2+v.DEFAULT_EDGE_LENGTH+I.getHeight()/2):I.setCenter(N.getCenterX()-N.getWidth()/2-v.DEFAULT_EDGE_LENGTH-I.getWidth()/2,N.getCenterY())}},s.exports=B},991:(s,u,f)=>{var c=f(551).FDLayoutNode,h=f(551).IMath;function p(g,E,w,v){c.call(this,g,E,w,v)}p.prototype=Object.create(c.prototype);for(var y in c)p[y]=c[y];p.prototype.calculateDisplacement=function(){var g=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementX=g.coolingFactor*g.maxNodeDisplacement*h.sign(this.displacementX)),Math.abs(this.displacementY)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementY=g.coolingFactor*g.maxNodeDisplacement*h.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},p.prototype.propogateDisplacementToChildren=function(g,E){for(var w=this.getChild().getNodes(),v,C=0;C<w.length;C++)v=w[C],v.getChild()==null?(v.displacementX+=g,v.displacementY+=E):v.propogateDisplacementToChildren(g,E)},p.prototype.move=function(){var g=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),g.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},p.prototype.setPred1=function(g){this.pred1=g},p.prototype.getPred1=function(){return pred1},p.prototype.getPred2=function(){return pred2},p.prototype.setNext=function(g){this.next=g},p.prototype.getNext=function(){return next},p.prototype.setProcessed=function(g){this.processed=g},p.prototype.isProcessed=function(){return processed},s.exports=p},902:(s,u,f)=>{function c(w){if(Array.isArray(w)){for(var v=0,C=Array(w.length);v<w.length;v++)C[v]=w[v];return C}else return Array.from(w)}var h=f(806),p=f(551).LinkedList,y=f(551).Matrix,g=f(551).SVD;function E(){}E.handleConstraints=function(w){var v={};v.fixedNodeConstraint=w.constraints.fixedNodeConstraint,v.alignmentConstraint=w.constraints.alignmentConstraint,v.relativePlacementConstraint=w.constraints.relativePlacementConstraint;for(var C=new Map,x=new Map,S=[],A=[],D=w.getAllNodes(),_=0,M=0;M<D.length;M++){var k=D[M];k.getChild()==null&&(x.set(k.id,_++),S.push(k.getCenterX()),A.push(k.getCenterY()),C.set(k.id,k))}v.relativePlacementConstraint&&v.relativePlacementConstraint.forEach(function(he){!he.gap&&he.gap!=0&&(he.left?he.gap=h.DEFAULT_EDGE_LENGTH+C.get(he.left).getWidth()/2+C.get(he.right).getWidth()/2:he.gap=h.DEFAULT_EDGE_LENGTH+C.get(he.top).getHeight()/2+C.get(he.bottom).getHeight()/2)});var F=function(j,pe){return{x:j.x-pe.x,y:j.y-pe.y}},G=function(j){var pe=0,me=0;return j.forEach(function(we){pe+=S[x.get(we)],me+=A[x.get(we)]}),{x:pe/j.size,y:me/j.size}},B=function(j,pe,me,we,xe){function qe(Ge,$e){var vt=new Set(Ge),nt=!0,it=!1,Tt=void 0;try{for(var dt=$e[Symbol.iterator](),gt;!(nt=(gt=dt.next()).done);nt=!0){var _t=gt.value;vt.add(_t)}}catch(Mt){it=!0,Tt=Mt}finally{try{!nt&&dt.return&&dt.return()}finally{if(it)throw Tt}}return vt}var Ee=new Map;j.forEach(function(Ge,$e){Ee.set($e,0)}),j.forEach(function(Ge,$e){Ge.forEach(function(vt){Ee.set(vt.id,Ee.get(vt.id)+1)})});var Oe=new Map,Ie=new Map,He=new p;Ee.forEach(function(Ge,$e){Ge==0?(He.push($e),me||(pe=="horizontal"?Oe.set($e,x.has($e)?S[x.get($e)]:we.get($e)):Oe.set($e,x.has($e)?A[x.get($e)]:we.get($e)))):Oe.set($e,Number.NEGATIVE_INFINITY),me&&Ie.set($e,new Set([$e]))}),me&&xe.forEach(function(Ge){var $e=[];if(Ge.forEach(function(it){me.has(it)&&$e.push(it)}),$e.length>0){var vt=0;$e.forEach(function(it){pe=="horizontal"?(Oe.set(it,x.has(it)?S[x.get(it)]:we.get(it)),vt+=Oe.get(it)):(Oe.set(it,x.has(it)?A[x.get(it)]:we.get(it)),vt+=Oe.get(it))}),vt=vt/$e.length,Ge.forEach(function(it){me.has(it)||Oe.set(it,vt)})}else{var nt=0;Ge.forEach(function(it){pe=="horizontal"?nt+=x.has(it)?S[x.get(it)]:we.get(it):nt+=x.has(it)?A[x.get(it)]:we.get(it)}),nt=nt/Ge.length,Ge.forEach(function(it){Oe.set(it,nt)})}});for(var Ue=function(){var $e=He.shift(),vt=j.get($e);vt.forEach(function(nt){if(Oe.get(nt.id)<Oe.get($e)+nt.gap)if(me&&me.has(nt.id)){var it=void 0;if(pe=="horizontal"?it=x.has(nt.id)?S[x.get(nt.id)]:we.get(nt.id):it=x.has(nt.id)?A[x.get(nt.id)]:we.get(nt.id),Oe.set(nt.id,it),it<Oe.get($e)+nt.gap){var Tt=Oe.get($e)+nt.gap-it;Ie.get($e).forEach(function(dt){Oe.set(dt,Oe.get(dt)-Tt)})}}else Oe.set(nt.id,Oe.get($e)+nt.gap);Ee.set(nt.id,Ee.get(nt.id)-1),Ee.get(nt.id)==0&&He.push(nt.id),me&&Ie.set(nt.id,qe(Ie.get($e),Ie.get(nt.id)))})};He.length!=0;)Ue();if(me){var je=new Set;j.forEach(function(Ge,$e){Ge.length==0&&je.add($e)});var Je=[];Ie.forEach(function(Ge,$e){if(je.has($e)){var vt=!1,nt=!0,it=!1,Tt=void 0;try{for(var dt=Ge[Symbol.iterator](),gt;!(nt=(gt=dt.next()).done);nt=!0){var _t=gt.value;me.has(_t)&&(vt=!0)}}catch(Lt){it=!0,Tt=Lt}finally{try{!nt&&dt.return&&dt.return()}finally{if(it)throw Tt}}if(!vt){var Mt=!1,jt=void 0;Je.forEach(function(Lt,Ht){Lt.has([].concat(c(Ge))[0])&&(Mt=!0,jt=Ht)}),Mt?Ge.forEach(function(Lt){Je[jt].add(Lt)}):Je.push(new Set(Ge))}}}),Je.forEach(function(Ge,$e){var vt=Number.POSITIVE_INFINITY,nt=Number.POSITIVE_INFINITY,it=Number.NEGATIVE_INFINITY,Tt=Number.NEGATIVE_INFINITY,dt=!0,gt=!1,_t=void 0;try{for(var Mt=Ge[Symbol.iterator](),jt;!(dt=(jt=Mt.next()).done);dt=!0){var Lt=jt.value,Ht=void 0;pe=="horizontal"?Ht=x.has(Lt)?S[x.get(Lt)]:we.get(Lt):Ht=x.has(Lt)?A[x.get(Lt)]:we.get(Lt);var Sr=Oe.get(Lt);Ht<vt&&(vt=Ht),Ht>it&&(it=Ht),Sr<nt&&(nt=Sr),Sr>Tt&&(Tt=Sr)}}catch(gn){gt=!0,_t=gn}finally{try{!dt&&Mt.return&&Mt.return()}finally{if(gt)throw _t}}var on=(vt+it)/2-(nt+Tt)/2,Rt=!0,tr=!1,Zt=void 0;try{for(var cr=Ge[Symbol.iterator](),rr;!(Rt=(rr=cr.next()).done);Rt=!0){var jr=rr.value;Oe.set(jr,Oe.get(jr)+on)}}catch(gn){tr=!0,Zt=gn}finally{try{!Rt&&cr.return&&cr.return()}finally{if(tr)throw Zt}}})}return Oe},q=function(j){var pe=0,me=0,we=0,xe=0;if(j.forEach(function(Ie){Ie.left?S[x.get(Ie.left)]-S[x.get(Ie.right)]>=0?pe++:me++:A[x.get(Ie.top)]-A[x.get(Ie.bottom)]>=0?we++:xe++}),pe>me&&we>xe)for(var qe=0;qe<x.size;qe++)S[qe]=-1*S[qe],A[qe]=-1*A[qe];else if(pe>me)for(var Ee=0;Ee<x.size;Ee++)S[Ee]=-1*S[Ee];else if(we>xe)for(var Oe=0;Oe<x.size;Oe++)A[Oe]=-1*A[Oe]},R=function(j){var pe=[],me=new p,we=new Set,xe=0;return j.forEach(function(qe,Ee){if(!we.has(Ee)){pe[xe]=[];var Oe=Ee;for(me.push(Oe),we.add(Oe),pe[xe].push(Oe);me.length!=0;){Oe=me.shift();var Ie=j.get(Oe);Ie.forEach(function(He){we.has(He.id)||(me.push(He.id),we.add(He.id),pe[xe].push(He.id))})}xe++}}),pe},P=function(j){var pe=new Map;return j.forEach(function(me,we){pe.set(we,[])}),j.forEach(function(me,we){me.forEach(function(xe){pe.get(we).push(xe),pe.get(xe.id).push({id:we,gap:xe.gap,direction:xe.direction})})}),pe},N=function(j){var pe=new Map;return j.forEach(function(me,we){pe.set(we,[])}),j.forEach(function(me,we){me.forEach(function(xe){pe.get(xe.id).push({id:we,gap:xe.gap,direction:xe.direction})})}),pe},I=[],z=[],ae=!1,re=!1,K=new Set,V=new Map,Z=new Map,U=[];if(v.fixedNodeConstraint&&v.fixedNodeConstraint.forEach(function(he){K.add(he.nodeId)}),v.relativePlacementConstraint&&(v.relativePlacementConstraint.forEach(function(he){he.left?(V.has(he.left)?V.get(he.left).push({id:he.right,gap:he.gap,direction:"horizontal"}):V.set(he.left,[{id:he.right,gap:he.gap,direction:"horizontal"}]),V.has(he.right)||V.set(he.right,[])):(V.has(he.top)?V.get(he.top).push({id:he.bottom,gap:he.gap,direction:"vertical"}):V.set(he.top,[{id:he.bottom,gap:he.gap,direction:"vertical"}]),V.has(he.bottom)||V.set(he.bottom,[]))}),Z=P(V),U=R(Z)),h.TRANSFORM_ON_CONSTRAINT_HANDLING){if(v.fixedNodeConstraint&&v.fixedNodeConstraint.length>1)v.fixedNodeConstraint.forEach(function(he,j){I[j]=[he.position.x,he.position.y],z[j]=[S[x.get(he.nodeId)],A[x.get(he.nodeId)]]}),ae=!0;else if(v.alignmentConstraint)(function(){var he=0;if(v.alignmentConstraint.vertical){for(var j=v.alignmentConstraint.vertical,pe=function(Oe){var Ie=new Set;j[Oe].forEach(function(je){Ie.add(je)});var He=new Set([].concat(c(Ie)).filter(function(je){return K.has(je)})),Ue=void 0;He.size>0?Ue=S[x.get(He.values().next().value)]:Ue=G(Ie).x,j[Oe].forEach(function(je){I[he]=[Ue,A[x.get(je)]],z[he]=[S[x.get(je)],A[x.get(je)]],he++})},me=0;me<j.length;me++)pe(me);ae=!0}if(v.alignmentConstraint.horizontal){for(var we=v.alignmentConstraint.horizontal,xe=function(Oe){var Ie=new Set;we[Oe].forEach(function(je){Ie.add(je)});var He=new Set([].concat(c(Ie)).filter(function(je){return K.has(je)})),Ue=void 0;He.size>0?Ue=S[x.get(He.values().next().value)]:Ue=G(Ie).y,we[Oe].forEach(function(je){I[he]=[S[x.get(je)],Ue],z[he]=[S[x.get(je)],A[x.get(je)]],he++})},qe=0;qe<we.length;qe++)xe(qe);ae=!0}v.relativePlacementConstraint&&(re=!0)})();else if(v.relativePlacementConstraint){for(var W=0,Y=0,ee=0;ee<U.length;ee++)U[ee].length>W&&(W=U[ee].length,Y=ee);if(W<Z.size/2)q(v.relativePlacementConstraint),ae=!1,re=!1;else{var oe=new Map,te=new Map,ie=[];U[Y].forEach(function(he){V.get(he).forEach(function(j){j.direction=="horizontal"?(oe.has(he)?oe.get(he).push(j):oe.set(he,[j]),oe.has(j.id)||oe.set(j.id,[]),ie.push({left:he,right:j.id})):(te.has(he)?te.get(he).push(j):te.set(he,[j]),te.has(j.id)||te.set(j.id,[]),ie.push({top:he,bottom:j.id}))})}),q(ie),re=!1;var se=B(oe,"horizontal"),$=B(te,"vertical");U[Y].forEach(function(he,j){z[j]=[S[x.get(he)],A[x.get(he)]],I[j]=[],se.has(he)?I[j][0]=se.get(he):I[j][0]=S[x.get(he)],$.has(he)?I[j][1]=$.get(he):I[j][1]=A[x.get(he)]}),ae=!0}}if(ae){for(var ne=void 0,le=y.transpose(I),Se=y.transpose(z),De=0;De<le.length;De++)le[De]=y.multGamma(le[De]),Se[De]=y.multGamma(Se[De]);var be=y.multMat(le,y.transpose(Se)),Te=g.svd(be);ne=y.multMat(Te.V,y.transpose(Te.U));for(var ve=0;ve<x.size;ve++){var de=[S[ve],A[ve]],ye=[ne[0][0],ne[1][0]],Ce=[ne[0][1],ne[1][1]];S[ve]=y.dotProduct(de,ye),A[ve]=y.dotProduct(de,Ce)}re&&q(v.relativePlacementConstraint)}}if(h.ENFORCE_CONSTRAINTS){if(v.fixedNodeConstraint&&v.fixedNodeConstraint.length>0){var ue={x:0,y:0};v.fixedNodeConstraint.forEach(function(he,j){var pe={x:S[x.get(he.nodeId)],y:A[x.get(he.nodeId)]},me=he.position,we=F(me,pe);ue.x+=we.x,ue.y+=we.y}),ue.x/=v.fixedNodeConstraint.length,ue.y/=v.fixedNodeConstraint.length,S.forEach(function(he,j){S[j]+=ue.x}),A.forEach(function(he,j){A[j]+=ue.y}),v.fixedNodeConstraint.forEach(function(he){S[x.get(he.nodeId)]=he.position.x,A[x.get(he.nodeId)]=he.position.y})}if(v.alignmentConstraint){if(v.alignmentConstraint.vertical)for(var Ae=v.alignmentConstraint.vertical,Pe=function(j){var pe=new Set;Ae[j].forEach(function(xe){pe.add(xe)});var me=new Set([].concat(c(pe)).filter(function(xe){return K.has(xe)})),we=void 0;me.size>0?we=S[x.get(me.values().next().value)]:we=G(pe).x,pe.forEach(function(xe){K.has(xe)||(S[x.get(xe)]=we)})},Fe=0;Fe<Ae.length;Fe++)Pe(Fe);if(v.alignmentConstraint.horizontal)for(var Ye=v.alignmentConstraint.horizontal,Ve=function(j){var pe=new Set;Ye[j].forEach(function(xe){pe.add(xe)});var me=new Set([].concat(c(pe)).filter(function(xe){return K.has(xe)})),we=void 0;me.size>0?we=A[x.get(me.values().next().value)]:we=G(pe).y,pe.forEach(function(xe){K.has(xe)||(A[x.get(xe)]=we)})},Qe=0;Qe<Ye.length;Qe++)Ve(Qe)}v.relativePlacementConstraint&&function(){var he=new Map,j=new Map,pe=new Map,me=new Map,we=new Map,xe=new Map,qe=new Set,Ee=new Set;if(K.forEach(function(Pt){qe.add(Pt),Ee.add(Pt)}),v.alignmentConstraint){if(v.alignmentConstraint.vertical)for(var Oe=v.alignmentConstraint.vertical,Ie=function(Q){pe.set("dummy"+Q,[]),Oe[Q].forEach(function(fe){he.set(fe,"dummy"+Q),pe.get("dummy"+Q).push(fe),K.has(fe)&&qe.add("dummy"+Q)}),we.set("dummy"+Q,S[x.get(Oe[Q][0])])},He=0;He<Oe.length;He++)Ie(He);if(v.alignmentConstraint.horizontal)for(var Ue=v.alignmentConstraint.horizontal,je=function(Q){me.set("dummy"+Q,[]),Ue[Q].forEach(function(fe){j.set(fe,"dummy"+Q),me.get("dummy"+Q).push(fe),K.has(fe)&&Ee.add("dummy"+Q)}),xe.set("dummy"+Q,A[x.get(Ue[Q][0])])},Je=0;Je<Ue.length;Je++)je(Je)}var Ge=new Map,$e=new Map,vt=function(Q){V.get(Q).forEach(function(fe){var ke=void 0,ze=void 0;fe.direction=="horizontal"?(ke=he.get(Q)?he.get(Q):Q,he.get(fe.id)?ze={id:he.get(fe.id),gap:fe.gap,direction:fe.direction}:ze=fe,Ge.has(ke)?Ge.get(ke).push(ze):Ge.set(ke,[ze]),Ge.has(ze.id)||Ge.set(ze.id,[])):(ke=j.get(Q)?j.get(Q):Q,j.get(fe.id)?ze={id:j.get(fe.id),gap:fe.gap,direction:fe.direction}:ze=fe,$e.has(ke)?$e.get(ke).push(ze):$e.set(ke,[ze]),$e.has(ze.id)||$e.set(ze.id,[]))})},nt=!0,it=!1,Tt=void 0;try{for(var dt=V.keys()[Symbol.iterator](),gt;!(nt=(gt=dt.next()).done);nt=!0){var _t=gt.value;vt(_t)}}catch(Pt){it=!0,Tt=Pt}finally{try{!nt&&dt.return&&dt.return()}finally{if(it)throw Tt}}var Mt=P(Ge),jt=P($e),Lt=R(Mt),Ht=R(jt),Sr=N(Ge),on=N($e),Rt=[],tr=[];Lt.forEach(function(Pt,Q){Rt[Q]=[],Pt.forEach(function(fe){Sr.get(fe).length==0&&Rt[Q].push(fe)})}),Ht.forEach(function(Pt,Q){tr[Q]=[],Pt.forEach(function(fe){on.get(fe).length==0&&tr[Q].push(fe)})});var Zt=B(Ge,"horizontal",qe,we,Rt),cr=B($e,"vertical",Ee,xe,tr),rr=function(Q){pe.get(Q)?pe.get(Q).forEach(function(fe){S[x.get(fe)]=Zt.get(Q)}):S[x.get(Q)]=Zt.get(Q)},jr=!0,gn=!1,jn=void 0;try{for(var Ln=Zt.keys()[Symbol.iterator](),Zn;!(jr=(Zn=Ln.next()).done);jr=!0){var sn=Zn.value;rr(sn)}}catch(Pt){gn=!0,jn=Pt}finally{try{!jr&&Ln.return&&Ln.return()}finally{if(gn)throw jn}}var Pa=function(Q){me.get(Q)?me.get(Q).forEach(function(fe){A[x.get(fe)]=cr.get(Q)}):A[x.get(Q)]=cr.get(Q)},Gn=!0,Ft=!1,ft=void 0;try{for(var Gr=cr.keys()[Symbol.iterator](),Qn;!(Gn=(Qn=Gr.next()).done);Gn=!0){var sn=Qn.value;Pa(sn)}}catch(Pt){Ft=!0,ft=Pt}finally{try{!Gn&&Gr.return&&Gr.return()}finally{if(Ft)throw ft}}}()}for(var Xe=0;Xe<D.length;Xe++){var We=D[Xe];We.getChild()==null&&We.setCenter(S[x.get(We.id)],A[x.get(We.id)])}},s.exports=E},551:s=>{s.exports=r}},a={};function i(s){var u=a[s];if(u!==void 0)return u.exports;var f=a[s]={exports:{}};return n[s](f,f.exports,i),f.exports}var o=i(45);return o})()})}(Of)),Of.exports}var _4=Nf.exports,eR;function M4(){return eR||(eR=1,function(t,e){(function(n,a){t.exports=a(D4())})(_4,function(r){return(()=>{var n={658:s=>{s.exports=Object.assign!=null?Object.assign.bind(Object):function(u){for(var f=arguments.length,c=Array(f>1?f-1:0),h=1;h<f;h++)c[h-1]=arguments[h];return c.forEach(function(p){Object.keys(p).forEach(function(y){return u[y]=p[y]})}),u}},548:(s,u,f)=>{var c=function(){function y(g,E){var w=[],v=!0,C=!1,x=void 0;try{for(var S=g[Symbol.iterator](),A;!(v=(A=S.next()).done)&&(w.push(A.value),!(E&&w.length===E));v=!0);}catch(D){C=!0,x=D}finally{try{!v&&S.return&&S.return()}finally{if(C)throw x}}return w}return function(g,E){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return y(g,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=f(140).layoutBase.LinkedList,p={};p.getTopMostNodes=function(y){for(var g={},E=0;E<y.length;E++)g[y[E].id()]=!0;var w=y.filter(function(v,C){typeof v=="number"&&(v=C);for(var x=v.parent()[0];x!=null;){if(g[x.id()])return!1;x=x.parent()[0]}return!0});return w},p.connectComponents=function(y,g,E,w){var v=new h,C=new Set,x=[],S=void 0,A=void 0,D=void 0,_=!1,M=1,k=[],F=[],G=function(){var q=y.collection();F.push(q);var R=E[0],P=y.collection();P.merge(R).merge(R.descendants().intersection(g)),x.push(R),P.forEach(function(z){v.push(z),C.add(z),q.merge(z)});for(var N=function(){R=v.shift();var ae=y.collection();R.neighborhood().nodes().forEach(function(Z){g.intersection(R.edgesWith(Z)).length>0&&ae.merge(Z)});for(var re=0;re<ae.length;re++){var K=ae[re];if(S=E.intersection(K.union(K.ancestors())),S!=null&&!C.has(S[0])){var V=S.union(S.descendants());V.forEach(function(Z){v.push(Z),C.add(Z),q.merge(Z),E.has(Z)&&x.push(Z)})}}};v.length!=0;)N();if(q.forEach(function(z){g.intersection(z.connectedEdges()).forEach(function(ae){q.has(ae.source())&&q.has(ae.target())&&q.merge(ae)})}),x.length==E.length&&(_=!0),!_||_&&M>1){A=x[0],D=A.connectedEdges().length,x.forEach(function(z){z.connectedEdges().length<D&&(D=z.connectedEdges().length,A=z)}),k.push(A.id());var I=y.collection();I.merge(x[0]),x.forEach(function(z){I.merge(z)}),x=[],E=E.difference(I),M++}};do G();while(!_);return w&&k.length>0&&w.set("dummy"+(w.size+1),k),F},p.relocateComponent=function(y,g,E){if(!E.fixedNodeConstraint){var w=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY;if(E.quality=="draft"){var S=!0,A=!1,D=void 0;try{for(var _=g.nodeIndexes[Symbol.iterator](),M;!(S=(M=_.next()).done);S=!0){var k=M.value,F=c(k,2),G=F[0],B=F[1],q=E.cy.getElementById(G);if(q){var R=q.boundingBox(),P=g.xCoords[B]-R.w/2,N=g.xCoords[B]+R.w/2,I=g.yCoords[B]-R.h/2,z=g.yCoords[B]+R.h/2;P<w&&(w=P),N>v&&(v=N),I<C&&(C=I),z>x&&(x=z)}}}catch(Z){A=!0,D=Z}finally{try{!S&&_.return&&_.return()}finally{if(A)throw D}}var ae=y.x-(v+w)/2,re=y.y-(x+C)/2;g.xCoords=g.xCoords.map(function(Z){return Z+ae}),g.yCoords=g.yCoords.map(function(Z){return Z+re})}else{Object.keys(g).forEach(function(Z){var U=g[Z],W=U.getRect().x,Y=U.getRect().x+U.getRect().width,ee=U.getRect().y,oe=U.getRect().y+U.getRect().height;W<w&&(w=W),Y>v&&(v=Y),ee<C&&(C=ee),oe>x&&(x=oe)});var K=y.x-(v+w)/2,V=y.y-(x+C)/2;Object.keys(g).forEach(function(Z){var U=g[Z];U.setCenter(U.getCenterX()+K,U.getCenterY()+V)})}}},p.calcBoundingBox=function(y,g,E,w){for(var v=Number.MAX_SAFE_INTEGER,C=Number.MIN_SAFE_INTEGER,x=Number.MAX_SAFE_INTEGER,S=Number.MIN_SAFE_INTEGER,A=void 0,D=void 0,_=void 0,M=void 0,k=y.descendants().not(":parent"),F=k.length,G=0;G<F;G++){var B=k[G];A=g[w.get(B.id())]-B.width()/2,D=g[w.get(B.id())]+B.width()/2,_=E[w.get(B.id())]-B.height()/2,M=E[w.get(B.id())]+B.height()/2,v>A&&(v=A),C<D&&(C=D),x>_&&(x=_),S<M&&(S=M)}var q={};return q.topLeftX=v,q.topLeftY=x,q.width=C-v,q.height=S-x,q},p.calcParentsWithoutChildren=function(y,g){var E=y.collection();return g.nodes(":parent").forEach(function(w){var v=!1;w.children().forEach(function(C){C.css("display")!="none"&&(v=!0)}),v||E.merge(w)}),E},s.exports=p},816:(s,u,f)=>{var c=f(548),h=f(140).CoSELayout,p=f(140).CoSENode,y=f(140).layoutBase.PointD,g=f(140).layoutBase.DimensionD,E=f(140).layoutBase.LayoutConstants,w=f(140).layoutBase.FDLayoutConstants,v=f(140).CoSEConstants,C=function(S,A){var D=S.cy,_=S.eles,M=_.nodes(),k=_.edges(),F=void 0,G=void 0,B=void 0,q={};S.randomize&&(F=A.nodeIndexes,G=A.xCoords,B=A.yCoords);var R=function(Z){return typeof Z=="function"},P=function(Z,U){return R(Z)?Z(U):Z},N=c.calcParentsWithoutChildren(D,_),I=function V(Z,U,W,Y){for(var ee=U.length,oe=0;oe<ee;oe++){var te=U[oe],ie=null;te.intersection(N).length==0&&(ie=te.children());var se=void 0,$=te.layoutDimensions({nodeDimensionsIncludeLabels:Y.nodeDimensionsIncludeLabels});if(te.outerWidth()!=null&&te.outerHeight()!=null)if(Y.randomize)if(!te.isParent())se=Z.add(new p(W.graphManager,new y(G[F.get(te.id())]-$.w/2,B[F.get(te.id())]-$.h/2),new g(parseFloat($.w),parseFloat($.h))));else{var ne=c.calcBoundingBox(te,G,B,F);te.intersection(N).length==0?se=Z.add(new p(W.graphManager,new y(ne.topLeftX,ne.topLeftY),new g(ne.width,ne.height))):se=Z.add(new p(W.graphManager,new y(ne.topLeftX,ne.topLeftY),new g(parseFloat($.w),parseFloat($.h))))}else se=Z.add(new p(W.graphManager,new y(te.position("x")-$.w/2,te.position("y")-$.h/2),new g(parseFloat($.w),parseFloat($.h))));else se=Z.add(new p(this.graphManager));if(se.id=te.data("id"),se.nodeRepulsion=P(Y.nodeRepulsion,te),se.paddingLeft=parseInt(te.css("padding")),se.paddingTop=parseInt(te.css("padding")),se.paddingRight=parseInt(te.css("padding")),se.paddingBottom=parseInt(te.css("padding")),Y.nodeDimensionsIncludeLabels&&(se.labelWidth=te.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,se.labelHeight=te.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,se.labelPosVertical=te.css("text-valign"),se.labelPosHorizontal=te.css("text-halign")),q[te.data("id")]=se,isNaN(se.rect.x)&&(se.rect.x=0),isNaN(se.rect.y)&&(se.rect.y=0),ie!=null&&ie.length>0){var le=void 0;le=W.getGraphManager().add(W.newGraph(),se),V(le,ie,W,Y)}}},z=function(Z,U,W){for(var Y=0,ee=0,oe=0;oe<W.length;oe++){var te=W[oe],ie=q[te.data("source")],se=q[te.data("target")];if(ie&&se&&ie!==se&&ie.getEdgesBetween(se).length==0){var $=U.add(Z.newEdge(),ie,se);$.id=te.id(),$.idealLength=P(S.idealEdgeLength,te),$.edgeElasticity=P(S.edgeElasticity,te),Y+=$.idealLength,ee++}}S.idealEdgeLength!=null&&(ee>0?v.DEFAULT_EDGE_LENGTH=w.DEFAULT_EDGE_LENGTH=Y/ee:R(S.idealEdgeLength)?v.DEFAULT_EDGE_LENGTH=w.DEFAULT_EDGE_LENGTH=50:v.DEFAULT_EDGE_LENGTH=w.DEFAULT_EDGE_LENGTH=S.idealEdgeLength,v.MIN_REPULSION_DIST=w.MIN_REPULSION_DIST=w.DEFAULT_EDGE_LENGTH/10,v.DEFAULT_RADIAL_SEPARATION=w.DEFAULT_EDGE_LENGTH)},ae=function(Z,U){U.fixedNodeConstraint&&(Z.constraints.fixedNodeConstraint=U.fixedNodeConstraint),U.alignmentConstraint&&(Z.constraints.alignmentConstraint=U.alignmentConstraint),U.relativePlacementConstraint&&(Z.constraints.relativePlacementConstraint=U.relativePlacementConstraint)};S.nestingFactor!=null&&(v.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=w.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=S.nestingFactor),S.gravity!=null&&(v.DEFAULT_GRAVITY_STRENGTH=w.DEFAULT_GRAVITY_STRENGTH=S.gravity),S.numIter!=null&&(v.MAX_ITERATIONS=w.MAX_ITERATIONS=S.numIter),S.gravityRange!=null&&(v.DEFAULT_GRAVITY_RANGE_FACTOR=w.DEFAULT_GRAVITY_RANGE_FACTOR=S.gravityRange),S.gravityCompound!=null&&(v.DEFAULT_COMPOUND_GRAVITY_STRENGTH=w.DEFAULT_COMPOUND_GRAVITY_STRENGTH=S.gravityCompound),S.gravityRangeCompound!=null&&(v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=w.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=S.gravityRangeCompound),S.initialEnergyOnIncremental!=null&&(v.DEFAULT_COOLING_FACTOR_INCREMENTAL=w.DEFAULT_COOLING_FACTOR_INCREMENTAL=S.initialEnergyOnIncremental),S.tilingCompareBy!=null&&(v.TILING_COMPARE_BY=S.tilingCompareBy),S.quality=="proof"?E.QUALITY=2:E.QUALITY=0,v.NODE_DIMENSIONS_INCLUDE_LABELS=w.NODE_DIMENSIONS_INCLUDE_LABELS=E.NODE_DIMENSIONS_INCLUDE_LABELS=S.nodeDimensionsIncludeLabels,v.DEFAULT_INCREMENTAL=w.DEFAULT_INCREMENTAL=E.DEFAULT_INCREMENTAL=!S.randomize,v.ANIMATE=w.ANIMATE=E.ANIMATE=S.animate,v.TILE=S.tile,v.TILING_PADDING_VERTICAL=typeof S.tilingPaddingVertical=="function"?S.tilingPaddingVertical.call():S.tilingPaddingVertical,v.TILING_PADDING_HORIZONTAL=typeof S.tilingPaddingHorizontal=="function"?S.tilingPaddingHorizontal.call():S.tilingPaddingHorizontal,v.DEFAULT_INCREMENTAL=w.DEFAULT_INCREMENTAL=E.DEFAULT_INCREMENTAL=!0,v.PURE_INCREMENTAL=!S.randomize,E.DEFAULT_UNIFORM_LEAF_NODE_SIZES=S.uniformNodeDimensions,S.step=="transformed"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,v.ENFORCE_CONSTRAINTS=!1,v.APPLY_LAYOUT=!1),S.step=="enforced"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!0,v.APPLY_LAYOUT=!1),S.step=="cose"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!1,v.APPLY_LAYOUT=!0),S.step=="all"&&(S.randomize?v.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!0,v.APPLY_LAYOUT=!0),S.fixedNodeConstraint||S.alignmentConstraint||S.relativePlacementConstraint?v.TREE_REDUCTION_ON_INCREMENTAL=!1:v.TREE_REDUCTION_ON_INCREMENTAL=!0;var re=new h,K=re.newGraphManager();return I(K.addRoot(),c.getTopMostNodes(M),re,S),z(re,K,k),ae(re,S),re.runLayout(),q};s.exports={coseLayout:C}},212:(s,u,f)=>{var c=function(){function S(A,D){for(var _=0;_<D.length;_++){var M=D[_];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(A,M.key,M)}}return function(A,D,_){return D&&S(A.prototype,D),_&&S(A,_),A}}();function h(S,A){if(!(S instanceof A))throw new TypeError("Cannot call a class as a function")}var p=f(658),y=f(548),g=f(657),E=g.spectralLayout,w=f(816),v=w.coseLayout,C=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(A){return 4500},idealEdgeLength:function(A){return 50},edgeElasticity:function(A){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),x=function(){function S(A){h(this,S),this.options=p({},C,A)}return c(S,[{key:"run",value:function(){var D=this,_=this.options,M=_.cy,k=_.eles,F=[],G=[],B=void 0,q=[];_.fixedNodeConstraint&&(!Array.isArray(_.fixedNodeConstraint)||_.fixedNodeConstraint.length==0)&&(_.fixedNodeConstraint=void 0),_.alignmentConstraint&&(_.alignmentConstraint.vertical&&(!Array.isArray(_.alignmentConstraint.vertical)||_.alignmentConstraint.vertical.length==0)&&(_.alignmentConstraint.vertical=void 0),_.alignmentConstraint.horizontal&&(!Array.isArray(_.alignmentConstraint.horizontal)||_.alignmentConstraint.horizontal.length==0)&&(_.alignmentConstraint.horizontal=void 0)),_.relativePlacementConstraint&&(!Array.isArray(_.relativePlacementConstraint)||_.relativePlacementConstraint.length==0)&&(_.relativePlacementConstraint=void 0);var R=_.fixedNodeConstraint||_.alignmentConstraint||_.relativePlacementConstraint;R&&(_.tile=!1,_.packComponents=!1);var P=void 0,N=!1;if(M.layoutUtilities&&_.packComponents&&(P=M.layoutUtilities("get"),P||(P=M.layoutUtilities()),N=!0),k.nodes().length>0)if(N){var ae=y.getTopMostNodes(_.eles.nodes());if(B=y.connectComponents(M,_.eles,ae),B.forEach(function(be){var Te=be.boundingBox();q.push({x:Te.x1+Te.w/2,y:Te.y1+Te.h/2})}),_.randomize&&B.forEach(function(be){_.eles=be,F.push(E(_))}),_.quality=="default"||_.quality=="proof"){var re=M.collection();if(_.tile){var K=new Map,V=[],Z=[],U=0,W={nodeIndexes:K,xCoords:V,yCoords:Z},Y=[];if(B.forEach(function(be,Te){be.edges().length==0&&(be.nodes().forEach(function(ve,de){re.merge(be.nodes()[de]),ve.isParent()||(W.nodeIndexes.set(be.nodes()[de].id(),U++),W.xCoords.push(be.nodes()[0].position().x),W.yCoords.push(be.nodes()[0].position().y))}),Y.push(Te))}),re.length>1){var ee=re.boundingBox();q.push({x:ee.x1+ee.w/2,y:ee.y1+ee.h/2}),B.push(re),F.push(W);for(var oe=Y.length-1;oe>=0;oe--)B.splice(Y[oe],1),F.splice(Y[oe],1),q.splice(Y[oe],1)}}B.forEach(function(be,Te){_.eles=be,G.push(v(_,F[Te])),y.relocateComponent(q[Te],G[Te],_)})}else B.forEach(function(be,Te){y.relocateComponent(q[Te],F[Te],_)});var te=new Set;if(B.length>1){var ie=[],se=k.filter(function(be){return be.css("display")=="none"});B.forEach(function(be,Te){var ve=void 0;if(_.quality=="draft"&&(ve=F[Te].nodeIndexes),be.nodes().not(se).length>0){var de={};de.edges=[],de.nodes=[];var ye=void 0;be.nodes().not(se).forEach(function(Ce){if(_.quality=="draft")if(!Ce.isParent())ye=ve.get(Ce.id()),de.nodes.push({x:F[Te].xCoords[ye]-Ce.boundingbox().w/2,y:F[Te].yCoords[ye]-Ce.boundingbox().h/2,width:Ce.boundingbox().w,height:Ce.boundingbox().h});else{var ue=y.calcBoundingBox(Ce,F[Te].xCoords,F[Te].yCoords,ve);de.nodes.push({x:ue.topLeftX,y:ue.topLeftY,width:ue.width,height:ue.height})}else G[Te][Ce.id()]&&de.nodes.push({x:G[Te][Ce.id()].getLeft(),y:G[Te][Ce.id()].getTop(),width:G[Te][Ce.id()].getWidth(),height:G[Te][Ce.id()].getHeight()})}),be.edges().forEach(function(Ce){var ue=Ce.source(),Ae=Ce.target();if(ue.css("display")!="none"&&Ae.css("display")!="none")if(_.quality=="draft"){var Pe=ve.get(ue.id()),Fe=ve.get(Ae.id()),Ye=[],Ve=[];if(ue.isParent()){var Qe=y.calcBoundingBox(ue,F[Te].xCoords,F[Te].yCoords,ve);Ye.push(Qe.topLeftX+Qe.width/2),Ye.push(Qe.topLeftY+Qe.height/2)}else Ye.push(F[Te].xCoords[Pe]),Ye.push(F[Te].yCoords[Pe]);if(Ae.isParent()){var Xe=y.calcBoundingBox(Ae,F[Te].xCoords,F[Te].yCoords,ve);Ve.push(Xe.topLeftX+Xe.width/2),Ve.push(Xe.topLeftY+Xe.height/2)}else Ve.push(F[Te].xCoords[Fe]),Ve.push(F[Te].yCoords[Fe]);de.edges.push({startX:Ye[0],startY:Ye[1],endX:Ve[0],endY:Ve[1]})}else G[Te][ue.id()]&&G[Te][Ae.id()]&&de.edges.push({startX:G[Te][ue.id()].getCenterX(),startY:G[Te][ue.id()].getCenterY(),endX:G[Te][Ae.id()].getCenterX(),endY:G[Te][Ae.id()].getCenterY()})}),de.nodes.length>0&&(ie.push(de),te.add(Te))}});var $=P.packComponents(ie,_.randomize).shifts;if(_.quality=="draft")F.forEach(function(be,Te){var ve=be.xCoords.map(function(ye){return ye+$[Te].dx}),de=be.yCoords.map(function(ye){return ye+$[Te].dy});be.xCoords=ve,be.yCoords=de});else{var ne=0;te.forEach(function(be){Object.keys(G[be]).forEach(function(Te){var ve=G[be][Te];ve.setCenter(ve.getCenterX()+$[ne].dx,ve.getCenterY()+$[ne].dy)}),ne++})}}}else{var I=_.eles.boundingBox();if(q.push({x:I.x1+I.w/2,y:I.y1+I.h/2}),_.randomize){var z=E(_);F.push(z)}_.quality=="default"||_.quality=="proof"?(G.push(v(_,F[0])),y.relocateComponent(q[0],G[0],_)):y.relocateComponent(q[0],F[0],_)}var le=function(Te,ve){if(_.quality=="default"||_.quality=="proof"){typeof Te=="number"&&(Te=ve);var de=void 0,ye=void 0,Ce=Te.data("id");return G.forEach(function(Ae){Ce in Ae&&(de={x:Ae[Ce].getRect().getCenterX(),y:Ae[Ce].getRect().getCenterY()},ye=Ae[Ce])}),_.nodeDimensionsIncludeLabels&&(ye.labelWidth&&(ye.labelPosHorizontal=="left"?de.x+=ye.labelWidth/2:ye.labelPosHorizontal=="right"&&(de.x-=ye.labelWidth/2)),ye.labelHeight&&(ye.labelPosVertical=="top"?de.y+=ye.labelHeight/2:ye.labelPosVertical=="bottom"&&(de.y-=ye.labelHeight/2))),de==null&&(de={x:Te.position("x"),y:Te.position("y")}),{x:de.x,y:de.y}}else{var ue=void 0;return F.forEach(function(Ae){var Pe=Ae.nodeIndexes.get(Te.id());Pe!=null&&(ue={x:Ae.xCoords[Pe],y:Ae.yCoords[Pe]})}),ue==null&&(ue={x:Te.position("x"),y:Te.position("y")}),{x:ue.x,y:ue.y}}};if(_.quality=="default"||_.quality=="proof"||_.randomize){var Se=y.calcParentsWithoutChildren(M,k),De=k.filter(function(be){return be.css("display")=="none"});_.eles=k.not(De),k.nodes().not(":parent").not(De).layoutPositions(D,_,le),Se.length>0&&Se.forEach(function(be){be.position(le(be))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),S}();s.exports=x},657:(s,u,f)=>{var c=f(548),h=f(140).layoutBase.Matrix,p=f(140).layoutBase.SVD,y=function(E){var w=E.cy,v=E.eles,C=v.nodes(),x=v.nodes(":parent"),S=new Map,A=new Map,D=new Map,_=[],M=[],k=[],F=[],G=[],B=[],q=[],R=[],P=void 0,N=1e8,I=1e-9,z=E.piTol,ae=E.samplingType,re=E.nodeSeparation,K=void 0,V=function(){for(var j=0,pe=0,me=!1;pe<K;){j=Math.floor(Math.random()*P),me=!1;for(var we=0;we<pe;we++)if(F[we]==j){me=!0;break}if(!me)F[pe]=j,pe++;else continue}},Z=function(j,pe,me){for(var we=[],xe=0,qe=0,Ee=0,Oe=void 0,Ie=[],He=0,Ue=1,je=0;je<P;je++)Ie[je]=N;for(we[qe]=j,Ie[j]=0;qe>=xe;){Ee=we[xe++];for(var Je=_[Ee],Ge=0;Ge<Je.length;Ge++)Oe=A.get(Je[Ge]),Ie[Oe]==N&&(Ie[Oe]=Ie[Ee]+1,we[++qe]=Oe);B[Ee][pe]=Ie[Ee]*re}if(me){for(var $e=0;$e<P;$e++)B[$e][pe]<G[$e]&&(G[$e]=B[$e][pe]);for(var vt=0;vt<P;vt++)G[vt]>He&&(He=G[vt],Ue=vt)}return Ue},U=function(j){var pe=void 0;if(j){pe=Math.floor(Math.random()*P);for(var we=0;we<P;we++)G[we]=N;for(var xe=0;xe<K;xe++)F[xe]=pe,pe=Z(pe,xe,j)}else{V();for(var me=0;me<K;me++)Z(F[me],me,j)}for(var qe=0;qe<P;qe++)for(var Ee=0;Ee<K;Ee++)B[qe][Ee]*=B[qe][Ee];for(var Oe=0;Oe<K;Oe++)q[Oe]=[];for(var Ie=0;Ie<K;Ie++)for(var He=0;He<K;He++)q[Ie][He]=B[F[He]][Ie]},W=function(){for(var j=p.svd(q),pe=j.S,me=j.U,we=j.V,xe=pe[0]*pe[0]*pe[0],qe=[],Ee=0;Ee<K;Ee++){qe[Ee]=[];for(var Oe=0;Oe<K;Oe++)qe[Ee][Oe]=0,Ee==Oe&&(qe[Ee][Oe]=pe[Ee]/(pe[Ee]*pe[Ee]+xe/(pe[Ee]*pe[Ee])))}R=h.multMat(h.multMat(we,qe),h.transpose(me))},Y=function(){for(var j=void 0,pe=void 0,me=[],we=[],xe=[],qe=[],Ee=0;Ee<P;Ee++)me[Ee]=Math.random(),we[Ee]=Math.random();me=h.normalize(me),we=h.normalize(we);for(var Oe=I,Ie=I,He=void 0;;){for(var Ue=0;Ue<P;Ue++)xe[Ue]=me[Ue];if(me=h.multGamma(h.multL(h.multGamma(xe),B,R)),j=h.dotProduct(xe,me),me=h.normalize(me),Oe=h.dotProduct(xe,me),He=Math.abs(Oe/Ie),He<=1+z&&He>=1)break;Ie=Oe}for(var je=0;je<P;je++)xe[je]=me[je];for(Ie=I;;){for(var Je=0;Je<P;Je++)qe[Je]=we[Je];if(qe=h.minusOp(qe,h.multCons(xe,h.dotProduct(xe,qe))),we=h.multGamma(h.multL(h.multGamma(qe),B,R)),pe=h.dotProduct(qe,we),we=h.normalize(we),Oe=h.dotProduct(qe,we),He=Math.abs(Oe/Ie),He<=1+z&&He>=1)break;Ie=Oe}for(var Ge=0;Ge<P;Ge++)qe[Ge]=we[Ge];M=h.multCons(xe,Math.sqrt(Math.abs(j))),k=h.multCons(qe,Math.sqrt(Math.abs(pe)))};c.connectComponents(w,v,c.getTopMostNodes(C),S),x.forEach(function(he){c.connectComponents(w,v,c.getTopMostNodes(he.descendants().intersection(v)),S)});for(var ee=0,oe=0;oe<C.length;oe++)C[oe].isParent()||A.set(C[oe].id(),ee++);var te=!0,ie=!1,se=void 0;try{for(var $=S.keys()[Symbol.iterator](),ne;!(te=(ne=$.next()).done);te=!0){var le=ne.value;A.set(le,ee++)}}catch(he){ie=!0,se=he}finally{try{!te&&$.return&&$.return()}finally{if(ie)throw se}}for(var Se=0;Se<A.size;Se++)_[Se]=[];x.forEach(function(he){for(var j=he.children().intersection(v);j.nodes(":childless").length==0;)j=j.nodes()[0].children().intersection(v);var pe=0,me=j.nodes(":childless")[0].connectedEdges().length;j.nodes(":childless").forEach(function(we,xe){we.connectedEdges().length<me&&(me=we.connectedEdges().length,pe=xe)}),D.set(he.id(),j.nodes(":childless")[pe].id())}),C.forEach(function(he){var j=void 0;he.isParent()?j=A.get(D.get(he.id())):j=A.get(he.id()),he.neighborhood().nodes().forEach(function(pe){v.intersection(he.edgesWith(pe)).length>0&&(pe.isParent()?_[j].push(D.get(pe.id())):_[j].push(pe.id()))})});var De=function(j){var pe=A.get(j),me=void 0;S.get(j).forEach(function(we){w.getElementById(we).isParent()?me=D.get(we):me=we,_[pe].push(me),_[A.get(me)].push(j)})},be=!0,Te=!1,ve=void 0;try{for(var de=S.keys()[Symbol.iterator](),ye;!(be=(ye=de.next()).done);be=!0){var Ce=ye.value;De(Ce)}}catch(he){Te=!0,ve=he}finally{try{!be&&de.return&&de.return()}finally{if(Te)throw ve}}P=A.size;var ue=void 0;if(P>2){K=P<E.sampleSize?P:E.sampleSize;for(var Ae=0;Ae<P;Ae++)B[Ae]=[];for(var Pe=0;Pe<K;Pe++)R[Pe]=[];return E.quality=="draft"||E.step=="all"?(U(ae),W(),Y(),ue={nodeIndexes:A,xCoords:M,yCoords:k}):(A.forEach(function(he,j){M.push(w.getElementById(j).position("x")),k.push(w.getElementById(j).position("y"))}),ue={nodeIndexes:A,xCoords:M,yCoords:k}),ue}else{var Fe=A.keys(),Ye=w.getElementById(Fe.next().value),Ve=Ye.position(),Qe=Ye.outerWidth();if(M.push(Ve.x),k.push(Ve.y),P==2){var Xe=w.getElementById(Fe.next().value),We=Xe.outerWidth();M.push(Ve.x+Qe/2+We/2+E.idealEdgeLength),k.push(Ve.y)}return ue={nodeIndexes:A,xCoords:M,yCoords:k},ue}};s.exports={spectralLayout:y}},579:(s,u,f)=>{var c=f(212),h=function(y){y&&y("layout","fcose",c)};typeof cytoscape<"u"&&h(cytoscape),s.exports=h},140:s=>{s.exports=r}},a={};function i(s){var u=a[s];if(u!==void 0)return u.exports;var f=a[s]={exports:{}};return n[s](f,f.exports,i),f.exports}var o=i(579);return o})()})}(Nf)),Nf.exports}var R4=M4();const P4=So(R4);var gb={exports:{}},tR;function k4(){return tR||(tR=1,function(t,e){(function(n,a){t.exports=a()})(self,function(){return(()=>{var r={658:o=>{o.exports=Object.assign!=null?Object.assign.bind(Object):function(s){for(var u=arguments.length,f=new Array(u>1?u-1:0),c=1;c<u;c++)f[c-1]=arguments[c];return f.filter(function(h){return h!=null}).forEach(function(h){Object.keys(h).forEach(function(p){return s[p]=h[p]})}),s}},738:o=>{o.exports={grabbedNode:function(u){return!0},dropTarget:function(u,f){return!0},dropSibling:function(u,f){return!0},newParentNode:function(u,f){return{}},boundingBoxOptions:{includeOverlays:!1,includeLabels:!0},overThreshold:10,outThreshold:10}},904:(o,s,u)=>{var f=u(658),c=u(738),h=u(43),p=u(444),y=function(w,v){this.cy=w,this.options=f({},c,v),this.listeners=[],this.enabled=!0,this.addListeners()},g=function(){this.removeListeners()};[h,p,{destroy:g}].forEach(function(E){f(y.prototype,E)}),o.exports=function(E){var w=this;return new y(w,E)}},444:(o,s,u)=>{var f=u(235),c=f.isParent,h=f.isChild,p=f.isOnlyChild,y=f.getBounds,g=f.getBoundsTuple,E=f.boundsOverlap,w=f.expandBounds,v=f.getBoundsCopy,C=f.setParent,x=f.removeParent,S=function(M,k,F){this.listeners.push({event:M,selector:k,callback:F}),k==null?this.cy.on(M,F):this.cy.on(M,k,F)},A=function(){var M=this,k=this.options,F=this.cy,G=function(K){return K.selected()&&F.elements("node:selected").length>1},B=function(K){return!c(K)&&!G(K)&&k.grabbedNode(K)},q=function(K){return!h(K)&&!K.same(M.grabbedNode)&&k.dropTarget(K,M.grabbedNode)},R=function(K){return h(K)&&!K.same(M.grabbedNode)&&k.dropSibling(K,M.grabbedNode)},P=function(K){return h(K)},N=function(K){return g(K,k.boundingBoxOptions)},I=function(K){return(q(K)||R(K))&&!K.same(M.dropTarget)},z=function(){return M.boundsTuples=F.nodes(I).map(N)},ae=function(){M.grabbedNode.removeClass("cdnd-grabbed-node"),M.dropTarget.removeClass("cdnd-drop-target"),M.dropSibling.removeClass("cdnd-drop-sibling"),M.grabbedNode=F.collection(),M.dropTarget=F.collection(),M.dropSibling=F.collection(),M.dropTargetBounds=null,M.boundsTuples=[],M.inGesture=!1};this.addListener("grab","node",function(re){var K=re.target;!M.enabled||!B(K)||(M.inGesture=!0,M.grabbedNode=K,M.dropTarget=F.collection(),M.dropSibling=F.collection(),P(K)&&(M.dropTarget=K.parent(),M.dropTargetBounds=v(M.dropTarget,k.boundingBoxOptions)),z(),M.grabbedNode.addClass("cdnd-grabbed-node"),M.dropTarget.addClass("cdnd-drop-target"),K.emit("cdndgrab"))}),this.addListener("add","node",function(re){if(!(!M.inGesture||!M.enabled)){var K=re.target;I(K)&&M.boundsTuples.push(g(K,k.boundingBoxOptions))}}),this.addListener("remove","node",function(re){if(!(!M.inGesture||!M.enabled)){var K=re.target,V=K.same(M.dropTarget),Z=K.same(M.dropSibling),U=K.same(M.grabbedNode);(V||Z||U)&&(U?ae():(M.dropTarget=F.collection(),M.dropSibling=F.collection(),z()))}}),this.addListener("drag","node",function(){if(!(!M.inGesture||!M.enabled))if(M.dropTarget.nonempty()){var re=w(y(M.grabbedNode,k.boundingBoxOptions),k.outThreshold),K=M.dropTarget,V=M.dropSibling,Z=!E(M.dropTargetBounds,re),U=p(M.grabbedNode);if(Z){x(M.grabbedNode),x(M.dropSibling),M.dropTarget.removeClass("cdnd-drop-target"),M.dropSibling.removeClass("cdnd-drop-sibling");var W=M.dropTarget&&M.dropTarget.hasClass("cdnd-new-parent");(M.dropSibling.nonempty()||U)&&W&&M.dropTarget.remove(),M.dropTarget=F.collection(),M.dropSibling=F.collection(),M.dropTargetBounds=null,W&&z(),M.grabbedNode.emit("cdndout",[K,V])}}else{var Y=w(y(M.grabbedNode,k.boundingBoxOptions),k.overThreshold),ee=function(ne){return!ne.node.removed()&&E(Y,ne.bb)},oe=M.boundsTuples.filter(ee).map(function($){return $.node});if(oe.length>0){var te=oe.filter(c),ie,se;te.length>0?(se=F.collection(),ie=te[0]):(se=oe[0],ie=F.add(k.newParentNode(M.grabbedNode,se))),ie.addClass("cdnd-drop-target"),ie!==se&&ie.addClass("cdnd-new-parent"),se.addClass("cdnd-drop-sibling"),C(se,ie),M.dropTargetBounds=v(ie,k.boundingBoxOptions),C(M.grabbedNode,ie),M.dropTarget=ie,M.dropSibling=se,M.grabbedNode.emit("cdndover",[ie,se])}}}),this.addListener("free","node",function(){if(!(!M.inGesture||!M.enabled)){var re=M.grabbedNode,K=M.dropTarget,V=M.dropSibling;ae(),re.emit("cdnddrop",[K,V])}})},D=function(){var M=this.cy;this.listeners.forEach(function(k){var F=k.event,G=k.selector,B=k.callback;G==null?M.removeListener(F,B):M.removeListener(F,G,B)}),this.listeners=[]};o.exports={addListener:S,addListeners:A,removeListeners:D}},43:o=>{function s(){this.enabled=!0}function u(){this.enabled=!1}o.exports={enable:s,disable:u}},235:o=>{var s=function(x){return x.isParent()},u=function(x){return x.isChild()},f=function(x){return u(x)&&x.parent().children().length===1},c=function(x,S){return x.boundingBox(S)},h=function(x,S){return{node:x,bb:p(c(x,S))}},p=function(x){return{x1:x.x1,x2:x.x2,y1:x.y1,y2:x.y2,w:x.w,h:x.h}},y=function(x,S){return p(c(x,S))},g=function(x){return x.move({parent:null})},E=function(x,S){return x.move({parent:S.id()})},w=function(x,S){return!(x.x1>S.x2||S.x1>x.x2||x.x2<S.x1||S.x2<x.x1||x.y2<S.y1||S.y2<x.y1||x.y1>S.y2||S.y1>x.y2)},v=function(x,S){return{x1:x.x1-S,x2:x.x2+S,w:x.w+2*S,y1:x.y1-S,y2:x.y2+S,h:x.h+2*S}};o.exports={isParent:s,isChild:u,isOnlyChild:f,getBoundsTuple:h,boundsOverlap:w,getBounds:c,expandBounds:v,copyBounds:p,getBoundsCopy:y,removeParent:g,setParent:E}},579:(o,s,u)=>{var f=u(904),c=function(p){p&&p("core","compoundDragAndDrop",f)};typeof cytoscape<"u"&&c(cytoscape),o.exports=c}},n={};function a(o){var s=n[o];if(s!==void 0)return s.exports;var u=n[o]={exports:{}};return r[o](u,u.exports,a),u.exports}var i=a(579);return i})()})}(gb)),gb.exports}var N4=k4();const O4=So(N4);var yb={exports:{}},rR;function I4(){return rR||(rR=1,function(t,e){(function(r,n){t.exports=n()})(window,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.d=function(i,o,s){a.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:s})},a.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a.t=function(i,o){if(1&o&&(i=a(i)),8&o||4&o&&typeof i=="object"&&i&&i.__esModule)return i;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&o&&typeof i!="string")for(var u in i)a.d(s,u,(function(f){return i[f]}).bind(null,u));return s},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=0)}([function(r,n,a){var i=a(1),o=function(s){s&&s("core","svg",i.svg)};typeof cytoscape<"u"&&o(cytoscape),r.exports=o},function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},o=a(2),s={},u={};u.number=function(f){return f!=null&&(f===void 0?"undefined":i(f))===i(1)&&!isNaN(f)},s.bufferCanvasImage=function(f,c){var h=c.renderer().usePaths;c.renderer().usePaths=function(){return!1},c.elements().forEach(function(G){G._private.rscratch.pathCacheKey=null,G._private.rscratch.pathCache=null});var p=c.renderer(),y=c.mutableElements().boundingBox(),g=p.findContainerClientCoords(),E=f.full?Math.ceil(y.w):g[2],w=f.full?Math.ceil(y.h):g[3],v=u.number(f.maxWidth)||u.number(f.maxHeight),C=p.getPixelRatio(),x=1;if(f.scale!==void 0)E*=f.scale,w*=f.scale,x=f.scale;else if(v){var S=1/0,A=1/0;u.number(f.maxWidth)&&(S=x*f.maxWidth/E),u.number(f.maxHeight)&&(A=x*f.maxHeight/w),E*=x=Math.min(S,A),w*=x}v||(E*=C,w*=C,x*=C);var D=null,_=D=new o(E,w);if(E>0&&w>0){D.clearRect(0,0,E,w),f.bg&&(D.globalCompositeOperation="destination-over",D.fillStyle=f.bg,D.fillRect(0,0,E,w)),D.globalCompositeOperation="source-over";var M=p.getCachedZSortedEles();if(f.full)D.translate(-y.x1*x,-y.y1*x),D.scale(x,x),p.drawElements(D,M),D.scale(1/x,1/x),D.translate(y.x1*x,y.y1*x);else{var k=c.pan(),F={x:k.x*x,y:k.y*x};x*=c.zoom(),D.translate(F.x,F.y),D.scale(x,x),p.drawElements(D,M),D.scale(1/x,1/x),D.translate(-F.x,-F.y)}}return c.renderer().usePaths=h,_},s.svg=function(f){return s.bufferCanvasImage(f||{},this).getSerializedSvg()},r.exports=s},function(r,n,a){(function(){var i,o,s,u,f;function c(g,E){var w,v=Object.keys(E);for(w=0;w<v.length;w++)g=g.replace(new RegExp("\\{"+v[w]+"\\}","gi"),E[v[w]]);return g}function h(g){var E,w,v;if(!g)throw new Error("cannot create a random attribute name for an undefined object");E="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",w="";do for(w="",v=0;v<12;v++)w+=E[Math.floor(Math.random()*E.length)];while(g[w]);return w}function p(g){var E={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return E[g]||E.alphabetic}f=function(g,E){var w,v,C,x={};for(g=g.split(","),E=E||10,w=0;w<g.length;w+=2)v="&"+g[w+1]+";",C=parseInt(g[w],E),x[v]="&#"+C+";";return x["\\xa0"]="&#160;",x}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),i={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(s=function(g,E){this.__root=g,this.__ctx=E}).prototype.addColorStop=function(g,E){var w,v=this.__ctx.__createElement("stop");v.setAttribute("offset",g),E.indexOf("rgba")!==-1?(w=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(E),v.setAttribute("stop-color",c("rgb({r},{g},{b})",{r:w[1],g:w[2],b:w[3]})),v.setAttribute("stop-opacity",w[4])):v.setAttribute("stop-color",E),this.__root.appendChild(v)},u=function(g,E){this.__root=g,this.__ctx=E},(o=function(g){var E,w={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((E=w).width=arguments[0],E.height=arguments[1]):E=g||w,!(this instanceof o))return new o(E);this.width=E.width||w.width,this.height=E.height||w.height,this.enableMirroring=E.enableMirroring!==void 0?E.enableMirroring:w.enableMirroring,this.canvas=this,this.__document=E.document||document,E.ctx?this.__ctx=E.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(g,E,w){E===void 0&&(E={});var v,C,x=this.__document.createElementNS("http://www.w3.org/2000/svg",g),S=Object.keys(E);for(w&&(x.setAttribute("fill","none"),x.setAttribute("stroke","none")),v=0;v<S.length;v++)C=S[v],x.setAttribute(C,E[C]);return x},o.prototype.__setDefaultStyles=function(){var g,E,w=Object.keys(i);for(g=0;g<w.length;g++)this[E=w[g]]=i[E].canvas},o.prototype.__applyStyleState=function(g){if(g){var E,w,v=Object.keys(g);for(E=0;E<v.length;E++)this[w=v[E]]=g[w]}},o.prototype.__getStyleState=function(){var g,E,w={},v=Object.keys(i);for(g=0;g<v.length;g++)w[E=v[g]]=this[E];return w},o.prototype.__applyStyleToCurrentElement=function(g){var E=this.__currentElement;this.__currentElementsToStyle;var w,v,C,x,S,A=Object.keys(i);for(w=0;w<A.length;w++)if(v=i[A[w]],C=this[A[w]],v.apply){if(C instanceof u){if(C.__ctx)for(;C.__ctx.__defs.childNodes.length;)x=C.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[x]=x,this.__defs.appendChild(C.__ctx.__defs.childNodes[0]);E.setAttribute(v.apply,c("url(#{id})",{id:C.__root.getAttribute("id")}))}else if(C instanceof s)E.setAttribute(v.apply,c("url(#{id})",{id:C.__root.getAttribute("id")}));else if(v.apply.indexOf(g)!==-1&&v.svg!==C)if(v.svgAttr!=="stroke"&&v.svgAttr!=="fill"||C.indexOf("rgba")===-1){var D=v.svgAttr;if(A[w]==="globalAlpha"&&(D=g+"-"+v.svgAttr,E.getAttribute(D)))continue;E.setAttribute(D,C)}else{S=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(C),E.setAttribute(v.svgAttr,c("rgb({r},{g},{b})",{r:S[1],g:S[2],b:S[3]}));var _=S[4],M=this.globalAlpha;M!=null&&(_*=M),E.setAttribute(v.svgAttr+"-opacity",_)}}},o.prototype.__closestGroupOrSvg=function(g){return(g=g||this.__currentElement).nodeName==="g"||g.nodeName==="svg"?g:this.__closestGroupOrSvg(g.parentNode)},o.prototype.getSerializedSvg=function(g){var E,w,v,C,x,S=new XMLSerializer().serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(S)&&(S=S.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),g)for(E=Object.keys(f),w=0;w<E.length;w++)v=E[w],C=f[v],(x=new RegExp(v,"gi")).test(S)&&(S=S.replace(x,C));return S},o.prototype.getSvg=function(){return this.__root},o.prototype.save=function(){var g=this.__createElement("g"),E=this.__closestGroupOrSvg();this.__groupStack.push(E),E.appendChild(g),this.__currentElement=g,this.__stack.push(this.__getStyleState())},o.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var g=this.__stack.pop();this.__applyStyleState(g)},o.prototype.__addTransform=function(g){var E=this.__closestGroupOrSvg();if(E.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:E,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var w=this.__createElement("g");E.appendChild(w),this.__currentElement=w}var v=this.__currentElement.getAttribute("transform");v?v+=" ":v="",v+=g,this.__currentElement.setAttribute("transform",v)},o.prototype.scale=function(g,E){E===void 0&&(E=g),this.__addTransform(c("scale({x},{y})",{x:g,y:E}))},o.prototype.rotate=function(g){var E=180*g/Math.PI;this.__addTransform(c("rotate({angle},{cx},{cy})",{angle:E,cx:0,cy:0}))},o.prototype.translate=function(g,E){this.__addTransform(c("translate({x},{y})",{x:g,y:E}))},o.prototype.transform=function(g,E,w,v,C,x){this.__addTransform(c("matrix({a},{b},{c},{d},{e},{f})",{a:g,b:E,c:w,d:v,e:C,f:x}))},o.prototype.beginPath=function(){var g;this.__currentDefaultPath="",this.__currentPosition={},g=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(g),this.__currentElement=g},o.prototype.__applyCurrentDefaultPath=function(){var g=this.__currentElement;g.nodeName==="path"?g.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",g.nodeName)},o.prototype.__addPathCommand=function(g){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=g},o.prototype.moveTo=function(g,E){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:g,y:E},this.__addPathCommand(c("M {x} {y}",{x:g,y:E}))},o.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},o.prototype.lineTo=function(g,E){this.__currentPosition={x:g,y:E},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(c("L {x} {y}",{x:g,y:E})):this.__addPathCommand(c("M {x} {y}",{x:g,y:E}))},o.prototype.bezierCurveTo=function(g,E,w,v,C,x){this.__currentPosition={x:C,y:x},this.__addPathCommand(c("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:g,cp1y:E,cp2x:w,cp2y:v,x:C,y:x}))},o.prototype.quadraticCurveTo=function(g,E,w,v){this.__currentPosition={x:w,y:v},this.__addPathCommand(c("Q {cpx} {cpy} {x} {y}",{cpx:g,cpy:E,x:w,y:v}))};var y=function(g){var E=Math.sqrt(g[0]*g[0]+g[1]*g[1]);return[g[0]/E,g[1]/E]};o.prototype.arcTo=function(g,E,w,v,C){var x=this.__currentPosition&&this.__currentPosition.x,S=this.__currentPosition&&this.__currentPosition.y;if(x!==void 0&&S!==void 0){if(C<0)throw new Error("IndexSizeError: The radius provided ("+C+") is negative.");if(x===g&&S===E||g===w&&E===v||C===0)this.lineTo(g,E);else{var A=y([x-g,S-E]),D=y([w-g,v-E]);if(A[0]*D[1]!=A[1]*D[0]){var _=A[0]*D[0]+A[1]*D[1],M=Math.acos(Math.abs(_)),k=y([A[0]+D[0],A[1]+D[1]]),F=C/Math.sin(M/2),G=g+F*k[0],B=E+F*k[1],q=[-A[1],A[0]],R=[D[1],-D[0]],P=function(z){var ae=z[0];return z[1]>=0?Math.acos(ae):-Math.acos(ae)},N=P(q),I=P(R);this.lineTo(G+q[0]*C,B+q[1]*C),this.arc(G,B,C,N,I)}else this.lineTo(g,E)}}},o.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},o.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},o.prototype.rect=function(g,E,w,v){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(g,E),this.lineTo(g+w,E),this.lineTo(g+w,E+v),this.lineTo(g,E+v),this.lineTo(g,E),this.closePath()},o.prototype.fillRect=function(g,E,w,v){var C;C=this.__createElement("rect",{x:g,y:E,width:w,height:v},!0),this.__closestGroupOrSvg().appendChild(C),this.__currentElement=C,this.__applyStyleToCurrentElement("fill")},o.prototype.strokeRect=function(g,E,w,v){var C;C=this.__createElement("rect",{x:g,y:E,width:w,height:v},!0),this.__closestGroupOrSvg().appendChild(C),this.__currentElement=C,this.__applyStyleToCurrentElement("stroke")},o.prototype.__clearCanvas=function(){for(var g=this.__closestGroupOrSvg().getAttribute("transform"),E=this.__root.childNodes[1],w=E.childNodes,v=w.length-1;v>=0;v--)w[v]&&E.removeChild(w[v]);this.__currentElement=E,this.__groupStack=[],g&&this.__addTransform(g)},o.prototype.clearRect=function(g,E,w,v){if(g!==0||E!==0||w!==this.width||v!==this.height){var C,x=this.__closestGroupOrSvg();C=this.__createElement("rect",{x:g,y:E,width:w,height:v,fill:"#FFFFFF"},!0),x.appendChild(C)}else this.__clearCanvas()},o.prototype.createLinearGradient=function(g,E,w,v){var C=this.__createElement("linearGradient",{id:h(this.__ids),x1:g+"px",x2:w+"px",y1:E+"px",y2:v+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(C),new s(C,this)},o.prototype.createRadialGradient=function(g,E,w,v,C,x){var S=this.__createElement("radialGradient",{id:h(this.__ids),cx:v+"px",cy:C+"px",r:x+"px",fx:g+"px",fy:E+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(S),new s(S,this)},o.prototype.__parseFont=function(){var g=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),E={style:g[1]||"normal",size:g[4]||"10px",family:g[6]||"sans-serif",weight:g[3]||"normal",decoration:g[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(E.decoration="underline"),this.__fontHref&&(E.href=this.__fontHref),E},o.prototype.__wrapTextLink=function(g,E){if(g.href){var w=this.__createElement("a");return w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g.href),w.appendChild(E),w}return E},o.prototype.__applyText=function(g,E,w,v){var C,x,S=this.__parseFont(),A=this.__closestGroupOrSvg(),D=this.__createElement("text",{"font-family":S.family,"font-size":S.size,"font-style":S.style,"font-weight":S.weight,"text-decoration":S.decoration,x:E,y:w,"text-anchor":(C=this.textAlign,x={left:"start",right:"end",center:"middle",start:"start",end:"end"},x[C]||x.start),"dominant-baseline":p(this.textBaseline)},!0);D.appendChild(this.__document.createTextNode(g)),this.__currentElement=D,this.__applyStyleToCurrentElement(v),A.appendChild(this.__wrapTextLink(S,D))},o.prototype.fillText=function(g,E,w){this.__applyText(g,E,w,"fill")},o.prototype.strokeText=function(g,E,w){this.__applyText(g,E,w,"stroke")},o.prototype.measureText=function(g){return this.__ctx.font=this.font,this.__ctx.measureText(g)},o.prototype.arc=function(g,E,w,v,C,x){if(v!==C){(v%=2*Math.PI)===(C%=2*Math.PI)&&(C=(C+2*Math.PI-.001*(x?-1:1))%(2*Math.PI));var S=g+w*Math.cos(C),A=E+w*Math.sin(C),D=g+w*Math.cos(v),_=E+w*Math.sin(v),M=x?0:1,k=0,F=C-v;F<0&&(F+=2*Math.PI),k=x?F>Math.PI?0:1:F>Math.PI?1:0,this.lineTo(D,_),this.__addPathCommand(c("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:w,ry:w,xAxisRotation:0,largeArcFlag:k,sweepFlag:M,endX:S,endY:A})),this.__currentPosition={x:S,y:A}}},o.prototype.clip=function(){var g=this.__closestGroupOrSvg(),E=this.__createElement("clipPath"),w=h(this.__ids),v=this.__createElement("g");this.__applyCurrentDefaultPath(),g.removeChild(this.__currentElement),E.setAttribute("id",w),E.appendChild(this.__currentElement),this.__defs.appendChild(E),g.setAttribute("clip-path",c("url(#{id})",{id:w})),g.appendChild(v),this.__currentElement=v},o.prototype.drawImage=function(){var g,E,w,v,C,x,S,A,D,_,M,k,F,G=Array.prototype.slice.call(arguments),B=G[0],q=0,R=0;if(G.length===3)g=G[1],E=G[2],w=C=B.width,v=x=B.height;else if(G.length===5)g=G[1],E=G[2],w=G[3],v=G[4],C=B.width,x=B.height;else{if(G.length!==9)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);q=G[1],R=G[2],C=G[3],x=G[4],g=G[5],E=G[6],w=G[7],v=G[8]}S=this.__closestGroupOrSvg(),this.__currentElement;var P="translate("+g+", "+E+")";if(B instanceof o){if((A=B.getSvg().cloneNode(!0)).childNodes&&A.childNodes.length>1){for(D=A.childNodes[0];D.childNodes.length;)F=D.childNodes[0].getAttribute("id"),this.__ids[F]=F,this.__defs.appendChild(D.childNodes[0]);if(_=A.childNodes[1]){var N,I=_.getAttribute("transform");N=I?I+" "+P:P,_.setAttribute("transform",N),S.appendChild(_)}}}else B.nodeName!=="CANVAS"&&B.nodeName!=="IMG"||((M=this.__createElement("image")).setAttribute("width",w),M.setAttribute("height",v),M.setAttribute("opacity",this.globalAlpha),M.setAttribute("preserveAspectRatio","none"),(k=this.__document.createElement("canvas")).width=w,k.height=v,k.getContext("2d").drawImage(B,q,R,C,x,0,0,w,v),B=k,M.setAttribute("transform",P),M.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",B.nodeName==="CANVAS"?B.toDataURL():B.getAttribute("src")),S.appendChild(M))},o.prototype.createPattern=function(g,E){var w,v=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),C=h(this.__ids);return v.setAttribute("id",C),v.setAttribute("width",g.width),v.setAttribute("height",g.height),g.nodeName==="CANVAS"||g.nodeName==="IMG"?((w=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",g.width),w.setAttribute("height",g.height),w.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g.nodeName==="CANVAS"?g.toDataURL():g.getAttribute("src")),v.appendChild(w),this.__defs.appendChild(v)):g instanceof o&&(v.appendChild(g.__root.childNodes[1]),this.__defs.appendChild(v)),new u(v,this)},o.prototype.setLineDash=function(g){g&&g.length>0?this.lineDash=g.join(","):this.lineDash=null},o.prototype.drawFocusRing=function(){},o.prototype.createImageData=function(){},o.prototype.getImageData=function(){},o.prototype.putImageData=function(){},o.prototype.globalCompositeOperation=function(){},o.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=o),typeof r.exports=="object"&&(r.exports=o)})()}])})}(yb)),yb.exports}var F4=I4();const B4=So(F4);zn.use(tW);zn.use(iW);zn.use(T4);zn.use(P4);zn.use(O4);zn.use(B4);let wa=null;function ow(){return{initCytoscape:(n,a)=>(wa&&(wa.destroy(),wa=null),wa=zn({container:n,elements:a,style:[{selector:"node",style:{"background-color":"#e0e0e0","border-color":"#555","border-width":2,label:o=>{const s=o.data("name"),u=o.data("indices");return u?`${s}[${u}]`:s},"text-valign":"center","text-halign":"center",padding:"10px","font-size":"10px","text-wrap":"wrap","text-max-width":"80px",height:"60px",width:"60px","line-height":1.2,"border-style":"solid","z-index":10}},{selector:'node[nodeType="plate"]',style:{"background-color":"#f0f8ff","border-color":"#4682b4","border-style":"dashed",shape:"round-rectangle","corner-radius":"10px",label:o=>`for(${o.data("loopVariable")} in ${o.data("loopRange")})`}},{selector:":parent",style:{"text-valign":"top","text-halign":"center",padding:"15px","background-opacity":.2,"z-index":5}},{selector:'node[nodeType="stochastic"]',style:{"background-color":"#ffe0e0","border-color":"#dc3545",shape:"ellipse"}},{selector:'node[nodeType="deterministic"]',style:{"background-color":"#e0ffe0","border-color":"#28a745",shape:"triangle"}},{selector:'node[nodeType="constant"]',style:{"background-color":"#e9ecef","border-color":"#6c757d",shape:"rectangle"}},{selector:'node[nodeType="observed"]',style:{"background-color":"#e0f0ff","border-color":"#007bff","border-style":"dashed",shape:"ellipse"}},{selector:"node[?hasError]",style:{"border-color":"#ffc107","border-width":3,"border-style":"double"}},{selector:"edge",style:{width:3,"line-color":"#a0a0a0","target-arrow-color":"#a0a0a0","target-arrow-shape":"triangle","curve-style":"bezier","z-index":1}},{selector:"edge[name]",style:{label:"data(name)","font-size":"8px","text-rotation":"autorotate","text-background-opacity":1,"text-background-color":"#ffffff","text-background-padding":"3px","text-border-width":1,"text-border-color":"#ccc"}},{selector:'edge[relationshipType="stochastic"]',style:{"line-color":"#dc3545","target-arrow-color":"#dc3545","line-style":"dashed"}},{selector:'edge[relationshipType="deterministic"]',style:{"line-color":"#28a745","target-arrow-color":"#28a745","line-style":"solid"}},{selector:".cy-selected",style:{"border-width":3,"border-color":"#007acc","overlay-color":"#007acc","overlay-opacity":.2}},{selector:".cdnd-grabbed-node",style:{"background-color":"#f1c40f",opacity:.7}},{selector:".cdnd-drop-target",style:{"border-color":"#f1c40f","border-style":"solid"}}],layout:{name:"preset"},minZoom:.1,maxZoom:2,boxSelectionEnabled:!0,wheelSensitivity:.2,autounselectify:!1}),wa.compoundDragAndDrop({grabbedNode:o=>o.data("nodeType")!=="plate",dropTarget:o=>o.data("nodeType")==="plate",dropSibling:()=>!1,outThreshold:50}),wa.gridGuide({drawGrid:!1,snapToGridOnRelease:!0,snapToGridDuringDrag:!0,gridSpacing:20}),wa.contextMenus({menuItems:[{id:"remove",content:"Remove",selector:"node, edge",onClickFunction:o=>{var u;const s=o.target;(u=s.cy().container())==null||u.dispatchEvent(new CustomEvent("cxt-remove",{detail:{elementId:s.id()}}))}}]}),wa),destroyCytoscape:n=>{n&&(n.destroy(),wa=null)},getCyInstance:()=>wa}}function q4(t){const e=bt(!1),r=bt(20),n=Gt(()=>`${r.value}px`),a=()=>{const u=t();if(u){const f=u.container();f&&(e.value&&r.value>0?(f.classList.add("grid-background"),f.style.setProperty("--grid-size",n.value)):(f.classList.remove("grid-background"),f.style.removeProperty("--grid-size")))}},i=()=>{e.value=!0,a()},o=()=>{e.value=!1,a()},s=u=>{r.value=u,e.value&&a()};return wr([e,r],a),{isGridEnabledRef:e,gridSizeRef:r,cssGridSize:n,enableGridSnapping:i,disableGridSnapping:o,setGridSize:s}}const z4=Dr({__name:"GraphCanvas",props:{elements:{},isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},validationErrors:{}},emits:["canvas-tap","node-moved","node-dropped","plate-emptied","element-remove"],setup(t,{emit:e}){const r=t,n=e,a=bt(null);let i=null;const{initCytoscape:o,destroyCytoscape:s,getCyInstance:u}=ow(),{enableGridSnapping:f,disableGridSnapping:c,setGridSize:h}=q4(u),p=["stochastic","deterministic","constant","observed","plate"],y=(g,E)=>g.map(w=>{if(w.type==="node"){const v=w,C=E.has(v.id);return{group:"nodes",data:{...v,hasError:C},position:v.position}}else{const v=w,C=g.find(S=>S.id===v.target&&S.type==="node"),x=(C==null?void 0:C.nodeType)==="stochastic"||(C==null?void 0:C.nodeType)==="observed"?"stochastic":"deterministic";return{group:"edges",data:{...v,relationshipType:x}}}});return La(()=>{var g;a.value&&(i=o(a.value,[]),h(r.gridSize),r.isGridEnabled?f():c(),(g=i.container())==null||g.addEventListener("cxt-remove",E=>{const w=E;w.detail.elementId&&n("element-remove",w.detail.elementId)}),i.on("tap",E=>{n("canvas-tap",E)}),i.on("cdnddrop","node",(E,w)=>{const v=E.target,C=w?w.id():void 0,x=r.elements.find(S=>S.id===v.id()&&S.type==="node");if(x&&x.parent&&x.parent!==C){const S=x.parent;r.elements.find(D=>D.id===S&&D.type==="node"&&D.nodeType==="plate")&&r.elements.filter(_=>_.type==="node"&&_.parent===S).length===1&&n("plate-emptied",S)}n("node-moved",{nodeId:v.id(),position:v.position(),parentId:C})}),i.on("tap","node, edge",E=>{i==null||i.elements().removeClass("cy-selected"),E.target.addClass("cy-selected")}),i.on("tap",E=>{E.target===i&&(i==null||i.elements().removeClass("cy-selected"))}),a.value.addEventListener("dragover",E=>{E.preventDefault(),E.dataTransfer&&(E.dataTransfer.dropEffect="copy")}),a.value.addEventListener("drop",E=>{var w;if(E.preventDefault(),E.dataTransfer){const v=E.dataTransfer.getData("text/plain");if(p.includes(v)){const C=(w=a.value)==null?void 0:w.getBoundingClientRect();if(C&&i){const x=E.clientX,S=E.clientY,A={x:x-C.left,y:S-C.top},D=i.panzoom().renderedPositionToModelPosition(A);n("node-dropped",{nodeType:v,position:D})}}}}))}),Da(()=>{i&&s(i)}),wr(()=>r.isGridEnabled,g=>{g?f():c()}),wr(()=>r.gridSize,g=>{h(g),r.isGridEnabled&&f()}),wr([()=>r.elements,()=>r.validationErrors],([g,E])=>{if(!i)return;const w=y(g,E);i.batch(()=>{const v=new Set(g.map(C=>C.id));i.elements().forEach(C=>{v.has(C.id())||C.remove()}),w.forEach(C=>{if(!C.data.id)return;const x=i.getElementById(C.data.id);if(x.empty())i.add(C);else if(x.data(C.data),C.group==="nodes"){const S=C,A=x.position();(S.position.x!==A.x||S.position.y!==A.y)&&x.position(S.position);const D=x.parent(),_=D.length>0?D.first().id():void 0;S.data.parent!==_&&x.move({parent:S.data.parent??null})}})})},{deep:!0,immediate:!0}),(g,E)=>(rt(),ut("div",{ref_key:"cyContainer",ref:a,class:Kt(["cytoscape-container",{"grid-background":g.isGridEnabled&&g.gridSize>0,"mode-add-node":g.currentMode==="add-node","mode-add-edge":g.currentMode==="add-edge","mode-select":g.currentMode==="select"}]),style:Ci({"--grid-size":`${g.gridSize}px`})},null,6))}}),Kr=(t,e)=>{const r=t.__vccOpts||t;for(const[n,a]of e)r[n]=a;return r},G4=Kr(z4,[["__scopeId","data-v-8beedf84"]]),H4=["disabled"],U4=Dr({__name:"BaseButton",props:{type:{},size:{},disabled:{type:Boolean}},setup(t){const e=t,r=Gt(()=>({"base-button":!0,[`button-${e.type||"default"}`]:!0,[`button-${e.size||"medium"}`]:!0,"button-disabled":e.disabled}));return(n,a)=>(rt(),ut("button",{class:Kt(r.value),disabled:n.disabled},[gs(n.$slots,"default",{},void 0,!0)],10,H4))}}),Xt=Kr(U4,[["__scopeId","data-v-320dead9"]]),Jb=[{value:"dnorm",label:"Normal (dnorm)",paramCount:2,paramNames:["mean","precision"]},{value:"dgamma",label:"Gamma (dgamma)",paramCount:2,paramNames:["shape","rate"]},{value:"dbeta",label:"Beta (dbeta)",paramCount:2,paramNames:["shape1","shape2"]},{value:"dbin",label:"Binomial (dbin)",paramCount:2,paramNames:["prob","size"]},{value:"dpois",label:"Poisson (dpois)",paramCount:1,paramNames:["lambda"]},{value:"dt",label:"Student-t (dt)",paramCount:3,paramNames:["mu","tau","k"]},{value:"dunif",label:"Uniform (dunif)",paramCount:2,paramNames:["lower","upper"]}],id=[{nodeType:"stochastic",label:"Stochastic",icon:"~",description:"Random variable with a distribution",styleClass:"stochastic",properties:[{key:"name",label:"Name",type:"text",defaultValue:"stochastic_node"},{key:"distribution",label:"Distribution (~)",type:"select",defaultValue:"dnorm",options:Jb},{key:"observed",label:"Observed",type:"checkbox",defaultValue:!1,helpText:"If checked, this node's value is provided in the data section."},{key:"indices",label:"Indices",type:"text",placeholder:"e.g., i,j or 1:N",defaultValue:""}],parameters:[{key:"param1",label:"Parameter 1",type:"text",defaultValue:""},{key:"param2",label:"Parameter 2",type:"text",defaultValue:""},{key:"param3",label:"Parameter 3",type:"text",defaultValue:""}]},{nodeType:"deterministic",label:"Deterministic",icon:"<-",description:"Logical function of parents",styleClass:"deterministic",properties:[{key:"name",label:"Name",type:"text",defaultValue:"logical_node"},{key:"equation",label:"Equation (<-)",type:"text",placeholder:"e.g., a + b * x",defaultValue:""},{key:"indices",label:"Indices",type:"text",placeholder:"e.g., i,j",defaultValue:""}]},{nodeType:"constant",label:"Constant",icon:"C",description:"A fixed value or data input",styleClass:"constant",properties:[{key:"name",label:"Name",type:"text",defaultValue:"constant_node"}]},{nodeType:"observed",label:"Observed",icon:"O",description:"A data node with a fixed value",styleClass:"observed",properties:[{key:"name",label:"Name",type:"text",defaultValue:"observed_node"},{key:"distribution",label:"Distribution (~)",type:"select",defaultValue:"dnorm",options:Jb},{key:"observed",label:"Observed",type:"checkbox",defaultValue:!0},{key:"indices",label:"Indices",type:"text",placeholder:"e.g., i,j or 1:N",defaultValue:""}],parameters:[{key:"param1",label:"Parameter 1",type:"text",defaultValue:""},{key:"param2",label:"Parameter 2",type:"text",defaultValue:""},{key:"param3",label:"Parameter 3",type:"text",defaultValue:""}]},{nodeType:"plate",label:"Plate",icon:"[]",description:"Represents a loop structure",styleClass:"plate",properties:[{key:"name",label:"Name",type:"text",defaultValue:"Plate"},{key:"loopVariable",label:"Loop Variable",type:"text",placeholder:"e.g., i",defaultValue:"i"},{key:"loopRange",label:"Loop Range",type:"text",placeholder:"e.g., 1:N",defaultValue:"1:N"}]}],AO=t=>id.find(e=>e.nodeType===t),LO=t=>Jb.find(e=>e.value===t),V4=t=>{const e=AO(t);if(!e)return{};const r={};return e.properties.forEach(n=>{r[n.key]=n.defaultValue}),e.parameters&&e.parameters.forEach(n=>{r[n.key]=n.defaultValue}),r},W4={class:"canvas-toolbar"},$4={key:0,class:"node-type-selector"},Y4=["value"],X4=["value"],K4={key:1,class:"connecting-message"},j4=Dr({__name:"CanvasToolbar",props:{currentMode:{},currentNodeType:{},isConnecting:{type:Boolean},sourceNodeName:{}},emits:["update:currentMode","update:currentNodeType"],setup(t,{emit:e}){const r=e,n=Gt(()=>id.map(o=>({label:o.label,value:o.nodeType}))),a=o=>{r("update:currentMode",o)},i=o=>{const s=o.target;r("update:currentNodeType",s.value)};return(o,s)=>(rt(),ut("div",W4,[st(Xt,{class:Kt({active:o.currentMode==="select"}),onClick:s[0]||(s[0]=u=>a("select"))},{default:ct(()=>s[3]||(s[3]=[Et(" Select ")])),_:1,__:[3]},8,["class"]),st(Xt,{class:Kt({active:o.currentMode==="add-node"}),onClick:s[1]||(s[1]=u=>a("add-node"))},{default:ct(()=>s[4]||(s[4]=[Et(" Add Node ")])),_:1,__:[4]},8,["class"]),st(Xt,{class:Kt({active:o.currentMode==="add-edge"}),onClick:s[2]||(s[2]=u=>a("add-edge"))},{default:ct(()=>s[5]||(s[5]=[Et(" Add Edge ")])),_:1,__:[5]},8,["class"]),o.currentMode==="add-node"?(rt(),ut("div",$4,[s[6]||(s[6]=Me("label",{for:"node-type"},"Node Type:",-1)),Me("select",{id:"node-type",value:o.currentNodeType,onChange:i},[(rt(!0),ut(zt,null,Bn(n.value,u=>(rt(),ut("option",{key:u.value,value:u.value},ur(u.label),9,X4))),128))],40,Y4)])):br("",!0),o.isConnecting?(rt(),ut("span",K4,[s[7]||(s[7]=Et(" Connecting from: ")),Me("strong",null,ur(o.sourceNodeName),1),s[8]||(s[8]=Et(" (Click target node) "))])):br("",!0)]))}}),Z4=Kr(j4,[["__scopeId","data-v-e6df3305"]]),yf=`{
  "data": {
    "N": 30,
    "T": 5,
    "x": [8.0, 15.0, 22.0, 29.0, 36.0],
    "xbar": 22
  },
  "inits": {
    "alpha": "fill(250.0, 30)",
    "beta": "fill(6.0, 30)"
  }
}`,od=Ec("data",()=>{const t=Mo(),e=bt(new Map),r=Gt({get:()=>{const s=t.currentGraphId;if(s&&e.value.has(s))return e.value.get(s);if(s){const u=localStorage.getItem(`doodlebugs-data-${s}`);return u?(e.value.set(s,u),u):(e.value.set(s,yf),yf)}return yf},set:s=>{const u=t.currentGraphId;u&&a(u,s)}}),n=bt({data:{},inits:{}});wr(r,s=>{try{n.value=JSON.parse(s)}catch{n.value={data:{},inits:{}}}},{immediate:!0});const a=(s,u)=>{e.value.set(s,u),localStorage.setItem(`doodlebugs-data-${s}`,u)};return{currentGraphDataString:r,parsedGraphData:n,createNewGraphData:s=>{a(s,yf)},deleteGraphData:s=>{e.value.delete(s),localStorage.removeItem(`doodlebugs-data-${s}`)}}}),Mo=Ec("graph",()=>{const t=od(),e=bt(new Map),r=bt(localStorage.getItem("doodlebugs-currentGraphId")||null);wr(r,c=>{c?localStorage.setItem("doodlebugs-currentGraphId",c):localStorage.removeItem("doodlebugs-currentGraphId")});const n=Gt(()=>r.value&&e.value.has(r.value)?e.value.get(r.value).elements:[]),a=c=>{r.value=c,c&&!e.value.has(c)&&f(c)},i=c=>{const h={graphId:c,elements:[]};e.value.set(c,h),u(c,h),t.createNewGraphData(c)},o=(c,h)=>{if(e.value.has(c)){const p=e.value.get(c);p.elements=h,u(c,p)}},s=c=>{e.value.delete(c),localStorage.removeItem(`doodlebugs-graph-${c}`),t.deleteGraphData(c),r.value===c&&a(null)},u=(c,h)=>{localStorage.setItem(`doodlebugs-graph-${c}`,JSON.stringify(h))},f=c=>{const h=localStorage.getItem(`doodlebugs-graph-${c}`);if(h){const p=JSON.parse(h);return e.value.set(c,p),p}return null};return{graphContents:e,currentGraphId:r,currentGraphElements:n,selectGraph:a,createNewGraphContent:i,updateGraphElements:o,deleteGraphContent:s,saveGraph:u,loadGraph:f}});function sw(){const t=Mo(),e=bt(null),r=Gt({get:()=>t.currentGraphElements,set:o=>{t.currentGraphId&&t.updateGraphElements(t.currentGraphId,o)}}),n=o=>{r.value=[...r.value,o],e.value=o},a=o=>{var s;r.value=r.value.map(u=>u.id===o.id?o:u),((s=e.value)==null?void 0:s.id)===o.id&&(e.value=o)},i=o=>{const s=r.value.find(h=>h.id===o);if(!s)return;const u=s.type==="node"?s.parent:void 0,f=new Set([o]);if(s.type==="node"&&s.nodeType==="plate"){const h=p=>{r.value.forEach(y=>{y.type==="node"&&y.parent===p&&(f.add(y.id),y.nodeType==="plate"&&h(y.id))})};h(o)}const c=new Set;if(f.forEach(h=>{const p=r.value.find(y=>y.id===h);(p==null?void 0:p.type)==="node"&&c.add(h)}),r.value.forEach(h=>{h.type==="edge"&&(c.has(h.source)||c.has(h.target))&&f.add(h.id)}),r.value=r.value.filter(h=>!f.has(h.id)),e.value&&f.has(e.value.id)&&(e.value=null),u){const h=r.value.find(p=>p.id===u);h&&h.type==="node"&&h.nodeType==="plate"&&(r.value.some(y=>y.type==="node"&&y.parent===u)||i(u))}};return{elements:r,selectedElement:e,addElement:n,updateElement:a,deleteElement:i}}const Q4={class:"graph-editor-container"},J4=Dr({__name:"GraphEditor",props:{isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},currentNodeType:{},elements:{},validationErrors:{}},emits:["element-selected","update:currentMode","update:currentNodeType"],setup(t,{emit:e}){const r=t,n=e,{elements:a,addElement:i,updateElement:o,deleteElement:s}=sw(),{getCyInstance:u}=ow(),f=bt(null),c=bt(!1),h=["alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega"],p=()=>{const S=new Set(a.value.filter(D=>D.type==="node").map(D=>D.name));for(const D of h)if(!S.has(D))return D;let A=1;for(;;){const D=`var_${A}`;if(!S.has(D))return D;A++}},y=(S,A,D)=>{const _=V4(S),M=`node_${crypto.randomUUID().substring(0,8)}`,k=S==="plate"?"Plate":p();return{..._,id:M,type:"node",nodeType:S,position:A,parent:D,name:k}},g=(S,A)=>{const D=y("plate",S,A),_=y("stochastic",{x:S.x,y:S.y},D.id);return a.value=[...a.value,D,_],D},E=S=>{var B,q;const{position:A,target:D}=S,_=u();if(!_)return;const M=D===_,k=!M&&D.isNode()&&D.data("nodeType")==="plate",F=!M&&D.isNode(),G=!M&&D.isEdge();switch(r.currentMode){case"add-node":if(M||k)if(r.currentNodeType==="plate"){if(k){alert("Nesting plates is not currently supported.");return}const R=g(A,k?D.id():void 0);n("element-selected",R),n("update:currentMode","select")}else{const R=y(r.currentNodeType,A,k?D.id():void 0);i(R),n("element-selected",R),n("update:currentMode","select")}break;case"add-edge":if(F){const R=D;if(f.value&&f.value.id()!==R.id()){const P={id:`edge_${crypto.randomUUID().substring(0,8)}`,type:"edge",source:f.value.id(),target:R.id(),name:`Edge ${f.value.data("name")} -> ${R.data("name")}`};i(P),(B=f.value)==null||B.removeClass("cy-connecting"),f.value=null,c.value=!1,n("update:currentMode","select"),n("element-selected",P)}else f.value||(f.value=R,f.value.addClass("cy-connecting"),c.value=!0,n("element-selected",f.value.data()))}else M&&((q=f.value)==null||q.removeClass("cy-connecting"),f.value=null,c.value=!1,n("element-selected",null));break;default:F||G?n("element-selected",D.data()):M&&n("element-selected",null);break}},w=S=>{const A=a.value.find(D=>D.id===S.nodeId);if(A){const D={...A,position:S.position,parent:S.parentId};o(D)}},v=S=>{const{nodeType:A,position:D}=S,_=u();let M;if(A==="plate"){if(_){const G=_.nodes('[nodeType="plate"]');for(const B of G){const q=B.boundingBox();if(D.x>q.x1&&D.x<q.x2&&D.y>q.y1&&D.y<q.y2){alert("Nesting plates is not currently supported.");return}}}const F=g(D);n("element-selected",F),n("update:currentMode","select");return}if(_){const F=_.nodes('[nodeType="plate"]');for(const G of F){const B=G.boundingBox();if(D.x>B.x1&&D.x<B.x2&&D.y>B.y1&&D.y<B.y2){M=G.id();break}}}const k=y(A,D,M);i(k),n("element-selected",k),n("update:currentMode","select")},C=S=>{s(S)},x=S=>{s(S)};return wr(()=>r.currentMode,S=>{var A;S!=="add-edge"&&((A=f.value)==null||A.removeClass("cy-connecting"),f.value=null,c.value=!1)}),(S,A)=>{var D;return rt(),ut("div",Q4,[st(Z4,{"current-mode":r.currentMode,"current-node-type":r.currentNodeType,"onUpdate:currentMode":A[0]||(A[0]=_=>n("update:currentMode",_)),"onUpdate:currentNodeType":A[1]||(A[1]=_=>n("update:currentNodeType",_)),"is-connecting":c.value,"source-node-name":(D=f.value)==null?void 0:D.data("name")},null,8,["current-mode","current-node-type","is-connecting","source-node-name"]),st(G4,{elements:r.elements,"is-grid-enabled":S.isGridEnabled,"grid-size":S.gridSize,"current-mode":r.currentMode,"validation-errors":r.validationErrors,onCanvasTap:E,onNodeMoved:w,onNodeDropped:v,onPlateEmptied:C,onElementRemove:x},null,8,["elements","is-grid-enabled","grid-size","current-mode","validation-errors"])])}}}),e9=Kr(J4,[["__scopeId","data-v-33b894fc"]]),DO=Ec("project",()=>{const t=bt([]),e=bt(localStorage.getItem("doodlebugs-currentProjectId")||null),r=Mo(),n=g=>{const E={id:`project_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,name:g,createdAt:Date.now(),lastModified:Date.now(),graphs:[]};t.value.push(E),p(),i(E.id)},a=(g,E)=>{const w=t.value.find(v=>v.id===g);w&&E.trim()&&(w.name=E.trim(),w.lastModified=Date.now(),p())},i=g=>{e.value=g,g?localStorage.setItem("doodlebugs-currentProjectId",g):localStorage.removeItem("doodlebugs-currentProjectId")},o=g=>{const E=t.value.find(w=>w.id===g);E&&(E.graphs.forEach(w=>{r.deleteGraphContent(w.id)}),t.value=t.value.filter(w=>w.id!==g),e.value===g&&i(null),p())},s=Gt(()=>t.value.find(g=>g.id===e.value)||null),u=(g,E)=>{const w=t.value.find(v=>v.id===g);if(w){const v={id:`graph_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,name:E,createdAt:Date.now(),lastModified:Date.now()};return w.graphs.push(v),w.lastModified=Date.now(),p(),r.createNewGraphContent(v.id),r.selectGraph(v.id),v}},f=(g,E,w)=>{const v=t.value.find(C=>C.id===g);if(v&&w.trim()){const C=v.graphs.find(x=>x.id===E);C&&(C.name=w.trim(),C.lastModified=Date.now(),v.lastModified=Date.now(),p())}},c=(g,E)=>{const w=t.value.find(v=>v.id===g);w&&(w.graphs=w.graphs.filter(v=>v.id!==E),w.lastModified=Date.now(),p(),r.deleteGraphContent(E))},h=g=>{var E;return((E=t.value.find(w=>w.id===g))==null?void 0:E.graphs)||[]},p=()=>{localStorage.setItem("doodlebugs-projects",JSON.stringify(t.value))};return{projects:t,currentProjectId:e,currentProject:s,createProject:n,renameProject:a,selectProject:i,deleteProject:o,addGraphToProject:u,renameGraphInProject:f,deleteGraphFromProject:c,getGraphsForProject:h,loadProjects:()=>{const g=localStorage.getItem("doodlebugs-projects");g&&(t.value=JSON.parse(g)),e.value&&!t.value.some(E=>E.id===e.value)&&i(null)}}}),t9={class:"modal-content",role:"dialog","aria-modal":"true"},r9={key:0,class:"modal-header"},n9={key:1,class:"modal-body"},a9={key:2,class:"modal-footer"},Ni=Dr({__name:"BaseModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const r=e,n=a=>{a.key==="Escape"&&r("close")};return La(()=>{document.addEventListener("keydown",n)}),Da(()=>{document.removeEventListener("keydown",n)}),(a,i)=>(rt(),ua(g1,{name:"modal-fade"},{default:ct(()=>[a.isOpen?(rt(),ut("div",{key:0,class:"modal-overlay",onClick:i[0]||(i[0]=Ur(o=>r("close"),["self"]))},[Me("div",t9,[a.$slots.header?(rt(),ut("header",r9,[gs(a.$slots,"header")])):br("",!0),a.$slots.body?(rt(),ut("section",n9,[gs(a.$slots,"body")])):br("",!0),a.$slots.footer?(rt(),ut("footer",a9,[gs(a.$slots,"footer")])):br("",!0)])])):br("",!0)]),_:3}))}}),i9=["type","value","placeholder","disabled","readonly"],o9=Dr({__name:"BaseInput",props:{modelValue:{},type:{},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean}},emits:["update:modelValue","change","input","keyup.enter"],setup(t,{emit:e}){const r=t,n=e,a=Gt(()=>r.type||"text"),i=u=>{const f=u.target;n("update:modelValue",f.value),n("input",u)},o=u=>{n("change",u)},s=u=>{u.key==="Enter"&&n("keyup.enter",u)};return(u,f)=>(rt(),ut("input",{type:a.value,value:u.modelValue??"",placeholder:u.placeholder,disabled:u.disabled,readonly:u.readonly,onInput:i,onChange:o,onKeyup:s,class:"base-input"},null,40,i9))}}),aa=Kr(o9,[["__scopeId","data-v-6905db26"]]),s9={class:"project-manager"},l9={class:"header"},u9={key:0,class:"empty-state"},f9={key:1,class:"project-list"},c9=["onClick"],d9={class:"project-name"},h9=["onClick"],v9={key:0,class:"graph-list"},p9=["onClick"],g9=["onClick"],y9={key:0,class:"empty-state-inner"},m9={key:0},b9={key:0},w9=Dr({__name:"ProjectManager",emits:["newProject","newGraph"],setup(t,{emit:e}){const r=DO(),n=Mo(),a=bt(!1),i=bt(null),o=bt(!1),s=bt(null),u=bt(""),f=bt(null),c=bt(null),h=Gt(()=>r.currentProject),p=Gt(()=>h.value?r.getGraphsForProject(h.value.id):[]),y=_=>{c.value&&!c.value.contains(_.target)&&(f.value=null)};La(()=>{r.loadProjects(),r.projects.length>0&&!r.currentProjectId&&r.selectProject(r.projects[0].id),document.addEventListener("click",y)}),Da(()=>{document.removeEventListener("click",y)});const g=_=>{n.selectGraph(_)},E=async(_,M,k)=>{_.stopPropagation(),_.preventDefault(),f.value=null,await nu(),f.value={type:M,id:k,x:_.clientX,y:_.clientY}},w=(_,M,k,F)=>{i.value={type:_,id:M,name:k,projectId:F},a.value=!0,f.value=null},v=()=>{i.value&&(i.value.type==="project"?r.deleteProject(i.value.id):i.value.type==="graph"&&i.value.projectId&&(r.deleteGraphFromProject(i.value.projectId,i.value.id),n.currentGraphId===i.value.id&&n.selectGraph(null)),a.value=!1,i.value=null)},C=(_,M,k,F)=>{s.value={type:_,id:M,name:k,projectId:F},u.value=k,o.value=!0,f.value=null},x=()=>{s.value&&u.value.trim()&&(s.value.type==="project"?r.renameProject(s.value.id,u.value):s.value.type==="graph"&&s.value.projectId&&r.renameGraphInProject(s.value.projectId,s.value.id,u.value)),o.value=!1,s.value=null,u.value=""},S=e,A=()=>{S("newProject"),f.value=null},D=()=>{S("newGraph"),f.value=null};return(_,M)=>(rt(),ut("div",s9,[Me("div",l9,[M[10]||(M[10]=Me("h4",null,"Projects",-1)),st(Xt,{onClick:A,type:"primary",size:"small",class:"add-project-btn",title:"New Project"},{default:ct(()=>M[9]||(M[9]=[Me("i",{class:"fas fa-plus"},null,-1)])),_:1,__:[9]})]),Vt(r).projects.length===0?(rt(),ut("div",u9,[M[12]||(M[12]=Me("p",null,"No projects yet.",-1)),st(Xt,{onClick:A,type:"primary"},{default:ct(()=>M[11]||(M[11]=[Et("Create New Project")])),_:1,__:[11]})])):(rt(),ut("div",f9,[(rt(!0),ut(zt,null,Bn(Vt(r).projects,k=>(rt(),ut("div",{key:k.id,class:"project-item"},[Me("div",{class:Kt(["project-header",{active:Vt(r).currentProjectId===k.id}]),onClick:F=>Vt(r).selectProject(k.id)},[Me("i",{class:Kt(["icon-chevron fas fa-chevron-right",{open:Vt(r).currentProjectId===k.id}])},null,2),M[14]||(M[14]=Me("i",{class:"icon-folder fas fa-folder"},null,-1)),Me("span",d9,ur(k.name),1),Me("button",{onClick:F=>E(F,"project",k.id),class:"context-menu-btn"},M[13]||(M[13]=[Me("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,h9)],10,c9),st(g1,{name:"slide-fade"},{default:ct(()=>{var F;return[((F=Vt(r).currentProject)==null?void 0:F.id)===k.id?(rt(),ut("div",v9,[(rt(!0),ut(zt,null,Bn(p.value,G=>(rt(),ut("div",{key:G.id,class:Kt(["graph-item",{active:Vt(n).currentGraphId===G.id}]),onClick:B=>g(G.id)},[M[16]||(M[16]=Me("i",{class:"icon-file fas fa-file-alt"},null,-1)),Me("span",null,ur(G.name),1),Me("button",{onClick:B=>E(B,"graph",G.id),class:"context-menu-btn"},M[15]||(M[15]=[Me("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,g9)],10,p9))),128)),p.value.length===0?(rt(),ut("div",y9,[M[18]||(M[18]=Me("p",null,"No graphs in this project.",-1)),st(Xt,{onClick:D,type:"secondary",size:"small"},{default:ct(()=>M[17]||(M[17]=[Et("Create New Graph")])),_:1,__:[17]})])):br("",!0)])):br("",!0)]}),_:2},1024)]))),128))])),f.value?(rt(),ut("div",{key:2,ref_key:"contextMenuRef",ref:c,class:"context-menu",style:Ci({top:`${f.value.y}px`,left:`${f.value.x}px`})},[f.value.type==="project"?(rt(),ut(zt,{key:0},[Me("div",{class:"context-menu-item",onClick:D},M[19]||(M[19]=[Me("i",{class:"fas fa-plus"},null,-1),Et(" New Graph")])),Me("div",{class:"context-menu-item",onClick:M[0]||(M[0]=k=>C("project",f.value.id,Vt(r).projects.find(F=>F.id===f.value.id).name))},M[20]||(M[20]=[Me("i",{class:"fas fa-edit"},null,-1),Et(" Rename")])),Me("div",{class:"context-menu-item danger",onClick:M[1]||(M[1]=k=>w("project",f.value.id,Vt(r).projects.find(F=>F.id===f.value.id).name))},M[21]||(M[21]=[Me("i",{class:"fas fa-trash-alt"},null,-1),Et(" Delete Project")]))],64)):br("",!0),f.value.type==="graph"?(rt(),ut(zt,{key:1},[Me("div",{class:"context-menu-item",onClick:M[2]||(M[2]=k=>C("graph",f.value.id,p.value.find(F=>F.id===f.value.id).name,h.value.id))},M[22]||(M[22]=[Me("i",{class:"fas fa-edit"},null,-1),Et(" Rename")])),Me("div",{class:"context-menu-item danger",onClick:M[3]||(M[3]=k=>w("graph",f.value.id,p.value.find(F=>F.id===f.value.id).name,h.value.id))},M[23]||(M[23]=[Me("i",{class:"fas fa-trash-alt"},null,-1),Et(" Delete Graph")]))],64)):br("",!0)],4)):br("",!0),st(Ni,{"is-open":a.value,onClose:M[5]||(M[5]=k=>a.value=!1)},{header:ct(()=>M[24]||(M[24]=[Me("h3",null,"Confirm Deletion",-1)])),body:ct(()=>[i.value?(rt(),ut("p",m9,[Et(" Are you sure you want to delete the "+ur(i.value.type)+" ",1),Me("strong",null,'"'+ur(i.value.name)+'"',1),M[25]||(M[25]=Et("? ")),i.value.type==="project"?(rt(),ut("span",b9,"This will also delete all of its graphs.")):br("",!0),M[26]||(M[26]=Et(" This action cannot be undone. "))])):br("",!0)]),footer:ct(()=>[st(Xt,{onClick:M[4]||(M[4]=k=>a.value=!1),type:"secondary"},{default:ct(()=>M[27]||(M[27]=[Et("Cancel")])),_:1,__:[27]}),st(Xt,{onClick:v,type:"danger"},{default:ct(()=>M[28]||(M[28]=[Et("Delete")])),_:1,__:[28]})]),_:1},8,["is-open"]),st(Ni,{"is-open":o.value,onClose:M[8]||(M[8]=k=>o.value=!1)},{header:ct(()=>{var k;return[Me("h3",null,"Rename "+ur((k=s.value)==null?void 0:k.type),1)]}),body:ct(()=>{var k;return[M[29]||(M[29]=Me("label",{for:"new-item-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"New Name:",-1)),st(aa,{id:"new-item-name",modelValue:u.value,"onUpdate:modelValue":M[6]||(M[6]=F=>u.value=F),placeholder:`Enter new ${(k=s.value)==null?void 0:k.type} name`,onKeyup:_b(x,["enter"])},null,8,["modelValue","placeholder"])]}),footer:ct(()=>[st(Xt,{onClick:M[7]||(M[7]=k=>o.value=!1),type:"secondary"},{default:ct(()=>M[30]||(M[30]=[Et("Cancel")])),_:1,__:[30]}),st(Xt,{onClick:x,type:"primary"},{default:ct(()=>M[31]||(M[31]=[Et("Rename")])),_:1,__:[31]})]),_:1},8,["is-open"])]))}}),x9=Kr(w9,[["__scopeId","data-v-0240cdfe"]]),C9={class:"node-palette"},E9={class:"palette-section"},T9={class:"palette-grid"},S9=["onDragstart","onClick","title"],A9={class:"card-label"},L9={class:"palette-section"},D9={class:"palette-grid"},_9=["onDragstart","onClick","title"],M9={class:"card-label"},R9=Dr({__name:"NodePalette",emits:["select-palette-item"],setup(t,{emit:e}){const r=e,n=[{label:"Add Edge",type:"add-edge",styleClass:"connection",description:"Connect two nodes"}],a=(o,s)=>{o.dataTransfer&&(o.dataTransfer.setData("text/plain",s),o.dataTransfer.effectAllowed="copy")},i=o=>{r("select-palette-item",o)};return(o,s)=>(rt(),ut("div",C9,[Me("div",E9,[s[0]||(s[0]=Me("h5",{class:"section-title"},"Nodes",-1)),Me("div",T9,[(rt(!0),ut(zt,null,Bn(Vt(id),u=>(rt(),ut("div",{key:u.nodeType,class:Kt(["palette-card",u.styleClass]),draggable:"true",onDragstart:f=>a(f,u.nodeType),onClick:f=>i(u.nodeType),title:u.description},[Me("div",{class:Kt(["card-icon",`icon-${u.nodeType}`])},ur(u.icon),3),Me("span",A9,ur(u.label),1)],42,S9))),128))])]),Me("div",L9,[s[2]||(s[2]=Me("h5",{class:"section-title"},"Connections",-1)),Me("div",D9,[(rt(),ut(zt,null,Bn(n,u=>Me("div",{key:u.type,class:Kt(["palette-card",u.styleClass]),draggable:"true",onDragstart:f=>a(f,u.type),onClick:f=>i(u.type),title:u.description},[s[1]||(s[1]=Me("div",{class:"card-icon connection-icon"},null,-1)),Me("span",M9,ur(u.label),1)],42,_9)),64))])])]))}}),P9=Kr(R9,[["__scopeId","data-v-bfe4f53a"]]);var nR={exports:{}},Ff={exports:{}},k9=Ff.exports,aR;function Hi(){return aR||(aR=1,function(t,e){(function(r,n){t.exports=n()})(k9,function(){var r=navigator.userAgent,n=navigator.platform,a=/gecko\/\d/i.test(r),i=/MSIE \d/.test(r),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),s=/Edge\/(\d+)/.exec(r),u=i||o||s,f=u&&(i?document.documentMode||6:+(s||o)[1]),c=!s&&/WebKit\//.test(r),h=c&&/Qt\/\d+\.\d+/.test(r),p=!s&&/Chrome\/(\d+)/.exec(r),y=p&&+p[1],g=/Opera\//.test(r),E=/Apple Computer/.test(navigator.vendor),w=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),v=/PhantomJS/.test(r),C=E&&(/Mobile\/\w+/.test(r)||navigator.maxTouchPoints>2),x=/Android/.test(r),S=C||x||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),A=C||/Mac/.test(n),D=/\bCrOS\b/.test(r),_=/win/i.test(n),M=g&&r.match(/Version\/(\d*\.\d*)/);M&&(M=Number(M[1])),M&&M>=15&&(g=!1,c=!0);var k=A&&(h||g&&(M==null||M<12.11)),F=a||u&&f>=9;function G(l){return new RegExp("(^|\\s)"+l+"(?:$|\\s)\\s*")}var B=function(l,d){var b=l.className,m=G(d).exec(b);if(m){var T=b.slice(m.index+m[0].length);l.className=b.slice(0,m.index)+(T?m[1]+T:"")}};function q(l){for(var d=l.childNodes.length;d>0;--d)l.removeChild(l.firstChild);return l}function R(l,d){return q(l).appendChild(d)}function P(l,d,b,m){var T=document.createElement(l);if(b&&(T.className=b),m&&(T.style.cssText=m),typeof d=="string")T.appendChild(document.createTextNode(d));else if(d)for(var L=0;L<d.length;++L)T.appendChild(d[L]);return T}function N(l,d,b,m){var T=P(l,d,b,m);return T.setAttribute("role","presentation"),T}var I;document.createRange?I=function(l,d,b,m){var T=document.createRange();return T.setEnd(m||l,b),T.setStart(l,d),T}:I=function(l,d,b){var m=document.body.createTextRange();try{m.moveToElementText(l.parentNode)}catch{return m}return m.collapse(!0),m.moveEnd("character",b),m.moveStart("character",d),m};function z(l,d){if(d.nodeType==3&&(d=d.parentNode),l.contains)return l.contains(d);do if(d.nodeType==11&&(d=d.host),d==l)return!0;while(d=d.parentNode)}function ae(l){var d=l.ownerDocument||l,b;try{b=l.activeElement}catch{b=d.body||null}for(;b&&b.shadowRoot&&b.shadowRoot.activeElement;)b=b.shadowRoot.activeElement;return b}function re(l,d){var b=l.className;G(d).test(b)||(l.className+=(b?" ":"")+d)}function K(l,d){for(var b=l.split(" "),m=0;m<b.length;m++)b[m]&&!G(b[m]).test(d)&&(d+=" "+b[m]);return d}var V=function(l){l.select()};C?V=function(l){l.selectionStart=0,l.selectionEnd=l.value.length}:u&&(V=function(l){try{l.select()}catch{}});function Z(l){return l.display.wrapper.ownerDocument}function U(l){return W(l.display.wrapper)}function W(l){return l.getRootNode?l.getRootNode():l.ownerDocument}function Y(l){return Z(l).defaultView}function ee(l){var d=Array.prototype.slice.call(arguments,1);return function(){return l.apply(null,d)}}function oe(l,d,b){d||(d={});for(var m in l)l.hasOwnProperty(m)&&(b!==!1||!d.hasOwnProperty(m))&&(d[m]=l[m]);return d}function te(l,d,b,m,T){d==null&&(d=l.search(/[^\s\u00a0]/),d==-1&&(d=l.length));for(var L=m||0,O=T||0;;){var H=l.indexOf("	",L);if(H<0||H>=d)return O+(d-L);O+=H-L,O+=b-O%b,L=H+1}}var ie=function(){this.id=null,this.f=null,this.time=0,this.handler=ee(this.onTimeout,this)};ie.prototype.onTimeout=function(l){l.id=0,l.time<=+new Date?l.f():setTimeout(l.handler,l.time-+new Date)},ie.prototype.set=function(l,d){this.f=d;var b=+new Date+l;(!this.id||b<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,l),this.time=b)};function se(l,d){for(var b=0;b<l.length;++b)if(l[b]==d)return b;return-1}var $=50,ne={toString:function(){return"CodeMirror.Pass"}},le={scroll:!1},Se={origin:"*mouse"},De={origin:"+move"};function be(l,d,b){for(var m=0,T=0;;){var L=l.indexOf("	",m);L==-1&&(L=l.length);var O=L-m;if(L==l.length||T+O>=d)return m+Math.min(O,d-T);if(T+=L-m,T+=b-T%b,m=L+1,T>=d)return m}}var Te=[""];function ve(l){for(;Te.length<=l;)Te.push(de(Te)+" ");return Te[l]}function de(l){return l[l.length-1]}function ye(l,d){for(var b=[],m=0;m<l.length;m++)b[m]=d(l[m],m);return b}function Ce(l,d,b){for(var m=0,T=b(d);m<l.length&&b(l[m])<=T;)m++;l.splice(m,0,d)}function ue(){}function Ae(l,d){var b;return Object.create?b=Object.create(l):(ue.prototype=l,b=new ue),d&&oe(d,b),b}var Pe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Fe(l){return/\w/.test(l)||l>""&&(l.toUpperCase()!=l.toLowerCase()||Pe.test(l))}function Ye(l,d){return d?d.source.indexOf("\\w")>-1&&Fe(l)?!0:d.test(l):Fe(l)}function Ve(l){for(var d in l)if(l.hasOwnProperty(d)&&l[d])return!1;return!0}var Qe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Xe(l){return l.charCodeAt(0)>=768&&Qe.test(l)}function We(l,d,b){for(;(b<0?d>0:d<l.length)&&Xe(l.charAt(d));)d+=b;return d}function he(l,d,b){for(var m=d>b?-1:1;;){if(d==b)return d;var T=(d+b)/2,L=m<0?Math.ceil(T):Math.floor(T);if(L==d)return l(L)?d:b;l(L)?b=L:d=L+m}}function j(l,d,b,m){if(!l)return m(d,b,"ltr",0);for(var T=!1,L=0;L<l.length;++L){var O=l[L];(O.from<b&&O.to>d||d==b&&O.to==d)&&(m(Math.max(O.from,d),Math.min(O.to,b),O.level==1?"rtl":"ltr",L),T=!0)}T||m(d,b,"ltr")}var pe=null;function me(l,d,b){var m;pe=null;for(var T=0;T<l.length;++T){var L=l[T];if(L.from<d&&L.to>d)return T;L.to==d&&(L.from!=L.to&&b=="before"?m=T:pe=T),L.from==d&&(L.from!=L.to&&b!="before"?m=T:pe=T)}return m??pe}var we=function(){var l="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function b(J){return J<=247?l.charAt(J):1424<=J&&J<=1524?"R":1536<=J&&J<=1785?d.charAt(J-1536):1774<=J&&J<=2220?"r":8192<=J&&J<=8203?"w":J==8204?"b":"L"}var m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,T=/[stwN]/,L=/[LRr]/,O=/[Lb1n]/,H=/[1n]/;function X(J,ce,ge){this.level=J,this.from=ce,this.to=ge}return function(J,ce){var ge=ce=="ltr"?"L":"R";if(J.length==0||ce=="ltr"&&!m.test(J))return!1;for(var _e=J.length,Le=[],Ne=0;Ne<_e;++Ne)Le.push(b(J.charCodeAt(Ne)));for(var Be=0,Ke=ge;Be<_e;++Be){var et=Le[Be];et=="m"?Le[Be]=Ke:Ke=et}for(var ot=0,tt=ge;ot<_e;++ot){var lt=Le[ot];lt=="1"&&tt=="r"?Le[ot]="n":L.test(lt)&&(tt=lt,lt=="r"&&(Le[ot]="R"))}for(var yt=1,pt=Le[0];yt<_e-1;++yt){var At=Le[yt];At=="+"&&pt=="1"&&Le[yt+1]=="1"?Le[yt]="1":At==","&&pt==Le[yt+1]&&(pt=="1"||pt=="n")&&(Le[yt]=pt),pt=At}for(var Qt=0;Qt<_e;++Qt){var Nr=Le[Qt];if(Nr==",")Le[Qt]="N";else if(Nr=="%"){var dr=void 0;for(dr=Qt+1;dr<_e&&Le[dr]=="%";++dr);for(var _n=Qt&&Le[Qt-1]=="!"||dr<_e&&Le[dr]=="1"?"1":"N",wn=Qt;wn<dr;++wn)Le[wn]=_n;Qt=dr-1}}for(var Cr=0,xn=ge;Cr<_e;++Cr){var Hr=Le[Cr];xn=="L"&&Hr=="1"?Le[Cr]="L":L.test(Hr)&&(xn=Hr)}for(var Ar=0;Ar<_e;++Ar)if(T.test(Le[Ar])){var Er=void 0;for(Er=Ar+1;Er<_e&&T.test(Le[Er]);++Er);for(var vr=(Ar?Le[Ar-1]:ge)=="L",Cn=(Er<_e?Le[Er]:ge)=="L",Ko=vr==Cn?vr?"L":"R":ge,di=Ar;di<Er;++di)Le[di]=Ko;Ar=Er-1}for(var Qr=[],ga,Or=0;Or<_e;)if(O.test(Le[Or])){var Qd=Or;for(++Or;Or<_e&&O.test(Le[Or]);++Or);Qr.push(new X(0,Qd,Or))}else{var Ba=Or,Zi=Qr.length,Qi=ce=="rtl"?1:0;for(++Or;Or<_e&&Le[Or]!="L";++Or);for(var un=Ba;un<Or;)if(H.test(Le[un])){Ba<un&&(Qr.splice(Zi,0,new X(1,Ba,un)),Zi+=Qi);var jo=un;for(++un;un<Or&&H.test(Le[un]);++un);Qr.splice(Zi,0,new X(2,jo,un)),Zi+=Qi,Ba=un}else++un;Ba<Or&&Qr.splice(Zi,0,new X(1,Ba,Or))}return ce=="ltr"&&(Qr[0].level==1&&(ga=J.match(/^\s+/))&&(Qr[0].from=ga[0].length,Qr.unshift(new X(0,0,ga[0].length))),de(Qr).level==1&&(ga=J.match(/\s+$/))&&(de(Qr).to-=ga[0].length,Qr.push(new X(0,_e-ga[0].length,_e)))),ce=="rtl"?Qr.reverse():Qr}}();function xe(l,d){var b=l.order;return b==null&&(b=l.order=we(l.text,d)),b}var qe=[],Ee=function(l,d,b){if(l.addEventListener)l.addEventListener(d,b,!1);else if(l.attachEvent)l.attachEvent("on"+d,b);else{var m=l._handlers||(l._handlers={});m[d]=(m[d]||qe).concat(b)}};function Oe(l,d){return l._handlers&&l._handlers[d]||qe}function Ie(l,d,b){if(l.removeEventListener)l.removeEventListener(d,b,!1);else if(l.detachEvent)l.detachEvent("on"+d,b);else{var m=l._handlers,T=m&&m[d];if(T){var L=se(T,b);L>-1&&(m[d]=T.slice(0,L).concat(T.slice(L+1)))}}}function He(l,d){var b=Oe(l,d);if(b.length)for(var m=Array.prototype.slice.call(arguments,2),T=0;T<b.length;++T)b[T].apply(null,m)}function Ue(l,d,b){return typeof d=="string"&&(d={type:d,preventDefault:function(){this.defaultPrevented=!0}}),He(l,b||d.type,l,d),nt(d)||d.codemirrorIgnore}function je(l){var d=l._handlers&&l._handlers.cursorActivity;if(d)for(var b=l.curOp.cursorActivityHandlers||(l.curOp.cursorActivityHandlers=[]),m=0;m<d.length;++m)se(b,d[m])==-1&&b.push(d[m])}function Je(l,d){return Oe(l,d).length>0}function Ge(l){l.prototype.on=function(d,b){Ee(this,d,b)},l.prototype.off=function(d,b){Ie(this,d,b)}}function $e(l){l.preventDefault?l.preventDefault():l.returnValue=!1}function vt(l){l.stopPropagation?l.stopPropagation():l.cancelBubble=!0}function nt(l){return l.defaultPrevented!=null?l.defaultPrevented:l.returnValue==!1}function it(l){$e(l),vt(l)}function Tt(l){return l.target||l.srcElement}function dt(l){var d=l.which;return d==null&&(l.button&1?d=1:l.button&2?d=3:l.button&4&&(d=2)),A&&l.ctrlKey&&d==1&&(d=3),d}var gt=function(){if(u&&f<9)return!1;var l=P("div");return"draggable"in l||"dragDrop"in l}(),_t;function Mt(l){if(_t==null){var d=P("span","​");R(l,P("span",[d,document.createTextNode("x")])),l.firstChild.offsetHeight!=0&&(_t=d.offsetWidth<=1&&d.offsetHeight>2&&!(u&&f<8))}var b=_t?P("span","​"):P("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return b.setAttribute("cm-text",""),b}var jt;function Lt(l){if(jt!=null)return jt;var d=R(l,document.createTextNode("AخA")),b=I(d,0,1).getBoundingClientRect(),m=I(d,1,2).getBoundingClientRect();return q(l),!b||b.left==b.right?!1:jt=m.right-b.right<3}var Ht=`

b`.split(/\n/).length!=3?function(l){for(var d=0,b=[],m=l.length;d<=m;){var T=l.indexOf(`
`,d);T==-1&&(T=l.length);var L=l.slice(d,l.charAt(T-1)=="\r"?T-1:T),O=L.indexOf("\r");O!=-1?(b.push(L.slice(0,O)),d+=O+1):(b.push(L),d=T+1)}return b}:function(l){return l.split(/\r\n?|\n/)},Sr=window.getSelection?function(l){try{return l.selectionStart!=l.selectionEnd}catch{return!1}}:function(l){var d;try{d=l.ownerDocument.selection.createRange()}catch{}return!d||d.parentElement()!=l?!1:d.compareEndPoints("StartToEnd",d)!=0},on=function(){var l=P("div");return"oncopy"in l?!0:(l.setAttribute("oncopy","return;"),typeof l.oncopy=="function")}(),Rt=null;function tr(l){if(Rt!=null)return Rt;var d=R(l,P("span","x")),b=d.getBoundingClientRect(),m=I(d,0,1).getBoundingClientRect();return Rt=Math.abs(b.left-m.left)>1}var Zt={},cr={};function rr(l,d){arguments.length>2&&(d.dependencies=Array.prototype.slice.call(arguments,2)),Zt[l]=d}function jr(l,d){cr[l]=d}function gn(l){if(typeof l=="string"&&cr.hasOwnProperty(l))l=cr[l];else if(l&&typeof l.name=="string"&&cr.hasOwnProperty(l.name)){var d=cr[l.name];typeof d=="string"&&(d={name:d}),l=Ae(d,l),l.name=d.name}else{if(typeof l=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(l))return gn("application/xml");if(typeof l=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(l))return gn("application/json")}return typeof l=="string"?{name:l}:l||{name:"null"}}function jn(l,d){d=gn(d);var b=Zt[d.name];if(!b)return jn(l,"text/plain");var m=b(l,d);if(Ln.hasOwnProperty(d.name)){var T=Ln[d.name];for(var L in T)T.hasOwnProperty(L)&&(m.hasOwnProperty(L)&&(m["_"+L]=m[L]),m[L]=T[L])}if(m.name=d.name,d.helperType&&(m.helperType=d.helperType),d.modeProps)for(var O in d.modeProps)m[O]=d.modeProps[O];return m}var Ln={};function Zn(l,d){var b=Ln.hasOwnProperty(l)?Ln[l]:Ln[l]={};oe(d,b)}function sn(l,d){if(d===!0)return d;if(l.copyState)return l.copyState(d);var b={};for(var m in d){var T=d[m];T instanceof Array&&(T=T.concat([])),b[m]=T}return b}function Pa(l,d){for(var b;l.innerMode&&(b=l.innerMode(d),!(!b||b.mode==l));)d=b.state,l=b.mode;return b||{mode:l,state:d}}function Gn(l,d,b){return l.startState?l.startState(d,b):!0}var Ft=function(l,d,b){this.pos=this.start=0,this.string=l,this.tabSize=d||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=b};Ft.prototype.eol=function(){return this.pos>=this.string.length},Ft.prototype.sol=function(){return this.pos==this.lineStart},Ft.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ft.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ft.prototype.eat=function(l){var d=this.string.charAt(this.pos),b;if(typeof l=="string"?b=d==l:b=d&&(l.test?l.test(d):l(d)),b)return++this.pos,d},Ft.prototype.eatWhile=function(l){for(var d=this.pos;this.eat(l););return this.pos>d},Ft.prototype.eatSpace=function(){for(var l=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>l},Ft.prototype.skipToEnd=function(){this.pos=this.string.length},Ft.prototype.skipTo=function(l){var d=this.string.indexOf(l,this.pos);if(d>-1)return this.pos=d,!0},Ft.prototype.backUp=function(l){this.pos-=l},Ft.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=te(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?te(this.string,this.lineStart,this.tabSize):0)},Ft.prototype.indentation=function(){return te(this.string,null,this.tabSize)-(this.lineStart?te(this.string,this.lineStart,this.tabSize):0)},Ft.prototype.match=function(l,d,b){if(typeof l=="string"){var m=function(O){return b?O.toLowerCase():O},T=this.string.substr(this.pos,l.length);if(m(T)==m(l))return d!==!1&&(this.pos+=l.length),!0}else{var L=this.string.slice(this.pos).match(l);return L&&L.index>0?null:(L&&d!==!1&&(this.pos+=L[0].length),L)}},Ft.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ft.prototype.hideFirstChars=function(l,d){this.lineStart+=l;try{return d()}finally{this.lineStart-=l}},Ft.prototype.lookAhead=function(l){var d=this.lineOracle;return d&&d.lookAhead(l)},Ft.prototype.baseToken=function(){var l=this.lineOracle;return l&&l.baseToken(this.pos)};function ft(l,d){if(d-=l.first,d<0||d>=l.size)throw new Error("There is no line "+(d+l.first)+" in the document.");for(var b=l;!b.lines;)for(var m=0;;++m){var T=b.children[m],L=T.chunkSize();if(d<L){b=T;break}d-=L}return b.lines[d]}function Gr(l,d,b){var m=[],T=d.line;return l.iter(d.line,b.line+1,function(L){var O=L.text;T==b.line&&(O=O.slice(0,b.ch)),T==d.line&&(O=O.slice(d.ch)),m.push(O),++T}),m}function Qn(l,d,b){var m=[];return l.iter(d,b,function(T){m.push(T.text)}),m}function Pt(l,d){var b=d-l.height;if(b)for(var m=l;m;m=m.parent)m.height+=b}function Q(l){if(l.parent==null)return null;for(var d=l.parent,b=se(d.lines,l),m=d.parent;m;d=m,m=m.parent)for(var T=0;m.children[T]!=d;++T)b+=m.children[T].chunkSize();return b+d.first}function fe(l,d){var b=l.first;e:do{for(var m=0;m<l.children.length;++m){var T=l.children[m],L=T.height;if(d<L){l=T;continue e}d-=L,b+=T.chunkSize()}return b}while(!l.lines);for(var O=0;O<l.lines.length;++O){var H=l.lines[O],X=H.height;if(d<X)break;d-=X}return b+O}function ke(l,d){return d>=l.first&&d<l.first+l.size}function ze(l,d){return String(l.lineNumberFormatter(d+l.firstLineNumber))}function Re(l,d,b){if(b===void 0&&(b=null),!(this instanceof Re))return new Re(l,d,b);this.line=l,this.ch=d,this.sticky=b}function Ze(l,d){return l.line-d.line||l.ch-d.ch}function kt(l,d){return l.sticky==d.sticky&&Ze(l,d)==0}function Mr(l){return Re(l.line,l.ch)}function yn(l,d){return Ze(l,d)<0?d:l}function Ro(l,d){return Ze(l,d)<0?l:d}function uw(l,d){return Math.max(l.first,Math.min(d,l.first+l.size-1))}function Ct(l,d){if(d.line<l.first)return Re(l.first,0);var b=l.first+l.size-1;return d.line>b?Re(b,ft(l,b).text.length):RO(d,ft(l,d.line).text.length)}function RO(l,d){var b=l.ch;return b==null||b>d?Re(l.line,d):b<0?Re(l.line,0):l}function fw(l,d){for(var b=[],m=0;m<d.length;m++)b[m]=Ct(l,d[m]);return b}var Cu=function(l,d){this.state=l,this.lookAhead=d},ha=function(l,d,b,m){this.state=d,this.doc=l,this.line=b,this.maxLookAhead=m||0,this.baseTokens=null,this.baseTokenPos=1};ha.prototype.lookAhead=function(l){var d=this.doc.getLine(this.line+l);return d!=null&&l>this.maxLookAhead&&(this.maxLookAhead=l),d},ha.prototype.baseToken=function(l){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=l;)this.baseTokenPos+=2;var d=this.baseTokens[this.baseTokenPos+1];return{type:d&&d.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-l}},ha.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ha.fromSaved=function(l,d,b){return d instanceof Cu?new ha(l,sn(l.mode,d.state),b,d.lookAhead):new ha(l,sn(l.mode,d),b)},ha.prototype.save=function(l){var d=l!==!1?sn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Cu(d,this.maxLookAhead):d};function cw(l,d,b,m){var T=[l.state.modeGen],L={};yw(l,d.text,l.doc.mode,b,function(J,ce){return T.push(J,ce)},L,m);for(var O=b.state,H=function(J){b.baseTokens=T;var ce=l.state.overlays[J],ge=1,_e=0;b.state=!0,yw(l,d.text,ce.mode,b,function(Le,Ne){for(var Be=ge;_e<Le;){var Ke=T[ge];Ke>Le&&T.splice(ge,1,Le,T[ge+1],Ke),ge+=2,_e=Math.min(Le,Ke)}if(Ne)if(ce.opaque)T.splice(Be,ge-Be,Le,"overlay "+Ne),ge=Be+2;else for(;Be<ge;Be+=2){var et=T[Be+1];T[Be+1]=(et?et+" ":"")+"overlay "+Ne}},L),b.state=O,b.baseTokens=null,b.baseTokenPos=1},X=0;X<l.state.overlays.length;++X)H(X);return{styles:T,classes:L.bgClass||L.textClass?L:null}}function dw(l,d,b){if(!d.styles||d.styles[0]!=l.state.modeGen){var m=Fs(l,Q(d)),T=d.text.length>l.options.maxHighlightLength&&sn(l.doc.mode,m.state),L=cw(l,d,m);T&&(m.state=T),d.stateAfter=m.save(!T),d.styles=L.styles,L.classes?d.styleClasses=L.classes:d.styleClasses&&(d.styleClasses=null),b===l.doc.highlightFrontier&&(l.doc.modeFrontier=Math.max(l.doc.modeFrontier,++l.doc.highlightFrontier))}return d.styles}function Fs(l,d,b){var m=l.doc,T=l.display;if(!m.mode.startState)return new ha(m,!0,d);var L=PO(l,d,b),O=L>m.first&&ft(m,L-1).stateAfter,H=O?ha.fromSaved(m,O,L):new ha(m,Gn(m.mode),L);return m.iter(L,d,function(X){sd(l,X.text,H);var J=H.line;X.stateAfter=J==d-1||J%5==0||J>=T.viewFrom&&J<T.viewTo?H.save():null,H.nextLine()}),b&&(m.modeFrontier=H.line),H}function sd(l,d,b,m){var T=l.doc.mode,L=new Ft(d,l.options.tabSize,b);for(L.start=L.pos=m||0,d==""&&hw(T,b.state);!L.eol();)ld(T,L,b.state),L.start=L.pos}function hw(l,d){if(l.blankLine)return l.blankLine(d);if(l.innerMode){var b=Pa(l,d);if(b.mode.blankLine)return b.mode.blankLine(b.state)}}function ld(l,d,b,m){for(var T=0;T<10;T++){m&&(m[0]=Pa(l,b).mode);var L=l.token(d,b);if(d.pos>d.start)return L}throw new Error("Mode "+l.name+" failed to advance stream.")}var vw=function(l,d,b){this.start=l.start,this.end=l.pos,this.string=l.current(),this.type=d||null,this.state=b};function pw(l,d,b,m){var T=l.doc,L=T.mode,O;d=Ct(T,d);var H=ft(T,d.line),X=Fs(l,d.line,b),J=new Ft(H.text,l.options.tabSize,X),ce;for(m&&(ce=[]);(m||J.pos<d.ch)&&!J.eol();)J.start=J.pos,O=ld(L,J,X.state),m&&ce.push(new vw(J,O,sn(T.mode,X.state)));return m?ce:new vw(J,O,X.state)}function gw(l,d){if(l)for(;;){var b=l.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!b)break;l=l.slice(0,b.index)+l.slice(b.index+b[0].length);var m=b[1]?"bgClass":"textClass";d[m]==null?d[m]=b[2]:new RegExp("(?:^|\\s)"+b[2]+"(?:$|\\s)").test(d[m])||(d[m]+=" "+b[2])}return l}function yw(l,d,b,m,T,L,O){var H=b.flattenSpans;H==null&&(H=l.options.flattenSpans);var X=0,J=null,ce=new Ft(d,l.options.tabSize,m),ge,_e=l.options.addModeClass&&[null];for(d==""&&gw(hw(b,m.state),L);!ce.eol();){if(ce.pos>l.options.maxHighlightLength?(H=!1,O&&sd(l,d,m,ce.pos),ce.pos=d.length,ge=null):ge=gw(ld(b,ce,m.state,_e),L),_e){var Le=_e[0].name;Le&&(ge="m-"+(ge?Le+" "+ge:Le))}if(!H||J!=ge){for(;X<ce.start;)X=Math.min(ce.start,X+5e3),T(X,J);J=ge}ce.start=ce.pos}for(;X<ce.pos;){var Ne=Math.min(ce.pos,X+5e3);T(Ne,J),X=Ne}}function PO(l,d,b){for(var m,T,L=l.doc,O=b?-1:d-(l.doc.mode.innerMode?1e3:100),H=d;H>O;--H){if(H<=L.first)return L.first;var X=ft(L,H-1),J=X.stateAfter;if(J&&(!b||H+(J instanceof Cu?J.lookAhead:0)<=L.modeFrontier))return H;var ce=te(X.text,null,l.options.tabSize);(T==null||m>ce)&&(T=H-1,m=ce)}return T}function kO(l,d){if(l.modeFrontier=Math.min(l.modeFrontier,d),!(l.highlightFrontier<d-10)){for(var b=l.first,m=d-1;m>b;m--){var T=ft(l,m).stateAfter;if(T&&(!(T instanceof Cu)||m+T.lookAhead<d)){b=m+1;break}}l.highlightFrontier=Math.min(l.highlightFrontier,b)}}var mw=!1,ka=!1;function NO(){mw=!0}function OO(){ka=!0}function Eu(l,d,b){this.marker=l,this.from=d,this.to=b}function Bs(l,d){if(l)for(var b=0;b<l.length;++b){var m=l[b];if(m.marker==d)return m}}function IO(l,d){for(var b,m=0;m<l.length;++m)l[m]!=d&&(b||(b=[])).push(l[m]);return b}function FO(l,d,b){var m=b&&window.WeakSet&&(b.markedSpans||(b.markedSpans=new WeakSet));m&&l.markedSpans&&m.has(l.markedSpans)?l.markedSpans.push(d):(l.markedSpans=l.markedSpans?l.markedSpans.concat([d]):[d],m&&m.add(l.markedSpans)),d.marker.attachLine(l)}function BO(l,d,b){var m;if(l)for(var T=0;T<l.length;++T){var L=l[T],O=L.marker,H=L.from==null||(O.inclusiveLeft?L.from<=d:L.from<d);if(H||L.from==d&&O.type=="bookmark"&&(!b||!L.marker.insertLeft)){var X=L.to==null||(O.inclusiveRight?L.to>=d:L.to>d);(m||(m=[])).push(new Eu(O,L.from,X?null:L.to))}}return m}function qO(l,d,b){var m;if(l)for(var T=0;T<l.length;++T){var L=l[T],O=L.marker,H=L.to==null||(O.inclusiveRight?L.to>=d:L.to>d);if(H||L.from==d&&O.type=="bookmark"&&(!b||L.marker.insertLeft)){var X=L.from==null||(O.inclusiveLeft?L.from<=d:L.from<d);(m||(m=[])).push(new Eu(O,X?null:L.from-d,L.to==null?null:L.to-d))}}return m}function ud(l,d){if(d.full)return null;var b=ke(l,d.from.line)&&ft(l,d.from.line).markedSpans,m=ke(l,d.to.line)&&ft(l,d.to.line).markedSpans;if(!b&&!m)return null;var T=d.from.ch,L=d.to.ch,O=Ze(d.from,d.to)==0,H=BO(b,T,O),X=qO(m,L,O),J=d.text.length==1,ce=de(d.text).length+(J?T:0);if(H)for(var ge=0;ge<H.length;++ge){var _e=H[ge];if(_e.to==null){var Le=Bs(X,_e.marker);Le?J&&(_e.to=Le.to==null?null:Le.to+ce):_e.to=T}}if(X)for(var Ne=0;Ne<X.length;++Ne){var Be=X[Ne];if(Be.to!=null&&(Be.to+=ce),Be.from==null){var Ke=Bs(H,Be.marker);Ke||(Be.from=ce,J&&(H||(H=[])).push(Be))}else Be.from+=ce,J&&(H||(H=[])).push(Be)}H&&(H=bw(H)),X&&X!=H&&(X=bw(X));var et=[H];if(!J){var ot=d.text.length-2,tt;if(ot>0&&H)for(var lt=0;lt<H.length;++lt)H[lt].to==null&&(tt||(tt=[])).push(new Eu(H[lt].marker,null,null));for(var yt=0;yt<ot;++yt)et.push(tt);et.push(X)}return et}function bw(l){for(var d=0;d<l.length;++d){var b=l[d];b.from!=null&&b.from==b.to&&b.marker.clearWhenEmpty!==!1&&l.splice(d--,1)}return l.length?l:null}function zO(l,d,b){var m=null;if(l.iter(d.line,b.line+1,function(Le){if(Le.markedSpans)for(var Ne=0;Ne<Le.markedSpans.length;++Ne){var Be=Le.markedSpans[Ne].marker;Be.readOnly&&(!m||se(m,Be)==-1)&&(m||(m=[])).push(Be)}}),!m)return null;for(var T=[{from:d,to:b}],L=0;L<m.length;++L)for(var O=m[L],H=O.find(0),X=0;X<T.length;++X){var J=T[X];if(!(Ze(J.to,H.from)<0||Ze(J.from,H.to)>0)){var ce=[X,1],ge=Ze(J.from,H.from),_e=Ze(J.to,H.to);(ge<0||!O.inclusiveLeft&&!ge)&&ce.push({from:J.from,to:H.from}),(_e>0||!O.inclusiveRight&&!_e)&&ce.push({from:H.to,to:J.to}),T.splice.apply(T,ce),X+=ce.length-3}}return T}function ww(l){var d=l.markedSpans;if(d){for(var b=0;b<d.length;++b)d[b].marker.detachLine(l);l.markedSpans=null}}function xw(l,d){if(d){for(var b=0;b<d.length;++b)d[b].marker.attachLine(l);l.markedSpans=d}}function Tu(l){return l.inclusiveLeft?-1:0}function Su(l){return l.inclusiveRight?1:0}function fd(l,d){var b=l.lines.length-d.lines.length;if(b!=0)return b;var m=l.find(),T=d.find(),L=Ze(m.from,T.from)||Tu(l)-Tu(d);if(L)return-L;var O=Ze(m.to,T.to)||Su(l)-Su(d);return O||d.id-l.id}function Cw(l,d){var b=ka&&l.markedSpans,m;if(b)for(var T=void 0,L=0;L<b.length;++L)T=b[L],T.marker.collapsed&&(d?T.from:T.to)==null&&(!m||fd(m,T.marker)<0)&&(m=T.marker);return m}function Ew(l){return Cw(l,!0)}function Au(l){return Cw(l,!1)}function GO(l,d){var b=ka&&l.markedSpans,m;if(b)for(var T=0;T<b.length;++T){var L=b[T];L.marker.collapsed&&(L.from==null||L.from<d)&&(L.to==null||L.to>d)&&(!m||fd(m,L.marker)<0)&&(m=L.marker)}return m}function Tw(l,d,b,m,T){var L=ft(l,d),O=ka&&L.markedSpans;if(O)for(var H=0;H<O.length;++H){var X=O[H];if(X.marker.collapsed){var J=X.marker.find(0),ce=Ze(J.from,b)||Tu(X.marker)-Tu(T),ge=Ze(J.to,m)||Su(X.marker)-Su(T);if(!(ce>=0&&ge<=0||ce<=0&&ge>=0)&&(ce<=0&&(X.marker.inclusiveRight&&T.inclusiveLeft?Ze(J.to,b)>=0:Ze(J.to,b)>0)||ce>=0&&(X.marker.inclusiveRight&&T.inclusiveLeft?Ze(J.from,m)<=0:Ze(J.from,m)<0)))return!0}}}function Jn(l){for(var d;d=Ew(l);)l=d.find(-1,!0).line;return l}function HO(l){for(var d;d=Au(l);)l=d.find(1,!0).line;return l}function UO(l){for(var d,b;d=Au(l);)l=d.find(1,!0).line,(b||(b=[])).push(l);return b}function cd(l,d){var b=ft(l,d),m=Jn(b);return b==m?d:Q(m)}function Sw(l,d){if(d>l.lastLine())return d;var b=ft(l,d),m;if(!ai(l,b))return d;for(;m=Au(b);)b=m.find(1,!0).line;return Q(b)+1}function ai(l,d){var b=ka&&d.markedSpans;if(b){for(var m=void 0,T=0;T<b.length;++T)if(m=b[T],!!m.marker.collapsed){if(m.from==null)return!0;if(!m.marker.widgetNode&&m.from==0&&m.marker.inclusiveLeft&&dd(l,d,m))return!0}}}function dd(l,d,b){if(b.to==null){var m=b.marker.find(1,!0);return dd(l,m.line,Bs(m.line.markedSpans,b.marker))}if(b.marker.inclusiveRight&&b.to==d.text.length)return!0;for(var T=void 0,L=0;L<d.markedSpans.length;++L)if(T=d.markedSpans[L],T.marker.collapsed&&!T.marker.widgetNode&&T.from==b.to&&(T.to==null||T.to!=b.from)&&(T.marker.inclusiveLeft||b.marker.inclusiveRight)&&dd(l,d,T))return!0}function Na(l){l=Jn(l);for(var d=0,b=l.parent,m=0;m<b.lines.length;++m){var T=b.lines[m];if(T==l)break;d+=T.height}for(var L=b.parent;L;b=L,L=b.parent)for(var O=0;O<L.children.length;++O){var H=L.children[O];if(H==b)break;d+=H.height}return d}function Lu(l){if(l.height==0)return 0;for(var d=l.text.length,b,m=l;b=Ew(m);){var T=b.find(0,!0);m=T.from.line,d+=T.from.ch-T.to.ch}for(m=l;b=Au(m);){var L=b.find(0,!0);d-=m.text.length-L.from.ch,m=L.to.line,d+=m.text.length-L.to.ch}return d}function hd(l){var d=l.display,b=l.doc;d.maxLine=ft(b,b.first),d.maxLineLength=Lu(d.maxLine),d.maxLineChanged=!0,b.iter(function(m){var T=Lu(m);T>d.maxLineLength&&(d.maxLineLength=T,d.maxLine=m)})}var Po=function(l,d,b){this.text=l,xw(this,d),this.height=b?b(this):1};Po.prototype.lineNo=function(){return Q(this)},Ge(Po);function VO(l,d,b,m){l.text=d,l.stateAfter&&(l.stateAfter=null),l.styles&&(l.styles=null),l.order!=null&&(l.order=null),ww(l),xw(l,b);var T=m?m(l):1;T!=l.height&&Pt(l,T)}function WO(l){l.parent=null,ww(l)}var $O={},YO={};function Aw(l,d){if(!l||/^\s*$/.test(l))return null;var b=d.addModeClass?YO:$O;return b[l]||(b[l]=l.replace(/\S+/g,"cm-$&"))}function Lw(l,d){var b=N("span",null,null,c?"padding-right: .1px":null),m={pre:N("pre",[b],"CodeMirror-line"),content:b,col:0,pos:0,cm:l,trailingSpace:!1,splitSpaces:l.getOption("lineWrapping")};d.measure={};for(var T=0;T<=(d.rest?d.rest.length:0);T++){var L=T?d.rest[T-1]:d.line,O=void 0;m.pos=0,m.addToken=KO,Lt(l.display.measure)&&(O=xe(L,l.doc.direction))&&(m.addToken=ZO(m.addToken,O)),m.map=[];var H=d!=l.display.externalMeasured&&Q(L);QO(L,m,dw(l,L,H)),L.styleClasses&&(L.styleClasses.bgClass&&(m.bgClass=K(L.styleClasses.bgClass,m.bgClass||"")),L.styleClasses.textClass&&(m.textClass=K(L.styleClasses.textClass,m.textClass||""))),m.map.length==0&&m.map.push(0,0,m.content.appendChild(Mt(l.display.measure))),T==0?(d.measure.map=m.map,d.measure.cache={}):((d.measure.maps||(d.measure.maps=[])).push(m.map),(d.measure.caches||(d.measure.caches=[])).push({}))}if(c){var X=m.content.lastChild;(/\bcm-tab\b/.test(X.className)||X.querySelector&&X.querySelector(".cm-tab"))&&(m.content.className="cm-tab-wrap-hack")}return He(l,"renderLine",l,d.line,m.pre),m.pre.className&&(m.textClass=K(m.pre.className,m.textClass||"")),m}function XO(l){var d=P("span","•","cm-invalidchar");return d.title="\\u"+l.charCodeAt(0).toString(16),d.setAttribute("aria-label",d.title),d}function KO(l,d,b,m,T,L,O){if(d){var H=l.splitSpaces?jO(d,l.trailingSpace):d,X=l.cm.state.specialChars,J=!1,ce;if(!X.test(d))l.col+=d.length,ce=document.createTextNode(H),l.map.push(l.pos,l.pos+d.length,ce),u&&f<9&&(J=!0),l.pos+=d.length;else{ce=document.createDocumentFragment();for(var ge=0;;){X.lastIndex=ge;var _e=X.exec(d),Le=_e?_e.index-ge:d.length-ge;if(Le){var Ne=document.createTextNode(H.slice(ge,ge+Le));u&&f<9?ce.appendChild(P("span",[Ne])):ce.appendChild(Ne),l.map.push(l.pos,l.pos+Le,Ne),l.col+=Le,l.pos+=Le}if(!_e)break;ge+=Le+1;var Be=void 0;if(_e[0]=="	"){var Ke=l.cm.options.tabSize,et=Ke-l.col%Ke;Be=ce.appendChild(P("span",ve(et),"cm-tab")),Be.setAttribute("role","presentation"),Be.setAttribute("cm-text","	"),l.col+=et}else _e[0]=="\r"||_e[0]==`
`?(Be=ce.appendChild(P("span",_e[0]=="\r"?"␍":"␤","cm-invalidchar")),Be.setAttribute("cm-text",_e[0]),l.col+=1):(Be=l.cm.options.specialCharPlaceholder(_e[0]),Be.setAttribute("cm-text",_e[0]),u&&f<9?ce.appendChild(P("span",[Be])):ce.appendChild(Be),l.col+=1);l.map.push(l.pos,l.pos+1,Be),l.pos++}}if(l.trailingSpace=H.charCodeAt(d.length-1)==32,b||m||T||J||L||O){var ot=b||"";m&&(ot+=m),T&&(ot+=T);var tt=P("span",[ce],ot,L);if(O)for(var lt in O)O.hasOwnProperty(lt)&&lt!="style"&&lt!="class"&&tt.setAttribute(lt,O[lt]);return l.content.appendChild(tt)}l.content.appendChild(ce)}}function jO(l,d){if(l.length>1&&!/  /.test(l))return l;for(var b=d,m="",T=0;T<l.length;T++){var L=l.charAt(T);L==" "&&b&&(T==l.length-1||l.charCodeAt(T+1)==32)&&(L=" "),m+=L,b=L==" "}return m}function ZO(l,d){return function(b,m,T,L,O,H,X){T=T?T+" cm-force-border":"cm-force-border";for(var J=b.pos,ce=J+m.length;;){for(var ge=void 0,_e=0;_e<d.length&&(ge=d[_e],!(ge.to>J&&ge.from<=J));_e++);if(ge.to>=ce)return l(b,m,T,L,O,H,X);l(b,m.slice(0,ge.to-J),T,L,null,H,X),L=null,m=m.slice(ge.to-J),J=ge.to}}}function Dw(l,d,b,m){var T=!m&&b.widgetNode;T&&l.map.push(l.pos,l.pos+d,T),!m&&l.cm.display.input.needsContentAttribute&&(T||(T=l.content.appendChild(document.createElement("span"))),T.setAttribute("cm-marker",b.id)),T&&(l.cm.display.input.setUneditable(T),l.content.appendChild(T)),l.pos+=d,l.trailingSpace=!1}function QO(l,d,b){var m=l.markedSpans,T=l.text,L=0;if(!m){for(var O=1;O<b.length;O+=2)d.addToken(d,T.slice(L,L=b[O]),Aw(b[O+1],d.cm.options));return}for(var H=T.length,X=0,J=1,ce="",ge,_e,Le=0,Ne,Be,Ke,et,ot;;){if(Le==X){Ne=Be=Ke=_e="",ot=null,et=null,Le=1/0;for(var tt=[],lt=void 0,yt=0;yt<m.length;++yt){var pt=m[yt],At=pt.marker;if(At.type=="bookmark"&&pt.from==X&&At.widgetNode)tt.push(At);else if(pt.from<=X&&(pt.to==null||pt.to>X||At.collapsed&&pt.to==X&&pt.from==X)){if(pt.to!=null&&pt.to!=X&&Le>pt.to&&(Le=pt.to,Be=""),At.className&&(Ne+=" "+At.className),At.css&&(_e=(_e?_e+";":"")+At.css),At.startStyle&&pt.from==X&&(Ke+=" "+At.startStyle),At.endStyle&&pt.to==Le&&(lt||(lt=[])).push(At.endStyle,pt.to),At.title&&((ot||(ot={})).title=At.title),At.attributes)for(var Qt in At.attributes)(ot||(ot={}))[Qt]=At.attributes[Qt];At.collapsed&&(!et||fd(et.marker,At)<0)&&(et=pt)}else pt.from>X&&Le>pt.from&&(Le=pt.from)}if(lt)for(var Nr=0;Nr<lt.length;Nr+=2)lt[Nr+1]==Le&&(Be+=" "+lt[Nr]);if(!et||et.from==X)for(var dr=0;dr<tt.length;++dr)Dw(d,0,tt[dr]);if(et&&(et.from||0)==X){if(Dw(d,(et.to==null?H+1:et.to)-X,et.marker,et.from==null),et.to==null)return;et.to==X&&(et=!1)}}if(X>=H)break;for(var _n=Math.min(H,Le);;){if(ce){var wn=X+ce.length;if(!et){var Cr=wn>_n?ce.slice(0,_n-X):ce;d.addToken(d,Cr,ge?ge+Ne:Ne,Ke,X+Cr.length==Le?Be:"",_e,ot)}if(wn>=_n){ce=ce.slice(_n-X),X=_n;break}X=wn,Ke=""}ce=T.slice(L,L=b[J++]),ge=Aw(b[J++],d.cm.options)}}}function _w(l,d,b){this.line=d,this.rest=UO(d),this.size=this.rest?Q(de(this.rest))-b+1:1,this.node=this.text=null,this.hidden=ai(l,d)}function Du(l,d,b){for(var m=[],T,L=d;L<b;L=T){var O=new _w(l.doc,ft(l.doc,L),L);T=L+O.size,m.push(O)}return m}var ko=null;function JO(l){ko?ko.ops.push(l):l.ownsGroup=ko={ops:[l],delayedCallbacks:[]}}function e2(l){var d=l.delayedCallbacks,b=0;do{for(;b<d.length;b++)d[b].call(null);for(var m=0;m<l.ops.length;m++){var T=l.ops[m];if(T.cursorActivityHandlers)for(;T.cursorActivityCalled<T.cursorActivityHandlers.length;)T.cursorActivityHandlers[T.cursorActivityCalled++].call(null,T.cm)}}while(b<d.length)}function t2(l,d){var b=l.ownsGroup;if(b)try{e2(b)}finally{ko=null,d(b)}}var qs=null;function Rr(l,d){var b=Oe(l,d);if(b.length){var m=Array.prototype.slice.call(arguments,2),T;ko?T=ko.delayedCallbacks:qs?T=qs:(T=qs=[],setTimeout(r2,0));for(var L=function(H){T.push(function(){return b[H].apply(null,m)})},O=0;O<b.length;++O)L(O)}}function r2(){var l=qs;qs=null;for(var d=0;d<l.length;++d)l[d]()}function Mw(l,d,b,m){for(var T=0;T<d.changes.length;T++){var L=d.changes[T];L=="text"?a2(l,d):L=="gutter"?Pw(l,d,b,m):L=="class"?vd(l,d):L=="widget"&&i2(l,d,m)}d.changes=null}function zs(l){return l.node==l.text&&(l.node=P("div",null,null,"position: relative"),l.text.parentNode&&l.text.parentNode.replaceChild(l.node,l.text),l.node.appendChild(l.text),u&&f<8&&(l.node.style.zIndex=2)),l.node}function n2(l,d){var b=d.bgClass?d.bgClass+" "+(d.line.bgClass||""):d.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),d.background)b?d.background.className=b:(d.background.parentNode.removeChild(d.background),d.background=null);else if(b){var m=zs(d);d.background=m.insertBefore(P("div",null,b),m.firstChild),l.display.input.setUneditable(d.background)}}function Rw(l,d){var b=l.display.externalMeasured;return b&&b.line==d.line?(l.display.externalMeasured=null,d.measure=b.measure,b.built):Lw(l,d)}function a2(l,d){var b=d.text.className,m=Rw(l,d);d.text==d.node&&(d.node=m.pre),d.text.parentNode.replaceChild(m.pre,d.text),d.text=m.pre,m.bgClass!=d.bgClass||m.textClass!=d.textClass?(d.bgClass=m.bgClass,d.textClass=m.textClass,vd(l,d)):b&&(d.text.className=b)}function vd(l,d){n2(l,d),d.line.wrapClass?zs(d).className=d.line.wrapClass:d.node!=d.text&&(d.node.className="");var b=d.textClass?d.textClass+" "+(d.line.textClass||""):d.line.textClass;d.text.className=b||""}function Pw(l,d,b,m){if(d.gutter&&(d.node.removeChild(d.gutter),d.gutter=null),d.gutterBackground&&(d.node.removeChild(d.gutterBackground),d.gutterBackground=null),d.line.gutterClass){var T=zs(d);d.gutterBackground=P("div",null,"CodeMirror-gutter-background "+d.line.gutterClass,"left: "+(l.options.fixedGutter?m.fixedPos:-m.gutterTotalWidth)+"px; width: "+m.gutterTotalWidth+"px"),l.display.input.setUneditable(d.gutterBackground),T.insertBefore(d.gutterBackground,d.text)}var L=d.line.gutterMarkers;if(l.options.lineNumbers||L){var O=zs(d),H=d.gutter=P("div",null,"CodeMirror-gutter-wrapper","left: "+(l.options.fixedGutter?m.fixedPos:-m.gutterTotalWidth)+"px");if(H.setAttribute("aria-hidden","true"),l.display.input.setUneditable(H),O.insertBefore(H,d.text),d.line.gutterClass&&(H.className+=" "+d.line.gutterClass),l.options.lineNumbers&&(!L||!L["CodeMirror-linenumbers"])&&(d.lineNumber=H.appendChild(P("div",ze(l.options,b),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+m.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.display.lineNumInnerWidth+"px"))),L)for(var X=0;X<l.display.gutterSpecs.length;++X){var J=l.display.gutterSpecs[X].className,ce=L.hasOwnProperty(J)&&L[J];ce&&H.appendChild(P("div",[ce],"CodeMirror-gutter-elt","left: "+m.gutterLeft[J]+"px; width: "+m.gutterWidth[J]+"px"))}}}function i2(l,d,b){d.alignable&&(d.alignable=null);for(var m=G("CodeMirror-linewidget"),T=d.node.firstChild,L=void 0;T;T=L)L=T.nextSibling,m.test(T.className)&&d.node.removeChild(T);kw(l,d,b)}function o2(l,d,b,m){var T=Rw(l,d);return d.text=d.node=T.pre,T.bgClass&&(d.bgClass=T.bgClass),T.textClass&&(d.textClass=T.textClass),vd(l,d),Pw(l,d,b,m),kw(l,d,m),d.node}function kw(l,d,b){if(Nw(l,d.line,d,b,!0),d.rest)for(var m=0;m<d.rest.length;m++)Nw(l,d.rest[m],d,b,!1)}function Nw(l,d,b,m,T){if(d.widgets)for(var L=zs(b),O=0,H=d.widgets;O<H.length;++O){var X=H[O],J=P("div",[X.node],"CodeMirror-linewidget"+(X.className?" "+X.className:""));X.handleMouseEvents||J.setAttribute("cm-ignore-events","true"),s2(X,J,b,m),l.display.input.setUneditable(J),T&&X.above?L.insertBefore(J,b.gutter||b.text):L.appendChild(J),Rr(X,"redraw")}}function s2(l,d,b,m){if(l.noHScroll){(b.alignable||(b.alignable=[])).push(d);var T=m.wrapperWidth;d.style.left=m.fixedPos+"px",l.coverGutter||(T-=m.gutterTotalWidth,d.style.paddingLeft=m.gutterTotalWidth+"px"),d.style.width=T+"px"}l.coverGutter&&(d.style.zIndex=5,d.style.position="relative",l.noHScroll||(d.style.marginLeft=-m.gutterTotalWidth+"px"))}function Gs(l){if(l.height!=null)return l.height;var d=l.doc.cm;if(!d)return 0;if(!z(document.body,l.node)){var b="position: relative;";l.coverGutter&&(b+="margin-left: -"+d.display.gutters.offsetWidth+"px;"),l.noHScroll&&(b+="width: "+d.display.wrapper.clientWidth+"px;"),R(d.display.measure,P("div",[l.node],null,b))}return l.height=l.node.parentNode.offsetHeight}function Oa(l,d){for(var b=Tt(d);b!=l.wrapper;b=b.parentNode)if(!b||b.nodeType==1&&b.getAttribute("cm-ignore-events")=="true"||b.parentNode==l.sizer&&b!=l.mover)return!0}function _u(l){return l.lineSpace.offsetTop}function pd(l){return l.mover.offsetHeight-l.lineSpace.offsetHeight}function Ow(l){if(l.cachedPaddingH)return l.cachedPaddingH;var d=R(l.measure,P("pre","x","CodeMirror-line-like")),b=window.getComputedStyle?window.getComputedStyle(d):d.currentStyle,m={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};return!isNaN(m.left)&&!isNaN(m.right)&&(l.cachedPaddingH=m),m}function va(l){return $-l.display.nativeBarWidth}function Ui(l){return l.display.scroller.clientWidth-va(l)-l.display.barWidth}function gd(l){return l.display.scroller.clientHeight-va(l)-l.display.barHeight}function l2(l,d,b){var m=l.options.lineWrapping,T=m&&Ui(l);if(!d.measure.heights||m&&d.measure.width!=T){var L=d.measure.heights=[];if(m){d.measure.width=T;for(var O=d.text.firstChild.getClientRects(),H=0;H<O.length-1;H++){var X=O[H],J=O[H+1];Math.abs(X.bottom-J.bottom)>2&&L.push((X.bottom+J.top)/2-b.top)}}L.push(b.bottom-b.top)}}function Iw(l,d,b){if(l.line==d)return{map:l.measure.map,cache:l.measure.cache};if(l.rest){for(var m=0;m<l.rest.length;m++)if(l.rest[m]==d)return{map:l.measure.maps[m],cache:l.measure.caches[m]};for(var T=0;T<l.rest.length;T++)if(Q(l.rest[T])>b)return{map:l.measure.maps[T],cache:l.measure.caches[T],before:!0}}}function u2(l,d){d=Jn(d);var b=Q(d),m=l.display.externalMeasured=new _w(l.doc,d,b);m.lineN=b;var T=m.built=Lw(l,m);return m.text=T.pre,R(l.display.lineMeasure,T.pre),m}function Fw(l,d,b,m){return pa(l,No(l,d),b,m)}function yd(l,d){if(d>=l.display.viewFrom&&d<l.display.viewTo)return l.display.view[$i(l,d)];var b=l.display.externalMeasured;if(b&&d>=b.lineN&&d<b.lineN+b.size)return b}function No(l,d){var b=Q(d),m=yd(l,b);m&&!m.text?m=null:m&&m.changes&&(Mw(l,m,b,Cd(l)),l.curOp.forceUpdate=!0),m||(m=u2(l,d));var T=Iw(m,d,b);return{line:d,view:m,rect:null,map:T.map,cache:T.cache,before:T.before,hasHeights:!1}}function pa(l,d,b,m,T){d.before&&(b=-1);var L=b+(m||""),O;return d.cache.hasOwnProperty(L)?O=d.cache[L]:(d.rect||(d.rect=d.view.text.getBoundingClientRect()),d.hasHeights||(l2(l,d.view,d.rect),d.hasHeights=!0),O=c2(l,d,b,m),O.bogus||(d.cache[L]=O)),{left:O.left,right:O.right,top:T?O.rtop:O.top,bottom:T?O.rbottom:O.bottom}}var Bw={left:0,right:0,top:0,bottom:0};function qw(l,d,b){for(var m,T,L,O,H,X,J=0;J<l.length;J+=3)if(H=l[J],X=l[J+1],d<H?(T=0,L=1,O="left"):d<X?(T=d-H,L=T+1):(J==l.length-3||d==X&&l[J+3]>d)&&(L=X-H,T=L-1,d>=X&&(O="right")),T!=null){if(m=l[J+2],H==X&&b==(m.insertLeft?"left":"right")&&(O=b),b=="left"&&T==0)for(;J&&l[J-2]==l[J-3]&&l[J-1].insertLeft;)m=l[(J-=3)+2],O="left";if(b=="right"&&T==X-H)for(;J<l.length-3&&l[J+3]==l[J+4]&&!l[J+5].insertLeft;)m=l[(J+=3)+2],O="right";break}return{node:m,start:T,end:L,collapse:O,coverStart:H,coverEnd:X}}function f2(l,d){var b=Bw;if(d=="left")for(var m=0;m<l.length&&(b=l[m]).left==b.right;m++);else for(var T=l.length-1;T>=0&&(b=l[T]).left==b.right;T--);return b}function c2(l,d,b,m){var T=qw(d.map,b,m),L=T.node,O=T.start,H=T.end,X=T.collapse,J;if(L.nodeType==3){for(var ce=0;ce<4;ce++){for(;O&&Xe(d.line.text.charAt(T.coverStart+O));)--O;for(;T.coverStart+H<T.coverEnd&&Xe(d.line.text.charAt(T.coverStart+H));)++H;if(u&&f<9&&O==0&&H==T.coverEnd-T.coverStart?J=L.parentNode.getBoundingClientRect():J=f2(I(L,O,H).getClientRects(),m),J.left||J.right||O==0)break;H=O,O=O-1,X="right"}u&&f<11&&(J=d2(l.display.measure,J))}else{O>0&&(X=m="right");var ge;l.options.lineWrapping&&(ge=L.getClientRects()).length>1?J=ge[m=="right"?ge.length-1:0]:J=L.getBoundingClientRect()}if(u&&f<9&&!O&&(!J||!J.left&&!J.right)){var _e=L.parentNode.getClientRects()[0];_e?J={left:_e.left,right:_e.left+Io(l.display),top:_e.top,bottom:_e.bottom}:J=Bw}for(var Le=J.top-d.rect.top,Ne=J.bottom-d.rect.top,Be=(Le+Ne)/2,Ke=d.view.measure.heights,et=0;et<Ke.length-1&&!(Be<Ke[et]);et++);var ot=et?Ke[et-1]:0,tt=Ke[et],lt={left:(X=="right"?J.right:J.left)-d.rect.left,right:(X=="left"?J.left:J.right)-d.rect.left,top:ot,bottom:tt};return!J.left&&!J.right&&(lt.bogus=!0),l.options.singleCursorHeightPerLine||(lt.rtop=Le,lt.rbottom=Ne),lt}function d2(l,d){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!tr(l))return d;var b=screen.logicalXDPI/screen.deviceXDPI,m=screen.logicalYDPI/screen.deviceYDPI;return{left:d.left*b,right:d.right*b,top:d.top*m,bottom:d.bottom*m}}function zw(l){if(l.measure&&(l.measure.cache={},l.measure.heights=null,l.rest))for(var d=0;d<l.rest.length;d++)l.measure.caches[d]={}}function Gw(l){l.display.externalMeasure=null,q(l.display.lineMeasure);for(var d=0;d<l.display.view.length;d++)zw(l.display.view[d])}function Hs(l){Gw(l),l.display.cachedCharWidth=l.display.cachedTextHeight=l.display.cachedPaddingH=null,l.options.lineWrapping||(l.display.maxLineChanged=!0),l.display.lineNumChars=null}function Hw(l){return p&&x?-(l.body.getBoundingClientRect().left-parseInt(getComputedStyle(l.body).marginLeft)):l.defaultView.pageXOffset||(l.documentElement||l.body).scrollLeft}function Uw(l){return p&&x?-(l.body.getBoundingClientRect().top-parseInt(getComputedStyle(l.body).marginTop)):l.defaultView.pageYOffset||(l.documentElement||l.body).scrollTop}function md(l){var d=Jn(l),b=d.widgets,m=0;if(b)for(var T=0;T<b.length;++T)b[T].above&&(m+=Gs(b[T]));return m}function Mu(l,d,b,m,T){if(!T){var L=md(d);b.top+=L,b.bottom+=L}if(m=="line")return b;m||(m="local");var O=Na(d);if(m=="local"?O+=_u(l.display):O-=l.display.viewOffset,m=="page"||m=="window"){var H=l.display.lineSpace.getBoundingClientRect();O+=H.top+(m=="window"?0:Uw(Z(l)));var X=H.left+(m=="window"?0:Hw(Z(l)));b.left+=X,b.right+=X}return b.top+=O,b.bottom+=O,b}function Vw(l,d,b){if(b=="div")return d;var m=d.left,T=d.top;if(b=="page")m-=Hw(Z(l)),T-=Uw(Z(l));else if(b=="local"||!b){var L=l.display.sizer.getBoundingClientRect();m+=L.left,T+=L.top}var O=l.display.lineSpace.getBoundingClientRect();return{left:m-O.left,top:T-O.top}}function Ru(l,d,b,m,T){return m||(m=ft(l.doc,d.line)),Mu(l,m,Fw(l,m,d.ch,T),b)}function ea(l,d,b,m,T,L){m=m||ft(l.doc,d.line),T||(T=No(l,m));function O(Ne,Be){var Ke=pa(l,T,Ne,Be?"right":"left",L);return Be?Ke.left=Ke.right:Ke.right=Ke.left,Mu(l,m,Ke,b)}var H=xe(m,l.doc.direction),X=d.ch,J=d.sticky;if(X>=m.text.length?(X=m.text.length,J="before"):X<=0&&(X=0,J="after"),!H)return O(J=="before"?X-1:X,J=="before");function ce(Ne,Be,Ke){var et=H[Be],ot=et.level==1;return O(Ke?Ne-1:Ne,ot!=Ke)}var ge=me(H,X,J),_e=pe,Le=ce(X,ge,J=="before");return _e!=null&&(Le.other=ce(X,_e,J!="before")),Le}function Ww(l,d){var b=0;d=Ct(l.doc,d),l.options.lineWrapping||(b=Io(l.display)*d.ch);var m=ft(l.doc,d.line),T=Na(m)+_u(l.display);return{left:b,right:b,top:T,bottom:T+m.height}}function bd(l,d,b,m,T){var L=Re(l,d,b);return L.xRel=T,m&&(L.outside=m),L}function wd(l,d,b){var m=l.doc;if(b+=l.display.viewOffset,b<0)return bd(m.first,0,null,-1,-1);var T=fe(m,b),L=m.first+m.size-1;if(T>L)return bd(m.first+m.size-1,ft(m,L).text.length,null,1,1);d<0&&(d=0);for(var O=ft(m,T);;){var H=h2(l,O,T,d,b),X=GO(O,H.ch+(H.xRel>0||H.outside>0?1:0));if(!X)return H;var J=X.find(1);if(J.line==T)return J;O=ft(m,T=J.line)}}function $w(l,d,b,m){m-=md(d);var T=d.text.length,L=he(function(O){return pa(l,b,O-1).bottom<=m},T,0);return T=he(function(O){return pa(l,b,O).top>m},L,T),{begin:L,end:T}}function Yw(l,d,b,m){b||(b=No(l,d));var T=Mu(l,d,pa(l,b,m),"line").top;return $w(l,d,b,T)}function xd(l,d,b,m){return l.bottom<=b?!1:l.top>b?!0:(m?l.left:l.right)>d}function h2(l,d,b,m,T){T-=Na(d);var L=No(l,d),O=md(d),H=0,X=d.text.length,J=!0,ce=xe(d,l.doc.direction);if(ce){var ge=(l.options.lineWrapping?p2:v2)(l,d,b,L,ce,m,T);J=ge.level!=1,H=J?ge.from:ge.to-1,X=J?ge.to:ge.from-1}var _e=null,Le=null,Ne=he(function(yt){var pt=pa(l,L,yt);return pt.top+=O,pt.bottom+=O,xd(pt,m,T,!1)?(pt.top<=T&&pt.left<=m&&(_e=yt,Le=pt),!0):!1},H,X),Be,Ke,et=!1;if(Le){var ot=m-Le.left<Le.right-m,tt=ot==J;Ne=_e+(tt?0:1),Ke=tt?"after":"before",Be=ot?Le.left:Le.right}else{!J&&(Ne==X||Ne==H)&&Ne++,Ke=Ne==0?"after":Ne==d.text.length?"before":pa(l,L,Ne-(J?1:0)).bottom+O<=T==J?"after":"before";var lt=ea(l,Re(b,Ne,Ke),"line",d,L);Be=lt.left,et=T<lt.top?-1:T>=lt.bottom?1:0}return Ne=We(d.text,Ne,1),bd(b,Ne,Ke,et,m-Be)}function v2(l,d,b,m,T,L,O){var H=he(function(ge){var _e=T[ge],Le=_e.level!=1;return xd(ea(l,Re(b,Le?_e.to:_e.from,Le?"before":"after"),"line",d,m),L,O,!0)},0,T.length-1),X=T[H];if(H>0){var J=X.level!=1,ce=ea(l,Re(b,J?X.from:X.to,J?"after":"before"),"line",d,m);xd(ce,L,O,!0)&&ce.top>O&&(X=T[H-1])}return X}function p2(l,d,b,m,T,L,O){var H=$w(l,d,m,O),X=H.begin,J=H.end;/\s/.test(d.text.charAt(J-1))&&J--;for(var ce=null,ge=null,_e=0;_e<T.length;_e++){var Le=T[_e];if(!(Le.from>=J||Le.to<=X)){var Ne=Le.level!=1,Be=pa(l,m,Ne?Math.min(J,Le.to)-1:Math.max(X,Le.from)).right,Ke=Be<L?L-Be+1e9:Be-L;(!ce||ge>Ke)&&(ce=Le,ge=Ke)}}return ce||(ce=T[T.length-1]),ce.from<X&&(ce={from:X,to:ce.to,level:ce.level}),ce.to>J&&(ce={from:ce.from,to:J,level:ce.level}),ce}var Vi;function Oo(l){if(l.cachedTextHeight!=null)return l.cachedTextHeight;if(Vi==null){Vi=P("pre",null,"CodeMirror-line-like");for(var d=0;d<49;++d)Vi.appendChild(document.createTextNode("x")),Vi.appendChild(P("br"));Vi.appendChild(document.createTextNode("x"))}R(l.measure,Vi);var b=Vi.offsetHeight/50;return b>3&&(l.cachedTextHeight=b),q(l.measure),b||1}function Io(l){if(l.cachedCharWidth!=null)return l.cachedCharWidth;var d=P("span","xxxxxxxxxx"),b=P("pre",[d],"CodeMirror-line-like");R(l.measure,b);var m=d.getBoundingClientRect(),T=(m.right-m.left)/10;return T>2&&(l.cachedCharWidth=T),T||10}function Cd(l){for(var d=l.display,b={},m={},T=d.gutters.clientLeft,L=d.gutters.firstChild,O=0;L;L=L.nextSibling,++O){var H=l.display.gutterSpecs[O].className;b[H]=L.offsetLeft+L.clientLeft+T,m[H]=L.clientWidth}return{fixedPos:Ed(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:b,gutterWidth:m,wrapperWidth:d.wrapper.clientWidth}}function Ed(l){return l.scroller.getBoundingClientRect().left-l.sizer.getBoundingClientRect().left}function Xw(l){var d=Oo(l.display),b=l.options.lineWrapping,m=b&&Math.max(5,l.display.scroller.clientWidth/Io(l.display)-3);return function(T){if(ai(l.doc,T))return 0;var L=0;if(T.widgets)for(var O=0;O<T.widgets.length;O++)T.widgets[O].height&&(L+=T.widgets[O].height);return b?L+(Math.ceil(T.text.length/m)||1)*d:L+d}}function Td(l){var d=l.doc,b=Xw(l);d.iter(function(m){var T=b(m);T!=m.height&&Pt(m,T)})}function Wi(l,d,b,m){var T=l.display;if(!b&&Tt(d).getAttribute("cm-not-content")=="true")return null;var L,O,H=T.lineSpace.getBoundingClientRect();try{L=d.clientX-H.left,O=d.clientY-H.top}catch{return null}var X=wd(l,L,O),J;if(m&&X.xRel>0&&(J=ft(l.doc,X.line).text).length==X.ch){var ce=te(J,J.length,l.options.tabSize)-J.length;X=Re(X.line,Math.max(0,Math.round((L-Ow(l.display).left)/Io(l.display))-ce))}return X}function $i(l,d){if(d>=l.display.viewTo||(d-=l.display.viewFrom,d<0))return null;for(var b=l.display.view,m=0;m<b.length;m++)if(d-=b[m].size,d<0)return m}function mn(l,d,b,m){d==null&&(d=l.doc.first),b==null&&(b=l.doc.first+l.doc.size),m||(m=0);var T=l.display;if(m&&b<T.viewTo&&(T.updateLineNumbers==null||T.updateLineNumbers>d)&&(T.updateLineNumbers=d),l.curOp.viewChanged=!0,d>=T.viewTo)ka&&cd(l.doc,d)<T.viewTo&&oi(l);else if(b<=T.viewFrom)ka&&Sw(l.doc,b+m)>T.viewFrom?oi(l):(T.viewFrom+=m,T.viewTo+=m);else if(d<=T.viewFrom&&b>=T.viewTo)oi(l);else if(d<=T.viewFrom){var L=Pu(l,b,b+m,1);L?(T.view=T.view.slice(L.index),T.viewFrom=L.lineN,T.viewTo+=m):oi(l)}else if(b>=T.viewTo){var O=Pu(l,d,d,-1);O?(T.view=T.view.slice(0,O.index),T.viewTo=O.lineN):oi(l)}else{var H=Pu(l,d,d,-1),X=Pu(l,b,b+m,1);H&&X?(T.view=T.view.slice(0,H.index).concat(Du(l,H.lineN,X.lineN)).concat(T.view.slice(X.index)),T.viewTo+=m):oi(l)}var J=T.externalMeasured;J&&(b<J.lineN?J.lineN+=m:d<J.lineN+J.size&&(T.externalMeasured=null))}function ii(l,d,b){l.curOp.viewChanged=!0;var m=l.display,T=l.display.externalMeasured;if(T&&d>=T.lineN&&d<T.lineN+T.size&&(m.externalMeasured=null),!(d<m.viewFrom||d>=m.viewTo)){var L=m.view[$i(l,d)];if(L.node!=null){var O=L.changes||(L.changes=[]);se(O,b)==-1&&O.push(b)}}}function oi(l){l.display.viewFrom=l.display.viewTo=l.doc.first,l.display.view=[],l.display.viewOffset=0}function Pu(l,d,b,m){var T=$i(l,d),L,O=l.display.view;if(!ka||b==l.doc.first+l.doc.size)return{index:T,lineN:b};for(var H=l.display.viewFrom,X=0;X<T;X++)H+=O[X].size;if(H!=d){if(m>0){if(T==O.length-1)return null;L=H+O[T].size-d,T++}else L=H-d;d+=L,b+=L}for(;cd(l.doc,b)!=b;){if(T==(m<0?0:O.length-1))return null;b+=m*O[T-(m<0?1:0)].size,T+=m}return{index:T,lineN:b}}function g2(l,d,b){var m=l.display,T=m.view;T.length==0||d>=m.viewTo||b<=m.viewFrom?(m.view=Du(l,d,b),m.viewFrom=d):(m.viewFrom>d?m.view=Du(l,d,m.viewFrom).concat(m.view):m.viewFrom<d&&(m.view=m.view.slice($i(l,d))),m.viewFrom=d,m.viewTo<b?m.view=m.view.concat(Du(l,m.viewTo,b)):m.viewTo>b&&(m.view=m.view.slice(0,$i(l,b)))),m.viewTo=b}function Kw(l){for(var d=l.display.view,b=0,m=0;m<d.length;m++){var T=d[m];!T.hidden&&(!T.node||T.changes)&&++b}return b}function Us(l){l.display.input.showSelection(l.display.input.prepareSelection())}function jw(l,d){d===void 0&&(d=!0);var b=l.doc,m={},T=m.cursors=document.createDocumentFragment(),L=m.selection=document.createDocumentFragment(),O=l.options.$customCursor;O&&(d=!0);for(var H=0;H<b.sel.ranges.length;H++)if(!(!d&&H==b.sel.primIndex)){var X=b.sel.ranges[H];if(!(X.from().line>=l.display.viewTo||X.to().line<l.display.viewFrom)){var J=X.empty();if(O){var ce=O(l,X);ce&&Sd(l,ce,T)}else(J||l.options.showCursorWhenSelecting)&&Sd(l,X.head,T);J||y2(l,X,L)}}return m}function Sd(l,d,b){var m=ea(l,d,"div",null,null,!l.options.singleCursorHeightPerLine),T=b.appendChild(P("div"," ","CodeMirror-cursor"));if(T.style.left=m.left+"px",T.style.top=m.top+"px",T.style.height=Math.max(0,m.bottom-m.top)*l.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(l.getWrapperElement().className)){var L=Ru(l,d,"div",null,null),O=L.right-L.left;T.style.width=(O>0?O:l.defaultCharWidth())+"px"}if(m.other){var H=b.appendChild(P("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));H.style.display="",H.style.left=m.other.left+"px",H.style.top=m.other.top+"px",H.style.height=(m.other.bottom-m.other.top)*.85+"px"}}function ku(l,d){return l.top-d.top||l.left-d.left}function y2(l,d,b){var m=l.display,T=l.doc,L=document.createDocumentFragment(),O=Ow(l.display),H=O.left,X=Math.max(m.sizerWidth,Ui(l)-m.sizer.offsetLeft)-O.right,J=T.direction=="ltr";function ce(tt,lt,yt,pt){lt<0&&(lt=0),lt=Math.round(lt),pt=Math.round(pt),L.appendChild(P("div",null,"CodeMirror-selected","position: absolute; left: "+tt+`px;
                             top: `+lt+"px; width: "+(yt??X-tt)+`px;
                             height: `+(pt-lt)+"px"))}function ge(tt,lt,yt){var pt=ft(T,tt),At=pt.text.length,Qt,Nr;function dr(Cr,xn){return Ru(l,Re(tt,Cr),"div",pt,xn)}function _n(Cr,xn,Hr){var Ar=Yw(l,pt,null,Cr),Er=xn=="ltr"==(Hr=="after")?"left":"right",vr=Hr=="after"?Ar.begin:Ar.end-(/\s/.test(pt.text.charAt(Ar.end-1))?2:1);return dr(vr,Er)[Er]}var wn=xe(pt,T.direction);return j(wn,lt||0,yt??At,function(Cr,xn,Hr,Ar){var Er=Hr=="ltr",vr=dr(Cr,Er?"left":"right"),Cn=dr(xn-1,Er?"right":"left"),Ko=lt==null&&Cr==0,di=yt==null&&xn==At,Qr=Ar==0,ga=!wn||Ar==wn.length-1;if(Cn.top-vr.top<=3){var Or=(J?Ko:di)&&Qr,Qd=(J?di:Ko)&&ga,Ba=Or?H:(Er?vr:Cn).left,Zi=Qd?X:(Er?Cn:vr).right;ce(Ba,vr.top,Zi-Ba,vr.bottom)}else{var Qi,un,jo,Jd;Er?(Qi=J&&Ko&&Qr?H:vr.left,un=J?X:_n(Cr,Hr,"before"),jo=J?H:_n(xn,Hr,"after"),Jd=J&&di&&ga?X:Cn.right):(Qi=J?_n(Cr,Hr,"before"):H,un=!J&&Ko&&Qr?X:vr.right,jo=!J&&di&&ga?H:Cn.left,Jd=J?_n(xn,Hr,"after"):X),ce(Qi,vr.top,un-Qi,vr.bottom),vr.bottom<Cn.top&&ce(H,vr.bottom,null,Cn.top),ce(jo,Cn.top,Jd-jo,Cn.bottom)}(!Qt||ku(vr,Qt)<0)&&(Qt=vr),ku(Cn,Qt)<0&&(Qt=Cn),(!Nr||ku(vr,Nr)<0)&&(Nr=vr),ku(Cn,Nr)<0&&(Nr=Cn)}),{start:Qt,end:Nr}}var _e=d.from(),Le=d.to();if(_e.line==Le.line)ge(_e.line,_e.ch,Le.ch);else{var Ne=ft(T,_e.line),Be=ft(T,Le.line),Ke=Jn(Ne)==Jn(Be),et=ge(_e.line,_e.ch,Ke?Ne.text.length+1:null).end,ot=ge(Le.line,Ke?0:null,Le.ch).start;Ke&&(et.top<ot.top-2?(ce(et.right,et.top,null,et.bottom),ce(H,ot.top,ot.left,ot.bottom)):ce(et.right,et.top,ot.left-et.right,et.bottom)),et.bottom<ot.top&&ce(H,et.bottom,null,ot.top)}b.appendChild(L)}function Ad(l){if(l.state.focused){var d=l.display;clearInterval(d.blinker);var b=!0;d.cursorDiv.style.visibility="",l.options.cursorBlinkRate>0?d.blinker=setInterval(function(){l.hasFocus()||Fo(l),d.cursorDiv.style.visibility=(b=!b)?"":"hidden"},l.options.cursorBlinkRate):l.options.cursorBlinkRate<0&&(d.cursorDiv.style.visibility="hidden")}}function Zw(l){l.hasFocus()||(l.display.input.focus(),l.state.focused||Dd(l))}function Ld(l){l.state.delayingBlurEvent=!0,setTimeout(function(){l.state.delayingBlurEvent&&(l.state.delayingBlurEvent=!1,l.state.focused&&Fo(l))},100)}function Dd(l,d){l.state.delayingBlurEvent&&!l.state.draggingText&&(l.state.delayingBlurEvent=!1),l.options.readOnly!="nocursor"&&(l.state.focused||(He(l,"focus",l,d),l.state.focused=!0,re(l.display.wrapper,"CodeMirror-focused"),!l.curOp&&l.display.selForContextMenu!=l.doc.sel&&(l.display.input.reset(),c&&setTimeout(function(){return l.display.input.reset(!0)},20)),l.display.input.receivedFocus()),Ad(l))}function Fo(l,d){l.state.delayingBlurEvent||(l.state.focused&&(He(l,"blur",l,d),l.state.focused=!1,B(l.display.wrapper,"CodeMirror-focused")),clearInterval(l.display.blinker),setTimeout(function(){l.state.focused||(l.display.shift=!1)},150))}function Nu(l){for(var d=l.display,b=d.lineDiv.offsetTop,m=Math.max(0,d.scroller.getBoundingClientRect().top),T=d.lineDiv.getBoundingClientRect().top,L=0,O=0;O<d.view.length;O++){var H=d.view[O],X=l.options.lineWrapping,J=void 0,ce=0;if(!H.hidden){if(T+=H.line.height,u&&f<8){var ge=H.node.offsetTop+H.node.offsetHeight;J=ge-b,b=ge}else{var _e=H.node.getBoundingClientRect();J=_e.bottom-_e.top,!X&&H.text.firstChild&&(ce=H.text.firstChild.getBoundingClientRect().right-_e.left-1)}var Le=H.line.height-J;if((Le>.005||Le<-.005)&&(T<m&&(L-=Le),Pt(H.line,J),Qw(H.line),H.rest))for(var Ne=0;Ne<H.rest.length;Ne++)Qw(H.rest[Ne]);if(ce>l.display.sizerWidth){var Be=Math.ceil(ce/Io(l.display));Be>l.display.maxLineLength&&(l.display.maxLineLength=Be,l.display.maxLine=H.line,l.display.maxLineChanged=!0)}}}Math.abs(L)>2&&(d.scroller.scrollTop+=L)}function Qw(l){if(l.widgets)for(var d=0;d<l.widgets.length;++d){var b=l.widgets[d],m=b.node.parentNode;m&&(b.height=m.offsetHeight)}}function Ou(l,d,b){var m=b&&b.top!=null?Math.max(0,b.top):l.scroller.scrollTop;m=Math.floor(m-_u(l));var T=b&&b.bottom!=null?b.bottom:m+l.wrapper.clientHeight,L=fe(d,m),O=fe(d,T);if(b&&b.ensure){var H=b.ensure.from.line,X=b.ensure.to.line;H<L?(L=H,O=fe(d,Na(ft(d,H))+l.wrapper.clientHeight)):Math.min(X,d.lastLine())>=O&&(L=fe(d,Na(ft(d,X))-l.wrapper.clientHeight),O=X)}return{from:L,to:Math.max(O,L+1)}}function m2(l,d){if(!Ue(l,"scrollCursorIntoView")){var b=l.display,m=b.sizer.getBoundingClientRect(),T=null,L=b.wrapper.ownerDocument;if(d.top+m.top<0?T=!0:d.bottom+m.top>(L.defaultView.innerHeight||L.documentElement.clientHeight)&&(T=!1),T!=null&&!v){var O=P("div","​",null,`position: absolute;
                         top: `+(d.top-b.viewOffset-_u(l.display))+`px;
                         height: `+(d.bottom-d.top+va(l)+b.barHeight)+`px;
                         left: `+d.left+"px; width: "+Math.max(2,d.right-d.left)+"px;");l.display.lineSpace.appendChild(O),O.scrollIntoView(T),l.display.lineSpace.removeChild(O)}}}function b2(l,d,b,m){m==null&&(m=0);var T;!l.options.lineWrapping&&d==b&&(b=d.sticky=="before"?Re(d.line,d.ch+1,"before"):d,d=d.ch?Re(d.line,d.sticky=="before"?d.ch-1:d.ch,"after"):d);for(var L=0;L<5;L++){var O=!1,H=ea(l,d),X=!b||b==d?H:ea(l,b);T={left:Math.min(H.left,X.left),top:Math.min(H.top,X.top)-m,right:Math.max(H.left,X.left),bottom:Math.max(H.bottom,X.bottom)+m};var J=_d(l,T),ce=l.doc.scrollTop,ge=l.doc.scrollLeft;if(J.scrollTop!=null&&(Ws(l,J.scrollTop),Math.abs(l.doc.scrollTop-ce)>1&&(O=!0)),J.scrollLeft!=null&&(Yi(l,J.scrollLeft),Math.abs(l.doc.scrollLeft-ge)>1&&(O=!0)),!O)break}return T}function w2(l,d){var b=_d(l,d);b.scrollTop!=null&&Ws(l,b.scrollTop),b.scrollLeft!=null&&Yi(l,b.scrollLeft)}function _d(l,d){var b=l.display,m=Oo(l.display);d.top<0&&(d.top=0);var T=l.curOp&&l.curOp.scrollTop!=null?l.curOp.scrollTop:b.scroller.scrollTop,L=gd(l),O={};d.bottom-d.top>L&&(d.bottom=d.top+L);var H=l.doc.height+pd(b),X=d.top<m,J=d.bottom>H-m;if(d.top<T)O.scrollTop=X?0:d.top;else if(d.bottom>T+L){var ce=Math.min(d.top,(J?H:d.bottom)-L);ce!=T&&(O.scrollTop=ce)}var ge=l.options.fixedGutter?0:b.gutters.offsetWidth,_e=l.curOp&&l.curOp.scrollLeft!=null?l.curOp.scrollLeft:b.scroller.scrollLeft-ge,Le=Ui(l)-b.gutters.offsetWidth,Ne=d.right-d.left>Le;return Ne&&(d.right=d.left+Le),d.left<10?O.scrollLeft=0:d.left<_e?O.scrollLeft=Math.max(0,d.left+ge-(Ne?0:10)):d.right>Le+_e-3&&(O.scrollLeft=d.right+(Ne?0:10)-Le),O}function Md(l,d){d!=null&&(Iu(l),l.curOp.scrollTop=(l.curOp.scrollTop==null?l.doc.scrollTop:l.curOp.scrollTop)+d)}function Bo(l){Iu(l);var d=l.getCursor();l.curOp.scrollToPos={from:d,to:d,margin:l.options.cursorScrollMargin}}function Vs(l,d,b){(d!=null||b!=null)&&Iu(l),d!=null&&(l.curOp.scrollLeft=d),b!=null&&(l.curOp.scrollTop=b)}function x2(l,d){Iu(l),l.curOp.scrollToPos=d}function Iu(l){var d=l.curOp.scrollToPos;if(d){l.curOp.scrollToPos=null;var b=Ww(l,d.from),m=Ww(l,d.to);Jw(l,b,m,d.margin)}}function Jw(l,d,b,m){var T=_d(l,{left:Math.min(d.left,b.left),top:Math.min(d.top,b.top)-m,right:Math.max(d.right,b.right),bottom:Math.max(d.bottom,b.bottom)+m});Vs(l,T.scrollLeft,T.scrollTop)}function Ws(l,d){Math.abs(l.doc.scrollTop-d)<2||(a||Pd(l,{top:d}),ex(l,d,!0),a&&Pd(l),Xs(l,100))}function ex(l,d,b){d=Math.max(0,Math.min(l.display.scroller.scrollHeight-l.display.scroller.clientHeight,d)),!(l.display.scroller.scrollTop==d&&!b)&&(l.doc.scrollTop=d,l.display.scrollbars.setScrollTop(d),l.display.scroller.scrollTop!=d&&(l.display.scroller.scrollTop=d))}function Yi(l,d,b,m){d=Math.max(0,Math.min(d,l.display.scroller.scrollWidth-l.display.scroller.clientWidth)),!((b?d==l.doc.scrollLeft:Math.abs(l.doc.scrollLeft-d)<2)&&!m)&&(l.doc.scrollLeft=d,ix(l),l.display.scroller.scrollLeft!=d&&(l.display.scroller.scrollLeft=d),l.display.scrollbars.setScrollLeft(d))}function $s(l){var d=l.display,b=d.gutters.offsetWidth,m=Math.round(l.doc.height+pd(l.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:l.options.fixedGutter?b:0,docHeight:m,scrollHeight:m+va(l)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:b}}var Xi=function(l,d,b){this.cm=b;var m=this.vert=P("div",[P("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),T=this.horiz=P("div",[P("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");m.tabIndex=T.tabIndex=-1,l(m),l(T),Ee(m,"scroll",function(){m.clientHeight&&d(m.scrollTop,"vertical")}),Ee(T,"scroll",function(){T.clientWidth&&d(T.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,u&&f<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Xi.prototype.update=function(l){var d=l.scrollWidth>l.clientWidth+1,b=l.scrollHeight>l.clientHeight+1,m=l.nativeBarWidth;if(b){this.vert.style.display="block",this.vert.style.bottom=d?m+"px":"0";var T=l.viewHeight-(d?m:0);this.vert.firstChild.style.height=Math.max(0,l.scrollHeight-l.clientHeight+T)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(d){this.horiz.style.display="block",this.horiz.style.right=b?m+"px":"0",this.horiz.style.left=l.barLeft+"px";var L=l.viewWidth-l.barLeft-(b?m:0);this.horiz.firstChild.style.width=Math.max(0,l.scrollWidth-l.clientWidth+L)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&l.clientHeight>0&&(m==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:b?m:0,bottom:d?m:0}},Xi.prototype.setScrollLeft=function(l){this.horiz.scrollLeft!=l&&(this.horiz.scrollLeft=l),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Xi.prototype.setScrollTop=function(l){this.vert.scrollTop!=l&&(this.vert.scrollTop=l),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Xi.prototype.zeroWidthHack=function(){var l=A&&!w?"12px":"18px";this.horiz.style.height=this.vert.style.width=l,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new ie,this.disableVert=new ie},Xi.prototype.enableZeroWidthBar=function(l,d,b){l.style.visibility="";function m(){var T=l.getBoundingClientRect(),L=b=="vert"?document.elementFromPoint(T.right-1,(T.top+T.bottom)/2):document.elementFromPoint((T.right+T.left)/2,T.bottom-1);L!=l?l.style.visibility="hidden":d.set(1e3,m)}d.set(1e3,m)},Xi.prototype.clear=function(){var l=this.horiz.parentNode;l.removeChild(this.horiz),l.removeChild(this.vert)};var Ys=function(){};Ys.prototype.update=function(){return{bottom:0,right:0}},Ys.prototype.setScrollLeft=function(){},Ys.prototype.setScrollTop=function(){},Ys.prototype.clear=function(){};function qo(l,d){d||(d=$s(l));var b=l.display.barWidth,m=l.display.barHeight;tx(l,d);for(var T=0;T<4&&b!=l.display.barWidth||m!=l.display.barHeight;T++)b!=l.display.barWidth&&l.options.lineWrapping&&Nu(l),tx(l,$s(l)),b=l.display.barWidth,m=l.display.barHeight}function tx(l,d){var b=l.display,m=b.scrollbars.update(d);b.sizer.style.paddingRight=(b.barWidth=m.right)+"px",b.sizer.style.paddingBottom=(b.barHeight=m.bottom)+"px",b.heightForcer.style.borderBottom=m.bottom+"px solid transparent",m.right&&m.bottom?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=m.bottom+"px",b.scrollbarFiller.style.width=m.right+"px"):b.scrollbarFiller.style.display="",m.bottom&&l.options.coverGutterNextToScrollbar&&l.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=m.bottom+"px",b.gutterFiller.style.width=d.gutterWidth+"px"):b.gutterFiller.style.display=""}var rx={native:Xi,null:Ys};function nx(l){l.display.scrollbars&&(l.display.scrollbars.clear(),l.display.scrollbars.addClass&&B(l.display.wrapper,l.display.scrollbars.addClass)),l.display.scrollbars=new rx[l.options.scrollbarStyle](function(d){l.display.wrapper.insertBefore(d,l.display.scrollbarFiller),Ee(d,"mousedown",function(){l.state.focused&&setTimeout(function(){return l.display.input.focus()},0)}),d.setAttribute("cm-not-content","true")},function(d,b){b=="horizontal"?Yi(l,d):Ws(l,d)},l),l.display.scrollbars.addClass&&re(l.display.wrapper,l.display.scrollbars.addClass)}var C2=0;function Ki(l){l.curOp={cm:l,viewChanged:!1,startHeight:l.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++C2,markArrays:null},JO(l.curOp)}function ji(l){var d=l.curOp;d&&t2(d,function(b){for(var m=0;m<b.ops.length;m++)b.ops[m].cm.curOp=null;E2(b)})}function E2(l){for(var d=l.ops,b=0;b<d.length;b++)T2(d[b]);for(var m=0;m<d.length;m++)S2(d[m]);for(var T=0;T<d.length;T++)A2(d[T]);for(var L=0;L<d.length;L++)L2(d[L]);for(var O=0;O<d.length;O++)D2(d[O])}function T2(l){var d=l.cm,b=d.display;M2(d),l.updateMaxLine&&hd(d),l.mustUpdate=l.viewChanged||l.forceUpdate||l.scrollTop!=null||l.scrollToPos&&(l.scrollToPos.from.line<b.viewFrom||l.scrollToPos.to.line>=b.viewTo)||b.maxLineChanged&&d.options.lineWrapping,l.update=l.mustUpdate&&new Fu(d,l.mustUpdate&&{top:l.scrollTop,ensure:l.scrollToPos},l.forceUpdate)}function S2(l){l.updatedDisplay=l.mustUpdate&&Rd(l.cm,l.update)}function A2(l){var d=l.cm,b=d.display;l.updatedDisplay&&Nu(d),l.barMeasure=$s(d),b.maxLineChanged&&!d.options.lineWrapping&&(l.adjustWidthTo=Fw(d,b.maxLine,b.maxLine.text.length).left+3,d.display.sizerWidth=l.adjustWidthTo,l.barMeasure.scrollWidth=Math.max(b.scroller.clientWidth,b.sizer.offsetLeft+l.adjustWidthTo+va(d)+d.display.barWidth),l.maxScrollLeft=Math.max(0,b.sizer.offsetLeft+l.adjustWidthTo-Ui(d))),(l.updatedDisplay||l.selectionChanged)&&(l.preparedSelection=b.input.prepareSelection())}function L2(l){var d=l.cm;l.adjustWidthTo!=null&&(d.display.sizer.style.minWidth=l.adjustWidthTo+"px",l.maxScrollLeft<d.doc.scrollLeft&&Yi(d,Math.min(d.display.scroller.scrollLeft,l.maxScrollLeft),!0),d.display.maxLineChanged=!1);var b=l.focus&&l.focus==ae(U(d));l.preparedSelection&&d.display.input.showSelection(l.preparedSelection,b),(l.updatedDisplay||l.startHeight!=d.doc.height)&&qo(d,l.barMeasure),l.updatedDisplay&&Nd(d,l.barMeasure),l.selectionChanged&&Ad(d),d.state.focused&&l.updateInput&&d.display.input.reset(l.typing),b&&Zw(l.cm)}function D2(l){var d=l.cm,b=d.display,m=d.doc;if(l.updatedDisplay&&ax(d,l.update),b.wheelStartX!=null&&(l.scrollTop!=null||l.scrollLeft!=null||l.scrollToPos)&&(b.wheelStartX=b.wheelStartY=null),l.scrollTop!=null&&ex(d,l.scrollTop,l.forceScroll),l.scrollLeft!=null&&Yi(d,l.scrollLeft,!0,!0),l.scrollToPos){var T=b2(d,Ct(m,l.scrollToPos.from),Ct(m,l.scrollToPos.to),l.scrollToPos.margin);m2(d,T)}var L=l.maybeHiddenMarkers,O=l.maybeUnhiddenMarkers;if(L)for(var H=0;H<L.length;++H)L[H].lines.length||He(L[H],"hide");if(O)for(var X=0;X<O.length;++X)O[X].lines.length&&He(O[X],"unhide");b.wrapper.offsetHeight&&(m.scrollTop=d.display.scroller.scrollTop),l.changeObjs&&He(d,"changes",d,l.changeObjs),l.update&&l.update.finish()}function Dn(l,d){if(l.curOp)return d();Ki(l);try{return d()}finally{ji(l)}}function Pr(l,d){return function(){if(l.curOp)return d.apply(l,arguments);Ki(l);try{return d.apply(l,arguments)}finally{ji(l)}}}function ln(l){return function(){if(this.curOp)return l.apply(this,arguments);Ki(this);try{return l.apply(this,arguments)}finally{ji(this)}}}function kr(l){return function(){var d=this.cm;if(!d||d.curOp)return l.apply(this,arguments);Ki(d);try{return l.apply(this,arguments)}finally{ji(d)}}}function Xs(l,d){l.doc.highlightFrontier<l.display.viewTo&&l.state.highlight.set(d,ee(_2,l))}function _2(l){var d=l.doc;if(!(d.highlightFrontier>=l.display.viewTo)){var b=+new Date+l.options.workTime,m=Fs(l,d.highlightFrontier),T=[];d.iter(m.line,Math.min(d.first+d.size,l.display.viewTo+500),function(L){if(m.line>=l.display.viewFrom){var O=L.styles,H=L.text.length>l.options.maxHighlightLength?sn(d.mode,m.state):null,X=cw(l,L,m,!0);H&&(m.state=H),L.styles=X.styles;var J=L.styleClasses,ce=X.classes;ce?L.styleClasses=ce:J&&(L.styleClasses=null);for(var ge=!O||O.length!=L.styles.length||J!=ce&&(!J||!ce||J.bgClass!=ce.bgClass||J.textClass!=ce.textClass),_e=0;!ge&&_e<O.length;++_e)ge=O[_e]!=L.styles[_e];ge&&T.push(m.line),L.stateAfter=m.save(),m.nextLine()}else L.text.length<=l.options.maxHighlightLength&&sd(l,L.text,m),L.stateAfter=m.line%5==0?m.save():null,m.nextLine();if(+new Date>b)return Xs(l,l.options.workDelay),!0}),d.highlightFrontier=m.line,d.modeFrontier=Math.max(d.modeFrontier,m.line),T.length&&Dn(l,function(){for(var L=0;L<T.length;L++)ii(l,T[L],"text")})}}var Fu=function(l,d,b){var m=l.display;this.viewport=d,this.visible=Ou(m,l.doc,d),this.editorIsHidden=!m.wrapper.offsetWidth,this.wrapperHeight=m.wrapper.clientHeight,this.wrapperWidth=m.wrapper.clientWidth,this.oldDisplayWidth=Ui(l),this.force=b,this.dims=Cd(l),this.events=[]};Fu.prototype.signal=function(l,d){Je(l,d)&&this.events.push(arguments)},Fu.prototype.finish=function(){for(var l=0;l<this.events.length;l++)He.apply(null,this.events[l])};function M2(l){var d=l.display;!d.scrollbarsClipped&&d.scroller.offsetWidth&&(d.nativeBarWidth=d.scroller.offsetWidth-d.scroller.clientWidth,d.heightForcer.style.height=va(l)+"px",d.sizer.style.marginBottom=-d.nativeBarWidth+"px",d.sizer.style.borderRightWidth=va(l)+"px",d.scrollbarsClipped=!0)}function R2(l){if(l.hasFocus())return null;var d=ae(U(l));if(!d||!z(l.display.lineDiv,d))return null;var b={activeElt:d};if(window.getSelection){var m=Y(l).getSelection();m.anchorNode&&m.extend&&z(l.display.lineDiv,m.anchorNode)&&(b.anchorNode=m.anchorNode,b.anchorOffset=m.anchorOffset,b.focusNode=m.focusNode,b.focusOffset=m.focusOffset)}return b}function P2(l){if(!(!l||!l.activeElt||l.activeElt==ae(W(l.activeElt)))&&(l.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(l.activeElt.nodeName)&&l.anchorNode&&z(document.body,l.anchorNode)&&z(document.body,l.focusNode))){var d=l.activeElt.ownerDocument,b=d.defaultView.getSelection(),m=d.createRange();m.setEnd(l.anchorNode,l.anchorOffset),m.collapse(!1),b.removeAllRanges(),b.addRange(m),b.extend(l.focusNode,l.focusOffset)}}function Rd(l,d){var b=l.display,m=l.doc;if(d.editorIsHidden)return oi(l),!1;if(!d.force&&d.visible.from>=b.viewFrom&&d.visible.to<=b.viewTo&&(b.updateLineNumbers==null||b.updateLineNumbers>=b.viewTo)&&b.renderedView==b.view&&Kw(l)==0)return!1;ox(l)&&(oi(l),d.dims=Cd(l));var T=m.first+m.size,L=Math.max(d.visible.from-l.options.viewportMargin,m.first),O=Math.min(T,d.visible.to+l.options.viewportMargin);b.viewFrom<L&&L-b.viewFrom<20&&(L=Math.max(m.first,b.viewFrom)),b.viewTo>O&&b.viewTo-O<20&&(O=Math.min(T,b.viewTo)),ka&&(L=cd(l.doc,L),O=Sw(l.doc,O));var H=L!=b.viewFrom||O!=b.viewTo||b.lastWrapHeight!=d.wrapperHeight||b.lastWrapWidth!=d.wrapperWidth;g2(l,L,O),b.viewOffset=Na(ft(l.doc,b.viewFrom)),l.display.mover.style.top=b.viewOffset+"px";var X=Kw(l);if(!H&&X==0&&!d.force&&b.renderedView==b.view&&(b.updateLineNumbers==null||b.updateLineNumbers>=b.viewTo))return!1;var J=R2(l);return X>4&&(b.lineDiv.style.display="none"),k2(l,b.updateLineNumbers,d.dims),X>4&&(b.lineDiv.style.display=""),b.renderedView=b.view,P2(J),q(b.cursorDiv),q(b.selectionDiv),b.gutters.style.height=b.sizer.style.minHeight=0,H&&(b.lastWrapHeight=d.wrapperHeight,b.lastWrapWidth=d.wrapperWidth,Xs(l,400)),b.updateLineNumbers=null,!0}function ax(l,d){for(var b=d.viewport,m=!0;;m=!1){if(!m||!l.options.lineWrapping||d.oldDisplayWidth==Ui(l)){if(b&&b.top!=null&&(b={top:Math.min(l.doc.height+pd(l.display)-gd(l),b.top)}),d.visible=Ou(l.display,l.doc,b),d.visible.from>=l.display.viewFrom&&d.visible.to<=l.display.viewTo)break}else m&&(d.visible=Ou(l.display,l.doc,b));if(!Rd(l,d))break;Nu(l);var T=$s(l);Us(l),qo(l,T),Nd(l,T),d.force=!1}d.signal(l,"update",l),(l.display.viewFrom!=l.display.reportedViewFrom||l.display.viewTo!=l.display.reportedViewTo)&&(d.signal(l,"viewportChange",l,l.display.viewFrom,l.display.viewTo),l.display.reportedViewFrom=l.display.viewFrom,l.display.reportedViewTo=l.display.viewTo)}function Pd(l,d){var b=new Fu(l,d);if(Rd(l,b)){Nu(l),ax(l,b);var m=$s(l);Us(l),qo(l,m),Nd(l,m),b.finish()}}function k2(l,d,b){var m=l.display,T=l.options.lineNumbers,L=m.lineDiv,O=L.firstChild;function H(Ne){var Be=Ne.nextSibling;return c&&A&&l.display.currentWheelTarget==Ne?Ne.style.display="none":Ne.parentNode.removeChild(Ne),Be}for(var X=m.view,J=m.viewFrom,ce=0;ce<X.length;ce++){var ge=X[ce];if(!ge.hidden)if(!ge.node||ge.node.parentNode!=L){var _e=o2(l,ge,J,b);L.insertBefore(_e,O)}else{for(;O!=ge.node;)O=H(O);var Le=T&&d!=null&&d<=J&&ge.lineNumber;ge.changes&&(se(ge.changes,"gutter")>-1&&(Le=!1),Mw(l,ge,J,b)),Le&&(q(ge.lineNumber),ge.lineNumber.appendChild(document.createTextNode(ze(l.options,J)))),O=ge.node.nextSibling}J+=ge.size}for(;O;)O=H(O)}function kd(l){var d=l.gutters.offsetWidth;l.sizer.style.marginLeft=d+"px",Rr(l,"gutterChanged",l)}function Nd(l,d){l.display.sizer.style.minHeight=d.docHeight+"px",l.display.heightForcer.style.top=d.docHeight+"px",l.display.gutters.style.height=d.docHeight+l.display.barHeight+va(l)+"px"}function ix(l){var d=l.display,b=d.view;if(!(!d.alignWidgets&&(!d.gutters.firstChild||!l.options.fixedGutter))){for(var m=Ed(d)-d.scroller.scrollLeft+l.doc.scrollLeft,T=d.gutters.offsetWidth,L=m+"px",O=0;O<b.length;O++)if(!b[O].hidden){l.options.fixedGutter&&(b[O].gutter&&(b[O].gutter.style.left=L),b[O].gutterBackground&&(b[O].gutterBackground.style.left=L));var H=b[O].alignable;if(H)for(var X=0;X<H.length;X++)H[X].style.left=L}l.options.fixedGutter&&(d.gutters.style.left=m+T+"px")}}function ox(l){if(!l.options.lineNumbers)return!1;var d=l.doc,b=ze(l.options,d.first+d.size-1),m=l.display;if(b.length!=m.lineNumChars){var T=m.measure.appendChild(P("div",[P("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),L=T.firstChild.offsetWidth,O=T.offsetWidth-L;return m.lineGutter.style.width="",m.lineNumInnerWidth=Math.max(L,m.lineGutter.offsetWidth-O)+1,m.lineNumWidth=m.lineNumInnerWidth+O,m.lineNumChars=m.lineNumInnerWidth?b.length:-1,m.lineGutter.style.width=m.lineNumWidth+"px",kd(l.display),!0}return!1}function Od(l,d){for(var b=[],m=!1,T=0;T<l.length;T++){var L=l[T],O=null;if(typeof L!="string"&&(O=L.style,L=L.className),L=="CodeMirror-linenumbers")if(d)m=!0;else continue;b.push({className:L,style:O})}return d&&!m&&b.push({className:"CodeMirror-linenumbers",style:null}),b}function sx(l){var d=l.gutters,b=l.gutterSpecs;q(d),l.lineGutter=null;for(var m=0;m<b.length;++m){var T=b[m],L=T.className,O=T.style,H=d.appendChild(P("div",null,"CodeMirror-gutter "+L));O&&(H.style.cssText=O),L=="CodeMirror-linenumbers"&&(l.lineGutter=H,H.style.width=(l.lineNumWidth||1)+"px")}d.style.display=b.length?"":"none",kd(l)}function Ks(l){sx(l.display),mn(l),ix(l)}function N2(l,d,b,m){var T=this;this.input=b,T.scrollbarFiller=P("div",null,"CodeMirror-scrollbar-filler"),T.scrollbarFiller.setAttribute("cm-not-content","true"),T.gutterFiller=P("div",null,"CodeMirror-gutter-filler"),T.gutterFiller.setAttribute("cm-not-content","true"),T.lineDiv=N("div",null,"CodeMirror-code"),T.selectionDiv=P("div",null,null,"position: relative; z-index: 1"),T.cursorDiv=P("div",null,"CodeMirror-cursors"),T.measure=P("div",null,"CodeMirror-measure"),T.lineMeasure=P("div",null,"CodeMirror-measure"),T.lineSpace=N("div",[T.measure,T.lineMeasure,T.selectionDiv,T.cursorDiv,T.lineDiv],null,"position: relative; outline: none");var L=N("div",[T.lineSpace],"CodeMirror-lines");T.mover=P("div",[L],null,"position: relative"),T.sizer=P("div",[T.mover],"CodeMirror-sizer"),T.sizerWidth=null,T.heightForcer=P("div",null,null,"position: absolute; height: "+$+"px; width: 1px;"),T.gutters=P("div",null,"CodeMirror-gutters"),T.lineGutter=null,T.scroller=P("div",[T.sizer,T.heightForcer,T.gutters],"CodeMirror-scroll"),T.scroller.setAttribute("tabIndex","-1"),T.wrapper=P("div",[T.scrollbarFiller,T.gutterFiller,T.scroller],"CodeMirror"),p&&y>=105&&(T.wrapper.style.clipPath="inset(0px)"),T.wrapper.setAttribute("translate","no"),u&&f<8&&(T.gutters.style.zIndex=-1,T.scroller.style.paddingRight=0),!c&&!(a&&S)&&(T.scroller.draggable=!0),l&&(l.appendChild?l.appendChild(T.wrapper):l(T.wrapper)),T.viewFrom=T.viewTo=d.first,T.reportedViewFrom=T.reportedViewTo=d.first,T.view=[],T.renderedView=null,T.externalMeasured=null,T.viewOffset=0,T.lastWrapHeight=T.lastWrapWidth=0,T.updateLineNumbers=null,T.nativeBarWidth=T.barHeight=T.barWidth=0,T.scrollbarsClipped=!1,T.lineNumWidth=T.lineNumInnerWidth=T.lineNumChars=null,T.alignWidgets=!1,T.cachedCharWidth=T.cachedTextHeight=T.cachedPaddingH=null,T.maxLine=null,T.maxLineLength=0,T.maxLineChanged=!1,T.wheelDX=T.wheelDY=T.wheelStartX=T.wheelStartY=null,T.shift=!1,T.selForContextMenu=null,T.activeTouch=null,T.gutterSpecs=Od(m.gutters,m.lineNumbers),sx(T),b.init(T)}var Bu=0,Ia=null;u?Ia=-.53:a?Ia=15:p?Ia=-.7:E&&(Ia=-1/3);function lx(l){var d=l.wheelDeltaX,b=l.wheelDeltaY;return d==null&&l.detail&&l.axis==l.HORIZONTAL_AXIS&&(d=l.detail),b==null&&l.detail&&l.axis==l.VERTICAL_AXIS?b=l.detail:b==null&&(b=l.wheelDelta),{x:d,y:b}}function O2(l){var d=lx(l);return d.x*=Ia,d.y*=Ia,d}function ux(l,d){p&&y==102&&(l.display.chromeScrollHack==null?l.display.sizer.style.pointerEvents="none":clearTimeout(l.display.chromeScrollHack),l.display.chromeScrollHack=setTimeout(function(){l.display.chromeScrollHack=null,l.display.sizer.style.pointerEvents=""},100));var b=lx(d),m=b.x,T=b.y,L=Ia;d.deltaMode===0&&(m=d.deltaX,T=d.deltaY,L=1);var O=l.display,H=O.scroller,X=H.scrollWidth>H.clientWidth,J=H.scrollHeight>H.clientHeight;if(m&&X||T&&J){if(T&&A&&c){e:for(var ce=d.target,ge=O.view;ce!=H;ce=ce.parentNode)for(var _e=0;_e<ge.length;_e++)if(ge[_e].node==ce){l.display.currentWheelTarget=ce;break e}}if(m&&!a&&!g&&L!=null){T&&J&&Ws(l,Math.max(0,H.scrollTop+T*L)),Yi(l,Math.max(0,H.scrollLeft+m*L)),(!T||T&&J)&&$e(d),O.wheelStartX=null;return}if(T&&L!=null){var Le=T*L,Ne=l.doc.scrollTop,Be=Ne+O.wrapper.clientHeight;Le<0?Ne=Math.max(0,Ne+Le-50):Be=Math.min(l.doc.height,Be+Le+50),Pd(l,{top:Ne,bottom:Be})}Bu<20&&d.deltaMode!==0&&(O.wheelStartX==null?(O.wheelStartX=H.scrollLeft,O.wheelStartY=H.scrollTop,O.wheelDX=m,O.wheelDY=T,setTimeout(function(){if(O.wheelStartX!=null){var Ke=H.scrollLeft-O.wheelStartX,et=H.scrollTop-O.wheelStartY,ot=et&&O.wheelDY&&et/O.wheelDY||Ke&&O.wheelDX&&Ke/O.wheelDX;O.wheelStartX=O.wheelStartY=null,ot&&(Ia=(Ia*Bu+ot)/(Bu+1),++Bu)}},200)):(O.wheelDX+=m,O.wheelDY+=T))}}var On=function(l,d){this.ranges=l,this.primIndex=d};On.prototype.primary=function(){return this.ranges[this.primIndex]},On.prototype.equals=function(l){if(l==this)return!0;if(l.primIndex!=this.primIndex||l.ranges.length!=this.ranges.length)return!1;for(var d=0;d<this.ranges.length;d++){var b=this.ranges[d],m=l.ranges[d];if(!kt(b.anchor,m.anchor)||!kt(b.head,m.head))return!1}return!0},On.prototype.deepCopy=function(){for(var l=[],d=0;d<this.ranges.length;d++)l[d]=new Bt(Mr(this.ranges[d].anchor),Mr(this.ranges[d].head));return new On(l,this.primIndex)},On.prototype.somethingSelected=function(){for(var l=0;l<this.ranges.length;l++)if(!this.ranges[l].empty())return!0;return!1},On.prototype.contains=function(l,d){d||(d=l);for(var b=0;b<this.ranges.length;b++){var m=this.ranges[b];if(Ze(d,m.from())>=0&&Ze(l,m.to())<=0)return b}return-1};var Bt=function(l,d){this.anchor=l,this.head=d};Bt.prototype.from=function(){return Ro(this.anchor,this.head)},Bt.prototype.to=function(){return yn(this.anchor,this.head)},Bt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function ta(l,d,b){var m=l&&l.options.selectionsMayTouch,T=d[b];d.sort(function(_e,Le){return Ze(_e.from(),Le.from())}),b=se(d,T);for(var L=1;L<d.length;L++){var O=d[L],H=d[L-1],X=Ze(H.to(),O.from());if(m&&!O.empty()?X>0:X>=0){var J=Ro(H.from(),O.from()),ce=yn(H.to(),O.to()),ge=H.empty()?O.from()==O.head:H.from()==H.head;L<=b&&--b,d.splice(--L,2,new Bt(ge?ce:J,ge?J:ce))}}return new On(d,b)}function si(l,d){return new On([new Bt(l,d||l)],0)}function li(l){return l.text?Re(l.from.line+l.text.length-1,de(l.text).length+(l.text.length==1?l.from.ch:0)):l.to}function fx(l,d){if(Ze(l,d.from)<0)return l;if(Ze(l,d.to)<=0)return li(d);var b=l.line+d.text.length-(d.to.line-d.from.line)-1,m=l.ch;return l.line==d.to.line&&(m+=li(d).ch-d.to.ch),Re(b,m)}function Id(l,d){for(var b=[],m=0;m<l.sel.ranges.length;m++){var T=l.sel.ranges[m];b.push(new Bt(fx(T.anchor,d),fx(T.head,d)))}return ta(l.cm,b,l.sel.primIndex)}function cx(l,d,b){return l.line==d.line?Re(b.line,l.ch-d.ch+b.ch):Re(b.line+(l.line-d.line),l.ch)}function I2(l,d,b){for(var m=[],T=Re(l.first,0),L=T,O=0;O<d.length;O++){var H=d[O],X=cx(H.from,T,L),J=cx(li(H),T,L);if(T=H.to,L=J,b=="around"){var ce=l.sel.ranges[O],ge=Ze(ce.head,ce.anchor)<0;m[O]=new Bt(ge?J:X,ge?X:J)}else m[O]=new Bt(X,X)}return new On(m,l.sel.primIndex)}function Fd(l){l.doc.mode=jn(l.options,l.doc.modeOption),js(l)}function js(l){l.doc.iter(function(d){d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null)}),l.doc.modeFrontier=l.doc.highlightFrontier=l.doc.first,Xs(l,100),l.state.modeGen++,l.curOp&&mn(l)}function dx(l,d){return d.from.ch==0&&d.to.ch==0&&de(d.text)==""&&(!l.cm||l.cm.options.wholeLineUpdateBefore)}function Bd(l,d,b,m){function T(ot){return b?b[ot]:null}function L(ot,tt,lt){VO(ot,tt,lt,m),Rr(ot,"change",ot,d)}function O(ot,tt){for(var lt=[],yt=ot;yt<tt;++yt)lt.push(new Po(J[yt],T(yt),m));return lt}var H=d.from,X=d.to,J=d.text,ce=ft(l,H.line),ge=ft(l,X.line),_e=de(J),Le=T(J.length-1),Ne=X.line-H.line;if(d.full)l.insert(0,O(0,J.length)),l.remove(J.length,l.size-J.length);else if(dx(l,d)){var Be=O(0,J.length-1);L(ge,ge.text,Le),Ne&&l.remove(H.line,Ne),Be.length&&l.insert(H.line,Be)}else if(ce==ge)if(J.length==1)L(ce,ce.text.slice(0,H.ch)+_e+ce.text.slice(X.ch),Le);else{var Ke=O(1,J.length-1);Ke.push(new Po(_e+ce.text.slice(X.ch),Le,m)),L(ce,ce.text.slice(0,H.ch)+J[0],T(0)),l.insert(H.line+1,Ke)}else if(J.length==1)L(ce,ce.text.slice(0,H.ch)+J[0]+ge.text.slice(X.ch),T(0)),l.remove(H.line+1,Ne);else{L(ce,ce.text.slice(0,H.ch)+J[0],T(0)),L(ge,_e+ge.text.slice(X.ch),Le);var et=O(1,J.length-1);Ne>1&&l.remove(H.line+1,Ne-1),l.insert(H.line+1,et)}Rr(l,"change",l,d)}function ui(l,d,b){function m(T,L,O){if(T.linked)for(var H=0;H<T.linked.length;++H){var X=T.linked[H];if(X.doc!=L){var J=O&&X.sharedHist;b&&!J||(d(X.doc,J),m(X.doc,T,J))}}}m(l,null,!0)}function hx(l,d){if(d.cm)throw new Error("This document is already in use.");l.doc=d,d.cm=l,Td(l),Fd(l),vx(l),l.options.direction=d.direction,l.options.lineWrapping||hd(l),l.options.mode=d.modeOption,mn(l)}function vx(l){(l.doc.direction=="rtl"?re:B)(l.display.lineDiv,"CodeMirror-rtl")}function F2(l){Dn(l,function(){vx(l),mn(l)})}function qu(l){this.done=[],this.undone=[],this.undoDepth=l?l.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=l?l.maxGeneration:1}function qd(l,d){var b={from:Mr(d.from),to:li(d),text:Gr(l,d.from,d.to)};return yx(l,b,d.from.line,d.to.line+1),ui(l,function(m){return yx(m,b,d.from.line,d.to.line+1)},!0),b}function px(l){for(;l.length;){var d=de(l);if(d.ranges)l.pop();else break}}function B2(l,d){if(d)return px(l.done),de(l.done);if(l.done.length&&!de(l.done).ranges)return de(l.done);if(l.done.length>1&&!l.done[l.done.length-2].ranges)return l.done.pop(),de(l.done)}function gx(l,d,b,m){var T=l.history;T.undone.length=0;var L=+new Date,O,H;if((T.lastOp==m||T.lastOrigin==d.origin&&d.origin&&(d.origin.charAt(0)=="+"&&T.lastModTime>L-(l.cm?l.cm.options.historyEventDelay:500)||d.origin.charAt(0)=="*"))&&(O=B2(T,T.lastOp==m)))H=de(O.changes),Ze(d.from,d.to)==0&&Ze(d.from,H.to)==0?H.to=li(d):O.changes.push(qd(l,d));else{var X=de(T.done);for((!X||!X.ranges)&&zu(l.sel,T.done),O={changes:[qd(l,d)],generation:T.generation},T.done.push(O);T.done.length>T.undoDepth;)T.done.shift(),T.done[0].ranges||T.done.shift()}T.done.push(b),T.generation=++T.maxGeneration,T.lastModTime=T.lastSelTime=L,T.lastOp=T.lastSelOp=m,T.lastOrigin=T.lastSelOrigin=d.origin,H||He(l,"historyAdded")}function q2(l,d,b,m){var T=d.charAt(0);return T=="*"||T=="+"&&b.ranges.length==m.ranges.length&&b.somethingSelected()==m.somethingSelected()&&new Date-l.history.lastSelTime<=(l.cm?l.cm.options.historyEventDelay:500)}function z2(l,d,b,m){var T=l.history,L=m&&m.origin;b==T.lastSelOp||L&&T.lastSelOrigin==L&&(T.lastModTime==T.lastSelTime&&T.lastOrigin==L||q2(l,L,de(T.done),d))?T.done[T.done.length-1]=d:zu(d,T.done),T.lastSelTime=+new Date,T.lastSelOrigin=L,T.lastSelOp=b,m&&m.clearRedo!==!1&&px(T.undone)}function zu(l,d){var b=de(d);b&&b.ranges&&b.equals(l)||d.push(l)}function yx(l,d,b,m){var T=d["spans_"+l.id],L=0;l.iter(Math.max(l.first,b),Math.min(l.first+l.size,m),function(O){O.markedSpans&&((T||(T=d["spans_"+l.id]={}))[L]=O.markedSpans),++L})}function G2(l){if(!l)return null;for(var d,b=0;b<l.length;++b)l[b].marker.explicitlyCleared?d||(d=l.slice(0,b)):d&&d.push(l[b]);return d?d.length?d:null:l}function H2(l,d){var b=d["spans_"+l.id];if(!b)return null;for(var m=[],T=0;T<d.text.length;++T)m.push(G2(b[T]));return m}function mx(l,d){var b=H2(l,d),m=ud(l,d);if(!b)return m;if(!m)return b;for(var T=0;T<b.length;++T){var L=b[T],O=m[T];if(L&&O)e:for(var H=0;H<O.length;++H){for(var X=O[H],J=0;J<L.length;++J)if(L[J].marker==X.marker)continue e;L.push(X)}else O&&(b[T]=O)}return b}function zo(l,d,b){for(var m=[],T=0;T<l.length;++T){var L=l[T];if(L.ranges){m.push(b?On.prototype.deepCopy.call(L):L);continue}var O=L.changes,H=[];m.push({changes:H});for(var X=0;X<O.length;++X){var J=O[X],ce=void 0;if(H.push({from:J.from,to:J.to,text:J.text}),d)for(var ge in J)(ce=ge.match(/^spans_(\d+)$/))&&se(d,Number(ce[1]))>-1&&(de(H)[ge]=J[ge],delete J[ge])}}return m}function zd(l,d,b,m){if(m){var T=l.anchor;if(b){var L=Ze(d,T)<0;L!=Ze(b,T)<0?(T=d,d=b):L!=Ze(d,b)<0&&(d=b)}return new Bt(T,d)}else return new Bt(b||d,d)}function Gu(l,d,b,m,T){T==null&&(T=l.cm&&(l.cm.display.shift||l.extend)),Zr(l,new On([zd(l.sel.primary(),d,b,T)],0),m)}function bx(l,d,b){for(var m=[],T=l.cm&&(l.cm.display.shift||l.extend),L=0;L<l.sel.ranges.length;L++)m[L]=zd(l.sel.ranges[L],d[L],null,T);var O=ta(l.cm,m,l.sel.primIndex);Zr(l,O,b)}function Gd(l,d,b,m){var T=l.sel.ranges.slice(0);T[d]=b,Zr(l,ta(l.cm,T,l.sel.primIndex),m)}function wx(l,d,b,m){Zr(l,si(d,b),m)}function U2(l,d,b){var m={ranges:d.ranges,update:function(T){this.ranges=[];for(var L=0;L<T.length;L++)this.ranges[L]=new Bt(Ct(l,T[L].anchor),Ct(l,T[L].head))},origin:b&&b.origin};return He(l,"beforeSelectionChange",l,m),l.cm&&He(l.cm,"beforeSelectionChange",l.cm,m),m.ranges!=d.ranges?ta(l.cm,m.ranges,m.ranges.length-1):d}function xx(l,d,b){var m=l.history.done,T=de(m);T&&T.ranges?(m[m.length-1]=d,Hu(l,d,b)):Zr(l,d,b)}function Zr(l,d,b){Hu(l,d,b),z2(l,l.sel,l.cm?l.cm.curOp.id:NaN,b)}function Hu(l,d,b){(Je(l,"beforeSelectionChange")||l.cm&&Je(l.cm,"beforeSelectionChange"))&&(d=U2(l,d,b));var m=b&&b.bias||(Ze(d.primary().head,l.sel.primary().head)<0?-1:1);Cx(l,Tx(l,d,m,!0)),!(b&&b.scroll===!1)&&l.cm&&l.cm.getOption("readOnly")!="nocursor"&&Bo(l.cm)}function Cx(l,d){d.equals(l.sel)||(l.sel=d,l.cm&&(l.cm.curOp.updateInput=1,l.cm.curOp.selectionChanged=!0,je(l.cm)),Rr(l,"cursorActivity",l))}function Ex(l){Cx(l,Tx(l,l.sel,null,!1))}function Tx(l,d,b,m){for(var T,L=0;L<d.ranges.length;L++){var O=d.ranges[L],H=d.ranges.length==l.sel.ranges.length&&l.sel.ranges[L],X=Uu(l,O.anchor,H&&H.anchor,b,m),J=O.head==O.anchor?X:Uu(l,O.head,H&&H.head,b,m);(T||X!=O.anchor||J!=O.head)&&(T||(T=d.ranges.slice(0,L)),T[L]=new Bt(X,J))}return T?ta(l.cm,T,d.primIndex):d}function Go(l,d,b,m,T){var L=ft(l,d.line);if(L.markedSpans)for(var O=0;O<L.markedSpans.length;++O){var H=L.markedSpans[O],X=H.marker,J="selectLeft"in X?!X.selectLeft:X.inclusiveLeft,ce="selectRight"in X?!X.selectRight:X.inclusiveRight;if((H.from==null||(J?H.from<=d.ch:H.from<d.ch))&&(H.to==null||(ce?H.to>=d.ch:H.to>d.ch))){if(T&&(He(X,"beforeCursorEnter"),X.explicitlyCleared))if(L.markedSpans){--O;continue}else break;if(!X.atomic)continue;if(b){var ge=X.find(m<0?1:-1),_e=void 0;if((m<0?ce:J)&&(ge=Sx(l,ge,-m,ge&&ge.line==d.line?L:null)),ge&&ge.line==d.line&&(_e=Ze(ge,b))&&(m<0?_e<0:_e>0))return Go(l,ge,d,m,T)}var Le=X.find(m<0?-1:1);return(m<0?J:ce)&&(Le=Sx(l,Le,m,Le.line==d.line?L:null)),Le?Go(l,Le,d,m,T):null}}return d}function Uu(l,d,b,m,T){var L=m||1,O=Go(l,d,b,L,T)||!T&&Go(l,d,b,L,!0)||Go(l,d,b,-L,T)||!T&&Go(l,d,b,-L,!0);return O||(l.cantEdit=!0,Re(l.first,0))}function Sx(l,d,b,m){return b<0&&d.ch==0?d.line>l.first?Ct(l,Re(d.line-1)):null:b>0&&d.ch==(m||ft(l,d.line)).text.length?d.line<l.first+l.size-1?Re(d.line+1,0):null:new Re(d.line,d.ch+b)}function Ax(l){l.setSelection(Re(l.firstLine(),0),Re(l.lastLine()),le)}function Lx(l,d,b){var m={canceled:!1,from:d.from,to:d.to,text:d.text,origin:d.origin,cancel:function(){return m.canceled=!0}};return b&&(m.update=function(T,L,O,H){T&&(m.from=Ct(l,T)),L&&(m.to=Ct(l,L)),O&&(m.text=O),H!==void 0&&(m.origin=H)}),He(l,"beforeChange",l,m),l.cm&&He(l.cm,"beforeChange",l.cm,m),m.canceled?(l.cm&&(l.cm.curOp.updateInput=2),null):{from:m.from,to:m.to,text:m.text,origin:m.origin}}function Ho(l,d,b){if(l.cm){if(!l.cm.curOp)return Pr(l.cm,Ho)(l,d,b);if(l.cm.state.suppressEdits)return}if(!((Je(l,"beforeChange")||l.cm&&Je(l.cm,"beforeChange"))&&(d=Lx(l,d,!0),!d))){var m=mw&&!b&&zO(l,d.from,d.to);if(m)for(var T=m.length-1;T>=0;--T)Dx(l,{from:m[T].from,to:m[T].to,text:T?[""]:d.text,origin:d.origin});else Dx(l,d)}}function Dx(l,d){if(!(d.text.length==1&&d.text[0]==""&&Ze(d.from,d.to)==0)){var b=Id(l,d);gx(l,d,b,l.cm?l.cm.curOp.id:NaN),Zs(l,d,b,ud(l,d));var m=[];ui(l,function(T,L){!L&&se(m,T.history)==-1&&(Px(T.history,d),m.push(T.history)),Zs(T,d,null,ud(T,d))})}}function Vu(l,d,b){var m=l.cm&&l.cm.state.suppressEdits;if(!(m&&!b)){for(var T=l.history,L,O=l.sel,H=d=="undo"?T.done:T.undone,X=d=="undo"?T.undone:T.done,J=0;J<H.length&&(L=H[J],!(b?L.ranges&&!L.equals(l.sel):!L.ranges));J++);if(J!=H.length){for(T.lastOrigin=T.lastSelOrigin=null;;)if(L=H.pop(),L.ranges){if(zu(L,X),b&&!L.equals(l.sel)){Zr(l,L,{clearRedo:!1});return}O=L}else if(m){H.push(L);return}else break;var ce=[];zu(O,X),X.push({changes:ce,generation:T.generation}),T.generation=L.generation||++T.maxGeneration;for(var ge=Je(l,"beforeChange")||l.cm&&Je(l.cm,"beforeChange"),_e=function(Be){var Ke=L.changes[Be];if(Ke.origin=d,ge&&!Lx(l,Ke,!1))return H.length=0,{};ce.push(qd(l,Ke));var et=Be?Id(l,Ke):de(H);Zs(l,Ke,et,mx(l,Ke)),!Be&&l.cm&&l.cm.scrollIntoView({from:Ke.from,to:li(Ke)});var ot=[];ui(l,function(tt,lt){!lt&&se(ot,tt.history)==-1&&(Px(tt.history,Ke),ot.push(tt.history)),Zs(tt,Ke,null,mx(tt,Ke))})},Le=L.changes.length-1;Le>=0;--Le){var Ne=_e(Le);if(Ne)return Ne.v}}}}function _x(l,d){if(d!=0&&(l.first+=d,l.sel=new On(ye(l.sel.ranges,function(T){return new Bt(Re(T.anchor.line+d,T.anchor.ch),Re(T.head.line+d,T.head.ch))}),l.sel.primIndex),l.cm)){mn(l.cm,l.first,l.first-d,d);for(var b=l.cm.display,m=b.viewFrom;m<b.viewTo;m++)ii(l.cm,m,"gutter")}}function Zs(l,d,b,m){if(l.cm&&!l.cm.curOp)return Pr(l.cm,Zs)(l,d,b,m);if(d.to.line<l.first){_x(l,d.text.length-1-(d.to.line-d.from.line));return}if(!(d.from.line>l.lastLine())){if(d.from.line<l.first){var T=d.text.length-1-(l.first-d.from.line);_x(l,T),d={from:Re(l.first,0),to:Re(d.to.line+T,d.to.ch),text:[de(d.text)],origin:d.origin}}var L=l.lastLine();d.to.line>L&&(d={from:d.from,to:Re(L,ft(l,L).text.length),text:[d.text[0]],origin:d.origin}),d.removed=Gr(l,d.from,d.to),b||(b=Id(l,d)),l.cm?V2(l.cm,d,m):Bd(l,d,m),Hu(l,b,le),l.cantEdit&&Uu(l,Re(l.firstLine(),0))&&(l.cantEdit=!1)}}function V2(l,d,b){var m=l.doc,T=l.display,L=d.from,O=d.to,H=!1,X=L.line;l.options.lineWrapping||(X=Q(Jn(ft(m,L.line))),m.iter(X,O.line+1,function(Le){if(Le==T.maxLine)return H=!0,!0})),m.sel.contains(d.from,d.to)>-1&&je(l),Bd(m,d,b,Xw(l)),l.options.lineWrapping||(m.iter(X,L.line+d.text.length,function(Le){var Ne=Lu(Le);Ne>T.maxLineLength&&(T.maxLine=Le,T.maxLineLength=Ne,T.maxLineChanged=!0,H=!1)}),H&&(l.curOp.updateMaxLine=!0)),kO(m,L.line),Xs(l,400);var J=d.text.length-(O.line-L.line)-1;d.full?mn(l):L.line==O.line&&d.text.length==1&&!dx(l.doc,d)?ii(l,L.line,"text"):mn(l,L.line,O.line+1,J);var ce=Je(l,"changes"),ge=Je(l,"change");if(ge||ce){var _e={from:L,to:O,text:d.text,removed:d.removed,origin:d.origin};ge&&Rr(l,"change",l,_e),ce&&(l.curOp.changeObjs||(l.curOp.changeObjs=[])).push(_e)}l.display.selForContextMenu=null}function Uo(l,d,b,m,T){var L;m||(m=b),Ze(m,b)<0&&(L=[m,b],b=L[0],m=L[1]),typeof d=="string"&&(d=l.splitLines(d)),Ho(l,{from:b,to:m,text:d,origin:T})}function Mx(l,d,b,m){b<l.line?l.line+=m:d<l.line&&(l.line=d,l.ch=0)}function Rx(l,d,b,m){for(var T=0;T<l.length;++T){var L=l[T],O=!0;if(L.ranges){L.copied||(L=l[T]=L.deepCopy(),L.copied=!0);for(var H=0;H<L.ranges.length;H++)Mx(L.ranges[H].anchor,d,b,m),Mx(L.ranges[H].head,d,b,m);continue}for(var X=0;X<L.changes.length;++X){var J=L.changes[X];if(b<J.from.line)J.from=Re(J.from.line+m,J.from.ch),J.to=Re(J.to.line+m,J.to.ch);else if(d<=J.to.line){O=!1;break}}O||(l.splice(0,T+1),T=0)}}function Px(l,d){var b=d.from.line,m=d.to.line,T=d.text.length-(m-b)-1;Rx(l.done,b,m,T),Rx(l.undone,b,m,T)}function Qs(l,d,b,m){var T=d,L=d;return typeof d=="number"?L=ft(l,uw(l,d)):T=Q(d),T==null?null:(m(L,T)&&l.cm&&ii(l.cm,T,b),L)}function Js(l){this.lines=l,this.parent=null;for(var d=0,b=0;b<l.length;++b)l[b].parent=this,d+=l[b].height;this.height=d}Js.prototype={chunkSize:function(){return this.lines.length},removeInner:function(l,d){for(var b=l,m=l+d;b<m;++b){var T=this.lines[b];this.height-=T.height,WO(T),Rr(T,"delete")}this.lines.splice(l,d)},collapse:function(l){l.push.apply(l,this.lines)},insertInner:function(l,d,b){this.height+=b,this.lines=this.lines.slice(0,l).concat(d).concat(this.lines.slice(l));for(var m=0;m<d.length;++m)d[m].parent=this},iterN:function(l,d,b){for(var m=l+d;l<m;++l)if(b(this.lines[l]))return!0}};function el(l){this.children=l;for(var d=0,b=0,m=0;m<l.length;++m){var T=l[m];d+=T.chunkSize(),b+=T.height,T.parent=this}this.size=d,this.height=b,this.parent=null}el.prototype={chunkSize:function(){return this.size},removeInner:function(l,d){this.size-=d;for(var b=0;b<this.children.length;++b){var m=this.children[b],T=m.chunkSize();if(l<T){var L=Math.min(d,T-l),O=m.height;if(m.removeInner(l,L),this.height-=O-m.height,T==L&&(this.children.splice(b--,1),m.parent=null),(d-=L)==0)break;l=0}else l-=T}if(this.size-d<25&&(this.children.length>1||!(this.children[0]instanceof Js))){var H=[];this.collapse(H),this.children=[new Js(H)],this.children[0].parent=this}},collapse:function(l){for(var d=0;d<this.children.length;++d)this.children[d].collapse(l)},insertInner:function(l,d,b){this.size+=d.length,this.height+=b;for(var m=0;m<this.children.length;++m){var T=this.children[m],L=T.chunkSize();if(l<=L){if(T.insertInner(l,d,b),T.lines&&T.lines.length>50){for(var O=T.lines.length%25+25,H=O;H<T.lines.length;){var X=new Js(T.lines.slice(H,H+=25));T.height-=X.height,this.children.splice(++m,0,X),X.parent=this}T.lines=T.lines.slice(0,O),this.maybeSpill()}break}l-=L}},maybeSpill:function(){if(!(this.children.length<=10)){var l=this;do{var d=l.children.splice(l.children.length-5,5),b=new el(d);if(l.parent){l.size-=b.size,l.height-=b.height;var T=se(l.parent.children,l);l.parent.children.splice(T+1,0,b)}else{var m=new el(l.children);m.parent=l,l.children=[m,b],l=m}b.parent=l.parent}while(l.children.length>10);l.parent.maybeSpill()}},iterN:function(l,d,b){for(var m=0;m<this.children.length;++m){var T=this.children[m],L=T.chunkSize();if(l<L){var O=Math.min(d,L-l);if(T.iterN(l,O,b))return!0;if((d-=O)==0)break;l=0}else l-=L}}};var tl=function(l,d,b){if(b)for(var m in b)b.hasOwnProperty(m)&&(this[m]=b[m]);this.doc=l,this.node=d};tl.prototype.clear=function(){var l=this.doc.cm,d=this.line.widgets,b=this.line,m=Q(b);if(!(m==null||!d)){for(var T=0;T<d.length;++T)d[T]==this&&d.splice(T--,1);d.length||(b.widgets=null);var L=Gs(this);Pt(b,Math.max(0,b.height-L)),l&&(Dn(l,function(){kx(l,b,-L),ii(l,m,"widget")}),Rr(l,"lineWidgetCleared",l,this,m))}},tl.prototype.changed=function(){var l=this,d=this.height,b=this.doc.cm,m=this.line;this.height=null;var T=Gs(this)-d;T&&(ai(this.doc,m)||Pt(m,m.height+T),b&&Dn(b,function(){b.curOp.forceUpdate=!0,kx(b,m,T),Rr(b,"lineWidgetChanged",b,l,Q(m))}))},Ge(tl);function kx(l,d,b){Na(d)<(l.curOp&&l.curOp.scrollTop||l.doc.scrollTop)&&Md(l,b)}function W2(l,d,b,m){var T=new tl(l,b,m),L=l.cm;return L&&T.noHScroll&&(L.display.alignWidgets=!0),Qs(l,d,"widget",function(O){var H=O.widgets||(O.widgets=[]);if(T.insertAt==null?H.push(T):H.splice(Math.min(H.length,Math.max(0,T.insertAt)),0,T),T.line=O,L&&!ai(l,O)){var X=Na(O)<l.scrollTop;Pt(O,O.height+Gs(T)),X&&Md(L,T.height),L.curOp.forceUpdate=!0}return!0}),L&&Rr(L,"lineWidgetAdded",L,T,typeof d=="number"?d:Q(d)),T}var Nx=0,fi=function(l,d){this.lines=[],this.type=d,this.doc=l,this.id=++Nx};fi.prototype.clear=function(){if(!this.explicitlyCleared){var l=this.doc.cm,d=l&&!l.curOp;if(d&&Ki(l),Je(this,"clear")){var b=this.find();b&&Rr(this,"clear",b.from,b.to)}for(var m=null,T=null,L=0;L<this.lines.length;++L){var O=this.lines[L],H=Bs(O.markedSpans,this);l&&!this.collapsed?ii(l,Q(O),"text"):l&&(H.to!=null&&(T=Q(O)),H.from!=null&&(m=Q(O))),O.markedSpans=IO(O.markedSpans,H),H.from==null&&this.collapsed&&!ai(this.doc,O)&&l&&Pt(O,Oo(l.display))}if(l&&this.collapsed&&!l.options.lineWrapping)for(var X=0;X<this.lines.length;++X){var J=Jn(this.lines[X]),ce=Lu(J);ce>l.display.maxLineLength&&(l.display.maxLine=J,l.display.maxLineLength=ce,l.display.maxLineChanged=!0)}m!=null&&l&&this.collapsed&&mn(l,m,T+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,l&&Ex(l.doc)),l&&Rr(l,"markerCleared",l,this,m,T),d&&ji(l),this.parent&&this.parent.clear()}},fi.prototype.find=function(l,d){l==null&&this.type=="bookmark"&&(l=1);for(var b,m,T=0;T<this.lines.length;++T){var L=this.lines[T],O=Bs(L.markedSpans,this);if(O.from!=null&&(b=Re(d?L:Q(L),O.from),l==-1))return b;if(O.to!=null&&(m=Re(d?L:Q(L),O.to),l==1))return m}return b&&{from:b,to:m}},fi.prototype.changed=function(){var l=this,d=this.find(-1,!0),b=this,m=this.doc.cm;!d||!m||Dn(m,function(){var T=d.line,L=Q(d.line),O=yd(m,L);if(O&&(zw(O),m.curOp.selectionChanged=m.curOp.forceUpdate=!0),m.curOp.updateMaxLine=!0,!ai(b.doc,T)&&b.height!=null){var H=b.height;b.height=null;var X=Gs(b)-H;X&&Pt(T,T.height+X)}Rr(m,"markerChanged",m,l)})},fi.prototype.attachLine=function(l){if(!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(!d.maybeHiddenMarkers||se(d.maybeHiddenMarkers,this)==-1)&&(d.maybeUnhiddenMarkers||(d.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(l)},fi.prototype.detachLine=function(l){if(this.lines.splice(se(this.lines,l),1),!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(d.maybeHiddenMarkers||(d.maybeHiddenMarkers=[])).push(this)}},Ge(fi);function Vo(l,d,b,m,T){if(m&&m.shared)return $2(l,d,b,m,T);if(l.cm&&!l.cm.curOp)return Pr(l.cm,Vo)(l,d,b,m,T);var L=new fi(l,T),O=Ze(d,b);if(m&&oe(m,L,!1),O>0||O==0&&L.clearWhenEmpty!==!1)return L;if(L.replacedWith&&(L.collapsed=!0,L.widgetNode=N("span",[L.replacedWith],"CodeMirror-widget"),m.handleMouseEvents||L.widgetNode.setAttribute("cm-ignore-events","true"),m.insertLeft&&(L.widgetNode.insertLeft=!0)),L.collapsed){if(Tw(l,d.line,d,b,L)||d.line!=b.line&&Tw(l,b.line,d,b,L))throw new Error("Inserting collapsed marker partially overlapping an existing one");OO()}L.addToHistory&&gx(l,{from:d,to:b,origin:"markText"},l.sel,NaN);var H=d.line,X=l.cm,J;if(l.iter(H,b.line+1,function(ge){X&&L.collapsed&&!X.options.lineWrapping&&Jn(ge)==X.display.maxLine&&(J=!0),L.collapsed&&H!=d.line&&Pt(ge,0),FO(ge,new Eu(L,H==d.line?d.ch:null,H==b.line?b.ch:null),l.cm&&l.cm.curOp),++H}),L.collapsed&&l.iter(d.line,b.line+1,function(ge){ai(l,ge)&&Pt(ge,0)}),L.clearOnEnter&&Ee(L,"beforeCursorEnter",function(){return L.clear()}),L.readOnly&&(NO(),(l.history.done.length||l.history.undone.length)&&l.clearHistory()),L.collapsed&&(L.id=++Nx,L.atomic=!0),X){if(J&&(X.curOp.updateMaxLine=!0),L.collapsed)mn(X,d.line,b.line+1);else if(L.className||L.startStyle||L.endStyle||L.css||L.attributes||L.title)for(var ce=d.line;ce<=b.line;ce++)ii(X,ce,"text");L.atomic&&Ex(X.doc),Rr(X,"markerAdded",X,L)}return L}var rl=function(l,d){this.markers=l,this.primary=d;for(var b=0;b<l.length;++b)l[b].parent=this};rl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var l=0;l<this.markers.length;++l)this.markers[l].clear();Rr(this,"clear")}},rl.prototype.find=function(l,d){return this.primary.find(l,d)},Ge(rl);function $2(l,d,b,m,T){m=oe(m),m.shared=!1;var L=[Vo(l,d,b,m,T)],O=L[0],H=m.widgetNode;return ui(l,function(X){H&&(m.widgetNode=H.cloneNode(!0)),L.push(Vo(X,Ct(X,d),Ct(X,b),m,T));for(var J=0;J<X.linked.length;++J)if(X.linked[J].isParent)return;O=de(L)}),new rl(L,O)}function Ox(l){return l.findMarks(Re(l.first,0),l.clipPos(Re(l.lastLine())),function(d){return d.parent})}function Y2(l,d){for(var b=0;b<d.length;b++){var m=d[b],T=m.find(),L=l.clipPos(T.from),O=l.clipPos(T.to);if(Ze(L,O)){var H=Vo(l,L,O,m.primary,m.primary.type);m.markers.push(H),H.parent=m}}}function X2(l){for(var d=function(m){var T=l[m],L=[T.primary.doc];ui(T.primary.doc,function(X){return L.push(X)});for(var O=0;O<T.markers.length;O++){var H=T.markers[O];se(L,H.doc)==-1&&(H.parent=null,T.markers.splice(O--,1))}},b=0;b<l.length;b++)d(b)}var K2=0,bn=function(l,d,b,m,T){if(!(this instanceof bn))return new bn(l,d,b,m,T);b==null&&(b=0),el.call(this,[new Js([new Po("",null)])]),this.first=b,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=b;var L=Re(b,0);this.sel=si(L),this.history=new qu(null),this.id=++K2,this.modeOption=d,this.lineSep=m,this.direction=T=="rtl"?"rtl":"ltr",this.extend=!1,typeof l=="string"&&(l=this.splitLines(l)),Bd(this,{from:L,to:L,text:l}),Zr(this,si(L),le)};bn.prototype=Ae(el.prototype,{constructor:bn,iter:function(l,d,b){b?this.iterN(l-this.first,d-l,b):this.iterN(this.first,this.first+this.size,l)},insert:function(l,d){for(var b=0,m=0;m<d.length;++m)b+=d[m].height;this.insertInner(l-this.first,d,b)},remove:function(l,d){this.removeInner(l-this.first,d)},getValue:function(l){var d=Qn(this,this.first,this.first+this.size);return l===!1?d:d.join(l||this.lineSeparator())},setValue:kr(function(l){var d=Re(this.first,0),b=this.first+this.size-1;Ho(this,{from:d,to:Re(b,ft(this,b).text.length),text:this.splitLines(l),origin:"setValue",full:!0},!0),this.cm&&Vs(this.cm,0,0),Zr(this,si(d),le)}),replaceRange:function(l,d,b,m){d=Ct(this,d),b=b?Ct(this,b):d,Uo(this,l,d,b,m)},getRange:function(l,d,b){var m=Gr(this,Ct(this,l),Ct(this,d));return b===!1?m:b===""?m.join(""):m.join(b||this.lineSeparator())},getLine:function(l){var d=this.getLineHandle(l);return d&&d.text},getLineHandle:function(l){if(ke(this,l))return ft(this,l)},getLineNumber:function(l){return Q(l)},getLineHandleVisualStart:function(l){return typeof l=="number"&&(l=ft(this,l)),Jn(l)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(l){return Ct(this,l)},getCursor:function(l){var d=this.sel.primary(),b;return l==null||l=="head"?b=d.head:l=="anchor"?b=d.anchor:l=="end"||l=="to"||l===!1?b=d.to():b=d.from(),b},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:kr(function(l,d,b){wx(this,Ct(this,typeof l=="number"?Re(l,d||0):l),null,b)}),setSelection:kr(function(l,d,b){wx(this,Ct(this,l),Ct(this,d||l),b)}),extendSelection:kr(function(l,d,b){Gu(this,Ct(this,l),d&&Ct(this,d),b)}),extendSelections:kr(function(l,d){bx(this,fw(this,l),d)}),extendSelectionsBy:kr(function(l,d){var b=ye(this.sel.ranges,l);bx(this,fw(this,b),d)}),setSelections:kr(function(l,d,b){if(l.length){for(var m=[],T=0;T<l.length;T++)m[T]=new Bt(Ct(this,l[T].anchor),Ct(this,l[T].head||l[T].anchor));d==null&&(d=Math.min(l.length-1,this.sel.primIndex)),Zr(this,ta(this.cm,m,d),b)}}),addSelection:kr(function(l,d,b){var m=this.sel.ranges.slice(0);m.push(new Bt(Ct(this,l),Ct(this,d||l))),Zr(this,ta(this.cm,m,m.length-1),b)}),getSelection:function(l){for(var d=this.sel.ranges,b,m=0;m<d.length;m++){var T=Gr(this,d[m].from(),d[m].to());b=b?b.concat(T):T}return l===!1?b:b.join(l||this.lineSeparator())},getSelections:function(l){for(var d=[],b=this.sel.ranges,m=0;m<b.length;m++){var T=Gr(this,b[m].from(),b[m].to());l!==!1&&(T=T.join(l||this.lineSeparator())),d[m]=T}return d},replaceSelection:function(l,d,b){for(var m=[],T=0;T<this.sel.ranges.length;T++)m[T]=l;this.replaceSelections(m,d,b||"+input")},replaceSelections:kr(function(l,d,b){for(var m=[],T=this.sel,L=0;L<T.ranges.length;L++){var O=T.ranges[L];m[L]={from:O.from(),to:O.to(),text:this.splitLines(l[L]),origin:b}}for(var H=d&&d!="end"&&I2(this,m,d),X=m.length-1;X>=0;X--)Ho(this,m[X]);H?xx(this,H):this.cm&&Bo(this.cm)}),undo:kr(function(){Vu(this,"undo")}),redo:kr(function(){Vu(this,"redo")}),undoSelection:kr(function(){Vu(this,"undo",!0)}),redoSelection:kr(function(){Vu(this,"redo",!0)}),setExtending:function(l){this.extend=l},getExtending:function(){return this.extend},historySize:function(){for(var l=this.history,d=0,b=0,m=0;m<l.done.length;m++)l.done[m].ranges||++d;for(var T=0;T<l.undone.length;T++)l.undone[T].ranges||++b;return{undo:d,redo:b}},clearHistory:function(){var l=this;this.history=new qu(this.history),ui(this,function(d){return d.history=l.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(l){return l&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(l){return this.history.generation==(l||this.cleanGeneration)},getHistory:function(){return{done:zo(this.history.done),undone:zo(this.history.undone)}},setHistory:function(l){var d=this.history=new qu(this.history);d.done=zo(l.done.slice(0),null,!0),d.undone=zo(l.undone.slice(0),null,!0)},setGutterMarker:kr(function(l,d,b){return Qs(this,l,"gutter",function(m){var T=m.gutterMarkers||(m.gutterMarkers={});return T[d]=b,!b&&Ve(T)&&(m.gutterMarkers=null),!0})}),clearGutter:kr(function(l){var d=this;this.iter(function(b){b.gutterMarkers&&b.gutterMarkers[l]&&Qs(d,b,"gutter",function(){return b.gutterMarkers[l]=null,Ve(b.gutterMarkers)&&(b.gutterMarkers=null),!0})})}),lineInfo:function(l){var d;if(typeof l=="number"){if(!ke(this,l)||(d=l,l=ft(this,l),!l))return null}else if(d=Q(l),d==null)return null;return{line:d,handle:l,text:l.text,gutterMarkers:l.gutterMarkers,textClass:l.textClass,bgClass:l.bgClass,wrapClass:l.wrapClass,widgets:l.widgets}},addLineClass:kr(function(l,d,b){return Qs(this,l,d=="gutter"?"gutter":"class",function(m){var T=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass";if(!m[T])m[T]=b;else{if(G(b).test(m[T]))return!1;m[T]+=" "+b}return!0})}),removeLineClass:kr(function(l,d,b){return Qs(this,l,d=="gutter"?"gutter":"class",function(m){var T=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass",L=m[T];if(L)if(b==null)m[T]=null;else{var O=L.match(G(b));if(!O)return!1;var H=O.index+O[0].length;m[T]=L.slice(0,O.index)+(!O.index||H==L.length?"":" ")+L.slice(H)||null}else return!1;return!0})}),addLineWidget:kr(function(l,d,b){return W2(this,l,d,b)}),removeLineWidget:function(l){l.clear()},markText:function(l,d,b){return Vo(this,Ct(this,l),Ct(this,d),b,b&&b.type||"range")},setBookmark:function(l,d){var b={replacedWith:d&&(d.nodeType==null?d.widget:d),insertLeft:d&&d.insertLeft,clearWhenEmpty:!1,shared:d&&d.shared,handleMouseEvents:d&&d.handleMouseEvents};return l=Ct(this,l),Vo(this,l,l,b,"bookmark")},findMarksAt:function(l){l=Ct(this,l);var d=[],b=ft(this,l.line).markedSpans;if(b)for(var m=0;m<b.length;++m){var T=b[m];(T.from==null||T.from<=l.ch)&&(T.to==null||T.to>=l.ch)&&d.push(T.marker.parent||T.marker)}return d},findMarks:function(l,d,b){l=Ct(this,l),d=Ct(this,d);var m=[],T=l.line;return this.iter(l.line,d.line+1,function(L){var O=L.markedSpans;if(O)for(var H=0;H<O.length;H++){var X=O[H];!(X.to!=null&&T==l.line&&l.ch>=X.to||X.from==null&&T!=l.line||X.from!=null&&T==d.line&&X.from>=d.ch)&&(!b||b(X.marker))&&m.push(X.marker.parent||X.marker)}++T}),m},getAllMarks:function(){var l=[];return this.iter(function(d){var b=d.markedSpans;if(b)for(var m=0;m<b.length;++m)b[m].from!=null&&l.push(b[m].marker)}),l},posFromIndex:function(l){var d,b=this.first,m=this.lineSeparator().length;return this.iter(function(T){var L=T.text.length+m;if(L>l)return d=l,!0;l-=L,++b}),Ct(this,Re(b,d))},indexFromPos:function(l){l=Ct(this,l);var d=l.ch;if(l.line<this.first||l.ch<0)return 0;var b=this.lineSeparator().length;return this.iter(this.first,l.line,function(m){d+=m.text.length+b}),d},copy:function(l){var d=new bn(Qn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return d.scrollTop=this.scrollTop,d.scrollLeft=this.scrollLeft,d.sel=this.sel,d.extend=!1,l&&(d.history.undoDepth=this.history.undoDepth,d.setHistory(this.getHistory())),d},linkedDoc:function(l){l||(l={});var d=this.first,b=this.first+this.size;l.from!=null&&l.from>d&&(d=l.from),l.to!=null&&l.to<b&&(b=l.to);var m=new bn(Qn(this,d,b),l.mode||this.modeOption,d,this.lineSep,this.direction);return l.sharedHist&&(m.history=this.history),(this.linked||(this.linked=[])).push({doc:m,sharedHist:l.sharedHist}),m.linked=[{doc:this,isParent:!0,sharedHist:l.sharedHist}],Y2(m,Ox(this)),m},unlinkDoc:function(l){if(l instanceof lr&&(l=l.doc),this.linked)for(var d=0;d<this.linked.length;++d){var b=this.linked[d];if(b.doc==l){this.linked.splice(d,1),l.unlinkDoc(this),X2(Ox(this));break}}if(l.history==this.history){var m=[l.id];ui(l,function(T){return m.push(T.id)},!0),l.history=new qu(null),l.history.done=zo(this.history.done,m),l.history.undone=zo(this.history.undone,m)}},iterLinkedDocs:function(l){ui(this,l)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(l){return this.lineSep?l.split(this.lineSep):Ht(l)},lineSeparator:function(){return this.lineSep||`
`},setDirection:kr(function(l){l!="rtl"&&(l="ltr"),l!=this.direction&&(this.direction=l,this.iter(function(d){return d.order=null}),this.cm&&F2(this.cm))})}),bn.prototype.eachLine=bn.prototype.iter;var Ix=0;function j2(l){var d=this;if(Fx(d),!(Ue(d,l)||Oa(d.display,l))){$e(l),u&&(Ix=+new Date);var b=Wi(d,l,!0),m=l.dataTransfer.files;if(!(!b||d.isReadOnly()))if(m&&m.length&&window.FileReader&&window.File)for(var T=m.length,L=Array(T),O=0,H=function(){++O==T&&Pr(d,function(){b=Ct(d.doc,b);var Le={from:b,to:b,text:d.doc.splitLines(L.filter(function(Ne){return Ne!=null}).join(d.doc.lineSeparator())),origin:"paste"};Ho(d.doc,Le),xx(d.doc,si(Ct(d.doc,b),Ct(d.doc,li(Le))))})()},X=function(Le,Ne){if(d.options.allowDropFileTypes&&se(d.options.allowDropFileTypes,Le.type)==-1){H();return}var Be=new FileReader;Be.onerror=function(){return H()},Be.onload=function(){var Ke=Be.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Ke)){H();return}L[Ne]=Ke,H()},Be.readAsText(Le)},J=0;J<m.length;J++)X(m[J],J);else{if(d.state.draggingText&&d.doc.sel.contains(b)>-1){d.state.draggingText(l),setTimeout(function(){return d.display.input.focus()},20);return}try{var ce=l.dataTransfer.getData("Text");if(ce){var ge;if(d.state.draggingText&&!d.state.draggingText.copy&&(ge=d.listSelections()),Hu(d.doc,si(b,b)),ge)for(var _e=0;_e<ge.length;++_e)Uo(d.doc,"",ge[_e].anchor,ge[_e].head,"drag");d.replaceSelection(ce,"around","paste"),d.display.input.focus()}}catch{}}}}function Z2(l,d){if(u&&(!l.state.draggingText||+new Date-Ix<100)){it(d);return}if(!(Ue(l,d)||Oa(l.display,d))&&(d.dataTransfer.setData("Text",l.getSelection()),d.dataTransfer.effectAllowed="copyMove",d.dataTransfer.setDragImage&&!E)){var b=P("img",null,null,"position: fixed; left: 0; top: 0;");b.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",g&&(b.width=b.height=1,l.display.wrapper.appendChild(b),b._top=b.offsetTop),d.dataTransfer.setDragImage(b,0,0),g&&b.parentNode.removeChild(b)}}function Q2(l,d){var b=Wi(l,d);if(b){var m=document.createDocumentFragment();Sd(l,b,m),l.display.dragCursor||(l.display.dragCursor=P("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),l.display.lineSpace.insertBefore(l.display.dragCursor,l.display.cursorDiv)),R(l.display.dragCursor,m)}}function Fx(l){l.display.dragCursor&&(l.display.lineSpace.removeChild(l.display.dragCursor),l.display.dragCursor=null)}function Bx(l){if(document.getElementsByClassName){for(var d=document.getElementsByClassName("CodeMirror"),b=[],m=0;m<d.length;m++){var T=d[m].CodeMirror;T&&b.push(T)}b.length&&b[0].operation(function(){for(var L=0;L<b.length;L++)l(b[L])})}}var qx=!1;function J2(){qx||(eI(),qx=!0)}function eI(){var l;Ee(window,"resize",function(){l==null&&(l=setTimeout(function(){l=null,Bx(tI)},100))}),Ee(window,"blur",function(){return Bx(Fo)})}function tI(l){var d=l.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.scrollbarsClipped=!1,l.setSize()}for(var ci={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},nl=0;nl<10;nl++)ci[nl+48]=ci[nl+96]=String(nl);for(var Wu=65;Wu<=90;Wu++)ci[Wu]=String.fromCharCode(Wu);for(var al=1;al<=12;al++)ci[al+111]=ci[al+63235]="F"+al;var Fa={};Fa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Fa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Fa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Fa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Fa.default=A?Fa.macDefault:Fa.pcDefault;function rI(l){var d=l.split(/-(?!$)/);l=d[d.length-1];for(var b,m,T,L,O=0;O<d.length-1;O++){var H=d[O];if(/^(cmd|meta|m)$/i.test(H))L=!0;else if(/^a(lt)?$/i.test(H))b=!0;else if(/^(c|ctrl|control)$/i.test(H))m=!0;else if(/^s(hift)?$/i.test(H))T=!0;else throw new Error("Unrecognized modifier name: "+H)}return b&&(l="Alt-"+l),m&&(l="Ctrl-"+l),L&&(l="Cmd-"+l),T&&(l="Shift-"+l),l}function nI(l){var d={};for(var b in l)if(l.hasOwnProperty(b)){var m=l[b];if(/^(name|fallthrough|(de|at)tach)$/.test(b))continue;if(m=="..."){delete l[b];continue}for(var T=ye(b.split(" "),rI),L=0;L<T.length;L++){var O=void 0,H=void 0;L==T.length-1?(H=T.join(" "),O=m):(H=T.slice(0,L+1).join(" "),O="...");var X=d[H];if(!X)d[H]=O;else if(X!=O)throw new Error("Inconsistent bindings for "+H)}delete l[b]}for(var J in d)l[J]=d[J];return l}function Wo(l,d,b,m){d=$u(d);var T=d.call?d.call(l,m):d[l];if(T===!1)return"nothing";if(T==="...")return"multi";if(T!=null&&b(T))return"handled";if(d.fallthrough){if(Object.prototype.toString.call(d.fallthrough)!="[object Array]")return Wo(l,d.fallthrough,b,m);for(var L=0;L<d.fallthrough.length;L++){var O=Wo(l,d.fallthrough[L],b,m);if(O)return O}}}function zx(l){var d=typeof l=="string"?l:ci[l.keyCode];return d=="Ctrl"||d=="Alt"||d=="Shift"||d=="Mod"}function Gx(l,d,b){var m=l;return d.altKey&&m!="Alt"&&(l="Alt-"+l),(k?d.metaKey:d.ctrlKey)&&m!="Ctrl"&&(l="Ctrl-"+l),(k?d.ctrlKey:d.metaKey)&&m!="Mod"&&(l="Cmd-"+l),!b&&d.shiftKey&&m!="Shift"&&(l="Shift-"+l),l}function Hx(l,d){if(g&&l.keyCode==34&&l.char)return!1;var b=ci[l.keyCode];return b==null||l.altGraphKey?!1:(l.keyCode==3&&l.code&&(b=l.code),Gx(b,l,d))}function $u(l){return typeof l=="string"?Fa[l]:l}function $o(l,d){for(var b=l.doc.sel.ranges,m=[],T=0;T<b.length;T++){for(var L=d(b[T]);m.length&&Ze(L.from,de(m).to)<=0;){var O=m.pop();if(Ze(O.from,L.from)<0){L.from=O.from;break}}m.push(L)}Dn(l,function(){for(var H=m.length-1;H>=0;H--)Uo(l.doc,"",m[H].from,m[H].to,"+delete");Bo(l)})}function Hd(l,d,b){var m=We(l.text,d+b,b);return m<0||m>l.text.length?null:m}function Ud(l,d,b){var m=Hd(l,d.ch,b);return m==null?null:new Re(d.line,m,b<0?"after":"before")}function Vd(l,d,b,m,T){if(l){d.doc.direction=="rtl"&&(T=-T);var L=xe(b,d.doc.direction);if(L){var O=T<0?de(L):L[0],H=T<0==(O.level==1),X=H?"after":"before",J;if(O.level>0||d.doc.direction=="rtl"){var ce=No(d,b);J=T<0?b.text.length-1:0;var ge=pa(d,ce,J).top;J=he(function(_e){return pa(d,ce,_e).top==ge},T<0==(O.level==1)?O.from:O.to-1,J),X=="before"&&(J=Hd(b,J,1))}else J=T<0?O.to:O.from;return new Re(m,J,X)}}return new Re(m,T<0?b.text.length:0,T<0?"before":"after")}function aI(l,d,b,m){var T=xe(d,l.doc.direction);if(!T)return Ud(d,b,m);b.ch>=d.text.length?(b.ch=d.text.length,b.sticky="before"):b.ch<=0&&(b.ch=0,b.sticky="after");var L=me(T,b.ch,b.sticky),O=T[L];if(l.doc.direction=="ltr"&&O.level%2==0&&(m>0?O.to>b.ch:O.from<b.ch))return Ud(d,b,m);var H=function(et,ot){return Hd(d,et instanceof Re?et.ch:et,ot)},X,J=function(et){return l.options.lineWrapping?(X=X||No(l,d),Yw(l,d,X,et)):{begin:0,end:d.text.length}},ce=J(b.sticky=="before"?H(b,-1):b.ch);if(l.doc.direction=="rtl"||O.level==1){var ge=O.level==1==m<0,_e=H(b,ge?1:-1);if(_e!=null&&(ge?_e<=O.to&&_e<=ce.end:_e>=O.from&&_e>=ce.begin)){var Le=ge?"before":"after";return new Re(b.line,_e,Le)}}var Ne=function(et,ot,tt){for(var lt=function(Qt,Nr){return Nr?new Re(b.line,H(Qt,1),"before"):new Re(b.line,Qt,"after")};et>=0&&et<T.length;et+=ot){var yt=T[et],pt=ot>0==(yt.level!=1),At=pt?tt.begin:H(tt.end,-1);if(yt.from<=At&&At<yt.to||(At=pt?yt.from:H(yt.to,-1),tt.begin<=At&&At<tt.end))return lt(At,pt)}},Be=Ne(L+m,m,ce);if(Be)return Be;var Ke=m>0?ce.end:H(ce.begin,-1);return Ke!=null&&!(m>0&&Ke==d.text.length)&&(Be=Ne(m>0?0:T.length-1,m,J(Ke)),Be)?Be:null}var il={selectAll:Ax,singleSelection:function(l){return l.setSelection(l.getCursor("anchor"),l.getCursor("head"),le)},killLine:function(l){return $o(l,function(d){if(d.empty()){var b=ft(l.doc,d.head.line).text.length;return d.head.ch==b&&d.head.line<l.lastLine()?{from:d.head,to:Re(d.head.line+1,0)}:{from:d.head,to:Re(d.head.line,b)}}else return{from:d.from(),to:d.to()}})},deleteLine:function(l){return $o(l,function(d){return{from:Re(d.from().line,0),to:Ct(l.doc,Re(d.to().line+1,0))}})},delLineLeft:function(l){return $o(l,function(d){return{from:Re(d.from().line,0),to:d.from()}})},delWrappedLineLeft:function(l){return $o(l,function(d){var b=l.charCoords(d.head,"div").top+5,m=l.coordsChar({left:0,top:b},"div");return{from:m,to:d.from()}})},delWrappedLineRight:function(l){return $o(l,function(d){var b=l.charCoords(d.head,"div").top+5,m=l.coordsChar({left:l.display.lineDiv.offsetWidth+100,top:b},"div");return{from:d.from(),to:m}})},undo:function(l){return l.undo()},redo:function(l){return l.redo()},undoSelection:function(l){return l.undoSelection()},redoSelection:function(l){return l.redoSelection()},goDocStart:function(l){return l.extendSelection(Re(l.firstLine(),0))},goDocEnd:function(l){return l.extendSelection(Re(l.lastLine()))},goLineStart:function(l){return l.extendSelectionsBy(function(d){return Ux(l,d.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(l){return l.extendSelectionsBy(function(d){return Vx(l,d.head)},{origin:"+move",bias:1})},goLineEnd:function(l){return l.extendSelectionsBy(function(d){return iI(l,d.head.line)},{origin:"+move",bias:-1})},goLineRight:function(l){return l.extendSelectionsBy(function(d){var b=l.cursorCoords(d.head,"div").top+5;return l.coordsChar({left:l.display.lineDiv.offsetWidth+100,top:b},"div")},De)},goLineLeft:function(l){return l.extendSelectionsBy(function(d){var b=l.cursorCoords(d.head,"div").top+5;return l.coordsChar({left:0,top:b},"div")},De)},goLineLeftSmart:function(l){return l.extendSelectionsBy(function(d){var b=l.cursorCoords(d.head,"div").top+5,m=l.coordsChar({left:0,top:b},"div");return m.ch<l.getLine(m.line).search(/\S/)?Vx(l,d.head):m},De)},goLineUp:function(l){return l.moveV(-1,"line")},goLineDown:function(l){return l.moveV(1,"line")},goPageUp:function(l){return l.moveV(-1,"page")},goPageDown:function(l){return l.moveV(1,"page")},goCharLeft:function(l){return l.moveH(-1,"char")},goCharRight:function(l){return l.moveH(1,"char")},goColumnLeft:function(l){return l.moveH(-1,"column")},goColumnRight:function(l){return l.moveH(1,"column")},goWordLeft:function(l){return l.moveH(-1,"word")},goGroupRight:function(l){return l.moveH(1,"group")},goGroupLeft:function(l){return l.moveH(-1,"group")},goWordRight:function(l){return l.moveH(1,"word")},delCharBefore:function(l){return l.deleteH(-1,"codepoint")},delCharAfter:function(l){return l.deleteH(1,"char")},delWordBefore:function(l){return l.deleteH(-1,"word")},delWordAfter:function(l){return l.deleteH(1,"word")},delGroupBefore:function(l){return l.deleteH(-1,"group")},delGroupAfter:function(l){return l.deleteH(1,"group")},indentAuto:function(l){return l.indentSelection("smart")},indentMore:function(l){return l.indentSelection("add")},indentLess:function(l){return l.indentSelection("subtract")},insertTab:function(l){return l.replaceSelection("	")},insertSoftTab:function(l){for(var d=[],b=l.listSelections(),m=l.options.tabSize,T=0;T<b.length;T++){var L=b[T].from(),O=te(l.getLine(L.line),L.ch,m);d.push(ve(m-O%m))}l.replaceSelections(d)},defaultTab:function(l){l.somethingSelected()?l.indentSelection("add"):l.execCommand("insertTab")},transposeChars:function(l){return Dn(l,function(){for(var d=l.listSelections(),b=[],m=0;m<d.length;m++)if(d[m].empty()){var T=d[m].head,L=ft(l.doc,T.line).text;if(L){if(T.ch==L.length&&(T=new Re(T.line,T.ch-1)),T.ch>0)T=new Re(T.line,T.ch+1),l.replaceRange(L.charAt(T.ch-1)+L.charAt(T.ch-2),Re(T.line,T.ch-2),T,"+transpose");else if(T.line>l.doc.first){var O=ft(l.doc,T.line-1).text;O&&(T=new Re(T.line,1),l.replaceRange(L.charAt(0)+l.doc.lineSeparator()+O.charAt(O.length-1),Re(T.line-1,O.length-1),T,"+transpose"))}}b.push(new Bt(T,T))}l.setSelections(b)})},newlineAndIndent:function(l){return Dn(l,function(){for(var d=l.listSelections(),b=d.length-1;b>=0;b--)l.replaceRange(l.doc.lineSeparator(),d[b].anchor,d[b].head,"+input");d=l.listSelections();for(var m=0;m<d.length;m++)l.indentLine(d[m].from().line,null,!0);Bo(l)})},openLine:function(l){return l.replaceSelection(`
`,"start")},toggleOverwrite:function(l){return l.toggleOverwrite()}};function Ux(l,d){var b=ft(l.doc,d),m=Jn(b);return m!=b&&(d=Q(m)),Vd(!0,l,m,d,1)}function iI(l,d){var b=ft(l.doc,d),m=HO(b);return m!=b&&(d=Q(m)),Vd(!0,l,b,d,-1)}function Vx(l,d){var b=Ux(l,d.line),m=ft(l.doc,b.line),T=xe(m,l.doc.direction);if(!T||T[0].level==0){var L=Math.max(b.ch,m.text.search(/\S/)),O=d.line==b.line&&d.ch<=L&&d.ch;return Re(b.line,O?0:L,b.sticky)}return b}function Yu(l,d,b){if(typeof d=="string"&&(d=il[d],!d))return!1;l.display.input.ensurePolled();var m=l.display.shift,T=!1;try{l.isReadOnly()&&(l.state.suppressEdits=!0),b&&(l.display.shift=!1),T=d(l)!=ne}finally{l.display.shift=m,l.state.suppressEdits=!1}return T}function oI(l,d,b){for(var m=0;m<l.state.keyMaps.length;m++){var T=Wo(d,l.state.keyMaps[m],b,l);if(T)return T}return l.options.extraKeys&&Wo(d,l.options.extraKeys,b,l)||Wo(d,l.options.keyMap,b,l)}var sI=new ie;function ol(l,d,b,m){var T=l.state.keySeq;if(T){if(zx(d))return"handled";if(/\'$/.test(d)?l.state.keySeq=null:sI.set(50,function(){l.state.keySeq==T&&(l.state.keySeq=null,l.display.input.reset())}),Wx(l,T+" "+d,b,m))return!0}return Wx(l,d,b,m)}function Wx(l,d,b,m){var T=oI(l,d,m);return T=="multi"&&(l.state.keySeq=d),T=="handled"&&Rr(l,"keyHandled",l,d,b),(T=="handled"||T=="multi")&&($e(b),Ad(l)),!!T}function $x(l,d){var b=Hx(d,!0);return b?d.shiftKey&&!l.state.keySeq?ol(l,"Shift-"+b,d,function(m){return Yu(l,m,!0)})||ol(l,b,d,function(m){if(typeof m=="string"?/^go[A-Z]/.test(m):m.motion)return Yu(l,m)}):ol(l,b,d,function(m){return Yu(l,m)}):!1}function lI(l,d,b){return ol(l,"'"+b+"'",d,function(m){return Yu(l,m,!0)})}var Wd=null;function Yx(l){var d=this;if(!(l.target&&l.target!=d.display.input.getField())&&(d.curOp.focus=ae(U(d)),!Ue(d,l))){u&&f<11&&l.keyCode==27&&(l.returnValue=!1);var b=l.keyCode;d.display.shift=b==16||l.shiftKey;var m=$x(d,l);g&&(Wd=m?b:null,!m&&b==88&&!on&&(A?l.metaKey:l.ctrlKey)&&d.replaceSelection("",null,"cut")),a&&!A&&!m&&b==46&&l.shiftKey&&!l.ctrlKey&&document.execCommand&&document.execCommand("cut"),b==18&&!/\bCodeMirror-crosshair\b/.test(d.display.lineDiv.className)&&uI(d)}}function uI(l){var d=l.display.lineDiv;re(d,"CodeMirror-crosshair");function b(m){(m.keyCode==18||!m.altKey)&&(B(d,"CodeMirror-crosshair"),Ie(document,"keyup",b),Ie(document,"mouseover",b))}Ee(document,"keyup",b),Ee(document,"mouseover",b)}function Xx(l){l.keyCode==16&&(this.doc.sel.shift=!1),Ue(this,l)}function Kx(l){var d=this;if(!(l.target&&l.target!=d.display.input.getField())&&!(Oa(d.display,l)||Ue(d,l)||l.ctrlKey&&!l.altKey||A&&l.metaKey)){var b=l.keyCode,m=l.charCode;if(g&&b==Wd){Wd=null,$e(l);return}if(!(g&&(!l.which||l.which<10)&&$x(d,l))){var T=String.fromCharCode(m??b);T!="\b"&&(lI(d,l,T)||d.display.input.onKeyPress(l))}}}var fI=400,$d=function(l,d,b){this.time=l,this.pos=d,this.button=b};$d.prototype.compare=function(l,d,b){return this.time+fI>l&&Ze(d,this.pos)==0&&b==this.button};var sl,ll;function cI(l,d){var b=+new Date;return ll&&ll.compare(b,l,d)?(sl=ll=null,"triple"):sl&&sl.compare(b,l,d)?(ll=new $d(b,l,d),sl=null,"double"):(sl=new $d(b,l,d),ll=null,"single")}function jx(l){var d=this,b=d.display;if(!(Ue(d,l)||b.activeTouch&&b.input.supportsTouch())){if(b.input.ensurePolled(),b.shift=l.shiftKey,Oa(b,l)){c||(b.scroller.draggable=!1,setTimeout(function(){return b.scroller.draggable=!0},100));return}if(!Yd(d,l)){var m=Wi(d,l),T=dt(l),L=m?cI(m,T):"single";Y(d).focus(),T==1&&d.state.selectingText&&d.state.selectingText(l),!(m&&dI(d,T,m,L,l))&&(T==1?m?vI(d,m,L,l):Tt(l)==b.scroller&&$e(l):T==2?(m&&Gu(d.doc,m),setTimeout(function(){return b.input.focus()},20)):T==3&&(F?d.display.input.onContextMenu(l):Ld(d)))}}}function dI(l,d,b,m,T){var L="Click";return m=="double"?L="Double"+L:m=="triple"&&(L="Triple"+L),L=(d==1?"Left":d==2?"Middle":"Right")+L,ol(l,Gx(L,T),T,function(O){if(typeof O=="string"&&(O=il[O]),!O)return!1;var H=!1;try{l.isReadOnly()&&(l.state.suppressEdits=!0),H=O(l,b)!=ne}finally{l.state.suppressEdits=!1}return H})}function hI(l,d,b){var m=l.getOption("configureMouse"),T=m?m(l,d,b):{};if(T.unit==null){var L=D?b.shiftKey&&b.metaKey:b.altKey;T.unit=L?"rectangle":d=="single"?"char":d=="double"?"word":"line"}return(T.extend==null||l.doc.extend)&&(T.extend=l.doc.extend||b.shiftKey),T.addNew==null&&(T.addNew=A?b.metaKey:b.ctrlKey),T.moveOnDrag==null&&(T.moveOnDrag=!(A?b.altKey:b.ctrlKey)),T}function vI(l,d,b,m){u?setTimeout(ee(Zw,l),0):l.curOp.focus=ae(U(l));var T=hI(l,b,m),L=l.doc.sel,O;l.options.dragDrop&&gt&&!l.isReadOnly()&&b=="single"&&(O=L.contains(d))>-1&&(Ze((O=L.ranges[O]).from(),d)<0||d.xRel>0)&&(Ze(O.to(),d)>0||d.xRel<0)?pI(l,m,d,T):gI(l,m,d,T)}function pI(l,d,b,m){var T=l.display,L=!1,O=Pr(l,function(J){c&&(T.scroller.draggable=!1),l.state.draggingText=!1,l.state.delayingBlurEvent&&(l.hasFocus()?l.state.delayingBlurEvent=!1:Ld(l)),Ie(T.wrapper.ownerDocument,"mouseup",O),Ie(T.wrapper.ownerDocument,"mousemove",H),Ie(T.scroller,"dragstart",X),Ie(T.scroller,"drop",O),L||($e(J),m.addNew||Gu(l.doc,b,null,null,m.extend),c&&!E||u&&f==9?setTimeout(function(){T.wrapper.ownerDocument.body.focus({preventScroll:!0}),T.input.focus()},20):T.input.focus())}),H=function(J){L=L||Math.abs(d.clientX-J.clientX)+Math.abs(d.clientY-J.clientY)>=10},X=function(){return L=!0};c&&(T.scroller.draggable=!0),l.state.draggingText=O,O.copy=!m.moveOnDrag,Ee(T.wrapper.ownerDocument,"mouseup",O),Ee(T.wrapper.ownerDocument,"mousemove",H),Ee(T.scroller,"dragstart",X),Ee(T.scroller,"drop",O),l.state.delayingBlurEvent=!0,setTimeout(function(){return T.input.focus()},20),T.scroller.dragDrop&&T.scroller.dragDrop()}function Zx(l,d,b){if(b=="char")return new Bt(d,d);if(b=="word")return l.findWordAt(d);if(b=="line")return new Bt(Re(d.line,0),Ct(l.doc,Re(d.line+1,0)));var m=b(l,d);return new Bt(m.from,m.to)}function gI(l,d,b,m){u&&Ld(l);var T=l.display,L=l.doc;$e(d);var O,H,X=L.sel,J=X.ranges;if(m.addNew&&!m.extend?(H=L.sel.contains(b),H>-1?O=J[H]:O=new Bt(b,b)):(O=L.sel.primary(),H=L.sel.primIndex),m.unit=="rectangle")m.addNew||(O=new Bt(b,b)),b=Wi(l,d,!0,!0),H=-1;else{var ce=Zx(l,b,m.unit);m.extend?O=zd(O,ce.anchor,ce.head,m.extend):O=ce}m.addNew?H==-1?(H=J.length,Zr(L,ta(l,J.concat([O]),H),{scroll:!1,origin:"*mouse"})):J.length>1&&J[H].empty()&&m.unit=="char"&&!m.extend?(Zr(L,ta(l,J.slice(0,H).concat(J.slice(H+1)),0),{scroll:!1,origin:"*mouse"}),X=L.sel):Gd(L,H,O,Se):(H=0,Zr(L,new On([O],0),Se),X=L.sel);var ge=b;function _e(tt){if(Ze(ge,tt)!=0)if(ge=tt,m.unit=="rectangle"){for(var lt=[],yt=l.options.tabSize,pt=te(ft(L,b.line).text,b.ch,yt),At=te(ft(L,tt.line).text,tt.ch,yt),Qt=Math.min(pt,At),Nr=Math.max(pt,At),dr=Math.min(b.line,tt.line),_n=Math.min(l.lastLine(),Math.max(b.line,tt.line));dr<=_n;dr++){var wn=ft(L,dr).text,Cr=be(wn,Qt,yt);Qt==Nr?lt.push(new Bt(Re(dr,Cr),Re(dr,Cr))):wn.length>Cr&&lt.push(new Bt(Re(dr,Cr),Re(dr,be(wn,Nr,yt))))}lt.length||lt.push(new Bt(b,b)),Zr(L,ta(l,X.ranges.slice(0,H).concat(lt),H),{origin:"*mouse",scroll:!1}),l.scrollIntoView(tt)}else{var xn=O,Hr=Zx(l,tt,m.unit),Ar=xn.anchor,Er;Ze(Hr.anchor,Ar)>0?(Er=Hr.head,Ar=Ro(xn.from(),Hr.anchor)):(Er=Hr.anchor,Ar=yn(xn.to(),Hr.head));var vr=X.ranges.slice(0);vr[H]=yI(l,new Bt(Ct(L,Ar),Er)),Zr(L,ta(l,vr,H),Se)}}var Le=T.wrapper.getBoundingClientRect(),Ne=0;function Be(tt){var lt=++Ne,yt=Wi(l,tt,!0,m.unit=="rectangle");if(yt)if(Ze(yt,ge)!=0){l.curOp.focus=ae(U(l)),_e(yt);var pt=Ou(T,L);(yt.line>=pt.to||yt.line<pt.from)&&setTimeout(Pr(l,function(){Ne==lt&&Be(tt)}),150)}else{var At=tt.clientY<Le.top?-20:tt.clientY>Le.bottom?20:0;At&&setTimeout(Pr(l,function(){Ne==lt&&(T.scroller.scrollTop+=At,Be(tt))}),50)}}function Ke(tt){l.state.selectingText=!1,Ne=1/0,tt&&($e(tt),T.input.focus()),Ie(T.wrapper.ownerDocument,"mousemove",et),Ie(T.wrapper.ownerDocument,"mouseup",ot),L.history.lastSelOrigin=null}var et=Pr(l,function(tt){tt.buttons===0||!dt(tt)?Ke(tt):Be(tt)}),ot=Pr(l,Ke);l.state.selectingText=ot,Ee(T.wrapper.ownerDocument,"mousemove",et),Ee(T.wrapper.ownerDocument,"mouseup",ot)}function yI(l,d){var b=d.anchor,m=d.head,T=ft(l.doc,b.line);if(Ze(b,m)==0&&b.sticky==m.sticky)return d;var L=xe(T);if(!L)return d;var O=me(L,b.ch,b.sticky),H=L[O];if(H.from!=b.ch&&H.to!=b.ch)return d;var X=O+(H.from==b.ch==(H.level!=1)?0:1);if(X==0||X==L.length)return d;var J;if(m.line!=b.line)J=(m.line-b.line)*(l.doc.direction=="ltr"?1:-1)>0;else{var ce=me(L,m.ch,m.sticky),ge=ce-O||(m.ch-b.ch)*(H.level==1?-1:1);ce==X-1||ce==X?J=ge<0:J=ge>0}var _e=L[X+(J?-1:0)],Le=J==(_e.level==1),Ne=Le?_e.from:_e.to,Be=Le?"after":"before";return b.ch==Ne&&b.sticky==Be?d:new Bt(new Re(b.line,Ne,Be),m)}function Qx(l,d,b,m){var T,L;if(d.touches)T=d.touches[0].clientX,L=d.touches[0].clientY;else try{T=d.clientX,L=d.clientY}catch{return!1}if(T>=Math.floor(l.display.gutters.getBoundingClientRect().right))return!1;m&&$e(d);var O=l.display,H=O.lineDiv.getBoundingClientRect();if(L>H.bottom||!Je(l,b))return nt(d);L-=H.top-O.viewOffset;for(var X=0;X<l.display.gutterSpecs.length;++X){var J=O.gutters.childNodes[X];if(J&&J.getBoundingClientRect().right>=T){var ce=fe(l.doc,L),ge=l.display.gutterSpecs[X];return He(l,b,l,ce,ge.className,d),nt(d)}}}function Yd(l,d){return Qx(l,d,"gutterClick",!0)}function Jx(l,d){Oa(l.display,d)||mI(l,d)||Ue(l,d,"contextmenu")||F||l.display.input.onContextMenu(d)}function mI(l,d){return Je(l,"gutterContextMenu")?Qx(l,d,"gutterContextMenu",!1):!1}function eC(l){l.display.wrapper.className=l.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+l.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Hs(l)}var Yo={toString:function(){return"CodeMirror.Init"}},tC={},Xu={};function bI(l){var d=l.optionHandlers;function b(m,T,L,O){l.defaults[m]=T,L&&(d[m]=O?function(H,X,J){J!=Yo&&L(H,X,J)}:L)}l.defineOption=b,l.Init=Yo,b("value","",function(m,T){return m.setValue(T)},!0),b("mode",null,function(m,T){m.doc.modeOption=T,Fd(m)},!0),b("indentUnit",2,Fd,!0),b("indentWithTabs",!1),b("smartIndent",!0),b("tabSize",4,function(m){js(m),Hs(m),mn(m)},!0),b("lineSeparator",null,function(m,T){if(m.doc.lineSep=T,!!T){var L=[],O=m.doc.first;m.doc.iter(function(X){for(var J=0;;){var ce=X.text.indexOf(T,J);if(ce==-1)break;J=ce+T.length,L.push(Re(O,ce))}O++});for(var H=L.length-1;H>=0;H--)Uo(m.doc,T,L[H],Re(L[H].line,L[H].ch+T.length))}}),b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(m,T,L){m.state.specialChars=new RegExp(T.source+(T.test("	")?"":"|	"),"g"),L!=Yo&&m.refresh()}),b("specialCharPlaceholder",XO,function(m){return m.refresh()},!0),b("electricChars",!0),b("inputStyle",S?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),b("spellcheck",!1,function(m,T){return m.getInputField().spellcheck=T},!0),b("autocorrect",!1,function(m,T){return m.getInputField().autocorrect=T},!0),b("autocapitalize",!1,function(m,T){return m.getInputField().autocapitalize=T},!0),b("rtlMoveVisually",!_),b("wholeLineUpdateBefore",!0),b("theme","default",function(m){eC(m),Ks(m)},!0),b("keyMap","default",function(m,T,L){var O=$u(T),H=L!=Yo&&$u(L);H&&H.detach&&H.detach(m,O),O.attach&&O.attach(m,H||null)}),b("extraKeys",null),b("configureMouse",null),b("lineWrapping",!1,xI,!0),b("gutters",[],function(m,T){m.display.gutterSpecs=Od(T,m.options.lineNumbers),Ks(m)},!0),b("fixedGutter",!0,function(m,T){m.display.gutters.style.left=T?Ed(m.display)+"px":"0",m.refresh()},!0),b("coverGutterNextToScrollbar",!1,function(m){return qo(m)},!0),b("scrollbarStyle","native",function(m){nx(m),qo(m),m.display.scrollbars.setScrollTop(m.doc.scrollTop),m.display.scrollbars.setScrollLeft(m.doc.scrollLeft)},!0),b("lineNumbers",!1,function(m,T){m.display.gutterSpecs=Od(m.options.gutters,T),Ks(m)},!0),b("firstLineNumber",1,Ks,!0),b("lineNumberFormatter",function(m){return m},Ks,!0),b("showCursorWhenSelecting",!1,Us,!0),b("resetSelectionOnContextMenu",!0),b("lineWiseCopyCut",!0),b("pasteLinesPerSelection",!0),b("selectionsMayTouch",!1),b("readOnly",!1,function(m,T){T=="nocursor"&&(Fo(m),m.display.input.blur()),m.display.input.readOnlyChanged(T)}),b("screenReaderLabel",null,function(m,T){T=T===""?null:T,m.display.input.screenReaderLabelChanged(T)}),b("disableInput",!1,function(m,T){T||m.display.input.reset()},!0),b("dragDrop",!0,wI),b("allowDropFileTypes",null),b("cursorBlinkRate",530),b("cursorScrollMargin",0),b("cursorHeight",1,Us,!0),b("singleCursorHeightPerLine",!0,Us,!0),b("workTime",100),b("workDelay",100),b("flattenSpans",!0,js,!0),b("addModeClass",!1,js,!0),b("pollInterval",100),b("undoDepth",200,function(m,T){return m.doc.history.undoDepth=T}),b("historyEventDelay",1250),b("viewportMargin",10,function(m){return m.refresh()},!0),b("maxHighlightLength",1e4,js,!0),b("moveInputWithCursor",!0,function(m,T){T||m.display.input.resetPosition()}),b("tabindex",null,function(m,T){return m.display.input.getField().tabIndex=T||""}),b("autofocus",null),b("direction","ltr",function(m,T){return m.doc.setDirection(T)},!0),b("phrases",null)}function wI(l,d,b){var m=b&&b!=Yo;if(!d!=!m){var T=l.display.dragFunctions,L=d?Ee:Ie;L(l.display.scroller,"dragstart",T.start),L(l.display.scroller,"dragenter",T.enter),L(l.display.scroller,"dragover",T.over),L(l.display.scroller,"dragleave",T.leave),L(l.display.scroller,"drop",T.drop)}}function xI(l){l.options.lineWrapping?(re(l.display.wrapper,"CodeMirror-wrap"),l.display.sizer.style.minWidth="",l.display.sizerWidth=null):(B(l.display.wrapper,"CodeMirror-wrap"),hd(l)),Td(l),mn(l),Hs(l),setTimeout(function(){return qo(l)},100)}function lr(l,d){var b=this;if(!(this instanceof lr))return new lr(l,d);this.options=d=d?oe(d):{},oe(tC,d,!1);var m=d.value;typeof m=="string"?m=new bn(m,d.mode,null,d.lineSeparator,d.direction):d.mode&&(m.modeOption=d.mode),this.doc=m;var T=new lr.inputStyles[d.inputStyle](this),L=this.display=new N2(l,m,T,d);L.wrapper.CodeMirror=this,eC(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),nx(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ie,keySeq:null,specialChars:null},d.autofocus&&!S&&L.input.focus(),u&&f<11&&setTimeout(function(){return b.display.input.reset(!0)},20),CI(this),J2(),Ki(this),this.curOp.forceUpdate=!0,hx(this,m),d.autofocus&&!S||this.hasFocus()?setTimeout(function(){b.hasFocus()&&!b.state.focused&&Dd(b)},20):Fo(this);for(var O in Xu)Xu.hasOwnProperty(O)&&Xu[O](this,d[O],Yo);ox(this),d.finishInit&&d.finishInit(this);for(var H=0;H<Xd.length;++H)Xd[H](this);ji(this),c&&d.lineWrapping&&getComputedStyle(L.lineDiv).textRendering=="optimizelegibility"&&(L.lineDiv.style.textRendering="auto")}lr.defaults=tC,lr.optionHandlers=Xu;function CI(l){var d=l.display;Ee(d.scroller,"mousedown",Pr(l,jx)),u&&f<11?Ee(d.scroller,"dblclick",Pr(l,function(X){if(!Ue(l,X)){var J=Wi(l,X);if(!(!J||Yd(l,X)||Oa(l.display,X))){$e(X);var ce=l.findWordAt(J);Gu(l.doc,ce.anchor,ce.head)}}})):Ee(d.scroller,"dblclick",function(X){return Ue(l,X)||$e(X)}),Ee(d.scroller,"contextmenu",function(X){return Jx(l,X)}),Ee(d.input.getField(),"contextmenu",function(X){d.scroller.contains(X.target)||Jx(l,X)});var b,m={end:0};function T(){d.activeTouch&&(b=setTimeout(function(){return d.activeTouch=null},1e3),m=d.activeTouch,m.end=+new Date)}function L(X){if(X.touches.length!=1)return!1;var J=X.touches[0];return J.radiusX<=1&&J.radiusY<=1}function O(X,J){if(J.left==null)return!0;var ce=J.left-X.left,ge=J.top-X.top;return ce*ce+ge*ge>20*20}Ee(d.scroller,"touchstart",function(X){if(!Ue(l,X)&&!L(X)&&!Yd(l,X)){d.input.ensurePolled(),clearTimeout(b);var J=+new Date;d.activeTouch={start:J,moved:!1,prev:J-m.end<=300?m:null},X.touches.length==1&&(d.activeTouch.left=X.touches[0].pageX,d.activeTouch.top=X.touches[0].pageY)}}),Ee(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)}),Ee(d.scroller,"touchend",function(X){var J=d.activeTouch;if(J&&!Oa(d,X)&&J.left!=null&&!J.moved&&new Date-J.start<300){var ce=l.coordsChar(d.activeTouch,"page"),ge;!J.prev||O(J,J.prev)?ge=new Bt(ce,ce):!J.prev.prev||O(J,J.prev.prev)?ge=l.findWordAt(ce):ge=new Bt(Re(ce.line,0),Ct(l.doc,Re(ce.line+1,0))),l.setSelection(ge.anchor,ge.head),l.focus(),$e(X)}T()}),Ee(d.scroller,"touchcancel",T),Ee(d.scroller,"scroll",function(){d.scroller.clientHeight&&(Ws(l,d.scroller.scrollTop),Yi(l,d.scroller.scrollLeft,!0),He(l,"scroll",l))}),Ee(d.scroller,"mousewheel",function(X){return ux(l,X)}),Ee(d.scroller,"DOMMouseScroll",function(X){return ux(l,X)}),Ee(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0}),d.dragFunctions={enter:function(X){Ue(l,X)||it(X)},over:function(X){Ue(l,X)||(Q2(l,X),it(X))},start:function(X){return Z2(l,X)},drop:Pr(l,j2),leave:function(X){Ue(l,X)||Fx(l)}};var H=d.input.getField();Ee(H,"keyup",function(X){return Xx.call(l,X)}),Ee(H,"keydown",Pr(l,Yx)),Ee(H,"keypress",Pr(l,Kx)),Ee(H,"focus",function(X){return Dd(l,X)}),Ee(H,"blur",function(X){return Fo(l,X)})}var Xd=[];lr.defineInitHook=function(l){return Xd.push(l)};function ul(l,d,b,m){var T=l.doc,L;b==null&&(b="add"),b=="smart"&&(T.mode.indent?L=Fs(l,d).state:b="prev");var O=l.options.tabSize,H=ft(T,d),X=te(H.text,null,O);H.stateAfter&&(H.stateAfter=null);var J=H.text.match(/^\s*/)[0],ce;if(!m&&!/\S/.test(H.text))ce=0,b="not";else if(b=="smart"&&(ce=T.mode.indent(L,H.text.slice(J.length),H.text),ce==ne||ce>150)){if(!m)return;b="prev"}b=="prev"?d>T.first?ce=te(ft(T,d-1).text,null,O):ce=0:b=="add"?ce=X+l.options.indentUnit:b=="subtract"?ce=X-l.options.indentUnit:typeof b=="number"&&(ce=X+b),ce=Math.max(0,ce);var ge="",_e=0;if(l.options.indentWithTabs)for(var Le=Math.floor(ce/O);Le;--Le)_e+=O,ge+="	";if(_e<ce&&(ge+=ve(ce-_e)),ge!=J)return Uo(T,ge,Re(d,0),Re(d,J.length),"+input"),H.stateAfter=null,!0;for(var Ne=0;Ne<T.sel.ranges.length;Ne++){var Be=T.sel.ranges[Ne];if(Be.head.line==d&&Be.head.ch<J.length){var Ke=Re(d,J.length);Gd(T,Ne,new Bt(Ke,Ke));break}}}var ra=null;function Ku(l){ra=l}function Kd(l,d,b,m,T){var L=l.doc;l.display.shift=!1,m||(m=L.sel);var O=+new Date-200,H=T=="paste"||l.state.pasteIncoming>O,X=Ht(d),J=null;if(H&&m.ranges.length>1)if(ra&&ra.text.join(`
`)==d){if(m.ranges.length%ra.text.length==0){J=[];for(var ce=0;ce<ra.text.length;ce++)J.push(L.splitLines(ra.text[ce]))}}else X.length==m.ranges.length&&l.options.pasteLinesPerSelection&&(J=ye(X,function(et){return[et]}));for(var ge=l.curOp.updateInput,_e=m.ranges.length-1;_e>=0;_e--){var Le=m.ranges[_e],Ne=Le.from(),Be=Le.to();Le.empty()&&(b&&b>0?Ne=Re(Ne.line,Ne.ch-b):l.state.overwrite&&!H?Be=Re(Be.line,Math.min(ft(L,Be.line).text.length,Be.ch+de(X).length)):H&&ra&&ra.lineWise&&ra.text.join(`
`)==X.join(`
`)&&(Ne=Be=Re(Ne.line,0)));var Ke={from:Ne,to:Be,text:J?J[_e%J.length]:X,origin:T||(H?"paste":l.state.cutIncoming>O?"cut":"+input")};Ho(l.doc,Ke),Rr(l,"inputRead",l,Ke)}d&&!H&&nC(l,d),Bo(l),l.curOp.updateInput<2&&(l.curOp.updateInput=ge),l.curOp.typing=!0,l.state.pasteIncoming=l.state.cutIncoming=-1}function rC(l,d){var b=l.clipboardData&&l.clipboardData.getData("Text");if(b)return l.preventDefault(),!d.isReadOnly()&&!d.options.disableInput&&d.hasFocus()&&Dn(d,function(){return Kd(d,b,0,null,"paste")}),!0}function nC(l,d){if(!(!l.options.electricChars||!l.options.smartIndent))for(var b=l.doc.sel,m=b.ranges.length-1;m>=0;m--){var T=b.ranges[m];if(!(T.head.ch>100||m&&b.ranges[m-1].head.line==T.head.line)){var L=l.getModeAt(T.head),O=!1;if(L.electricChars){for(var H=0;H<L.electricChars.length;H++)if(d.indexOf(L.electricChars.charAt(H))>-1){O=ul(l,T.head.line,"smart");break}}else L.electricInput&&L.electricInput.test(ft(l.doc,T.head.line).text.slice(0,T.head.ch))&&(O=ul(l,T.head.line,"smart"));O&&Rr(l,"electricInput",l,T.head.line)}}}function aC(l){for(var d=[],b=[],m=0;m<l.doc.sel.ranges.length;m++){var T=l.doc.sel.ranges[m].head.line,L={anchor:Re(T,0),head:Re(T+1,0)};b.push(L),d.push(l.getRange(L.anchor,L.head))}return{text:d,ranges:b}}function jd(l,d,b,m){l.setAttribute("autocorrect",b?"on":"off"),l.setAttribute("autocapitalize",m?"on":"off"),l.setAttribute("spellcheck",!!d)}function iC(){var l=P("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),d=P("div",[l],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return c?l.style.width="1000px":l.setAttribute("wrap","off"),C&&(l.style.border="1px solid black"),d}function EI(l){var d=l.optionHandlers,b=l.helpers={};l.prototype={constructor:l,focus:function(){Y(this).focus(),this.display.input.focus()},setOption:function(m,T){var L=this.options,O=L[m];L[m]==T&&m!="mode"||(L[m]=T,d.hasOwnProperty(m)&&Pr(this,d[m])(this,T,O),He(this,"optionChange",this,m))},getOption:function(m){return this.options[m]},getDoc:function(){return this.doc},addKeyMap:function(m,T){this.state.keyMaps[T?"push":"unshift"]($u(m))},removeKeyMap:function(m){for(var T=this.state.keyMaps,L=0;L<T.length;++L)if(T[L]==m||T[L].name==m)return T.splice(L,1),!0},addOverlay:ln(function(m,T){var L=m.token?m:l.getMode(this.options,m);if(L.startState)throw new Error("Overlays may not be stateful.");Ce(this.state.overlays,{mode:L,modeSpec:m,opaque:T&&T.opaque,priority:T&&T.priority||0},function(O){return O.priority}),this.state.modeGen++,mn(this)}),removeOverlay:ln(function(m){for(var T=this.state.overlays,L=0;L<T.length;++L){var O=T[L].modeSpec;if(O==m||typeof m=="string"&&O.name==m){T.splice(L,1),this.state.modeGen++,mn(this);return}}}),indentLine:ln(function(m,T,L){typeof T!="string"&&typeof T!="number"&&(T==null?T=this.options.smartIndent?"smart":"prev":T=T?"add":"subtract"),ke(this.doc,m)&&ul(this,m,T,L)}),indentSelection:ln(function(m){for(var T=this.doc.sel.ranges,L=-1,O=0;O<T.length;O++){var H=T[O];if(H.empty())H.head.line>L&&(ul(this,H.head.line,m,!0),L=H.head.line,O==this.doc.sel.primIndex&&Bo(this));else{var X=H.from(),J=H.to(),ce=Math.max(L,X.line);L=Math.min(this.lastLine(),J.line-(J.ch?0:1))+1;for(var ge=ce;ge<L;++ge)ul(this,ge,m);var _e=this.doc.sel.ranges;X.ch==0&&T.length==_e.length&&_e[O].from().ch>0&&Gd(this.doc,O,new Bt(X,_e[O].to()),le)}}}),getTokenAt:function(m,T){return pw(this,m,T)},getLineTokens:function(m,T){return pw(this,Re(m),T,!0)},getTokenTypeAt:function(m){m=Ct(this.doc,m);var T=dw(this,ft(this.doc,m.line)),L=0,O=(T.length-1)/2,H=m.ch,X;if(H==0)X=T[2];else for(;;){var J=L+O>>1;if((J?T[J*2-1]:0)>=H)O=J;else if(T[J*2+1]<H)L=J+1;else{X=T[J*2+2];break}}var ce=X?X.indexOf("overlay "):-1;return ce<0?X:ce==0?null:X.slice(0,ce-1)},getModeAt:function(m){var T=this.doc.mode;return T.innerMode?l.innerMode(T,this.getTokenAt(m).state).mode:T},getHelper:function(m,T){return this.getHelpers(m,T)[0]},getHelpers:function(m,T){var L=[];if(!b.hasOwnProperty(T))return L;var O=b[T],H=this.getModeAt(m);if(typeof H[T]=="string")O[H[T]]&&L.push(O[H[T]]);else if(H[T])for(var X=0;X<H[T].length;X++){var J=O[H[T][X]];J&&L.push(J)}else H.helperType&&O[H.helperType]?L.push(O[H.helperType]):O[H.name]&&L.push(O[H.name]);for(var ce=0;ce<O._global.length;ce++){var ge=O._global[ce];ge.pred(H,this)&&se(L,ge.val)==-1&&L.push(ge.val)}return L},getStateAfter:function(m,T){var L=this.doc;return m=uw(L,m??L.first+L.size-1),Fs(this,m+1,T).state},cursorCoords:function(m,T){var L,O=this.doc.sel.primary();return m==null?L=O.head:typeof m=="object"?L=Ct(this.doc,m):L=m?O.from():O.to(),ea(this,L,T||"page")},charCoords:function(m,T){return Ru(this,Ct(this.doc,m),T||"page")},coordsChar:function(m,T){return m=Vw(this,m,T||"page"),wd(this,m.left,m.top)},lineAtHeight:function(m,T){return m=Vw(this,{top:m,left:0},T||"page").top,fe(this.doc,m+this.display.viewOffset)},heightAtLine:function(m,T,L){var O=!1,H;if(typeof m=="number"){var X=this.doc.first+this.doc.size-1;m<this.doc.first?m=this.doc.first:m>X&&(m=X,O=!0),H=ft(this.doc,m)}else H=m;return Mu(this,H,{top:0,left:0},T||"page",L||O).top+(O?this.doc.height-Na(H):0)},defaultTextHeight:function(){return Oo(this.display)},defaultCharWidth:function(){return Io(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(m,T,L,O,H){var X=this.display;m=ea(this,Ct(this.doc,m));var J=m.bottom,ce=m.left;if(T.style.position="absolute",T.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(T),X.sizer.appendChild(T),O=="over")J=m.top;else if(O=="above"||O=="near"){var ge=Math.max(X.wrapper.clientHeight,this.doc.height),_e=Math.max(X.sizer.clientWidth,X.lineSpace.clientWidth);(O=="above"||m.bottom+T.offsetHeight>ge)&&m.top>T.offsetHeight?J=m.top-T.offsetHeight:m.bottom+T.offsetHeight<=ge&&(J=m.bottom),ce+T.offsetWidth>_e&&(ce=_e-T.offsetWidth)}T.style.top=J+"px",T.style.left=T.style.right="",H=="right"?(ce=X.sizer.clientWidth-T.offsetWidth,T.style.right="0px"):(H=="left"?ce=0:H=="middle"&&(ce=(X.sizer.clientWidth-T.offsetWidth)/2),T.style.left=ce+"px"),L&&w2(this,{left:ce,top:J,right:ce+T.offsetWidth,bottom:J+T.offsetHeight})},triggerOnKeyDown:ln(Yx),triggerOnKeyPress:ln(Kx),triggerOnKeyUp:Xx,triggerOnMouseDown:ln(jx),execCommand:function(m){if(il.hasOwnProperty(m))return il[m].call(null,this)},triggerElectric:ln(function(m){nC(this,m)}),findPosH:function(m,T,L,O){var H=1;T<0&&(H=-1,T=-T);for(var X=Ct(this.doc,m),J=0;J<T&&(X=Zd(this.doc,X,H,L,O),!X.hitSide);++J);return X},moveH:ln(function(m,T){var L=this;this.extendSelectionsBy(function(O){return L.display.shift||L.doc.extend||O.empty()?Zd(L.doc,O.head,m,T,L.options.rtlMoveVisually):m<0?O.from():O.to()},De)}),deleteH:ln(function(m,T){var L=this.doc.sel,O=this.doc;L.somethingSelected()?O.replaceSelection("",null,"+delete"):$o(this,function(H){var X=Zd(O,H.head,m,T,!1);return m<0?{from:X,to:H.head}:{from:H.head,to:X}})}),findPosV:function(m,T,L,O){var H=1,X=O;T<0&&(H=-1,T=-T);for(var J=Ct(this.doc,m),ce=0;ce<T;++ce){var ge=ea(this,J,"div");if(X==null?X=ge.left:ge.left=X,J=oC(this,ge,H,L),J.hitSide)break}return J},moveV:ln(function(m,T){var L=this,O=this.doc,H=[],X=!this.display.shift&&!O.extend&&O.sel.somethingSelected();if(O.extendSelectionsBy(function(ce){if(X)return m<0?ce.from():ce.to();var ge=ea(L,ce.head,"div");ce.goalColumn!=null&&(ge.left=ce.goalColumn),H.push(ge.left);var _e=oC(L,ge,m,T);return T=="page"&&ce==O.sel.primary()&&Md(L,Ru(L,_e,"div").top-ge.top),_e},De),H.length)for(var J=0;J<O.sel.ranges.length;J++)O.sel.ranges[J].goalColumn=H[J]}),findWordAt:function(m){var T=this.doc,L=ft(T,m.line).text,O=m.ch,H=m.ch;if(L){var X=this.getHelper(m,"wordChars");(m.sticky=="before"||H==L.length)&&O?--O:++H;for(var J=L.charAt(O),ce=Ye(J,X)?function(ge){return Ye(ge,X)}:/\s/.test(J)?function(ge){return/\s/.test(ge)}:function(ge){return!/\s/.test(ge)&&!Ye(ge)};O>0&&ce(L.charAt(O-1));)--O;for(;H<L.length&&ce(L.charAt(H));)++H}return new Bt(Re(m.line,O),Re(m.line,H))},toggleOverwrite:function(m){m!=null&&m==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?re(this.display.cursorDiv,"CodeMirror-overwrite"):B(this.display.cursorDiv,"CodeMirror-overwrite"),He(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ae(U(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ln(function(m,T){Vs(this,m,T)}),getScrollInfo:function(){var m=this.display.scroller;return{left:m.scrollLeft,top:m.scrollTop,height:m.scrollHeight-va(this)-this.display.barHeight,width:m.scrollWidth-va(this)-this.display.barWidth,clientHeight:gd(this),clientWidth:Ui(this)}},scrollIntoView:ln(function(m,T){m==null?(m={from:this.doc.sel.primary().head,to:null},T==null&&(T=this.options.cursorScrollMargin)):typeof m=="number"?m={from:Re(m,0),to:null}:m.from==null&&(m={from:m,to:null}),m.to||(m.to=m.from),m.margin=T||0,m.from.line!=null?x2(this,m):Jw(this,m.from,m.to,m.margin)}),setSize:ln(function(m,T){var L=this,O=function(X){return typeof X=="number"||/^\d+$/.test(String(X))?X+"px":X};m!=null&&(this.display.wrapper.style.width=O(m)),T!=null&&(this.display.wrapper.style.height=O(T)),this.options.lineWrapping&&Gw(this);var H=this.display.viewFrom;this.doc.iter(H,this.display.viewTo,function(X){if(X.widgets){for(var J=0;J<X.widgets.length;J++)if(X.widgets[J].noHScroll){ii(L,H,"widget");break}}++H}),this.curOp.forceUpdate=!0,He(this,"refresh",this)}),operation:function(m){return Dn(this,m)},startOperation:function(){return Ki(this)},endOperation:function(){return ji(this)},refresh:ln(function(){var m=this.display.cachedTextHeight;mn(this),this.curOp.forceUpdate=!0,Hs(this),Vs(this,this.doc.scrollLeft,this.doc.scrollTop),kd(this.display),(m==null||Math.abs(m-Oo(this.display))>.5||this.options.lineWrapping)&&Td(this),He(this,"refresh",this)}),swapDoc:ln(function(m){var T=this.doc;return T.cm=null,this.state.selectingText&&this.state.selectingText(),hx(this,m),Hs(this),this.display.input.reset(),Vs(this,m.scrollLeft,m.scrollTop),this.curOp.forceScroll=!0,Rr(this,"swapDoc",this,T),T}),phrase:function(m){var T=this.options.phrases;return T&&Object.prototype.hasOwnProperty.call(T,m)?T[m]:m},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ge(l),l.registerHelper=function(m,T,L){b.hasOwnProperty(m)||(b[m]=l[m]={_global:[]}),b[m][T]=L},l.registerGlobalHelper=function(m,T,L,O){l.registerHelper(m,T,O),b[m]._global.push({pred:L,val:O})}}function Zd(l,d,b,m,T){var L=d,O=b,H=ft(l,d.line),X=T&&l.direction=="rtl"?-b:b;function J(){var ot=d.line+X;return ot<l.first||ot>=l.first+l.size?!1:(d=new Re(ot,d.ch,d.sticky),H=ft(l,ot))}function ce(ot){var tt;if(m=="codepoint"){var lt=H.text.charCodeAt(d.ch+(b>0?0:-1));if(isNaN(lt))tt=null;else{var yt=b>0?lt>=55296&&lt<56320:lt>=56320&&lt<57343;tt=new Re(d.line,Math.max(0,Math.min(H.text.length,d.ch+b*(yt?2:1))),-b)}}else T?tt=aI(l.cm,H,d,b):tt=Ud(H,d,b);if(tt==null)if(!ot&&J())d=Vd(T,l.cm,H,d.line,X);else return!1;else d=tt;return!0}if(m=="char"||m=="codepoint")ce();else if(m=="column")ce(!0);else if(m=="word"||m=="group")for(var ge=null,_e=m=="group",Le=l.cm&&l.cm.getHelper(d,"wordChars"),Ne=!0;!(b<0&&!ce(!Ne));Ne=!1){var Be=H.text.charAt(d.ch)||`
`,Ke=Ye(Be,Le)?"w":_e&&Be==`
`?"n":!_e||/\s/.test(Be)?null:"p";if(_e&&!Ne&&!Ke&&(Ke="s"),ge&&ge!=Ke){b<0&&(b=1,ce(),d.sticky="after");break}if(Ke&&(ge=Ke),b>0&&!ce(!Ne))break}var et=Uu(l,d,L,O,!0);return kt(L,et)&&(et.hitSide=!0),et}function oC(l,d,b,m){var T=l.doc,L=d.left,O;if(m=="page"){var H=Math.min(l.display.wrapper.clientHeight,Y(l).innerHeight||T(l).documentElement.clientHeight),X=Math.max(H-.5*Oo(l.display),3);O=(b>0?d.bottom:d.top)+b*X}else m=="line"&&(O=b>0?d.bottom+3:d.top-3);for(var J;J=wd(l,L,O),!!J.outside;){if(b<0?O<=0:O>=T.height){J.hitSide=!0;break}O+=b*5}return J}var Ut=function(l){this.cm=l,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ie,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ut.prototype.init=function(l){var d=this,b=this,m=b.cm,T=b.div=l.lineDiv;T.contentEditable=!0,jd(T,m.options.spellcheck,m.options.autocorrect,m.options.autocapitalize);function L(H){for(var X=H.target;X;X=X.parentNode){if(X==T)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(X.className))break}return!1}Ee(T,"paste",function(H){!L(H)||Ue(m,H)||rC(H,m)||f<=11&&setTimeout(Pr(m,function(){return d.updateFromDOM()}),20)}),Ee(T,"compositionstart",function(H){d.composing={data:H.data,done:!1}}),Ee(T,"compositionupdate",function(H){d.composing||(d.composing={data:H.data,done:!1})}),Ee(T,"compositionend",function(H){d.composing&&(H.data!=d.composing.data&&d.readFromDOMSoon(),d.composing.done=!0)}),Ee(T,"touchstart",function(){return b.forceCompositionEnd()}),Ee(T,"input",function(){d.composing||d.readFromDOMSoon()});function O(H){if(!(!L(H)||Ue(m,H))){if(m.somethingSelected())Ku({lineWise:!1,text:m.getSelections()}),H.type=="cut"&&m.replaceSelection("",null,"cut");else if(m.options.lineWiseCopyCut){var X=aC(m);Ku({lineWise:!0,text:X.text}),H.type=="cut"&&m.operation(function(){m.setSelections(X.ranges,0,le),m.replaceSelection("",null,"cut")})}else return;if(H.clipboardData){H.clipboardData.clearData();var J=ra.text.join(`
`);if(H.clipboardData.setData("Text",J),H.clipboardData.getData("Text")==J){H.preventDefault();return}}var ce=iC(),ge=ce.firstChild;jd(ge),m.display.lineSpace.insertBefore(ce,m.display.lineSpace.firstChild),ge.value=ra.text.join(`
`);var _e=ae(W(T));V(ge),setTimeout(function(){m.display.lineSpace.removeChild(ce),_e.focus(),_e==T&&b.showPrimarySelection()},50)}}Ee(T,"copy",O),Ee(T,"cut",O)},Ut.prototype.screenReaderLabelChanged=function(l){l?this.div.setAttribute("aria-label",l):this.div.removeAttribute("aria-label")},Ut.prototype.prepareSelection=function(){var l=jw(this.cm,!1);return l.focus=ae(W(this.div))==this.div,l},Ut.prototype.showSelection=function(l,d){!l||!this.cm.display.view.length||((l.focus||d)&&this.showPrimarySelection(),this.showMultipleSelections(l))},Ut.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ut.prototype.showPrimarySelection=function(){var l=this.getSelection(),d=this.cm,b=d.doc.sel.primary(),m=b.from(),T=b.to();if(d.display.viewTo==d.display.viewFrom||m.line>=d.display.viewTo||T.line<d.display.viewFrom){l.removeAllRanges();return}var L=ju(d,l.anchorNode,l.anchorOffset),O=ju(d,l.focusNode,l.focusOffset);if(!(L&&!L.bad&&O&&!O.bad&&Ze(Ro(L,O),m)==0&&Ze(yn(L,O),T)==0)){var H=d.display.view,X=m.line>=d.display.viewFrom&&sC(d,m)||{node:H[0].measure.map[2],offset:0},J=T.line<d.display.viewTo&&sC(d,T);if(!J){var ce=H[H.length-1].measure,ge=ce.maps?ce.maps[ce.maps.length-1]:ce.map;J={node:ge[ge.length-1],offset:ge[ge.length-2]-ge[ge.length-3]}}if(!X||!J){l.removeAllRanges();return}var _e=l.rangeCount&&l.getRangeAt(0),Le;try{Le=I(X.node,X.offset,J.offset,J.node)}catch{}Le&&(!a&&d.state.focused?(l.collapse(X.node,X.offset),Le.collapsed||(l.removeAllRanges(),l.addRange(Le))):(l.removeAllRanges(),l.addRange(Le)),_e&&l.anchorNode==null?l.addRange(_e):a&&this.startGracePeriod()),this.rememberSelection()}},Ut.prototype.startGracePeriod=function(){var l=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){l.gracePeriod=!1,l.selectionChanged()&&l.cm.operation(function(){return l.cm.curOp.selectionChanged=!0})},20)},Ut.prototype.showMultipleSelections=function(l){R(this.cm.display.cursorDiv,l.cursors),R(this.cm.display.selectionDiv,l.selection)},Ut.prototype.rememberSelection=function(){var l=this.getSelection();this.lastAnchorNode=l.anchorNode,this.lastAnchorOffset=l.anchorOffset,this.lastFocusNode=l.focusNode,this.lastFocusOffset=l.focusOffset},Ut.prototype.selectionInEditor=function(){var l=this.getSelection();if(!l.rangeCount)return!1;var d=l.getRangeAt(0).commonAncestorContainer;return z(this.div,d)},Ut.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ae(W(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ut.prototype.blur=function(){this.div.blur()},Ut.prototype.getField=function(){return this.div},Ut.prototype.supportsTouch=function(){return!0},Ut.prototype.receivedFocus=function(){var l=this,d=this;this.selectionInEditor()?setTimeout(function(){return l.pollSelection()},20):Dn(this.cm,function(){return d.cm.curOp.selectionChanged=!0});function b(){d.cm.state.focused&&(d.pollSelection(),d.polling.set(d.cm.options.pollInterval,b))}this.polling.set(this.cm.options.pollInterval,b)},Ut.prototype.selectionChanged=function(){var l=this.getSelection();return l.anchorNode!=this.lastAnchorNode||l.anchorOffset!=this.lastAnchorOffset||l.focusNode!=this.lastFocusNode||l.focusOffset!=this.lastFocusOffset},Ut.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var l=this.getSelection(),d=this.cm;if(x&&p&&this.cm.display.gutterSpecs.length&&TI(l.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var b=ju(d,l.anchorNode,l.anchorOffset),m=ju(d,l.focusNode,l.focusOffset);b&&m&&Dn(d,function(){Zr(d.doc,si(b,m),le),(b.bad||m.bad)&&(d.curOp.selectionChanged=!0)})}}},Ut.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var l=this.cm,d=l.display,b=l.doc.sel.primary(),m=b.from(),T=b.to();if(m.ch==0&&m.line>l.firstLine()&&(m=Re(m.line-1,ft(l.doc,m.line-1).length)),T.ch==ft(l.doc,T.line).text.length&&T.line<l.lastLine()&&(T=Re(T.line+1,0)),m.line<d.viewFrom||T.line>d.viewTo-1)return!1;var L,O,H;m.line==d.viewFrom||(L=$i(l,m.line))==0?(O=Q(d.view[0].line),H=d.view[0].node):(O=Q(d.view[L].line),H=d.view[L-1].node.nextSibling);var X=$i(l,T.line),J,ce;if(X==d.view.length-1?(J=d.viewTo-1,ce=d.lineDiv.lastChild):(J=Q(d.view[X+1].line)-1,ce=d.view[X+1].node.previousSibling),!H)return!1;for(var ge=l.doc.splitLines(SI(l,H,ce,O,J)),_e=Gr(l.doc,Re(O,0),Re(J,ft(l.doc,J).text.length));ge.length>1&&_e.length>1;)if(de(ge)==de(_e))ge.pop(),_e.pop(),J--;else if(ge[0]==_e[0])ge.shift(),_e.shift(),O++;else break;for(var Le=0,Ne=0,Be=ge[0],Ke=_e[0],et=Math.min(Be.length,Ke.length);Le<et&&Be.charCodeAt(Le)==Ke.charCodeAt(Le);)++Le;for(var ot=de(ge),tt=de(_e),lt=Math.min(ot.length-(ge.length==1?Le:0),tt.length-(_e.length==1?Le:0));Ne<lt&&ot.charCodeAt(ot.length-Ne-1)==tt.charCodeAt(tt.length-Ne-1);)++Ne;if(ge.length==1&&_e.length==1&&O==m.line)for(;Le&&Le>m.ch&&ot.charCodeAt(ot.length-Ne-1)==tt.charCodeAt(tt.length-Ne-1);)Le--,Ne++;ge[ge.length-1]=ot.slice(0,ot.length-Ne).replace(/^\u200b+/,""),ge[0]=ge[0].slice(Le).replace(/\u200b+$/,"");var yt=Re(O,Le),pt=Re(J,_e.length?de(_e).length-Ne:0);if(ge.length>1||ge[0]||Ze(yt,pt))return Uo(l.doc,ge,yt,pt,"+input"),!0},Ut.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ut.prototype.reset=function(){this.forceCompositionEnd()},Ut.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ut.prototype.readFromDOMSoon=function(){var l=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(l.readDOMTimeout=null,l.composing)if(l.composing.done)l.composing=null;else return;l.updateFromDOM()},80))},Ut.prototype.updateFromDOM=function(){var l=this;(this.cm.isReadOnly()||!this.pollContent())&&Dn(this.cm,function(){return mn(l.cm)})},Ut.prototype.setUneditable=function(l){l.contentEditable="false"},Ut.prototype.onKeyPress=function(l){l.charCode==0||this.composing||(l.preventDefault(),this.cm.isReadOnly()||Pr(this.cm,Kd)(this.cm,String.fromCharCode(l.charCode==null?l.keyCode:l.charCode),0))},Ut.prototype.readOnlyChanged=function(l){this.div.contentEditable=String(l!="nocursor")},Ut.prototype.onContextMenu=function(){},Ut.prototype.resetPosition=function(){},Ut.prototype.needsContentAttribute=!0;function sC(l,d){var b=yd(l,d.line);if(!b||b.hidden)return null;var m=ft(l.doc,d.line),T=Iw(b,m,d.line),L=xe(m,l.doc.direction),O="left";if(L){var H=me(L,d.ch);O=H%2?"right":"left"}var X=qw(T.map,d.ch,O);return X.offset=X.collapse=="right"?X.end:X.start,X}function TI(l){for(var d=l;d;d=d.parentNode)if(/CodeMirror-gutter-wrapper/.test(d.className))return!0;return!1}function Xo(l,d){return d&&(l.bad=!0),l}function SI(l,d,b,m,T){var L="",O=!1,H=l.doc.lineSeparator(),X=!1;function J(Le){return function(Ne){return Ne.id==Le}}function ce(){O&&(L+=H,X&&(L+=H),O=X=!1)}function ge(Le){Le&&(ce(),L+=Le)}function _e(Le){if(Le.nodeType==1){var Ne=Le.getAttribute("cm-text");if(Ne){ge(Ne);return}var Be=Le.getAttribute("cm-marker"),Ke;if(Be){var et=l.findMarks(Re(m,0),Re(T+1,0),J(+Be));et.length&&(Ke=et[0].find(0))&&ge(Gr(l.doc,Ke.from,Ke.to).join(H));return}if(Le.getAttribute("contenteditable")=="false")return;var ot=/^(pre|div|p|li|table|br)$/i.test(Le.nodeName);if(!/^br$/i.test(Le.nodeName)&&Le.textContent.length==0)return;ot&&ce();for(var tt=0;tt<Le.childNodes.length;tt++)_e(Le.childNodes[tt]);/^(pre|p)$/i.test(Le.nodeName)&&(X=!0),ot&&(O=!0)}else Le.nodeType==3&&ge(Le.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;_e(d),d!=b;)d=d.nextSibling,X=!1;return L}function ju(l,d,b){var m;if(d==l.display.lineDiv){if(m=l.display.lineDiv.childNodes[b],!m)return Xo(l.clipPos(Re(l.display.viewTo-1)),!0);d=null,b=0}else for(m=d;;m=m.parentNode){if(!m||m==l.display.lineDiv)return null;if(m.parentNode&&m.parentNode==l.display.lineDiv)break}for(var T=0;T<l.display.view.length;T++){var L=l.display.view[T];if(L.node==m)return AI(L,d,b)}}function AI(l,d,b){var m=l.text.firstChild,T=!1;if(!d||!z(m,d))return Xo(Re(Q(l.line),0),!0);if(d==m&&(T=!0,d=m.childNodes[b],b=0,!d)){var L=l.rest?de(l.rest):l.line;return Xo(Re(Q(L),L.text.length),T)}var O=d.nodeType==3?d:null,H=d;for(!O&&d.childNodes.length==1&&d.firstChild.nodeType==3&&(O=d.firstChild,b&&(b=O.nodeValue.length));H.parentNode!=m;)H=H.parentNode;var X=l.measure,J=X.maps;function ce(Ke,et,ot){for(var tt=-1;tt<(J?J.length:0);tt++)for(var lt=tt<0?X.map:J[tt],yt=0;yt<lt.length;yt+=3){var pt=lt[yt+2];if(pt==Ke||pt==et){var At=Q(tt<0?l.line:l.rest[tt]),Qt=lt[yt]+ot;return(ot<0||pt!=Ke)&&(Qt=lt[yt+(ot?1:0)]),Re(At,Qt)}}}var ge=ce(O,H,b);if(ge)return Xo(ge,T);for(var _e=H.nextSibling,Le=O?O.nodeValue.length-b:0;_e;_e=_e.nextSibling){if(ge=ce(_e,_e.firstChild,0),ge)return Xo(Re(ge.line,ge.ch-Le),T);Le+=_e.textContent.length}for(var Ne=H.previousSibling,Be=b;Ne;Ne=Ne.previousSibling){if(ge=ce(Ne,Ne.firstChild,-1),ge)return Xo(Re(ge.line,ge.ch+Be),T);Be+=Ne.textContent.length}}var mr=function(l){this.cm=l,this.prevInput="",this.pollingFast=!1,this.polling=new ie,this.hasSelection=!1,this.composing=null,this.resetting=!1};mr.prototype.init=function(l){var d=this,b=this,m=this.cm;this.createField(l);var T=this.textarea;l.wrapper.insertBefore(this.wrapper,l.wrapper.firstChild),C&&(T.style.width="0px"),Ee(T,"input",function(){u&&f>=9&&d.hasSelection&&(d.hasSelection=null),b.poll()}),Ee(T,"paste",function(O){Ue(m,O)||rC(O,m)||(m.state.pasteIncoming=+new Date,b.fastPoll())});function L(O){if(!Ue(m,O)){if(m.somethingSelected())Ku({lineWise:!1,text:m.getSelections()});else if(m.options.lineWiseCopyCut){var H=aC(m);Ku({lineWise:!0,text:H.text}),O.type=="cut"?m.setSelections(H.ranges,null,le):(b.prevInput="",T.value=H.text.join(`
`),V(T))}else return;O.type=="cut"&&(m.state.cutIncoming=+new Date)}}Ee(T,"cut",L),Ee(T,"copy",L),Ee(l.scroller,"paste",function(O){if(!(Oa(l,O)||Ue(m,O))){if(!T.dispatchEvent){m.state.pasteIncoming=+new Date,b.focus();return}var H=new Event("paste");H.clipboardData=O.clipboardData,T.dispatchEvent(H)}}),Ee(l.lineSpace,"selectstart",function(O){Oa(l,O)||$e(O)}),Ee(T,"compositionstart",function(){var O=m.getCursor("from");b.composing&&b.composing.range.clear(),b.composing={start:O,range:m.markText(O,m.getCursor("to"),{className:"CodeMirror-composing"})}}),Ee(T,"compositionend",function(){b.composing&&(b.poll(),b.composing.range.clear(),b.composing=null)})},mr.prototype.createField=function(l){this.wrapper=iC(),this.textarea=this.wrapper.firstChild;var d=this.cm.options;jd(this.textarea,d.spellcheck,d.autocorrect,d.autocapitalize)},mr.prototype.screenReaderLabelChanged=function(l){l?this.textarea.setAttribute("aria-label",l):this.textarea.removeAttribute("aria-label")},mr.prototype.prepareSelection=function(){var l=this.cm,d=l.display,b=l.doc,m=jw(l);if(l.options.moveInputWithCursor){var T=ea(l,b.sel.primary().head,"div"),L=d.wrapper.getBoundingClientRect(),O=d.lineDiv.getBoundingClientRect();m.teTop=Math.max(0,Math.min(d.wrapper.clientHeight-10,T.top+O.top-L.top)),m.teLeft=Math.max(0,Math.min(d.wrapper.clientWidth-10,T.left+O.left-L.left))}return m},mr.prototype.showSelection=function(l){var d=this.cm,b=d.display;R(b.cursorDiv,l.cursors),R(b.selectionDiv,l.selection),l.teTop!=null&&(this.wrapper.style.top=l.teTop+"px",this.wrapper.style.left=l.teLeft+"px")},mr.prototype.reset=function(l){if(!(this.contextMenuPending||this.composing&&l)){var d=this.cm;if(this.resetting=!0,d.somethingSelected()){this.prevInput="";var b=d.getSelection();this.textarea.value=b,d.state.focused&&V(this.textarea),u&&f>=9&&(this.hasSelection=b)}else l||(this.prevInput=this.textarea.value="",u&&f>=9&&(this.hasSelection=null));this.resetting=!1}},mr.prototype.getField=function(){return this.textarea},mr.prototype.supportsTouch=function(){return!1},mr.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!S||ae(W(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},mr.prototype.blur=function(){this.textarea.blur()},mr.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},mr.prototype.receivedFocus=function(){this.slowPoll()},mr.prototype.slowPoll=function(){var l=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){l.poll(),l.cm.state.focused&&l.slowPoll()})},mr.prototype.fastPoll=function(){var l=!1,d=this;d.pollingFast=!0;function b(){var m=d.poll();!m&&!l?(l=!0,d.polling.set(60,b)):(d.pollingFast=!1,d.slowPoll())}d.polling.set(20,b)},mr.prototype.poll=function(){var l=this,d=this.cm,b=this.textarea,m=this.prevInput;if(this.contextMenuPending||this.resetting||!d.state.focused||Sr(b)&&!m&&!this.composing||d.isReadOnly()||d.options.disableInput||d.state.keySeq)return!1;var T=b.value;if(T==m&&!d.somethingSelected())return!1;if(u&&f>=9&&this.hasSelection===T||A&&/[\uf700-\uf7ff]/.test(T))return d.display.input.reset(),!1;if(d.doc.sel==d.display.selForContextMenu){var L=T.charCodeAt(0);if(L==8203&&!m&&(m="​"),L==8666)return this.reset(),this.cm.execCommand("undo")}for(var O=0,H=Math.min(m.length,T.length);O<H&&m.charCodeAt(O)==T.charCodeAt(O);)++O;return Dn(d,function(){Kd(d,T.slice(O),m.length-O,null,l.composing?"*compose":null),T.length>1e3||T.indexOf(`
`)>-1?b.value=l.prevInput="":l.prevInput=T,l.composing&&(l.composing.range.clear(),l.composing.range=d.markText(l.composing.start,d.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},mr.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},mr.prototype.onKeyPress=function(){u&&f>=9&&(this.hasSelection=null),this.fastPoll()},mr.prototype.onContextMenu=function(l){var d=this,b=d.cm,m=b.display,T=d.textarea;d.contextMenuPending&&d.contextMenuPending();var L=Wi(b,l),O=m.scroller.scrollTop;if(!L||g)return;var H=b.options.resetSelectionOnContextMenu;H&&b.doc.sel.contains(L)==-1&&Pr(b,Zr)(b.doc,si(L),le);var X=T.style.cssText,J=d.wrapper.style.cssText,ce=d.wrapper.offsetParent.getBoundingClientRect();d.wrapper.style.cssText="position: static",T.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(l.clientY-ce.top-5)+"px; left: "+(l.clientX-ce.left-5)+`px;
      z-index: 1000; background: `+(u?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var ge;c&&(ge=T.ownerDocument.defaultView.scrollY),m.input.focus(),c&&T.ownerDocument.defaultView.scrollTo(null,ge),m.input.reset(),b.somethingSelected()||(T.value=d.prevInput=" "),d.contextMenuPending=Le,m.selForContextMenu=b.doc.sel,clearTimeout(m.detectingSelectAll);function _e(){if(T.selectionStart!=null){var Be=b.somethingSelected(),Ke="​"+(Be?T.value:"");T.value="⇚",T.value=Ke,d.prevInput=Be?"":"​",T.selectionStart=1,T.selectionEnd=Ke.length,m.selForContextMenu=b.doc.sel}}function Le(){if(d.contextMenuPending==Le&&(d.contextMenuPending=!1,d.wrapper.style.cssText=J,T.style.cssText=X,u&&f<9&&m.scrollbars.setScrollTop(m.scroller.scrollTop=O),T.selectionStart!=null)){(!u||u&&f<9)&&_e();var Be=0,Ke=function(){m.selForContextMenu==b.doc.sel&&T.selectionStart==0&&T.selectionEnd>0&&d.prevInput=="​"?Pr(b,Ax)(b):Be++<10?m.detectingSelectAll=setTimeout(Ke,500):(m.selForContextMenu=null,m.input.reset())};m.detectingSelectAll=setTimeout(Ke,200)}}if(u&&f>=9&&_e(),F){it(l);var Ne=function(){Ie(window,"mouseup",Ne),setTimeout(Le,20)};Ee(window,"mouseup",Ne)}else setTimeout(Le,50)},mr.prototype.readOnlyChanged=function(l){l||this.reset(),this.textarea.disabled=l=="nocursor",this.textarea.readOnly=!!l},mr.prototype.setUneditable=function(){},mr.prototype.needsContentAttribute=!1;function LI(l,d){if(d=d?oe(d):{},d.value=l.value,!d.tabindex&&l.tabIndex&&(d.tabindex=l.tabIndex),!d.placeholder&&l.placeholder&&(d.placeholder=l.placeholder),d.autofocus==null){var b=ae(W(l));d.autofocus=b==l||l.getAttribute("autofocus")!=null&&b==document.body}function m(){l.value=H.getValue()}var T;if(l.form&&(Ee(l.form,"submit",m),!d.leaveSubmitMethodAlone)){var L=l.form;T=L.submit;try{var O=L.submit=function(){m(),L.submit=T,L.submit(),L.submit=O}}catch{}}d.finishInit=function(X){X.save=m,X.getTextArea=function(){return l},X.toTextArea=function(){X.toTextArea=isNaN,m(),l.parentNode.removeChild(X.getWrapperElement()),l.style.display="",l.form&&(Ie(l.form,"submit",m),!d.leaveSubmitMethodAlone&&typeof l.form.submit=="function"&&(l.form.submit=T))}},l.style.display="none";var H=lr(function(X){return l.parentNode.insertBefore(X,l.nextSibling)},d);return H}function DI(l){l.off=Ie,l.on=Ee,l.wheelEventPixels=O2,l.Doc=bn,l.splitLines=Ht,l.countColumn=te,l.findColumn=be,l.isWordChar=Fe,l.Pass=ne,l.signal=He,l.Line=Po,l.changeEnd=li,l.scrollbarModel=rx,l.Pos=Re,l.cmpPos=Ze,l.modes=Zt,l.mimeModes=cr,l.resolveMode=gn,l.getMode=jn,l.modeExtensions=Ln,l.extendMode=Zn,l.copyState=sn,l.startState=Gn,l.innerMode=Pa,l.commands=il,l.keyMap=Fa,l.keyName=Hx,l.isModifierKey=zx,l.lookupKey=Wo,l.normalizeKeyMap=nI,l.StringStream=Ft,l.SharedTextMarker=rl,l.TextMarker=fi,l.LineWidget=tl,l.e_preventDefault=$e,l.e_stopPropagation=vt,l.e_stop=it,l.addClass=re,l.contains=z,l.rmClass=B,l.keyNames=ci}bI(lr),EI(lr);var _I="iter insert remove copy getEditor constructor".split(" ");for(var Zu in bn.prototype)bn.prototype.hasOwnProperty(Zu)&&se(_I,Zu)<0&&(lr.prototype[Zu]=function(l){return function(){return l.apply(this.doc,arguments)}}(bn.prototype[Zu]));return Ge(bn),lr.inputStyles={textarea:mr,contenteditable:Ut},lr.defineMode=function(l){!lr.defaults.mode&&l!="null"&&(lr.defaults.mode=l),rr.apply(this,arguments)},lr.defineMIME=jr,lr.defineMode("null",function(){return{token:function(l){return l.skipToEnd()}}}),lr.defineMIME("text/plain","null"),lr.defineExtension=function(l,d){lr.prototype[l]=d},lr.defineDocExtension=function(l,d){bn.prototype[l]=d},lr.fromTextArea=LI,DI(lr),lr.version="5.65.19",lr})}(Ff)),Ff.exports}var iR;function N9(){return iR||(iR=1,function(t,e){(function(r){r(Hi())})(function(r){r.defineMode("javascript",function(n,a){var i=n.indentUnit,o=a.statementIndent,s=a.jsonld,u=a.json||s,f=a.trackScope!==!1,c=a.typescript,h=a.wordCharacters||/[\w$\xa1-\uffff]/,p=function(){function Q(Mr){return{type:Mr,style:"keyword"}}var fe=Q("keyword a"),ke=Q("keyword b"),ze=Q("keyword c"),Re=Q("keyword d"),Ze=Q("operator"),kt={type:"atom",style:"atom"};return{if:Q("if"),while:fe,with:fe,else:ke,do:ke,try:ke,finally:ke,return:Re,break:Re,continue:Re,new:Q("new"),delete:ze,void:ze,throw:ze,debugger:Q("debugger"),var:Q("var"),const:Q("var"),let:Q("var"),function:Q("function"),catch:Q("catch"),for:Q("for"),switch:Q("switch"),case:Q("case"),default:Q("default"),in:Ze,typeof:Ze,instanceof:Ze,true:kt,false:kt,null:kt,undefined:kt,NaN:kt,Infinity:kt,this:Q("this"),class:Q("class"),super:Q("atom"),yield:ze,export:Q("export"),import:Q("import"),extends:ze,await:ze}}(),y=/[+\-*&%=<>!?|~^@]/,g=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function E(Q){for(var fe=!1,ke,ze=!1;(ke=Q.next())!=null;){if(!fe){if(ke=="/"&&!ze)return;ke=="["?ze=!0:ze&&ke=="]"&&(ze=!1)}fe=!fe&&ke=="\\"}}var w,v;function C(Q,fe,ke){return w=Q,v=ke,fe}function x(Q,fe){var ke=Q.next();if(ke=='"'||ke=="'")return fe.tokenize=S(ke),fe.tokenize(Q,fe);if(ke=="."&&Q.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return C("number","number");if(ke=="."&&Q.match(".."))return C("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ke))return C(ke);if(ke=="="&&Q.eat(">"))return C("=>","operator");if(ke=="0"&&Q.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return C("number","number");if(/\d/.test(ke))return Q.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),C("number","number");if(ke=="/")return Q.eat("*")?(fe.tokenize=A,A(Q,fe)):Q.eat("/")?(Q.skipToEnd(),C("comment","comment")):Pt(Q,fe,1)?(E(Q),Q.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),C("regexp","string-2")):(Q.eat("="),C("operator","operator",Q.current()));if(ke=="`")return fe.tokenize=D,D(Q,fe);if(ke=="#"&&Q.peek()=="!")return Q.skipToEnd(),C("meta","meta");if(ke=="#"&&Q.eatWhile(h))return C("variable","property");if(ke=="<"&&Q.match("!--")||ke=="-"&&Q.match("->")&&!/\S/.test(Q.string.slice(0,Q.start)))return Q.skipToEnd(),C("comment","comment");if(y.test(ke))return(ke!=">"||!fe.lexical||fe.lexical.type!=">")&&(Q.eat("=")?(ke=="!"||ke=="=")&&Q.eat("="):/[<>*+\-|&?]/.test(ke)&&(Q.eat(ke),ke==">"&&Q.eat(ke))),ke=="?"&&Q.eat(".")?C("."):C("operator","operator",Q.current());if(h.test(ke)){Q.eatWhile(h);var ze=Q.current();if(fe.lastType!="."){if(p.propertyIsEnumerable(ze)){var Re=p[ze];return C(Re.type,Re.style,ze)}if(ze=="async"&&Q.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return C("async","keyword",ze)}return C("variable","variable",ze)}}function S(Q){return function(fe,ke){var ze=!1,Re;if(s&&fe.peek()=="@"&&fe.match(g))return ke.tokenize=x,C("jsonld-keyword","meta");for(;(Re=fe.next())!=null&&!(Re==Q&&!ze);)ze=!ze&&Re=="\\";return ze||(ke.tokenize=x),C("string","string")}}function A(Q,fe){for(var ke=!1,ze;ze=Q.next();){if(ze=="/"&&ke){fe.tokenize=x;break}ke=ze=="*"}return C("comment","comment")}function D(Q,fe){for(var ke=!1,ze;(ze=Q.next())!=null;){if(!ke&&(ze=="`"||ze=="$"&&Q.eat("{"))){fe.tokenize=x;break}ke=!ke&&ze=="\\"}return C("quasi","string-2",Q.current())}var _="([{}])";function M(Q,fe){fe.fatArrowAt&&(fe.fatArrowAt=null);var ke=Q.string.indexOf("=>",Q.start);if(!(ke<0)){if(c){var ze=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Q.string.slice(Q.start,ke));ze&&(ke=ze.index)}for(var Re=0,Ze=!1,kt=ke-1;kt>=0;--kt){var Mr=Q.string.charAt(kt),yn=_.indexOf(Mr);if(yn>=0&&yn<3){if(!Re){++kt;break}if(--Re==0){Mr=="("&&(Ze=!0);break}}else if(yn>=3&&yn<6)++Re;else if(h.test(Mr))Ze=!0;else if(/["'\/`]/.test(Mr))for(;;--kt){if(kt==0)return;var Ro=Q.string.charAt(kt-1);if(Ro==Mr&&Q.string.charAt(kt-2)!="\\"){kt--;break}}else if(Ze&&!Re){++kt;break}}Ze&&!Re&&(fe.fatArrowAt=kt)}}var k={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function F(Q,fe,ke,ze,Re,Ze){this.indented=Q,this.column=fe,this.type=ke,this.prev=Re,this.info=Ze,ze!=null&&(this.align=ze)}function G(Q,fe){if(!f)return!1;for(var ke=Q.localVars;ke;ke=ke.next)if(ke.name==fe)return!0;for(var ze=Q.context;ze;ze=ze.prev)for(var ke=ze.vars;ke;ke=ke.next)if(ke.name==fe)return!0}function B(Q,fe,ke,ze,Re){var Ze=Q.cc;for(q.state=Q,q.stream=Re,q.marked=null,q.cc=Ze,q.style=fe,Q.lexical.hasOwnProperty("align")||(Q.lexical.align=!0);;){var kt=Ze.length?Ze.pop():u?se:te;if(kt(ke,ze)){for(;Ze.length&&Ze[Ze.length-1].lex;)Ze.pop()();return q.marked?q.marked:ke=="variable"&&G(Q,ze)?"variable-2":fe}}}var q={state:null,marked:null,cc:null};function R(){for(var Q=arguments.length-1;Q>=0;Q--)q.cc.push(arguments[Q])}function P(){return R.apply(null,arguments),!0}function N(Q,fe){for(var ke=fe;ke;ke=ke.next)if(ke.name==Q)return!0;return!1}function I(Q){var fe=q.state;if(q.marked="def",!!f){if(fe.context){if(fe.lexical.info=="var"&&fe.context&&fe.context.block){var ke=z(Q,fe.context);if(ke!=null){fe.context=ke;return}}else if(!N(Q,fe.localVars)){fe.localVars=new K(Q,fe.localVars);return}}a.globalVars&&!N(Q,fe.globalVars)&&(fe.globalVars=new K(Q,fe.globalVars))}}function z(Q,fe){if(fe)if(fe.block){var ke=z(Q,fe.prev);return ke?ke==fe.prev?fe:new re(ke,fe.vars,!0):null}else return N(Q,fe.vars)?fe:new re(fe.prev,new K(Q,fe.vars),!1);else return null}function ae(Q){return Q=="public"||Q=="private"||Q=="protected"||Q=="abstract"||Q=="readonly"}function re(Q,fe,ke){this.prev=Q,this.vars=fe,this.block=ke}function K(Q,fe){this.name=Q,this.next=fe}var V=new K("this",new K("arguments",null));function Z(){q.state.context=new re(q.state.context,q.state.localVars,!1),q.state.localVars=V}function U(){q.state.context=new re(q.state.context,q.state.localVars,!0),q.state.localVars=null}Z.lex=U.lex=!0;function W(){q.state.localVars=q.state.context.vars,q.state.context=q.state.context.prev}W.lex=!0;function Y(Q,fe){var ke=function(){var ze=q.state,Re=ze.indented;if(ze.lexical.type=="stat")Re=ze.lexical.indented;else for(var Ze=ze.lexical;Ze&&Ze.type==")"&&Ze.align;Ze=Ze.prev)Re=Ze.indented;ze.lexical=new F(Re,q.stream.column(),Q,null,ze.lexical,fe)};return ke.lex=!0,ke}function ee(){var Q=q.state;Q.lexical.prev&&(Q.lexical.type==")"&&(Q.indented=Q.lexical.indented),Q.lexical=Q.lexical.prev)}ee.lex=!0;function oe(Q){function fe(ke){return ke==Q?P():Q==";"||ke=="}"||ke==")"||ke=="]"?R():P(fe)}return fe}function te(Q,fe){return Q=="var"?P(Y("vardef",fe),vt,oe(";"),ee):Q=="keyword a"?P(Y("form"),ne,te,ee):Q=="keyword b"?P(Y("form"),te,ee):Q=="keyword d"?q.stream.match(/^\s*$/,!1)?P():P(Y("stat"),Se,oe(";"),ee):Q=="debugger"?P(oe(";")):Q=="{"?P(Y("}"),U,he,ee,W):Q==";"?P():Q=="if"?(q.state.lexical.info=="else"&&q.state.cc[q.state.cc.length-1]==ee&&q.state.cc.pop()(),P(Y("form"),ne,te,ee,_t)):Q=="function"?P(Ht):Q=="for"?P(Y("form"),U,Mt,te,W,ee):Q=="class"||c&&fe=="interface"?(q.marked="keyword",P(Y("form",Q=="class"?Q:fe),Zt,ee)):Q=="variable"?c&&fe=="declare"?(q.marked="keyword",P(te)):c&&(fe=="module"||fe=="enum"||fe=="type")&&q.stream.match(/^\s*\w/,!1)?(q.marked="keyword",fe=="enum"?P(ft):fe=="type"?P(on,oe("operator"),xe,oe(";")):P(Y("form"),nt,oe("{"),Y("}"),he,ee,ee)):c&&fe=="namespace"?(q.marked="keyword",P(Y("form"),se,te,ee)):c&&fe=="abstract"?(q.marked="keyword",P(te)):P(Y("stat"),Pe):Q=="switch"?P(Y("form"),ne,oe("{"),Y("}","switch"),U,he,ee,ee,W):Q=="case"?P(se,oe(":")):Q=="default"?P(oe(":")):Q=="catch"?P(Y("form"),Z,ie,te,ee,W):Q=="export"?P(Y("stat"),gn,ee):Q=="import"?P(Y("stat"),Ln,ee):Q=="async"?P(te):fe=="@"?P(se,te):R(Y("stat"),se,oe(";"),ee)}function ie(Q){if(Q=="(")return P(Rt,oe(")"))}function se(Q,fe){return le(Q,fe,!1)}function $(Q,fe){return le(Q,fe,!0)}function ne(Q){return Q!="("?R():P(Y(")"),Se,oe(")"),ee)}function le(Q,fe,ke){if(q.state.fatArrowAt==q.stream.start){var ze=ke?ye:de;if(Q=="(")return P(Z,Y(")"),Xe(Rt,")"),ee,oe("=>"),ze,W);if(Q=="variable")return R(Z,nt,oe("=>"),ze,W)}var Re=ke?be:De;return k.hasOwnProperty(Q)?P(Re):Q=="function"?P(Ht,Re):Q=="class"||c&&fe=="interface"?(q.marked="keyword",P(Y("form"),tr,ee)):Q=="keyword c"||Q=="async"?P(ke?$:se):Q=="("?P(Y(")"),Se,oe(")"),ee,Re):Q=="operator"||Q=="spread"?P(ke?$:se):Q=="["?P(Y("]"),Ft,ee,Re):Q=="{"?We(Ye,"}",null,Re):Q=="quasi"?R(Te,Re):Q=="new"?P(Ce(ke)):P()}function Se(Q){return Q.match(/[;\}\)\],]/)?R():R(se)}function De(Q,fe){return Q==","?P(Se):be(Q,fe,!1)}function be(Q,fe,ke){var ze=ke==!1?De:be,Re=ke==!1?se:$;if(Q=="=>")return P(Z,ke?ye:de,W);if(Q=="operator")return/\+\+|--/.test(fe)||c&&fe=="!"?P(ze):c&&fe=="<"&&q.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?P(Y(">"),Xe(xe,">"),ee,ze):fe=="?"?P(se,oe(":"),Re):P(Re);if(Q=="quasi")return R(Te,ze);if(Q!=";"){if(Q=="(")return We($,")","call",ze);if(Q==".")return P(Fe,ze);if(Q=="[")return P(Y("]"),Se,oe("]"),ee,ze);if(c&&fe=="as")return q.marked="keyword",P(xe,ze);if(Q=="regexp")return q.state.lastType=q.marked="operator",q.stream.backUp(q.stream.pos-q.stream.start-1),P(Re)}}function Te(Q,fe){return Q!="quasi"?R():fe.slice(fe.length-2)!="${"?P(Te):P(Se,ve)}function ve(Q){if(Q=="}")return q.marked="string-2",q.state.tokenize=D,P(Te)}function de(Q){return M(q.stream,q.state),R(Q=="{"?te:se)}function ye(Q){return M(q.stream,q.state),R(Q=="{"?te:$)}function Ce(Q){return function(fe){return fe=="."?P(Q?Ae:ue):fe=="variable"&&c?P(Je,Q?be:De):R(Q?$:se)}}function ue(Q,fe){if(fe=="target")return q.marked="keyword",P(De)}function Ae(Q,fe){if(fe=="target")return q.marked="keyword",P(be)}function Pe(Q){return Q==":"?P(ee,te):R(De,oe(";"),ee)}function Fe(Q){if(Q=="variable")return q.marked="property",P()}function Ye(Q,fe){if(Q=="async")return q.marked="property",P(Ye);if(Q=="variable"||q.style=="keyword"){if(q.marked="property",fe=="get"||fe=="set")return P(Ve);var ke;return c&&q.state.fatArrowAt==q.stream.start&&(ke=q.stream.match(/^\s*:\s*/,!1))&&(q.state.fatArrowAt=q.stream.pos+ke[0].length),P(Qe)}else{if(Q=="number"||Q=="string")return q.marked=s?"property":q.style+" property",P(Qe);if(Q=="jsonld-keyword")return P(Qe);if(c&&ae(fe))return q.marked="keyword",P(Ye);if(Q=="[")return P(se,j,oe("]"),Qe);if(Q=="spread")return P($,Qe);if(fe=="*")return q.marked="keyword",P(Ye);if(Q==":")return R(Qe)}}function Ve(Q){return Q!="variable"?R(Qe):(q.marked="property",P(Ht))}function Qe(Q){if(Q==":")return P($);if(Q=="(")return R(Ht)}function Xe(Q,fe,ke){function ze(Re,Ze){if(ke?ke.indexOf(Re)>-1:Re==","){var kt=q.state.lexical;return kt.info=="call"&&(kt.pos=(kt.pos||0)+1),P(function(Mr,yn){return Mr==fe||yn==fe?R():R(Q)},ze)}return Re==fe||Ze==fe?P():ke&&ke.indexOf(";")>-1?R(Q):P(oe(fe))}return function(Re,Ze){return Re==fe||Ze==fe?P():R(Q,ze)}}function We(Q,fe,ke){for(var ze=3;ze<arguments.length;ze++)q.cc.push(arguments[ze]);return P(Y(fe,ke),Xe(Q,fe),ee)}function he(Q){return Q=="}"?P():R(te,he)}function j(Q,fe){if(c){if(Q==":")return P(xe);if(fe=="?")return P(j)}}function pe(Q,fe){if(c&&(Q==":"||fe=="in"))return P(xe)}function me(Q){if(c&&Q==":")return q.stream.match(/^\s*\w+\s+is\b/,!1)?P(se,we,xe):P(xe)}function we(Q,fe){if(fe=="is")return q.marked="keyword",P()}function xe(Q,fe){if(fe=="keyof"||fe=="typeof"||fe=="infer"||fe=="readonly")return q.marked="keyword",P(fe=="typeof"?$:xe);if(Q=="variable"||fe=="void")return q.marked="type",P(je);if(fe=="|"||fe=="&")return P(xe);if(Q=="string"||Q=="number"||Q=="atom")return P(je);if(Q=="[")return P(Y("]"),Xe(xe,"]",","),ee,je);if(Q=="{")return P(Y("}"),Ee,ee,je);if(Q=="(")return P(Xe(Ue,")"),qe,je);if(Q=="<")return P(Xe(xe,">"),xe);if(Q=="quasi")return R(Ie,je)}function qe(Q){if(Q=="=>")return P(xe)}function Ee(Q){return Q.match(/[\}\)\]]/)?P():Q==","||Q==";"?P(Ee):R(Oe,Ee)}function Oe(Q,fe){if(Q=="variable"||q.style=="keyword")return q.marked="property",P(Oe);if(fe=="?"||Q=="number"||Q=="string")return P(Oe);if(Q==":")return P(xe);if(Q=="[")return P(oe("variable"),pe,oe("]"),Oe);if(Q=="(")return R(Sr,Oe);if(!Q.match(/[;\}\)\],]/))return P()}function Ie(Q,fe){return Q!="quasi"?R():fe.slice(fe.length-2)!="${"?P(Ie):P(xe,He)}function He(Q){if(Q=="}")return q.marked="string-2",q.state.tokenize=D,P(Ie)}function Ue(Q,fe){return Q=="variable"&&q.stream.match(/^\s*[?:]/,!1)||fe=="?"?P(Ue):Q==":"?P(xe):Q=="spread"?P(Ue):R(xe)}function je(Q,fe){if(fe=="<")return P(Y(">"),Xe(xe,">"),ee,je);if(fe=="|"||Q=="."||fe=="&")return P(xe);if(Q=="[")return P(xe,oe("]"),je);if(fe=="extends"||fe=="implements")return q.marked="keyword",P(xe);if(fe=="?")return P(xe,oe(":"),xe)}function Je(Q,fe){if(fe=="<")return P(Y(">"),Xe(xe,">"),ee,je)}function Ge(){return R(xe,$e)}function $e(Q,fe){if(fe=="=")return P(xe)}function vt(Q,fe){return fe=="enum"?(q.marked="keyword",P(ft)):R(nt,j,dt,gt)}function nt(Q,fe){if(c&&ae(fe))return q.marked="keyword",P(nt);if(Q=="variable")return I(fe),P();if(Q=="spread")return P(nt);if(Q=="[")return We(Tt,"]");if(Q=="{")return We(it,"}")}function it(Q,fe){return Q=="variable"&&!q.stream.match(/^\s*:/,!1)?(I(fe),P(dt)):(Q=="variable"&&(q.marked="property"),Q=="spread"?P(nt):Q=="}"?R():Q=="["?P(se,oe("]"),oe(":"),it):P(oe(":"),nt,dt))}function Tt(){return R(nt,dt)}function dt(Q,fe){if(fe=="=")return P($)}function gt(Q){if(Q==",")return P(vt)}function _t(Q,fe){if(Q=="keyword b"&&fe=="else")return P(Y("form","else"),te,ee)}function Mt(Q,fe){if(fe=="await")return P(Mt);if(Q=="(")return P(Y(")"),jt,ee)}function jt(Q){return Q=="var"?P(vt,Lt):Q=="variable"?P(Lt):R(Lt)}function Lt(Q,fe){return Q==")"?P():Q==";"?P(Lt):fe=="in"||fe=="of"?(q.marked="keyword",P(se,Lt)):R(se,Lt)}function Ht(Q,fe){if(fe=="*")return q.marked="keyword",P(Ht);if(Q=="variable")return I(fe),P(Ht);if(Q=="(")return P(Z,Y(")"),Xe(Rt,")"),ee,me,te,W);if(c&&fe=="<")return P(Y(">"),Xe(Ge,">"),ee,Ht)}function Sr(Q,fe){if(fe=="*")return q.marked="keyword",P(Sr);if(Q=="variable")return I(fe),P(Sr);if(Q=="(")return P(Z,Y(")"),Xe(Rt,")"),ee,me,W);if(c&&fe=="<")return P(Y(">"),Xe(Ge,">"),ee,Sr)}function on(Q,fe){if(Q=="keyword"||Q=="variable")return q.marked="type",P(on);if(fe=="<")return P(Y(">"),Xe(Ge,">"),ee)}function Rt(Q,fe){return fe=="@"&&P(se,Rt),Q=="spread"?P(Rt):c&&ae(fe)?(q.marked="keyword",P(Rt)):c&&Q=="this"?P(j,dt):R(nt,j,dt)}function tr(Q,fe){return Q=="variable"?Zt(Q,fe):cr(Q,fe)}function Zt(Q,fe){if(Q=="variable")return I(fe),P(cr)}function cr(Q,fe){if(fe=="<")return P(Y(">"),Xe(Ge,">"),ee,cr);if(fe=="extends"||fe=="implements"||c&&Q==",")return fe=="implements"&&(q.marked="keyword"),P(c?xe:se,cr);if(Q=="{")return P(Y("}"),rr,ee)}function rr(Q,fe){if(Q=="async"||Q=="variable"&&(fe=="static"||fe=="get"||fe=="set"||c&&ae(fe))&&q.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return q.marked="keyword",P(rr);if(Q=="variable"||q.style=="keyword")return q.marked="property",P(jr,rr);if(Q=="number"||Q=="string")return P(jr,rr);if(Q=="[")return P(se,j,oe("]"),jr,rr);if(fe=="*")return q.marked="keyword",P(rr);if(c&&Q=="(")return R(Sr,rr);if(Q==";"||Q==",")return P(rr);if(Q=="}")return P();if(fe=="@")return P(se,rr)}function jr(Q,fe){if(fe=="!"||fe=="?")return P(jr);if(Q==":")return P(xe,dt);if(fe=="=")return P($);var ke=q.state.lexical.prev,ze=ke&&ke.info=="interface";return R(ze?Sr:Ht)}function gn(Q,fe){return fe=="*"?(q.marked="keyword",P(Gn,oe(";"))):fe=="default"?(q.marked="keyword",P(se,oe(";"))):Q=="{"?P(Xe(jn,"}"),Gn,oe(";")):R(te)}function jn(Q,fe){if(fe=="as")return q.marked="keyword",P(oe("variable"));if(Q=="variable")return R($,jn)}function Ln(Q){return Q=="string"?P():Q=="("?R(se):Q=="."?R(De):R(Zn,sn,Gn)}function Zn(Q,fe){return Q=="{"?We(Zn,"}"):(Q=="variable"&&I(fe),fe=="*"&&(q.marked="keyword"),P(Pa))}function sn(Q){if(Q==",")return P(Zn,sn)}function Pa(Q,fe){if(fe=="as")return q.marked="keyword",P(Zn)}function Gn(Q,fe){if(fe=="from")return q.marked="keyword",P(se)}function Ft(Q){return Q=="]"?P():R(Xe($,"]"))}function ft(){return R(Y("form"),nt,oe("{"),Y("}"),Xe(Gr,"}"),ee,ee)}function Gr(){return R(nt,dt)}function Qn(Q,fe){return Q.lastType=="operator"||Q.lastType==","||y.test(fe.charAt(0))||/[,.]/.test(fe.charAt(0))}function Pt(Q,fe,ke){return fe.tokenize==x&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(fe.lastType)||fe.lastType=="quasi"&&/\{\s*$/.test(Q.string.slice(0,Q.pos-(ke||0)))}return{startState:function(Q){var fe={tokenize:x,lastType:"sof",cc:[],lexical:new F((Q||0)-i,0,"block",!1),localVars:a.localVars,context:a.localVars&&new re(null,null,!1),indented:Q||0};return a.globalVars&&typeof a.globalVars=="object"&&(fe.globalVars=a.globalVars),fe},token:function(Q,fe){if(Q.sol()&&(fe.lexical.hasOwnProperty("align")||(fe.lexical.align=!1),fe.indented=Q.indentation(),M(Q,fe)),fe.tokenize!=A&&Q.eatSpace())return null;var ke=fe.tokenize(Q,fe);return w=="comment"?ke:(fe.lastType=w=="operator"&&(v=="++"||v=="--")?"incdec":w,B(fe,ke,w,v,Q))},indent:function(Q,fe){if(Q.tokenize==A||Q.tokenize==D)return r.Pass;if(Q.tokenize!=x)return 0;var ke=fe&&fe.charAt(0),ze=Q.lexical,Re;if(!/^\s*else\b/.test(fe))for(var Ze=Q.cc.length-1;Ze>=0;--Ze){var kt=Q.cc[Ze];if(kt==ee)ze=ze.prev;else if(kt!=_t&&kt!=W)break}for(;(ze.type=="stat"||ze.type=="form")&&(ke=="}"||(Re=Q.cc[Q.cc.length-1])&&(Re==De||Re==be)&&!/^[,\.=+\-*:?[\(]/.test(fe));)ze=ze.prev;o&&ze.type==")"&&ze.prev.type=="stat"&&(ze=ze.prev);var Mr=ze.type,yn=ke==Mr;return Mr=="vardef"?ze.indented+(Q.lastType=="operator"||Q.lastType==","?ze.info.length+1:0):Mr=="form"&&ke=="{"?ze.indented:Mr=="form"?ze.indented+i:Mr=="stat"?ze.indented+(Qn(Q,fe)?o||i:0):ze.info=="switch"&&!yn&&a.doubleIndentSwitch!=!1?ze.indented+(/^(?:case|default)\b/.test(fe)?i:2*i):ze.align?ze.column+(yn?0:1):ze.indented+(yn?0:i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:u?null:"/*",blockCommentEnd:u?null:"*/",blockCommentContinue:u?null:" * ",lineComment:u?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:u?"json":"javascript",jsonldMode:s,jsonMode:u,expressionAllowed:Pt,skipExpression:function(Q){B(Q,"atom","atom","true",new r.StringStream("",2,null))}}}),r.registerHelper("wordChars","javascript",/[\w$]/),r.defineMIME("text/javascript","javascript"),r.defineMIME("text/ecmascript","javascript"),r.defineMIME("application/javascript","javascript"),r.defineMIME("application/x-javascript","javascript"),r.defineMIME("application/ecmascript","javascript"),r.defineMIME("application/json",{name:"javascript",json:!0}),r.defineMIME("application/x-json",{name:"javascript",json:!0}),r.defineMIME("application/manifest+json",{name:"javascript",json:!0}),r.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),r.defineMIME("text/typescript",{name:"javascript",typescript:!0}),r.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),nR.exports}N9();var O9=Hi();const lw=So(O9),I9={class:"data-input-panel"},F9={class:"editor-wrapper"},B9=Dr({__name:"DataInputPanel",setup(t){const e=od(),r=bt(null);let n=null,a=!1;return La(async()=>{await nu(),r.value&&(n=lw(r.value,{value:e.currentGraphDataString,mode:{name:"javascript",json:!0},theme:"material-darker",lineNumbers:!0,tabSize:2}),n.on("change",i=>{a||(e.currentGraphDataString=i.getValue())}))}),Da(()=>{var i;if(n){const o=n.getWrapperElement();(i=o.parentNode)==null||i.removeChild(o),n=null}}),wr(()=>e.currentGraphDataString,i=>{n&&n.getValue()!==i&&(a=!0,n.setValue(i),a=!1)}),(i,o)=>(rt(),ut("div",I9,[o[0]||(o[0]=Me("h4",null,"Model Data & Inits",-1)),o[1]||(o[1]=Me("p",{class:"description"}," Define observed data and initial values for your model in JSON format. ",-1)),Me("div",F9,[Me("div",{ref_key:"editorContainer",ref:r,class:"editor-container"},null,512)])]))}}),q9=Kr(B9,[["__scopeId","data-v-6da0f00b"]]),z9=["value","disabled"],G9=["value"],H9=Dr({__name:"BaseSelect",props:{modelValue:{},options:{},disabled:{type:Boolean}},emits:["update:modelValue","change"],setup(t,{emit:e}){const r=t,n=e,a=o=>{const s=o.target;n("update:modelValue",s.value),n("change",o)},i=Gt(()=>({"base-select":!0,"select-disabled":r.disabled}));return(o,s)=>(rt(),ut("select",{value:o.modelValue,onChange:a,disabled:o.disabled,class:Kt(i.value)},[(rt(!0),ut(zt,null,Bn(o.options,u=>(rt(),ut("option",{key:u.value,value:u.value},ur(u.label),9,G9))),128))],42,z9))}}),U9=Kr(H9,[["__scopeId","data-v-4e558a4b"]]),V9={class:"node-properties-panel"},W9={key:0,class:"no-selection-message"},$9={key:1,class:"properties-form"},Y9={key:0,class:"validation-errors-container"},X9={class:"form-group"},K9=["for"],j9={class:"input-wrapper"},Z9=["id","onUpdate:modelValue"],Q9={key:0,class:"help-text"},J9={key:1,class:"error-message"},e8=["for"],t8={class:"action-buttons"},r8=Dr({__name:"NodePropertiesPanel",props:{selectedElement:{},validationErrors:{}},emits:["update-element","delete-element"],setup(t,{emit:e}){const r=t,n=e,a=bt(null),i=bt(!1),o=Gt(()=>{var E;if(((E=a.value)==null?void 0:E.type)==="node")return AO(a.value.nodeType)}),s=Gt(()=>{var E;if(((E=a.value)==null?void 0:E.type)==="node"){const w=a.value;return LO(w.distribution||"")}}),u=Gt(()=>r.selectedElement?r.validationErrors.get(r.selectedElement.id)||[]:[]);wr(()=>r.selectedElement,E=>{a.value=E?JSON.parse(JSON.stringify(E)):null},{deep:!0,immediate:!0});const f=Gt(()=>{var E;return((E=a.value)==null?void 0:E.type)==="node"}),c=Gt(()=>{var E;return((E=a.value)==null?void 0:E.type)==="edge"}),h=()=>{a.value&&n("update-element",a.value)},p=()=>{a.value&&(i.value=!0)},y=()=>{i.value=!1},g=E=>{if(f.value&&a.value){const w=r.validationErrors.get(a.value.id),v=w==null?void 0:w.find(C=>C.field===E);return v==null?void 0:v.message}};return(E,w)=>(rt(),ut("div",V9,[w[5]||(w[5]=Me("h4",null,"Properties",-1)),a.value?(rt(),ut("div",$9,[u.value.length>0?(rt(),ut("div",Y9,[w[1]||(w[1]=Me("h5",{class:"validation-title"},[Me("i",{class:"fas fa-exclamation-triangle"}),Et(" Validation Issues ")],-1)),Me("ul",null,[(rt(!0),ut(zt,null,Bn(u.value,(v,C)=>(rt(),ut("li",{key:C},ur(v.message),1))),128))])])):br("",!0),Me("div",X9,[w[2]||(w[2]=Me("label",{for:"element-id"},"ID:",-1)),st(aa,{id:"element-id","model-value":a.value.id,disabled:""},null,8,["model-value"])]),f.value&&o.value?(rt(),ut(zt,{key:1},[(rt(!0),ut(zt,null,Bn(o.value.properties,v=>(rt(),ut("div",{key:v.key,class:"form-group"},[Me("label",{for:`prop-${v.key}`},ur(v.label)+":",9,K9),Me("div",j9,[v.type==="select"?(rt(),ua(U9,{key:0,id:`prop-${v.key}`,modelValue:a.value[v.key],"onUpdate:modelValue":C=>a.value[v.key]=C,options:v.options,onChange:h,class:Kt({"has-error":g(v.key)})},null,8,["id","modelValue","onUpdate:modelValue","options","class"])):v.type==="checkbox"?Vn((rt(),ut("input",{key:1,type:"checkbox",id:`prop-${v.key}`,"onUpdate:modelValue":C=>a.value[v.key]=C,onChange:h,class:"form-checkbox"},null,40,Z9)),[[PP,a.value[v.key]]]):(rt(),ua(aa,{key:2,id:`prop-${v.key}`,type:v.type,modelValue:a.value[v.key],"onUpdate:modelValue":C=>a.value[v.key]=C,placeholder:v.placeholder,onInput:h,class:Kt({"has-error":g(v.key)})},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","class"]))]),v.helpText?(rt(),ut("small",Q9,ur(v.helpText),1)):br("",!0),g(v.key)?(rt(),ut("small",J9,ur(g(v.key)),1)):br("",!0)]))),128)),s.value&&o.value.parameters?(rt(!0),ut(zt,{key:0},Bn(s.value.paramNames,(v,C)=>(rt(),ut("div",{key:v,class:"form-group"},[Me("label",{for:`param-${C}`},ur(v)+":",9,e8),st(aa,{id:`param-${C}`,type:"text",modelValue:a.value[`param${C+1}`],"onUpdate:modelValue":x=>a.value[`param${C+1}`]=x,placeholder:"Enter value or parent name",onInput:h,class:Kt({"has-error":g(`param${C+1}`)})},null,8,["id","modelValue","onUpdate:modelValue","class"])]))),128)):br("",!0)],64)):c.value?(rt(),ut(zt,{key:2},[],64)):br("",!0),Me("div",t8,[st(Xt,{onClick:h,type:"primary"},{default:ct(()=>w[3]||(w[3]=[Et("Apply Changes")])),_:1,__:[3]}),st(Xt,{onClick:p,type:"danger"},{default:ct(()=>w[4]||(w[4]=[Et("Delete Element")])),_:1,__:[4]})])])):(rt(),ut("div",W9,w[0]||(w[0]=[Me("p",null,"Select a node or edge on the canvas to view/edit its properties.",-1)]))),st(Ni,{"is-open":i.value,onClose:y},null,8,["is-open"])]))}}),n8=Kr(r8,[["__scopeId","data-v-7417230a"]]);function a8(t,e){return{generatedCode:Gt(()=>{var E;const n=t.value.filter(w=>w.type==="node"),a=t.value.filter(w=>w.type==="edge"),i=new Set(Object.keys(e.value.data)),o=new Map(n.map(w=>[w.id,w]));if(n.length===0)return`model {
  # Your model will appear here...
}`;const s={},u={};n.forEach(w=>{s[w.id]=0,u[w.id]=[]}),a.forEach(w=>{u[w.source]&&s[w.target]!==void 0&&(u[w.source].push(w.target),s[w.target]++)});const f=n.filter(w=>s[w.id]===0).map(w=>w.id),c=[];for(;f.length>0;){const w=f.shift();c.push(w),(E=u[w])==null||E.forEach(v=>{s[v]!==void 0&&(s[v]--,s[v]===0&&f.push(v))})}const h={id:"root",type:"plate",children:[]},p=new Map([["root",h]]);n.forEach(w=>{w.nodeType==="plate"?p.set(w.id,{id:w.id,type:"plate",children:[]}):p.set(w.id,{id:w.id,type:"node",children:[]})}),n.forEach(w=>{const v=w.parent||"root",C=p.get(v),x=p.get(w.id);C&&x&&C.children.push(x)});const y=(w,v)=>{let C=[];const x="  ".repeat(v);return w.children.sort((A,D)=>c.indexOf(A.id)-c.indexOf(D.id)).forEach(A=>{const D=o.get(A.id);if(D)if(A.type==="plate")C.push(`${x}for (${D.loopVariable} in ${D.loopRange}) {`),C.push(...y(A,v+1)),C.push(`${x}}`);else{const _=D.indices?`${D.name}[${D.indices}]`:D.name;if(D.observed&&i.has(D.name),D.nodeType==="stochastic"||D.nodeType==="observed"){const M=[D.param1,D.param2,D.param3].filter(k=>k&&String(k).trim()!=="").join(", ");C.push(`${x}${_} ~ ${D.distribution}(${M})`)}else D.nodeType==="deterministic"&&D.equation&&C.push(`${x}${_} <- ${D.equation}`)}}),C};return`model {
${y(h,1).join(`
`)}
}`})}}var oR={exports:{}},sR;function i8(){return sR||(sR=1,function(t,e){(function(r){r(Hi())})(function(r){r.defineMode("julia",function(n,a){function i(K,V,Z){return typeof Z>"u"&&(Z=""),typeof V>"u"&&(V="\\b"),new RegExp("^"+Z+"(("+K.join(")|(")+"))"+V)}var o="\\\\[0-7]{1,3}",s="\\\\x[A-Fa-f0-9]{1,2}",u=`\\\\[abefnrtv0%?'"\\\\]`,f="([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])",c=["[<>]:","[<>=]=","<<=?",">>>?=?","=>","--?>","<--[->]?","\\/\\/","\\.{2,3}","[\\.\\\\%*+\\-<>!\\/^|&]=?","\\?","\\$","~",":"],h=a.operators||i(["[<>]:","[<>=]=","[!=]==","<<=?",">>>?=?","=>?","--?>","<--[->]?","\\/\\/","[\\\\%*+\\-<>!\\/^|&\\u00F7\\u22BB]=?","\\?","\\$","~",":","\\u00D7","\\u2208","\\u2209","\\u220B","\\u220C","\\u2218","\\u221A","\\u221B","\\u2229","\\u222A","\\u2260","\\u2264","\\u2265","\\u2286","\\u2288","\\u228A","\\u22C5","\\b(in|isa)\\b(?!.?\\()"],""),p=a.delimiters||/^[;,()[\]{}]/,y=a.identifiers||/^[_A-Za-z\u00A1-\u2217\u2219-\uFFFF][\w\u00A1-\u2217\u2219-\uFFFF]*!*/,g=i([o,s,u,f],"'"),E=["begin","function","type","struct","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"],w=["end","else","elseif","catch","finally"],v=["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","where","macro","module","baremodule","struct","type","mutable","immutable","quote","typealias","abstract","primitive","bitstype"],C=["true","false","nothing","NaN","Inf"];r.registerHelper("hintWords","julia",v.concat(C));var x=i(E),S=i(w),A=i(v),D=i(C),_=/^@[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,M=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,k=/^(`|([_A-Za-z\u00A1-\uFFFF]*"("")?))/,F=i(c,"","@"),G=i(c,"",":");function B(K){return K.nestedArrays>0}function q(K){return K.nestedGenerators>0}function R(K,V){return typeof V>"u"&&(V=0),K.scopes.length<=V?null:K.scopes[K.scopes.length-(V+1)]}function P(K,V){if(K.match("#=",!1))return V.tokenize=I,V.tokenize(K,V);var Z=V.leavingExpr;if(K.sol()&&(Z=!1),V.leavingExpr=!1,Z&&K.match(/^'+/))return"operator";if(K.match(/\.{4,}/))return"error";if(K.match(/\.{1,3}/))return"operator";if(K.eatSpace())return null;var U=K.peek();if(U==="#")return K.skipToEnd(),"comment";if(U==="["&&(V.scopes.push("["),V.nestedArrays++),U==="("&&(V.scopes.push("("),V.nestedGenerators++),B(V)&&U==="]"){for(;V.scopes.length&&R(V)!=="[";)V.scopes.pop();V.scopes.pop(),V.nestedArrays--,V.leavingExpr=!0}if(q(V)&&U===")"){for(;V.scopes.length&&R(V)!=="(";)V.scopes.pop();V.scopes.pop(),V.nestedGenerators--,V.leavingExpr=!0}if(B(V)){if(V.lastToken=="end"&&K.match(":"))return"operator";if(K.match("end"))return"number"}var W;if((W=K.match(x,!1))&&V.scopes.push(W[0]),K.match(S,!1)&&V.scopes.pop(),K.match(/^::(?![:\$])/))return V.tokenize=N,V.tokenize(K,V);if(!Z&&(K.match(M)||K.match(G)))return"builtin";if(K.match(h))return"operator";if(K.match(/^\.?\d/,!1)){var Y=RegExp(/^im\b/),ee=!1;if(K.match(/^0x\.[0-9a-f_]+p[\+\-]?[_\d]+/i)&&(ee=!0),K.match(/^0x[0-9a-f_]+/i)&&(ee=!0),K.match(/^0b[01_]+/i)&&(ee=!0),K.match(/^0o[0-7_]+/i)&&(ee=!0),K.match(/^(?:(?:\d[_\d]*)?\.(?!\.)(?:\d[_\d]*)?|\d[_\d]*\.(?!\.)(?:\d[_\d]*))?([Eef][\+\-]?[_\d]+)?/i)&&(ee=!0),K.match(/^\d[_\d]*(e[\+\-]?\d+)?/i)&&(ee=!0),ee)return K.match(Y),V.leavingExpr=!0,"number"}if(K.match("'"))return V.tokenize=z,V.tokenize(K,V);if(K.match(k))return V.tokenize=ae(K.current()),V.tokenize(K,V);if(K.match(_)||K.match(F))return"meta";if(K.match(p))return null;if(K.match(A))return"keyword";if(K.match(D))return"builtin";var oe=V.isDefinition||V.lastToken=="function"||V.lastToken=="macro"||V.lastToken=="type"||V.lastToken=="struct"||V.lastToken=="immutable";return K.match(y)?oe?K.peek()==="."?(V.isDefinition=!0,"variable"):(V.isDefinition=!1,"def"):(V.leavingExpr=!0,"variable"):(K.next(),"error")}function N(K,V){return K.match(/.*?(?=[,;{}()=\s]|$)/),K.match("{")?V.nestedParameters++:K.match("}")&&V.nestedParameters>0&&V.nestedParameters--,V.nestedParameters>0?K.match(/.*?(?={|})/)||K.next():V.nestedParameters==0&&(V.tokenize=P),"builtin"}function I(K,V){return K.match("#=")&&V.nestedComments++,K.match(/.*?(?=(#=|=#))/)||K.skipToEnd(),K.match("=#")&&(V.nestedComments--,V.nestedComments==0&&(V.tokenize=P)),"comment"}function z(K,V){var Z=!1,U;if(K.match(g))Z=!0;else if(U=K.match(/\\u([a-f0-9]{1,4})(?=')/i)){var W=parseInt(U[1],16);(W<=55295||W>=57344)&&(Z=!0,K.next())}else if(U=K.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var W=parseInt(U[1],16);W<=1114111&&(Z=!0,K.next())}return Z?(V.leavingExpr=!0,V.tokenize=P,"string"):(K.match(/^[^']+(?=')/)||K.skipToEnd(),K.match("'")&&(V.tokenize=P),"error")}function ae(K){K.substr(-3)==='"""'?K='"""':K.substr(-1)==='"'&&(K='"');function V(Z,U){if(Z.eat("\\"))Z.next();else{if(Z.match(K))return U.tokenize=P,U.leavingExpr=!0,"string";Z.eat(/[`"]/)}return Z.eatWhile(/[^\\`"]/),"string"}return V}var re={startState:function(){return{tokenize:P,scopes:[],lastToken:null,leavingExpr:!1,isDefinition:!1,nestedArrays:0,nestedComments:0,nestedGenerators:0,nestedParameters:0,firstParenPos:-1}},token:function(K,V){var Z=V.tokenize(K,V),U=K.current();return U&&Z&&(V.lastToken=U),Z},indent:function(K,V){var Z=0;return(V==="]"||V===")"||/^end\b/.test(V)||/^else/.test(V)||/^catch\b/.test(V)||/^elseif\b/.test(V)||/^finally/.test(V))&&(Z=-1),(K.scopes.length+Z)*n.indentUnit},electricInput:/\b(end|else|catch|finally)\b/,blockCommentStart:"#=",blockCommentEnd:"=#",lineComment:"#",closeBrackets:'()[]{}""',fold:"indent"};return re}),r.defineMIME("text/x-julia","julia")})}()),oR.exports}i8();const o8={class:"code-preview-panel"},s8={class:"code-output"},l8={key:0,class:"fas fa-check"},u8={key:1},f8=Dr({__name:"CodePreviewPanel",setup(t){const e=Mo(),r=od(),{currentGraphElements:n}=Pb(e),{parsedGraphData:a}=Pb(r),{generatedCode:i}=a8(n,a),o=bt(!1),s=bt(null);let u=null;La(()=>{s.value&&(u=lw(s.value,{value:i.value,mode:"julia",theme:"material-darker",lineNumbers:!0,readOnly:!0,tabSize:2}))}),Da(()=>{var c;if(u){const h=u.getWrapperElement();(c=h.parentNode)==null||c.removeChild(h),u=null}}),wr(i,c=>{u&&u.getValue()!==c&&u.setValue(c)});const f=()=>{navigator.clipboard.writeText(i.value).then(()=>{o.value=!0,setTimeout(()=>{o.value=!1},2e3)}).catch(c=>{console.error("Failed to copy code: ",c),alert("Failed to copy code to clipboard.")})};return(c,h)=>(rt(),ut("div",o8,[h[0]||(h[0]=Me("h4",null,"Generated BUGS Code",-1)),Me("div",s8,[Me("div",{ref_key:"editorContainer",ref:s,class:"editor-container"},null,512),st(Xt,{onClick:f,class:"copy-button",type:"secondary"},{default:ct(()=>[o.value?(rt(),ut("i",l8)):(rt(),ut("span",u8,"Copy Code"))]),_:1})])]))}}),c8=Kr(f8,[["__scopeId","data-v-87490b2c"]]);var lR={exports:{}},uR;function d8(){return uR||(uR=1,function(t,e){(function(r){r(Hi())})(function(r){function n(o,s,u){this.orientation=s,this.scroll=u,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=o+"-"+s,this.inner=this.node.appendChild(document.createElement("div"));var f=this;r.on(this.inner,"mousedown",function(h){if(h.which!=1)return;r.e_preventDefault(h);var p=f.orientation=="horizontal"?"pageX":"pageY",y=h[p],g=f.pos;function E(){r.off(document,"mousemove",w),r.off(document,"mouseup",E)}function w(v){if(v.which!=1)return E();f.moveTo(g+(v[p]-y)*(f.total/f.size))}r.on(document,"mousemove",w),r.on(document,"mouseup",E)}),r.on(this.node,"click",function(h){r.e_preventDefault(h);var p=f.inner.getBoundingClientRect(),y;f.orientation=="horizontal"?y=h.clientX<p.left?-1:h.clientX>p.right?1:0:y=h.clientY<p.top?-1:h.clientY>p.bottom?1:0,f.moveTo(f.pos+y*f.screen)});function c(h){var p=r.wheelEventPixels(h)[f.orientation=="horizontal"?"x":"y"],y=f.pos;f.moveTo(f.pos+p),f.pos!=y&&r.e_preventDefault(h)}r.on(this.node,"mousewheel",c),r.on(this.node,"DOMMouseScroll",c)}n.prototype.setPos=function(o,s){return o<0&&(o=0),o>this.total-this.screen&&(o=this.total-this.screen),!s&&o==this.pos?!1:(this.pos=o,this.inner.style[this.orientation=="horizontal"?"left":"top"]=o*(this.size/this.total)+"px",!0)},n.prototype.moveTo=function(o){this.setPos(o)&&this.scroll(o,this.orientation)};var a=10;n.prototype.update=function(o,s,u){var f=this.screen!=s||this.total!=o||this.size!=u;f&&(this.screen=s,this.total=o,this.size=u);var c=this.screen*(this.size/this.total);c<a&&(this.size-=a-c,c=a),this.inner.style[this.orientation=="horizontal"?"width":"height"]=c+"px",this.setPos(this.pos,f)};function i(o,s,u){this.addClass=o,this.horiz=new n(o,"horizontal",u),s(this.horiz.node),this.vert=new n(o,"vertical",u),s(this.vert.node),this.width=null}i.prototype.update=function(o){if(this.width==null){var s=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;s&&(this.width=parseInt(s.height))}var u=this.width||0,f=o.scrollWidth>o.clientWidth+1,c=o.scrollHeight>o.clientHeight+1;return this.vert.node.style.display=c?"block":"none",this.horiz.node.style.display=f?"block":"none",c&&(this.vert.update(o.scrollHeight,o.clientHeight,o.viewHeight-(f?u:0)),this.vert.node.style.bottom=f?u+"px":"0"),f&&(this.horiz.update(o.scrollWidth,o.clientWidth,o.viewWidth-(c?u:0)-o.barLeft),this.horiz.node.style.right=c?u+"px":"0",this.horiz.node.style.left=o.barLeft+"px"),{right:c?u:0,bottom:f?u:0}},i.prototype.setScrollTop=function(o){this.vert.setPos(o)},i.prototype.setScrollLeft=function(o){this.horiz.setPos(o)},i.prototype.clear=function(){var o=this.horiz.node.parentNode;o.removeChild(this.horiz.node),o.removeChild(this.vert.node)},r.scrollbarModel.simple=function(o,s){return new i("CodeMirror-simplescroll",o,s)},r.scrollbarModel.overlay=function(o,s){return new i("CodeMirror-overlayscroll",o,s)}})}()),lR.exports}d8();var fR={exports:{}},cR;function h8(){return cR||(cR=1,function(t,e){(function(r){r(Hi())})(function(r){var n=r.Pos;function a(C){var x=C.flags;return x??(C.ignoreCase?"i":"")+(C.global?"g":"")+(C.multiline?"m":"")}function i(C,x){for(var S=a(C),A=S,D=0;D<x.length;D++)A.indexOf(x.charAt(D))==-1&&(A+=x.charAt(D));return S==A?C:new RegExp(C.source,A)}function o(C){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(C.source)}function s(C,x,S){x=i(x,"g");for(var A=S.line,D=S.ch,_=C.lastLine();A<=_;A++,D=0){x.lastIndex=D;var M=C.getLine(A),k=x.exec(M);if(k)return{from:n(A,k.index),to:n(A,k.index+k[0].length),match:k}}}function u(C,x,S){if(!o(x))return s(C,x,S);x=i(x,"gm");for(var A,D=1,_=S.line,M=C.lastLine();_<=M;){for(var k=0;k<D&&!(_>M);k++){var F=C.getLine(_++);A=A==null?F:A+`
`+F}D=D*2,x.lastIndex=S.ch;var G=x.exec(A);if(G){var B=A.slice(0,G.index).split(`
`),q=G[0].split(`
`),R=S.line+B.length-1,P=B[B.length-1].length;return{from:n(R,P),to:n(R+q.length-1,q.length==1?P+q[0].length:q[q.length-1].length),match:G}}}}function f(C,x,S){for(var A,D=0;D<=C.length;){x.lastIndex=D;var _=x.exec(C);if(!_)break;var M=_.index+_[0].length;if(M>C.length-S)break;(!A||M>A.index+A[0].length)&&(A=_),D=_.index+1}return A}function c(C,x,S){x=i(x,"g");for(var A=S.line,D=S.ch,_=C.firstLine();A>=_;A--,D=-1){var M=C.getLine(A),k=f(M,x,D<0?0:M.length-D);if(k)return{from:n(A,k.index),to:n(A,k.index+k[0].length),match:k}}}function h(C,x,S){if(!o(x))return c(C,x,S);x=i(x,"gm");for(var A,D=1,_=C.getLine(S.line).length-S.ch,M=S.line,k=C.firstLine();M>=k;){for(var F=0;F<D&&M>=k;F++){var G=C.getLine(M--);A=A==null?G:G+`
`+A}D*=2;var B=f(A,x,_);if(B){var q=A.slice(0,B.index).split(`
`),R=B[0].split(`
`),P=M+q.length,N=q[q.length-1].length;return{from:n(P,N),to:n(P+R.length-1,R.length==1?N+R[0].length:R[R.length-1].length),match:B}}}}var p,y;String.prototype.normalize?(p=function(C){return C.normalize("NFD").toLowerCase()},y=function(C){return C.normalize("NFD")}):(p=function(C){return C.toLowerCase()},y=function(C){return C});function g(C,x,S,A){if(C.length==x.length)return S;for(var D=0,_=S+Math.max(0,C.length-x.length);;){if(D==_)return D;var M=D+_>>1,k=A(C.slice(0,M)).length;if(k==S)return M;k>S?_=M:D=M+1}}function E(C,x,S,A){if(!x.length)return null;var D=A?p:y,_=D(x).split(/\r|\n\r?/);e:for(var M=S.line,k=S.ch,F=C.lastLine()+1-_.length;M<=F;M++,k=0){var G=C.getLine(M).slice(k),B=D(G);if(_.length==1){var q=B.indexOf(_[0]);if(q==-1)continue e;var S=g(G,B,q,D)+k;return{from:n(M,g(G,B,q,D)+k),to:n(M,g(G,B,q+_[0].length,D)+k)}}else{var R=B.length-_[0].length;if(B.slice(R)!=_[0])continue e;for(var P=1;P<_.length-1;P++)if(D(C.getLine(M+P))!=_[P])continue e;var N=C.getLine(M+_.length-1),I=D(N),z=_[_.length-1];if(I.slice(0,z.length)!=z)continue e;return{from:n(M,g(G,B,R,D)+k),to:n(M+_.length-1,g(N,I,z.length,D))}}}}function w(C,x,S,A){if(!x.length)return null;var D=A?p:y,_=D(x).split(/\r|\n\r?/);e:for(var M=S.line,k=S.ch,F=C.firstLine()-1+_.length;M>=F;M--,k=-1){var G=C.getLine(M);k>-1&&(G=G.slice(0,k));var B=D(G);if(_.length==1){var q=B.lastIndexOf(_[0]);if(q==-1)continue e;return{from:n(M,g(G,B,q,D)),to:n(M,g(G,B,q+_[0].length,D))}}else{var R=_[_.length-1];if(B.slice(0,R.length)!=R)continue e;for(var P=1,S=M-_.length+1;P<_.length-1;P++)if(D(C.getLine(S+P))!=_[P])continue e;var N=C.getLine(M+1-_.length),I=D(N);if(I.slice(I.length-_[0].length)!=_[0])continue e;return{from:n(M+1-_.length,g(N,I,N.length-_[0].length,D)),to:n(M,g(G,B,R.length,D))}}}}function v(C,x,S,A){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=C,S=S?C.clipPos(S):n(0,0),this.pos={from:S,to:S};var D;typeof A=="object"?D=A.caseFold:(D=A,A=null),typeof x=="string"?(D==null&&(D=!1),this.matches=function(_,M){return(_?w:E)(C,x,M,D)}):(x=i(x,"gm"),!A||A.multiline!==!1?this.matches=function(_,M){return(_?h:u)(C,x,M)}:this.matches=function(_,M){return(_?c:s)(C,x,M)})}v.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(C){var x=this.doc.clipPos(C?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(x=n(x.line,x.ch),C?(x.ch--,x.ch<0&&(x.line--,x.ch=(this.doc.getLine(x.line)||"").length)):(x.ch++,x.ch>(this.doc.getLine(x.line)||"").length&&(x.ch=0,x.line++)),r.cmpPos(x,this.doc.clipPos(x))!=0))return this.atOccurrence=!1;var S=this.matches(C,x);if(this.afterEmptyMatch=S&&r.cmpPos(S.from,S.to)==0,S)return this.pos=S,this.atOccurrence=!0,this.pos.match||!0;var A=n(C?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:A,to:A},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(C,x){if(this.atOccurrence){var S=r.splitLines(C);this.doc.replaceRange(S,this.pos.from,this.pos.to,x),this.pos.to=n(this.pos.from.line+S.length-1,S[S.length-1].length+(S.length==1?this.pos.from.ch:0))}}},r.defineExtension("getSearchCursor",function(C,x,S){return new v(this.doc,C,x,S)}),r.defineDocExtension("getSearchCursor",function(C,x,S){return new v(this,C,x,S)}),r.defineExtension("selectMatches",function(C,x){for(var S=[],A=this.getSearchCursor(C,this.getCursor("from"),x);A.findNext()&&!(r.cmpPos(A.to(),this.getCursor("to"))>0);)S.push({anchor:A.from(),head:A.to()});S.length&&this.setSelections(S,0)})})}()),fR.exports}h8();var dR={exports:{}},hR;function _O(){return hR||(hR=1,function(t,e){(function(r){r(Hi())})(function(r){function n(s,u,f,c){if(f&&f.call){var h=f;f=null}else var h=o(s,f,"rangeFinder");typeof u=="number"&&(u=r.Pos(u,0));var p=o(s,f,"minFoldSize");function y(v){var C=h(s,u);if(!C||C.to.line-C.from.line<p)return null;if(c==="fold")return C;for(var x=s.findMarksAt(C.from),S=0;S<x.length;++S)if(x[S].__isFold){if(!v)return null;C.cleared=!0,x[S].clear()}return C}var g=y(!0);if(o(s,f,"scanUp"))for(;!g&&u.line>s.firstLine();)u=r.Pos(u.line-1,0),g=y(!1);if(!(!g||g.cleared||c==="unfold")){var E=a(s,f,g);r.on(E,"mousedown",function(v){w.clear(),r.e_preventDefault(v)});var w=s.markText(g.from,g.to,{replacedWith:E,clearOnEnter:o(s,f,"clearOnEnter"),__isFold:!0});w.on("clear",function(v,C){r.signal(s,"unfold",s,v,C)}),r.signal(s,"fold",s,g.from,g.to)}}function a(s,u,f){var c=o(s,u,"widget");if(typeof c=="function"&&(c=c(f.from,f.to)),typeof c=="string"){var h=document.createTextNode(c);c=document.createElement("span"),c.appendChild(h),c.className="CodeMirror-foldmarker"}else c&&(c=c.cloneNode(!0));return c}r.newFoldFunction=function(s,u){return function(f,c){n(f,c,{rangeFinder:s,widget:u})}},r.defineExtension("foldCode",function(s,u,f){n(this,s,u,f)}),r.defineExtension("isFolded",function(s){for(var u=this.findMarksAt(s),f=0;f<u.length;++f)if(u[f].__isFold)return!0}),r.commands.toggleFold=function(s){s.foldCode(s.getCursor())},r.commands.fold=function(s){s.foldCode(s.getCursor(),null,"fold")},r.commands.unfold=function(s){s.foldCode(s.getCursor(),{scanUp:!1},"unfold")},r.commands.foldAll=function(s){s.operation(function(){for(var u=s.firstLine(),f=s.lastLine();u<=f;u++)s.foldCode(r.Pos(u,0),{scanUp:!1},"fold")})},r.commands.unfoldAll=function(s){s.operation(function(){for(var u=s.firstLine(),f=s.lastLine();u<=f;u++)s.foldCode(r.Pos(u,0),{scanUp:!1},"unfold")})},r.registerHelper("fold","combine",function(){var s=Array.prototype.slice.call(arguments,0);return function(u,f){for(var c=0;c<s.length;++c){var h=s[c](u,f);if(h)return h}}}),r.registerHelper("fold","auto",function(s,u){for(var f=s.getHelpers(u,"fold"),c=0;c<f.length;c++){var h=f[c](s,u);if(h)return h}});var i={rangeFinder:r.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};r.defineOption("foldOptions",null);function o(s,u,f){if(u&&u[f]!==void 0)return u[f];var c=s.options.foldOptions;return c&&c[f]!==void 0?c[f]:i[f]}r.defineExtension("foldOption",function(s,u){return o(this,s,u)})})}()),dR.exports}_O();var vR={exports:{}},pR;function v8(){return pR||(pR=1,function(t,e){(function(r){r(Hi(),_O())})(function(r){r.defineOption("foldGutter",!1,function(w,v,C){C&&C!=r.Init&&(w.clearGutter(w.state.foldGutter.options.gutter),w.state.foldGutter=null,w.off("gutterClick",h),w.off("changes",y),w.off("viewportChange",g),w.off("fold",E),w.off("unfold",E),w.off("swapDoc",y),w.off("optionChange",p)),v&&(w.state.foldGutter=new a(i(v)),c(w),w.on("gutterClick",h),w.on("changes",y),w.on("viewportChange",g),w.on("fold",E),w.on("unfold",E),w.on("swapDoc",y),w.on("optionChange",p))});var n=r.Pos;function a(w){this.options=w,this.from=this.to=0}function i(w){return w===!0&&(w={}),w.gutter==null&&(w.gutter="CodeMirror-foldgutter"),w.indicatorOpen==null&&(w.indicatorOpen="CodeMirror-foldgutter-open"),w.indicatorFolded==null&&(w.indicatorFolded="CodeMirror-foldgutter-folded"),w}function o(w,v){for(var C=w.findMarks(n(v,0),n(v+1,0)),x=0;x<C.length;++x)if(C[x].__isFold){var S=C[x].find(-1);if(S&&S.line===v)return C[x]}}function s(w){if(typeof w=="string"){var v=document.createElement("div");return v.className=w+" CodeMirror-guttermarker-subtle",v}else return w.cloneNode(!0)}function u(w,v,C){var x=w.state.foldGutter.options,S=v-1,A=w.foldOption(x,"minFoldSize"),D=w.foldOption(x,"rangeFinder"),_=typeof x.indicatorFolded=="string"&&f(x.indicatorFolded),M=typeof x.indicatorOpen=="string"&&f(x.indicatorOpen);w.eachLine(v,C,function(k){++S;var F=null,G=k.gutterMarkers;if(G&&(G=G[x.gutter]),o(w,S)){if(_&&G&&_.test(G.className))return;F=s(x.indicatorFolded)}else{var B=n(S,0),q=D&&D(w,B);if(q&&q.to.line-q.from.line>=A){if(M&&G&&M.test(G.className))return;F=s(x.indicatorOpen)}}!F&&!G||w.setGutterMarker(k,x.gutter,F)})}function f(w){return new RegExp("(^|\\s)"+w+"(?:$|\\s)\\s*")}function c(w){var v=w.getViewport(),C=w.state.foldGutter;C&&(w.operation(function(){u(w,v.from,v.to)}),C.from=v.from,C.to=v.to)}function h(w,v,C){var x=w.state.foldGutter;if(x){var S=x.options;if(C==S.gutter){var A=o(w,v);A?A.clear():w.foldCode(n(v,0),S)}}}function p(w,v){v=="mode"&&y(w)}function y(w){var v=w.state.foldGutter;if(v){var C=v.options;v.from=v.to=0,clearTimeout(v.changeUpdate),v.changeUpdate=setTimeout(function(){c(w)},C.foldOnChangeTimeSpan||600)}}function g(w){var v=w.state.foldGutter;if(v){var C=v.options;clearTimeout(v.changeUpdate),v.changeUpdate=setTimeout(function(){var x=w.getViewport();v.from==v.to||x.from-v.to>20||v.from-x.to>20?c(w):w.operation(function(){x.from<v.from&&(u(w,x.from,v.from),v.from=x.from),x.to>v.to&&(u(w,v.to,x.to),v.to=x.to)})},C.updateViewportTimeSpan||400)}}function E(w,v){var C=w.state.foldGutter;if(C){var x=v.line;x>=C.from&&x<C.to&&u(w,x,x+1)}}})}()),vR.exports}v8();var gR={exports:{}},yR;function p8(){return yR||(yR=1,function(t,e){(function(r){r(Hi())})(function(r){function n(a){return function(i,o){var s=o.line,u=i.getLine(s);function f(E){for(var w,v=o.ch,C=0;;){var x=v<=0?-1:u.lastIndexOf(E[0],v-1);if(x==-1){if(C==1)break;C=1,v=u.length;continue}if(C==1&&x<o.ch)break;if(w=i.getTokenTypeAt(r.Pos(s,x+1)),!/^(comment|string)/.test(w))return{ch:x+1,tokenType:w,pair:E};v=x-1}}function c(E){var w=1,v=i.lastLine(),C,x=E.ch,S;e:for(var A=s;A<=v;++A)for(var D=i.getLine(A),_=A==s?x:0;;){var M=D.indexOf(E.pair[0],_),k=D.indexOf(E.pair[1],_);if(M<0&&(M=D.length),k<0&&(k=D.length),_=Math.min(M,k),_==D.length)break;if(i.getTokenTypeAt(r.Pos(A,_+1))==E.tokenType){if(_==M)++w;else if(!--w){C=A,S=_;break e}}++_}return C==null||s==C?null:{from:r.Pos(s,x),to:r.Pos(C,S)}}for(var h=[],p=0;p<a.length;p++){var y=f(a[p]);y&&h.push(y)}h.sort(function(E,w){return E.ch-w.ch});for(var p=0;p<h.length;p++){var g=c(h[p]);if(g)return g}return null}}r.registerHelper("fold","brace",n([["{","}"],["[","]"]])),r.registerHelper("fold","brace-paren",n([["{","}"],["[","]"],["(",")"]])),r.registerHelper("fold","import",function(a,i){function o(p){if(p<a.firstLine()||p>a.lastLine())return null;var y=a.getTokenAt(r.Pos(p,1));if(/\S/.test(y.string)||(y=a.getTokenAt(r.Pos(p,y.end+1))),y.type!="keyword"||y.string!="import")return null;for(var g=p,E=Math.min(a.lastLine(),p+10);g<=E;++g){var w=a.getLine(g),v=w.indexOf(";");if(v!=-1)return{startCh:y.end,end:r.Pos(g,v)}}}var s=i.line,u=o(s),f;if(!u||o(s-1)||(f=o(s-2))&&f.end.line==s-1)return null;for(var c=u.end;;){var h=o(c.line+1);if(h==null)break;c=h.end}return{from:a.clipPos(r.Pos(s,u.startCh+1)),to:c}}),r.registerHelper("fold","include",function(a,i){function o(h){if(h<a.firstLine()||h>a.lastLine())return null;var p=a.getTokenAt(r.Pos(h,1));if(/\S/.test(p.string)||(p=a.getTokenAt(r.Pos(h,p.end+1))),p.type=="meta"&&p.string.slice(0,8)=="#include")return p.start+8}var s=i.line,u=o(s);if(u==null||o(s-1)!=null)return null;for(var f=s;;){var c=o(f+1);if(c==null)break;++f}return{from:r.Pos(s,u+1),to:a.clipPos(r.Pos(f))}})})}()),gR.exports}p8();const g8={class:"json-editor-panel"},y8={class:"editor-wrapper"},m8={class:"footer-section"},b8={key:0,class:"error-message"},w8={key:1,class:"status-text"},x8=Dr({__name:"JsonEditorPanel",setup(t){const e=Mo(),{selectedElement:r}=sw(),n=bt(""),a=bt(null);let i=null,o=!1;const s=Gt(()=>e.currentGraphElements),u=["id","type","nodeType","source","target","parent"],f=()=>{if(!i)return;i.getAllMarks().forEach(y=>y.clear()),i.getValue().split(`
`).forEach((y,g)=>{const w=y.trim().match(/"([^"]+)"\s*:/);w&&u.includes(w[1])&&(i==null||i.markText({line:g,ch:0},{line:g,ch:y.length},{readOnly:!0,className:"cm-protected"}))})};La(()=>{if(a.value){i=lw(a.value,{value:"[]",mode:{name:"javascript",json:!0},theme:"material-darker",lineNumbers:!0,tabSize:2,scrollbarStyle:"simple",lineWrapping:!1,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),i.on("change",p=>{o||c(p.getValue())});const h=JSON.stringify(s.value,null,2);o=!0,i.setValue(h),f(),o=!1}}),Da(()=>{var h;if(i){const p=i.getWrapperElement();(h=p.parentNode)==null||h.removeChild(p),i=null}}),wr(s,h=>{if(!i)return;const p=i.getValue(),y=JSON.stringify(h,null,2);try{if(JSON.stringify(JSON.parse(p))===JSON.stringify(JSON.parse(y)))return}catch{if(p===y)return}o=!0,i.setValue(y),f(),o=!1},{deep:!0}),wr(r,async h=>{if(!h||!i)return;await nu();const p=`"id": "${h.id}"`,y=i.getSearchCursor(p);if(y.findNext()){const g=y.from(),E=i.getSearchCursor("{",g);if(E.findPrevious()){const w=E.from(),v=i.findMatchingBracket(w,!1);if(v&&v.to){const C={line:v.to.line,ch:v.to.ch+1};i.focus(),i.setSelection(w,C),i.scrollIntoView({from:w,to:C},50)}}}});const c=h=>{try{const p=JSON.parse(h);if(!Array.isArray(p))throw new Error("JSON must be an array of graph elements.");e.currentGraphId&&e.updateGraphElements(e.currentGraphId,p),n.value=""}catch(p){n.value=`Invalid JSON: ${p.message}`}};return(h,p)=>(rt(),ut("div",g8,[p[1]||(p[1]=Me("div",{class:"header-section"},[Me("h4",null,"Live Graph JSON"),Me("p",{class:"description"}," Edit the JSON below to see live updates on the canvas. Read-only fields are protected. ")],-1)),Me("div",y8,[Me("div",{ref_key:"editorContainer",ref:a,class:"json-editor-container"},null,512)]),Me("div",m8,[n.value?(rt(),ut("div",b8,ur(n.value),1)):(rt(),ut("span",w8,p[0]||(p[0]=[Me("i",{class:"fas fa-check-circle"},null,-1),Et(" Live Sync Enabled ")])))])]))}}),C8=Kr(x8,[["__scopeId","data-v-4c23a820"]]),E8=Dr({__name:"DropdownMenu",setup(t){const e=bt(!1),r=bt(null),n=()=>{e.value=!e.value},a=()=>{e.value=!1},i=o=>{r.value&&!r.value.contains(o.target)&&a()};return La(()=>{document.addEventListener("click",i,!0)}),Da(()=>{document.removeEventListener("click",i,!0)}),(o,s)=>(rt(),ut("div",{class:"menu-item-wrapper",ref_key:"dropdownRef",ref:r},[Me("div",{onClick:n,class:"menu-toggle"},[gs(o.$slots,"trigger",{},void 0,!0)]),st(g1,{name:"dropdown-animation"},{default:ct(()=>[e.value?(rt(),ut("div",{key:0,class:"dropdown-content",onClick:a},[gs(o.$slots,"content",{},void 0,!0)])):br("",!0)]),_:3})],512))}}),io=Kr(E8,[["__scopeId","data-v-90292090"]]),T8={class:"navbar"},S8={class:"navbar-left"},A8={class:"navbar-menu"},L8=["onClick"],D8=["checked"],_8=["onClick"],M8={class:"navbar-center"},R8=["title"],P8={class:"navbar-right"},k8={class:"pane-toggles"},N8={class:"project-name"},O8=Dr({__name:"TheNavbar",props:{projectName:{},activeGraphName:{},isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},currentNodeType:{},isLeftSidebarOpen:{type:Boolean},isRightSidebarOpen:{type:Boolean},isModelValid:{type:Boolean}},emits:["update:isGridEnabled","update:gridSize","update:currentMode","update:currentNodeType","new-project","new-graph","toggle-left-sidebar","toggle-right-sidebar","open-about-modal","open-export-modal","export-json","apply-layout","load-example","validate-model","show-validation-issues"],setup(t,{emit:e}){const r=t,n=e,a=Gt(()=>r.projectName&&r.activeGraphName?`${r.projectName} — ${r.activeGraphName}`:r.projectName?r.projectName:"No Project Selected"),i=[{name:"Rats Model",key:"rats"}],o=u=>{n("update:currentNodeType",u),n("update:currentMode","add-node")},s=u=>{const f=u.target;n("update:gridSize",Number(f.value))};return(u,f)=>(rt(),ut("nav",T8,[Me("div",S8,[f[33]||(f[33]=Me("div",{class:"navbar-brand"},"DoodleBUGS",-1)),Me("div",A8,[st(io,null,{trigger:ct(()=>[st(Xt,{type:"ghost",size:"small"},{default:ct(()=>f[18]||(f[18]=[Et("Project")])),_:1,__:[18]})]),content:ct(()=>[Me("a",{href:"#",onClick:f[0]||(f[0]=Ur(c=>n("new-project"),["prevent"]))},"New Project..."),Me("a",{href:"#",onClick:f[1]||(f[1]=Ur(c=>n("new-graph"),["prevent"]))},"New Graph...")]),_:1}),st(io,null,{trigger:ct(()=>[st(Xt,{type:"ghost",size:"small"},{default:ct(()=>f[19]||(f[19]=[Et("Export")])),_:1,__:[19]})]),content:ct(()=>[Me("a",{href:"#",onClick:f[2]||(f[2]=Ur(c=>n("open-export-modal","png"),["prevent"]))},"as PNG..."),Me("a",{href:"#",onClick:f[3]||(f[3]=Ur(c=>n("open-export-modal","jpg"),["prevent"]))},"as JPG..."),Me("a",{href:"#",onClick:f[4]||(f[4]=Ur(c=>n("open-export-modal","svg"),["prevent"]))},"as SVG..."),f[20]||(f[20]=Me("div",{class:"dropdown-divider"},null,-1)),Me("a",{href:"#",onClick:f[5]||(f[5]=Ur(c=>n("export-json"),["prevent"]))},"as JSON")]),_:1}),st(io,null,{trigger:ct(()=>[st(Xt,{type:"ghost",size:"small"},{default:ct(()=>f[21]||(f[21]=[Et("Add")])),_:1,__:[21]})]),content:ct(()=>[f[22]||(f[22]=Me("div",{class:"dropdown-section-title"},"Nodes",-1)),(rt(!0),ut(zt,null,Bn(Vt(id),c=>(rt(),ut("a",{key:c.nodeType,href:"#",onClick:Ur(h=>o(c.nodeType),["prevent"])},ur(c.label),9,L8))),128)),f[23]||(f[23]=Me("div",{class:"dropdown-divider"},null,-1)),Me("a",{href:"#",onClick:f[6]||(f[6]=Ur(c=>n("update:currentMode","add-edge"),["prevent"]))},"Add Edge")]),_:1}),st(io,null,{trigger:ct(()=>[st(Xt,{type:"ghost",size:"small"},{default:ct(()=>f[24]||(f[24]=[Et("Layout")])),_:1,__:[24]})]),content:ct(()=>[Me("a",{href:"#",onClick:f[7]||(f[7]=Ur(c=>n("apply-layout","dagre"),["prevent"]))},"Dagre (Hierarchical)"),Me("a",{href:"#",onClick:f[8]||(f[8]=Ur(c=>n("apply-layout","fcose"),["prevent"]))},"fCoSE (Force-Directed)"),Me("a",{href:"#",onClick:f[9]||(f[9]=Ur(c=>n("apply-layout","preset"),["prevent"]))},"Reset to Preset")]),_:1}),st(io,null,{trigger:ct(()=>[st(Xt,{type:"ghost",size:"small"},{default:ct(()=>f[25]||(f[25]=[Et("View")])),_:1,__:[25]})]),content:ct(()=>[Me("label",{class:"dropdown-checkbox",onClick:f[11]||(f[11]=Ur(()=>{},["stop"]))},[Me("input",{type:"checkbox",checked:u.isGridEnabled,onChange:f[10]||(f[10]=c=>n("update:isGridEnabled",c.target.checked))},null,40,D8),f[26]||(f[26]=Et(" Show Grid "))]),Me("div",{class:"dropdown-input-group",onClick:f[12]||(f[12]=Ur(()=>{},["stop"]))},[f[27]||(f[27]=Me("label",{for:"grid-size-nav"},"Grid Size:",-1)),st(aa,{id:"grid-size-nav",type:"number","model-value":u.gridSize,onInput:s,min:"10",max:"100",step:"5",class:"w-20"},null,8,["model-value"]),f[28]||(f[28]=Me("span",null,"px",-1))])]),_:1}),st(io,null,{trigger:ct(()=>[st(Xt,{type:"ghost",size:"small"},{default:ct(()=>f[29]||(f[29]=[Et("Examples")])),_:1,__:[29]})]),content:ct(()=>[(rt(),ut(zt,null,Bn(i,c=>Me("a",{key:c.key,href:"#",onClick:Ur(h=>n("load-example",c.key),["prevent"])},ur(c.name),9,_8)),64))]),_:1}),st(io,null,{trigger:ct(()=>[st(Xt,{type:"ghost",size:"small"},{default:ct(()=>f[30]||(f[30]=[Et("Help")])),_:1,__:[30]})]),content:ct(()=>[Me("a",{href:"#",onClick:f[13]||(f[13]=Ur(c=>n("open-about-modal"),["prevent"]))},"About DoodleBUGS"),f[31]||(f[31]=Me("span",{class:"dropdown-item-placeholder"},"Documentation (Coming Soon)",-1)),f[32]||(f[32]=Me("a",{href:"https://github.com/TuringLang/JuliaBUGS.jl/issues/new?template=doodlebugs.md",target:"_blank",rel:"noopener noreferrer",class:"report-issue-link"},[Et(" Report an Issue "),Me("i",{class:"fas fa-external-link-alt external-link-icon"})],-1))]),_:1})])]),Me("div",M8,[st(Xt,{onClick:f[14]||(f[14]=c=>n("validate-model")),type:"ghost",size:"small",title:"Re-run model validation"},{default:ct(()=>f[34]||(f[34]=[Me("i",{class:"fas fa-sync-alt"},null,-1),Et(" Validate ")])),_:1,__:[34]}),Me("div",{onClick:f[15]||(f[15]=c=>n("show-validation-issues")),class:Kt(["validation-status",u.isModelValid?"valid":"invalid"]),title:u.isModelValid?"Model is valid":"Model has errors. Click to see details."},[Me("i",{class:Kt(u.isModelValid?"fas fa-check-circle":"fas fa-exclamation-triangle")},null,2)],10,R8)]),Me("div",P8,[Me("div",k8,[Me("button",{onClick:f[16]||(f[16]=c=>n("toggle-left-sidebar")),class:Kt({active:u.isLeftSidebarOpen}),title:"Toggle Left Sidebar"},f[35]||(f[35]=[Me("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[Me("path",{d:"M49.984,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"})],-1)]),2),Me("button",{onClick:f[17]||(f[17]=c=>n("toggle-right-sidebar")),class:Kt({active:u.isRightSidebarOpen}),title:"Toggle Right Sidebar"},f[36]||(f[36]=[Me("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",transform:"matrix(-1, 0, 0, 1, 0, 0)"},[Me("path",{d:"M49.984,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"})],-1)]),2)]),Me("span",N8,ur(a.value),1)])]))}}),I8=Kr(O8,[["__scopeId","data-v-e882cad1"]]),F8=Dr({__name:"AboutModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const r=e;return(n,a)=>(rt(),ua(Ni,{"is-open":n.isOpen,onClose:a[1]||(a[1]=i=>r("close"))},{header:ct(()=>a[2]||(a[2]=[Me("h3",null,"About DoodleBUGS",-1)])),body:ct(()=>a[3]||(a[3]=[Me("div",{class:"about-content"},[Me("p",null,[Me("strong",null,"DoodleBUGS"),Et(" is a graphical modeling tool designed to simplify the creation of Bayesian models for analysis with BUGS language -- "),Me("a",{href:"https://github.com/TuringLang/JuliaBUGS.jl",target:"_blank",rel:"noopener noreferrer"},"JuliaBUGS.jl"),Et(". ")]),Me("p",null," Our goal is to provide an intuitive, visual interface for statisticians, researchers, and students to build, understand, and share complex probabilistic models. "),Me("hr"),Me("p",null,[Me("strong",null,"Version:"),Et(" Alpha Phase -- We are just experimenting with things now!")])],-1)])),footer:ct(()=>[Me("button",{onClick:a[0]||(a[0]=i=>r("close")),class:"primary"},"Close")]),_:1},8,["is-open"]))}}),B8=Kr(F8,[["__scopeId","data-v-1155d993"]]),q8={class:"export-options-form"},z8={class:"form-group"},G8={class:"form-group checkbox-group"},H8={class:"form-group"},U8={class:"form-group"},V8={class:"form-group"},W8={key:1,class:"form-group"},$8=Dr({__name:"ExportModal",props:{isOpen:{type:Boolean},exportType:{}},emits:["close","confirm-export"],setup(t,{emit:e}){const r=t,n=e,a=bt({bg:"#ffffff",full:!0,scale:2,quality:.92,maxWidth:"",maxHeight:""});wr(()=>r.isOpen,s=>{s&&(a.value={bg:r.exportType==="png"||r.exportType==="svg"?"transparent":"#ffffff",full:!0,scale:2,quality:.92,maxWidth:"",maxHeight:""})});const i=Gt(()=>r.exportType?`Export as ${r.exportType.toUpperCase()}`:"Export"),o=()=>{const s={bg:a.value.bg,full:a.value.full,scale:a.value.scale};r.exportType==="jpg"&&(s.quality=a.value.quality),a.value.maxWidth&&(s.maxWidth=Number(a.value.maxWidth)),a.value.maxHeight&&(s.maxHeight=Number(a.value.maxHeight)),n("confirm-export",s),n("close")};return(s,u)=>(rt(),ua(Ni,{"is-open":s.isOpen,onClose:u[7]||(u[7]=f=>s.$emit("close"))},{header:ct(()=>[Me("h3",null,ur(i.value),1)]),body:ct(()=>[Me("div",q8,[Me("div",z8,[u[8]||(u[8]=Me("label",{for:"export-bg"},"Background Color:",-1)),st(aa,{id:"export-bg",type:"color",modelValue:a.value.bg,"onUpdate:modelValue":u[0]||(u[0]=f=>a.value.bg=f)},null,8,["modelValue"])]),Me("div",G8,[u[9]||(u[9]=Me("label",{for:"export-full"},"Export Full Graph:",-1)),Vn(Me("input",{id:"export-full",type:"checkbox","onUpdate:modelValue":u[1]||(u[1]=f=>a.value.full=f)},null,512),[[PP,a.value.full]]),u[10]||(u[10]=Me("small",{class:"help-text"},"(Uncheck to export current view only)",-1))]),Me("div",H8,[u[11]||(u[11]=Me("label",{for:"export-scale"},"Scale:",-1)),st(aa,{id:"export-scale",type:"number",modelValue:a.value.scale,"onUpdate:modelValue":u[2]||(u[2]=f=>a.value.scale=f),modelModifiers:{number:!0},min:"0.1",step:"0.1"},null,8,["modelValue"])]),s.exportType==="png"||s.exportType==="jpg"?(rt(),ut(zt,{key:0},[Me("div",U8,[u[12]||(u[12]=Me("label",{for:"export-maxWidth"},"Max Width (optional):",-1)),st(aa,{id:"export-maxWidth",type:"number",modelValue:a.value.maxWidth,"onUpdate:modelValue":u[3]||(u[3]=f=>a.value.maxWidth=f),placeholder:"e.g., 1920"},null,8,["modelValue"])]),Me("div",V8,[u[13]||(u[13]=Me("label",{for:"export-maxHeight"},"Max Height (optional):",-1)),st(aa,{id:"export-maxHeight",type:"number",modelValue:a.value.maxHeight,"onUpdate:modelValue":u[4]||(u[4]=f=>a.value.maxHeight=f),placeholder:"e.g., 1080"},null,8,["modelValue"])])],64)):br("",!0),s.exportType==="jpg"?(rt(),ut("div",W8,[u[14]||(u[14]=Me("label",{for:"export-quality"},"JPG Quality (0 to 1):",-1)),Vn(Me("input",{id:"export-quality",type:"range","onUpdate:modelValue":u[5]||(u[5]=f=>a.value.quality=f),min:"0",max:"1",step:"0.01"},null,512),[[eq,a.value.quality,void 0,{number:!0}]]),Me("span",null,ur(a.value.quality.toFixed(2)),1)])):br("",!0)])]),footer:ct(()=>[st(Xt,{onClick:u[6]||(u[6]=f=>s.$emit("close")),type:"secondary"},{default:ct(()=>u[15]||(u[15]=[Et("Cancel")])),_:1,__:[15]}),st(Xt,{onClick:o,type:"primary"},{default:ct(()=>u[16]||(u[16]=[Et("Export")])),_:1,__:[16]})]),_:1},8,["is-open"]))}}),Y8=Kr($8,[["__scopeId","data-v-01dc89bb"]]),X8={key:0,class:"no-issues"},K8={key:1,class:"issues-list"},j8=["onClick"],Z8={class:"error-details"},Q8={key:0,class:"fas fa-check"},J8={key:1},eY=Dr({__name:"ValidationIssuesModal",props:{isOpen:{type:Boolean},validationErrors:{},elements:{}},emits:["close","select-node"],setup(t,{emit:e}){const r=t,n=e,a=bt(!1),i=Gt(()=>{const f=new Map;for(const c of r.elements)c.type==="node"&&f.set(c.id,c);return f}),o=Gt(()=>{const f=[];for(const[c,h]of r.validationErrors.entries()){const p=i.value.get(c);p&&f.push({nodeId:c,nodeName:p.name,errors:h})}return f.sort((c,h)=>c.nodeName.localeCompare(h.nodeName)),f}),s=f=>{n("select-node",f),n("close")},u=()=>{const f=o.value.map(c=>{const h=c.errors.map(p=>`- ${p.message}`).join(`
`);return`Node: ${c.nodeName}
${h}`}).join(`

`);navigator.clipboard.writeText(f).then(()=>{a.value=!0,setTimeout(()=>{a.value=!1},2e3)}).catch(c=>{console.error("Failed to copy validation logs: ",c),alert("Could not copy logs to clipboard.")})};return(f,c)=>(rt(),ua(Ni,{"is-open":f.isOpen,onClose:c[1]||(c[1]=h=>n("close"))},{header:ct(()=>c[2]||(c[2]=[Me("h3",null,"Model Validation Issues",-1)])),body:ct(()=>[o.value.length===0?(rt(),ut("div",X8,c[3]||(c[3]=[Me("i",{class:"fas fa-check-circle"},null,-1),Me("p",null,"No validation issues found. The model appears to be valid!",-1)]))):(rt(),ut("div",K8,[(rt(!0),ut(zt,null,Bn(o.value,h=>(rt(),ut("div",{key:h.nodeId,class:"issue-item"},[Me("div",{class:"issue-header",onClick:p=>s(h.nodeId),title:"Click to select node"},[Me("strong",null,"Node: "+ur(h.nodeName),1),c[4]||(c[4]=Me("i",{class:"fas fa-crosshairs"},null,-1))],8,j8),Me("ul",Z8,[(rt(!0),ut(zt,null,Bn(h.errors,(p,y)=>(rt(),ut("li",{key:y},ur(p.message),1))),128))])]))),128))]))]),footer:ct(()=>[o.value.length>0?(rt(),ua(Xt,{key:0,onClick:u,type:"secondary"},{default:ct(()=>[a.value?(rt(),ut("i",Q8)):(rt(),ut("span",J8,"Copy Logs"))]),_:1})):br("",!0),st(Xt,{onClick:c[0]||(c[0]=h=>n("close")),type:"primary"},{default:ct(()=>c[5]||(c[5]=[Et("Close")])),_:1,__:[5]})]),_:1},8,["is-open"]))}}),tY=Kr(eY,[["__scopeId","data-v-15f9cbdc"]]),rY=Ec("ui",()=>{const t=bt(localStorage.getItem("doodlebugs-activeRightTab")||"properties"),e=bt(localStorage.getItem("doodlebugs-isRightTabPinned")==="true"),r=bt(parseInt(localStorage.getItem("doodlebugs-leftSidebarWidth")||"330")),n=bt(parseInt(localStorage.getItem("doodlebugs-rightSidebarWidth")||"320"));return wr(t,o=>{localStorage.setItem("doodlebugs-activeRightTab",o)}),wr(e,o=>{localStorage.setItem("doodlebugs-isRightTabPinned",o.toString())}),wr(r,o=>{localStorage.setItem("doodlebugs-leftSidebarWidth",o.toString())}),wr(n,o=>{localStorage.setItem("doodlebugs-rightSidebarWidth",o.toString())}),{activeRightTab:t,isRightTabPinned:e,setActiveRightTab:o=>{t.value=o},toggleRightTabPinned:()=>{e.value=!e.value},leftSidebarWidth:r,rightSidebarWidth:n}}),nY=new Set(["sqrt","log","exp","sin","cos","tan","abs","round","trunc","step","mean","sum","prod","sd","var","min","max","inverse","logdet","logit","probit","cloglog","phi"]);function aY(t,e){const r=bt(new Map),n=()=>{const a=new Map,i=t.value.filter(c=>c.type==="node"),o=t.value.filter(c=>c.type==="edge"),s=new Map(i.map(c=>[c.id,c])),u=new Set(Object.keys(e.value.data)),f=new Set(i.map(c=>c.name));i.forEach(c=>{var y;const h=[];if(c.nodeType==="stochastic"||c.nodeType==="observed"){const g=LO(c.distribution||"");if(g&&g.paramCount!==void 0){let w=o.filter(S=>S.target===c.id).length;const v=[c.param1,c.param2,c.param3].filter(S=>S&&String(S).trim()!==""),C=v.filter(S=>f.has(S)),x=v.length-C.length;w+=x,w!==g.paramCount&&h.push({field:"distribution",message:`Invalid number of inputs. ${g.label} expects ${g.paramCount}, but found ${w}.`})}}if(c.nodeType==="deterministic")if(!((y=c.equation)!=null&&y.trim()))h.push({field:"equation",message:"Deterministic node must have an equation."});else{const g=new Set;let E=c;for(;E!=null&&E.parent;){const C=s.get(E.parent);C&&C.nodeType==="plate"&&C.loopVariable&&g.add(C.loopVariable),E=C}const w=new Set(c.equation.match(/[a-zA-Z_][a-zA-Z0-9_.]*/g)||[]),v=new Set(o.filter(C=>C.target===c.id).map(C=>{var x;return(x=s.get(C.source))==null?void 0:x.name}).filter(C=>!!C));w.forEach(C=>{if(nY.has(C))return;const x=C.split("[")[0];!v.has(x)&&!g.has(x)&&h.push({field:"equation",message:`Variable '${x}' in equation is not a parent or an available loop index.`})})}c.observed&&!u.has(c.name)&&h.push({field:"name",message:`Node is marked as observed, but no data found for '${c.name}'.`});const p=c.name.split("[")[0].trim();/^[a-zA-Z][a-zA-Z0-9.]*$/.test(p)||h.push({field:"name",message:`Base name '${p}' is not a valid BUGS variable name.`}),h.length>0&&a.set(c.id,h)}),r.value=a};return wr([t,e],n,{deep:!0,immediate:!0}),{validateGraph:n,validationErrors:r}}const iY={class:"main-layout"},oY={class:"content-area"},sY={class:"vertical-tabs-container"},lY={class:"graph-editor-wrapper"},uY={class:"tabs-header"},fY={class:"tab-buttons"},cY={class:"tabs-content"},dY={class:"tab-pane"},hY={class:"tab-pane"},vY={class:"tab-pane"},pY=Dr({__name:"MainLayout",setup(t){const e=DO(),r=Mo(),n=rY(),a=od(),{parsedGraphData:i}=Pb(a),{elements:o,selectedElement:s,updateElement:u,deleteElement:f}=sw(),{getCyInstance:c}=ow(),{validateGraph:h,validationErrors:p}=aY(o,i),y=bt("project"),g=bt(!0),E=bt(!0),w=bt("select"),v=bt("stochastic"),C=bt(!0),x=bt(20),S=bt(!1),A=bt(!1),D=bt(!1),_=bt(""),M=bt(!1),k=bt(""),F=bt(!1),G=bt(!1),B=bt(!1),q=bt(null);La(()=>{e.loadProjects(),e.projects.length===0&&(e.createProject("Default Project"),e.currentProjectId&&e.addGraphToProject(e.currentProjectId,"Untitled Graph"));const Ce=localStorage.getItem("doodlebugs-currentGraphId");if(Ce){const ue=e.currentProject;ue&&ue.graphs.some(Ae=>Ae.id===Ce)&&r.selectGraph(Ce)}h()});const R=Gt(()=>{var Ce;return((Ce=e.currentProject)==null?void 0:Ce.name)||null}),P=Gt(()=>{if(e.currentProject&&r.currentGraphId){const Ce=e.currentProject.graphs.find(ue=>ue.id===r.currentGraphId);return(Ce==null?void 0:Ce.name)||null}return null}),N=Ce=>{y.value===Ce&&g.value?g.value=!1:(g.value=!0,y.value=Ce)},I=()=>{g.value=!g.value},z=()=>{E.value=!E.value},ae=Gt(()=>({width:g.value?`${n.leftSidebarWidth}px`:"var(--vertical-tab-width)",transition:S.value?"none":"width 0.3s ease-in-out"})),re=Gt(()=>({width:`${n.leftSidebarWidth-50}px`,opacity:g.value?"1":"0",pointerEvents:g.value?"auto":"none"})),K=Gt(()=>({width:E.value?`${n.rightSidebarWidth}px`:"0",opacity:E.value?"1":"0",pointerEvents:E.value?"auto":"none",borderLeft:E.value?"1px solid var(--color-border)":"none",transition:A.value?"none":"width 0.3s ease-in-out, opacity 0.3s ease-in-out"})),V=()=>{S.value=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",Z),window.addEventListener("mouseup",Y)},Z=Ce=>{if(S.value){const ue=Ce.clientX;n.leftSidebarWidth=Math.max(250,Math.min(ue,600))}},U=()=>{A.value=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",W),window.addEventListener("mouseup",Y)},W=Ce=>{if(A.value){const ue=window.innerWidth-Ce.clientX;n.rightSidebarWidth=Math.max(280,Math.min(ue,600))}},Y=()=>{S.value=!1,A.value=!1,document.body.style.cursor="",document.body.style.userSelect="",window.removeEventListener("mousemove",Z),window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",Y)};Da(()=>{Y()});const ee=Ce=>{s.value=Ce,Ce&&!n.isRightTabPinned&&n.setActiveRightTab("properties")},oe=Ce=>{const ue=o.value.find(Ae=>Ae.id===Ce);if(ue){ee(ue);const Ae=c();Ae&&(Ae.elements().unselect(),Ae.getElementById(Ce).select(),Ae.animate({center:{eles:Ae.getElementById(Ce)},zoom:1.2,duration:500}))}},te=Ce=>{u(Ce)},ie=Ce=>{f(Ce)},se=Ce=>{Ce==="add-edge"?w.value="add-edge":(w.value="add-node",v.value=Ce),g.value=!1},$=()=>{_.value.trim()&&(e.createProject(_.value.trim()),D.value=!1,_.value="",y.value="project",g.value=!0)},ne=()=>{e.currentProject&&k.value.trim()&&(e.addGraphToProject(e.currentProject.id,k.value.trim()),M.value=!1,k.value="")},le=()=>{r.currentGraphId?r.saveGraph(r.currentGraphId,r.graphContents.get(r.currentGraphId)):console.warn("No graph currently selected to save.")},Se=(Ce,ue)=>{const Ae=URL.createObjectURL(Ce),Pe=document.createElement("a");Pe.href=Ae,Pe.download=ue,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),URL.revokeObjectURL(Ae)},De=()=>{if(!r.currentGraphId){alert("Please select a graph to export.");return}const Ce=r.currentGraphElements,ue=JSON.stringify(Ce,null,2),Ae=new Blob([ue],{type:"application/json"}),Pe=`${P.value||"graph"}.json`;Se(Ae,Pe)},be=Ce=>{if(!r.currentGraphId){alert("Please select a graph to export.");return}q.value=Ce,B.value=!0},Te=Ce=>{const ue=c();if(!ue||!q.value)return;const Ae=`${P.value||"graph"}.${q.value}`;try{let Pe;if(q.value==="svg"){const Fe=ue.svg(Ce);Pe=new Blob([Fe],{type:"image/svg+xml;charset=utf-8"})}else q.value==="jpg"?Pe=ue.jpg({...Ce,output:"blob"}):Pe=ue.png({...Ce,output:"blob"});Se(Pe,Ae)}catch(Pe){console.error(`Failed to export ${q.value}:`,Pe),alert("An error occurred while exporting the graph. Please check the console.")}},ve=Ce=>{const ue=c();if(!ue)return;const Ae={name:Ce,animate:!0,padding:50,fit:!0,...Ce==="dagre"&&{rankDir:"TB",spacingFactor:1.2},...Ce==="fcose"&&{idealEdgeLength:120,nodeSeparation:150,nodeRepulsion:4500,quality:"proof"}},Pe=ue.layout(Ae);Pe.on("layoutstop",()=>{ue.nodes().map(Ye=>{const Ve=r.currentGraphElements.find(Qe=>Qe.id===Ye.id()&&Qe.type==="node");return Ve?{...Ve,position:Ye.position()}:null}).filter(Ye=>Ye!==null).forEach(Ye=>u(Ye))}),Pe.run()},de=async Ce=>{if(!e.currentProjectId){alert("Please create or select a project before loading an example.");return}try{const ue="/JuliaBUGS.jl/DoodleBUGS/pr-previews/347/",Ae=`${ue}examples/${Ce}/model.json`,Pe=`${ue}examples/${Ce}/data.json`,[Fe,Ye]=await Promise.all([fetch(Ae),fetch(Pe)]);if(!Fe.ok)throw new Error(`Could not fetch example model: ${Fe.statusText}`);const Ve=await Fe.json(),Qe=e.addGraphToProject(e.currentProjectId,Ve.name);if(Qe&&(r.updateGraphElements(Qe.id,Ve.graphJSON),Ye.ok)){const Xe=await Ye.json();a.currentGraphDataString=JSON.stringify(Xe,null,2)}setTimeout(()=>ve("dagre"),100)}catch(ue){console.error("Failed to load example model:",ue),alert("Failed to load the example model. See console for details.")}},ye=Gt(()=>p.value.size===0);return(Ce,ue)=>(rt(),ut("div",iY,[st(I8,{"project-name":R.value,"active-graph-name":P.value,"is-grid-enabled":C.value,"onUpdate:isGridEnabled":ue[0]||(ue[0]=Ae=>C.value=Ae),"grid-size":x.value,"onUpdate:gridSize":ue[1]||(ue[1]=Ae=>x.value=Ae),"current-mode":w.value,"onUpdate:currentMode":ue[2]||(ue[2]=Ae=>w.value=Ae),"current-node-type":v.value,"onUpdate:currentNodeType":ue[3]||(ue[3]=Ae=>v.value=Ae),"is-left-sidebar-open":g.value,"is-right-sidebar-open":E.value,onToggleLeftSidebar:I,onToggleRightSidebar:z,onNewProject:ue[4]||(ue[4]=Ae=>D.value=!0),onNewGraph:ue[5]||(ue[5]=Ae=>M.value=!0),onSaveCurrentGraph:le,onOpenAboutModal:ue[6]||(ue[6]=Ae=>F.value=!0),onExportJson:De,onOpenExportModal:be,onApplyLayout:ve,onLoadExample:de,onValidateModel:Vt(h),"is-model-valid":ye.value,onShowValidationIssues:ue[7]||(ue[7]=Ae=>G.value=!0)},null,8,["project-name","active-graph-name","is-grid-enabled","grid-size","current-mode","current-node-type","is-left-sidebar-open","is-right-sidebar-open","onValidateModel","is-model-valid"]),Me("div",oY,[Me("aside",{class:"left-sidebar",style:Ci(ae.value)},[Me("div",sY,[Me("button",{class:Kt({active:y.value==="project"}),onClick:ue[8]||(ue[8]=Ae=>N("project")),title:"Project Manager"},[ue[28]||(ue[28]=Me("i",{class:"fas fa-folder"},null,-1)),ue[29]||(ue[29]=Et()),Vn(Me("span",null,"Project",512),[[Ga,g.value]])],2),Me("button",{class:Kt({active:y.value==="palette"}),onClick:ue[9]||(ue[9]=Ae=>N("palette")),title:"Node Palette"},[ue[30]||(ue[30]=Me("i",{class:"fas fa-shapes"},null,-1)),ue[31]||(ue[31]=Et()),Vn(Me("span",null,"Palette",512),[[Ga,g.value]])],2),Me("button",{class:Kt({active:y.value==="data"}),onClick:ue[10]||(ue[10]=Ae=>N("data")),title:"Data Input"},[ue[32]||(ue[32]=Me("i",{class:"fas fa-database"},null,-1)),ue[33]||(ue[33]=Et()),Vn(Me("span",null,"Data",512),[[Ga,g.value]])],2)]),Me("div",{class:"left-sidebar-content",style:Ci(re.value)},[Vn(Me("div",null,[st(x9,{onNewProject:ue[11]||(ue[11]=Ae=>D.value=!0),onNewGraph:ue[12]||(ue[12]=Ae=>M.value=!0)})],512),[[Ga,y.value==="project"]]),Vn(Me("div",null,[st(P9,{onSelectPaletteItem:se})],512),[[Ga,y.value==="palette"]]),Vn(Me("div",null,[st(q9)],512),[[Ga,y.value==="data"]])],4)],4),Me("div",{class:"resizer resizer-left",onMousedown:Ur(V,["prevent"])},null,32),Me("main",lY,[st(e9,{"is-grid-enabled":C.value,"grid-size":x.value,"current-mode":w.value,elements:Vt(o),"current-node-type":v.value,"validation-errors":Vt(p),"onUpdate:currentMode":ue[13]||(ue[13]=Ae=>w.value=Ae),"onUpdate:currentNodeType":ue[14]||(ue[14]=Ae=>v.value=Ae),onElementSelected:ee},null,8,["is-grid-enabled","grid-size","current-mode","elements","current-node-type","validation-errors"])]),Me("div",{class:"resizer resizer-right",onMousedown:Ur(U,["prevent"])},null,32),Me("aside",{class:"right-sidebar",style:Ci(K.value)},[Me("div",uY,[Me("div",fY,[Me("button",{class:Kt({active:Vt(n).activeRightTab==="properties"}),onClick:ue[15]||(ue[15]=Ae=>Vt(n).setActiveRightTab("properties"))},"Properties",2),Me("button",{class:Kt({active:Vt(n).activeRightTab==="code"}),onClick:ue[16]||(ue[16]=Ae=>Vt(n).setActiveRightTab("code"))},"Code",2),Me("button",{class:Kt({active:Vt(n).activeRightTab==="json"}),onClick:ue[17]||(ue[17]=Ae=>Vt(n).setActiveRightTab("json"))},"JSON",2)]),Me("button",{onClick:ue[18]||(ue[18]=Ae=>Vt(n).toggleRightTabPinned()),class:Kt(["pin-button",{pinned:Vt(n).isRightTabPinned}]),title:"Pin Tab"},ue[34]||(ue[34]=[Me("i",{class:"fas fa-thumbtack"},null,-1)]),2)]),Me("div",cY,[Vn(Me("div",dY,[st(n8,{"selected-element":Vt(s),"validation-errors":Vt(p),onUpdateElement:te,onDeleteElement:ie},null,8,["selected-element","validation-errors"])],512),[[Ga,Vt(n).activeRightTab==="properties"]]),Vn(Me("div",hY,[st(c8)],512),[[Ga,Vt(n).activeRightTab==="code"]]),Vn(Me("div",vY,[st(C8)],512),[[Ga,Vt(n).activeRightTab==="json"]])])],4)]),st(Ni,{"is-open":D.value,onClose:ue[21]||(ue[21]=Ae=>D.value=!1)},{header:ct(()=>ue[35]||(ue[35]=[Me("h3",null,"Create New Project",-1)])),body:ct(()=>[ue[36]||(ue[36]=Me("label",{for:"new-project-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"Project Name:",-1)),st(aa,{id:"new-project-name",modelValue:_.value,"onUpdate:modelValue":ue[19]||(ue[19]=Ae=>_.value=Ae),placeholder:"Enter project name",onKeyup:_b($,["enter"])},null,8,["modelValue"])]),footer:ct(()=>[st(Xt,{onClick:ue[20]||(ue[20]=Ae=>D.value=!1),type:"secondary"},{default:ct(()=>ue[37]||(ue[37]=[Et("Cancel")])),_:1,__:[37]}),st(Xt,{onClick:$,type:"primary"},{default:ct(()=>ue[38]||(ue[38]=[Et("Create")])),_:1,__:[38]})]),_:1},8,["is-open"]),st(Ni,{"is-open":M.value,onClose:ue[24]||(ue[24]=Ae=>M.value=!1)},{header:ct(()=>ue[39]||(ue[39]=[Me("h3",null,"Create New Graph",-1)])),body:ct(()=>[ue[40]||(ue[40]=Me("label",{for:"new-graph-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"Graph Name:",-1)),st(aa,{id:"new-graph-name",modelValue:k.value,"onUpdate:modelValue":ue[22]||(ue[22]=Ae=>k.value=Ae),placeholder:"Enter graph name",onKeyup:_b(ne,["enter"])},null,8,["modelValue"])]),footer:ct(()=>[st(Xt,{onClick:ue[23]||(ue[23]=Ae=>M.value=!1),type:"secondary"},{default:ct(()=>ue[41]||(ue[41]=[Et("Cancel")])),_:1,__:[41]}),st(Xt,{onClick:ne,type:"primary"},{default:ct(()=>ue[42]||(ue[42]=[Et("Create")])),_:1,__:[42]})]),_:1},8,["is-open"]),st(B8,{"is-open":F.value,onClose:ue[25]||(ue[25]=Ae=>F.value=!1)},null,8,["is-open"]),st(Y8,{"is-open":B.value,"export-type":q.value,onClose:ue[26]||(ue[26]=Ae=>B.value=!1),onConfirmExport:Te},null,8,["is-open","export-type"]),st(tY,{"is-open":G.value,"validation-errors":Vt(p),elements:Vt(o),onClose:ue[27]||(ue[27]=Ae=>G.value=!1),onSelectNode:oe},null,8,["is-open","validation-errors","elements"])]))}}),gY=Kr(pY,[["__scopeId","data-v-43631e6f"]]),yY=Dr({__name:"App",setup(t){return(e,r)=>(rt(),ua(gY))}}),MO=sq(yY);MO.use(fq());MO.mount("#app");
