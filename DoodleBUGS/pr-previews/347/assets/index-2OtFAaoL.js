(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();/**
* @vue/shared v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function t1(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const ar={},hs=[],Aa=()=>{},MI=()=>!1,uc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),r1=t=>t.startsWith("onUpdate:"),Yr=Object.assign,n1=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},RI=Object.prototype.hasOwnProperty,Vt=(t,e)=>RI.call(t,e),wt=Array.isArray,vs=t=>ru(t)==="[object Map]",fc=t=>ru(t)==="[object Set]",uE=t=>ru(t)==="[object Date]",St=t=>typeof t=="function",Tr=t=>typeof t=="string",la=t=>typeof t=="symbol",tr=t=>t!==null&&typeof t=="object",bR=t=>(tr(t)||St(t))&&St(t.then)&&St(t.catch),wR=Object.prototype.toString,ru=t=>wR.call(t),PI=t=>ru(t).slice(8,-1),xR=t=>ru(t)==="[object Object]",a1=t=>Tr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Dl=t1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cc=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},kI=/-(\w)/g,Ai=cc(t=>t.replace(kI,(e,r)=>r?r.toUpperCase():"")),NI=/\B([A-Z])/g,Ii=cc(t=>t.replace(NI,"-$1").toLowerCase()),ER=cc(t=>t.charAt(0).toUpperCase()+t.slice(1)),eh=cc(t=>t?`on${ER(t)}`:""),Ei=(t,e)=>!Object.is(t,e),mf=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},CR=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},mb=t=>{const e=parseFloat(t);return isNaN(e)?t:e},OI=t=>{const e=Tr(t)?Number(t):NaN;return isNaN(e)?t:e};let fE;const dc=()=>fE||(fE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ci(t){if(wt(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],a=Tr(n)?qI(n):Ci(n);if(a)for(const i in a)e[i]=a[i]}return e}else if(Tr(t)||tr(t))return t}const II=/;(?![^(]*\))/g,FI=/:([^]+)/,BI=/\/\*[^]*?\*\//g;function qI(t){const e={};return t.replace(BI,"").split(II).forEach(r=>{if(r){const n=r.split(FI);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function jt(t){let e="";if(Tr(t))e=t;else if(wt(t))for(let r=0;r<t.length;r++){const n=jt(t[r]);n&&(e+=n+" ")}else if(tr(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const zI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",GI=t1(zI);function TR(t){return!!t||t===""}function HI(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=hc(t[n],e[n]);return r}function hc(t,e){if(t===e)return!0;let r=uE(t),n=uE(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=la(t),n=la(e),r||n)return t===e;if(r=wt(t),n=wt(e),r||n)return r&&n?HI(t,e):!1;if(r=tr(t),n=tr(e),r||n){if(!r||!n)return!1;const a=Object.keys(t).length,i=Object.keys(e).length;if(a!==i)return!1;for(const o in t){const s=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(s&&!u||!s&&u||!hc(t[o],e[o]))return!1}}return String(t)===String(e)}function SR(t,e){return t.findIndex(r=>hc(r,e))}const AR=t=>!!(t&&t.__v_isRef===!0),Kt=t=>Tr(t)?t:t==null?"":wt(t)||tr(t)&&(t.toString===wR||!St(t.toString))?AR(t)?Kt(t.value):JSON.stringify(t,LR,2):String(t),LR=(t,e)=>AR(e)?LR(t,e.value):vs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,a],i)=>(r[th(n,i)+" =>"]=a,r),{})}:fc(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>th(r))}:la(e)?th(e):tr(e)&&!wt(e)&&!xR(e)?String(e):e,th=(t,e="")=>{var r;return la(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fn;class DR{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fn,!e&&fn&&(this.index=(fn.scopes||(fn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=fn;try{return fn=this,e()}finally{fn=r}}}on(){++this._on===1&&(this.prevScope=fn,fn=this)}off(){this._on>0&&--this._on===0&&(fn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function _R(t){return new DR(t)}function MR(){return fn}function UI(t,e=!1){fn&&fn.cleanups.push(t)}let sr;const rh=new WeakSet;class RR{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fn&&fn.active&&fn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,rh.has(this)&&(rh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||kR(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cE(this),NR(this);const e=sr,r=oa;sr=this,oa=!0;try{return this.fn()}finally{OR(this),sr=e,oa=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)s1(e);this.deps=this.depsTail=void 0,cE(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?rh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){bb(this)&&this.run()}get dirty(){return bb(this)}}let PR=0,_l,Ml;function kR(t,e=!1){if(t.flags|=8,e){t.next=Ml,Ml=t;return}t.next=_l,_l=t}function i1(){PR++}function o1(){if(--PR>0)return;if(Ml){let e=Ml;for(Ml=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;_l;){let e=_l;for(_l=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function NR(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function OR(t){let e,r=t.depsTail,n=r;for(;n;){const a=n.prevDep;n.version===-1?(n===r&&(r=a),s1(n),VI(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=a}t.deps=e,t.depsTail=r}function bb(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(IR(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function IR(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Bl)||(t.globalVersion=Bl,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!bb(t))))return;t.flags|=2;const e=t.dep,r=sr,n=oa;sr=t,oa=!0;try{NR(t);const a=t.fn(t._value);(e.version===0||Ei(a,t._value))&&(t.flags|=128,t._value=a,e.version++)}catch(a){throw e.version++,a}finally{sr=r,oa=n,OR(t),t.flags&=-3}}function s1(t,e=!1){const{dep:r,prevSub:n,nextSub:a}=t;if(n&&(n.nextSub=a,t.prevSub=void 0),a&&(a.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)s1(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function VI(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let oa=!0;const FR=[];function ja(){FR.push(oa),oa=!1}function Za(){const t=FR.pop();oa=t===void 0?!0:t}function cE(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=sr;sr=void 0;try{e()}finally{sr=r}}}let Bl=0;class WI{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class l1{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!sr||!oa||sr===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==sr)r=this.activeLink=new WI(sr,this),sr.deps?(r.prevDep=sr.depsTail,sr.depsTail.nextDep=r,sr.depsTail=r):sr.deps=sr.depsTail=r,BR(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=sr.depsTail,r.nextDep=void 0,sr.depsTail.nextDep=r,sr.depsTail=r,sr.deps===r&&(sr.deps=n)}return r}trigger(e){this.version++,Bl++,this.notify(e)}notify(e){i1();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{o1()}}}function BR(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)BR(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const Bf=new WeakMap,yo=Symbol(""),wb=Symbol(""),ql=Symbol("");function cn(t,e,r){if(oa&&sr){let n=Bf.get(t);n||Bf.set(t,n=new Map);let a=n.get(r);a||(n.set(r,a=new l1),a.map=n,a.key=r),a.track()}}function $a(t,e,r,n,a,i){const o=Bf.get(t);if(!o){Bl++;return}const s=u=>{u&&u.trigger()};if(i1(),e==="clear")o.forEach(s);else{const u=wt(t),f=u&&a1(r);if(u&&r==="length"){const c=Number(n);o.forEach((h,g)=>{(g==="length"||g===ql||!la(g)&&g>=c)&&s(h)})}else switch((r!==void 0||o.has(void 0))&&s(o.get(r)),f&&s(o.get(ql)),e){case"add":u?f&&s(o.get("length")):(s(o.get(yo)),vs(t)&&s(o.get(wb)));break;case"delete":u||(s(o.get(yo)),vs(t)&&s(o.get(wb)));break;case"set":vs(t)&&s(o.get(yo));break}}o1()}function $I(t,e){const r=Bf.get(t);return r&&r.get(e)}function Qo(t){const e=Ot(t);return e===t?e:(cn(e,"iterate",ql),Xn(t)?e:e.map(Jr))}function vc(t){return cn(t=Ot(t),"iterate",ql),t}const YI={__proto__:null,[Symbol.iterator](){return nh(this,Symbol.iterator,Jr)},concat(...t){return Qo(this).concat(...t.map(e=>wt(e)?Qo(e):e))},entries(){return nh(this,"entries",t=>(t[1]=Jr(t[1]),t))},every(t,e){return za(this,"every",t,e,void 0,arguments)},filter(t,e){return za(this,"filter",t,e,r=>r.map(Jr),arguments)},find(t,e){return za(this,"find",t,e,Jr,arguments)},findIndex(t,e){return za(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return za(this,"findLast",t,e,Jr,arguments)},findLastIndex(t,e){return za(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return za(this,"forEach",t,e,void 0,arguments)},includes(...t){return ah(this,"includes",t)},indexOf(...t){return ah(this,"indexOf",t)},join(t){return Qo(this).join(t)},lastIndexOf(...t){return ah(this,"lastIndexOf",t)},map(t,e){return za(this,"map",t,e,void 0,arguments)},pop(){return cl(this,"pop")},push(...t){return cl(this,"push",t)},reduce(t,...e){return dE(this,"reduce",t,e)},reduceRight(t,...e){return dE(this,"reduceRight",t,e)},shift(){return cl(this,"shift")},some(t,e){return za(this,"some",t,e,void 0,arguments)},splice(...t){return cl(this,"splice",t)},toReversed(){return Qo(this).toReversed()},toSorted(t){return Qo(this).toSorted(t)},toSpliced(...t){return Qo(this).toSpliced(...t)},unshift(...t){return cl(this,"unshift",t)},values(){return nh(this,"values",Jr)}};function nh(t,e,r){const n=vc(t),a=n[e]();return n!==t&&!Xn(t)&&(a._next=a.next,a.next=()=>{const i=a._next();return i.value&&(i.value=r(i.value)),i}),a}const XI=Array.prototype;function za(t,e,r,n,a,i){const o=vc(t),s=o!==t&&!Xn(t),u=o[e];if(u!==XI[e]){const h=u.apply(t,i);return s?Jr(h):h}let f=r;o!==t&&(s?f=function(h,g){return r.call(this,Jr(h),g,t)}:r.length>2&&(f=function(h,g){return r.call(this,h,g,t)}));const c=u.call(o,f,n);return s&&a?a(c):c}function dE(t,e,r,n){const a=vc(t);let i=r;return a!==t&&(Xn(t)?r.length>3&&(i=function(o,s,u){return r.call(this,o,s,u,t)}):i=function(o,s,u){return r.call(this,o,Jr(s),u,t)}),a[e](i,...n)}function ah(t,e,r){const n=Ot(t);cn(n,"iterate",ql);const a=n[e](...r);return(a===-1||a===!1)&&c1(r[0])?(r[0]=Ot(r[0]),n[e](...r)):a}function cl(t,e,r=[]){ja(),i1();const n=Ot(t)[e].apply(t,r);return o1(),Za(),n}const KI=t1("__proto__,__v_isRef,__isVue"),qR=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(la));function jI(t){la(t)||(t=String(t));const e=Ot(this);return cn(e,"has",t),e.hasOwnProperty(t)}class zR{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const a=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(a?i?oF:VR:i?UR:HR).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=wt(e);if(!a){let u;if(o&&(u=YI[r]))return u;if(r==="hasOwnProperty")return jI}const s=Reflect.get(e,r,mr(e)?e:n);return(la(r)?qR.has(r):KI(r))||(a||cn(e,"get",r),i)?s:mr(s)?o&&a1(r)?s:s.value:tr(s)?a?WR(s):pc(s):s}}class GR extends zR{constructor(e=!1){super(!1,e)}set(e,r,n,a){let i=e[r];if(!this._isShallow){const u=Li(i);if(!Xn(n)&&!Li(n)&&(i=Ot(i),n=Ot(n)),!wt(e)&&mr(i)&&!mr(n))return u?!1:(i.value=n,!0)}const o=wt(e)&&a1(r)?Number(r)<e.length:Vt(e,r),s=Reflect.set(e,r,n,mr(e)?e:a);return e===Ot(a)&&(o?Ei(n,i)&&$a(e,"set",r,n):$a(e,"add",r,n)),s}deleteProperty(e,r){const n=Vt(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&n&&$a(e,"delete",r,void 0),a}has(e,r){const n=Reflect.has(e,r);return(!la(r)||!qR.has(r))&&cn(e,"has",r),n}ownKeys(e){return cn(e,"iterate",wt(e)?"length":yo),Reflect.ownKeys(e)}}class ZI extends zR{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const QI=new GR,JI=new ZI,eF=new GR(!0);const xb=t=>t,Qu=t=>Reflect.getPrototypeOf(t);function tF(t,e,r){return function(...n){const a=this.__v_raw,i=Ot(a),o=vs(i),s=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,f=a[t](...n),c=r?xb:e?qf:Jr;return!e&&cn(i,"iterate",u?wb:yo),{next(){const{value:h,done:g}=f.next();return g?{value:h,done:g}:{value:s?[c(h[0]),c(h[1])]:c(h),done:g}},[Symbol.iterator](){return this}}}}function Ju(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function rF(t,e){const r={get(a){const i=this.__v_raw,o=Ot(i),s=Ot(a);t||(Ei(a,s)&&cn(o,"get",a),cn(o,"get",s));const{has:u}=Qu(o),f=e?xb:t?qf:Jr;if(u.call(o,a))return f(i.get(a));if(u.call(o,s))return f(i.get(s));i!==o&&i.get(a)},get size(){const a=this.__v_raw;return!t&&cn(Ot(a),"iterate",yo),Reflect.get(a,"size",a)},has(a){const i=this.__v_raw,o=Ot(i),s=Ot(a);return t||(Ei(a,s)&&cn(o,"has",a),cn(o,"has",s)),a===s?i.has(a):i.has(a)||i.has(s)},forEach(a,i){const o=this,s=o.__v_raw,u=Ot(s),f=e?xb:t?qf:Jr;return!t&&cn(u,"iterate",yo),s.forEach((c,h)=>a.call(i,f(c),f(h),o))}};return Yr(r,t?{add:Ju("add"),set:Ju("set"),delete:Ju("delete"),clear:Ju("clear")}:{add(a){!e&&!Xn(a)&&!Li(a)&&(a=Ot(a));const i=Ot(this);return Qu(i).has.call(i,a)||(i.add(a),$a(i,"add",a,a)),this},set(a,i){!e&&!Xn(i)&&!Li(i)&&(i=Ot(i));const o=Ot(this),{has:s,get:u}=Qu(o);let f=s.call(o,a);f||(a=Ot(a),f=s.call(o,a));const c=u.call(o,a);return o.set(a,i),f?Ei(i,c)&&$a(o,"set",a,i):$a(o,"add",a,i),this},delete(a){const i=Ot(this),{has:o,get:s}=Qu(i);let u=o.call(i,a);u||(a=Ot(a),u=o.call(i,a)),s&&s.call(i,a);const f=i.delete(a);return u&&$a(i,"delete",a,void 0),f},clear(){const a=Ot(this),i=a.size!==0,o=a.clear();return i&&$a(a,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=tF(a,t,e)}),r}function u1(t,e){const r=rF(t,e);return(n,a,i)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?n:Reflect.get(Vt(r,a)&&a in n?r:n,a,i)}const nF={get:u1(!1,!1)},aF={get:u1(!1,!0)},iF={get:u1(!0,!1)};const HR=new WeakMap,UR=new WeakMap,VR=new WeakMap,oF=new WeakMap;function sF(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lF(t){return t.__v_skip||!Object.isExtensible(t)?0:sF(PI(t))}function pc(t){return Li(t)?t:f1(t,!1,QI,nF,HR)}function uF(t){return f1(t,!1,eF,aF,UR)}function WR(t){return f1(t,!0,JI,iF,VR)}function f1(t,e,r,n,a){if(!tr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=lF(t);if(i===0)return t;const o=a.get(t);if(o)return o;const s=new Proxy(t,i===2?n:r);return a.set(t,s),s}function Ka(t){return Li(t)?Ka(t.__v_raw):!!(t&&t.__v_isReactive)}function Li(t){return!!(t&&t.__v_isReadonly)}function Xn(t){return!!(t&&t.__v_isShallow)}function c1(t){return t?!!t.__v_raw:!1}function Ot(t){const e=t&&t.__v_raw;return e?Ot(e):t}function d1(t){return!Vt(t,"__v_skip")&&Object.isExtensible(t)&&CR(t,"__v_skip",!0),t}const Jr=t=>tr(t)?pc(t):t,qf=t=>tr(t)?WR(t):t;function mr(t){return t?t.__v_isRef===!0:!1}function bt(t){return fF(t,!1)}function fF(t,e){return mr(t)?t:new cF(t,e)}class cF{constructor(e,r){this.dep=new l1,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Ot(e),this._value=r?e:Jr(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Xn(e)||Li(e);e=n?e:Ot(e),Ei(e,r)&&(this._rawValue=e,this._value=n?e:Jr(e),this.dep.trigger())}}function Nt(t){return mr(t)?t.value:t}const dF={get:(t,e,r)=>e==="__v_raw"?t:Nt(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const a=t[e];return mr(a)&&!mr(r)?(a.value=r,!0):Reflect.set(t,e,r,n)}};function $R(t){return Ka(t)?t:new Proxy(t,dF)}function hF(t){const e=wt(t)?new Array(t.length):{};for(const r in t)e[r]=YR(t,r);return e}class vF{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return $I(Ot(this._object),this._key)}}class pF{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function gF(t,e,r){return mr(t)?t:St(t)?new pF(t):tr(t)&&arguments.length>1?YR(t,e,r):bt(t)}function YR(t,e,r){const n=t[e];return mr(n)?n:new vF(t,e,r)}class yF{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new l1(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Bl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&sr!==this)return kR(this,!0),!0}get value(){const e=this.dep.track();return IR(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function mF(t,e,r=!1){let n,a;return St(t)?n=t:(n=t.get,a=t.set),new yF(n,a,r)}const ef={},zf=new WeakMap;let so;function bF(t,e=!1,r=so){if(r){let n=zf.get(r);n||zf.set(r,n=[]),n.push(t)}}function wF(t,e,r=ar){const{immediate:n,deep:a,once:i,scheduler:o,augmentJob:s,call:u}=r,f=T=>a?T:Xn(T)||a===!1||a===0?Ya(T,1):Ya(T);let c,h,g,y,p=!1,C=!1;if(mr(t)?(h=()=>t.value,p=Xn(t)):Ka(t)?(h=()=>f(t),p=!0):wt(t)?(C=!0,p=t.some(T=>Ka(T)||Xn(T)),h=()=>t.map(T=>{if(mr(T))return T.value;if(Ka(T))return f(T);if(St(T))return u?u(T,2):T()})):St(t)?e?h=u?()=>u(t,2):t:h=()=>{if(g){ja();try{g()}finally{Za()}}const T=so;so=c;try{return u?u(t,3,[y]):t(y)}finally{so=T}}:h=Aa,e&&a){const T=h,A=a===!0?1/0:a;h=()=>Ya(T(),A)}const E=MR(),v=()=>{c.stop(),E&&E.active&&n1(E.effects,c)};if(i&&e){const T=e;e=(...A)=>{T(...A),v()}}let x=C?new Array(t.length).fill(ef):ef;const w=T=>{if(!(!(c.flags&1)||!c.dirty&&!T))if(e){const A=c.run();if(a||p||(C?A.some((M,D)=>Ei(M,x[D])):Ei(A,x))){g&&g();const M=so;so=c;try{const D=[A,x===ef?void 0:C&&x[0]===ef?[]:x,y];x=A,u?u(e,3,D):e(...D)}finally{so=M}}}else c.run()};return s&&s(w),c=new RR(h),c.scheduler=o?()=>o(w,!1):w,y=T=>bF(T,!1,c),g=c.onStop=()=>{const T=zf.get(c);if(T){if(u)u(T,4);else for(const A of T)A();zf.delete(c)}},e?n?w(!0):x=c.run():o?o(w.bind(null,!0),!0):c.run(),v.pause=c.pause.bind(c),v.resume=c.resume.bind(c),v.stop=v,v}function Ya(t,e=1/0,r){if(e<=0||!tr(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,mr(t))Ya(t.value,e,r);else if(wt(t))for(let n=0;n<t.length;n++)Ya(t[n],e,r);else if(fc(t)||vs(t))t.forEach(n=>{Ya(n,e,r)});else if(xR(t)){for(const n in t)Ya(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Ya(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nu(t,e,r,n){try{return n?t(...n):t()}catch(a){gc(a,e,r)}}function ua(t,e,r,n){if(St(t)){const a=nu(t,e,r,n);return a&&bR(a)&&a.catch(i=>{gc(i,e,r)}),a}if(wt(t)){const a=[];for(let i=0;i<t.length;i++)a.push(ua(t[i],e,r,n));return a}}function gc(t,e,r,n=!0){const a=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ar;if(e){let s=e.parent;const u=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${r}`;for(;s;){const c=s.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,u,f)===!1)return}s=s.parent}if(i){ja(),nu(i,null,10,[t,u,f]),Za();return}}xF(t,r,a,n,o)}function xF(t,e,r,n=!0,a=!1){if(a)throw t;console.error(t)}const Sn=[];let Ca=-1;const ps=[];let mi=null,ls=0;const XR=Promise.resolve();let Gf=null;function Kn(t){const e=Gf||XR;return t?e.then(this?t.bind(this):t):e}function EF(t){let e=Ca+1,r=Sn.length;for(;e<r;){const n=e+r>>>1,a=Sn[n],i=zl(a);i<t||i===t&&a.flags&2?e=n+1:r=n}return e}function h1(t){if(!(t.flags&1)){const e=zl(t),r=Sn[Sn.length-1];!r||!(t.flags&2)&&e>=zl(r)?Sn.push(t):Sn.splice(EF(e),0,t),t.flags|=1,KR()}}function KR(){Gf||(Gf=XR.then(ZR))}function CF(t){wt(t)?ps.push(...t):mi&&t.id===-1?mi.splice(ls+1,0,t):t.flags&1||(ps.push(t),t.flags|=1),KR()}function hE(t,e,r=Ca+1){for(;r<Sn.length;r++){const n=Sn[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Sn.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function jR(t){if(ps.length){const e=[...new Set(ps)].sort((r,n)=>zl(r)-zl(n));if(ps.length=0,mi){mi.push(...e);return}for(mi=e,ls=0;ls<mi.length;ls++){const r=mi[ls];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}mi=null,ls=0}}const zl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ZR(t){try{for(Ca=0;Ca<Sn.length;Ca++){const e=Sn[Ca];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),nu(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ca<Sn.length;Ca++){const e=Sn[Ca];e&&(e.flags&=-2)}Ca=-1,Sn.length=0,jR(),Gf=null,(Sn.length||ps.length)&&ZR()}}let Wr=null,QR=null;function Hf(t){const e=Wr;return Wr=t,QR=t&&t.type.__scopeId||null,e}function ft(t,e=Wr,r){if(!e||t._n)return t;const n=(...a)=>{n._d&&CE(-1);const i=Hf(e);let o;try{o=t(...a)}finally{Hf(i),n._d&&CE(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Vn(t,e){if(Wr===null)return t;const r=xc(Wr),n=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[i,o,s,u=ar]=e[a];i&&(St(i)&&(i={mounted:i,updated:i}),i.deep&&Ya(o),n.push({dir:i,instance:r,value:o,oldValue:void 0,arg:s,modifiers:u}))}return t}function eo(t,e,r,n){const a=t.dirs,i=e&&e.dirs;for(let o=0;o<a.length;o++){const s=a[o];i&&(s.oldValue=i[o].value);let u=s.dir[n];u&&(ja(),ua(u,r,8,[t.el,s,t,e]),Za())}}const TF=Symbol("_vte"),JR=t=>t.__isTeleport,bi=Symbol("_leaveCb"),tf=Symbol("_enterCb");function SF(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Da(()=>{t.isMounted=!0}),sP(()=>{t.isUnmounting=!0}),t}const Hn=[Function,Array],eP={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Hn,onEnter:Hn,onAfterEnter:Hn,onEnterCancelled:Hn,onBeforeLeave:Hn,onLeave:Hn,onAfterLeave:Hn,onLeaveCancelled:Hn,onBeforeAppear:Hn,onAppear:Hn,onAfterAppear:Hn,onAppearCancelled:Hn},tP=t=>{const e=t.subTree;return e.component?tP(e.component):e},AF={name:"BaseTransition",props:eP,setup(t,{slots:e}){const r=EB(),n=SF();return()=>{const a=e.default&&aP(e.default(),!0);if(!a||!a.length)return;const i=rP(a),o=Ot(t),{mode:s}=o;if(n.isLeaving)return ih(i);const u=vE(i);if(!u)return ih(i);let f=Eb(u,o,n,r,h=>f=h);u.type!==dn&&Gl(u,f);let c=r.subTree&&vE(r.subTree);if(c&&c.type!==dn&&!co(u,c)&&tP(r).type!==dn){let h=Eb(c,o,n,r);if(Gl(c,h),s==="out-in"&&u.type!==dn)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave,c=void 0},ih(i);s==="in-out"&&u.type!==dn?h.delayLeave=(g,y,p)=>{const C=nP(n,c);C[String(c.key)]=c,g[bi]=()=>{y(),g[bi]=void 0,delete f.delayedLeave,c=void 0},f.delayedLeave=()=>{p(),delete f.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function rP(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==dn){e=r;break}}return e}const LF=AF;function nP(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function Eb(t,e,r,n,a){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:g,onLeave:y,onAfterLeave:p,onLeaveCancelled:C,onBeforeAppear:E,onAppear:v,onAfterAppear:x,onAppearCancelled:w}=e,T=String(t.key),A=nP(r,t),M=(k,F)=>{k&&ua(k,n,9,F)},D=(k,F)=>{const G=F[1];M(k,F),wt(k)?k.every(B=>B.length<=1)&&G():k.length<=1&&G()},_={mode:o,persisted:s,beforeEnter(k){let F=u;if(!r.isMounted)if(i)F=E||u;else return;k[bi]&&k[bi](!0);const G=A[T];G&&co(t,G)&&G.el[bi]&&G.el[bi](),M(F,[k])},enter(k){let F=f,G=c,B=h;if(!r.isMounted)if(i)F=v||f,G=x||c,B=w||h;else return;let q=!1;const R=k[tf]=P=>{q||(q=!0,P?M(B,[k]):M(G,[k]),_.delayedLeave&&_.delayedLeave(),k[tf]=void 0)};F?D(F,[k,R]):R()},leave(k,F){const G=String(t.key);if(k[tf]&&k[tf](!0),r.isUnmounting)return F();M(g,[k]);let B=!1;const q=k[bi]=R=>{B||(B=!0,F(),R?M(C,[k]):M(p,[k]),k[bi]=void 0,A[G]===t&&delete A[G])};A[G]=t,y?D(y,[k,q]):q()},clone(k){const F=Eb(k,e,r,n,a);return a&&a(F),F}};return _}function ih(t){if(yc(t))return t=Di(t),t.children=null,t}function vE(t){if(!yc(t))return JR(t.type)&&t.children?rP(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&St(r.default))return r.default()}}function Gl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Gl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function aP(t,e=!1,r){let n=[],a=0;for(let i=0;i<t.length;i++){let o=t[i];const s=r==null?o.key:String(r)+String(o.key!=null?o.key:i);o.type===Yt?(o.patchFlag&128&&a++,n=n.concat(aP(o.children,e,s))):(e||o.type!==dn)&&n.push(s!=null?Di(o,{key:s}):o)}if(a>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Dr(t,e){return St(t)?Yr({name:t.name},e,{setup:t}):t}function iP(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Uf(t,e,r,n,a=!1){if(wt(t)){t.forEach((p,C)=>Uf(p,e&&(wt(e)?e[C]:e),r,n,a));return}if(gs(n)&&!a){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Uf(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?xc(n.component):n.el,o=a?null:i,{i:s,r:u}=t,f=e&&e.r,c=s.refs===ar?s.refs={}:s.refs,h=s.setupState,g=Ot(h),y=h===ar?()=>!1:p=>Vt(g,p);if(f!=null&&f!==u&&(Tr(f)?(c[f]=null,y(f)&&(h[f]=null)):mr(f)&&(f.value=null)),St(u))nu(u,s,12,[o,c]);else{const p=Tr(u),C=mr(u);if(p||C){const E=()=>{if(t.f){const v=p?y(u)?h[u]:c[u]:u.value;a?wt(v)&&n1(v,i):wt(v)?v.includes(i)||v.push(i):p?(c[u]=[i],y(u)&&(h[u]=c[u])):(u.value=[i],t.k&&(c[t.k]=u.value))}else p?(c[u]=o,y(u)&&(h[u]=o)):C&&(u.value=o,t.k&&(c[t.k]=o))};o?(E.id=-1,In(E,r)):E()}}}dc().requestIdleCallback;dc().cancelIdleCallback;const gs=t=>!!t.type.__asyncLoader,yc=t=>t.type.__isKeepAlive;function DF(t,e){oP(t,"a",e)}function _F(t,e){oP(t,"da",e)}function oP(t,e,r=en){const n=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(mc(e,n,r),r){let a=r.parent;for(;a&&a.parent;)yc(a.parent.vnode)&&MF(n,e,r,a),a=a.parent}}function MF(t,e,r,n){const a=mc(e,t,n,!0);_a(()=>{n1(n[e],a)},r)}function mc(t,e,r=en,n=!1){if(r){const a=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...o)=>{ja();const s=au(r),u=ua(e,r,t,o);return s(),Za(),u});return n?a.unshift(i):a.push(i),i}}const ei=t=>(e,r=en)=>{(!Vl||t==="sp")&&mc(t,(...n)=>e(...n),r)},RF=ei("bm"),Da=ei("m"),PF=ei("bu"),kF=ei("u"),sP=ei("bum"),_a=ei("um"),NF=ei("sp"),OF=ei("rtg"),IF=ei("rtc");function FF(t,e=en){mc("ec",t,e)}const BF=Symbol.for("v-ndc");function Bn(t,e,r,n){let a;const i=r,o=wt(t);if(o||Tr(t)){const s=o&&Ka(t);let u=!1,f=!1;s&&(u=!Xn(t),f=Li(t),t=vc(t)),a=new Array(t.length);for(let c=0,h=t.length;c<h;c++)a[c]=e(u?f?qf(Jr(t[c])):Jr(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){a=new Array(t);for(let s=0;s<t;s++)a[s]=e(s+1,s,void 0,i)}else if(tr(t))if(t[Symbol.iterator])a=Array.from(t,(s,u)=>e(s,u,void 0,i));else{const s=Object.keys(t);a=new Array(s.length);for(let u=0,f=s.length;u<f;u++){const c=s[u];a[u]=e(t[c],c,u,i)}}else a=[];return a}function ys(t,e,r={},n,a){if(Wr.ce||Wr.parent&&gs(Wr.parent)&&Wr.parent.ce)return e!=="default"&&(r.name=e),Je(),fa(Yt,null,[at("slot",r,n)],64);let i=t[e];i&&i._c&&(i._d=!1),Je();const o=i&&lP(i(r)),s=r.key||o&&o.key,u=fa(Yt,{key:(s&&!la(s)?s:`_${e}`)+""},o||[],o&&t._===1?64:-2);return!a&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),i&&i._c&&(i._d=!0),u}function lP(t){return t.some(e=>Ul(e)?!(e.type===dn||e.type===Yt&&!lP(e.children)):!0)?t:null}const Cb=t=>t?DP(t)?xc(t):Cb(t.parent):null,Rl=Yr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Cb(t.parent),$root:t=>Cb(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>fP(t),$forceUpdate:t=>t.f||(t.f=()=>{h1(t.update)}),$nextTick:t=>t.n||(t.n=Kn.bind(t.proxy)),$watch:t=>sB.bind(t)}),oh=(t,e)=>t!==ar&&!t.__isScriptSetup&&Vt(t,e),qF={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:a,props:i,accessCache:o,type:s,appContext:u}=t;let f;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return n[e];case 2:return a[e];case 4:return r[e];case 3:return i[e]}else{if(oh(n,e))return o[e]=1,n[e];if(a!==ar&&Vt(a,e))return o[e]=2,a[e];if((f=t.propsOptions[0])&&Vt(f,e))return o[e]=3,i[e];if(r!==ar&&Vt(r,e))return o[e]=4,r[e];Tb&&(o[e]=0)}}const c=Rl[e];let h,g;if(c)return e==="$attrs"&&cn(t.attrs,"get",""),c(t);if((h=s.__cssModules)&&(h=h[e]))return h;if(r!==ar&&Vt(r,e))return o[e]=4,r[e];if(g=u.config.globalProperties,Vt(g,e))return g[e]},set({_:t},e,r){const{data:n,setupState:a,ctx:i}=t;return oh(a,e)?(a[e]=r,!0):n!==ar&&Vt(n,e)?(n[e]=r,!0):Vt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:a,propsOptions:i}},o){let s;return!!r[o]||t!==ar&&Vt(t,o)||oh(e,o)||(s=i[0])&&Vt(s,o)||Vt(n,o)||Vt(Rl,o)||Vt(a.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Vt(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function pE(t){return wt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Tb=!0;function zF(t){const e=fP(t),r=t.proxy,n=t.ctx;Tb=!1,e.beforeCreate&&gE(e.beforeCreate,t,"bc");const{data:a,computed:i,methods:o,watch:s,provide:u,inject:f,created:c,beforeMount:h,mounted:g,beforeUpdate:y,updated:p,activated:C,deactivated:E,beforeDestroy:v,beforeUnmount:x,destroyed:w,unmounted:T,render:A,renderTracked:M,renderTriggered:D,errorCaptured:_,serverPrefetch:k,expose:F,inheritAttrs:G,components:B,directives:q,filters:R}=e;if(f&&GF(f,n,null),o)for(const I in o){const z=o[I];St(z)&&(n[I]=z.bind(r))}if(a){const I=a.call(r,r);tr(I)&&(t.data=pc(I))}if(Tb=!0,i)for(const I in i){const z=i[I],ae=St(z)?z.bind(r,r):St(z.get)?z.get.bind(r,r):Aa,re=!St(z)&&St(z.set)?z.set.bind(r):Aa,K=Ft({get:ae,set:re});Object.defineProperty(n,I,{enumerable:!0,configurable:!0,get:()=>K.value,set:V=>K.value=V})}if(s)for(const I in s)uP(s[I],n,r,I);if(u){const I=St(u)?u.call(r):u;Reflect.ownKeys(I).forEach(z=>{YF(z,I[z])})}c&&gE(c,t,"c");function N(I,z){wt(z)?z.forEach(ae=>I(ae.bind(r))):z&&I(z.bind(r))}if(N(RF,h),N(Da,g),N(PF,y),N(kF,p),N(DF,C),N(_F,E),N(FF,_),N(IF,M),N(OF,D),N(sP,x),N(_a,T),N(NF,k),wt(F))if(F.length){const I=t.exposed||(t.exposed={});F.forEach(z=>{Object.defineProperty(I,z,{get:()=>r[z],set:ae=>r[z]=ae})})}else t.exposed||(t.exposed={});A&&t.render===Aa&&(t.render=A),G!=null&&(t.inheritAttrs=G),B&&(t.components=B),q&&(t.directives=q),k&&iP(t)}function GF(t,e,r=Aa){wt(t)&&(t=Sb(t));for(const n in t){const a=t[n];let i;tr(a)?"default"in a?i=Pl(a.from||n,a.default,!0):i=Pl(a.from||n):i=Pl(a),mr(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function gE(t,e,r){ua(wt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function uP(t,e,r,n){let a=n.includes(".")?CP(r,n):()=>r[n];if(Tr(t)){const i=e[t];St(i)&&cr(a,i)}else if(St(t))cr(a,t.bind(r));else if(tr(t))if(wt(t))t.forEach(i=>uP(i,e,r,n));else{const i=St(t.handler)?t.handler.bind(r):e[t.handler];St(i)&&cr(a,i,t)}}function fP(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:a,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,s=i.get(e);let u;return s?u=s:!a.length&&!r&&!n?u=e:(u={},a.length&&a.forEach(f=>Vf(u,f,o,!0)),Vf(u,e,o)),tr(e)&&i.set(e,u),u}function Vf(t,e,r,n=!1){const{mixins:a,extends:i}=e;i&&Vf(t,i,r,!0),a&&a.forEach(o=>Vf(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const s=HF[o]||r&&r[o];t[o]=s?s(t[o],e[o]):e[o]}return t}const HF={data:yE,props:mE,emits:mE,methods:xl,computed:xl,beforeCreate:Cn,created:Cn,beforeMount:Cn,mounted:Cn,beforeUpdate:Cn,updated:Cn,beforeDestroy:Cn,beforeUnmount:Cn,destroyed:Cn,unmounted:Cn,activated:Cn,deactivated:Cn,errorCaptured:Cn,serverPrefetch:Cn,components:xl,directives:xl,watch:VF,provide:yE,inject:UF};function yE(t,e){return e?t?function(){return Yr(St(t)?t.call(this,this):t,St(e)?e.call(this,this):e)}:e:t}function UF(t,e){return xl(Sb(t),Sb(e))}function Sb(t){if(wt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Cn(t,e){return t?[...new Set([].concat(t,e))]:e}function xl(t,e){return t?Yr(Object.create(null),t,e):e}function mE(t,e){return t?wt(t)&&wt(e)?[...new Set([...t,...e])]:Yr(Object.create(null),pE(t),pE(e??{})):e}function VF(t,e){if(!t)return e;if(!e)return t;const r=Yr(Object.create(null),t);for(const n in e)r[n]=Cn(t[n],e[n]);return r}function cP(){return{app:null,config:{isNativeTag:MI,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let WF=0;function $F(t,e){return function(n,a=null){St(n)||(n=Yr({},n)),a!=null&&!tr(a)&&(a=null);const i=cP(),o=new WeakSet,s=[];let u=!1;const f=i.app={_uid:WF++,_component:n,_props:a,_container:null,_context:i,_instance:null,version:_B,get config(){return i.config},set config(c){},use(c,...h){return o.has(c)||(c&&St(c.install)?(o.add(c),c.install(f,...h)):St(c)&&(o.add(c),c(f,...h))),f},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),f},component(c,h){return h?(i.components[c]=h,f):i.components[c]},directive(c,h){return h?(i.directives[c]=h,f):i.directives[c]},mount(c,h,g){if(!u){const y=f._ceVNode||at(n,a);return y.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(y,c,g),u=!0,f._container=c,c.__vue_app__=f,xc(y.component)}},onUnmount(c){s.push(c)},unmount(){u&&(ua(s,f._instance,16),t(null,f._container),delete f._container.__vue_app__)},provide(c,h){return i.provides[c]=h,f},runWithContext(c){const h=mo;mo=f;try{return c()}finally{mo=h}}};return f}}let mo=null;function YF(t,e){if(en){let r=en.provides;const n=en.parent&&en.parent.provides;n===r&&(r=en.provides=Object.create(n)),r[t]=e}}function Pl(t,e,r=!1){const n=en||Wr;if(n||mo){let a=mo?mo._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(a&&t in a)return a[t];if(arguments.length>1)return r&&St(e)?e.call(n&&n.proxy):e}}function XF(){return!!(en||Wr||mo)}const dP={},hP=()=>Object.create(dP),vP=t=>Object.getPrototypeOf(t)===dP;function KF(t,e,r,n=!1){const a={},i=hP();t.propsDefaults=Object.create(null),pP(t,e,a,i);for(const o in t.propsOptions[0])o in a||(a[o]=void 0);r?t.props=n?a:uF(a):t.type.props?t.props=a:t.props=i,t.attrs=i}function jF(t,e,r,n){const{props:a,attrs:i,vnode:{patchFlag:o}}=t,s=Ot(a),[u]=t.propsOptions;let f=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let g=c[h];if(bc(t.emitsOptions,g))continue;const y=e[g];if(u)if(Vt(i,g))y!==i[g]&&(i[g]=y,f=!0);else{const p=Ai(g);a[p]=Ab(u,s,p,y,t,!1)}else y!==i[g]&&(i[g]=y,f=!0)}}}else{pP(t,e,a,i)&&(f=!0);let c;for(const h in s)(!e||!Vt(e,h)&&((c=Ii(h))===h||!Vt(e,c)))&&(u?r&&(r[h]!==void 0||r[c]!==void 0)&&(a[h]=Ab(u,s,h,void 0,t,!0)):delete a[h]);if(i!==s)for(const h in i)(!e||!Vt(e,h))&&(delete i[h],f=!0)}f&&$a(t.attrs,"set","")}function pP(t,e,r,n){const[a,i]=t.propsOptions;let o=!1,s;if(e)for(let u in e){if(Dl(u))continue;const f=e[u];let c;a&&Vt(a,c=Ai(u))?!i||!i.includes(c)?r[c]=f:(s||(s={}))[c]=f:bc(t.emitsOptions,u)||(!(u in n)||f!==n[u])&&(n[u]=f,o=!0)}if(i){const u=Ot(r),f=s||ar;for(let c=0;c<i.length;c++){const h=i[c];r[h]=Ab(a,u,h,f[h],t,!Vt(f,h))}}return o}function Ab(t,e,r,n,a,i){const o=t[r];if(o!=null){const s=Vt(o,"default");if(s&&n===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&St(u)){const{propsDefaults:f}=a;if(r in f)n=f[r];else{const c=au(a);n=f[r]=u.call(null,e),c()}}else n=u;a.ce&&a.ce._setProp(r,n)}o[0]&&(i&&!s?n=!1:o[1]&&(n===""||n===Ii(r))&&(n=!0))}return n}const ZF=new WeakMap;function gP(t,e,r=!1){const n=r?ZF:e.propsCache,a=n.get(t);if(a)return a;const i=t.props,o={},s=[];let u=!1;if(!St(t)){const c=h=>{u=!0;const[g,y]=gP(h,e,!0);Yr(o,g),y&&s.push(...y)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!u)return tr(t)&&n.set(t,hs),hs;if(wt(i))for(let c=0;c<i.length;c++){const h=Ai(i[c]);bE(h)&&(o[h]=ar)}else if(i)for(const c in i){const h=Ai(c);if(bE(h)){const g=i[c],y=o[h]=wt(g)||St(g)?{type:g}:Yr({},g),p=y.type;let C=!1,E=!0;if(wt(p))for(let v=0;v<p.length;++v){const x=p[v],w=St(x)&&x.name;if(w==="Boolean"){C=!0;break}else w==="String"&&(E=!1)}else C=St(p)&&p.name==="Boolean";y[0]=C,y[1]=E,(C||Vt(y,"default"))&&s.push(h)}}const f=[o,s];return tr(t)&&n.set(t,f),f}function bE(t){return t[0]!=="$"&&!Dl(t)}const v1=t=>t[0]==="_"||t==="$stable",p1=t=>wt(t)?t.map(Ta):[Ta(t)],QF=(t,e,r)=>{if(e._n)return e;const n=ft((...a)=>p1(e(...a)),r);return n._c=!1,n},yP=(t,e,r)=>{const n=t._ctx;for(const a in t){if(v1(a))continue;const i=t[a];if(St(i))e[a]=QF(a,i,n);else if(i!=null){const o=p1(i);e[a]=()=>o}}},mP=(t,e)=>{const r=p1(e);t.slots.default=()=>r},bP=(t,e,r)=>{for(const n in e)(r||!v1(n))&&(t[n]=e[n])},JF=(t,e,r)=>{const n=t.slots=hP();if(t.vnode.shapeFlag&32){const a=e._;a?(bP(n,e,r),r&&CR(n,"_",a,!0)):yP(e,n)}else e&&mP(t,e)},eB=(t,e,r)=>{const{vnode:n,slots:a}=t;let i=!0,o=ar;if(n.shapeFlag&32){const s=e._;s?r&&s===1?i=!1:bP(a,e,r):(i=!e.$stable,yP(e,a)),o=e}else e&&(mP(t,e),o={default:1});if(i)for(const s in a)!v1(s)&&o[s]==null&&delete a[s]},In=vB;function tB(t){return rB(t)}function rB(t,e){const r=dc();r.__VUE__=!0;const{insert:n,remove:a,patchProp:i,createElement:o,createText:s,createComment:u,setText:f,setElementText:c,parentNode:h,nextSibling:g,setScopeId:y=Aa,insertStaticContent:p}=t,C=($,ne,le,Se=null,De=null,be=null,Te=void 0,pe=null,de=!!ne.dynamicChildren)=>{if($===ne)return;$&&!co($,ne)&&(Se=ee($),V($,De,be,!0),$=null),ne.patchFlag===-2&&(de=!1,ne.dynamicChildren=null);const{type:ye,ref:Ee,shapeFlag:ue}=ne;switch(ye){case wc:E($,ne,le,Se);break;case dn:v($,ne,le,Se);break;case lh:$==null&&x(ne,le,Se,Te);break;case Yt:B($,ne,le,Se,De,be,Te,pe,de);break;default:ue&1?A($,ne,le,Se,De,be,Te,pe,de):ue&6?q($,ne,le,Se,De,be,Te,pe,de):(ue&64||ue&128)&&ye.process($,ne,le,Se,De,be,Te,pe,de,ie)}Ee!=null&&De&&Uf(Ee,$&&$.ref,be,ne||$,!ne)},E=($,ne,le,Se)=>{if($==null)n(ne.el=s(ne.children),le,Se);else{const De=ne.el=$.el;ne.children!==$.children&&f(De,ne.children)}},v=($,ne,le,Se)=>{$==null?n(ne.el=u(ne.children||""),le,Se):ne.el=$.el},x=($,ne,le,Se)=>{[$.el,$.anchor]=p($.children,ne,le,Se,$.el,$.anchor)},w=({el:$,anchor:ne},le,Se)=>{let De;for(;$&&$!==ne;)De=g($),n($,le,Se),$=De;n(ne,le,Se)},T=({el:$,anchor:ne})=>{let le;for(;$&&$!==ne;)le=g($),a($),$=le;a(ne)},A=($,ne,le,Se,De,be,Te,pe,de)=>{ne.type==="svg"?Te="svg":ne.type==="math"&&(Te="mathml"),$==null?M(ne,le,Se,De,be,Te,pe,de):k($,ne,De,be,Te,pe,de)},M=($,ne,le,Se,De,be,Te,pe)=>{let de,ye;const{props:Ee,shapeFlag:ue,transition:Ae,dirs:Pe}=$;if(de=$.el=o($.type,be,Ee&&Ee.is,Ee),ue&8?c(de,$.children):ue&16&&_($.children,de,null,Se,De,sh($,be),Te,pe),Pe&&eo($,null,Se,"created"),D(de,$,$.scopeId,Te,Se),Ee){for(const Ye in Ee)Ye!=="value"&&!Dl(Ye)&&i(de,Ye,null,Ee[Ye],be,Se);"value"in Ee&&i(de,"value",null,Ee.value,be),(ye=Ee.onVnodeBeforeMount)&&ma(ye,Se,$)}Pe&&eo($,null,Se,"beforeMount");const Fe=nB(De,Ae);Fe&&Ae.beforeEnter(de),n(de,ne,le),((ye=Ee&&Ee.onVnodeMounted)||Fe||Pe)&&In(()=>{ye&&ma(ye,Se,$),Fe&&Ae.enter(de),Pe&&eo($,null,Se,"mounted")},De)},D=($,ne,le,Se,De)=>{if(le&&y($,le),Se)for(let be=0;be<Se.length;be++)y($,Se[be]);if(De){let be=De.subTree;if(ne===be||SP(be.type)&&(be.ssContent===ne||be.ssFallback===ne)){const Te=De.vnode;D($,Te,Te.scopeId,Te.slotScopeIds,De.parent)}}},_=($,ne,le,Se,De,be,Te,pe,de=0)=>{for(let ye=de;ye<$.length;ye++){const Ee=$[ye]=pe?wi($[ye]):Ta($[ye]);C(null,Ee,ne,le,Se,De,be,Te,pe)}},k=($,ne,le,Se,De,be,Te)=>{const pe=ne.el=$.el;let{patchFlag:de,dynamicChildren:ye,dirs:Ee}=ne;de|=$.patchFlag&16;const ue=$.props||ar,Ae=ne.props||ar;let Pe;if(le&&to(le,!1),(Pe=Ae.onVnodeBeforeUpdate)&&ma(Pe,le,ne,$),Ee&&eo(ne,$,le,"beforeUpdate"),le&&to(le,!0),(ue.innerHTML&&Ae.innerHTML==null||ue.textContent&&Ae.textContent==null)&&c(pe,""),ye?F($.dynamicChildren,ye,pe,le,Se,sh(ne,De),be):Te||z($,ne,pe,null,le,Se,sh(ne,De),be,!1),de>0){if(de&16)G(pe,ue,Ae,le,De);else if(de&2&&ue.class!==Ae.class&&i(pe,"class",null,Ae.class,De),de&4&&i(pe,"style",ue.style,Ae.style,De),de&8){const Fe=ne.dynamicProps;for(let Ye=0;Ye<Fe.length;Ye++){const Ve=Fe[Ye],Qe=ue[Ve],Xe=Ae[Ve];(Xe!==Qe||Ve==="value")&&i(pe,Ve,Qe,Xe,De,le)}}de&1&&$.children!==ne.children&&c(pe,ne.children)}else!Te&&ye==null&&G(pe,ue,Ae,le,De);((Pe=Ae.onVnodeUpdated)||Ee)&&In(()=>{Pe&&ma(Pe,le,ne,$),Ee&&eo(ne,$,le,"updated")},Se)},F=($,ne,le,Se,De,be,Te)=>{for(let pe=0;pe<ne.length;pe++){const de=$[pe],ye=ne[pe],Ee=de.el&&(de.type===Yt||!co(de,ye)||de.shapeFlag&198)?h(de.el):le;C(de,ye,Ee,null,Se,De,be,Te,!0)}},G=($,ne,le,Se,De)=>{if(ne!==le){if(ne!==ar)for(const be in ne)!Dl(be)&&!(be in le)&&i($,be,ne[be],null,De,Se);for(const be in le){if(Dl(be))continue;const Te=le[be],pe=ne[be];Te!==pe&&be!=="value"&&i($,be,pe,Te,De,Se)}"value"in le&&i($,"value",ne.value,le.value,De)}},B=($,ne,le,Se,De,be,Te,pe,de)=>{const ye=ne.el=$?$.el:s(""),Ee=ne.anchor=$?$.anchor:s("");let{patchFlag:ue,dynamicChildren:Ae,slotScopeIds:Pe}=ne;Pe&&(pe=pe?pe.concat(Pe):Pe),$==null?(n(ye,le,Se),n(Ee,le,Se),_(ne.children||[],le,Ee,De,be,Te,pe,de)):ue>0&&ue&64&&Ae&&$.dynamicChildren?(F($.dynamicChildren,Ae,le,De,be,Te,pe),(ne.key!=null||De&&ne===De.subTree)&&wP($,ne,!0)):z($,ne,le,Ee,De,be,Te,pe,de)},q=($,ne,le,Se,De,be,Te,pe,de)=>{ne.slotScopeIds=pe,$==null?ne.shapeFlag&512?De.ctx.activate(ne,le,Se,Te,de):R(ne,le,Se,De,be,Te,de):P($,ne,de)},R=($,ne,le,Se,De,be,Te)=>{const pe=$.component=xB($,Se,De);if(yc($)&&(pe.ctx.renderer=ie),CB(pe,!1,Te),pe.asyncDep){if(De&&De.registerDep(pe,N,Te),!$.el){const de=pe.subTree=at(dn);v(null,de,ne,le)}}else N(pe,$,ne,le,De,be,Te)},P=($,ne,le)=>{const Se=ne.component=$.component;if(dB($,ne,le))if(Se.asyncDep&&!Se.asyncResolved){I(Se,ne,le);return}else Se.next=ne,Se.update();else ne.el=$.el,Se.vnode=ne},N=($,ne,le,Se,De,be,Te)=>{const pe=()=>{if($.isMounted){let{next:ue,bu:Ae,u:Pe,parent:Fe,vnode:Ye}=$;{const he=xP($);if(he){ue&&(ue.el=Ye.el,I($,ue,Te)),he.asyncDep.then(()=>{$.isUnmounted||pe()});return}}let Ve=ue,Qe;to($,!1),ue?(ue.el=Ye.el,I($,ue,Te)):ue=Ye,Ae&&mf(Ae),(Qe=ue.props&&ue.props.onVnodeBeforeUpdate)&&ma(Qe,Fe,ue,Ye),to($,!0);const Xe=xE($),We=$.subTree;$.subTree=Xe,C(We,Xe,h(We.el),ee(We),$,De,be),ue.el=Xe.el,Ve===null&&hB($,Xe.el),Pe&&In(Pe,De),(Qe=ue.props&&ue.props.onVnodeUpdated)&&In(()=>ma(Qe,Fe,ue,Ye),De)}else{let ue;const{el:Ae,props:Pe}=ne,{bm:Fe,m:Ye,parent:Ve,root:Qe,type:Xe}=$,We=gs(ne);to($,!1),Fe&&mf(Fe),!We&&(ue=Pe&&Pe.onVnodeBeforeMount)&&ma(ue,Ve,ne),to($,!0);{Qe.ce&&Qe.ce._injectChildStyle(Xe);const he=$.subTree=xE($);C(null,he,le,Se,$,De,be),ne.el=he.el}if(Ye&&In(Ye,De),!We&&(ue=Pe&&Pe.onVnodeMounted)){const he=ne;In(()=>ma(ue,Ve,he),De)}(ne.shapeFlag&256||Ve&&gs(Ve.vnode)&&Ve.vnode.shapeFlag&256)&&$.a&&In($.a,De),$.isMounted=!0,ne=le=Se=null}};$.scope.on();const de=$.effect=new RR(pe);$.scope.off();const ye=$.update=de.run.bind(de),Ee=$.job=de.runIfDirty.bind(de);Ee.i=$,Ee.id=$.uid,de.scheduler=()=>h1(Ee),to($,!0),ye()},I=($,ne,le)=>{ne.component=$;const Se=$.vnode.props;$.vnode=ne,$.next=null,jF($,ne.props,Se,le),eB($,ne.children,le),ja(),hE($),Za()},z=($,ne,le,Se,De,be,Te,pe,de=!1)=>{const ye=$&&$.children,Ee=$?$.shapeFlag:0,ue=ne.children,{patchFlag:Ae,shapeFlag:Pe}=ne;if(Ae>0){if(Ae&128){re(ye,ue,le,Se,De,be,Te,pe,de);return}else if(Ae&256){ae(ye,ue,le,Se,De,be,Te,pe,de);return}}Pe&8?(Ee&16&&X(ye,De,be),ue!==ye&&c(le,ue)):Ee&16?Pe&16?re(ye,ue,le,Se,De,be,Te,pe,de):X(ye,De,be,!0):(Ee&8&&c(le,""),Pe&16&&_(ue,le,Se,De,be,Te,pe,de))},ae=($,ne,le,Se,De,be,Te,pe,de)=>{$=$||hs,ne=ne||hs;const ye=$.length,Ee=ne.length,ue=Math.min(ye,Ee);let Ae;for(Ae=0;Ae<ue;Ae++){const Pe=ne[Ae]=de?wi(ne[Ae]):Ta(ne[Ae]);C($[Ae],Pe,le,null,De,be,Te,pe,de)}ye>Ee?X($,De,be,!0,!1,ue):_(ne,le,Se,De,be,Te,pe,de,ue)},re=($,ne,le,Se,De,be,Te,pe,de)=>{let ye=0;const Ee=ne.length;let ue=$.length-1,Ae=Ee-1;for(;ye<=ue&&ye<=Ae;){const Pe=$[ye],Fe=ne[ye]=de?wi(ne[ye]):Ta(ne[ye]);if(co(Pe,Fe))C(Pe,Fe,le,null,De,be,Te,pe,de);else break;ye++}for(;ye<=ue&&ye<=Ae;){const Pe=$[ue],Fe=ne[Ae]=de?wi(ne[Ae]):Ta(ne[Ae]);if(co(Pe,Fe))C(Pe,Fe,le,null,De,be,Te,pe,de);else break;ue--,Ae--}if(ye>ue){if(ye<=Ae){const Pe=Ae+1,Fe=Pe<Ee?ne[Pe].el:Se;for(;ye<=Ae;)C(null,ne[ye]=de?wi(ne[ye]):Ta(ne[ye]),le,Fe,De,be,Te,pe,de),ye++}}else if(ye>Ae)for(;ye<=ue;)V($[ye],De,be,!0),ye++;else{const Pe=ye,Fe=ye,Ye=new Map;for(ye=Fe;ye<=Ae;ye++){const me=ne[ye]=de?wi(ne[ye]):Ta(ne[ye]);me.key!=null&&Ye.set(me.key,ye)}let Ve,Qe=0;const Xe=Ae-Fe+1;let We=!1,he=0;const j=new Array(Xe);for(ye=0;ye<Xe;ye++)j[ye]=0;for(ye=Pe;ye<=ue;ye++){const me=$[ye];if(Qe>=Xe){V(me,De,be,!0);continue}let we;if(me.key!=null)we=Ye.get(me.key);else for(Ve=Fe;Ve<=Ae;Ve++)if(j[Ve-Fe]===0&&co(me,ne[Ve])){we=Ve;break}we===void 0?V(me,De,be,!0):(j[we-Fe]=ye+1,we>=he?he=we:We=!0,C(me,ne[we],le,null,De,be,Te,pe,de),Qe++)}const ve=We?aB(j):hs;for(Ve=ve.length-1,ye=Xe-1;ye>=0;ye--){const me=Fe+ye,we=ne[me],xe=me+1<Ee?ne[me+1].el:Se;j[ye]===0?C(null,we,le,xe,De,be,Te,pe,de):We&&(Ve<0||ye!==ve[Ve]?K(we,le,xe,2):Ve--)}}},K=($,ne,le,Se,De=null)=>{const{el:be,type:Te,transition:pe,children:de,shapeFlag:ye}=$;if(ye&6){K($.component.subTree,ne,le,Se);return}if(ye&128){$.suspense.move(ne,le,Se);return}if(ye&64){Te.move($,ne,le,ie);return}if(Te===Yt){n(be,ne,le);for(let ue=0;ue<de.length;ue++)K(de[ue],ne,le,Se);n($.anchor,ne,le);return}if(Te===lh){w($,ne,le);return}if(Se!==2&&ye&1&&pe)if(Se===0)pe.beforeEnter(be),n(be,ne,le),In(()=>pe.enter(be),De);else{const{leave:ue,delayLeave:Ae,afterLeave:Pe}=pe,Fe=()=>{$.ctx.isUnmounted?a(be):n(be,ne,le)},Ye=()=>{ue(be,()=>{Fe(),Pe&&Pe()})};Ae?Ae(be,Fe,Ye):Ye()}else n(be,ne,le)},V=($,ne,le,Se=!1,De=!1)=>{const{type:be,props:Te,ref:pe,children:de,dynamicChildren:ye,shapeFlag:Ee,patchFlag:ue,dirs:Ae,cacheIndex:Pe}=$;if(ue===-2&&(De=!1),pe!=null&&(ja(),Uf(pe,null,le,$,!0),Za()),Pe!=null&&(ne.renderCache[Pe]=void 0),Ee&256){ne.ctx.deactivate($);return}const Fe=Ee&1&&Ae,Ye=!gs($);let Ve;if(Ye&&(Ve=Te&&Te.onVnodeBeforeUnmount)&&ma(Ve,ne,$),Ee&6)W($.component,le,Se);else{if(Ee&128){$.suspense.unmount(le,Se);return}Fe&&eo($,null,ne,"beforeUnmount"),Ee&64?$.type.remove($,ne,le,ie,Se):ye&&!ye.hasOnce&&(be!==Yt||ue>0&&ue&64)?X(ye,ne,le,!1,!0):(be===Yt&&ue&384||!De&&Ee&16)&&X(de,ne,le),Se&&Z($)}(Ye&&(Ve=Te&&Te.onVnodeUnmounted)||Fe)&&In(()=>{Ve&&ma(Ve,ne,$),Fe&&eo($,null,ne,"unmounted")},le)},Z=$=>{const{type:ne,el:le,anchor:Se,transition:De}=$;if(ne===Yt){U(le,Se);return}if(ne===lh){T($);return}const be=()=>{a(le),De&&!De.persisted&&De.afterLeave&&De.afterLeave()};if($.shapeFlag&1&&De&&!De.persisted){const{leave:Te,delayLeave:pe}=De,de=()=>Te(le,be);pe?pe($.el,be,de):de()}else be()},U=($,ne)=>{let le;for(;$!==ne;)le=g($),a($),$=le;a(ne)},W=($,ne,le)=>{const{bum:Se,scope:De,job:be,subTree:Te,um:pe,m:de,a:ye,parent:Ee,slots:{__:ue}}=$;wE(de),wE(ye),Se&&mf(Se),Ee&&wt(ue)&&ue.forEach(Ae=>{Ee.renderCache[Ae]=void 0}),De.stop(),be&&(be.flags|=8,V(Te,$,ne,le)),pe&&In(pe,ne),In(()=>{$.isUnmounted=!0},ne),ne&&ne.pendingBranch&&!ne.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===ne.pendingId&&(ne.deps--,ne.deps===0&&ne.resolve())},X=($,ne,le,Se=!1,De=!1,be=0)=>{for(let Te=be;Te<$.length;Te++)V($[Te],ne,le,Se,De)},ee=$=>{if($.shapeFlag&6)return ee($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const ne=g($.anchor||$.el),le=ne&&ne[TF];return le?g(le):ne};let oe=!1;const te=($,ne,le)=>{$==null?ne._vnode&&V(ne._vnode,null,null,!0):C(ne._vnode||null,$,ne,null,null,null,le),ne._vnode=$,oe||(oe=!0,hE(),jR(),oe=!1)},ie={p:C,um:V,m:K,r:Z,mt:R,mc:_,pc:z,pbc:F,n:ee,o:t};return{render:te,hydrate:void 0,createApp:$F(te)}}function sh({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function to({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function nB(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function wP(t,e,r=!1){const n=t.children,a=e.children;if(wt(n)&&wt(a))for(let i=0;i<n.length;i++){const o=n[i];let s=a[i];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[i]=wi(a[i]),s.el=o.el),!r&&s.patchFlag!==-2&&wP(o,s)),s.type===wc&&(s.el=o.el),s.type===dn&&!s.el&&(s.el=o.el)}}function aB(t){const e=t.slice(),r=[0];let n,a,i,o,s;const u=t.length;for(n=0;n<u;n++){const f=t[n];if(f!==0){if(a=r[r.length-1],t[a]<f){e[n]=a,r.push(n);continue}for(i=0,o=r.length-1;i<o;)s=i+o>>1,t[r[s]]<f?i=s+1:o=s;f<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,o=r[i-1];i-- >0;)r[i]=o,o=e[o];return r}function xP(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:xP(e)}function wE(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const iB=Symbol.for("v-scx"),oB=()=>Pl(iB);function cr(t,e,r){return EP(t,e,r)}function EP(t,e,r=ar){const{immediate:n,deep:a,flush:i,once:o}=r,s=Yr({},r),u=e&&n||!e&&i!=="post";let f;if(Vl){if(i==="sync"){const y=oB();f=y.__watcherHandles||(y.__watcherHandles=[])}else if(!u){const y=()=>{};return y.stop=Aa,y.resume=Aa,y.pause=Aa,y}}const c=en;s.call=(y,p,C)=>ua(y,c,p,C);let h=!1;i==="post"?s.scheduler=y=>{In(y,c&&c.suspense)}:i!=="sync"&&(h=!0,s.scheduler=(y,p)=>{p?y():h1(y)}),s.augmentJob=y=>{e&&(y.flags|=4),h&&(y.flags|=2,c&&(y.id=c.uid,y.i=c))};const g=wF(t,e,s);return Vl&&(f?f.push(g):u&&g()),g}function sB(t,e,r){const n=this.proxy,a=Tr(t)?t.includes(".")?CP(n,t):()=>n[t]:t.bind(n,n);let i;St(e)?i=e:(i=e.handler,r=e);const o=au(this),s=EP(a,i.bind(n),r);return o(),s}function CP(t,e){const r=e.split(".");return()=>{let n=t;for(let a=0;a<r.length&&n;a++)n=n[r[a]];return n}}const lB=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ai(e)}Modifiers`]||t[`${Ii(e)}Modifiers`];function uB(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||ar;let a=r;const i=e.startsWith("update:"),o=i&&lB(n,e.slice(7));o&&(o.trim&&(a=r.map(c=>Tr(c)?c.trim():c)),o.number&&(a=r.map(mb)));let s,u=n[s=eh(e)]||n[s=eh(Ai(e))];!u&&i&&(u=n[s=eh(Ii(e))]),u&&ua(u,t,6,a);const f=n[s+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,ua(f,t,6,a)}}function TP(t,e,r=!1){const n=e.emitsCache,a=n.get(t);if(a!==void 0)return a;const i=t.emits;let o={},s=!1;if(!St(t)){const u=f=>{const c=TP(f,e,!0);c&&(s=!0,Yr(o,c))};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!s?(tr(t)&&n.set(t,null),null):(wt(i)?i.forEach(u=>o[u]=null):Yr(o,i),tr(t)&&n.set(t,o),o)}function bc(t,e){return!t||!uc(e)?!1:(e=e.slice(2).replace(/Once$/,""),Vt(t,e[0].toLowerCase()+e.slice(1))||Vt(t,Ii(e))||Vt(t,e))}function xE(t){const{type:e,vnode:r,proxy:n,withProxy:a,propsOptions:[i],slots:o,attrs:s,emit:u,render:f,renderCache:c,props:h,data:g,setupState:y,ctx:p,inheritAttrs:C}=t,E=Hf(t);let v,x;try{if(r.shapeFlag&4){const T=a||n,A=T;v=Ta(f.call(A,T,c,h,y,g,p)),x=s}else{const T=e;v=Ta(T.length>1?T(h,{attrs:s,slots:o,emit:u}):T(h,null)),x=e.props?s:fB(s)}}catch(T){kl.length=0,gc(T,t,1),v=at(dn)}let w=v;if(x&&C!==!1){const T=Object.keys(x),{shapeFlag:A}=w;T.length&&A&7&&(i&&T.some(r1)&&(x=cB(x,i)),w=Di(w,x,!1,!0))}return r.dirs&&(w=Di(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(r.dirs):r.dirs),r.transition&&Gl(w,r.transition),v=w,Hf(E),v}const fB=t=>{let e;for(const r in t)(r==="class"||r==="style"||uc(r))&&((e||(e={}))[r]=t[r]);return e},cB=(t,e)=>{const r={};for(const n in t)(!r1(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function dB(t,e,r){const{props:n,children:a,component:i}=t,{props:o,children:s,patchFlag:u}=e,f=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&u>=0){if(u&1024)return!0;if(u&16)return n?EE(n,o,f):!!o;if(u&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const g=c[h];if(o[g]!==n[g]&&!bc(f,g))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?EE(n,o,f):!0:!!o;return!1}function EE(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let a=0;a<n.length;a++){const i=n[a];if(e[i]!==t[i]&&!bc(r,i))return!0}return!1}function hB({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const SP=t=>t.__isSuspense;function vB(t,e){e&&e.pendingBranch?wt(t)?e.effects.push(...t):e.effects.push(t):CF(t)}const Yt=Symbol.for("v-fgt"),wc=Symbol.for("v-txt"),dn=Symbol.for("v-cmt"),lh=Symbol.for("v-stc"),kl=[];let Fn=null;function Je(t=!1){kl.push(Fn=t?null:[])}function pB(){kl.pop(),Fn=kl[kl.length-1]||null}let Hl=1;function CE(t,e=!1){Hl+=t,t<0&&Fn&&e&&(Fn.hasOnce=!0)}function AP(t){return t.dynamicChildren=Hl>0?Fn||hs:null,pB(),Hl>0&&Fn&&Fn.push(t),t}function ot(t,e,r,n,a,i){return AP(Me(t,e,r,n,a,i,!0))}function fa(t,e,r,n,a){return AP(at(t,e,r,n,a,!0))}function Ul(t){return t?t.__v_isVNode===!0:!1}function co(t,e){return t.type===e.type&&t.key===e.key}const LP=({key:t})=>t??null,bf=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Tr(t)||mr(t)||St(t)?{i:Wr,r:t,k:e,f:!!r}:t:null);function Me(t,e=null,r=null,n=0,a=null,i=t===Yt?0:1,o=!1,s=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&LP(e),ref:e&&bf(e),scopeId:QR,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Wr};return s?(g1(u,r),i&128&&t.normalize(u)):r&&(u.shapeFlag|=Tr(r)?8:16),Hl>0&&!o&&Fn&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Fn.push(u),u}const at=gB;function gB(t,e=null,r=null,n=0,a=null,i=!1){if((!t||t===BF)&&(t=dn),Ul(t)){const s=Di(t,e,!0);return r&&g1(s,r),Hl>0&&!i&&Fn&&(s.shapeFlag&6?Fn[Fn.indexOf(t)]=s:Fn.push(s)),s.patchFlag=-2,s}if(LB(t)&&(t=t.__vccOpts),e){e=yB(e);let{class:s,style:u}=e;s&&!Tr(s)&&(e.class=jt(s)),tr(u)&&(c1(u)&&!wt(u)&&(u=Yr({},u)),e.style=Ci(u))}const o=Tr(t)?1:SP(t)?128:JR(t)?64:tr(t)?4:St(t)?2:0;return Me(t,e,r,n,a,o,i,!0)}function yB(t){return t?c1(t)||vP(t)?Yr({},t):t:null}function Di(t,e,r=!1,n=!1){const{props:a,ref:i,patchFlag:o,children:s,transition:u}=t,f=e?mB(a||{},e):a,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&LP(f),ref:e&&e.ref?r&&i?wt(i)?i.concat(bf(e)):[i,bf(e)]:bf(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Yt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Di(t.ssContent),ssFallback:t.ssFallback&&Di(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&n&&Gl(c,u.clone(c)),c}function xt(t=" ",e=0){return at(wc,null,t,e)}function fr(t="",e=!1){return e?(Je(),fa(dn,null,t)):at(dn,null,t)}function Ta(t){return t==null||typeof t=="boolean"?at(dn):wt(t)?at(Yt,null,t.slice()):Ul(t)?wi(t):at(wc,null,String(t))}function wi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Di(t)}function g1(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(wt(e))r=16;else if(typeof e=="object")if(n&65){const a=e.default;a&&(a._c&&(a._d=!1),g1(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!vP(e)?e._ctx=Wr:a===3&&Wr&&(Wr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else St(e)?(e={default:e,_ctx:Wr},r=32):(e=String(e),n&64?(r=16,e=[xt(e)]):r=8);t.children=e,t.shapeFlag|=r}function mB(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const a in n)if(a==="class")e.class!==n.class&&(e.class=jt([e.class,n.class]));else if(a==="style")e.style=Ci([e.style,n.style]);else if(uc(a)){const i=e[a],o=n[a];o&&i!==o&&!(wt(i)&&i.includes(o))&&(e[a]=i?[].concat(i,o):o)}else a!==""&&(e[a]=n[a])}return e}function ma(t,e,r,n=null){ua(t,e,7,[r,n])}const bB=cP();let wB=0;function xB(t,e,r){const n=t.type,a=(e?e.appContext:t.appContext)||bB,i={uid:wB++,vnode:t,type:n,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new DR(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gP(n,a),emitsOptions:TP(n,a),emit:null,emitted:null,propsDefaults:ar,inheritAttrs:n.inheritAttrs,ctx:ar,data:ar,props:ar,attrs:ar,slots:ar,refs:ar,setupState:ar,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=uB.bind(null,i),t.ce&&t.ce(i),i}let en=null;const EB=()=>en||Wr;let Wf,Lb;{const t=dc(),e=(r,n)=>{let a;return(a=t[r])||(a=t[r]=[]),a.push(n),i=>{a.length>1?a.forEach(o=>o(i)):a[0](i)}};Wf=e("__VUE_INSTANCE_SETTERS__",r=>en=r),Lb=e("__VUE_SSR_SETTERS__",r=>Vl=r)}const au=t=>{const e=en;return Wf(t),t.scope.on(),()=>{t.scope.off(),Wf(e)}},TE=()=>{en&&en.scope.off(),Wf(null)};function DP(t){return t.vnode.shapeFlag&4}let Vl=!1;function CB(t,e=!1,r=!1){e&&Lb(e);const{props:n,children:a}=t.vnode,i=DP(t);KF(t,n,i,e),JF(t,a,r||e);const o=i?TB(t,e):void 0;return e&&Lb(!1),o}function TB(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,qF);const{setup:n}=r;if(n){ja();const a=t.setupContext=n.length>1?AB(t):null,i=au(t),o=nu(n,t,0,[t.props,a]),s=bR(o);if(Za(),i(),(s||t.sp)&&!gs(t)&&iP(t),s){if(o.then(TE,TE),e)return o.then(u=>{SE(t,u)}).catch(u=>{gc(u,t,0)});t.asyncDep=o}else SE(t,o)}else _P(t)}function SE(t,e,r){St(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:tr(e)&&(t.setupState=$R(e)),_P(t)}function _P(t,e,r){const n=t.type;t.render||(t.render=n.render||Aa);{const a=au(t);ja();try{zF(t)}finally{Za(),a()}}}const SB={get(t,e){return cn(t,"get",""),t[e]}};function AB(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,SB),slots:t.slots,emit:t.emit,expose:e}}function xc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy($R(d1(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Rl)return Rl[r](t)},has(e,r){return r in e||r in Rl}})):t.proxy}function LB(t){return St(t)&&"__vccOpts"in t}const Ft=(t,e)=>mF(t,e,Vl);function DB(t,e,r){const n=arguments.length;return n===2?tr(e)&&!wt(e)?Ul(e)?at(t,null,[e]):at(t,e):at(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Ul(r)&&(r=[r]),at(t,e,r))}const _B="3.5.15";/**
* @vue/runtime-dom v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Db;const AE=typeof window<"u"&&window.trustedTypes;if(AE)try{Db=AE.createPolicy("vue",{createHTML:t=>t})}catch{}const MP=Db?t=>Db.createHTML(t):t=>t,MB="http://www.w3.org/2000/svg",RB="http://www.w3.org/1998/Math/MathML",Va=typeof document<"u"?document:null,LE=Va&&Va.createElement("template"),PB={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const a=e==="svg"?Va.createElementNS(MB,t):e==="mathml"?Va.createElementNS(RB,t):r?Va.createElement(t,{is:r}):Va.createElement(t);return t==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:t=>Va.createTextNode(t),createComment:t=>Va.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Va.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,a,i){const o=r?r.previousSibling:e.lastChild;if(a&&(a===i||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===i||!(a=a.nextSibling)););else{LE.innerHTML=MP(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const s=LE.content;if(n==="svg"||n==="mathml"){const u=s.firstChild;for(;u.firstChild;)s.appendChild(u.firstChild);s.removeChild(u)}e.insertBefore(s,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},vi="transition",dl="animation",Wl=Symbol("_vtc"),RP={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},kB=Yr({},eP,RP),NB=t=>(t.displayName="Transition",t.props=kB,t),y1=NB((t,{slots:e})=>DB(LF,OB(t),e)),ro=(t,e=[])=>{wt(t)?t.forEach(r=>r(...e)):t&&t(...e)},DE=t=>t?wt(t)?t.some(e=>e.length>1):t.length>1:!1;function OB(t){const e={};for(const B in t)B in RP||(e[B]=t[B]);if(t.css===!1)return e;const{name:r="v",type:n,duration:a,enterFromClass:i=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:s=`${r}-enter-to`,appearFromClass:u=i,appearActiveClass:f=o,appearToClass:c=s,leaveFromClass:h=`${r}-leave-from`,leaveActiveClass:g=`${r}-leave-active`,leaveToClass:y=`${r}-leave-to`}=t,p=IB(a),C=p&&p[0],E=p&&p[1],{onBeforeEnter:v,onEnter:x,onEnterCancelled:w,onLeave:T,onLeaveCancelled:A,onBeforeAppear:M=v,onAppear:D=x,onAppearCancelled:_=w}=e,k=(B,q,R,P)=>{B._enterCancelled=P,no(B,q?c:s),no(B,q?f:o),R&&R()},F=(B,q)=>{B._isLeaving=!1,no(B,h),no(B,y),no(B,g),q&&q()},G=B=>(q,R)=>{const P=B?D:x,N=()=>k(q,B,R);ro(P,[q,N]),_E(()=>{no(q,B?u:i),Ga(q,B?c:s),DE(P)||ME(q,n,C,N)})};return Yr(e,{onBeforeEnter(B){ro(v,[B]),Ga(B,i),Ga(B,o)},onBeforeAppear(B){ro(M,[B]),Ga(B,u),Ga(B,f)},onEnter:G(!1),onAppear:G(!0),onLeave(B,q){B._isLeaving=!0;const R=()=>F(B,q);Ga(B,h),B._enterCancelled?(Ga(B,g),kE()):(kE(),Ga(B,g)),_E(()=>{B._isLeaving&&(no(B,h),Ga(B,y),DE(T)||ME(B,n,E,R))}),ro(T,[B,R])},onEnterCancelled(B){k(B,!1,void 0,!0),ro(w,[B])},onAppearCancelled(B){k(B,!0,void 0,!0),ro(_,[B])},onLeaveCancelled(B){F(B),ro(A,[B])}})}function IB(t){if(t==null)return null;if(tr(t))return[uh(t.enter),uh(t.leave)];{const e=uh(t);return[e,e]}}function uh(t){return OI(t)}function Ga(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[Wl]||(t[Wl]=new Set)).add(e)}function no(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[Wl];r&&(r.delete(e),r.size||(t[Wl]=void 0))}function _E(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let FB=0;function ME(t,e,r,n){const a=t._endId=++FB,i=()=>{a===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:o,timeout:s,propCount:u}=BB(t,e);if(!o)return n();const f=o+"end";let c=0;const h=()=>{t.removeEventListener(f,g),i()},g=y=>{y.target===t&&++c>=u&&h()};setTimeout(()=>{c<u&&h()},s+1),t.addEventListener(f,g)}function BB(t,e){const r=window.getComputedStyle(t),n=p=>(r[p]||"").split(", "),a=n(`${vi}Delay`),i=n(`${vi}Duration`),o=RE(a,i),s=n(`${dl}Delay`),u=n(`${dl}Duration`),f=RE(s,u);let c=null,h=0,g=0;e===vi?o>0&&(c=vi,h=o,g=i.length):e===dl?f>0&&(c=dl,h=f,g=u.length):(h=Math.max(o,f),c=h>0?o>f?vi:dl:null,g=c?c===vi?i.length:u.length:0);const y=c===vi&&/\b(transform|all)(,|$)/.test(n(`${vi}Property`).toString());return{type:c,timeout:h,propCount:g,hasTransform:y}}function RE(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>PE(r)+PE(t[n])))}function PE(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function kE(){return document.body.offsetHeight}function qB(t,e,r){const n=t[Wl];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const $f=Symbol("_vod"),PP=Symbol("_vsh"),Ha={beforeMount(t,{value:e},{transition:r}){t[$f]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):hl(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),hl(t,!0),n.enter(t)):n.leave(t,()=>{hl(t,!1)}):hl(t,e))},beforeUnmount(t,{value:e}){hl(t,e)}};function hl(t,e){t.style.display=e?t[$f]:"none",t[PP]=!e}const zB=Symbol(""),GB=/(^|;)\s*display\s*:/;function HB(t,e,r){const n=t.style,a=Tr(r);let i=!1;if(r&&!a){if(e)if(Tr(e))for(const o of e.split(";")){const s=o.slice(0,o.indexOf(":")).trim();r[s]==null&&wf(n,s,"")}else for(const o in e)r[o]==null&&wf(n,o,"");for(const o in r)o==="display"&&(i=!0),wf(n,o,r[o])}else if(a){if(e!==r){const o=n[zB];o&&(r+=";"+o),n.cssText=r,i=GB.test(r)}}else e&&t.removeAttribute("style");$f in t&&(t[$f]=i?n.display:"",t[PP]&&(n.display="none"))}const NE=/\s*!important$/;function wf(t,e,r){if(wt(r))r.forEach(n=>wf(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=UB(t,e);NE.test(r)?t.setProperty(Ii(n),r.replace(NE,""),"important"):t[n]=r}}const OE=["Webkit","Moz","ms"],fh={};function UB(t,e){const r=fh[e];if(r)return r;let n=Ai(e);if(n!=="filter"&&n in t)return fh[e]=n;n=ER(n);for(let a=0;a<OE.length;a++){const i=OE[a]+n;if(i in t)return fh[e]=i}return e}const IE="http://www.w3.org/1999/xlink";function FE(t,e,r,n,a,i=GI(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(IE,e.slice(6,e.length)):t.setAttributeNS(IE,e,r):r==null||i&&!TR(r)?t.removeAttribute(e):t.setAttribute(e,i?"":la(r)?String(r):r)}function BE(t,e,r,n,a){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?MP(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const s=i==="OPTION"?t.getAttribute("value")||"":t.value,u=r==null?t.type==="checkbox"?"on":"":String(r);(s!==u||!("_value"in t))&&(t.value=u),r==null&&t.removeAttribute(e),t._value=r;return}let o=!1;if(r===""||r==null){const s=typeof t[e];s==="boolean"?r=TR(r):r==null&&s==="string"?(r="",o=!0):s==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(a||e)}function ho(t,e,r,n){t.addEventListener(e,r,n)}function VB(t,e,r,n){t.removeEventListener(e,r,n)}const qE=Symbol("_vei");function WB(t,e,r,n,a=null){const i=t[qE]||(t[qE]={}),o=i[e];if(n&&o)o.value=n;else{const[s,u]=$B(e);if(n){const f=i[e]=KB(n,a);ho(t,s,f,u)}else o&&(VB(t,s,o,u),i[e]=void 0)}}const zE=/(?:Once|Passive|Capture)$/;function $B(t){let e;if(zE.test(t)){e={};let n;for(;n=t.match(zE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ii(t.slice(2)),e]}let ch=0;const YB=Promise.resolve(),XB=()=>ch||(YB.then(()=>ch=0),ch=Date.now());function KB(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;ua(jB(n,r.value),e,5,[n])};return r.value=t,r.attached=XB(),r}function jB(t,e){if(wt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>a=>!a._stopped&&n&&n(a))}else return e}const GE=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ZB=(t,e,r,n,a,i)=>{const o=a==="svg";e==="class"?qB(t,n,o):e==="style"?HB(t,r,n):uc(e)?r1(e)||WB(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):QB(t,e,n,o))?(BE(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&FE(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Tr(n))?BE(t,Ai(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),FE(t,e,n,o))};function QB(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&GE(e)&&St(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return GE(e)&&Tr(r)?!1:e in t}const Yf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return wt(e)?r=>mf(e,r):e};function JB(t){t.target.composing=!0}function HE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ms=Symbol("_assign"),eq={created(t,{modifiers:{lazy:e,trim:r,number:n}},a){t[ms]=Yf(a);const i=n||a.props&&a.props.type==="number";ho(t,e?"change":"input",o=>{if(o.target.composing)return;let s=t.value;r&&(s=s.trim()),i&&(s=mb(s)),t[ms](s)}),r&&ho(t,"change",()=>{t.value=t.value.trim()}),e||(ho(t,"compositionstart",JB),ho(t,"compositionend",HE),ho(t,"change",HE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:a,number:i}},o){if(t[ms]=Yf(o),t.composing)return;const s=(i||t.type==="number")&&!/^0\d/.test(t.value)?mb(t.value):t.value,u=e??"";s!==u&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||a&&t.value.trim()===u)||(t.value=u))}},kP={deep:!0,created(t,e,r){t[ms]=Yf(r),ho(t,"change",()=>{const n=t._modelValue,a=tq(t),i=t.checked,o=t[ms];if(wt(n)){const s=SR(n,a),u=s!==-1;if(i&&!u)o(n.concat(a));else if(!i&&u){const f=[...n];f.splice(s,1),o(f)}}else if(fc(n)){const s=new Set(n);i?s.add(a):s.delete(a),o(s)}else o(NP(t,i))})},mounted:UE,beforeUpdate(t,e,r){t[ms]=Yf(r),UE(t,e,r)}};function UE(t,{value:e,oldValue:r},n){t._modelValue=e;let a;if(wt(e))a=SR(e,n.props.value)>-1;else if(fc(e))a=e.has(n.props.value);else{if(e===r)return;a=hc(e,NP(t,!0))}t.checked!==a&&(t.checked=a)}function tq(t){return"_value"in t?t._value:t.value}function NP(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const rq=["ctrl","shift","alt","meta"],nq={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>rq.some(r=>t[`${r}Key`]&&!e.includes(r))},Ur=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(a,...i)=>{for(let o=0;o<e.length;o++){const s=nq[e[o]];if(s&&s(a,e))return}return t(a,...i)})},aq={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},_b=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=a=>{if(!("key"in a))return;const i=Ii(a.key);if(e.some(o=>o===i||aq[o]===i))return t(a)})},iq=Yr({patchProp:ZB},PB);let VE;function oq(){return VE||(VE=tB(iq))}const sq=(...t)=>{const e=oq().createApp(...t),{mount:r}=e;return e.mount=n=>{const a=uq(n);if(!a)return;const i=e._component;!St(i)&&!i.render&&!i.template&&(i.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const o=r(a,!1,lq(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),o},e};function lq(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function uq(t){return Tr(t)?document.querySelector(t):t}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let OP;const Ec=t=>OP=t,IP=Symbol();function Mb(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Nl;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Nl||(Nl={}));function fq(){const t=_R(!0),e=t.run(()=>bt({}));let r=[],n=[];const a=d1({install(i){Ec(a),a._a=i,i.provide(IP,a),i.config.globalProperties.$pinia=a,n.forEach(o=>r.push(o)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return a}const FP=()=>{};function WE(t,e,r,n=FP){t.push(e);const a=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&MR()&&UI(a),a}function Jo(t,...e){t.slice().forEach(r=>{r(...e)})}const cq=t=>t(),$E=Symbol(),dh=Symbol();function Rb(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],a=t[r];Mb(a)&&Mb(n)&&t.hasOwnProperty(r)&&!mr(n)&&!Ka(n)?t[r]=Rb(a,n):t[r]=n}return t}const dq=Symbol();function hq(t){return!Mb(t)||!Object.prototype.hasOwnProperty.call(t,dq)}const{assign:yi}=Object;function vq(t){return!!(mr(t)&&t.effect)}function pq(t,e,r,n){const{state:a,actions:i,getters:o}=e,s=r.state.value[t];let u;function f(){s||(r.state.value[t]=a?a():{});const c=hF(r.state.value[t]);return yi(c,i,Object.keys(o||{}).reduce((h,g)=>(h[g]=d1(Ft(()=>{Ec(r);const y=r._s.get(t);return o[g].call(y,y)})),h),{}))}return u=BP(t,f,e,r,n,!0),u}function BP(t,e,r={},n,a,i){let o;const s=yi({actions:{}},r),u={deep:!0};let f,c,h=[],g=[],y;const p=n.state.value[t];!i&&!p&&(n.state.value[t]={}),bt({});let C;function E(_){let k;f=c=!1,typeof _=="function"?(_(n.state.value[t]),k={type:Nl.patchFunction,storeId:t,events:y}):(Rb(n.state.value[t],_),k={type:Nl.patchObject,payload:_,storeId:t,events:y});const F=C=Symbol();Kn().then(()=>{C===F&&(f=!0)}),c=!0,Jo(h,k,n.state.value[t])}const v=i?function(){const{state:k}=r,F=k?k():{};this.$patch(G=>{yi(G,F)})}:FP;function x(){o.stop(),h=[],g=[],n._s.delete(t)}const w=(_,k="")=>{if($E in _)return _[dh]=k,_;const F=function(){Ec(n);const G=Array.from(arguments),B=[],q=[];function R(I){B.push(I)}function P(I){q.push(I)}Jo(g,{args:G,name:F[dh],store:A,after:R,onError:P});let N;try{N=_.apply(this&&this.$id===t?this:A,G)}catch(I){throw Jo(q,I),I}return N instanceof Promise?N.then(I=>(Jo(B,I),I)).catch(I=>(Jo(q,I),Promise.reject(I))):(Jo(B,N),N)};return F[$E]=!0,F[dh]=k,F},T={_p:n,$id:t,$onAction:WE.bind(null,g),$patch:E,$reset:v,$subscribe(_,k={}){const F=WE(h,_,k.detached,()=>G()),G=o.run(()=>cr(()=>n.state.value[t],B=>{(k.flush==="sync"?c:f)&&_({storeId:t,type:Nl.direct,events:y},B)},yi({},u,k)));return F},$dispose:x},A=pc(T);n._s.set(t,A);const D=(n._a&&n._a.runWithContext||cq)(()=>n._e.run(()=>(o=_R()).run(()=>e({action:w}))));for(const _ in D){const k=D[_];if(mr(k)&&!vq(k)||Ka(k))i||(p&&hq(k)&&(mr(k)?k.value=p[_]:Rb(k,p[_])),n.state.value[t][_]=k);else if(typeof k=="function"){const F=w(k,_);D[_]=F,s.actions[_]=k}}return yi(A,D),yi(Ot(A),D),Object.defineProperty(A,"$state",{get:()=>n.state.value[t],set:_=>{E(k=>{yi(k,_)})}}),n._p.forEach(_=>{yi(A,o.run(()=>_({store:A,app:n._a,pinia:n,options:s})))}),p&&i&&r.hydrate&&r.hydrate(A.$state,p),f=!0,c=!0,A}/*! #__NO_SIDE_EFFECTS__ */function Cc(t,e,r){let n;const a=typeof e=="function";n=a?r:e;function i(o,s){const u=XF();return o=o||(u?Pl(IP,null):null),o&&Ec(o),o=OP,o._s.has(t)||(a?BP(t,e,n,o):pq(t,n,o)),o._s.get(t)}return i.$id=t,i}function Pb(t){const e=Ot(t),r={};for(const n in e){const a=e[n];a.effect?r[n]=Ft({get:()=>t[n],set(i){t[n]=i}}):(mr(a)||Ka(a))&&(r[n]=gF(t,n))}return r}function kb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function gq(t){if(Array.isArray(t))return t}function yq(t){if(Array.isArray(t))return kb(t)}function Fi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zP(n.key),n)}}function Bi(t,e,r){return e&&mq(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=m1(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return o=u.done,u},e:function(u){s=!0,i=u},f:function(){try{o||r.return==null||r.return()}finally{if(s)throw i}}}}function qP(t,e,r){return(e=zP(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bq(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wq(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,s=[],u=!0,f=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(c){f=!0,a=c}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(f)throw a}}return s}}function xq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fr(t,e){return gq(t)||wq(t,e)||m1(t,e)||xq()}function Xf(t){return yq(t)||bq(t)||m1(t)||Eq()}function Cq(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function zP(t){var e=Cq(t,"string");return typeof e=="symbol"?e:e+""}function qr(t){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(t)}function m1(t,e){if(t){if(typeof t=="string")return kb(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kb(t,e):void 0}}var Ir=typeof window>"u"?null:window,YE=Ir?Ir.navigator:null;Ir&&Ir.document;var Tq=qr(""),GP=qr({}),Sq=qr(function(){}),Aq=typeof HTMLElement>"u"?"undefined":qr(HTMLElement),iu=function(e){return e&&e.instanceString&&br(e.instanceString)?e.instanceString():null},mt=function(e){return e!=null&&qr(e)==Tq},br=function(e){return e!=null&&qr(e)===Sq},ir=function(e){return!qn(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Bt=function(e){return e!=null&&qr(e)===GP&&!ir(e)&&e.constructor===Object},Lq=function(e){return e!=null&&qr(e)===GP},it=function(e){return e!=null&&qr(e)===qr(1)&&!isNaN(e)},Dq=function(e){return it(e)&&Math.floor(e)===e},Kf=function(e){if(Aq!=="undefined")return e!=null&&e instanceof HTMLElement},qn=function(e){return ou(e)||HP(e)},ou=function(e){return iu(e)==="collection"&&e._private.single},HP=function(e){return iu(e)==="collection"&&!e._private.single},b1=function(e){return iu(e)==="core"},UP=function(e){return iu(e)==="stylesheet"},_q=function(e){return iu(e)==="event"},_i=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Mq=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Rq=function(e){return Bt(e)&&it(e.x1)&&it(e.x2)&&it(e.y1)&&it(e.y2)},Pq=function(e){return Lq(e)&&br(e.then)},kq=function(){return YE&&YE.userAgent.match(/msie|trident|edge/i)},Cs=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function(){var i=this,o=arguments,s,u=r.apply(i,o),f=n.cache;return(s=f[u])||(s=f[u]=e.apply(i,o)),s};return n.cache={},n},w1=Cs(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Tc=Cs(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),VP=Cs(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),XE=function(e){return _i(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Br="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Nq="rgb[a]?\\(("+Br+"[%]?)\\s*,\\s*("+Br+"[%]?)\\s*,\\s*("+Br+"[%]?)(?:\\s*,\\s*("+Br+"))?\\)",Oq="rgb[a]?\\((?:"+Br+"[%]?)\\s*,\\s*(?:"+Br+"[%]?)\\s*,\\s*(?:"+Br+"[%]?)(?:\\s*,\\s*(?:"+Br+"))?\\)",Iq="hsl[a]?\\(("+Br+")\\s*,\\s*("+Br+"[%])\\s*,\\s*("+Br+"[%])(?:\\s*,\\s*("+Br+"))?\\)",Fq="hsl[a]?\\((?:"+Br+")\\s*,\\s*(?:"+Br+"[%])\\s*,\\s*(?:"+Br+"[%])(?:\\s*,\\s*(?:"+Br+"))?\\)",Bq="\\#[0-9a-fA-F]{3}",qq="\\#[0-9a-fA-F]{6}",WP=function(e,r){return e<r?-1:e>r?1:0},zq=function(e,r){return-1*WP(e,r)},Et=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];t[o]=n[o]}}return t},Gq=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,o=16;return r?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},Hq=function(e){var r,n,a,i,o,s,u,f;function c(p,C,E){return E<0&&(E+=1),E>1&&(E-=1),E<1/6?p+(C-p)*6*E:E<1/2?C:E<2/3?p+(C-p)*(2/3-E)*6:p}var h=new RegExp("^"+Iq+"$").exec(e);if(h){if(n=parseInt(h[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(h[2]),a<0||a>100||(a=a/100,i=parseFloat(h[3]),i<0||i>100)||(i=i/100,o=h[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)s=u=f=Math.round(i*255);else{var g=i<.5?i*(1+a):i+a-i*a,y=2*i-g;s=Math.round(255*c(y,g,n+1/3)),u=Math.round(255*c(y,g,n)),f=Math.round(255*c(y,g,n-1/3))}r=[s,u,f,o]}return r},Uq=function(e){var r,n=new RegExp("^"+Nq+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;r.push(Math.floor(o))}var s=a[1]||a[2]||a[3],u=a[1]&&a[2]&&a[3];if(s&&!u)return;var f=n[4];if(f!==void 0){if(f=parseFloat(f),f<0||f>1)return;r.push(f)}}return r},Vq=function(e){return Wq[e.toLowerCase()]},$P=function(e){return(ir(e)?e:null)||Vq(e)||Gq(e)||Uq(e)||Hq(e)},Wq={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},YP=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Bt(o))throw Error("Tried to set map with object key");i<n.length-1?(r[o]==null&&(r[o]={}),r=r[o]):r[o]=e.value}},XP=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Bt(o))throw Error("Tried to get map with object key");if(r=r[o],r==null)return r}return r},rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function su(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hh,KE;function lu(){if(KE)return hh;KE=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return hh=t,hh}var vh,jE;function $q(){if(jE)return vh;jE=1;var t=typeof rf=="object"&&rf&&rf.Object===Object&&rf;return vh=t,vh}var ph,ZE;function Sc(){if(ZE)return ph;ZE=1;var t=$q(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return ph=r,ph}var gh,QE;function Yq(){if(QE)return gh;QE=1;var t=Sc(),e=function(){return t.Date.now()};return gh=e,gh}var yh,JE;function Xq(){if(JE)return yh;JE=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return yh=e,yh}var mh,eC;function Kq(){if(eC)return mh;eC=1;var t=Xq(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return mh=r,mh}var bh,tC;function x1(){if(tC)return bh;tC=1;var t=Sc(),e=t.Symbol;return bh=e,bh}var wh,rC;function jq(){if(rC)return wh;rC=1;var t=x1(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var s=r.call(o,a),u=o[a];try{o[a]=void 0;var f=!0}catch{}var c=n.call(o);return f&&(s?o[a]=u:delete o[a]),c}return wh=i,wh}var xh,nC;function Zq(){if(nC)return xh;nC=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return xh=r,xh}var Eh,aC;function KP(){if(aC)return Eh;aC=1;var t=x1(),e=jq(),r=Zq(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(s){return s==null?s===void 0?a:n:i&&i in Object(s)?e(s):r(s)}return Eh=o,Eh}var Ch,iC;function Qq(){if(iC)return Ch;iC=1;function t(e){return e!=null&&typeof e=="object"}return Ch=t,Ch}var Th,oC;function uu(){if(oC)return Th;oC=1;var t=KP(),e=Qq(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Th=n,Th}var Sh,sC;function Jq(){if(sC)return Sh;sC=1;var t=Kq(),e=lu(),r=uu(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(f){if(typeof f=="number")return f;if(r(f))return n;if(e(f)){var c=typeof f.valueOf=="function"?f.valueOf():f;f=e(c)?c+"":c}if(typeof f!="string")return f===0?f:+f;f=t(f);var h=i.test(f);return h||o.test(f)?s(f.slice(2),h?2:8):a.test(f)?n:+f}return Sh=u,Sh}var Ah,lC;function ez(){if(lC)return Ah;lC=1;var t=lu(),e=Yq(),r=Jq(),n="Expected a function",a=Math.max,i=Math.min;function o(s,u,f){var c,h,g,y,p,C,E=0,v=!1,x=!1,w=!0;if(typeof s!="function")throw new TypeError(n);u=r(u)||0,t(f)&&(v=!!f.leading,x="maxWait"in f,g=x?a(r(f.maxWait)||0,u):g,w="trailing"in f?!!f.trailing:w);function T(q){var R=c,P=h;return c=h=void 0,E=q,y=s.apply(P,R),y}function A(q){return E=q,p=setTimeout(_,u),v?T(q):y}function M(q){var R=q-C,P=q-E,N=u-R;return x?i(N,g-P):N}function D(q){var R=q-C,P=q-E;return C===void 0||R>=u||R<0||x&&P>=g}function _(){var q=e();if(D(q))return k(q);p=setTimeout(_,M(q))}function k(q){return p=void 0,w&&c?T(q):(c=h=void 0,y)}function F(){p!==void 0&&clearTimeout(p),E=0,c=C=h=p=void 0}function G(){return p===void 0?y:k(e())}function B(){var q=e(),R=D(q);if(c=arguments,h=this,C=q,R){if(p===void 0)return A(C);if(x)return clearTimeout(p),p=setTimeout(_,u),T(C)}return p===void 0&&(p=setTimeout(_,u)),y}return B.cancel=F,B.flush=G,B}return Ah=o,Ah}var tz=ez(),fu=su(tz),Lh=Ir?Ir.performance:null,jP=Lh&&Lh.now?function(){return Lh.now()}:function(){return Date.now()},rz=function(){if(Ir){if(Ir.requestAnimationFrame)return function(t){Ir.requestAnimationFrame(t)};if(Ir.mozRequestAnimationFrame)return function(t){Ir.mozRequestAnimationFrame(t)};if(Ir.webkitRequestAnimationFrame)return function(t){Ir.webkitRequestAnimationFrame(t)};if(Ir.msRequestAnimationFrame)return function(t){Ir.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(jP())},1e3/60)}}(),jf=function(e){return rz(e)},Qa=jP,vo=9261,ZP=65599,us=5381,QP=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vo,n=r,a;a=e.next(),!a.done;)n=n*ZP+a.value|0;return n},$l=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vo;return r*ZP+e|0},Yl=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:us;return(r<<5)+r+e|0},nz=function(e,r){return e*2097152+r},pi=function(e){return e[0]*2097152+e[1]},nf=function(e,r){return[$l(e[0],r[0]),Yl(e[1],r[1])]},uC=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return QP(o,r)},bo=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return QP(o,r)},JP=function(){return az(arguments)},az=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=bo(a):r=bo(a,r)}return r},fC=!0,iz=console.warn!=null,oz=console.trace!=null,E1=Number.MAX_SAFE_INTEGER||9007199254740991,ek=function(){return!0},Zf=function(){return!1},cC=function(){return 0},C1=function(){},yr=function(e){throw new Error(e)},tk=function(e){if(e!==void 0)fC=!!e;else return fC},Xt=function(e){tk()&&(iz?console.warn(e):(console.log(e),oz&&console.trace()))},sz=function(e){return Et({},e)},Sa=function(e){return e==null?e:ir(e)?e.slice():Bt(e)?sz(e):e},lz=function(e){return e.slice()},rk=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},uz={},nk=function(){return uz},nn=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var o=r[i],s=n==null?void 0:n[o];a[o]=s===void 0?e[o]:s}return a}},Mi=function(e,r,n){for(var a=e.length-1;a>=0;a--)e[a]===r&&e.splice(a,1)},T1=function(e){e.splice(0,e.length)},fz=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},Mn=function(e,r,n){return n&&(r=VP(n,r)),e[r]},Wa=function(e,r,n,a){n&&(r=VP(n,r)),e[r]=a},cz=function(){function t(){Fi(this,t),this._obj={}}return Bi(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),Xa=typeof Map<"u"?Map:cz,dz="undefined",hz=function(){function t(e){if(Fi(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return Bi(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])}(),Ls=(typeof Set>"u"?"undefined":qr(Set))!==dz?Set:hz,Ac=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!b1(e)){yr("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){yr("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new Ls,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var o=r.renderedPosition,s=e.pan(),u=e.zoom();i.position={x:(o.x-s.x)/u,y:(o.y-s.y)/u}}var f=[];ir(r.classes)?f=r.classes:mt(r.classes)&&(f=r.classes.split(/\s+/));for(var c=0,h=f.length;c<h;c++){var g=f[c];!g||g===""||i.classes.add(g)}this.createEmitter(),(n===void 0||n)&&this.restore();var y=r.style||r.css;y&&(Xt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(y))},dC=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;Bt(n)&&!qn(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!br(a)?a:i,a=br(a)?a:function(){};for(var s=this._private.cy,u=n=mt(n)?this.filter(n):n,f=[],c=[],h={},g={},y={},p=0,C,E=this.byGroup(),v=E.nodes,x=E.edges,w=0;w<u.length;w++){var T=u[w],A=T.id();T.isNode()&&(f.unshift(T),e.bfs&&(y[A]=!0,c.push(T)),g[A]=0)}for(var M=function(){var q=e.bfs?f.shift():f.pop(),R=q.id();if(e.dfs){if(y[R])return 0;y[R]=!0,c.push(q)}var P=g[R],N=h[R],I=N!=null?N.source():null,z=N!=null?N.target():null,ae=N==null?void 0:q.same(I)?z[0]:I[0],re;if(re=a(q,N,ae,p++,P),re===!0)return C=q,1;if(re===!1)return 1;for(var K=q.connectedEdges().filter(function(X){return(!i||X.source().same(q))&&x.has(X)}),V=0;V<K.length;V++){var Z=K[V],U=Z.connectedNodes().filter(function(X){return!X.same(q)&&v.has(X)}),W=U.id();U.length!==0&&!y[W]&&(U=U[0],f.push(U),e.bfs&&(y[W]=!0,c.push(U)),h[W]=Z,g[W]=g[R]+1)}},D;f.length!==0&&(D=M(),!(D!==0&&D===1)););for(var _=s.collection(),k=0;k<c.length;k++){var F=c[k],G=h[F.id()];G!=null&&_.push(G),_.push(F)}return{path:s.collection(_),found:s.collection(C)}}},Xl={breadthFirstSearch:dC({bfs:!0}),depthFirstSearch:dC({dfs:!0})};Xl.bfs=Xl.breadthFirstSearch;Xl.dfs=Xl.depthFirstSearch;var xf={exports:{}},vz=xf.exports,hC;function pz(){return hC||(hC=1,function(t,e){(function(){var r,n,a,i,o,s,u,f,c,h,g,y,p,C,E;a=Math.floor,h=Math.min,n=function(v,x){return v<x?-1:v>x?1:0},c=function(v,x,w,T,A){var M;if(w==null&&(w=0),A==null&&(A=n),w<0)throw new Error("lo must be non-negative");for(T==null&&(T=v.length);w<T;)M=a((w+T)/2),A(x,v[M])<0?T=M:w=M+1;return[].splice.apply(v,[w,w-w].concat(x)),x},s=function(v,x,w){return w==null&&(w=n),v.push(x),C(v,0,v.length-1,w)},o=function(v,x){var w,T;return x==null&&(x=n),w=v.pop(),v.length?(T=v[0],v[0]=w,E(v,0,x)):T=w,T},f=function(v,x,w){var T;return w==null&&(w=n),T=v[0],v[0]=x,E(v,0,w),T},u=function(v,x,w){var T;return w==null&&(w=n),v.length&&w(v[0],x)<0&&(T=[v[0],x],x=T[0],v[0]=T[1],E(v,0,w)),x},i=function(v,x){var w,T,A,M,D,_;for(x==null&&(x=n),M=(function(){_=[];for(var k=0,F=a(v.length/2);0<=F?k<F:k>F;0<=F?k++:k--)_.push(k);return _}).apply(this).reverse(),D=[],T=0,A=M.length;T<A;T++)w=M[T],D.push(E(v,w,x));return D},p=function(v,x,w){var T;if(w==null&&(w=n),T=v.indexOf(x),T!==-1)return C(v,0,T,w),E(v,T,w)},g=function(v,x,w){var T,A,M,D,_;if(w==null&&(w=n),A=v.slice(0,x),!A.length)return A;for(i(A,w),_=v.slice(x),M=0,D=_.length;M<D;M++)T=_[M],u(A,T,w);return A.sort(w).reverse()},y=function(v,x,w){var T,A,M,D,_,k,F,G,B;if(w==null&&(w=n),x*10<=v.length){if(M=v.slice(0,x).sort(w),!M.length)return M;for(A=M[M.length-1],F=v.slice(x),D=0,k=F.length;D<k;D++)T=F[D],w(T,A)<0&&(c(M,T,0,null,w),M.pop(),A=M[M.length-1]);return M}for(i(v,w),B=[],_=0,G=h(x,v.length);0<=G?_<G:_>G;0<=G?++_:--_)B.push(o(v,w));return B},C=function(v,x,w,T){var A,M,D;for(T==null&&(T=n),A=v[w];w>x;){if(D=w-1>>1,M=v[D],T(A,M)<0){v[w]=M,w=D;continue}break}return v[w]=A},E=function(v,x,w){var T,A,M,D,_;for(w==null&&(w=n),A=v.length,_=x,M=v[x],T=2*x+1;T<A;)D=T+1,D<A&&!(w(v[T],v[D])<0)&&(T=D),v[x]=v[T],x=T,T=2*x+1;return v[x]=M,C(v,_,x,w)},r=function(){v.push=s,v.pop=o,v.replace=f,v.pushpop=u,v.heapify=i,v.updateItem=p,v.nlargest=g,v.nsmallest=y;function v(x){this.cmp=x??n,this.nodes=[]}return v.prototype.push=function(x){return s(this.nodes,x,this.cmp)},v.prototype.pop=function(){return o(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(x){return this.nodes.indexOf(x)!==-1},v.prototype.replace=function(x){return f(this.nodes,x,this.cmp)},v.prototype.pushpop=function(x){return u(this.nodes,x,this.cmp)},v.prototype.heapify=function(){return i(this.nodes,this.cmp)},v.prototype.updateItem=function(x){return p(this.nodes,x,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var x;return x=new v,x.nodes=this.nodes.slice(0),x},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v}(),function(v,x){return t.exports=x()}(this,function(){return r})}).call(vz)}(xf)),xf.exports}var Dh,vC;function gz(){return vC||(vC=1,Dh=pz()),Dh}var yz=gz(),cu=su(yz),mz=nn({root:null,weight:function(e){return 1},directed:!1}),bz={dijkstra:function(e){if(!Bt(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=mz(e),a=n.root,i=n.weight,o=n.directed,s=this,u=i,f=mt(a)?this.filter(a)[0]:a[0],c={},h={},g={},y=this.byGroup(),p=y.nodes,C=y.edges;C.unmergeBy(function(P){return P.isLoop()});for(var E=function(N){return c[N.id()]},v=function(N,I){c[N.id()]=I,x.updateItem(N)},x=new cu(function(P,N){return E(P)-E(N)}),w=0;w<p.length;w++){var T=p[w];c[T.id()]=T.same(f)?0:1/0,x.push(T)}for(var A=function(N,I){for(var z=(o?N.edgesTo(I):N.edgesWith(I)).intersect(C),ae=1/0,re,K=0;K<z.length;K++){var V=z[K],Z=u(V);(Z<ae||!re)&&(ae=Z,re=V)}return{edge:re,dist:ae}};x.size()>0;){var M=x.pop(),D=E(M),_=M.id();if(g[_]=D,D!==1/0)for(var k=M.neighborhood().intersect(p),F=0;F<k.length;F++){var G=k[F],B=G.id(),q=A(M,G),R=D+q.dist;R<E(G)&&(v(G,R),h[B]={node:M,edge:q.edge})}}return{distanceTo:function(N){var I=mt(N)?p.filter(N)[0]:N[0];return g[I.id()]},pathTo:function(N){var I=mt(N)?p.filter(N)[0]:N[0],z=[],ae=I,re=ae.id();if(I.length>0)for(z.unshift(I);h[re];){var K=h[re];z.unshift(K.edge),z.unshift(K.node),ae=K.node,re=ae.id()}return s.spawn(z)}}}},wz={kruskal:function(e){e=e||function(w){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,o=new Array(i),s=n,u=function(T){for(var A=0;A<o.length;A++){var M=o[A];if(M.has(T))return A}},f=0;f<i;f++)o[f]=this.spawn(n[f]);for(var c=a.sort(function(w,T){return e(w)-e(T)}),h=0;h<c.length;h++){var g=c[h],y=g.source()[0],p=g.target()[0],C=u(y),E=u(p),v=o[C],x=o[E];C!==E&&(s.merge(g),v.merge(x),o.splice(E,1))}return s}},xz=nn({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Ez={aStar:function(e){var r=this.cy(),n=xz(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,u=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var f=a.id(),c=i.id(),h={},g={},y={},p=new cu(function(re,K){return g[re.id()]-g[K.id()]}),C=new Ls,E={},v={},x=function(K,V){p.push(K),C.add(V)},w,T,A=function(){w=p.pop(),T=w.id(),C.delete(T)},M=function(K){return C.has(K)};x(a,f),h[f]=0,g[f]=o(a);for(var D=0;p.size()>0;){if(A(),D++,T===c){for(var _=[],k=i,F=c,G=v[F];_.unshift(k),G!=null&&_.unshift(G),k=E[F],k!=null;)F=k.id(),G=v[F];return{found:!0,distance:h[T],path:this.spawn(_),steps:D}}y[T]=!0;for(var B=w._private.edges,q=0;q<B.length;q++){var R=B[q];if(this.hasElementWithId(R.id())&&!(s&&R.data("source")!==T)){var P=R.source(),N=R.target(),I=P.id()!==T?P:N,z=I.id();if(this.hasElementWithId(z)&&!y[z]){var ae=h[T]+u(R);if(!M(z)){h[z]=ae,g[z]=ae+o(I),x(I,z),E[z]=w,v[z]=R;continue}ae<h[z]&&(h[z]=ae,g[z]=ae+o(I),E[z]=w,v[z]=R)}}}}return{found:!1,distance:void 0,path:void 0,steps:D}}},Cz=nn({weight:function(e){return 1},directed:!1}),Tz={floydWarshall:function(e){for(var r=this.cy(),n=Cz(e),a=n.weight,i=n.directed,o=a,s=this.byGroup(),u=s.nodes,f=s.edges,c=u.length,h=c*c,g=function(Z){return u.indexOf(Z)},y=function(Z){return u[Z]},p=new Array(h),C=0;C<h;C++){var E=C%c,v=(C-E)/c;v===E?p[C]=0:p[C]=1/0}for(var x=new Array(h),w=new Array(h),T=0;T<f.length;T++){var A=f[T],M=A.source()[0],D=A.target()[0];if(M!==D){var _=g(M),k=g(D),F=_*c+k,G=o(A);if(p[F]>G&&(p[F]=G,x[F]=k,w[F]=A),!i){var B=k*c+_;!i&&p[B]>G&&(p[B]=G,x[B]=_,w[B]=A)}}}for(var q=0;q<c;q++)for(var R=0;R<c;R++)for(var P=R*c+q,N=0;N<c;N++){var I=R*c+N,z=q*c+N;p[P]+p[z]<p[I]&&(p[I]=p[P]+p[z],x[I]=x[P])}var ae=function(Z){return(mt(Z)?r.filter(Z):Z)[0]},re=function(Z){return g(ae(Z))},K={distance:function(Z,U){var W=re(Z),X=re(U);return p[W*c+X]},path:function(Z,U){var W=re(Z),X=re(U),ee=y(W);if(W===X)return ee.collection();if(x[W*c+X]==null)return r.collection();var oe=r.collection(),te=W,ie;for(oe.merge(ee);W!==X;)te=W,W=x[W*c+X],ie=w[te*c+W],oe.merge(ie),oe.merge(y(W));return oe}};return K}},Sz=nn({weight:function(e){return 1},directed:!1,root:null}),Az={bellmanFord:function(e){var r=this,n=Sz(e),a=n.weight,i=n.directed,o=n.root,s=a,u=this,f=this.cy(),c=this.byGroup(),h=c.edges,g=c.nodes,y=g.length,p=new Xa,C=!1,E=[];o=f.collection(o)[0],h.unmergeBy(function(be){return be.isLoop()});for(var v=h.length,x=function(Te){var pe=p.get(Te.id());return pe||(pe={},p.set(Te.id(),pe)),pe},w=function(Te){return(mt(Te)?f.$(Te):Te)[0]},T=function(Te){return x(w(Te)).dist},A=function(Te){for(var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,de=w(Te),ye=[],Ee=de;;){if(Ee==null)return r.spawn();var ue=x(Ee),Ae=ue.edge,Pe=ue.pred;if(ye.unshift(Ee[0]),Ee.same(pe)&&ye.length>0)break;Ae!=null&&ye.unshift(Ae),Ee=Pe}return u.spawn(ye)},M=0;M<y;M++){var D=g[M],_=x(D);D.same(o)?_.dist=0:_.dist=1/0,_.pred=null,_.edge=null}for(var k=!1,F=function(Te,pe,de,ye,Ee,ue){var Ae=ye.dist+ue;Ae<Ee.dist&&!de.same(ye.edge)&&(Ee.dist=Ae,Ee.pred=Te,Ee.edge=de,k=!0)},G=1;G<y;G++){k=!1;for(var B=0;B<v;B++){var q=h[B],R=q.source(),P=q.target(),N=s(q),I=x(R),z=x(P);F(R,P,q,I,z,N),i||F(P,R,q,z,I,N)}if(!k)break}if(k)for(var ae=[],re=0;re<v;re++){var K=h[re],V=K.source(),Z=K.target(),U=s(K),W=x(V).dist,X=x(Z).dist;if(W+U<X||!i&&X+U<W)if(C||(Xt("Graph contains a negative weight cycle for Bellman-Ford"),C=!0),e.findNegativeWeightCycles!==!1){var ee=[];W+U<X&&ee.push(V),!i&&X+U<W&&ee.push(Z);for(var oe=ee.length,te=0;te<oe;te++){var ie=ee[te],se=[ie];se.push(x(ie).edge);for(var $=x(ie).pred;se.indexOf($)===-1;)se.push($),se.push(x($).edge),$=x($).pred;se=se.slice(se.indexOf($));for(var ne=se[0].id(),le=0,Se=2;Se<se.length;Se+=2)se[Se].id()<ne&&(ne=se[Se].id(),le=Se);se=se.slice(le).concat(se.slice(0,le)),se.push(se[0]);var De=se.map(function(be){return be.id()}).join(",");ae.indexOf(De)===-1&&(E.push(u.spawn(se)),ae.push(De))}}else break}return{distanceTo:T,pathTo:A,hasNegativeWeightCycle:C,negativeWeightCycles:E}}},Lz=Math.sqrt(2),Dz=function(e,r,n){n.length===0&&yr("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],s=r[i],u=r[o],f=n,c=f.length-1;c>=0;c--){var h=f[c],g=h[1],y=h[2];(r[g]===s&&r[y]===u||r[g]===u&&r[y]===s)&&f.splice(c,1)}for(var p=0;p<f.length;p++){var C=f[p];C[1]===u?(f[p]=C.slice(),f[p][1]=s):C[2]===u&&(f[p]=C.slice(),f[p][2]=s)}for(var E=0;E<r.length;E++)r[E]===u&&(r[E]=s);return f},_h=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=Dz(i,e,r),n--}return r},_z={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(z){return z.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/Lz);if(i<2){yr("At least 2 nodes are required for Karger-Stein algorithm");return}for(var f=[],c=0;c<o;c++){var h=a[c];f.push([c,n.indexOf(h.source()),n.indexOf(h.target())])}for(var g=1/0,y=[],p=new Array(i),C=new Array(i),E=new Array(i),v=function(ae,re){for(var K=0;K<i;K++)re[K]=ae[K]},x=0;x<=s;x++){for(var w=0;w<i;w++)C[w]=w;var T=_h(C,f.slice(),i,u),A=T.slice();v(C,E);var M=_h(C,T,u,2),D=_h(E,A,u,2);M.length<=D.length&&M.length<g?(g=M.length,y=M,v(C,p)):D.length<=M.length&&D.length<g&&(g=D.length,y=D,v(E,p))}for(var _=this.spawn(y.map(function(z){return a[z[0]]})),k=this.spawn(),F=this.spawn(),G=p[0],B=0;B<p.length;B++){var q=p[B],R=n[B];q===G?k.merge(R):F.merge(R)}var P=function(ae){var re=e.spawn();return ae.forEach(function(K){re.merge(K),K.connectedEdges().forEach(function(V){e.contains(V)&&!_.contains(V)&&re.merge(V)})}),re},N=[P(k),P(F)],I={cut:_,components:N,partition1:k,partition2:F};return I}},Mz=function(e){return{x:e.x,y:e.y}},Lc=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},ak=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},fs=function(e){return{x:e[0],y:e[1]}},Rz=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},Pz=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},kz=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=r;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i},Nz=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var s=0,u=e.length-1;u>=0;u--){var f=e[u];o?isFinite(f)||(e[u]=-1/0,s++):e.splice(u,1)}i&&e.sort(function(g,y){return g-y});var c=e.length,h=Math.floor(c/2);return c%2!==0?e[h+1+s]:(e[h-1+s]+e[h+s])/2},Oz=function(e){return Math.PI*e/180},af=function(e,r){return Math.atan2(r,e)-Math.PI/2},S1=Math.log2||function(t){return Math.log(t)/Math.log(2)},A1=function(e){return e>0?1:e<0?-1:0},wo=function(e,r){return Math.sqrt(lo(e,r))},lo=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},Iz=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},Vr=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},bs=function(e,r,n,a){return{x:Vr(e.x,r.x,n.x,a),y:Vr(e.y,r.y,n.y,a)}},Fz=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},o=wo(e,r),s={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+s.x*a,y:e.y+s.y*a}},Kl=function(e,r,n){return Math.max(e,Math.min(n,r))},Nn=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Bz=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},qz=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},zz=function(e,r,n){return{x1:e.x1+r,x2:e.x2+r,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},ik=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},Gz=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Ef=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Cf=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(r.length===1)n=a=i=o=r[0];else if(r.length===2)n=i=r[0],o=a=r[1];else if(r.length===4){var s=Fr(r,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},pC=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},L1=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Ts=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},Hz=function(e,r){return Ts(e,r.x,r.y)},Uz=function(e,r){return Ts(e,r.x1,r.y1)&&Ts(e,r.x2,r.y2)},ok=function(e,r,n,a,i,o,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",f=u==="auto"?Ri(i,o):u,c=i/2,h=o/2;f=Math.min(f,c,h);var g=f!==c,y=f!==h,p;if(g){var C=n-c+f-s,E=a-h-s,v=n+c-f+s,x=E;if(p=xi(e,r,n,a,C,E,v,x,!1),p.length>0)return p}if(y){var w=n+c+s,T=a-h+f-s,A=w,M=a+h-f+s;if(p=xi(e,r,n,a,w,T,A,M,!1),p.length>0)return p}if(g){var D=n-c+f-s,_=a+h+s,k=n+c-f+s,F=_;if(p=xi(e,r,n,a,D,_,k,F,!1),p.length>0)return p}if(y){var G=n-c-s,B=a-h+f-s,q=G,R=a+h-f+s;if(p=xi(e,r,n,a,G,B,q,R,!1),p.length>0)return p}var P;{var N=n-c+f,I=a-h+f;if(P=El(e,r,n,a,N,I,f+s),P.length>0&&P[0]<=N&&P[1]<=I)return[P[0],P[1]]}{var z=n+c-f,ae=a-h+f;if(P=El(e,r,n,a,z,ae,f+s),P.length>0&&P[0]>=z&&P[1]<=ae)return[P[0],P[1]]}{var re=n+c-f,K=a+h-f;if(P=El(e,r,n,a,re,K,f+s),P.length>0&&P[0]>=re&&P[1]>=K)return[P[0],P[1]]}{var V=n-c+f,Z=a+h-f;if(P=El(e,r,n,a,V,Z,f+s),P.length>0&&P[0]<=V&&P[1]>=Z)return[P[0],P[1]]}return[]},Vz=function(e,r,n,a,i,o,s){var u=s,f=Math.min(n,i),c=Math.max(n,i),h=Math.min(a,o),g=Math.max(a,o);return f-u<=e&&e<=c+u&&h-u<=r&&r<=g+u},Wz=function(e,r,n,a,i,o,s,u,f){var c={x1:Math.min(n,s,i)-f,x2:Math.max(n,s,i)+f,y1:Math.min(a,u,o)-f,y2:Math.max(a,u,o)+f};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},$z=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var o=Math.sqrt(i),s=2*e,u=(-r+o)/s,f=(-r-o)/s;return[u,f]},Yz=function(e,r,n,a,i){var o=1e-5;e===0&&(e=o),r/=e,n/=e,a/=e;var s,u,f,c,h,g,y,p;if(u=(3*n-r*r)/9,f=-(27*a)+r*(9*n-2*(r*r)),f/=54,s=u*u*u+f*f,i[1]=0,y=r/3,s>0){h=f+Math.sqrt(s),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),g=f-Math.sqrt(s),g=g<0?-Math.pow(-g,1/3):Math.pow(g,1/3),i[0]=-y+h+g,y+=(h+g)/2,i[4]=i[2]=-y,y=Math.sqrt(3)*(-g+h)/2,i[3]=y,i[5]=-y;return}if(i[5]=i[3]=0,s===0){p=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),i[0]=-y+2*p,i[4]=i[2]=-(p+y);return}u=-u,c=u*u*u,c=Math.acos(f/Math.sqrt(c)),p=2*Math.sqrt(u),i[0]=-y+p*Math.cos(c/3),i[2]=-y+p*Math.cos((c+2*Math.PI)/3),i[4]=-y+p*Math.cos((c+4*Math.PI)/3)},Xz=function(e,r,n,a,i,o,s,u){var f=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*u+4*o*o-4*o*u+u*u,c=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*u-6*o*o+3*o*u,h=1*3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*u-a*r+2*o*o+2*o*r-u*r,g=1*n*i-n*n+n*e-i*e+a*o-a*a+a*r-o*r,y=[];Yz(f,c,h,g,y);for(var p=1e-7,C=[],E=0;E<6;E+=2)Math.abs(y[E+1])<p&&y[E]>=0&&y[E]<=1&&C.push(y[E]);C.push(1),C.push(0);for(var v=-1,x,w,T,A=0;A<C.length;A++)x=Math.pow(1-C[A],2)*n+2*(1-C[A])*C[A]*i+C[A]*C[A]*s,w=Math.pow(1-C[A],2)*a+2*(1-C[A])*C[A]*o+C[A]*C[A]*u,T=Math.pow(x-e,2)+Math.pow(w-r,2),v>=0?T<v&&(v=T):v=T;return v},Kz=function(e,r,n,a,i,o){var s=[e-n,r-a],u=[i-n,o-a],f=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],h=s[0]*u[0]+s[1]*u[1],g=h*h/f;return h<0?c:g>f?(e-i)*(e-i)+(r-o)*(r-o):c-g},Rn=function(e,r,n){for(var a,i,o,s,u,f=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)u=(e-a)/(o-a)*(s-i)+i,u>r&&f++;else continue;return f%2!==0},Ja=function(e,r,n,a,i,o,s,u,f){var c=new Array(n.length),h;u[0]!=null?(h=Math.atan(u[1]/u[0]),u[0]<0?h=h+Math.PI/2:h=-h-Math.PI/2):h=u;for(var g=Math.cos(-h),y=Math.sin(-h),p=0;p<c.length/2;p++)c[p*2]=o/2*(n[p*2]*g-n[p*2+1]*y),c[p*2+1]=s/2*(n[p*2+1]*g+n[p*2]*y),c[p*2]+=a,c[p*2+1]+=i;var C;if(f>0){var E=Jf(c,-f);C=Qf(E)}else C=c;return Rn(e,r,C)},jz=function(e,r,n,a,i,o,s,u){for(var f=new Array(n.length*2),c=0;c<u.length;c++){var h=u[c];f[c*4+0]=h.startX,f[c*4+1]=h.startY,f[c*4+2]=h.stopX,f[c*4+3]=h.stopY;var g=Math.pow(h.cx-e,2)+Math.pow(h.cy-r,2);if(g<=Math.pow(h.radius,2))return!0}return Rn(e,r,f)},Qf=function(e){for(var r=new Array(e.length/2),n,a,i,o,s,u,f,c,h=0;h<e.length/4;h++){n=e[h*4],a=e[h*4+1],i=e[h*4+2],o=e[h*4+3],h<e.length/4-1?(s=e[(h+1)*4],u=e[(h+1)*4+1],f=e[(h+1)*4+2],c=e[(h+1)*4+3]):(s=e[0],u=e[1],f=e[2],c=e[3]);var g=xi(n,a,i,o,s,u,f,c,!0);r[h*2]=g[0],r[h*2+1]=g[1]}return r},Jf=function(e,r){for(var n=new Array(e.length*2),a,i,o,s,u=0;u<e.length/2;u++){a=e[u*2],i=e[u*2+1],u<e.length/2-1?(o=e[(u+1)*2],s=e[(u+1)*2+1]):(o=e[0],s=e[1]);var f=s-i,c=-(o-a),h=Math.sqrt(f*f+c*c),g=f/h,y=c/h;n[u*4]=a+g*r,n[u*4+1]=i+y*r,n[u*4+2]=o+g*r,n[u*4+3]=s+y*r}return n},Zz=function(e,r,n,a,i,o){var s=n-e,u=a-r;s/=i,u/=o;var f=Math.sqrt(s*s+u*u),c=f-1;if(c<0)return[];var h=c/f;return[(n-e)*h+e,(a-r)*h+r]},go=function(e,r,n,a,i,o,s){return e-=i,r-=o,e/=n/2+s,r/=a/2+s,e*e+r*r<=1},El=function(e,r,n,a,i,o,s){var u=[n-e,a-r],f=[e-i,r-o],c=u[0]*u[0]+u[1]*u[1],h=2*(f[0]*u[0]+f[1]*u[1]),g=f[0]*f[0]+f[1]*f[1]-s*s,y=h*h-4*c*g;if(y<0)return[];var p=(-h+Math.sqrt(y))/(2*c),C=(-h-Math.sqrt(y))/(2*c),E=Math.min(p,C),v=Math.max(p,C),x=[];if(E>=0&&E<=1&&x.push(E),v>=0&&v<=1&&x.push(v),x.length===0)return[];var w=x[0]*u[0]+e,T=x[0]*u[1]+r;if(x.length>1){if(x[0]==x[1])return[w,T];var A=x[1]*u[0]+e,M=x[1]*u[1]+r;return[w,T,A,M]}else return[w,T]},Mh=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},xi=function(e,r,n,a,i,o,s,u,f){var c=e-i,h=n-e,g=s-i,y=r-o,p=a-r,C=u-o,E=g*y-C*c,v=h*y-p*c,x=C*h-g*p;if(x!==0){var w=E/x,T=v/x,A=.001,M=0-A,D=1+A;return M<=w&&w<=D&&M<=T&&T<=D?[e+w*h,r+w*p]:f?[e+w*h,r+w*p]:[]}else return E===0||v===0?Mh(e,n,s)===s?[s,u]:Mh(e,n,i)===i?[i,o]:Mh(i,s,n)===n?[n,a]:[]:[]},jl=function(e,r,n,a,i,o,s,u){var f=[],c,h=new Array(n.length),g=!0;o==null&&(g=!1);var y;if(g){for(var p=0;p<h.length/2;p++)h[p*2]=n[p*2]*o+a,h[p*2+1]=n[p*2+1]*s+i;if(u>0){var C=Jf(h,-u);y=Qf(C)}else y=h}else y=n;for(var E,v,x,w,T=0;T<y.length/2;T++)E=y[T*2],v=y[T*2+1],T<y.length/2-1?(x=y[(T+1)*2],w=y[(T+1)*2+1]):(x=y[0],w=y[1]),c=xi(e,r,a,i,E,v,x,w),c.length!==0&&f.push(c[0],c[1]);return f},Qz=function(e,r,n,a,i,o,s,u,f){var c=[],h,g=new Array(n.length*2);f.forEach(function(x,w){w===0?(g[g.length-2]=x.startX,g[g.length-1]=x.startY):(g[w*4-2]=x.startX,g[w*4-1]=x.startY),g[w*4]=x.stopX,g[w*4+1]=x.stopY,h=El(e,r,a,i,x.cx,x.cy,x.radius),h.length!==0&&c.push(h[0],h[1])});for(var y=0;y<g.length/4;y++)h=xi(e,r,a,i,g[y*4],g[y*4+1],g[y*4+2],g[y*4+3],!1),h.length!==0&&c.push(h[0],h[1]);if(c.length>2){for(var p=[c[0],c[1]],C=Math.pow(p[0]-e,2)+Math.pow(p[1]-r,2),E=1;E<c.length/2;E++){var v=Math.pow(c[E*2]-e,2)+Math.pow(c[E*2+1]-r,2);v<=C&&(p[0]=c[E*2],p[1]=c[E*2+1],C=v)}return p}return c},of=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[r[0]+o*a[0],r[1]+o*a[1]]},Tn=function(e,r){var n=Nb(e,r);return n=sk(n),n},sk=function(e){for(var r,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,u=-1/0,f=0;f<a;f++)r=e[2*f],n=e[2*f+1],i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),u=Math.max(u,n);for(var c=2/(s-i),h=2/(u-o),g=0;g<a;g++)r=e[2*g]=e[2*g]*c,n=e[2*g+1]=e[2*g+1]*h,i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),u=Math.max(u,n);if(o<-1)for(var y=0;y<a;y++)n=e[2*y+1]=e[2*y+1]+(-1-o);return e},Nb=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},Ri=function(e,r){return Math.min(e/4,r/4,8)},lk=function(e,r){return Math.min(e/10,r/10,8)},D1=function(){return 8},Jz=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Ob=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function eG(t,e){function r(h){for(var g=[],y=0;y<h.length;y++){var p=h[y],C=h[(y+1)%h.length],E={x:C.x-p.x,y:C.y-p.y},v={x:-E.y,y:E.x},x=Math.sqrt(v.x*v.x+v.y*v.y);g.push({x:v.x/x,y:v.y/x})}return g}function n(h,g){var y=1/0,p=-1/0,C=Pn(h),E;try{for(C.s();!(E=C.n()).done;){var v=E.value,x=v.x*g.x+v.y*g.y;y=Math.min(y,x),p=Math.max(p,x)}}catch(w){C.e(w)}finally{C.f()}return{min:y,max:p}}function a(h,g){return!(h.max<g.min||g.max<h.min)}var i=[].concat(Xf(r(t)),Xf(r(e))),o=Pn(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,f=n(t,u),c=n(e,u);if(!a(f,c))return!1}}catch(h){o.e(h)}finally{o.f()}return!0}var tG=nn({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),rG={pageRank:function(e){for(var r=tG(e),n=r.dampingFactor,a=r.precision,i=r.iterations,o=r.weight,s=this._private.cy,u=this.byGroup(),f=u.nodes,c=u.edges,h=f.length,g=h*h,y=c.length,p=new Array(g),C=new Array(h),E=(1-n)/h,v=0;v<h;v++){for(var x=0;x<h;x++){var w=v*h+x;p[w]=0}C[v]=0}for(var T=0;T<y;T++){var A=c[T],M=A.data("source"),D=A.data("target");if(M!==D){var _=f.indexOfId(M),k=f.indexOfId(D),F=o(A),G=k*h+_;p[G]+=F,C[_]+=F}}for(var B=1/h+E,q=0;q<h;q++)if(C[q]===0)for(var R=0;R<h;R++){var P=R*h+q;p[P]=B}else for(var N=0;N<h;N++){var I=N*h+q;p[I]=p[I]/C[q]+E}for(var z=new Array(h),ae=new Array(h),re,K=0;K<h;K++)z[K]=1;for(var V=0;V<i;V++){for(var Z=0;Z<h;Z++)ae[Z]=0;for(var U=0;U<h;U++)for(var W=0;W<h;W++){var X=U*h+W;ae[U]+=p[X]*z[W]}Iz(ae),re=z,z=ae,ae=re;for(var ee=0,oe=0;oe<h;oe++){var te=re[oe]-z[oe];ee+=te*te}if(ee<a)break}var ie={rank:function($){return $=s.collection($)[0],z[f.indexOf($)]}};return ie}},gC=nn({root:null,weight:function(e){return 1},directed:!1,alpha:0}),ws={degreeCentralityNormalized:function(e){e=gC(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},h={},g=0,y=0,p=0;p<a;p++){var C=n[p],E=C.id();e.root=C;var v=this.degreeCentrality(e);g<v.indegree&&(g=v.indegree),y<v.outdegree&&(y=v.outdegree),c[E]=v.indegree,h[E]=v.outdegree}return{indegree:function(w){return g==0?0:(mt(w)&&(w=r.filter(w)),c[w.id()]/g)},outdegree:function(w){return y===0?0:(mt(w)&&(w=r.filter(w)),h[w.id()]/y)}}}else{for(var i={},o=0,s=0;s<a;s++){var u=n[s];e.root=u;var f=this.degreeCentrality(e);o<f.degree&&(o=f.degree),i[u.id()]=f.degree}return{degree:function(w){return o===0?0:(mt(w)&&(w=r.filter(w)),i[w.id()]/o)}}}},degreeCentrality:function(e){e=gC(e);var r=this.cy(),n=this,a=e,i=a.root,o=a.weight,s=a.directed,u=a.alpha;if(i=r.collection(i)[0],s){for(var y=i.connectedEdges(),p=y.filter(function(M){return M.target().same(i)&&n.has(M)}),C=y.filter(function(M){return M.source().same(i)&&n.has(M)}),E=p.length,v=C.length,x=0,w=0,T=0;T<p.length;T++)x+=o(p[T]);for(var A=0;A<C.length;A++)w+=o(C[A]);return{indegree:Math.pow(E,1-u)*Math.pow(x,u),outdegree:Math.pow(v,1-u)*Math.pow(w,u)}}else{for(var f=i.connectedEdges().intersection(n),c=f.length,h=0,g=0;g<f.length;g++)h+=o(f[g]);return{degree:Math.pow(c,1-u)*Math.pow(h,u)}}}};ws.dc=ws.degreeCentrality;ws.dcn=ws.degreeCentralityNormalised=ws.degreeCentralityNormalized;var yC=nn({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),xs={closenessCentralityNormalized:function(e){for(var r=yC(e),n=r.harmonic,a=r.weight,i=r.directed,o=this.cy(),s={},u=0,f=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),h=0;h<f.length;h++){for(var g=0,y=f[h],p=0;p<f.length;p++)if(h!==p){var C=c.distance(y,f[p]);n?g+=1/C:g+=C}n||(g=1/g),u<g&&(u=g),s[y.id()]=g}return{closeness:function(v){return u==0?0:(mt(v)?v=o.filter(v)[0].id():v=v.id(),s[v]/u)}}},closenessCentrality:function(e){var r=yC(e),n=r.root,a=r.weight,i=r.directed,o=r.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),u=0,f=this.nodes(),c=0;c<f.length;c++){var h=f[c];if(!h.same(n)){var g=s.distanceTo(h);o?u+=1/g:u+=g}}return o?u:1/u}};xs.cc=xs.closenessCentrality;xs.ccn=xs.closenessCentralityNormalised=xs.closenessCentralityNormalized;var nG=nn({weight:null,directed:!1}),Ib={betweennessCentrality:function(e){for(var r=nG(e),n=r.directed,a=r.weight,i=a!=null,o=this.cy(),s=this.nodes(),u={},f={},c=0,h={set:function(w,T){f[w]=T,T>c&&(c=T)},get:function(w){return f[w]}},g=0;g<s.length;g++){var y=s[g],p=y.id();n?u[p]=y.outgoers().nodes():u[p]=y.openNeighborhood().nodes(),h.set(p,0)}for(var C=function(){for(var w=s[E].id(),T=[],A={},M={},D={},_=new cu(function(U,W){return D[U]-D[W]}),k=0;k<s.length;k++){var F=s[k].id();A[F]=[],M[F]=0,D[F]=1/0}for(M[w]=1,D[w]=0,_.push(w);!_.empty();){var G=_.pop();if(T.push(G),i)for(var B=0;B<u[G].length;B++){var q=u[G][B],R=o.getElementById(G),P=void 0;R.edgesTo(q).length>0?P=R.edgesTo(q)[0]:P=q.edgesTo(R)[0];var N=a(P);q=q.id(),D[q]>D[G]+N&&(D[q]=D[G]+N,_.nodes.indexOf(q)<0?_.push(q):_.updateItem(q),M[q]=0,A[q]=[]),D[q]==D[G]+N&&(M[q]=M[q]+M[G],A[q].push(G))}else for(var I=0;I<u[G].length;I++){var z=u[G][I].id();D[z]==1/0&&(_.push(z),D[z]=D[G]+1),D[z]==D[G]+1&&(M[z]=M[z]+M[G],A[z].push(G))}}for(var ae={},re=0;re<s.length;re++)ae[s[re].id()]=0;for(;T.length>0;){for(var K=T.pop(),V=0;V<A[K].length;V++){var Z=A[K][V];ae[Z]=ae[Z]+M[Z]/M[K]*(1+ae[K])}K!=s[E].id()&&h.set(K,h.get(K)+ae[K])}},E=0;E<s.length;E++)C();var v={betweenness:function(w){var T=o.collection(w).id();return h.get(T)},betweennessNormalized:function(w){if(c==0)return 0;var T=o.collection(w).id();return h.get(T)/c}};return v.betweennessNormalised=v.betweennessNormalized,v}};Ib.bc=Ib.betweennessCentrality;var aG=nn({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),iG=function(e){return aG(e)},oG=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},sG=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},uk=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var o=0;o<r;o++)e[o*r+a]=e[o*r+a]/n}},lG=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)a[i*n+u]+=e[i*n+s]*r[s*n+u]}return a},uG=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=lG(e,a,r);return e},fG=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return uk(a,r),a},cG=function(e,r,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return!1}return!0},dG=function(e,r,n,a){for(var i=[],o=0;o<r;o++){for(var s=[],u=0;u<r;u++)Math.round(e[o*r+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&i.push(a.collection(s))}return i},hG=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},vG=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&hG(e[r],e[n])&&e.splice(n,1);return e},mC=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=iG(e),o={},s=0;s<r.length;s++)o[r[s].id()]=s;for(var u=r.length,f=u*u,c=new Array(f),h,g=0;g<f;g++)c[g]=0;for(var y=0;y<n.length;y++){var p=n[y],C=o[p.source().id()],E=o[p.target().id()],v=oG(p,i.attributes);c[C*u+E]+=v,c[E*u+C]+=v}sG(c,u,i.multFactor),uk(c,u);for(var x=!0,w=0;x&&w<i.maxIterations;)x=!1,h=uG(c,u,i.expandFactor),c=fG(h,u,i.inflateFactor),cG(c,h,f,4)||(x=!0),w++;var T=dG(c,u,r,a);return T=vG(T),T},pG={markovClustering:mC,mcl:mC},gG=function(e){return e},fk=function(e,r){return Math.abs(r-e)},bC=function(e,r,n){return e+fk(r,n)},wC=function(e,r,n){return e+Math.pow(n-r,2)},yG=function(e){return Math.sqrt(e)},mG=function(e,r,n){return Math.max(e,fk(r,n))},vl=function(e,r,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:gG,s=a,u,f,c=0;c<e;c++)u=r(c),f=n(c),s=i(s,u,f);return o(s)},Ss={euclidean:function(e,r,n){return e>=2?vl(e,r,n,0,wC,yG):vl(e,r,n,0,bC)},squaredEuclidean:function(e,r,n){return vl(e,r,n,0,wC)},manhattan:function(e,r,n){return vl(e,r,n,0,bC)},max:function(e,r,n){return vl(e,r,n,-1/0,mG)}};Ss["squared-euclidean"]=Ss.squaredEuclidean;Ss.squaredeuclidean=Ss.squaredEuclidean;function Dc(t,e,r,n,a,i){var o;return br(t)?o=t:o=Ss[t]||Ss.euclidean,e===0&&br(t)?o(a,i):o(e,r,n,a,i)}var bG=nn({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),_1=function(e){return bG(e)},ec=function(e,r,n,a,i){var o=i!=="kMedoids",s=o?function(h){return n[h]}:function(h){return a[h](n)},u=function(g){return a[g](r)},f=n,c=r;return Dc(e,a.length,s,u,f,c)},Rh=function(e,r,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(r),u=null,f=0;f<a;f++)i[f]=e.min(n[f]).value,o[f]=e.max(n[f]).value;for(var c=0;c<r;c++){u=[];for(var h=0;h<a;h++)u[h]=Math.random()*(o[h]-i[h])+i[h];s[c]=u}return s},ck=function(e,r,n,a,i){for(var o=1/0,s=0,u=0;u<r.length;u++){var f=ec(n,e,r[u],a,i);f<o&&(o=f,s=u)}return s},dk=function(e,r,n){for(var a=[],i=null,o=0;o<r.length;o++)i=r[o],n[i.id()]===e&&a.push(i);return a},wG=function(e,r,n){return Math.abs(r-e)<=n},xG=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-r[a][i]);if(o>n)return!1}return!0},EG=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},xC=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];EG(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<r;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},EC=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=ec("manhattan",r[i],e,n,"kMedoids");return a},CG=function(e){var r=this.cy(),n=this.nodes(),a=null,i=_1(e),o=new Array(i.k),s={},u;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,u=Rh(n,i.k,i.attributes)):qr(i.testCentroids)==="object"?u=i.testCentroids:u=Rh(n,i.k,i.attributes):u=Rh(n,i.k,i.attributes);for(var f=!0,c=0;f&&c<i.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],s[a.id()]=ck(a,u,i.distance,i.attributes,"kMeans");f=!1;for(var g=0;g<i.k;g++){var y=dk(g,n,s);if(y.length!==0){for(var p=i.attributes.length,C=u[g],E=new Array(p),v=new Array(p),x=0;x<p;x++){v[x]=0;for(var w=0;w<y.length;w++)a=y[w],v[x]+=i.attributes[x](a);E[x]=v[x]/y.length,wG(E[x],C[x],i.sensitivityThreshold)||(f=!0)}u[g]=E,o[g]=r.collection(y)}}c++}return o},TG=function(e){var r=this.cy(),n=this.nodes(),a=null,i=_1(e),o=new Array(i.k),s,u={},f,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(qr(i.testCentroids)==="object"?s=i.testCentroids:s=xC(n,i.k)):s=xC(n,i.k);for(var h=!0,g=0;h&&g<i.maxIterations;){for(var y=0;y<n.length;y++)a=n[y],u[a.id()]=ck(a,s,i.distance,i.attributes,"kMedoids");h=!1;for(var p=0;p<s.length;p++){var C=dk(p,n,u);if(C.length!==0){c[p]=EC(s[p],C,i.attributes);for(var E=0;E<C.length;E++)f=EC(C[E],C,i.attributes),f<c[p]&&(c[p]=f,s[p]=C[E],h=!0);o[p]=r.collection(C)}}g++}return o},SG=function(e,r,n,a,i){for(var o,s,u=0;u<r.length;u++)for(var f=0;f<e.length;f++)a[u][f]=Math.pow(n[u][f],i.m);for(var c=0;c<e.length;c++)for(var h=0;h<i.attributes.length;h++){o=0,s=0;for(var g=0;g<r.length;g++)o+=a[g][c]*i.attributes[h](r[g]),s+=a[g][c];e[c][h]=o/s}},AG=function(e,r,n,a,i){for(var o=0;o<e.length;o++)r[o]=e[o].slice();for(var s,u,f,c=2/(i.m-1),h=0;h<n.length;h++)for(var g=0;g<a.length;g++){s=0;for(var y=0;y<n.length;y++)u=ec(i.distance,a[g],n[h],i.attributes,"cmeans"),f=ec(i.distance,a[g],n[y],i.attributes,"cmeans"),s+=Math.pow(u/f,c);e[g][h]=1/s}},LG=function(e,r,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,u,f=0;f<r.length;f++){s=-1/0,u=-1;for(var c=0;c<r[0].length;c++)r[f][c]>s&&(s=r[f][c],u=c);i[u].push(e[f])}for(var h=0;h<i.length;h++)i[h]=a.collection(i[h]);return i},CC=function(e){var r=this.cy(),n=this.nodes(),a=_1(e),i,o,s,u,f;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(a.k);s=new Array(n.length);for(var h=0;h<n.length;h++)s[h]=new Array(a.k);for(var g=0;g<n.length;g++){for(var y=0,p=0;p<a.k;p++)s[g][p]=Math.random(),y+=s[g][p];for(var C=0;C<a.k;C++)s[g][C]=s[g][C]/y}o=new Array(a.k);for(var E=0;E<a.k;E++)o[E]=new Array(a.attributes.length);f=new Array(n.length);for(var v=0;v<n.length;v++)f[v]=new Array(a.k);for(var x=!0,w=0;x&&w<a.maxIterations;)x=!1,SG(o,n,s,f,a),AG(s,u,o,n,a),xG(s,u,a.sensitivityThreshold)||(x=!0),w++;return i=LG(n,s,a,r),{clusters:i,degreeOfMembership:s}},DG={kMeans:CG,kMedoids:TG,fuzzyCMeans:CC,fcm:CC},_G=nn({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),MG={single:"min",complete:"max"},RG=function(e){var r=_G(e),n=MG[r.linkage];return n!=null&&(r.linkage=n),r},TC=function(e,r,n,a,i){for(var o=0,s=1/0,u,f=i.attributes,c=function(k,F){return Dc(i.distance,f.length,function(G){return f[G](k)},function(G){return f[G](F)},k,F)},h=0;h<e.length;h++){var g=e[h].key,y=n[g][a[g]];y<s&&(o=g,s=y)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var p=r[o],C=r[a[o]],E;i.mode==="dendrogram"?E={left:p,right:C,key:p.key}:E={value:p.value.concat(C.value),key:p.key},e[p.index]=E,e.splice(C.index,1),r[p.key]=E;for(var v=0;v<e.length;v++){var x=e[v];p.key===x.key?u=1/0:i.linkage==="min"?(u=n[p.key][x.key],n[p.key][x.key]>n[C.key][x.key]&&(u=n[C.key][x.key])):i.linkage==="max"?(u=n[p.key][x.key],n[p.key][x.key]<n[C.key][x.key]&&(u=n[C.key][x.key])):i.linkage==="mean"?u=(n[p.key][x.key]*p.size+n[C.key][x.key]*C.size)/(p.size+C.size):i.mode==="dendrogram"?u=c(x.value,p.value):u=c(x.value[0],p.value[0]),n[p.key][x.key]=n[x.key][p.key]=u}for(var w=0;w<e.length;w++){var T=e[w].key;if(a[T]===p.key||a[T]===C.key){for(var A=T,M=0;M<e.length;M++){var D=e[M].key;n[T][D]<n[T][A]&&(A=D)}a[T]=A}e[w].index=w}return p.key=C.key=p.index=C.index=null,!0},cs=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&cs(e.left,r),e.right&&cs(e.right,r)))},Fb=function(e,r){if(!e)return"";if(e.left&&e.right){var n=Fb(e.left,r),a=Fb(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Bb=function(e,r,n){if(!e)return[];var a=[],i=[],o=[];return r===0?(e.left&&cs(e.left,a),e.right&&cs(e.right,i),o=a.concat(i),[n.collection(o)]):r===1?e.value?[n.collection(e.value)]:(e.left&&cs(e.left,a),e.right&&cs(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=Bb(e.left,r-1,n)),e.right&&(i=Bb(e.right,r-1,n)),a.concat(i))},SC=function(e){for(var r=this.cy(),n=this.nodes(),a=RG(e),i=a.attributes,o=function(w,T){return Dc(a.distance,i.length,function(A){return i[A](w)},function(A){return i[A](T)},w,T)},s=[],u=[],f=[],c=[],h=0;h<n.length;h++){var g={value:a.mode==="dendrogram"?n[h]:[n[h]],key:h,index:h};s[h]=g,c[h]=g,u[h]=[],f[h]=0}for(var y=0;y<s.length;y++)for(var p=0;p<=y;p++){var C=void 0;a.mode==="dendrogram"?C=y===p?1/0:o(s[y].value,s[p].value):C=y===p?1/0:o(s[y].value[0],s[p].value[0]),u[y][p]=C,u[p][y]=C,C<u[y][f[y]]&&(f[y]=p)}for(var E=TC(s,c,u,f,a);E;)E=TC(s,c,u,f,a);var v;return a.mode==="dendrogram"?(v=Bb(s[0],a.dendrogramDepth,r),a.addDendrogram&&Fb(s[0],r)):(v=new Array(s.length),s.forEach(function(x,w){x.key=x.index=null,v[w]=r.collection(x.value)})),v},PG={hierarchicalClustering:SC,hca:SC},kG=nn({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),NG=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||yr("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||it(n)||yr("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),kG(e)},OG=function(e,r,n,a){var i=function(s,u){return a[u](s)};return-Dc(e,a.length,function(o){return i(r,o)},function(o){return i(n,o)},r,n)},IG=function(e,r){var n=null;return r==="median"?n=Nz(e):r==="mean"?n=kz(e):r==="min"?n=Rz(e):r==="max"?n=Pz(e):n=r,n},FG=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},AC=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,u=0;u<n.length;u++){var f=n[u];r[i*e+f]>s&&(o=f,s=r[i*e+f])}o>0&&a.push(o)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},BG=function(e,r,n){for(var a=AC(e,r,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var u=-1,f=-1/0,c=0;c<o.length;c++){for(var h=0,g=0;g<o.length;g++)h+=r[o[g]*e+o[c]];h>f&&(u=c,f=h)}n[i]=o[u]}return a=AC(e,r,n),a},LC=function(e){for(var r=this.cy(),n=this.nodes(),a=NG(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,u,f,c,h,g;s=n.length,u=s*s,f=new Array(u);for(var y=0;y<u;y++)f[y]=-1/0;for(var p=0;p<s;p++)for(var C=0;C<s;C++)p!==C&&(f[p*s+C]=OG(a.distance,n[p],n[C],a.attributes));c=IG(f,a.preference);for(var E=0;E<s;E++)f[E*s+E]=c;h=new Array(u);for(var v=0;v<u;v++)h[v]=0;g=new Array(u);for(var x=0;x<u;x++)g[x]=0;for(var w=new Array(s),T=new Array(s),A=new Array(s),M=0;M<s;M++)w[M]=0,T[M]=0,A[M]=0;for(var D=new Array(s*a.minIterations),_=0;_<D.length;_++)D[_]=0;var k;for(k=0;k<a.maxIterations;k++){for(var F=0;F<s;F++){for(var G=-1/0,B=-1/0,q=-1,R=0,P=0;P<s;P++)w[P]=h[F*s+P],R=g[F*s+P]+f[F*s+P],R>=G?(B=G,G=R,q=P):R>B&&(B=R);for(var N=0;N<s;N++)h[F*s+N]=(1-a.damping)*(f[F*s+N]-G)+a.damping*w[N];h[F*s+q]=(1-a.damping)*(f[F*s+q]-B)+a.damping*w[q]}for(var I=0;I<s;I++){for(var z=0,ae=0;ae<s;ae++)w[ae]=g[ae*s+I],T[ae]=Math.max(0,h[ae*s+I]),z+=T[ae];z-=T[I],T[I]=h[I*s+I],z+=T[I];for(var re=0;re<s;re++)g[re*s+I]=(1-a.damping)*Math.min(0,z-T[re])+a.damping*w[re];g[I*s+I]=(1-a.damping)*(z-T[I])+a.damping*w[I]}for(var K=0,V=0;V<s;V++){var Z=g[V*s+V]+h[V*s+V]>0?1:0;D[k%a.minIterations*s+V]=Z,K+=Z}if(K>0&&(k>=a.minIterations-1||k==a.maxIterations-1)){for(var U=0,W=0;W<s;W++){A[W]=0;for(var X=0;X<a.minIterations;X++)A[W]+=D[X*s+W];(A[W]===0||A[W]===a.minIterations)&&U++}if(U===s)break}}for(var ee=FG(s,h,g),oe=BG(s,f,ee),te={},ie=0;ie<ee.length;ie++)te[ee[ie]]=[];for(var se=0;se<n.length;se++){var $=i[n[se].id()],ne=oe[$];ne!=null&&te[ne].push(n[se])}for(var le=new Array(ee.length),Se=0;Se<ee.length;Se++)le[Se]=r.collection(te[ee[Se]]);return le},qG={affinityPropagation:LC,ap:LC},zG=nn({root:void 0,directed:!1}),GG={hierholzer:function(e){if(!Bt(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=zG(e),a=n.root,i=n.directed,o=this,s=!1,u,f,c;a&&(c=mt(a)?this.filter(a)[0].id():a[0].id());var h={},g={};i?o.forEach(function(x){var w=x.id();if(x.isNode()){var T=x.indegree(!0),A=x.outdegree(!0),M=T-A,D=A-T;M==1?u?s=!0:u=w:D==1?f?s=!0:f=w:(D>1||M>1)&&(s=!0),h[w]=[],x.outgoers().forEach(function(_){_.isEdge()&&h[w].push(_.id())})}else g[w]=[void 0,x.target().id()]}):o.forEach(function(x){var w=x.id();if(x.isNode()){var T=x.degree(!0);T%2&&(u?f?s=!0:f=w:u=w),h[w]=[],x.connectedEdges().forEach(function(A){return h[w].push(A.id())})}else g[w]=[x.source().id(),x.target().id()]});var y={found:!1,trail:void 0};if(s)return y;if(f&&u)if(i){if(c&&f!=c)return y;c=f}else{if(c&&f!=c&&u!=c)return y;c||(c=f)}else c||(c=o[0].id());var p=function(w){for(var T=w,A=[w],M,D,_;h[T].length;)M=h[T].shift(),D=g[M][0],_=g[M][1],T!=_?(h[_]=h[_].filter(function(k){return k!=M}),T=_):!i&&T!=D&&(h[D]=h[D].filter(function(k){return k!=M}),T=D),A.unshift(M),A.unshift(T);return A},C=[],E=[];for(E=p(c);E.length!=1;)h[E[0]].length==0?(C.unshift(o.getElementById(E.shift())),C.unshift(o.getElementById(E.shift()))):E=p(E.shift()).concat(E);C.unshift(o.getElementById(E.shift()));for(var v in h)if(h[v].length)return y;return y.found=!0,y.trail=this.spawn(C,!0),y}},sf=function(){var e=this,r={},n=0,a=0,i=[],o=[],s={},u=function(g,y){for(var p=o.length-1,C=[],E=e.spawn();o[p].x!=g||o[p].y!=y;)C.push(o.pop().edge),p--;C.push(o.pop().edge),C.forEach(function(v){var x=v.connectedNodes().intersection(e);E.merge(v),x.forEach(function(w){var T=w.id(),A=w.connectedEdges().intersection(e);E.merge(w),r[T].cutVertex?E.merge(A.filter(function(M){return M.isLoop()})):E.merge(A)})}),i.push(E)},f=function(g,y,p){g===p&&(a+=1),r[y]={id:n,low:n++,cutVertex:!1};var C=e.getElementById(y).connectedEdges().intersection(e);if(C.size()===0)i.push(e.spawn(e.getElementById(y)));else{var E,v,x,w;C.forEach(function(T){E=T.source().id(),v=T.target().id(),x=E===y?v:E,x!==p&&(w=T.id(),s[w]||(s[w]=!0,o.push({x:y,y:x,edge:T})),x in r?r[y].low=Math.min(r[y].low,r[x].id):(f(g,x,y),r[y].low=Math.min(r[y].low,r[x].low),r[y].id<=r[x].low&&(r[y].cutVertex=!0,u(y,x))))})}};e.forEach(function(h){if(h.isNode()){var g=h.id();g in r||(a=0,f(g,g),r[g].cutVertex=a>1)}});var c=Object.keys(r).filter(function(h){return r[h].cutVertex}).map(function(h){return e.getElementById(h)});return{cut:e.spawn(c),components:i}},HG={hopcroftTarjanBiconnected:sf,htbc:sf,htb:sf,hopcroftTarjanBiconnectedComponents:sf},lf=function(){var e=this,r={},n=0,a=[],i=[],o=e.spawn(e),s=function(f){i.push(f),r[f]={index:n,low:n++,explored:!1};var c=e.getElementById(f).connectedEdges().intersection(e);if(c.forEach(function(C){var E=C.target().id();E!==f&&(E in r||s(E),r[E].explored||(r[f].low=Math.min(r[f].low,r[E].low)))}),r[f].index===r[f].low){for(var h=e.spawn();;){var g=i.pop();if(h.merge(e.getElementById(g)),r[g].low=r[f].index,r[g].explored=!0,g===f)break}var y=h.edgesWith(h),p=h.merge(y);a.push(p),o=o.difference(p)}};return e.forEach(function(u){if(u.isNode()){var f=u.id();f in r||s(f)}}),{cut:o,components:a}},UG={tarjanStronglyConnected:lf,tsc:lf,tscc:lf,tarjanStronglyConnectedComponents:lf},hk={};[Xl,bz,wz,Ez,Tz,Az,_z,rG,ws,xs,Ib,pG,DG,PG,qG,GG,HG,UG].forEach(function(t){Et(hk,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var vk=0,pk=1,gk=2,ca=function(e){if(!(this instanceof ca))return new ca(e);this.id="Thenable/1.0.7",this.state=vk,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};ca.prototype={fulfill:function(e){return DC(this,pk,"fulfillValue",e)},reject:function(e){return DC(this,gk,"rejectReason",e)},then:function(e,r){var n=this,a=new ca;return n.onFulfilled.push(MC(e,a,"fulfill")),n.onRejected.push(MC(r,a,"reject")),yk(n),a.proxy}};var DC=function(e,r,n,a){return e.state===vk&&(e.state=r,e[n]=a,yk(e)),e},yk=function(e){e.state===pk?_C(e,"onFulfilled",e.fulfillValue):e.state===gk&&_C(e,"onRejected",e.rejectReason)},_C=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},MC=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(o){r.reject(o);return}mk(r,i)}}},mk=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(qr(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):mk(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};ca.all=function(t){return new ca(function(e,r){for(var n=new Array(t.length),a=0,i=function(u,f){n[u]=f,a++,a===t.length&&e(n)},o=0;o<t.length;o++)(function(s){var u=t[s],f=u!=null&&u.then!=null;if(f)u.then(function(h){i(s,h)},function(h){r(h)});else{var c=u;i(s,c)}})(o)})};ca.resolve=function(t){return new ca(function(e,r){e(t)})};ca.reject=function(t){return new ca(function(e,r){r(t)})};var Ds=typeof Promise<"u"?Promise:ca,qb=function(e,r,n){var a=b1(e),i=!a,o=this._private=Et({duration:1e3},r,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&br(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var u=e.pan();o.startPan={x:u.x,y:u.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},xo=qb.prototype;Et(xo,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),qn(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(f,c){var h=e[f];h!=null&&(e[f]=e[c],e[c]=h)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new Ds(function(a,i){n.push(function(){a()})})}});xo.complete=xo.completed;xo.run=xo.play;xo.running=xo.playing;var VG={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var s=a[o];s._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this,u=!i,f=!u;if(!s.styleEnabled())return this;var c=s.style();r=Et({},r,n);var h=Object.keys(r).length===0;if(h)return new qb(o[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(f&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),f&&r.renderedPosition!=null){var g=r.renderedPosition,y=s.pan(),p=s.zoom();r.position=ak(g,p,y)}if(u&&r.panBy!=null){var C=r.panBy,E=s.pan();r.pan={x:E.x+C.x,y:E.y+C.y}}var v=r.center||r.centre;if(u&&v!=null){var x=s.getCenterPan(v.eles,r.zoom);x!=null&&(r.pan=x)}if(u&&r.fit!=null){var w=r.fit,T=s.getFitViewport(w.eles||w.boundingBox,w.padding);T!=null&&(r.pan=T.pan,r.zoom=T.zoom)}if(u&&Bt(r.zoom)){var A=s.getZoomedViewport(r.zoom);A!=null?(A.zoomed&&(r.zoom=A.zoom),A.panned&&(r.pan=A.pan)):r.zoom=null}return new qb(o[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(r=Et({},r,n));for(var u=0;u<o.length;u++){var f=o[u],c=f.animated()&&(r.queue===void 0||r.queue),h=f.animation(r,c?{queue:!0}:void 0);h.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<o.length;u++){for(var f=o[u],c=f._private,h=c.animation.current,g=0;g<h.length;g++){var y=h[g],p=y._private;n&&(p.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},Ph,RC;function _c(){if(RC)return Ph;RC=1;var t=Array.isArray;return Ph=t,Ph}var kh,PC;function WG(){if(PC)return kh;PC=1;var t=_c(),e=uu(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return kh=a,kh}var Nh,kC;function $G(){if(kC)return Nh;kC=1;var t=KP(),e=lu(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(s){if(!e(s))return!1;var u=t(s);return u==n||u==a||u==r||u==i}return Nh=o,Nh}var Oh,NC;function YG(){if(NC)return Oh;NC=1;var t=Sc(),e=t["__core-js_shared__"];return Oh=e,Oh}var Ih,OC;function XG(){if(OC)return Ih;OC=1;var t=YG(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return Ih=r,Ih}var Fh,IC;function KG(){if(IC)return Fh;IC=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Fh=r,Fh}var Bh,FC;function jG(){if(FC)return Bh;FC=1;var t=$G(),e=XG(),r=lu(),n=KG(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,f=s.hasOwnProperty,c=RegExp("^"+u.call(f).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(g){if(!r(g)||e(g))return!1;var y=t(g)?c:i;return y.test(n(g))}return Bh=h,Bh}var qh,BC;function ZG(){if(BC)return qh;BC=1;function t(e,r){return e==null?void 0:e[r]}return qh=t,qh}var zh,qC;function M1(){if(qC)return zh;qC=1;var t=jG(),e=ZG();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return zh=r,zh}var Gh,zC;function Mc(){if(zC)return Gh;zC=1;var t=M1(),e=t(Object,"create");return Gh=e,Gh}var Hh,GC;function QG(){if(GC)return Hh;GC=1;var t=Mc();function e(){this.__data__=t?t(null):{},this.size=0}return Hh=e,Hh}var Uh,HC;function JG(){if(HC)return Uh;HC=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Uh=t,Uh}var Vh,UC;function e5(){if(UC)return Vh;UC=1;var t=Mc(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var s=o[i];return s===e?void 0:s}return n.call(o,i)?o[i]:void 0}return Vh=a,Vh}var Wh,VC;function t5(){if(VC)return Wh;VC=1;var t=Mc(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Wh=n,Wh}var $h,WC;function r5(){if(WC)return $h;WC=1;var t=Mc(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return $h=r,$h}var Yh,$C;function n5(){if($C)return Yh;$C=1;var t=QG(),e=JG(),r=e5(),n=t5(),a=r5();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Yh=i,Yh}var Xh,YC;function a5(){if(YC)return Xh;YC=1;function t(){this.__data__=[],this.size=0}return Xh=t,Xh}var Kh,XC;function bk(){if(XC)return Kh;XC=1;function t(e,r){return e===r||e!==e&&r!==r}return Kh=t,Kh}var jh,KC;function Rc(){if(KC)return jh;KC=1;var t=bk();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return jh=e,jh}var Zh,jC;function i5(){if(jC)return Zh;jC=1;var t=Rc(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var s=i.length-1;return o==s?i.pop():r.call(i,o,1),--this.size,!0}return Zh=n,Zh}var Qh,ZC;function o5(){if(ZC)return Qh;ZC=1;var t=Rc();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return Qh=e,Qh}var Jh,QC;function s5(){if(QC)return Jh;QC=1;var t=Rc();function e(r){return t(this.__data__,r)>-1}return Jh=e,Jh}var ev,JC;function l5(){if(JC)return ev;JC=1;var t=Rc();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return ev=e,ev}var tv,eT;function u5(){if(eT)return tv;eT=1;var t=a5(),e=i5(),r=o5(),n=s5(),a=l5();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,tv=i,tv}var rv,tT;function f5(){if(tT)return rv;tT=1;var t=M1(),e=Sc(),r=t(e,"Map");return rv=r,rv}var nv,rT;function c5(){if(rT)return nv;rT=1;var t=n5(),e=u5(),r=f5();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return nv=n,nv}var av,nT;function d5(){if(nT)return av;nT=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return av=t,av}var iv,aT;function Pc(){if(aT)return iv;aT=1;var t=d5();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return iv=e,iv}var ov,iT;function h5(){if(iT)return ov;iT=1;var t=Pc();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return ov=e,ov}var sv,oT;function v5(){if(oT)return sv;oT=1;var t=Pc();function e(r){return t(this,r).get(r)}return sv=e,sv}var lv,sT;function p5(){if(sT)return lv;sT=1;var t=Pc();function e(r){return t(this,r).has(r)}return lv=e,lv}var uv,lT;function g5(){if(lT)return uv;lT=1;var t=Pc();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return uv=e,uv}var fv,uT;function y5(){if(uT)return fv;uT=1;var t=c5(),e=h5(),r=v5(),n=p5(),a=g5();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,fv=i,fv}var cv,fT;function m5(){if(fT)return cv;fT=1;var t=y5(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,s=a?a.apply(this,o):o[0],u=i.cache;if(u.has(s))return u.get(s);var f=n.apply(this,o);return i.cache=u.set(s,f)||u,f};return i.cache=new(r.Cache||t),i}return r.Cache=t,cv=r,cv}var dv,cT;function b5(){if(cT)return dv;cT=1;var t=m5(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return dv=r,dv}var hv,dT;function wk(){if(dT)return hv;dT=1;var t=b5(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,s,u,f){i.push(u?f.replace(r,"$1"):s||o)}),i});return hv=n,hv}var vv,hT;function xk(){if(hT)return vv;hT=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return vv=t,vv}var pv,vT;function w5(){if(vT)return pv;vT=1;var t=x1(),e=xk(),r=_c(),n=uu(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(s){if(typeof s=="string")return s;if(r(s))return e(s,o)+"";if(n(s))return i?i.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return pv=o,pv}var gv,pT;function Ek(){if(pT)return gv;pT=1;var t=w5();function e(r){return r==null?"":t(r)}return gv=e,gv}var yv,gT;function Ck(){if(gT)return yv;gT=1;var t=_c(),e=WG(),r=wk(),n=Ek();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return yv=a,yv}var mv,yT;function R1(){if(yT)return mv;yT=1;var t=uu();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return mv=e,mv}var bv,mT;function x5(){if(mT)return bv;mT=1;var t=Ck(),e=R1();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return bv=r,bv}var wv,bT;function E5(){if(bT)return wv;bT=1;var t=x5();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return wv=e,wv}var C5=E5(),T5=su(C5),xv,wT;function S5(){if(wT)return xv;wT=1;var t=M1(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return xv=e,xv}var Ev,xT;function A5(){if(xT)return Ev;xT=1;var t=S5();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return Ev=e,Ev}var Cv,ET;function L5(){if(ET)return Cv;ET=1;var t=A5(),e=bk(),r=Object.prototype,n=r.hasOwnProperty;function a(i,o,s){var u=i[o];(!(n.call(i,o)&&e(u,s))||s===void 0&&!(o in i))&&t(i,o,s)}return Cv=a,Cv}var Tv,CT;function D5(){if(CT)return Tv;CT=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return Tv=r,Tv}var Sv,TT;function _5(){if(TT)return Sv;TT=1;var t=L5(),e=Ck(),r=D5(),n=lu(),a=R1();function i(o,s,u,f){if(!n(o))return o;s=e(s,o);for(var c=-1,h=s.length,g=h-1,y=o;y!=null&&++c<h;){var p=a(s[c]),C=u;if(p==="__proto__"||p==="constructor"||p==="prototype")return o;if(c!=g){var E=y[p];C=f?f(E,p,y):void 0,C===void 0&&(C=n(E)?E:r(s[c+1])?[]:{})}t(y,p,C),y=y[p]}return o}return Sv=i,Sv}var Av,ST;function M5(){if(ST)return Av;ST=1;var t=_5();function e(r,n,a){return r==null?r:t(r,n,a)}return Av=e,Av}var R5=M5(),P5=su(R5),Lv,AT;function k5(){if(AT)return Lv;AT=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return Lv=t,Lv}var Dv,LT;function N5(){if(LT)return Dv;LT=1;var t=xk(),e=k5(),r=_c(),n=uu(),a=wk(),i=R1(),o=Ek();function s(u){return r(u)?t(u,i):n(u)?[u]:e(a(o(u)))}return Dv=s,Dv}var O5=N5(),I5=su(O5),F5={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=Et({},r,e),function(a,i){var o=e,s=this,u=s.length!==void 0,f=u?s:[s],c=u?s[0]:s;if(mt(a)){var h=a.indexOf(".")!==-1,g=h&&I5(a);if(o.allowGetting&&i===void 0){var y;return c&&(o.beforeGet(c),g&&c._private[o.field][a]===void 0?y=T5(c._private[o.field],g):y=c._private[o.field][a]),y}else if(o.allowSetting&&i!==void 0){var p=!o.immutableKeys[a];if(p){var C=qP({},a,i);o.beforeSet(s,C);for(var E=0,v=f.length;E<v;E++){var x=f[E];o.canSet(x)&&(g&&c._private[o.field][a]===void 0?P5(x._private[o.field],g,i):x._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&Bt(a)){var w=a,T,A,M=Object.keys(w);o.beforeSet(s,w);for(var D=0;D<M.length;D++){T=M[D],A=w[T];var _=!o.immutableKeys[T];if(_)for(var k=0;k<f.length;k++){var F=f[k];o.canSet(F)&&(F._private[o.field][T]=A)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&br(a)){var G=a;s.on(o.bindingEvent,G)}else if(o.allowGetting&&a===void 0){var B;return c&&(o.beforeGet(c),B=c._private[o.field]),B}return s}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Et({},r,e),function(a){var i=e,o=this,s=o.length!==void 0,u=s?o:[o];if(mt(a)){for(var f=a.split(/\s+/),c=f.length,h=0;h<c;h++){var g=f[h];if(!_i(g)){var y=!i.immutableKeys[g];if(y)for(var p=0,C=u.length;p<C;p++)u[p]._private[i.field][g]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var E=0,v=u.length;E<v;E++)for(var x=u[E]._private[i.field],w=Object.keys(x),T=0;T<w.length;T++){var A=w[T],M=!i.immutableKeys[A];M&&(x[A]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},B5={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new Ds(function(s,u){var f=function(y){i.off.apply(i,h),s(y)},c=o.concat([f]),h=c.concat([]);i.on.apply(i,c)})}}},$t={};[VG,F5,B5].forEach(function(t){Et($t,t)});var q5={animate:$t.animate(),animation:$t.animation(),animated:$t.animated(),clearQueue:$t.clearQueue(),delay:$t.delay(),delayAnimation:$t.delayAnimation(),stop:$t.stop()},Tf={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(p){return n.push(p)}),n}else ir(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Ls(e),o=0;o<r.length;o++){for(var s=r[o],u=s._private,f=u.classes,c=!1,h=0;h<e.length;h++){var g=e[h],y=f.has(g);if(!y){c=!0;break}}c||(c=f.size!==e.length),c&&(u.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){ir(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],o=0,s=n.length;o<s;o++)for(var u=n[o],f=u._private.classes,c=!1,h=0;h<e.length;h++){var g=e[h],y=f.has(g),p=!1;r||a&&!y?(f.add(g),p=!0):(!r||a&&y)&&(f.delete(g),p=!0),!c&&p&&(i.push(u),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Tf.className=Tf.classNames=Tf.classes;var It={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Br,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};It.variable="(?:[\\w-.]|(?:\\\\"+It.metaChar+"))+";It.className="(?:[\\w-]|(?:\\\\"+It.metaChar+"))+";It.value=It.string+"|"+It.number;It.id=It.variable;(function(){var t,e,r;for(t=It.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],It.comparatorOp+="|@"+e;for(t=It.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(It.comparatorOp+="|\\!"+e)})();var er=function(){return{checks:[]}},ht={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},zb=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return zq(t.selector,e.selector)}),z5=function(){for(var t={},e,r=0;r<zb.length;r++)e=zb[r],t[e.selector]=e.matches;return t}(),G5=function(e,r){return z5[e](r)},H5="("+zb.map(function(t){return t.selector}).join("|")+")",es=function(e){return e.replace(new RegExp("\\\\("+It.metaChar+")","g"),function(r,n){return n})},gi=function(e,r,n){e[e.length-1]=n},Gb=[{name:"group",query:!0,regex:"("+It.group+")",populate:function(e,r,n){var a=Fr(n,1),i=a[0];r.checks.push({type:ht.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:H5,populate:function(e,r,n){var a=Fr(n,1),i=a[0];r.checks.push({type:ht.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+It.id+")",populate:function(e,r,n){var a=Fr(n,1),i=a[0];r.checks.push({type:ht.ID,value:es(i)})}},{name:"className",query:!0,regex:"\\.("+It.className+")",populate:function(e,r,n){var a=Fr(n,1),i=a[0];r.checks.push({type:ht.CLASS,value:es(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+It.variable+")\\s*\\]",populate:function(e,r,n){var a=Fr(n,1),i=a[0];r.checks.push({type:ht.DATA_EXIST,field:es(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+It.variable+")\\s*("+It.comparatorOp+")\\s*("+It.value+")\\s*\\]",populate:function(e,r,n){var a=Fr(n,3),i=a[0],o=a[1],s=a[2],u=new RegExp("^"+It.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),r.checks.push({type:ht.DATA_COMPARE,field:es(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+It.boolOp+")\\s*("+It.variable+")\\s*\\]",populate:function(e,r,n){var a=Fr(n,2),i=a[0],o=a[1];r.checks.push({type:ht.DATA_BOOL,field:es(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+It.meta+")\\s*("+It.comparatorOp+")\\s*("+It.number+")\\s*\\]\\]",populate:function(e,r,n){var a=Fr(n,3),i=a[0],o=a[1],s=a[2];r.checks.push({type:ht.META_COMPARE,field:es(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:It.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=er();return s}},{name:"directedEdge",separator:!0,regex:It.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=er(),a=r,i=er();return n.checks.push({type:ht.DIRECTED_EDGE,source:a,target:i}),gi(e,r,n),e.edgeCount++,i}else{var o=er(),s=r,u=er();return o.checks.push({type:ht.NODE_SOURCE,source:s,target:u}),gi(e,r,o),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:It.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=er(),a=r,i=er();return n.checks.push({type:ht.UNDIRECTED_EDGE,nodes:[a,i]}),gi(e,r,n),e.edgeCount++,i}else{var o=er(),s=r,u=er();return o.checks.push({type:ht.NODE_NEIGHBOR,node:s,neighbor:u}),gi(e,r,o),u}}},{name:"child",separator:!0,regex:It.child,populate:function(e,r){if(e.currentSubject==null){var n=er(),a=er(),i=e[e.length-1];return n.checks.push({type:ht.CHILD,parent:i,child:a}),gi(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=er(),s=e[e.length-1],u=er(),f=er(),c=er(),h=er();return o.checks.push({type:ht.COMPOUND_SPLIT,left:s,right:u,subject:f}),f.checks=r.checks,r.checks=[{type:ht.TRUE}],h.checks.push({type:ht.TRUE}),u.checks.push({type:ht.PARENT,parent:h,child:c}),gi(e,s,o),e.currentSubject=f,e.compoundCount++,c}else{var g=er(),y=er(),p=[{type:ht.PARENT,parent:g,child:y}];return g.checks=r.checks,r.checks=p,e.compoundCount++,y}}},{name:"descendant",separator:!0,regex:It.descendant,populate:function(e,r){if(e.currentSubject==null){var n=er(),a=er(),i=e[e.length-1];return n.checks.push({type:ht.DESCENDANT,ancestor:i,descendant:a}),gi(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=er(),s=e[e.length-1],u=er(),f=er(),c=er(),h=er();return o.checks.push({type:ht.COMPOUND_SPLIT,left:s,right:u,subject:f}),f.checks=r.checks,r.checks=[{type:ht.TRUE}],h.checks.push({type:ht.TRUE}),u.checks.push({type:ht.ANCESTOR,ancestor:h,descendant:c}),gi(e,s,o),e.currentSubject=f,e.compoundCount++,c}else{var g=er(),y=er(),p=[{type:ht.ANCESTOR,ancestor:g,descendant:y}];return g.checks=r.checks,r.checks=p,e.compoundCount++,y}}},{name:"subject",modifier:!0,regex:It.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Xt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===ht.DIRECTED_EDGE?a.type=ht.NODE_TARGET:i===ht.UNDIRECTED_EDGE&&(a.type=ht.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Gb.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var U5=function(e){for(var r,n,a,i=0;i<Gb.length;i++){var o=Gb[i],s=o.name,u=e.match(o.regexObj);if(u!=null){n=u,r=o,a=s;var f=u[0];e=e.substring(f.length);break}}return{expr:r,match:n,name:a,remaining:e}},V5=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},W5=function(e){var r=this,n=r.inputText=e,a=r[0]=er();for(r.length=1,n=V5(n);;){var i=U5(n);if(i.expr==null)return Xt("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(r,a,o);if(s===!1)return!1;if(s!=null&&(a=s),n=i.remaining,n.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var f=0;f<r.length;f++){var c=r[f];if(c.compoundCount>0&&c.edgeCount>0)return Xt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Xt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Xt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},$5=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return mt(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,h){var g=c.type,y=c.value;switch(g){case ht.GROUP:{var p=e(y);return p.substring(0,p.length-1)}case ht.DATA_COMPARE:{var C=c.field,E=c.operator;return"["+C+n(e(E))+r(y)+"]"}case ht.DATA_BOOL:{var v=c.operator,x=c.field;return"["+e(v)+x+"]"}case ht.DATA_EXIST:{var w=c.field;return"["+w+"]"}case ht.META_COMPARE:{var T=c.operator,A=c.field;return"[["+A+n(e(T))+r(y)+"]]"}case ht.STATE:return y;case ht.ID:return"#"+y;case ht.CLASS:return"."+y;case ht.PARENT:case ht.CHILD:return i(c.parent,h)+n(">")+i(c.child,h);case ht.ANCESTOR:case ht.DESCENDANT:return i(c.ancestor,h)+" "+i(c.descendant,h);case ht.COMPOUND_SPLIT:{var M=i(c.left,h),D=i(c.subject,h),_=i(c.right,h);return M+(M.length>0?" ":"")+D+_}case ht.TRUE:return""}},i=function(c,h){return c.checks.reduce(function(g,y,p){return g+(h===c&&p===0?"$":"")+a(y,h)},"")},o="",s=0;s<this.length;s++){var u=this[s];o+=i(u,u.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},Y5={parse:W5,toString:$5},Tk=function(e,r,n){var a,i=mt(e),o=it(e),s=mt(n),u,f,c=!1,h=!1,g=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),h=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||s||c)&&(u=!i&&!o?"":""+e,f=""+n),c&&(e=u=u.toLowerCase(),n=f=f.toLowerCase()),r){case"*=":a=u.indexOf(f)>=0;break;case"$=":a=u.indexOf(f,u.length-f.length)>=0;break;case"^=":a=u.indexOf(f)===0;break;case"=":a=e===n;break;case">":g=!0,a=e>n;break;case">=":g=!0,a=e>=n;break;case"<":g=!0,a=e<n;break;case"<=":g=!0,a=e<=n;break;default:a=!1;break}return h&&(e!=null||!g)&&(a=!a),a},X5=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},K5=function(e){return e!==void 0},P1=function(e,r){return e.data(r)},j5=function(e,r){return e[r]()},xr=[],dr=function(e,r){return e.checks.every(function(n){return xr[n.type](n,r)})};xr[ht.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};xr[ht.STATE]=function(t,e){var r=t.value;return G5(r,e)};xr[ht.ID]=function(t,e){var r=t.value;return e.id()===r};xr[ht.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};xr[ht.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Tk(j5(e,r),n,a)};xr[ht.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Tk(P1(e,r),n,a)};xr[ht.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return X5(P1(e,r),n)};xr[ht.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,K5(P1(e,r))};xr[ht.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return dr(r,a)&&dr(n,i)||dr(n,a)&&dr(r,i)};xr[ht.NODE_NEIGHBOR]=function(t,e){return dr(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&dr(t.neighbor,r)})};xr[ht.DIRECTED_EDGE]=function(t,e){return dr(t.source,e.source())&&dr(t.target,e.target())};xr[ht.NODE_SOURCE]=function(t,e){return dr(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&dr(t.target,r)})};xr[ht.NODE_TARGET]=function(t,e){return dr(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&dr(t.source,r)})};xr[ht.CHILD]=function(t,e){return dr(t.child,e)&&dr(t.parent,e.parent())};xr[ht.PARENT]=function(t,e){return dr(t.parent,e)&&e.children().some(function(r){return dr(t.child,r)})};xr[ht.DESCENDANT]=function(t,e){return dr(t.descendant,e)&&e.ancestors().some(function(r){return dr(t.ancestor,r)})};xr[ht.ANCESTOR]=function(t,e){return dr(t.ancestor,e)&&e.descendants().some(function(r){return dr(t.descendant,r)})};xr[ht.COMPOUND_SPLIT]=function(t,e){return dr(t.subject,e)&&dr(t.left,e)&&dr(t.right,e)};xr[ht.TRUE]=function(){return!0};xr[ht.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};xr[ht.FILTER]=function(t,e){var r=t.value;return r(e)};var Z5=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===ht.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var o=0;o<r.length;o++){var s=r[o];if(dr(s,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},Q5=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(dr(a,e))return!0}return!1},J5={matches:Q5,filter:Z5},Pi=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||mt(e)&&e.match(/^\s*$/)||(qn(e)?this.addQuery({checks:[{type:ht.COLLECTION,value:e.collection()}]}):br(e)?this.addQuery({checks:[{type:ht.FILTER,value:e}]}):mt(e)?this.parse(e)||(this.invalid=!0):yr("A selector must be created from a string; found "))},ki=Pi.prototype;[Y5,J5].forEach(function(t){return Et(ki,t)});ki.text=function(){return this.inputText};ki.size=function(){return this.length};ki.eq=function(t){return this[t]};ki.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};ki.addQuery=function(t){this[this.length++]=t};ki.selector=ki.toString;var Ti={allAre:function(e){var r=new Pi(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Pi(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Ti.allAreNeighbours=Ti.allAreNeighbors;Ti.has=Ti.contains;Ti.equal=Ti.equals=Ti.same;var $n=function(e,r){return function(a,i,o,s){var u=a,f=this,c;if(u==null?c="":qn(u)&&u.length===1&&(c=u.id()),f.length===1&&c){var h=f[0]._private,g=h.traversalCache=h.traversalCache||{},y=g[r]=g[r]||[],p=bo(c),C=y[p];return C||(y[p]=e.call(f,a,i,o,s))}else return e.call(f,a,i,o,s)}},As={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&r.push(o)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:$n(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];r.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function k1(t,e,r,n){for(var a=[],i=new Ls,o=t.cy(),s=o.hasCompoundNodes(),u=0;u<t.length;u++){var f=t[u];r?a.push(f):s&&n(a,i,f)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),s&&n(a,i,c)}return t}function Sk(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}As.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return k1(this,t,e,Sk)};function Ak(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}As.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return k1(this,t,e,Ak)};function eH(t,e,r){Ak(t,e,r),Sk(t,e,r)}As.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return k1(this,t,e,eH)};As.ancestors=As.parents;var Zl,Lk;Zl=Lk={data:$t.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:$t.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:$t.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$t.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:$t.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:$t.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Zl.attr=Zl.data;Zl.removeAttr=Zl.removeData;var tH=Lk,kc={};function _v(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=t(a,s))}return n}else return}}Et(kc,{degree:_v(function(t,e){return e.source().same(e.target())?2:1}),indegree:_v(function(t,e){return e.target().same(t)?1:0}),outdegree:_v(function(t,e){return e.source().same(t)?1:0})});function ts(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],s=o[t](r);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}Et(kc,{minDegree:ts("degree",function(t,e){return t<e}),maxDegree:ts("degree",function(t,e){return t>e}),minIndegree:ts("indegree",function(t,e){return t<e}),maxIndegree:ts("indegree",function(t,e){return t>e}),minOutdegree:ts("outdegree",function(t,e){return t<e}),maxOutdegree:ts("outdegree",function(t,e){return t>e})});Et(kc,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var sa,Dk,_k=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},DT={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){_k(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};sa=Dk={position:$t.data(DT),silentPosition:$t.data(Et({},DT,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){_k(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(Bt(e))r?this.silentPosition(e):this.position(e);else if(br(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=n(o,i))&&(r?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(Bt(e)?(a={x:it(e.x)?e.x:0,y:it(e.y)?e.y:0},n=r):mt(e)&&it(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),f={x:u.x+a.x,y:u.y+a.y};n?s.silentPosition(f):s.position(f)}}i.endBatch()}return this},silentShift:function(e,r){return Bt(e)?this.shift(e,!0):mt(e)&&it(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=Bt(e)?e:void 0,u=s!==void 0||r!==void 0&&mt(e);if(n&&n.isNode())if(u)for(var f=0;f<this.length;f++){var c=this[f];r!==void 0?c.position(e,(r-o[e])/i):s!==void 0&&c.position(ak(s,i,o))}else{var h=n.position();return s=Lc(h,i,o),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=Bt(e)?e:void 0,o=i!==void 0||r!==void 0&&mt(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var u=0;u<this.length;u++){var f=this[u],c=s?f.parent():null,h=c&&c.length>0,g=h;h&&(c=c[0]);var y=g?c.position():{x:0,y:0};r!==void 0?f.position(e,r+y[e]):i!==void 0&&f.position({x:i.x+y.x,y:i.y+y.y})}else{var p=n.position(),C=s?n.parent():null,E=C&&C.length>0,v=E;E&&(C=C[0]);var x=v?C.position():{x:0,y:0};return i={x:p.x-x.x,y:p.y-x.y},e===void 0?i:i[e]}else if(!o)return;return this}};sa.modelPosition=sa.point=sa.position;sa.modelPositions=sa.points=sa.positions;sa.renderedPoint=sa.renderedPosition;sa.relativePoint=sa.relativePosition;var rH=Dk,Es,qi;Es=qi={};qi.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,u=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:u,w:o-i,h:u-s}};qi.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};qi.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(o){if(!o.isParent())return;var s=o._private,u=o.children(),f=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},h=u.boundingBox({includeLabels:f,includeOverlays:!1,useCache:!1}),g=s.position;(h.w===0||h.h===0)&&(h={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},h.x1=g.x-h.w/2,h.x2=g.x+h.w/2,h.y1=g.y-h.h/2,h.y2=g.y+h.h/2);function y(k,F,G){var B=0,q=0,R=F+G;return k>0&&R>0&&(B=F/R*k,q=G/R*k),{biasDiff:B,biasComplementDiff:q}}function p(k,F,G,B){if(G.units==="%")switch(B){case"width":return k>0?G.pfValue*k:0;case"height":return F>0?G.pfValue*F:0;case"average":return k>0&&F>0?G.pfValue*(k+F)/2:0;case"min":return k>0&&F>0?k>F?G.pfValue*F:G.pfValue*k:0;case"max":return k>0&&F>0?k>F?G.pfValue*k:G.pfValue*F:0;default:return 0}else return G.units==="px"?G.pfValue:0}var C=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(C=C*100/c.width.val);var E=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(E=E*100/c.width.val);var v=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(v=v*100/c.height.val);var x=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(x=x*100/c.height.val);var w=y(c.width.val-h.w,C,E),T=w.biasDiff,A=w.biasComplementDiff,M=y(c.height.val-h.h,v,x),D=M.biasDiff,_=M.biasComplementDiff;s.autoPadding=p(h.w,h.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(h.w,c.width.val),g.x=(-T+h.x1+h.x2+A)/2,s.autoHeight=Math.max(h.h,c.height.val),g.y=(-D+h.y1+h.y2+_)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var Wn=function(e){return e===1/0||e===-1/0?0:e},ia=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},uo=function(e,r){return r==null?e:ia(e,r.x1,r.y1,r.x2,r.y2)},pl=function(e,r,n){return Mn(e,r,n)},uf=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,o=i.arrowWidth/2,s=r.pstyle(n+"-arrow-shape").value,u,f;if(s!=="none"){n==="source"?(u=i.srcX,f=i.srcY):n==="target"?(u=i.tgtX,f=i.tgtY):(u=i.midX,f=i.midY);var c=a.arrowBounds=a.arrowBounds||{},h=c[n]=c[n]||{};h.x1=u-o,h.y1=f-o,h.x2=u+o,h.y2=f+o,h.w=h.x2-h.x1,h.h=h.y2-h.y1,Ef(h,1),ia(e,h.x1,h.y1,h.x2,h.y2)}}},Mv=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,o=i.rstyle,s=r.pstyle(a+"label").strValue;if(s){var u=r.pstyle("text-halign"),f=r.pstyle("text-valign"),c=pl(o,"labelWidth",n),h=pl(o,"labelHeight",n),g=pl(o,"labelX",n),y=pl(o,"labelY",n),p=r.pstyle(a+"text-margin-x").pfValue,C=r.pstyle(a+"text-margin-y").pfValue,E=r.isEdge(),v=r.pstyle(a+"text-rotation"),x=r.pstyle("text-outline-width").pfValue,w=r.pstyle("text-border-width").pfValue,T=w/2,A=r.pstyle("text-background-padding").pfValue,M=2,D=h,_=c,k=_/2,F=D/2,G,B,q,R;if(E)G=g-k,B=g+k,q=y-F,R=y+F;else{switch(u.value){case"left":G=g-_,B=g;break;case"center":G=g-k,B=g+k;break;case"right":G=g,B=g+_;break}switch(f.value){case"top":q=y-D,R=y;break;case"center":q=y-F,R=y+F;break;case"bottom":q=y,R=y+D;break}}var P=p-Math.max(x,T)-A-M,N=p+Math.max(x,T)+A+M,I=C-Math.max(x,T)-A-M,z=C+Math.max(x,T)+A+M;G+=P,B+=N,q+=I,R+=z;var ae=n||"main",re=i.labelBounds,K=re[ae]=re[ae]||{};K.x1=G,K.y1=q,K.x2=B,K.y2=R,K.w=B-G,K.h=R-q,K.leftPad=P,K.rightPad=N,K.topPad=I,K.botPad=z;var V=E&&v.strValue==="autorotate",Z=v.pfValue!=null&&v.pfValue!==0;if(V||Z){var U=V?pl(i.rstyle,"labelAngle",n):v.pfValue,W=Math.cos(U),X=Math.sin(U),ee=(G+B)/2,oe=(q+R)/2;if(!E){switch(u.value){case"left":ee=B;break;case"right":ee=G;break}switch(f.value){case"top":oe=R;break;case"bottom":oe=q;break}}var te=function(be,Te){return be=be-ee,Te=Te-oe,{x:be*W-Te*X+ee,y:be*X+Te*W+oe}},ie=te(G,q),se=te(G,R),$=te(B,q),ne=te(B,R);G=Math.min(ie.x,se.x,$.x,ne.x),B=Math.max(ie.x,se.x,$.x,ne.x),q=Math.min(ie.y,se.y,$.y,ne.y),R=Math.max(ie.y,se.y,$.y,ne.y)}var le=ae+"Rot",Se=re[le]=re[le]||{};Se.x1=G,Se.y1=q,Se.x2=B,Se.y2=R,Se.w=B-G,Se.h=R-q,ia(e,G,q,B,R),ia(i.labelBounds.all,G,q,B,R)}return e}},nH=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value;if(n>0&&a>0){var i=r.pstyle("outline-offset").value,o=r.pstyle("shape").value,s=a+i,u=(e.w+s*2)/e.w,f=(e.h+s*2)/e.h,c=0,h=0;["diamond","pentagon","round-triangle"].includes(o)?(u=(e.w+s*2.4)/e.w,h=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?u=(e.w+s*2.4)/e.w:o==="star"?(u=(e.w+s*2.8)/e.w,f=(e.h+s*2.6)/e.h,h=-s/3.8):o==="triangle"?(u=(e.w+s*2.8)/e.w,f=(e.h+s*2.4)/e.h,h=-s/1.4):o==="vee"&&(u=(e.w+s*4.4)/e.w,f=(e.h+s*3.8)/e.h,h=-s*.5);var g=e.h*f-e.h,y=e.w*u-e.w;if(Cf(e,[Math.ceil(g/2),Math.ceil(y/2)]),c!=0||h!==0){var p=zz(e,c,h);ik(e,p)}}}},aH=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=Nn(),s=e._private,u=e.isNode(),f=e.isEdge(),c,h,g,y,p,C,E=s.rstyle,v=u&&a?e.pstyle("bounds-expansion").pfValue:[0],x=function(De){return De.pstyle("display").value!=="none"},w=!a||x(e)&&(!f||x(e.source())&&x(e.target()));if(w){var T=0,A=0;a&&r.includeOverlays&&(T=e.pstyle("overlay-opacity").value,T!==0&&(A=e.pstyle("overlay-padding").value));var M=0,D=0;a&&r.includeUnderlays&&(M=e.pstyle("underlay-opacity").value,M!==0&&(D=e.pstyle("underlay-padding").value));var _=Math.max(A,D),k=0,F=0;if(a&&(k=e.pstyle("width").pfValue,F=k/2),u&&r.includeNodes){var G=e.position();p=G.x,C=G.y;var B=e.outerWidth(),q=B/2,R=e.outerHeight(),P=R/2;c=p-q,h=p+q,g=C-P,y=C+P,ia(o,c,g,h,y),a&&r.includeOutlines&&nH(o,e)}else if(f&&r.includeEdges)if(a&&!i){var N=e.pstyle("curve-style").strValue;if(c=Math.min(E.srcX,E.midX,E.tgtX),h=Math.max(E.srcX,E.midX,E.tgtX),g=Math.min(E.srcY,E.midY,E.tgtY),y=Math.max(E.srcY,E.midY,E.tgtY),c-=F,h+=F,g-=F,y+=F,ia(o,c,g,h,y),N==="haystack"){var I=E.haystackPts;if(I&&I.length===2){if(c=I[0].x,g=I[0].y,h=I[1].x,y=I[1].y,c>h){var z=c;c=h,h=z}if(g>y){var ae=g;g=y,y=ae}ia(o,c-F,g-F,h+F,y+F)}}else if(N==="bezier"||N==="unbundled-bezier"||N.endsWith("segments")||N.endsWith("taxi")){var re;switch(N){case"bezier":case"unbundled-bezier":re=E.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":re=E.linePts;break}if(re!=null)for(var K=0;K<re.length;K++){var V=re[K];c=V.x-F,h=V.x+F,g=V.y-F,y=V.y+F,ia(o,c,g,h,y)}}}else{var Z=e.source(),U=Z.position(),W=e.target(),X=W.position();if(c=U.x,h=X.x,g=U.y,y=X.y,c>h){var ee=c;c=h,h=ee}if(g>y){var oe=g;g=y,y=oe}c-=F,h+=F,g-=F,y+=F,ia(o,c,g,h,y)}if(a&&r.includeEdges&&f&&(uf(o,e,"mid-source"),uf(o,e,"mid-target"),uf(o,e,"source"),uf(o,e,"target")),a){var te=e.pstyle("ghost").value==="yes";if(te){var ie=e.pstyle("ghost-offset-x").pfValue,se=e.pstyle("ghost-offset-y").pfValue;ia(o,o.x1+ie,o.y1+se,o.x2+ie,o.y2+se)}}var $=s.bodyBounds=s.bodyBounds||{};pC($,o),Cf($,v),Ef($,1),a&&(c=o.x1,h=o.x2,g=o.y1,y=o.y2,ia(o,c-_,g-_,h+_,y+_));var ne=s.overlayBounds=s.overlayBounds||{};pC(ne,o),Cf(ne,v),Ef(ne,1);var le=s.labelBounds=s.labelBounds||{};le.all!=null?qz(le.all):le.all=Nn(),a&&r.includeLabels&&(r.includeMainLabels&&Mv(o,e,null),f&&(r.includeSourceLabels&&Mv(o,e,"source"),r.includeTargetLabels&&Mv(o,e,"target")))}return o.x1=Wn(o.x1),o.y1=Wn(o.y1),o.x2=Wn(o.x2),o.y2=Wn(o.y2),o.w=Wn(o.x2-o.x1),o.h=Wn(o.y2-o.y1),o.w>0&&o.h>0&&w&&(Cf(o,v),Ef(o,1)),o},Mk=function(e){var r=0,n=function(o){return(o?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},Rk=function(e){var r=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return uC([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=e.position();return uC([r(i.x),r(i.y)])}},_T=function(e,r){var n=e._private,a,i=e.isEdge(),o=r==null?MT:Mk(r),s=o===MT;if(n.bbCache==null?(a=aH(e,Ql),n.bbCache=a,n.bbCachePosKey=Rk(e)):a=n.bbCache,!s){var u=e.isNode();a=Nn(),(r.includeNodes&&u||r.includeEdges&&!u)&&(r.includeOverlays?uo(a,n.overlayBounds):uo(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?uo(a,n.labelBounds.all):(r.includeMainLabels&&uo(a,n.labelBounds.mainRot),r.includeSourceLabels&&uo(a,n.labelBounds.sourceRot),r.includeTargetLabels&&uo(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Ql={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},MT=Mk(Ql),RT=nn(Ql);qi.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=Cs(function(c){var h=c._private;return h.bbCache==null||h.styleDirty||h.bbCachePosKey!==Rk(c)},function(c){return c.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=Ql:t=RT(t),e=_T(this[0],t);else{e=Nn(),t=t||Ql;var a=RT(t),i=this,o=i.cy(),s=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<i.length;u++){var f=i[u];n(f)&&f.dirtyBoundingBoxCache(),uo(e,_T(f,a))}}return e.x1=Wn(e.x1),e.y1=Wn(e.y1),e.x2=Wn(e.x2),e.y2=Wn(e.y2),e.w=Wn(e.x2-e.x1),e.h=Wn(e.y2-e.y1),e};qi.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};qi.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(f){return f.isParent()}),e=e.not(a)),Bt(t)){var i=t;t=function(){return i}}var o=function(c,h){return c._private.bbAtOldPos=t(c,h)},s=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(o).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var u=Bz(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),u};Es.boundingbox=Es.bb=Es.boundingBox;Es.renderedBoundingbox=Es.renderedBoundingBox;var iH=qi,Cl,du;Cl=du={};var Pk=function(e){e.uppercaseName=XE(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=XE(e.outerName),Cl[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Cl["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var s=n[e.name](),u=n.pstyle("border-position").value,f;u==="center"?f=n.pstyle("border-width").pfValue:u==="outside"?f=2*n.pstyle("border-width").pfValue:f=0;var c=2*n.padding();return s+f+c}else return 1},Cl["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},Cl["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};Pk({name:"width"});Pk({name:"height"});du.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};du.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};du.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var oH=du,sH=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},lH=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return Lc(r(e),n.zoom(),n.pan())}},uH=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(o){return Lc(o,i,a)})}},fH=function(e){return e.renderer().getControlPoints(e)},cH=function(e){return e.renderer().getSegmentPoints(e)},dH=function(e){return e.renderer().getSourceEndpoint(e)},hH=function(e){return e.renderer().getTargetEndpoint(e)},vH=function(e){return e.renderer().getEdgeMidpoint(e)},PT={controlPoints:{get:fH,mult:!0},segmentPoints:{get:cH,mult:!0},sourceEndpoint:{get:dH},targetEndpoint:{get:hH},midpoint:{get:vH}},pH=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},gH=Object.keys(PT).reduce(function(t,e){var r=PT[e],n=pH(e);return t[e]=function(){return sH(this,r.get)},r.mult?t[n]=function(){return uH(this,r.get)}:t[n]=function(){return lH(this,r.get)},t},{}),yH=Et({},rH,iH,oH,gH);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var kk=function(e,r){this.recycle(e,r)};function gl(){return!1}function ff(){return!0}kk.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=gl,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ff:gl):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=ff;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=ff;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ff,this.stopPropagation()},isDefaultPrevented:gl,isPropagationStopped:gl,isImmediatePropagationStopped:gl};var Nk=/^([^.]+)(\.(?:[^.]+))?$/,mH=".*",Ok={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},kT=Object.keys(Ok),bH={};function Nc(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bH,e=arguments.length>1?arguments[1]:void 0,r=0;r<kT.length;r++){var n=kT[r];this[n]=t[n]||Ok[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Ni=Nc.prototype,Ik=function(e,r,n,a,i,o,s){br(a)&&(i=a,a=null),s&&(o==null?o=s:o=Et({},o,s));for(var u=ir(n)?n:n.split(/\s+/),f=0;f<u.length;f++){var c=u[f];if(!_i(c)){var h=c.match(Nk);if(h){var g=h[1],y=h[2]?h[2]:null,p=r(e,c,g,y,a,i,o);if(p===!1)break}}}},NT=function(e,r){return e.addEventFields(e.context,r),new kk(r.type,r)},wH=function(e,r,n){if(_q(n)){r(e,n);return}else if(Bt(n)){r(e,NT(e,n));return}for(var a=ir(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!_i(o)){var s=o.match(Nk);if(s){var u=s[1],f=s[2]?s[2]:null,c=NT(e,{type:u,namespace:f,target:e.context});r(e,c)}}}};Ni.on=Ni.addListener=function(t,e,r,n,a){return Ik(this,function(i,o,s,u,f,c,h){br(c)&&i.listeners.push({event:o,callback:c,type:s,namespace:u,qualifier:f,conf:h})},t,e,r,n,a),this};Ni.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};Ni.removeListener=Ni.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=lz(this.listeners));for(var i=this.listeners,o=function(f){var c=i[f];Ik(a,function(h,g,y,p,C,E){if((c.type===y||t==="*")&&(!p&&c.namespace!==".*"||c.namespace===p)&&(!C||h.qualifierCompare(c.qualifier,C))&&(!E||c.callback===E))return i.splice(f,1),!1},t,e,r,n)},s=i.length-1;s>=0;s--)o(s);return this};Ni.removeAllListeners=function(){return this.removeListener("*")};Ni.emit=Ni.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,ir(e)||(e=[e]),wH(this,function(i,o){r!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}],a=n.length);for(var s=function(){var c=n[u];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===mH)&&i.eventMatches(i.context,c,o)){var h=[o];e!=null&&fz(h,e),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(p){return p!==c}));var g=i.callbackContext(i.context,c,o),y=c.callback.apply(g,h);i.afterEmit(i.context,c,o),y===!1&&(o.stopPropagation(),o.preventDefault())}},u=0;u<a;u++)s();i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},t),this.emitting--,this};var xH={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ou(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},cf=function(e){return mt(e)?new Pi(e):e},Fk={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new Nc(xH,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=cf(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=cf(r),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=cf(r),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=cf(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};$t.eventAliasesOn(Fk);var Bk={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(mt(e)||qn(e))return new Pi(e).filter(this);if(br(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){mt(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(mt(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,s=o?a:i,u=o?i:a,f=0;f<s.length;f++){var c=s[f];u.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;mt(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,o=function(u,f){for(var c=0;c<u.length;c++){var h=u[c],g=h._private.data.id,y=f.hasElementWithId(g);y||n.push(h)}};return o(a,i),o(i,a),n},diff:function(e){var r=this._private.cy;mt(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,s=e,u=function(c,h,g){for(var y=0;y<c.length;y++){var p=c[y],C=p._private.data.id,E=h.hasElementWithId(C);E?i.merge(p):g.push(p)}};return u(o,s,n),u(s,o,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(mt(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&a.push(o)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&mt(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,o=0;o<e.length;o++){var s=e[o],u=s._private.data.id,f=!i.has(u);if(f){var c=this.length++;this[c]=s,i.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,u=this[s],f=u._private.data.id;this[s]=void 0,this[e]=u,i.set(f,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&mt(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],u=r?e.apply(r,[s,o,i]):e(s,o,i);u>n&&(n=u,a=s)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],u=r?e.apply(r,[s,o,i]):e(s,o,i);u<n&&(n=u,a=s)}return{value:n,ele:a}}},Gt=Bk;Gt.u=Gt["|"]=Gt["+"]=Gt.union=Gt.or=Gt.add;Gt["\\"]=Gt["!"]=Gt["-"]=Gt.difference=Gt.relativeComplement=Gt.subtract=Gt.not;Gt.n=Gt["&"]=Gt["."]=Gt.and=Gt.intersection=Gt.intersect;Gt["^"]=Gt["(+)"]=Gt["(-)"]=Gt.symmetricDifference=Gt.symdiff=Gt.xor;Gt.fnFilter=Gt.filterFn=Gt.stdFilter=Gt.filter;Gt.complement=Gt.abscomp=Gt.absoluteComplement;var EH={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},qk=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var h=c.pstyle("z-compound-depth");return h.value==="auto"?a?c.zDepth():0:h.value==="bottom"?-1:h.value==="top"?E1:0}var o=i(e)-i(r);if(o!==0)return o;function s(c){var h=c.pstyle("z-index-compare");return h.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(r);if(u!==0)return u;var f=e.pstyle("z-index").value-r.pstyle("z-index").value;return f!==0?f:e.poolIndex()-r.poolIndex()},tc={forEach:function(e,r){if(br(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=r?e.apply(r,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!br(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(qk)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:E1-1}else{var i=r.source,o=r.target,s=i.zDepth(),u=o.zDepth();return Math.max(s,u,0)}}}};tc.each=tc.forEach;var CH=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":qr(Symbol))!=e&&qr(Symbol.iterator)!=e;r&&(tc[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return qP({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};CH();var TH=nn({nodeDimensionsIncludeLabels:!1}),Sf={layoutDimensions:function(e){e=TH(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(A){return!A.isParent()}),i=this.cy(),o=r.eles,s=function(M){return M.id()},u=Cs(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var f=function(M,D,_){var k={x:D.x1+D.w/2,y:D.y1+D.h/2},F={x:(_.x-k.x)*M,y:(_.y-k.y)*M};return{x:k.x+F.x,y:k.y+F.y}},c=r.spacingFactor&&r.spacingFactor!==1,h=function(){if(!c)return null;for(var M=Nn(),D=0;D<a.length;D++){var _=a[D],k=u(_,D);Gz(M,k.x,k.y)}return M},g=h(),y=Cs(function(A,M){var D=u(A,M);if(c){var _=Math.abs(r.spacingFactor);D=f(_,g,D)}return r.transform!=null&&(D=r.transform(A,D)),D},s);if(r.animate){for(var p=0;p<a.length;p++){var C=a[p],E=y(C,p),v=r.animateFilter==null||r.animateFilter(C,p);if(v){var x=C.animation({position:E,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(x)}else C.position(E)}if(r.fit){var w=i.animation({fit:{boundingBox:o.boundingBoxAt(y),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(w)}else if(r.zoom!==void 0&&r.pan!==void 0){var T=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(T)}e.animations.forEach(function(A){return A.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),Ds.all(e.animations.map(function(A){return A.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(y),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(Et({},e,{eles:this}))}};Sf.createLayout=Sf.makeLayout=Sf.layout;function zk(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function Oc(t,e){return t=bo(t),function(n){return zk(t,e,n)}}function Ic(t,e){t=bo(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return zk(t,r,a)}}var tn={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(Bt(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(mt(e))if(r===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var f=i[u];a.removeBypasses(f,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var u=o[s],f=u.pstyle("opacity").value;i=f*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Rv(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function N1(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||Rv(i,n);var u=s.source,f=s.target;return r(u)&&(!o||Rv(u,r))&&(u===f||r(f)&&(!o||Rv(f,r)))}}}var _s=Oc("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});tn.takesUpSpace=Ic("takesUpSpace",N1({ok:_s}));var SH=Oc("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&_s(t)}),AH=Oc("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&_s(t)});tn.interactive=Ic("interactive",N1({ok:SH,parentOk:AH,edgeOkViaNode:_s}));tn.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var LH=Oc("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&_s(t)}),DH=_s;tn.visible=Ic("visible",N1({ok:LH,edgeOkViaNode:DH}));tn.hidden=function(){var t=this[0];if(t)return!t.visible()};tn.isBundledBezier=Ic("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});tn.bypass=tn.css=tn.style;tn.renderedCss=tn.renderedStyle;tn.removeBypass=tn.removeCss=tn.removeStyle;tn.pstyle=tn.parsedStyle;var Si={};function OT(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&br(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&ir(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],f=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var h=t.overrideAble(u);if(h!==void 0&&(f=h,!h))return this}f&&(u._private[t.field]=t.value,c&&r.push(u))}var g=this.spawn(r);g.updateStyle(),g.emit(t.event),o&&g.emit(o)}return this}}function Ms(t){Si[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Si[t.on]=OT({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Si[t.off]=OT({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Ms({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Ms({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Ms({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Ms({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Si.deselect=Si.unselect;Si.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};Ms({field:"active",on:"activate",off:"unactivate"});Ms({field:"pannable",on:"panify",off:"unpanify"});Si.inactive=function(){var t=this[0];if(t)return!t._private.active};var hn={},IT=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var s=a[o];if(s.isNode()){for(var u=!1,f=s.connectedEdges(),c=0;c<f.length;c++){var h=f[c],g=h.source(),y=h.target();if(e.noIncomingEdges&&y===s&&g!==s||e.noOutgoingEdges&&g===s&&y!==s){u=!0;break}}u||i.push(s)}}return this.spawn(i,!0).filter(n)}},FT=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var s=o.connectedEdges(),u=0;u<s.length;u++){var f=s[u],c=f.source(),h=f.target();e.outgoing&&c===o?(a.push(f),a.push(h)):e.incoming&&h===o&&(a.push(f),a.push(c))}}return this.spawn(a,!0).filter(r)}},BT=function(e){return function(r){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,u=0;u<o.length;u++){var f=o[u],c=f.id();i[c]||(i[c]=!0,a.push(f),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(r)}};hn.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Et(hn,{roots:IT({noIncomingEdges:!0}),leaves:IT({noOutgoingEdges:!0}),outgoers:$n(FT({outgoing:!0}),"outgoers"),successors:BT({outgoing:!0}),incomers:$n(FT({incoming:!0}),"incomers"),predecessors:BT({})});Et(hn,{neighborhood:$n(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],u=s.source(),f=s.target(),c=a===u?f:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});hn.neighbourhood=hn.neighborhood;hn.closedNeighbourhood=hn.closedNeighborhood;hn.openNeighbourhood=hn.openNeighborhood;Et(hn,{source:$n(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:$n(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:qT({attr:"source"}),targets:qT({attr:"target"})});function qT(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[t.attr];o&&n.push(o)}return this.spawn(n,!0).filter(r)}}Et(hn,{edgesWith:$n(zT(),"edgesWith"),edgesTo:$n(zT({thisIsSrc:!0}),"edgesTo")});function zT(t){return function(r){var n=[],a=this._private.cy,i=t||{};mt(r)&&(r=a.$(r));for(var o=0;o<r.length;o++)for(var s=r[o]._private.edges,u=0;u<s.length;u++){var f=s[u],c=f._private.data,h=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),g=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),y=h||g;y&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!h||i.thisIsTgt&&!g)||n.push(f))}return this.spawn(n,!0)}}Et(hn,{connectedEdges:$n(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:$n(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:$n(GT(),"parallelEdges"),codirectedEdges:$n(GT({codirected:!0}),"codirectedEdges")});function GT(t){var e={codirected:!1};return t=Et({},e,t),function(n){for(var a=[],i=this.edges(),o=t,s=0;s<i.length;s++)for(var u=i[s],f=u._private,c=f.source,h=c._private.data.id,g=f.data.target,y=c._private.edges,p=0;p<y.length;p++){var C=y[p],E=C._private.data,v=E.target,x=E.source,w=v===g&&x===h,T=h===v&&g===x;(o.codirected&&w||!o.codirected&&(w||T))&&a.push(C)}return this.spawn(a,!0).filter(n)}}Et(hn,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(c,h){a.merge(c),i.unmerge(c),h.merge(c)};if(i.empty())return r.spawn();var u=function(){var c=n.collection();o.push(c);var h=i[0];s(h,c),r.bfs({directed:!1,roots:h,visit:function(y){return s(y,c)}}),c.forEach(function(g){g.connectedEdges().forEach(function(y){r.has(y)&&c.has(y.source())&&c.has(y.target())&&c.merge(y)})})};do u();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});hn.componentsOf=hn.components;var rn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){yr("A collection must have a reference to the core");return}var i=new Xa,o=!1;if(!r)r=[];else if(r.length>0&&Bt(r[0])&&!ou(r[0])){o=!0;for(var s=[],u=new Ls,f=0,c=r.length;f<c;f++){var h=r[f];h.data==null&&(h.data={});var g=h.data;if(g.id==null)g.id=rk();else if(e.hasElementWithId(g.id)||u.has(g.id))continue;var y=new Ac(e,h,!1);s.push(y),u.add(g.id)}r=s}this.length=0;for(var p=0,C=r.length;p<C;p++){var E=r[p][0];if(E!=null){var v=E._private.data.id;(!n||!i.has(v))&&(n&&i.set(v,{index:this.length,ele:E}),this[this.length]=E,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(x){this.lazyMap=x},rebuildMap:function(){for(var w=this.lazyMap=new Xa,T=this.eles,A=0;A<T.length;A++){var M=T[A];w.set(M.id(),{index:A,ele:M})}}},n&&(this._private.map=i),o&&!a&&this.restore()},lr=Ac.prototype=rn.prototype=Object.create(Array.prototype);lr.instanceString=function(){return"collection"};lr.spawn=function(t,e){return new rn(this.cy(),t,e)};lr.spawnSelf=function(){return this.spawn(this)};lr.cy=function(){return this._private.cy};lr.renderer=function(){return this._private.cy.renderer()};lr.element=function(){return this[0]};lr.collection=function(){return HP(this)?this:new rn(this._private.cy,[this])};lr.unique=function(){return new rn(this._private.cy,this,!0)};lr.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};lr.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new rn(e)};lr.$id=lr.getElementById;lr.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};lr.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};lr.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};lr.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(Bt(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=t.data.source,u=t.data.target;s!=null&&s!=a.source&&(o.source=""+s,i=!0),u!=null&&u!=a.target&&(o.target=""+u,i=!0),i&&(e=e.move(o))}else{var f="parent"in t.data,c=t.data.parent;f&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var h=function(C,E,v){var x=t[C];x!=null&&x!==n[C]&&(x?e[E]():e[v]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var g={data:Sa(n.data),position:Sa(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};g.classes="";var y=0;return n.classes.forEach(function(p){return g.classes+=y++===0?p:" "+p}),g}}};lr.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};lr.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new Ac(t,a,!1);e.push(i)}return new rn(t,e)};lr.copy=lr.clone;lr.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],o=[],s,u=0,f=r.length;u<f;u++){var c=r[u];e&&!c.removed()||(c.isNode()?i.push(c):o.push(c))}s=i.concat(o);var h,g=function(){s.splice(h,1),h--};for(h=0;h<s.length;h++){var y=s[h],p=y._private,C=p.data;if(y.clearTraversalCache(),!(!e&&!p.removed)){if(C.id===void 0)C.id=rk();else if(it(C.id))C.id=""+C.id;else if(_i(C.id)||!mt(C.id)){yr("Can not create element with invalid string ID `"+C.id+"`"),g();continue}else if(n.hasElementWithId(C.id)){yr("Can not create second element with ID `"+C.id+"`"),g();continue}}var E=C.id;if(y.isNode()){var v=p.position;v.x==null&&(v.x=0),v.y==null&&(v.y=0)}if(y.isEdge()){for(var x=y,w=["source","target"],T=w.length,A=!1,M=0;M<T;M++){var D=w[M],_=C[D];it(_)&&(_=C[D]=""+C[D]),_==null||_===""?(yr("Can not create edge `"+E+"` with unspecified "+D),A=!0):n.hasElementWithId(_)||(yr("Can not create edge `"+E+"` with nonexistant "+D+" `"+_+"`"),A=!0)}if(A){g();continue}var k=n.getElementById(C.source),F=n.getElementById(C.target);k.same(F)?k._private.edges.push(x):(k._private.edges.push(x),F._private.edges.push(x)),x._private.source=k,x._private.target=F}p.map=new Xa,p.map.set(E,{ele:y,index:0}),p.removed=!1,e&&n.addToPool(y)}for(var G=0;G<i.length;G++){var B=i[G],q=B._private.data;it(q.parent)&&(q.parent=""+q.parent);var R=q.parent,P=R!=null;if(P||B._private.parent){var N=B._private.parent?n.collection().merge(B._private.parent):n.getElementById(R);if(N.empty())q.parent=void 0;else if(N[0].removed())Xt("Node added with missing parent, reference to parent removed"),q.parent=void 0,B._private.parent=null;else{for(var I=!1,z=N;!z.empty();){if(B.same(z)){I=!0,q.parent=void 0;break}z=z.parent()}I||(N[0]._private.children.push(B),B._private.parent=N[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var ae=s.length===r.length?r:new rn(n,s),re=0;re<ae.length;re++){var K=ae[re];K.isNode()||(K.parallelEdges().clearTraversalCache(),K.source().clearTraversalCache(),K.target().clearTraversalCache())}var V;a.hasCompoundNodes?V=n.collection().merge(ae).merge(ae.connectedNodes()).merge(ae.parent()):V=ae,V.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?ae.emitAndNotify("add"):e&&ae.emit("add")}return r};lr.removed=function(){var t=this[0];return t&&t._private.removed};lr.inside=function(){var t=this[0];return t&&!t._private.removed};lr.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function o(R){for(var P=R._private.edges,N=0;N<P.length;N++)u(P[N])}function s(R){for(var P=R._private.children,N=0;N<P.length;N++)u(P[N])}function u(R){var P=a[R.id()];e&&R.removed()||P||(a[R.id()]=!0,R.isNode()?(n.push(R),o(R),s(R)):n.unshift(R))}for(var f=0,c=r.length;f<c;f++){var h=r[f];u(h)}function g(R,P){var N=R._private.edges;Mi(N,P),R.clearTraversalCache()}function y(R){R.clearTraversalCache()}var p=[];p.ids={};function C(R,P){P=P[0],R=R[0];var N=R._private.children,I=R.id();Mi(N,P),P._private.parent=null,p.ids[I]||(p.ids[I]=!0,p.push(R))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var E=0;E<n.length;E++){var v=n[E];if(v.isEdge()){var x=v.source()[0],w=v.target()[0];g(x,v),g(w,v);for(var T=v.parallelEdges(),A=0;A<T.length;A++){var M=T[A];y(M),M.isBundledBezier()&&M.dirtyBoundingBoxCache()}}else{var D=v.parent();D.length!==0&&C(D,v)}e&&(v._private.removed=!0)}var _=i._private.elements;i._private.hasCompoundNodes=!1;for(var k=0;k<_.length;k++){var F=_[k];if(F.isParent()){i._private.hasCompoundNodes=!0;break}}var G=new rn(this.cy(),n);G.size()>0&&(t?G.emitAndNotify("remove"):e&&G.emit("remove"));for(var B=0;B<p.length;B++){var q=p[B];(!e||!q.removed())&&q.updateStyle()}return G};lr.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(p){return p==null?p:""+p};if(t.source!==void 0||t.target!==void 0){var o=i(t.source),s=i(t.target),u=o!=null&&e.hasElementWithId(o),f=s!=null&&e.hasElementWithId(s);(u||f)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var y=0;y<r.length;y++){var p=r[y],C=p._private.data;p.isEdge()&&(u&&(C.source=o),f&&(C.target=s))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),h=c===null||e.hasElementWithId(c);if(h){var g=c===null?void 0:c;e.batch(function(){var y=r.remove(n,a);y.emitAndNotify("moveout");for(var p=0;p<r.length;p++){var C=r[p],E=C._private.data;C.isNode()&&(E.parent=g)}y.restore(n,a)}),r.emitAndNotify("move")}}return this};[hk,q5,Tf,Ti,As,tH,kc,yH,Fk,Bk,EH,tc,Sf,tn,Si,hn].forEach(function(t){Et(lr,t)});var _H={add:function(e){var r,n=this;if(qn(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],o=0;o<a.length;o++){var s=a[o];i.push(s.json())}r=new rn(n,i)}}else if(ir(e)){var u=e;r=new rn(n,u)}else if(Bt(e)&&(ir(e.nodes)||ir(e.edges))){for(var f=e,c=[],h=["nodes","edges"],g=0,y=h.length;g<y;g++){var p=h[g],C=f[p];if(ir(C))for(var E=0,v=C.length;E<v;E++){var x=Et({group:p},C[E]);c.push(x)}}r=new rn(n,c)}else{var w=e;r=new Ac(n,w).collection()}return r},remove:function(e){if(!qn(e)){if(mt(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function MH(t,e,r,n){var a=4,i=.001,o=1e-7,s=10,u=11,f=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var g=c?new Float32Array(u):new Array(u);function y(F,G){return 1-3*G+3*F}function p(F,G){return 3*G-6*F}function C(F){return 3*F}function E(F,G,B){return((y(G,B)*F+p(G,B))*F+C(G))*F}function v(F,G,B){return 3*y(G,B)*F*F+2*p(G,B)*F+C(G)}function x(F,G){for(var B=0;B<a;++B){var q=v(G,t,r);if(q===0)return G;var R=E(G,t,r)-F;G-=R/q}return G}function w(){for(var F=0;F<u;++F)g[F]=E(F*f,t,r)}function T(F,G,B){var q,R,P=0;do R=G+(B-G)/2,q=E(R,t,r)-F,q>0?B=R:G=R;while(Math.abs(q)>o&&++P<s);return R}function A(F){for(var G=0,B=1,q=u-1;B!==q&&g[B]<=F;++B)G+=f;--B;var R=(F-g[B])/(g[B+1]-g[B]),P=G+R*f,N=v(P,t,r);return N>=i?x(F,P):N===0?P:T(F,G,G+f)}var M=!1;function D(){M=!0,(t!==e||r!==n)&&w()}var _=function(G){return M||D(),t===e&&r===n?G:G===0?0:G===1?1:E(A(G),e,n)};_.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var k="generateBezier("+[t,e,r,n]+")";return _.toString=function(){return k},_}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var RH=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:t(o)}}function r(n,a){var i={dx:n.v,dv:t(n)},o=e(n,a*.5,i),s=e(n,a*.5,o),u=e(n,a,s),f=1/6*(i.dx+2*(o.dx+s.dx)+u.dx),c=1/6*(i.dv+2*(o.dv+s.dv)+u.dv);return n.x=n.x+f*a,n.v=n.v+c*a,n}return function n(a,i,o){var s={x:-1,v:0,tension:null,friction:null},u=[0],f=0,c=1/1e4,h=16/1e3,g,y,p;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,g=o!==null,g?(f=n(a,i),y=f/o*h):y=h;p=r(p||s,y),u.push(1+p.x),f+=16,Math.abs(p.x)>c&&Math.abs(p.v)>c;);return g?function(C){return u[C*(u.length-1)|0]}:f}}(),or=function(e,r,n,a){var i=MH(e,r,n,a);return function(o,s,u){return o+(s-o)*i(u)}},Af={linear:function(e,r,n){return e+(r-e)*n},ease:or(.25,.1,.25,1),"ease-in":or(.42,0,1,1),"ease-out":or(0,0,.58,1),"ease-in-out":or(.42,0,.58,1),"ease-in-sine":or(.47,0,.745,.715),"ease-out-sine":or(.39,.575,.565,1),"ease-in-out-sine":or(.445,.05,.55,.95),"ease-in-quad":or(.55,.085,.68,.53),"ease-out-quad":or(.25,.46,.45,.94),"ease-in-out-quad":or(.455,.03,.515,.955),"ease-in-cubic":or(.55,.055,.675,.19),"ease-out-cubic":or(.215,.61,.355,1),"ease-in-out-cubic":or(.645,.045,.355,1),"ease-in-quart":or(.895,.03,.685,.22),"ease-out-quart":or(.165,.84,.44,1),"ease-in-out-quart":or(.77,0,.175,1),"ease-in-quint":or(.755,.05,.855,.06),"ease-out-quint":or(.23,1,.32,1),"ease-in-out-quint":or(.86,0,.07,1),"ease-in-expo":or(.95,.05,.795,.035),"ease-out-expo":or(.19,1,.22,1),"ease-in-out-expo":or(1,0,0,1),"ease-in-circ":or(.6,.04,.98,.335),"ease-out-circ":or(.075,.82,.165,1),"ease-in-out-circ":or(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return Af.linear;var a=RH(e,r,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":or};function HT(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function UT(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function rs(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var o=UT(t,a),s=UT(e,a);if(it(o)&&it(s))return HT(i,o,s,r,n);if(ir(o)&&ir(s)){for(var u=[],f=0;f<s.length;f++){var c=o[f],h=s[f];if(c!=null&&h!=null){var g=HT(i,c,h,r,n);u.push(g)}else u.push(h)}return u}}function PH(t,e,r,n){var a=!n,i=t._private,o=e._private,s=o.easing,u=o.startTime,f=n?t:t.cy(),c=f.style();if(!o.easingImpl)if(s==null)o.easingImpl=Af.linear;else{var h;if(mt(s)){var g=c.parse("transition-timing-function",s);h=g.value}else h=s;var y,p;mt(h)?(y=h,p=[]):(y=h[1],p=h.slice(2).map(function(ae){return+ae})),p.length>0?(y==="spring"&&p.push(o.duration),o.easingImpl=Af[y].apply(null,p)):o.easingImpl=Af[y]}var C=o.easingImpl,E;if(o.duration===0?E=1:E=(r-u)/o.duration,o.applying&&(E=o.progress),E<0?E=0:E>1&&(E=1),o.delay==null){var v=o.startPosition,x=o.position;if(x&&a&&!t.locked()){var w={};yl(v.x,x.x)&&(w.x=rs(v.x,x.x,E,C)),yl(v.y,x.y)&&(w.y=rs(v.y,x.y,E,C)),t.position(w)}var T=o.startPan,A=o.pan,M=i.pan,D=A!=null&&n;D&&(yl(T.x,A.x)&&(M.x=rs(T.x,A.x,E,C)),yl(T.y,A.y)&&(M.y=rs(T.y,A.y,E,C)),t.emit("pan"));var _=o.startZoom,k=o.zoom,F=k!=null&&n;F&&(yl(_,k)&&(i.zoom=Kl(i.minZoom,rs(_,k,E,C),i.maxZoom)),t.emit("zoom")),(D||F)&&t.emit("viewport");var G=o.style;if(G&&G.length>0&&a){for(var B=0;B<G.length;B++){var q=G[B],R=q.name,P=q,N=o.startStyle[R],I=c.properties[N.name],z=rs(N,P,E,C,I);c.overrideBypass(t,R,z)}t.emit("style")}}return o.progress=E,E}function yl(t,e){return t==null||e==null?!1:it(t)&&it(e)?!0:!!(t&&e)}function kH(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function VT(t,e){var r=e._private.aniEles,n=[];function a(c,h){var g=c._private,y=g.animation.current,p=g.animation.queue,C=!1;if(y.length===0){var E=p.shift();E&&y.push(E)}for(var v=function(M){for(var D=M.length-1;D>=0;D--){var _=M[D];_()}M.splice(0,M.length)},x=y.length-1;x>=0;x--){var w=y[x],T=w._private;if(T.stopped){y.splice(x,1),T.hooked=!1,T.playing=!1,T.started=!1,v(T.frames);continue}!T.playing&&!T.applying||(T.playing&&T.applying&&(T.applying=!1),T.started||kH(c,w,t),PH(c,w,t,h),T.applying&&(T.applying=!1),v(T.frames),T.step!=null&&T.step(t),w.completed()&&(y.splice(x,1),T.hooked=!1,T.playing=!1,T.started=!1,v(T.completes)),C=!0)}return!h&&y.length===0&&p.length===0&&n.push(c),C}for(var i=!1,o=0;o<r.length;o++){var s=r[o],u=a(s);i=i||u}var f=a(e,!0);(i||f)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var NH={animate:$t.animate(),animation:$t.animation(),animated:$t.animated(),clearQueue:$t.clearQueue(),delay:$t.delay(),delayAnimation:$t.delayAnimation(),stop:$t.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&jf(function(i){VT(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){VT(o,e)},n.beforeRenderPriorities.animations):r()}},OH={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ou(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},df=function(e){return mt(e)?new Pi(e):e},Gk={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Nc(OH,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,df(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,df(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,df(r),n),this},once:function(e,r,n){return this.emitter().one(e,df(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};$t.eventAliasesOn(Gk);var Hb={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};Hb.jpeg=Hb.jpg;var Lf={layout:function(e){var r=this;if(e==null){yr("Layout options must be specified to make a layout");return}if(e.name==null){yr("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){yr("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;mt(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var o=new a(Et({},e,{cy:r,eles:i}));return o}};Lf.createLayout=Lf.makeLayout=Lf.layout;var IH={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],s=r.getElementById(i);s.data(o)}})}},FH=nn({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Ub={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){yr("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Xt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=FH(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Ub.invalidateDimensions=Ub.resize;var Df={collection:function(e,r){return mt(e)?this.$(e):qn(e)?e.collection():ir(e)?(r||(r={}),new rn(this,e,r.unique,r.removed)):new rn(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Df.elements=Df.filter=Df.$;var Xr={},Ol="t",BH="f";Xr.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var o=t[i],s=e.getContextMeta(o);if(!s.empty){var u=e.getContextStyle(s),f=e.applyContextStyle(s,u,o);o._private.appliedInitStyle?e.updateTransitions(o,f.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&a.push(o)}}return a};Xr.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},u=0;u<r.length;u++){var f=r[u],c=t[u]===Ol,h=e[u]===Ol,g=c!==h,y=f.mappedProperties.length>0;if(g||h&&y){var p=void 0;g&&y||g?p=f.properties:y&&(p=f.mappedProperties);for(var C=0;C<p.length;C++){for(var E=p[C],v=E.name,x=!1,w=u+1;w<r.length;w++){var T=r[w],A=e[w]===Ol;if(A&&(x=T.properties[E.name]!=null,x))break}!s[v]&&!x&&(s[v]=!0,o.push(v))}}}return n[a]=o,o};Xr.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(t);s?r+=Ol:r+=BH}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};Xr.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var o=r[i],s=e[i]===Ol;if(s)for(var u=0;u<o.properties.length;u++){var f=o.properties[u];a[f.name]=f}}return n[e]=a,a};Xr.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},o=n.types,s=0;s<a.length;s++){var u=a[s],f=e[u],c=r.pstyle(u);if(!f)if(c)c.bypass?f={name:u,deleteBypassed:!0}:f={name:u,delete:!0};else continue;if(c!==f){if(f.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===f.value){var h=c.mapping,g=h.fnValue=f.value(r);if(g===h.prevFnValue)continue}var y=i[u]={prev:c};n.applyParsedProperty(r,f),y.next=r.pstyle(u),y.next&&y.next.bypass&&(y.next=y.next.bypassed)}}return{diffProps:i}};Xr.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function($,ne,le){return r.getPropertiesHash($,ne,le)},o=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var f=0;f<a.length;f++){var c=a[f];e.styleKeys[c]=[vo,us]}for(var h=function($,ne){return e.styleKeys[ne][0]=$l($,e.styleKeys[ne][0])},g=function($,ne){return e.styleKeys[ne][1]=Yl($,e.styleKeys[ne][1])},y=function($,ne){h($,ne),g($,ne)},p=function($,ne){for(var le=0;le<$.length;le++){var Se=$.charCodeAt(le);h(Se,ne),g(Se,ne)}},C=2e9,E=function($){return-128<$&&$<128&&Math.floor($)!==$?C-($*1024|0):$},v=0;v<n.length;v++){var x=n[v],w=u[x];if(w!=null){var T=this.properties[x],A=T.type,M=T.groupKey,D=void 0;T.hashOverride!=null?D=T.hashOverride(t,w):w.pfValue!=null&&(D=w.pfValue);var _=T.enums==null?w.value:null,k=D!=null,F=_!=null,G=k||F,B=w.units;if(A.number&&G&&!A.multiple){var q=k?D:_;y(E(q),M),!k&&B!=null&&p(B,M)}else p(w.strValue,M)}}for(var R=[vo,us],P=0;P<a.length;P++){var N=a[P],I=e.styleKeys[N];R[0]=$l(I[0],R[0]),R[1]=Yl(I[1],R[1])}e.styleKey=nz(R[0],R[1]);var z=e.styleKeys;e.labelDimsKey=pi(z.labelDimensions);var ae=i(t,["label"],z.labelDimensions);if(e.labelKey=pi(ae),e.labelStyleKey=pi(nf(z.commonLabel,ae)),!s){var re=i(t,["source-label"],z.labelDimensions);e.sourceLabelKey=pi(re),e.sourceLabelStyleKey=pi(nf(z.commonLabel,re));var K=i(t,["target-label"],z.labelDimensions);e.targetLabelKey=pi(K),e.targetLabelStyleKey=pi(nf(z.commonLabel,K))}if(s){var V=e.styleKeys,Z=V.nodeBody,U=V.nodeBorder,W=V.nodeOutline,X=V.backgroundImage,ee=V.compound,oe=V.pie,te=V.stripe,ie=[Z,U,W,X,ee,oe,te].filter(function(se){return se!=null}).reduce(nf,[vo,us]);e.nodeKey=pi(ie),e.hasPie=oe!=null&&oe[0]!==vo&&oe[1]!==us,e.hasStripe=te!=null&&te[0]!==vo&&te[1]!==us}return o!==e.styleKey};Xr.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};Xr.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,o=r.types,s=r.properties[n.name].type,u=n.bypass,f=a[n.name],c=f&&f.bypass,h=t._private,g="mapping",y=function(Z){return Z==null?null:Z.pfValue!=null?Z.pfValue:Z.value},p=function(){var Z=y(f),U=y(n);r.checkTriggers(t,n.name,Z,U)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return a[n.name]=void 0,p(),!0;if(n.deleteBypassed)return f?f.bypass?(f.bypassed=void 0,p(),!0):!1:(p(),!0);if(n.deleteBypass)return f?f.bypass?(a[n.name]=f.bypassed,p(),!0):!1:(p(),!0);var C=function(){Xt("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var E=n.field.split("."),v=h.data,x=0;x<E.length&&v;x++){var w=E[x];v=v[w]}if(v==null)return C(),!1;var T;if(it(v)){var A=n.fieldMax-n.fieldMin;A===0?T=0:T=(v-n.fieldMin)/A}else return Xt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+v+"` for `"+t.id()+"` is non-numeric)"),!1;if(T<0?T=0:T>1&&(T=1),s.color){var M=n.valueMin[0],D=n.valueMax[0],_=n.valueMin[1],k=n.valueMax[1],F=n.valueMin[2],G=n.valueMax[2],B=n.valueMin[3]==null?1:n.valueMin[3],q=n.valueMax[3]==null?1:n.valueMax[3],R=[Math.round(M+(D-M)*T),Math.round(_+(k-_)*T),Math.round(F+(G-F)*T),Math.round(B+(q-B)*T)];i={bypass:n.bypass,name:n.name,value:R,strValue:"rgb("+R[0]+", "+R[1]+", "+R[2]+")"}}else if(s.number){var P=n.valueMin+(n.valueMax-n.valueMin)*T;i=this.parse(n.name,P,n.bypass,g)}else return!1;if(!i)return C(),!1;i.mapping=n,n=i;break}case o.data:{for(var N=n.field.split("."),I=h.data,z=0;z<N.length&&I;z++){var ae=N[z];I=I[ae]}if(I!=null&&(i=this.parse(n.name,I,n.bypass,g)),!i)return C(),!1;i.mapping=n,n=i;break}case o.fn:{var re=n.value,K=n.fnValue!=null?n.fnValue:re(t);if(n.prevFnValue=K,K==null)return Xt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,K,n.bypass,g),!i)return Xt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Sa(n),n=i;break}case void 0:break;default:return!1}return u?(c?n.bypassed=f.bypassed:n.bypassed=f,a[n.name]=n):c?f.bypassed=n:a[n.name]=n,p(),!0};Xr.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],u=a[s];u!=null&&(u.bypass?u.bypassed=null:a[s]=null)}}};Xr.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};Xr.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},u=!1,f=0;f<a.length;f++){var c=a[f],h=t.pstyle(c),g=e[c];if(g){var y=g.prev,p=y,C=g.next!=null?g.next:h,E=!1,v=void 0,x=1e-6;p&&(it(p.pfValue)&&it(C.pfValue)?(E=C.pfValue-p.pfValue,v=p.pfValue+x*E):it(p.value)&&it(C.value)?(E=C.value-p.value,v=p.value+x*E):ir(p.value)&&ir(C.value)&&(E=p.value[0]!==C.value[0]||p.value[1]!==C.value[1]||p.value[2]!==C.value[2],v=p.strValue),E&&(s[c]=C.strValue,this.applyBypass(t,c,v),u=!0))}}if(!u)return;n.transitioning=!0,new Ds(function(w){o>0?t.delayAnimation(o).play().promise().then(w):w()}).then(function(){return t.animation({style:s,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};Xr.checkTrigger=function(t,e,r,n,a,i){var o=this.properties[e],s=a(o);t.removed()||s!=null&&s(r,n,t)&&i(o)};Xr.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};Xr.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};Xr.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Xr.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Xr.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};var hu={};hu.applyBypass=function(t,e,r,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var s=0;s<a.properties.length;s++){var u=a.properties[s],f=u.name,c=this.parse(f,r,!0);c&&i.push(c)}}else if(mt(e)){var h=this.parse(e,r,!0);h&&i.push(h)}else if(Bt(e)){var g=e;n=r;for(var y=Object.keys(g),p=0;p<y.length;p++){var C=y[p],E=g[C];if(E===void 0&&(E=g[Tc(C)]),E!==void 0){var v=this.parse(C,E,!0);v&&i.push(v)}}}else return!1;if(i.length===0)return!1;for(var x=!1,w=0;w<t.length;w++){for(var T=t[w],A={},M=void 0,D=0;D<i.length;D++){var _=i[D];if(n){var k=T.pstyle(_.name);M=A[_.name]={prev:k}}x=this.applyParsedProperty(T,Sa(_))||x,n&&(M.next=T.pstyle(_.name))}x&&this.updateStyleHints(T),n&&this.updateTransitions(T,A,o)}return x};hu.overrideBypass=function(t,e,r){e=w1(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,u=o.mutiple,f=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),s?i.strValue="rgb("+r.join(",")+")":u?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,f,r)}};hu.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};hu.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],o={},s=0;s<e.length;s++){var u=e[s],f=this.properties[u],c=i.pstyle(f.name);if(!(!c||!c.bypass)){var h="",g=this.parse(u,h,!0),y=o[f.name]={prev:c};this.applyParsedProperty(i,g),y.next=i.pstyle(f.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,o,n)}};var O1={};O1.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};O1.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var La={};La.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};La.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],o=r.getStylePropertyValue(t,i.name,e);o!=null&&(n[i.name]=o,n[Tc(i.name)]=o)}return n}};La.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};La.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=t.pstyle(a.name);if(o){var s=o.value,u=o.units,f=o.strValue;if(r&&i.number&&s!=null&&it(s)){var c=t.cy().zoom(),h=function(E){return E*c},g=function(E,v){return h(E)+v},y=ir(s),p=y?u.every(function(C){return C!=null}):u!=null;return p?y?s.map(function(C,E){return g(C,u[E])}).join(" "):g(s,u):y?s.map(function(C){return mt(C)?C:""+h(C)}).join(" "):""+h(s)}else if(f!=null)return f}return null}};La.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=t.pstyle(i);o!==void 0&&(Bt(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(r[i]=o)}return r};La.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],u=n[s],f=a[s]||a[w1(s)],c=this.parse(f.name,u);c&&r.push(c)}return r};La.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,o,s,u,f;for(u=0;u<e.length;u++)if(a=e[u],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=$l(s,n[0]),n[1]=Yl(s,n[1]);else for(o=i.strValue,f=0;f<o.length;f++)s=o.charCodeAt(f),n[0]=$l(s,n[0]),n[1]=Yl(s,n[1]);return n};La.getPropertiesHash=La.getNonDefaultPropertiesHash;var Fc={};Fc.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var u=o[s],f=i[u];e.css(u,f)}}return e};Fc.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Fc.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var I1={};I1.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function u(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var f=n.match(/^\s*$/);if(f)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Xt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var h=c[1];if(h!=="core"){var g=new Pi(h);if(g.invalid){Xt("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),s();continue}}var y=c[2],p=!1;i=y;for(var C=[];;){var E=i.match(/^\s*$/);if(E)break;var v=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!v){Xt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+y),p=!0;break}o=v[0];var x=v[1],w=v[2],T=e.properties[x];if(!T){Xt("Skipping property: Invalid property name in: "+o),u();continue}var A=r.parse(x,w);if(!A){Xt("Skipping property: Invalid property definition in: "+o),u();continue}C.push({name:x,val:w}),u()}if(p){s();break}r.selector(h);for(var M=0;M<C.length;M++){var D=C[M];r.css(D.name,D.val)}s()}return r};I1.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var Lr={};(function(){var t=Br,e=Oq,r=Fq,n=Bq,a=qq,i=function(se){return"^"+se+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(se){var $=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+se+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+$+")\\s*\\,\\s*("+$+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Lr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(se,$){switch(se.length){case 2:return $[0]!=="deg"&&$[0]!=="rad"&&$[1]!=="deg"&&$[1]!=="rad";case 1:return mt(se[0])||$[0]==="deg"||$[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(se){var $=se.length;return $===1||$===2||$===4}}};var u={zeroNonZero:function(se,$){return(se==null||$==null)&&se!==$||se==0&&$!=0?!0:se!=0&&$==0},any:function(se,$){return se!=$},emptyNonEmpty:function(se,$){var ne=_i(se),le=_i($);return ne&&!le||!ne&&le}},f=Lr.types,c=[{name:"label",type:f.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:f.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:f.bidirectionalSize,triggersBounds:u.any}],h=[{name:"source-label",type:f.text,triggersBounds:u.any},{name:"source-text-rotation",type:f.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:f.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:f.size,triggersBounds:u.any}],g=[{name:"target-label",type:f.text,triggersBounds:u.any},{name:"target-text-rotation",type:f.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:f.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:f.size,triggersBounds:u.any}],y=[{name:"font-family",type:f.fontFamily,triggersBounds:u.any},{name:"font-style",type:f.fontStyle,triggersBounds:u.any},{name:"font-weight",type:f.fontWeight,triggersBounds:u.any},{name:"font-size",type:f.size,triggersBounds:u.any},{name:"text-transform",type:f.textTransform,triggersBounds:u.any},{name:"text-wrap",type:f.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:f.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:f.size,triggersBounds:u.any},{name:"text-outline-width",type:f.size,triggersBounds:u.any},{name:"line-height",type:f.positiveNumber,triggersBounds:u.any}],p=[{name:"text-valign",type:f.valign,triggersBounds:u.any},{name:"text-halign",type:f.halign,triggersBounds:u.any},{name:"color",type:f.color},{name:"text-outline-color",type:f.color},{name:"text-outline-opacity",type:f.zeroOneNumber},{name:"text-background-color",type:f.color},{name:"text-background-opacity",type:f.zeroOneNumber},{name:"text-background-padding",type:f.size,triggersBounds:u.any},{name:"text-border-opacity",type:f.zeroOneNumber},{name:"text-border-color",type:f.color},{name:"text-border-width",type:f.size,triggersBounds:u.any},{name:"text-border-style",type:f.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:f.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:f.justification},{name:"box-select-labels",type:f.bool,triggersBounds:u.any}],C=[{name:"events",type:f.bool,triggersZOrder:u.any},{name:"text-events",type:f.bool,triggersZOrder:u.any}],E=[{name:"display",type:f.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(se,$,ne){return se===$?!1:ne.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:f.visibility,triggersZOrder:u.any},{name:"opacity",type:f.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:f.zeroOneNumber},{name:"min-zoomed-font-size",type:f.size},{name:"z-compound-depth",type:f.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:f.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:f.number,triggersZOrder:u.any}],v=[{name:"overlay-padding",type:f.size,triggersBounds:u.any},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:f.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:f.cornerRadius}],x=[{name:"underlay-padding",type:f.size,triggersBounds:u.any},{name:"underlay-color",type:f.color},{name:"underlay-opacity",type:f.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:f.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:f.cornerRadius}],w=[{name:"transition-property",type:f.propList},{name:"transition-duration",type:f.time},{name:"transition-delay",type:f.time},{name:"transition-timing-function",type:f.easing}],T=function(se,$){return $.value==="label"?-se.poolIndex():$.pfValue},A=[{name:"height",type:f.nodeSize,triggersBounds:u.any,hashOverride:T},{name:"width",type:f.nodeSize,triggersBounds:u.any,hashOverride:T},{name:"shape",type:f.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:f.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:f.cornerRadius},{name:"background-color",type:f.color},{name:"background-fill",type:f.fill},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-blacken",type:f.nOneOneNumber},{name:"background-gradient-stop-colors",type:f.colors},{name:"background-gradient-stop-positions",type:f.percentages},{name:"background-gradient-direction",type:f.gradientDirection},{name:"padding",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:f.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:f.boundsExpansion,triggersBounds:u.any}],M=[{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size,triggersBounds:u.any},{name:"border-style",type:f.borderStyle},{name:"border-cap",type:f.lineCap},{name:"border-join",type:f.lineJoin},{name:"border-dash-pattern",type:f.numbers},{name:"border-dash-offset",type:f.number},{name:"border-position",type:f.linePosition}],D=[{name:"outline-color",type:f.color},{name:"outline-opacity",type:f.zeroOneNumber},{name:"outline-width",type:f.size,triggersBounds:u.any},{name:"outline-style",type:f.borderStyle},{name:"outline-offset",type:f.size,triggersBounds:u.any}],_=[{name:"background-image",type:f.urls},{name:"background-image-crossorigin",type:f.bgCrossOrigin},{name:"background-image-opacity",type:f.zeroOneNumbers},{name:"background-image-containment",type:f.bgContainment},{name:"background-image-smoothing",type:f.bools},{name:"background-position-x",type:f.bgPos},{name:"background-position-y",type:f.bgPos},{name:"background-width-relative-to",type:f.bgRelativeTo},{name:"background-height-relative-to",type:f.bgRelativeTo},{name:"background-repeat",type:f.bgRepeat},{name:"background-fit",type:f.bgFit},{name:"background-clip",type:f.bgClip},{name:"background-width",type:f.bgWH},{name:"background-height",type:f.bgWH},{name:"background-offset-x",type:f.bgPos},{name:"background-offset-y",type:f.bgPos}],k=[{name:"position",type:f.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:f.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:f.size,triggersBounds:u.any},{name:"min-width-bias-left",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:f.size,triggersBounds:u.any},{name:"min-height-bias-top",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:f.sizeMaybePercent,triggersBounds:u.any}],F=[{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"line-fill",type:f.fill},{name:"line-cap",type:f.lineCap},{name:"line-opacity",type:f.zeroOneNumber},{name:"line-dash-pattern",type:f.numbers},{name:"line-dash-offset",type:f.number},{name:"line-outline-width",type:f.size},{name:"line-outline-color",type:f.color},{name:"line-gradient-stop-colors",type:f.colors},{name:"line-gradient-stop-positions",type:f.percentages},{name:"curve-style",type:f.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(se,$){return se===$?!1:se==="bezier"||$==="bezier"}},{name:"haystack-radius",type:f.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:f.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:f.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:f.size,triggersBounds:u.any},{name:"control-point-distances",type:f.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:f.numbers,triggersBounds:u.any},{name:"segment-distances",type:f.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:f.numbers,triggersBounds:u.any},{name:"segment-radii",type:f.numbers,triggersBounds:u.any},{name:"radius-type",type:f.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:f.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:f.size,triggersBounds:u.any},{name:"taxi-direction",type:f.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:f.number,triggersBounds:u.any},{name:"edge-distances",type:f.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:f.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:f.angle,triggersBounds:u.any},{name:"loop-sweep",type:f.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:f.size,triggersBounds:u.any},{name:"target-distance-from-node",type:f.size,triggersBounds:u.any}],G=[{name:"ghost",type:f.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:f.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:f.zeroOneNumber}],B=[{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size},{name:"outside-texture-bg-color",type:f.color},{name:"outside-texture-bg-opacity",type:f.zeroOneNumber}],q=[];Lr.pieBackgroundN=16,q.push({name:"pie-size",type:f.sizeMaybePercent}),q.push({name:"pie-hole",type:f.sizeMaybePercent}),q.push({name:"pie-start-angle",type:f.angle});for(var R=1;R<=Lr.pieBackgroundN;R++)q.push({name:"pie-"+R+"-background-color",type:f.color}),q.push({name:"pie-"+R+"-background-size",type:f.percent}),q.push({name:"pie-"+R+"-background-opacity",type:f.zeroOneNumber});var P=[];Lr.stripeBackgroundN=16,P.push({name:"stripe-size",type:f.sizeMaybePercent}),P.push({name:"stripe-direction",type:f.axisDirectionPrimary});for(var N=1;N<=Lr.stripeBackgroundN;N++)P.push({name:"stripe-"+N+"-background-color",type:f.color}),P.push({name:"stripe-"+N+"-background-size",type:f.percent}),P.push({name:"stripe-"+N+"-background-opacity",type:f.zeroOneNumber});var I=[],z=Lr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:f.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:f.color},{name:"arrow-fill",type:f.arrowFill},{name:"arrow-width",type:f.arrowWidth}].forEach(function(ie){z.forEach(function(se){var $=se+"-"+ie.name,ne=ie.type,le=ie.triggersBounds;I.push({name:$,type:ne,triggersBounds:le})})},{});var ae=Lr.properties=[].concat(C,w,E,v,x,G,p,y,c,h,g,A,M,D,_,q,P,k,F,I,B),re=Lr.propertyGroups={behavior:C,transition:w,visibility:E,overlay:v,underlay:x,ghost:G,commonLabel:p,labelDimensions:y,mainLabel:c,sourceLabel:h,targetLabel:g,nodeBody:A,nodeBorder:M,nodeOutline:D,backgroundImage:_,pie:q,stripe:P,compound:k,edgeLine:F,edgeArrow:I,core:B},K=Lr.propertyGroupNames={},V=Lr.propertyGroupKeys=Object.keys(re);V.forEach(function(ie){K[ie]=re[ie].map(function(se){return se.name}),re[ie].forEach(function(se){return se.groupKey=ie})});var Z=Lr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Lr.propertyNames=ae.map(function(ie){return ie.name});for(var U=0;U<ae.length;U++){var W=ae[U];ae[W.name]=W}for(var X=0;X<Z.length;X++){var ee=Z[X],oe=ae[ee.pointsTo],te={name:ee.name,alias:!0,pointsTo:oe};ae.push(te),ae[ee.name]=te}})();Lr.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};Lr.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Et({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,f){for(var c=1;c<=Lr.pieBackgroundN;c++){var h=f.name.replace("{{i}}",c),g=f.value;u[h]=g}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,f){for(var c=1;c<=Lr.stripeBackgroundN;c++){var h=f.name.replace("{{i}}",c),g=f.value;u[h]=g}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,f){return Lr.arrowPrefixes.forEach(function(c){var h=c+"-"+f.name,g=f.value;u[h]=g}),u},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],s=this.parse(i,o);r[i]=s}}return t.defaultProperties=r,t.defaultProperties};Lr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Bc={};Bc.parse=function(t,e,r,n){var a=this;if(br(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=r?"t":"f",s=""+e,u=JP(t,s,o,i),f=a.propCache=a.propCache||[],c;return(c=f[u])||(c=f[u]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=Sa(c),c&&(c.value=Sa(c.value))),c};Bc.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Xt("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Xt("The style value of `label` is deprecated for `"+a.name+"`"),a};Bc.parseImpl=function(t,e,r,n){var a=this;t=w1(t);var i=a.properties[t],o=e,s=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var u=mt(e);u&&(e=e.trim());var f=i.type;if(!f)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(br(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:r};var c,h;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(r)return!1;var g=s.data;return{name:t,value:c,strValue:""+e,mapped:g,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(h=new RegExp(s.mapData.regex).exec(e))){if(r||f.multiple)return!1;var y=s.mapData;if(!(f.color||f.number))return!1;var p=this.parse(t,h[4]);if(!p||p.mapped)return!1;var C=this.parse(t,h[5]);if(!C||C.mapped)return!1;if(p.pfValue===C.pfValue||p.strValue===C.strValue)return Xt("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+p.strValue+"`"),this.parse(t,p.strValue);if(f.color){var E=p.value,v=C.value,x=E[0]===v[0]&&E[1]===v[1]&&E[2]===v[2]&&(E[3]===v[3]||(E[3]==null||E[3]===1)&&(v[3]==null||v[3]===1));if(x)return!1}return{name:t,value:h,strValue:""+e,mapped:y,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:p.value,valueMax:C.value,bypass:r}}}if(f.multiple&&n!=="multiple"){var w;if(u?w=e.split(/\s+/):ir(e)?w=e:w=[e],f.evenMultiple&&w.length%2!==0)return null;for(var T=[],A=[],M=[],D="",_=!1,k=0;k<w.length;k++){var F=a.parse(t,w[k],r,"multiple");_=_||mt(F.value),T.push(F.value),M.push(F.pfValue!=null?F.pfValue:F.value),A.push(F.units),D+=(k>0?" ":"")+F.strValue}return f.validate&&!f.validate(T,A)?null:f.singleEnum&&_?T.length===1&&mt(T[0])?{name:t,value:T[0],strValue:T[0],bypass:r}:null:{name:t,value:T,pfValue:M,strValue:D,bypass:r,units:A}}var G=function(){for(var te=0;te<f.enums.length;te++){var ie=f.enums[te];if(ie===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(f.number){var B,q="px";if(f.units&&(B=f.units),f.implicitUnits&&(q=f.implicitUnits),!f.unitless)if(u){var R="px|em"+(f.allowPercent?"|\\%":"");B&&(R=B);var P=e.match("^("+Br+")("+R+")?$");P&&(e=P[1],B=P[2]||q)}else(!B||f.implicitUnits)&&(B=q);if(e=parseFloat(e),isNaN(e)&&f.enums===void 0)return null;if(isNaN(e)&&f.enums!==void 0)return e=o,G();if(f.integer&&!Dq(e)||f.min!==void 0&&(e<f.min||f.strictMin&&e===f.min)||f.max!==void 0&&(e>f.max||f.strictMax&&e===f.max))return null;var N={name:t,value:e,strValue:""+e+(B||""),units:B,bypass:r};return f.unitless||B!=="px"&&B!=="em"?N.pfValue=e:N.pfValue=B==="px"||!B?e:this.getEmSizeInPixels()*e,(B==="ms"||B==="s")&&(N.pfValue=B==="ms"?e:1e3*e),(B==="deg"||B==="rad")&&(N.pfValue=B==="rad"?e:Oz(e)),B==="%"&&(N.pfValue=e/100),N}else if(f.propList){var I=[],z=""+e;if(z!=="none"){for(var ae=z.split(/\s*,\s*|\s+/),re=0;re<ae.length;re++){var K=ae[re].trim();a.properties[K]?I.push(K):Xt("`"+K+"` is not a valid property name")}if(I.length===0)return null}return{name:t,value:I,strValue:I.length===0?"none":I.join(" "),bypass:r}}else if(f.color){var V=$P(e);return V?{name:t,value:V,pfValue:V,strValue:"rgb("+V[0]+","+V[1]+","+V[2]+")",bypass:r}:null}else if(f.regex||f.regexes){if(f.enums){var Z=G();if(Z)return Z}for(var U=f.regexes?f.regexes:[f.regex],W=0;W<U.length;W++){var X=new RegExp(U[W]),ee=X.exec(e);if(ee)return{name:t,value:f.singleRegexMatchValue?ee[1]:ee,strValue:""+e,bypass:r}}return null}else return f.string?{name:t,value:""+e,strValue:""+e,bypass:r}:f.enums?G():null};var $r=function(e){if(!(this instanceof $r))return new $r(e);if(!b1(e)){yr("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},vn=$r.prototype;vn.instanceString=function(){return"style"};vn.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};vn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};vn.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};vn.selector=function(t){var e=t==="core"?null:new Pi(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};vn.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[Tc(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};vn.style=vn.css;vn.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};vn.append=function(t){return UP(t)?t.appendToStyle(this):ir(t)?this.appendFromJson(t):mt(t)&&this.appendFromString(t),this};$r.fromJson=function(t,e){var r=new $r(t);return r.fromJson(e),r};$r.fromString=function(t,e){return new $r(t).fromString(e)};[Xr,hu,O1,La,Fc,I1,Lr,Bc].forEach(function(t){Et(vn,t)});$r.types=vn.types;$r.properties=vn.properties;$r.propertyGroups=vn.propertyGroups;$r.propertyGroupNames=vn.propertyGroupNames;$r.propertyGroupKeys=vn.propertyGroupKeys;var qH={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return UP(e)?r.style=e.generateStyle(this):ir(e)?r.style=$r.fromJson(this,e):mt(e)?r.style=$r.fromString(this,e):r.style=$r(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},zH="single",Eo={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=zH),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,o,s;switch(e.length){case 0:return r;case 1:if(mt(e[0]))return n=e[0],r[n];if(Bt(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,it(o)&&(r.x=o),it(s)&&(r.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&it(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,o,s,u,f;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Bt(e)&&(s=n[0],u=s.x,f=s.y,it(u)&&(a.x+=u),it(f)&&(a.y+=f),this.emit("pan viewport"));break;case 2:i=e,o=r,(i==="x"||i==="y")&&it(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(it(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(mt(e)){var a=e;e=this.$(a)}else if(Rq(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else qn(e)||(e=this.mutableElements());if(!(qn(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),u;if(r=it(r)?r:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((o-2*r)/n.w,(s-2*r)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var f={x:(o-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:f}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return it(e)&&it(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):it(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:it(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,o,s=!1;if(r.zoomingEnabled||(s=!0),it(e)?o=e:Bt(e)&&(o=e.level,e.position!=null?i=Lc(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(s=!0)),o=o>r.maxZoom?r.maxZoom:o,o=o<r.minZoom?r.minZoom:o,s||!it(o)||o===a||i!=null&&(!it(i.x)||!it(i.y)))return null;if(i!=null){var u=n,f=a,c=o,h={x:-c/f*(i.x-u.x)+i.x,y:-c/f*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:h}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(it(e.zoom)||(n=!1),Bt(e.pan)||(a=!1),!n&&!a)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=u,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&r.panningEnabled){var f=e.pan;it(f.x)&&(r.pan.x=f.x,s=!1),it(f.y)&&(r.pan.y=f.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(mt(e)){var n=e;e=this.mutableElements().filter(n)}else qn(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();r=r===void 0?this._private.zoom:r;var s={x:(i-r*(a.x1+a.x2))/2,y:(o-r*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),i=function(s){return parseFloat(a.getPropertyValue(s))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Eo.centre=Eo.center;Eo.autolockNodes=Eo.autolock;Eo.autoungrabifyNodes=Eo.autoungrabify;var Jl={data:$t.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:$t.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:$t.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$t.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Jl.attr=Jl.data;Jl.removeAttr=Jl.removeData;var eu=function(e){var r=this;e=Et({},e);var n=e.container;n&&!Kf(n)&&Kf(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var o=Ir!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=Et({name:o?"grid":"null"},s.layout),s.renderer=Et({name:o?"canvas":"null"},s.renderer);var u=function(p,C,E){return C!==void 0?C:E!==void 0?E:p},f=this._private={container:n,ready:!1,options:s,elements:new rn(this),listeners:[],aniEles:new rn(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:it(s.zoom)?s.zoom:1,pan:{x:Bt(s.pan)&&it(s.pan.x)?s.pan.x:0,y:Bt(s.pan)&&it(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(p,C){var E=p.some(Pq);if(E)return Ds.all(p).then(C);C(p)};f.styleEnabled&&r.setStyle([]);var h=Et({},s,s.renderer);r.initRenderer(h);var g=function(p,C,E){r.notifications(!1);var v=r.mutableElements();v.length>0&&v.remove(),p!=null&&(Bt(p)||ir(p))&&r.add(p),r.one("layoutready",function(w){r.notifications(!0),r.emit(w),r.one("load",C),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",E),r.emit("done")});var x=Et({},r._private.options.layout);x.eles=r.elements(),r.layout(x).run()};c([s.style,s.elements],function(y){var p=y[0],C=y[1];f.styleEnabled&&r.style().append(p),g(C,function(){r.startAnimationLoop(),f.ready=!0,br(s.ready)&&r.on("ready",s.ready);for(var E=0;E<i.length;E++){var v=i[E];r.on("ready",v)}a&&(a.readies=[]),r.emit("ready")},s.done)})},rc=eu.prototype;Et(rc,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Ir;var r=this._private.container.ownerDocument;return r===void 0||r==null?Ir:r.defaultView||Ir},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!Kf(e)&&Kf(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(Et({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Sa(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(T){return r.getElementById(T.id())};if(Bt(e)){if(r.startBatch(),e.elements){var o={},s=function(T,A){for(var M=[],D=[],_=0;_<T.length;_++){var k=T[_];if(!k.data.id){Xt("cy.json() cannot handle elements without an ID attribute");continue}var F=""+k.data.id,G=r.getElementById(F);o[F]=!0,G.length!==0?D.push({ele:G,json:k}):(A&&(k.group=A),M.push(k))}r.add(M);for(var B=0;B<D.length;B++){var q=D[B],R=q.ele,P=q.json;R.json(P)}};if(ir(e.elements))s(e.elements);else for(var u=["nodes","edges"],f=0;f<u.length;f++){var c=u[f],h=e.elements[c];ir(h)&&s(h,c)}var g=r.collection();a.filter(function(w){return!o[w.id()]}).forEach(function(w){w.isParent()?g.merge(w):w.remove()}),g.forEach(function(w){return w.children().move({parent:null})}),g.forEach(function(w){return i(w).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var y=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<y.length;p++){var C=y[p];e[C]!=null&&r[C](e[C])}return r.endBatch(),this}else{var E=!!e,v={};E?v.elements=this.elements().map(function(w){return w.json()}):(v.elements={},a.forEach(function(w){var T=w.group();v.elements[T]||(v.elements[T]=[]),v.elements[T].push(w.json())})),this._private.styleEnabled&&(v.style=r.style().json()),v.data=Sa(r.data());var x=n.options;return v.zoomingEnabled=n.zoomingEnabled,v.userZoomingEnabled=n.userZoomingEnabled,v.zoom=n.zoom,v.minZoom=n.minZoom,v.maxZoom=n.maxZoom,v.panningEnabled=n.panningEnabled,v.userPanningEnabled=n.userPanningEnabled,v.pan=Sa(n.pan),v.boxSelectionEnabled=n.boxSelectionEnabled,v.renderer=Sa(x.renderer),v.hideEdgesOnViewport=x.hideEdgesOnViewport,v.textureOnViewport=x.textureOnViewport,v.wheelSensitivity=x.wheelSensitivity,v.motionBlur=x.motionBlur,v.multiClickDebounceTime=x.multiClickDebounceTime,v}}});rc.$id=rc.getElementById;[_H,NH,Gk,Hb,Lf,IH,Ub,Df,qH,Eo,Jl].forEach(function(t){Et(rc,t)});var GH={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},HH={maximal:!1,acyclic:!1},ns=function(e){return e.scratch("breadthfirst")},WT=function(e,r){return e.scratch("breadthfirst",r)};function Hk(t){this.options=Et({},GH,HH,t)}Hk.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(Te){return Te.isChildless()}),a=r,i=t.directed,o=t.acyclic||t.maximal||t.maximalAdjustments>0,s=!!t.boundingBox,u=e.extent(),f=Nn(s?t.boundingBox:{x1:u.x1,y1:u.y1,w:u.w,h:u.h}),c;if(qn(t.roots))c=t.roots;else if(ir(t.roots)){for(var h=[],g=0;g<t.roots.length;g++){var y=t.roots[g],p=e.getElementById(y);h.push(p)}c=e.collection(h)}else if(mt(t.roots))c=e.$(t.roots);else if(i)c=n.roots();else{var C=r.components();c=e.collection();for(var E=function(){var pe=C[v],de=pe.maxDegree(!1),ye=pe.filter(function(Ee){return Ee.degree(!1)===de});c=c.add(ye)},v=0;v<C.length;v++)E()}var x=[],w={},T=function(pe,de){x[de]==null&&(x[de]=[]);var ye=x[de].length;x[de].push(pe),WT(pe,{index:ye,depth:de})},A=function(pe,de){var ye=ns(pe),Ee=ye.depth,ue=ye.index;x[Ee][ue]=null,pe.isChildless()&&T(pe,de)};a.bfs({roots:c,directed:t.directed,visit:function(pe,de,ye,Ee,ue){var Ae=pe[0],Pe=Ae.id();Ae.isChildless()&&T(Ae,ue),w[Pe]=!0}});for(var M=[],D=0;D<n.length;D++){var _=n[D];w[_.id()]||M.push(_)}var k=function(pe){for(var de=x[pe],ye=0;ye<de.length;ye++){var Ee=de[ye];if(Ee==null){de.splice(ye,1),ye--;continue}WT(Ee,{depth:pe,index:ye})}},F=function(pe,de){for(var ye=ns(pe),Ee=pe.incomers().filter(function(Qe){return Qe.isNode()&&r.has(Qe)}),ue=-1,Ae=pe.id(),Pe=0;Pe<Ee.length;Pe++){var Fe=Ee[Pe],Ye=ns(Fe);ue=Math.max(ue,Ye.depth)}if(ye.depth<=ue){if(!t.acyclic&&de[Ae])return null;var Ve=ue+1;return A(pe,Ve),de[Ae]=Ve,!0}return!1};if(i&&o){var G=[],B={},q=function(pe){return G.push(pe)},R=function(){return G.shift()};for(n.forEach(function(Te){return G.push(Te)});G.length>0;){var P=R(),N=F(P,B);if(N)P.outgoers().filter(function(Te){return Te.isNode()&&r.has(Te)}).forEach(q);else if(N===null){Xt("Detected double maximal shift for node `"+P.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var I=0;if(t.avoidOverlap)for(var z=0;z<n.length;z++){var ae=n[z],re=ae.layoutDimensions(t),K=re.w,V=re.h;I=Math.max(I,K,V)}var Z={},U=function(pe){if(Z[pe.id()])return Z[pe.id()];for(var de=ns(pe).depth,ye=pe.neighborhood(),Ee=0,ue=0,Ae=0;Ae<ye.length;Ae++){var Pe=ye[Ae];if(!(Pe.isEdge()||Pe.isParent()||!n.has(Pe))){var Fe=ns(Pe);if(Fe!=null){var Ye=Fe.index,Ve=Fe.depth;if(!(Ye==null||Ve==null)){var Qe=x[Ve].length;Ve<de&&(Ee+=Ye/Qe,ue++)}}}}return ue=Math.max(1,ue),Ee=Ee/ue,ue===0&&(Ee=0),Z[pe.id()]=Ee,Ee},W=function(pe,de){var ye=U(pe),Ee=U(de),ue=ye-Ee;return ue===0?WP(pe.id(),de.id()):ue};t.depthSort!==void 0&&(W=t.depthSort);for(var X=x.length,ee=0;ee<X;ee++)x[ee].sort(W),k(ee);for(var oe=[],te=0;te<M.length;te++)oe.push(M[te]);var ie=function(){for(var pe=0;pe<X;pe++)k(pe)};oe.length&&(x.unshift(oe),X=x.length,ie());for(var se=0,$=0;$<X;$++)se=Math.max(x[$].length,se);var ne={x:f.x1+f.w/2,y:f.y1+f.h/2},le=n.reduce(function(Te,pe){return function(de){return{w:Te.w===-1?de.w:(Te.w+de.w)/2,h:Te.h===-1?de.h:(Te.h+de.h)/2}}(pe.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),Se=Math.max(X===1?0:s?(f.h-t.padding*2-le.h)/(X-1):(f.h-t.padding*2-le.h)/(X+1),I),De=x.reduce(function(Te,pe){return Math.max(Te,pe.length)},0),be=function(pe){var de=ns(pe),ye=de.depth,Ee=de.index;if(t.circle){var ue=Math.min(f.w/2/X,f.h/2/X);ue=Math.max(ue,I);var Ae=ue*ye+ue-(X>0&&x[0].length<=3?ue/2:0),Pe=2*Math.PI/x[ye].length*Ee;return ye===0&&x[0].length===1&&(Ae=1),{x:ne.x+Ae*Math.cos(Pe),y:ne.y+Ae*Math.sin(Pe)}}else{var Fe=x[ye].length,Ye=Math.max(Fe===1?0:s?(f.w-t.padding*2-le.w)/((t.grid?De:Fe)-1):(f.w-t.padding*2-le.w)/((t.grid?De:Fe)+1),I),Ve={x:ne.x+(Ee+1-(Fe+1)/2)*Ye,y:ne.y+(ye+1-(X+1)/2)*Se};return Ve}};return r.nodes().layoutPositions(this,t,be),this};var UH={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Uk(t){this.options=Et({},UH,t)}Uk.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=Nn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,f=u/Math.max(1,i.length-1),c,h=0,g=0;g<i.length;g++){var y=i[g],p=y.layoutDimensions(e),C=p.w,E=p.h;h=Math.max(h,C,E)}if(it(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(o.h,o.w)/2-h,i.length>1&&e.avoidOverlap){h*=1.75;var v=Math.cos(f)-Math.cos(0),x=Math.sin(f)-Math.sin(0),w=Math.sqrt(h*h/(v*v+x*x));c=Math.max(w,c)}var T=function(M,D){var _=e.startAngle+D*f*(a?1:-1),k=c*Math.cos(_),F=c*Math.sin(_),G={x:s.x+k,y:s.y+F};return G};return n.nodes().layoutPositions(this,e,T),this};var VH={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Vk(t){this.options=Et({},VH,t)}Vk.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),o=Nn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],f=0,c=0;c<i.length;c++){var h=i[c],g=void 0;g=e.concentric(h),u.push({value:g,node:h}),h._private.scratch.concentric=g}i.updateStyle();for(var y=0;y<i.length;y++){var p=i[y],C=p.layoutDimensions(e);f=Math.max(f,C.w,C.h)}u.sort(function(le,Se){return Se.value-le.value});for(var E=e.levelWidth(i),v=[[]],x=v[0],w=0;w<u.length;w++){var T=u[w];if(x.length>0){var A=Math.abs(x[0].value-T.value);A>=E&&(x=[],v.push(x))}x.push(T)}var M=f+e.minNodeSpacing;if(!e.avoidOverlap){var D=v.length>0&&v[0].length>1,_=Math.min(o.w,o.h)/2-M,k=_/(v.length+D?1:0);M=Math.min(M,k)}for(var F=0,G=0;G<v.length;G++){var B=v[G],q=e.sweep===void 0?2*Math.PI-2*Math.PI/B.length:e.sweep,R=B.dTheta=q/Math.max(1,B.length-1);if(B.length>1&&e.avoidOverlap){var P=Math.cos(R)-Math.cos(0),N=Math.sin(R)-Math.sin(0),I=Math.sqrt(M*M/(P*P+N*N));F=Math.max(I,F)}B.r=F,F+=M}if(e.equidistant){for(var z=0,ae=0,re=0;re<v.length;re++){var K=v[re],V=K.r-ae;z=Math.max(z,V)}ae=0;for(var Z=0;Z<v.length;Z++){var U=v[Z];Z===0&&(ae=U.r),U.r=ae,ae+=z}}for(var W={},X=0;X<v.length;X++)for(var ee=v[X],oe=ee.dTheta,te=ee.r,ie=0;ie<ee.length;ie++){var se=ee[ie],$=e.startAngle+(r?1:-1)*oe*ie,ne={x:s.x+te*Math.cos($),y:s.y+te*Math.sin($)};W[se.node.id()]=ne}return a.nodes().layoutPositions(this,e,function(le){var Se=le.id();return W[Se]}),this};var Pv,WH={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function qc(t){this.options=Et({},WH,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),s=e.some(function(f){return f.data("id")===i}),u=e.some(function(f){return f.data("id")===o});return!s||!u});this.options.eles=this.options.eles.not(n)}qc.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Pv=!0:Pv=!1;var n=$H(e,r,t);Pv&&XH(n),t.randomize&&KH(n);var a=Qa(),i=function(){jH(n,e,t),t.fit===!0&&e.fit(t.padding)},o=function(g){return!(r.stopped||g>=t.numIter||(ZH(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var g=t.eles.nodes(),y=$k(n,t,g);g.layoutPositions(r,t,y)}},u=0,f=!0;if(t.animate===!0){var c=function(){for(var g=0;f&&g<t.refresh;)f=o(u),u++,g++;if(!f)YT(n,t),s();else{var y=Qa();y-a>=t.animationThreshold&&i(),jf(c)}};c()}else{for(;f;)f=o(u),u++;YT(n,t),s()}return this};qc.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};qc.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var $H=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=Nn(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},u=n.eles.components(),f={},c=0;c<u.length;c++)for(var h=u[c],g=0;g<h.length;g++){var y=h[g];f[y.id()]=c}for(var c=0;c<s.nodeSize;c++){var p=i[c],C=p.layoutDimensions(n),E={};E.isLocked=p.locked(),E.id=p.data("id"),E.parentId=p.data("parent"),E.cmptId=f[p.id()],E.children=[],E.positionX=p.position("x"),E.positionY=p.position("y"),E.offsetX=0,E.offsetY=0,E.height=C.w,E.width=C.h,E.maxX=E.positionX+E.width/2,E.minX=E.positionX-E.width/2,E.maxY=E.positionY+E.height/2,E.minY=E.positionY-E.height/2,E.padLeft=parseFloat(p.style("padding")),E.padRight=parseFloat(p.style("padding")),E.padTop=parseFloat(p.style("padding")),E.padBottom=parseFloat(p.style("padding")),E.nodeRepulsion=br(n.nodeRepulsion)?n.nodeRepulsion(p):n.nodeRepulsion,s.layoutNodes.push(E),s.idToIndex[E.id]=c}for(var v=[],x=0,w=-1,T=[],c=0;c<s.nodeSize;c++){var p=s.layoutNodes[c],A=p.parentId;A!=null?s.layoutNodes[s.idToIndex[A]].children.push(p.id):(v[++w]=p.id,T.push(p.id))}for(s.graphSet.push(T);x<=w;){var M=v[x++],D=s.idToIndex[M],y=s.layoutNodes[D],_=y.children;if(_.length>0){s.graphSet.push(_);for(var c=0;c<_.length;c++)v[++w]=_[c]}}for(var c=0;c<s.graphSet.length;c++)for(var k=s.graphSet[c],g=0;g<k.length;g++){var F=s.idToIndex[k[g]];s.indexToGraph[F]=c}for(var c=0;c<s.edgeSize;c++){var G=a[c],B={};B.id=G.data("id"),B.sourceId=G.data("source"),B.targetId=G.data("target");var q=br(n.idealEdgeLength)?n.idealEdgeLength(G):n.idealEdgeLength,R=br(n.edgeElasticity)?n.edgeElasticity(G):n.edgeElasticity,P=s.idToIndex[B.sourceId],N=s.idToIndex[B.targetId],I=s.indexToGraph[P],z=s.indexToGraph[N];if(I!=z){for(var ae=YH(B.sourceId,B.targetId,s),re=s.graphSet[ae],K=0,E=s.layoutNodes[P];re.indexOf(E.id)===-1;)E=s.layoutNodes[s.idToIndex[E.parentId]],K++;for(E=s.layoutNodes[N];re.indexOf(E.id)===-1;)E=s.layoutNodes[s.idToIndex[E.parentId]],K++;q*=K*n.nestingFactor}B.idealLength=q,B.elasticity=R,s.layoutEdges.push(B)}return s},YH=function(e,r,n){var a=Wk(e,r,0,n);return 2>a.count?0:a.graph},Wk=function(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var u=i[s],f=a.idToIndex[u],c=a.layoutNodes[f].children;if(c.length!==0){var h=a.indexToGraph[a.idToIndex[c[0]]],g=Wk(e,r,h,a);if(g.count!==0)if(g.count===1){if(o++,o===2)break}else return g}}return{count:o,graph:n}},XH,KH=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},$k=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var u=e.layoutNodes[e.idToIndex[o.data("id")]];if(r.boundingBox){var f=(u.positionX-i.x1)/i.w,c=(u.positionY-i.y1)/i.h;return{x:a.x1+f*a.w,y:a.y1+c*a.h}}else return{x:u.positionX,y:u.positionY}}},jH=function(e,r,n){var a=n.layout,i=n.eles.nodes(),o=$k(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},ZH=function(e,r,n){QH(e,r),tU(e),rU(e,r),nU(e),aU(e)},QH=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],u=o+1;u<i;u++){var f=e.layoutNodes[e.idToIndex[a[u]]];JH(s,f,e,r)}},$T=function(e){return-1+2*e*Math.random()},JH=function(e,r,n,a){var i=e.cmptId,o=r.cmptId;if(!(i!==o&&!n.isCompound)){var s=r.positionX-e.positionX,u=r.positionY-e.positionY,f=1;s===0&&u===0&&(s=$T(f),u=$T(f));var c=eU(e,r,s,u);if(c>0)var h=a.nodeOverlap*c,g=Math.sqrt(s*s+u*u),y=h*s/g,p=h*u/g;else var C=nc(e,s,u),E=nc(r,-1*s,-1*u),v=E.x-C.x,x=E.y-C.y,w=v*v+x*x,g=Math.sqrt(w),h=(e.nodeRepulsion+r.nodeRepulsion)/w,y=h*v/g,p=h*x/g;e.isLocked||(e.offsetX-=y,e.offsetY-=p),r.isLocked||(r.offsetX+=y,r.offsetY+=p)}},eU=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var o=e.maxY-r.minY;else var o=r.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},nc=function(e,r,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,u=n/r,f=o/s,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=i+o/2,c):0<r&&-1*f<=u&&u<=f?(c.x=a+s/2,c.y=i+s*n/2/r,c):0>r&&-1*f<=u&&u<=f?(c.x=a-s/2,c.y=i-s*n/2/r,c):0<n&&(u<=-1*f||u>=f)?(c.x=a+o*r/2/n,c.y=i+o/2,c):(0>n&&(u<=-1*f||u>=f)&&(c.x=a-o*r/2/n,c.y=i-o/2),c)},tU=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],s=e.idToIndex[a.targetId],u=e.layoutNodes[s],f=u.positionX-o.positionX,c=u.positionY-o.positionY;if(!(f===0&&c===0)){var h=nc(o,f,c),g=nc(u,-1*f,-1*c),y=g.x-h.x,p=g.y-h.y,C=Math.sqrt(y*y+p*p),E=Math.pow(a.idealLength-C,2)/a.elasticity;if(C!==0)var v=E*y/C,x=E*p/C;else var v=0,x=0;o.isLocked||(o.offsetX+=v,o.offsetY+=x),u.isLocked||(u.offsetX-=v,u.offsetY-=x)}}},rU=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var f=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[f.parentId]],s=c.positionX,u=c.positionY;for(var h=0;h<o;h++){var g=e.layoutNodes[e.idToIndex[i[h]]];if(!g.isLocked){var y=s-g.positionX,p=u-g.positionY,C=Math.sqrt(y*y+p*p);if(C>n){var E=r.gravity*y/C,v=r.gravity*p/C;g.offsetX+=E,g.offsetY+=v}}}}},nU=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],s=e.idToIndex[o],u=e.layoutNodes[s],f=u.children;if(0<f.length&&!u.isLocked){for(var c=u.offsetX,h=u.offsetY,g=0;g<f.length;g++){var y=e.layoutNodes[e.idToIndex[f[g]]];y.offsetX+=c,y.offsetY+=h,n[++i]=f[g]}u.offsetX=0,u.offsetY=0}}},aU=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=iU(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,Yk(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},iU=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},Yk=function(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return Yk(a,r)}},YT=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId,u=a[s]=a[s]||[];u.push(o)}for(var f=0,i=0;i<a.length;i++){var c=a[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var h=0;h<c.length;h++){var g=c[h];c.x1=Math.min(c.x1,g.positionX-g.width/2),c.x2=Math.max(c.x2,g.positionX+g.width/2),c.y1=Math.min(c.y1,g.positionY-g.height/2),c.y2=Math.max(c.y2,g.positionY+g.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,f+=c.w*c.h}}a.sort(function(x,w){return w.w*w.h-x.w*x.h});for(var y=0,p=0,C=0,E=0,v=Math.sqrt(f)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(c){for(var h=0;h<c.length;h++){var g=c[h];g.isLocked||(g.positionX+=y-c.x1,g.positionY+=p-c.y1)}y+=c.w+r.componentSpacing,C+=c.w+r.componentSpacing,E=Math.max(E,c.h),C>v&&(p+=E+r.componentSpacing,y=0,C=0,E=0)}}},oU={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Xk(t){this.options=Et({},oU,t)}Xk.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Nn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(Z){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),u=Math.round(s),f=Math.round(i.w/i.h*s),c=function(U){if(U==null)return Math.min(u,f);var W=Math.min(u,f);W==u?u=U:f=U},h=function(U){if(U==null)return Math.max(u,f);var W=Math.max(u,f);W==u?u=U:f=U},g=e.rows,y=e.cols!=null?e.cols:e.columns;if(g!=null&&y!=null)u=g,f=y;else if(g!=null&&y==null)u=g,f=Math.ceil(o/u);else if(g==null&&y!=null)f=y,u=Math.ceil(o/f);else if(f*u>o){var p=c(),C=h();(p-1)*C>=o?c(p-1):(C-1)*p>=o&&h(C-1)}else for(;f*u<o;){var E=c(),v=h();(v+1)*E>=o?h(v+1):c(E+1)}var x=i.w/f,w=i.h/u;if(e.condense&&(x=0,w=0),e.avoidOverlap)for(var T=0;T<a.length;T++){var A=a[T],M=A._private.position;(M.x==null||M.y==null)&&(M.x=0,M.y=0);var D=A.layoutDimensions(e),_=e.avoidOverlapPadding,k=D.w+_,F=D.h+_;x=Math.max(x,k),w=Math.max(w,F)}for(var G={},B=function(U,W){return!!G["c-"+U+"-"+W]},q=function(U,W){G["c-"+U+"-"+W]=!0},R=0,P=0,N=function(){P++,P>=f&&(P=0,R++)},I={},z=0;z<a.length;z++){var ae=a[z],re=e.position(ae);if(re&&(re.row!==void 0||re.col!==void 0)){var K={row:re.row,col:re.col};if(K.col===void 0)for(K.col=0;B(K.row,K.col);)K.col++;else if(K.row===void 0)for(K.row=0;B(K.row,K.col);)K.row++;I[ae.id()]=K,q(K.row,K.col)}}var V=function(U,W){var X,ee;if(U.locked()||U.isParent())return!1;var oe=I[U.id()];if(oe)X=oe.col*x+x/2+i.x1,ee=oe.row*w+w/2+i.y1;else{for(;B(R,P);)N();X=P*x+x/2+i.x1,ee=R*w+w/2+i.y1,q(R,P),N()}return{x:X,y:ee}};a.layoutPositions(this,e,V)}return this};var sU={ready:function(){},stop:function(){}};function F1(t){this.options=Et({},sU,t)}F1.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};F1.prototype.stop=function(){return this};var lU={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Kk(t){this.options=Et({},lU,t)}Kk.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=br(t.positions);function a(i){if(t.positions==null)return Mz(i.position());if(n)return t.positions(i);var o=t.positions[i._private.data.id];return o??null}return r.layoutPositions(this,t,function(i,o){var s=a(i);return i.locked()||s==null?!1:s}),this};var uU={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function jk(t){this.options=Et({},uU,t)}jk.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=Nn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var fU=[{name:"breadthfirst",impl:Hk},{name:"circle",impl:Uk},{name:"concentric",impl:Vk},{name:"cose",impl:qc},{name:"grid",impl:Xk},{name:"null",impl:F1},{name:"preset",impl:Kk},{name:"random",impl:jk}];function Zk(t){this.options=t,this.notifications=0}var XT=function(){},KT=function(){throw new Error("A headless instance can not render images")};Zk.prototype={recalculateRenderedStyle:XT,notify:function(){this.notifications++},init:XT,isHeadless:function(){return!0},png:KT,jpg:KT};var B1={};B1.arrowShapeWidth=.3;B1.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(f,c,h,g,y,p,C){var E=y.x-h/2-C,v=y.x+h/2+C,x=y.y-h/2-C,w=y.y+h/2+C,T=E<=f&&f<=v&&x<=c&&c<=w;return T},n=function(f,c,h,g,y){var p=f*Math.cos(g)-c*Math.sin(g),C=f*Math.sin(g)+c*Math.cos(g),E=p*h,v=C*h,x=E+y.x,w=v+y.y;return{x,y:w}},a=function(f,c,h,g){for(var y=[],p=0;p<f.length;p+=2){var C=f[p],E=f[p+1];y.push(n(C,E,c,h,g))}return y},i=function(f){for(var c=[],h=0;h<f.length;h++){var g=f[h];c.push(g.x,g.y)}return c},o=function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").pfValue*2},s=function(f,c){mt(c)&&(c=t[c]),t[f]=Et({name:f,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(g,y,p,C,E,v){var x=i(a(this.points,p+2*v,C,E)),w=Rn(g,y,x);return w},roughCollide:r,draw:function(g,y,p,C){var E=a(this.points,y,p,C);e.arrowShapeImpl("polygon")(g,E)},spacing:function(g){return 0},gap:o},c)};s("none",{collide:Zf,roughCollide:Zf,draw:C1,spacing:cC,gap:cC}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(f,c,h,g,y){var p=a(this.points,c,h,g),C=this.controlPoint,E=n(C[0],C[1],c,h,g);e.arrowShapeImpl(this.name)(f,p,E)},gap:function(f){return o(f)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(f,c,h,g,y,p,C){var E=i(a(this.points,h+2*C,g,y)),v=i(a(this.pointsTee,h+2*C,g,y)),x=Rn(f,c,E)||Rn(f,c,v);return x},draw:function(f,c,h,g,y){var p=a(this.points,c,h,g),C=a(this.pointsTee,c,h,g);e.arrowShapeImpl(this.name)(f,p,C)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(f,c,h,g,y,p,C){var E=y,v=Math.pow(E.x-f,2)+Math.pow(E.y-c,2)<=Math.pow((h+2*C)*this.radius,2),x=i(a(this.points,h+2*C,g,y));return Rn(f,c,x)||v},draw:function(f,c,h,g,y){var p=a(this.pointsTr,c,h,g);e.arrowShapeImpl(this.name)(f,p,g.x,g.y,this.radius*c)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(f,c){var h=this.baseCrossLinePts.slice(),g=c/f,y=3,p=5;return h[y]=h[y]-g,h[p]=h[p]-g,h},collide:function(f,c,h,g,y,p,C){var E=i(a(this.points,h+2*C,g,y)),v=i(a(this.crossLinePts(h,p),h+2*C,g,y)),x=Rn(f,c,E)||Rn(f,c,v);return x},draw:function(f,c,h,g,y){var p=a(this.points,c,h,g),C=a(this.crossLinePts(c,y),c,h,g);e.arrowShapeImpl(this.name)(f,p,C)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(f){return o(f)*.525}}),s("circle",{radius:.15,collide:function(f,c,h,g,y,p,C){var E=y,v=Math.pow(E.x-f,2)+Math.pow(E.y-c,2)<=Math.pow((h+2*C)*this.radius,2);return v},draw:function(f,c,h,g,y){e.arrowShapeImpl(this.name)(f,g.x,g.y,this.radius*c)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(f){return 1},gap:function(f){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(f){return .95*f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}})};var To={};To.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=r.pan(),u=r.zoom(),f=((t-a)/o-s.x)/u,c=((e-i)/o-s.y)/u;return[f,c]};To.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(v){return parseFloat(r.getPropertyValue(v))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=t.clientWidth,s=t.clientHeight,u=a.left+a.right,f=a.top+a.bottom,c=i.left+i.right,h=e.width/(o+c),g=o-u,y=s-f,p=e.left+a.left+i.left,C=e.top+a.top+i.top;return this.containerBB=[p,C,g,y,h]};To.invalidateContainerClientCoordsCache=function(){this.containerBB=null};To.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};To.findNearestElements=function(t,e,r,n){var a=this,i=this,o=i.getCachedZSortedEles(),s=[],u=i.cy.zoom(),f=i.cy.hasCompoundNodes(),c=(n?24:8)/u,h=(n?8:2)/u,g=(n?8:2)/u,y=1/0,p,C;r&&(o=o.interactive);function E(D,_){if(D.isNode()){if(C)return;C=D,s.push(D)}if(D.isEdge()&&(_==null||_<y))if(p){if(p.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value&&p.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value){for(var k=0;k<s.length;k++)if(s[k].isEdge()){s[k]=D,p=D,y=_??y;break}}}else s.push(D),p=D,y=_??y}function v(D){var _=D.outerWidth()+2*h,k=D.outerHeight()+2*h,F=_/2,G=k/2,B=D.position(),q=D.pstyle("corner-radius").value==="auto"?"auto":D.pstyle("corner-radius").pfValue,R=D._private.rscratch;if(B.x-F<=t&&t<=B.x+F&&B.y-G<=e&&e<=B.y+G){var P=i.nodeShapes[a.getNodeShape(D)];if(P.checkPoint(t,e,0,_,k,B.x,B.y,q,R))return E(D,0),!0}}function x(D){var _=D._private,k=_.rscratch,F=D.pstyle("width").pfValue,G=D.pstyle("arrow-scale").value,B=F/2+c,q=B*B,R=B*2,z=_.source,ae=_.target,P;if(k.edgeType==="segments"||k.edgeType==="straight"||k.edgeType==="haystack"){for(var N=k.allpts,I=0;I+3<N.length;I+=2)if(Vz(t,e,N[I],N[I+1],N[I+2],N[I+3],R)&&q>(P=Kz(t,e,N[I],N[I+1],N[I+2],N[I+3])))return E(D,P),!0}else if(k.edgeType==="bezier"||k.edgeType==="multibezier"||k.edgeType==="self"||k.edgeType==="compound"){for(var N=k.allpts,I=0;I+5<k.allpts.length;I+=4)if(Wz(t,e,N[I],N[I+1],N[I+2],N[I+3],N[I+4],N[I+5],R)&&q>(P=Xz(t,e,N[I],N[I+1],N[I+2],N[I+3],N[I+4],N[I+5])))return E(D,P),!0}for(var z=z||_.source,ae=ae||_.target,re=a.getArrowWidth(F,G),K=[{name:"source",x:k.arrowStartX,y:k.arrowStartY,angle:k.srcArrowAngle},{name:"target",x:k.arrowEndX,y:k.arrowEndY,angle:k.tgtArrowAngle},{name:"mid-source",x:k.midX,y:k.midY,angle:k.midsrcArrowAngle},{name:"mid-target",x:k.midX,y:k.midY,angle:k.midtgtArrowAngle}],I=0;I<K.length;I++){var V=K[I],Z=i.arrowShapes[D.pstyle(V.name+"-arrow-shape").value],U=D.pstyle("width").pfValue;if(Z.roughCollide(t,e,re,V.angle,{x:V.x,y:V.y},U,c)&&Z.collide(t,e,re,V.angle,{x:V.x,y:V.y},U,c))return E(D),!0}f&&s.length>0&&(v(z),v(ae))}function w(D,_,k){return Mn(D,_,k)}function T(D,_){var k=D._private,F=g,G;_?G=_+"-":G="",D.boundingBox();var B=k.labelBounds[_||"main"],q=D.pstyle(G+"label").value,R=D.pstyle("text-events").strValue==="yes";if(!(!R||!q)){var P=w(k.rscratch,"labelX",_),N=w(k.rscratch,"labelY",_),I=w(k.rscratch,"labelAngle",_),z=D.pstyle(G+"text-margin-x").pfValue,ae=D.pstyle(G+"text-margin-y").pfValue,re=B.x1-F-z,K=B.x2+F-z,V=B.y1-F-ae,Z=B.y2+F-ae;if(I){var U=Math.cos(I),W=Math.sin(I),X=function(ne,le){return ne=ne-P,le=le-N,{x:ne*U-le*W+P,y:ne*W+le*U+N}},ee=X(re,V),oe=X(re,Z),te=X(K,V),ie=X(K,Z),se=[ee.x+z,ee.y+ae,te.x+z,te.y+ae,ie.x+z,ie.y+ae,oe.x+z,oe.y+ae];if(Rn(t,e,se))return E(D),!0}else if(Ts(B,t,e))return E(D),!0}}for(var A=o.length-1;A>=0;A--){var M=o[A];M.isNode()?v(M)||T(M):x(M)||T(M)||T(M,"source")||T(M,"target")}return s};To.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),o=2/i,s=[],u=Math.min(t,r),f=Math.max(t,r),c=Math.min(e,n),h=Math.max(e,n);t=u,r=f,e=c,n=h;var g=Nn({x1:t,y1:e,x2:r,y2:n});function y(q,R,P){return Mn(q,R,P)}function p(q,R){var P=q._private,N=o,I="";q.boundingBox();var z=P.labelBounds.main,ae=y(P.rscratch,"labelX",R),re=y(P.rscratch,"labelY",R),K=y(P.rscratch,"labelAngle",R),V=q.pstyle(I+"text-margin-x").pfValue,Z=q.pstyle(I+"text-margin-y").pfValue,U=z.x1-N-V,W=z.x2+N-V,X=z.y1-N-Z,ee=z.y2+N-Z;if(K){var oe=Math.cos(K),te=Math.sin(K),ie=function($,ne){return $=$-ae,ne=ne-re,{x:$*oe-ne*te+ae,y:$*te+ne*oe+re}};return[ie(U,X),ie(W,X),ie(W,ee),ie(U,ee)]}else return[{x:U,y:X},{x:W,y:X},{x:W,y:ee},{x:U,y:ee}]}for(var C=0;C<a.length;C++){var E=a[C];if(E.isNode()){var v=E,x=v.pstyle("text-events").strValue==="yes",w=v.pstyle("box-select-labels").strValue==="yes",T=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:w&&x});if(L1(g,T)){var A=p(v),M=[{x:g.x1,y:g.y1},{x:g.x2,y:g.y1},{x:g.x2,y:g.y2},{x:g.x1,y:g.y2}];eG(A,M)&&s.push(v)}}else{var D=E,_=D._private,k=_.rscratch;if(k.startX!=null&&k.startY!=null&&!Ts(g,k.startX,k.startY)||k.endX!=null&&k.endY!=null&&!Ts(g,k.endX,k.endY))continue;if(k.edgeType==="bezier"||k.edgeType==="multibezier"||k.edgeType==="self"||k.edgeType==="compound"||k.edgeType==="segments"||k.edgeType==="haystack"){for(var F=_.rstyle.bezierPts||_.rstyle.linePts||_.rstyle.haystackPts,G=!0,B=0;B<F.length;B++)if(!Hz(g,F[B])){G=!1;break}G&&s.push(D)}else(k.edgeType==="haystack"||k.edgeType==="straight")&&s.push(D)}}return s};var ac={};ac.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",u,f,c,h,g,y,v,x;if(r?(c=e.haystackPts[0],h=e.haystackPts[1],g=e.haystackPts[2],y=e.haystackPts[3]):(c=e.arrowStartX,h=e.arrowStartY,g=e.arrowEndX,y=e.arrowEndY),v=e.midX,x=e.midY,i)u=c-e.segpts[0],f=h-e.segpts[1];else if(a||o||s||n){var p=e.allpts,C=Vr(p[0],p[2],p[4],.1),E=Vr(p[1],p[3],p[5],.1);u=c-C,f=h-E}else u=c-v,f=h-x;e.srcArrowAngle=af(u,f);var v=e.midX,x=e.midY;if(r&&(v=(c+g)/2,x=(h+y)/2),u=g-c,f=y-h,i){var p=e.allpts;if(p.length/2%2===0){var w=p.length/2,T=w-2;u=p[w]-p[T],f=p[w+1]-p[T+1]}else if(e.isRound)u=e.midVector[1],f=-e.midVector[0];else{var w=p.length/2-1,T=w-2;u=p[w]-p[T],f=p[w+1]-p[T+1]}}else if(a||o||s){var p=e.allpts,A=e.ctrlpts,M,D,_,k;if(A.length/2%2===0){var F=p.length/2-1,G=F+2,B=G+2;M=Vr(p[F],p[G],p[B],0),D=Vr(p[F+1],p[G+1],p[B+1],0),_=Vr(p[F],p[G],p[B],1e-4),k=Vr(p[F+1],p[G+1],p[B+1],1e-4)}else{var G=p.length/2-1,F=G-2,B=G+2;M=Vr(p[F],p[G],p[B],.4999),D=Vr(p[F+1],p[G+1],p[B+1],.4999),_=Vr(p[F],p[G],p[B],.5),k=Vr(p[F+1],p[G+1],p[B+1],.5)}u=_-M,f=k-D}if(e.midtgtArrowAngle=af(u,f),e.midDispX=u,e.midDispY=f,u*=-1,f*=-1,i){var p=e.allpts;if(p.length/2%2!==0){if(!e.isRound){var w=p.length/2-1,q=w+2;u=-(p[q]-p[w]),f=-(p[q+1]-p[w+1])}}}if(e.midsrcArrowAngle=af(u,f),i)u=g-e.segpts[e.segpts.length-2],f=y-e.segpts[e.segpts.length-1];else if(a||o||s||n){var p=e.allpts,R=p.length,C=Vr(p[R-6],p[R-4],p[R-2],.9),E=Vr(p[R-5],p[R-3],p[R-1],.9);u=g-C,f=y-E}else u=g-v,f=y-x;e.tgtArrowAngle=af(u,f)};ac.getArrowWidth=ac.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var Vb,Wb,Ea={},Un={},jT,ZT,po,_f,Ua,ao,fo,ba,as,hf,Qk,Jk,$b,Yb,QT,JT=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},cU=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},dU=function(e,r,n,a,i){if(e!==QT?JT(r,e,Ea):cU(Un,Ea),JT(r,n,Un),jT=Ea.nx*Un.ny-Ea.ny*Un.nx,ZT=Ea.nx*Un.nx-Ea.ny*-Un.ny,Ua=Math.asin(Math.max(-1,Math.min(1,jT))),Math.abs(Ua)<1e-6){Vb=r.x,Wb=r.y,fo=as=0;return}po=1,_f=!1,ZT<0?Ua<0?Ua=Math.PI+Ua:(Ua=Math.PI-Ua,po=-1,_f=!0):Ua>0&&(po=-1,_f=!0),r.radius!==void 0?as=r.radius:as=a,ao=Ua/2,hf=Math.min(Ea.len/2,Un.len/2),i?(ba=Math.abs(Math.cos(ao)*as/Math.sin(ao)),ba>hf?(ba=hf,fo=Math.abs(ba*Math.sin(ao)/Math.cos(ao))):fo=as):(ba=Math.min(hf,as),fo=Math.abs(ba*Math.sin(ao)/Math.cos(ao))),$b=r.x+Un.nx*ba,Yb=r.y+Un.ny*ba,Vb=$b-Un.ny*fo*po,Wb=Yb+Un.nx*fo*po,Qk=r.x+Ea.nx*ba,Jk=r.y+Ea.ny*ba,QT=r};function eN(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function q1(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(dU(t,e,r,n,a),{cx:Vb,cy:Wb,radius:fo,startX:Qk,startY:Jk,stopX:$b,stopY:Yb,startAngle:Ea.ang+Math.PI/2*po,endAngle:Un.ang-Math.PI/2*po,counterClockwise:_f})}var tu=.01,hU=Math.sqrt(2*tu),pn={};pn.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,o=t.pstyle("source-endpoint"),s=t.pstyle("target-endpoint"),u=o.units!=null&&s.units!=null,f=function(A,M,D,_){var k=_-M,F=D-A,G=Math.sqrt(F*F+k*k);return{x:-k/G,y:F/G}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(u){var h=this.manualEndptToPx(t.source()[0],o),g=Fr(h,2),y=g[0],p=g[1],C=this.manualEndptToPx(t.target()[0],s),E=Fr(C,2),v=E[0],x=E[1],w={x1:y,y1:p,x2:v,y2:x};a=f(y,p,v,x),i=w}else Xt("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};pn.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,u=o.position(),f=s.position(),c=o.width(),h=s.width(),g=o.height(),y=s.height(),p=r.pstyle("haystack-radius").value,C=p/2;a.haystackPts=a.allpts=[a.source.x*c*C+u.x,a.source.y*g*C+u.y,a.target.x*h*C+f.x,a.target.y*y*C+f.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};pn.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),o=t.pstyle("radius-type"),s=Math.min(n.pfValue.length,a.pfValue.length),u=i.pfValue[i.pfValue.length-1],f=o.pfValue[o.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<s;c++){var h=n.pfValue[c],g=a.pfValue[c],y=1-h,p=h,C=this.findMidptPtsEtc(t,e),E=C.midptPts,v=C.vectorNormInverse,x={x:E.x1*y+E.x2*p,y:E.y1*y+E.y2*p};r.segpts.push(x.x+v.x*g,x.y+v.y*g),r.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:u),r.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:f)==="arc-radius")}};pn.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,f=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,h=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var g=r,y=h;n&&(g=0,y=u);var p=f-Math.PI/2,C=p-c/2,E=p+c/2,v=f+"_"+c;g=i[v]===void 0?i[v]=0:++i[v],a.ctrlpts=[o.x+Math.cos(C)*1.4*y*(g/3+1),o.y+Math.sin(C)*1.4*y*(g/3+1),o.x+Math.cos(E)*1.4*y*(g/3+1),o.y+Math.sin(E)*1.4*y*(g/3+1)]};pn.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,u=e.srcH,f=e.tgtW,c=e.tgtH,h=t.pstyle("control-point-step-size").pfValue,g=t.pstyle("control-point-distances"),y=g?g.pfValue[0]:void 0,p=r,C=h;n&&(p=0,C=y);var E=50,v={x:i.x-s/2,y:i.y-u/2},x={x:o.x-f/2,y:o.y-c/2},w={x:Math.min(v.x,x.x),y:Math.min(v.y,x.y)},T=.5,A=Math.max(T,Math.log(s*tu)),M=Math.max(T,Math.log(f*tu));a.ctrlpts=[w.x,w.y-(1+Math.pow(E,1.12)/100)*C*(p/3+1)*A,w.x-(1+Math.pow(E,1.12)/100)*C*(p/3+1)*M,w.y]};pn.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};pn.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,o=t.pstyle("control-point-step-size").pfValue,s=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),f=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,h=u.value[0],g=n;i.edgeType=g?"multibezier":"bezier",i.ctrlpts=[];for(var y=0;y<f;y++){var p=(.5-e.eles.length/2+r)*o*(a?-1:1),C=void 0,E=A1(p);g&&(c=s?s.pfValue[y]:o,h=u.value[y]),n?C=c:C=c!==void 0?E*c:void 0;var v=C!==void 0?C:p,x=1-h,w=h,T=this.findMidptPtsEtc(t,e),A=T.midptPts,M=T.vectorNormInverse,D={x:A.x1*x+A.x2*w,y:A.y1*x+A.y2*w};i.ctrlpts.push(D.x+M.x*v,D.y+M.y*v)}};pn.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",u="upward",f="auto",c=e.posPts,h=e.srcW,g=e.srcH,y=e.tgtW,p=e.tgtH,C=t.pstyle("edge-distances").value,E=C!=="node-position",v=t.pstyle("taxi-direction").value,x=v,w=t.pstyle("taxi-turn"),T=w.units==="%",A=w.pfValue,M=A<0,D=t.pstyle("taxi-turn-min-distance").pfValue,_=E?(h+y)/2:0,k=E?(g+p)/2:0,F=c.x2-c.x1,G=c.y2-c.y1,B=function(j,ve){return j>0?Math.max(j-ve,0):Math.min(j+ve,0)},q=B(F,_),R=B(G,k),P=!1;x===f?v=Math.abs(q)>Math.abs(R)?a:n:x===u||x===s?(v=n,P=!0):(x===i||x===o)&&(v=a,P=!0);var N=v===n,I=N?R:q,z=N?G:F,ae=A1(z),re=!1;!(P&&(T||M))&&(x===s&&z<0||x===u&&z>0||x===i&&z>0||x===o&&z<0)&&(ae*=-1,I=ae*Math.abs(I),re=!0);var K;if(T){var V=A<0?1+A:A;K=V*I}else{var Z=A<0?I:0;K=Z+A*ae}var U=function(j){return Math.abs(j)<D||Math.abs(j)>=Math.abs(I)},W=U(K),X=U(Math.abs(I)-Math.abs(K)),ee=W||X;if(ee&&!re)if(N){var oe=Math.abs(z)<=g/2,te=Math.abs(F)<=y/2;if(oe){var ie=(c.x1+c.x2)/2,se=c.y1,$=c.y2;r.segpts=[ie,se,ie,$]}else if(te){var ne=(c.y1+c.y2)/2,le=c.x1,Se=c.x2;r.segpts=[le,ne,Se,ne]}else r.segpts=[c.x1,c.y2]}else{var De=Math.abs(z)<=h/2,be=Math.abs(G)<=p/2;if(De){var Te=(c.y1+c.y2)/2,pe=c.x1,de=c.x2;r.segpts=[pe,Te,de,Te]}else if(be){var ye=(c.x1+c.x2)/2,Ee=c.y1,ue=c.y2;r.segpts=[ye,Ee,ye,ue]}else r.segpts=[c.x2,c.y1]}else if(N){var Ae=c.y1+K+(E?g/2*ae:0),Pe=c.x1,Fe=c.x2;r.segpts=[Pe,Ae,Fe,Ae]}else{var Ye=c.x1+K+(E?h/2*ae:0),Ve=c.y1,Qe=c.y2;r.segpts=[Ye,Ve,Ye,Qe]}if(r.isRound){var Xe=t.pstyle("taxi-radius").value,We=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Xe),r.isArcRadius=new Array(r.segpts.length/2).fill(We)}};pn.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,u=e.tgtH,f=e.srcShape,c=e.tgtShape,h=e.srcCornerRadius,g=e.tgtCornerRadius,y=e.srcRs,p=e.tgtRs,C=!it(r.startX)||!it(r.startY),E=!it(r.arrowStartX)||!it(r.arrowStartY),v=!it(r.endX)||!it(r.endY),x=!it(r.arrowEndX)||!it(r.arrowEndY),w=3,T=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,A=w*T,M=wo({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),D=M<A,_=wo({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),k=_<A,F=!1;if(C||E||D){F=!0;var G={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},B=Math.sqrt(G.x*G.x+G.y*G.y),q={x:G.x/B,y:G.y/B},R=Math.max(i,o),P={x:r.ctrlpts[0]+q.x*2*R,y:r.ctrlpts[1]+q.y*2*R},N=f.intersectLine(n.x,n.y,i,o,P.x,P.y,0,h,y);D?(r.ctrlpts[0]=r.ctrlpts[0]+q.x*(A-M),r.ctrlpts[1]=r.ctrlpts[1]+q.y*(A-M)):(r.ctrlpts[0]=N[0]+q.x*A,r.ctrlpts[1]=N[1]+q.y*A)}if(v||x||k){F=!0;var I={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},z=Math.sqrt(I.x*I.x+I.y*I.y),ae={x:I.x/z,y:I.y/z},re=Math.max(i,o),K={x:r.ctrlpts[0]+ae.x*2*re,y:r.ctrlpts[1]+ae.y*2*re},V=c.intersectLine(a.x,a.y,s,u,K.x,K.y,0,g,p);k?(r.ctrlpts[0]=r.ctrlpts[0]+ae.x*(A-_),r.ctrlpts[1]=r.ctrlpts[1]+ae.y*(A-_)):(r.ctrlpts[0]=V[0]+ae.x*A,r.ctrlpts[1]=V[1]+ae.y*A)}F&&this.findEndpoints(t)}};pn.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=Vr(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=Vr(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],s=e.isArcRadius[i/2-1];e.roundCorners.push(q1({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,f=u-2;e.midX=(e.segpts[f]+e.segpts[u])/2,e.midY=(e.segpts[f+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var h={x:e.segpts[c],y:e.segpts[c+1]},g=e.roundCorners[c/2];if(g.radius===0){var y={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=h.x,e.midY=h.y,e.midVector=[h.y-y.y,y.x-h.x]}else{var p=[h.x-g.cx,h.y-g.cy],C=g.radius/Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2));p=p.map(function(E){return E*C}),e.midX=g.cx+p[0],e.midY=g.cy+p[1],e.midVector=p}}}}};pn.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||it(e.startX)&&it(e.startY)&&it(e.endX)&&it(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Xt("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};pn.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i=new Xa,o=function(k,F){return[].concat(Xf(k),[F?1:0]).join("-")},s=[],u=[],f=0;f<t.length;f++){var c=t[f],h=c._private,g=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(g==="haystack"){u.push(c);continue}var y=g==="unbundled-bezier"||g.endsWith("segments")||g==="straight"||g==="straight-triangle"||g.endsWith("taxi"),p=g==="unbundled-bezier"||g==="bezier",C=h.source,E=h.target,v=C.poolIndex(),x=E.poolIndex(),w=[v,x].sort(),T=o(w,y),A=i.get(T);A==null&&(A={eles:[]},s.push({pairId:w,edgeIsUnbundled:y}),i.set(T,A)),A.eles.push(c),y&&(A.hasUnbundled=!0),p&&(A.hasBezier=!0)}}for(var M=function(){var k=s[D],F=k.pairId,G=k.edgeIsUnbundled,B=o(F,G),q=i.get(B),R;if(!q.hasUnbundled){var P=q.eles[0].parallelEdges().filter(function(We){return We.isBundledBezier()});T1(q.eles),P.forEach(function(We){return q.eles.push(We)}),q.eles.sort(function(We,he){return We.poolIndex()-he.poolIndex()})}var N=q.eles[0],I=N.source(),z=N.target();if(I.poolIndex()>z.poolIndex()){var ae=I;I=z,z=ae}var re=q.srcPos=I.position(),K=q.tgtPos=z.position(),V=q.srcW=I.outerWidth(),Z=q.srcH=I.outerHeight(),U=q.tgtW=z.outerWidth(),W=q.tgtH=z.outerHeight(),X=q.srcShape=r.nodeShapes[e.getNodeShape(I)],ee=q.tgtShape=r.nodeShapes[e.getNodeShape(z)],oe=q.srcCornerRadius=I.pstyle("corner-radius").value==="auto"?"auto":I.pstyle("corner-radius").pfValue,te=q.tgtCornerRadius=z.pstyle("corner-radius").value==="auto"?"auto":z.pstyle("corner-radius").pfValue,ie=q.tgtRs=z._private.rscratch,se=q.srcRs=I._private.rscratch;q.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var $=0;$<q.eles.length;$++){var ne=q.eles[$],le=ne[0]._private.rscratch,Se=ne.pstyle("curve-style").value,De=Se==="unbundled-bezier"||Se.endsWith("segments")||Se.endsWith("taxi"),be=!I.same(ne.source());if(!q.calculatedIntersection&&I!==z&&(q.hasBezier||q.hasUnbundled)){q.calculatedIntersection=!0;var Te=X.intersectLine(re.x,re.y,V,Z,K.x,K.y,0,oe,se),pe=q.srcIntn=Te,de=ee.intersectLine(K.x,K.y,U,W,re.x,re.y,0,te,ie),ye=q.tgtIntn=de,Ee=q.intersectionPts={x1:Te[0],x2:de[0],y1:Te[1],y2:de[1]},ue=q.posPts={x1:re.x,x2:K.x,y1:re.y,y2:K.y},Ae=de[1]-Te[1],Pe=de[0]-Te[0],Fe=Math.sqrt(Pe*Pe+Ae*Ae);it(Fe)&&Fe>=hU||(Fe=Math.sqrt(Math.max(Pe*Pe,tu)+Math.max(Ae*Ae,tu)));var Ye=q.vector={x:Pe,y:Ae},Ve=q.vectorNorm={x:Ye.x/Fe,y:Ye.y/Fe},Qe={x:-Ve.y,y:Ve.x};q.nodesOverlap=!it(Fe)||ee.checkPoint(Te[0],Te[1],0,U,W,K.x,K.y,te,ie)||X.checkPoint(de[0],de[1],0,V,Z,re.x,re.y,oe,se),q.vectorNormInverse=Qe,R={nodesOverlap:q.nodesOverlap,dirCounts:q.dirCounts,calculatedIntersection:!0,hasBezier:q.hasBezier,hasUnbundled:q.hasUnbundled,eles:q.eles,srcPos:K,srcRs:ie,tgtPos:re,tgtRs:se,srcW:U,srcH:W,tgtW:V,tgtH:Z,srcIntn:ye,tgtIntn:pe,srcShape:ee,tgtShape:X,posPts:{x1:ue.x2,y1:ue.y2,x2:ue.x1,y2:ue.y1},intersectionPts:{x1:Ee.x2,y1:Ee.y2,x2:Ee.x1,y2:Ee.y1},vector:{x:-Ye.x,y:-Ye.y},vectorNorm:{x:-Ve.x,y:-Ve.y},vectorNormInverse:{x:-Qe.x,y:-Qe.y}}}var Xe=be?R:q;le.nodesOverlap=Xe.nodesOverlap,le.srcIntn=Xe.srcIntn,le.tgtIntn=Xe.tgtIntn,le.isRound=Se.startsWith("round"),a&&(I.isParent()||I.isChild()||z.isParent()||z.isChild())&&(I.parents().anySame(z)||z.parents().anySame(I)||I.same(z)&&I.isParent())?e.findCompoundLoopPoints(ne,Xe,$,De):I===z?e.findLoopPoints(ne,Xe,$,De):Se.endsWith("segments")?e.findSegmentsPoints(ne,Xe):Se.endsWith("taxi")?e.findTaxiPoints(ne,Xe):Se==="straight"||!De&&q.eles.length%2===1&&$===Math.floor(q.eles.length/2)?e.findStraightEdgePoints(ne):e.findBezierPoints(ne,Xe,$,De,be),e.findEndpoints(ne),e.tryToCorrectInvalidPoints(ne,Xe),e.checkForInvalidEdgeWarning(ne),e.storeAllpts(ne),e.storeEdgeProjections(ne),e.calculateArrowAngles(ne),e.recalculateEdgeLabelProjections(ne),e.calculateLabelAngles(ne)}},D=0;D<s.length;D++)M();this.findHaystackPoints(u)}};function tN(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}pn.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return tN(e.segpts)};pn.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return tN(e.ctrlpts)};pn.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var vu={};vu.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),o=t._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*a),e.units[1]==="%"&&(s[1]=s[1]*i),s[0]+=n.x,s[1]+=n.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var f=2*Math.max(a,i),c=[n.x+Math.cos(u)*f,n.y+Math.sin(u)*f];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,o)}};vu.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],i=n.position(),o=a.position(),s=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,f=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,h=n._private.rscratch,g=a._private.rscratch,y=t.pstyle("curve-style").value,p=t._private.rscratch,C=p.edgeType,E=y==="taxi",v=C==="self"||C==="compound",x=C==="bezier"||C==="multibezier"||v,w=C!=="bezier",T=C==="straight"||C==="segments",A=C==="segments",M=x||w||T,D=v||E,_=t.pstyle("source-endpoint"),k=D?"outside-to-node":_.value,F=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,G=t.pstyle("target-endpoint"),B=D?"outside-to-node":G.value,q=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;p.srcManEndpt=_,p.tgtManEndpt=G;var R,P,N,I;if(x){var z=[p.ctrlpts[0],p.ctrlpts[1]],ae=w?[p.ctrlpts[p.ctrlpts.length-2],p.ctrlpts[p.ctrlpts.length-1]]:z;R=ae,P=z}else if(T){var re=A?p.segpts.slice(0,2):[o.x,o.y],K=A?p.segpts.slice(p.segpts.length-2):[i.x,i.y];R=K,P=re}if(B==="inside-to-node")r=[o.x,o.y];else if(G.units)r=this.manualEndptToPx(a,G);else if(B==="outside-to-line")r=p.tgtIntn;else if(B==="outside-to-node"||B==="outside-to-node-or-label"?N=R:(B==="outside-to-line"||B==="outside-to-line-or-label")&&(N=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),N[0],N[1],0,q,g),B==="outside-to-node-or-label"||B==="outside-to-line-or-label"){var V=a._private.rscratch,Z=V.labelWidth,U=V.labelHeight,W=V.labelX,X=V.labelY,ee=Z/2,oe=U/2,te=a.pstyle("text-valign").value;te==="top"?X-=oe:te==="bottom"&&(X+=oe);var ie=a.pstyle("text-halign").value;ie==="left"?W-=ee:ie==="right"&&(W+=ee);var se=jl(N[0],N[1],[W-ee,X-oe,W+ee,X-oe,W+ee,X+oe,W-ee,X+oe],o.x,o.y);if(se.length>0){var $=i,ne=lo($,fs(r)),le=lo($,fs(se)),Se=ne;if(le<ne&&(r=se,Se=le),se.length>2){var De=lo($,{x:se[2],y:se[3]});De<Se&&(r=[se[2],se[3]])}}}var be=of(r,R,e.arrowShapes[s].spacing(t)+f),Te=of(r,R,e.arrowShapes[s].gap(t)+f);if(p.endX=Te[0],p.endY=Te[1],p.arrowEndX=be[0],p.arrowEndY=be[1],k==="inside-to-node")r=[i.x,i.y];else if(_.units)r=this.manualEndptToPx(n,_);else if(k==="outside-to-line")r=p.srcIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?I=P:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(I=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),I[0],I[1],0,F,h),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var pe=n._private.rscratch,de=pe.labelWidth,ye=pe.labelHeight,Ee=pe.labelX,ue=pe.labelY,Ae=de/2,Pe=ye/2,Fe=n.pstyle("text-valign").value;Fe==="top"?ue-=Pe:Fe==="bottom"&&(ue+=Pe);var Ye=n.pstyle("text-halign").value;Ye==="left"?Ee-=Ae:Ye==="right"&&(Ee+=Ae);var Ve=jl(I[0],I[1],[Ee-Ae,ue-Pe,Ee+Ae,ue-Pe,Ee+Ae,ue+Pe,Ee-Ae,ue+Pe],i.x,i.y);if(Ve.length>0){var Qe=o,Xe=lo(Qe,fs(r)),We=lo(Qe,fs(Ve)),he=Xe;if(We<Xe&&(r=[Ve[0],Ve[1]],he=We),Ve.length>2){var j=lo(Qe,{x:Ve[2],y:Ve[3]});j<he&&(r=[Ve[2],Ve[3]])}}}var ve=of(r,P,e.arrowShapes[u].spacing(t)+c),me=of(r,P,e.arrowShapes[u].gap(t)+c);p.startX=me[0],p.startY=me[1],p.arrowStartX=ve[0],p.arrowStartY=ve[1],M&&(!it(p.startX)||!it(p.startY)||!it(p.endX)||!it(p.endY)?p.badLine=!0:p.badLine=!1)};vu.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};vu.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var z1={};function vU(t,e,r){for(var n=function(f,c,h,g){return Vr(f,c,h,g)},a=e._private,i=a.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}z1.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)vU(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var o=r.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};z1.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Ma={};Ma.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!_i(e)){var r,n,a=t._private,i=t.width(),o=t.height(),s=t.padding(),u=t.position(),f=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,h=a.rscratch,g=a.rstyle;switch(f){case"left":r=u.x-i/2-s;break;case"right":r=u.x+i/2+s;break;default:r=u.x}switch(c){case"top":n=u.y-o/2-s;break;case"bottom":n=u.y+o/2+s;break;default:n=u.y}h.labelX=r,h.labelY=n,g.labelX=r,g.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var rN=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},nN=function(e,r){var n=r.x-e.x,a=r.y-e.y;return rN(n,a)},pU=function(e,r,n,a){var i=Kl(0,a-.001,1),o=Kl(0,a+.001,1),s=bs(e,r,n,i),u=bs(e,r,n,o);return nN(s,u)};Ma.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var o=function(h,g,y){Wa(r.rscratch,h,g,y),Wa(r.rstyle,h,g,y)};o("labelX",null,e.x),o("labelY",null,e.y);var s=rN(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var h=[],g=0;g+5<n.allpts.length;g+=4){var y={x:n.allpts[g],y:n.allpts[g+1]},p={x:n.allpts[g+2],y:n.allpts[g+3]},C={x:n.allpts[g+4],y:n.allpts[g+5]};h.push({p0:y,p1:p,p2:C,startDist:0,length:0,segments:[]})}var E=r.rstyle.bezierPts,v=a.bezierProjPcts.length;function x(D,_,k,F,G){var B=wo(_,k),q=D.segments[D.segments.length-1],R={p0:_,p1:k,t0:F,t1:G,startDist:q?q.startDist+q.length:0,length:B};D.segments.push(R),D.length+=B}for(var w=0;w<h.length;w++){var T=h[w],A=h[w-1];A&&(T.startDist=A.startDist+A.length),x(T,T.p0,E[w*v],0,a.bezierProjPcts[0]);for(var M=0;M<v-1;M++)x(T,E[w*v+M],E[w*v+M+1],a.bezierProjPcts[M],a.bezierProjPcts[M+1]);x(T,E[w*v+v-1],T.p2,a.bezierProjPcts[v-1],1)}return u.cache=h},f=function(h){var g,y=h==="source";if(i[h]){var p=t.pstyle(h+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var C=u(),E,v=0,x=0,w=0;w<C.length;w++){for(var T=C[y?w:C.length-1-w],A=0;A<T.segments.length;A++){var M=T.segments[y?A:T.segments.length-1-A],D=w===C.length-1&&A===T.segments.length-1;if(v=x,x+=M.length,x>=p||D){E={cp:T,segment:M};break}}if(E)break}var _=E.cp,k=E.segment,F=(p-v)/k.length,G=k.t1-k.t0,B=y?k.t0+G*F:k.t1-G*F;B=Kl(0,B,1),e=bs(_.p0,_.p1,_.p2,B),g=pU(_.p0,_.p1,_.p2,B);break}case"straight":case"segments":case"haystack":{for(var q=0,R,P,N,I,z=n.allpts.length,ae=0;ae+3<z&&(y?(N={x:n.allpts[ae],y:n.allpts[ae+1]},I={x:n.allpts[ae+2],y:n.allpts[ae+3]}):(N={x:n.allpts[z-2-ae],y:n.allpts[z-1-ae]},I={x:n.allpts[z-4-ae],y:n.allpts[z-3-ae]}),R=wo(N,I),P=q,q+=R,!(q>=p));ae+=2);var re=p-P,K=re/R;K=Kl(0,K,1),e=Fz(N,I,K),g=nN(N,I);break}}o("labelX",h,e.x),o("labelY",h,e.y),o("labelAutoAngle",h,g)}};f("source"),f("target"),this.applyLabelDimensions(t)}};Ma.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};Ma.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=bo(n,t._private.labelDimsKey);if(Mn(r.rscratch,"prefixedLabelDimsKey",e)!==a){Wa(r.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(t,n),o=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,u=Mn(r.rscratch,"labelWrapCachedLines",e)||[],f=s!=="wrap"?1:Math.max(u.length,1),c=i.height/f,h=c*o,g=i.width,y=i.height+(f-1)*(o-1)*c;Wa(r.rstyle,"labelWidth",e,g),Wa(r.rscratch,"labelWidth",e,g),Wa(r.rstyle,"labelHeight",e,y),Wa(r.rscratch,"labelHeight",e,y),Wa(r.rscratch,"labelLineHeight",e,h)}};Ma.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,o=function(Z,U){return U?(Wa(r.rscratch,Z,e,U),U):Mn(r.rscratch,Z,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var f="​",c=a.split(`
`),h=t.pstyle("text-max-width").pfValue,g=t.pstyle("text-overflow-wrap").value,y=g==="anywhere",p=[],C=/[\s\u200b]+|$/g,E=0;E<c.length;E++){var v=c[E],x=this.calculateLabelDimensions(t,v),w=x.width;if(y){var T=v.split("").join(f);v=T}if(w>h){var A=v.matchAll(C),M="",D=0,_=Pn(A),k;try{for(_.s();!(k=_.n()).done;){var F=k.value,G=F[0],B=v.substring(D,F.index);D=F.index+G.length;var q=M.length===0?B:M+B+G,R=this.calculateLabelDimensions(t,q),P=R.width;P<=h?M+=B+G:(M&&p.push(M),M=B+G)}}catch(V){_.e(V)}finally{_.f()}M.match(/^[\s\u200b]+$/)||p.push(M)}else p.push(v)}o("labelWrapCachedLines",p),a=o("labelWrapCachedText",p.join(`
`)),o("labelWrapKey",u)}else if(s==="ellipsis"){var N=t.pstyle("text-max-width").pfValue,I="",z="…",ae=!1;if(this.calculateLabelDimensions(t,a).width<N)return a;for(var re=0;re<a.length;re++){var K=this.calculateLabelDimensions(t,I+a[re]+z).width;if(K>N)break;I+=a[re],re===a.length-1&&(ae=!0)}return ae||(I+=z),I}return a};Ma.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Ma.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=0,o=t.pstyle("font-style").strValue,s=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,f=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=a.createElement("canvas"),h=this.labelCalcCanvasContext=c.getContext("2d");var g=c.style;g.position="absolute",g.left="-9999px",g.top="-9999px",g.zIndex="-1",g.visibility="hidden",g.pointerEvents="none"}h.font="".concat(o," ").concat(f," ").concat(s,"px ").concat(u);for(var y=0,p=0,C=e.split(`
`),E=0;E<C.length;E++){var v=C[E],x=h.measureText(v),w=Math.ceil(x.width),T=s;y=Math.max(w,y),p+=T}return y+=i,p+=i,{width:y,height:p}};Ma.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};Ma.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var aN={},eS=28,tS=!1;aN.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<eS||t.height()<eS))return tS||(Xt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),tS=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var zc={};zc.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var u=0;u<o.length;u++){var f=o[u],c=f._private,h=c.rstyle;h.clean=!1,h.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var a=function(o){if(o){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var f=e[u],c=f._private.rstyle;f.isNode()&&!c.cleanConnected&&(n(f.connectedEdges()),c.cleanConnected=!0)}if(s)for(var h=0;h<s.length;h++){var g=s[h];g(o,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};zc.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};zc.recalculateRenderedStyle=function(t,e){var r=function(T){return T._private.rstyle.cleanConnected};if(t.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],s=o._private,u=s.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(u.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(w){return!w._private.rstyle.clean&&w.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(o):n.push(o),u.clean=!0)}for(var f=0;f<a.length;f++){var c=a[f],h=c._private,g=h.rstyle,y=c.position();this.recalculateNodeLabelProjection(c),g.nodeX=y.x,g.nodeY=y.y,g.nodeW=c.pstyle("width").pfValue,g.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var p=0;p<n.length;p++){var C=n[p],E=C._private,v=E.rstyle,x=E.rscratch;v.srcX=x.arrowStartX,v.srcY=x.arrowStartY,v.tgtX=x.arrowEndX,v.tgtY=x.arrowEndY,v.midX=x.midX,v.midY=x.midY,v.labelAngle=x.labelAngle,v.sourceLabelAngle=x.sourceLabelAngle,v.targetLabelAngle=x.targetLabelAngle}}}};var Gc={};Gc.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Gc.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Gc.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(qk),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var iN={};[To,ac,pn,vu,z1,Ma,aN,zc,Gc].forEach(function(t){Et(iN,t)});var oN={};oN.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var o=i.image=new Image;o.addEventListener("load",r),o.addEventListener("error",function(){o.error=!0});var s="data:",u=t.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,o.crossOrigin=e),o.src=t,o};var Rs={};Rs.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],o=0;o<t.length;o++){var s=t[o];if(s!==void 0){var u=this.binder(s);i.push(u.on.apply(u,a))}}return i}var u=this.binder(t);return u.on.apply(u,a)};Rs.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||Mq(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var o=function(u,f,c){var h=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(h[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:h}),(t.addEventListener||t.on).apply(t,h),this};return{on:o,addEventListener:o,addListener:o,bind:o}};Rs.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};Rs.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};Rs.load=function(){var t=this,e=t.cy.window(),r=function(j){return j.selected()},n=function(j){var ve=j.getRootNode();if(ve&&ve.nodeType===11&&ve.host!==void 0)return ve},a=function(j,ve,me,we){j==null&&(j=t.cy);for(var xe=0;xe<ve.length;xe++){var qe=ve[xe];j.emit({originalEvent:me,type:qe,position:we})}},i=function(j){return j.shiftKey||j.metaKey||j.ctrlKey},o=function(j,ve){var me=!0;if(t.cy.hasCompoundNodes()&&j&&j.pannable())for(var we=0;ve&&we<ve.length;we++){var j=ve[we];if(j.isNode()&&j.isParent()&&!j.pannable()){me=!1;break}}else me=!0;return me},s=function(j){j[0]._private.grabbed=!0},u=function(j){j[0]._private.grabbed=!1},f=function(j){j[0]._private.rscratch.inDragLayer=!0},c=function(j){j[0]._private.rscratch.inDragLayer=!1},h=function(j){j[0]._private.rscratch.isGrabTarget=!0},g=function(j){j[0]._private.rscratch.isGrabTarget=!1},y=function(j,ve){var me=ve.addToList,we=me.has(j);!we&&j.grabbable()&&!j.locked()&&(me.merge(j),s(j))},p=function(j,ve){if(j.cy().hasCompoundNodes()&&!(ve.inDragLayer==null&&ve.addToList==null)){var me=j.descendants();ve.inDragLayer&&(me.forEach(f),me.connectedEdges().forEach(f)),ve.addToList&&y(me,ve)}},C=function(j,ve){ve=ve||{};var me=j.cy().hasCompoundNodes();ve.inDragLayer&&(j.forEach(f),j.neighborhood().stdFilter(function(we){return!me||we.isEdge()}).forEach(f)),ve.addToList&&j.forEach(function(we){y(we,ve)}),p(j,ve),x(j,{inDragLayer:ve.inDragLayer}),t.updateCachedGrabbedEles()},E=C,v=function(j){j&&(t.getCachedZSortedEles().forEach(function(ve){u(ve),c(ve),g(ve)}),t.updateCachedGrabbedEles())},x=function(j,ve){if(!(ve.inDragLayer==null&&ve.addToList==null)&&j.cy().hasCompoundNodes()){var me=j.ancestors().orphans();if(!me.same(j)){var we=me.descendants().spawnSelf().merge(me).unmerge(j).unmerge(j.descendants()),xe=we.connectedEdges();ve.inDragLayer&&(xe.forEach(f),we.forEach(f)),ve.addToList&&we.forEach(function(qe){y(qe,ve)})}}},w=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},T=typeof MutationObserver<"u",A=typeof ResizeObserver<"u";T?(t.removeObserver=new MutationObserver(function(he){for(var j=0;j<he.length;j++){var ve=he[j],me=ve.removedNodes;if(me)for(var we=0;we<me.length;we++){var xe=me[we];if(xe===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(he){t.destroy()});var M=fu(function(){t.cy.resize()},100);T&&(t.styleObserver=new MutationObserver(M),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",M),A&&(t.resizeObserver=new ResizeObserver(M),t.resizeObserver.observe(t.container));var D=function(j,ve){for(;j!=null;)ve(j),j=j.parentNode},_=function(){t.invalidateContainerClientCoordsCache()};D(t.container,function(he){t.registerBinding(he,"transitionend",_),t.registerBinding(he,"animationend",_),t.registerBinding(he,"scroll",_)}),t.registerBinding(t.container,"contextmenu",function(he){he.preventDefault()});var k=function(){return t.selection[4]!==0},F=function(j){for(var ve=t.findContainerClientCoords(),me=ve[0],we=ve[1],xe=ve[2],qe=ve[3],Ce=j.touches?j.touches:[j],Oe=!1,Ie=0;Ie<Ce.length;Ie++){var He=Ce[Ie];if(me<=He.clientX&&He.clientX<=me+xe&&we<=He.clientY&&He.clientY<=we+qe){Oe=!0;break}}if(!Oe)return!1;for(var Ue=t.container,je=j.target,et=je.parentNode,Ge=!1;et;){if(et===Ue){Ge=!0;break}et=et.parentNode}return!!Ge};t.registerBinding(t.container,"mousedown",function(j){if(F(j)&&!(t.hoverData.which===1&&j.which!==1)){j.preventDefault(),w(),t.hoverData.capture=!0,t.hoverData.which=j.which;var ve=t.cy,me=[j.clientX,j.clientY],we=t.projectIntoViewport(me[0],me[1]),xe=t.selection,qe=t.findNearestElements(we[0],we[1],!0,!1),Ce=qe[0],Oe=t.dragData.possibleDragElements;t.hoverData.mdownPos=we,t.hoverData.mdownGPos=me;var Ie=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var $e=t.hoverData.down;$e?$e.emit({originalEvent:j,type:"taphold",position:{x:we[0],y:we[1]}}):ve.emit({originalEvent:j,type:"taphold",position:{x:we[0],y:we[1]}})}},t.tapholdDuration)};if(j.which==3){t.hoverData.cxtStarted=!0;var He={originalEvent:j,type:"cxttapstart",position:{x:we[0],y:we[1]}};Ce?(Ce.activate(),Ce.emit(He),t.hoverData.down=Ce):ve.emit(He),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(j.which==1){Ce&&Ce.activate();{if(Ce!=null&&t.nodeIsGrabbable(Ce)){var Ue=function($e){return{originalEvent:j,type:$e,position:{x:we[0],y:we[1]}}},je=function($e){$e.emit(Ue("grab"))};if(h(Ce),!Ce.selected())Oe=t.dragData.possibleDragElements=ve.collection(),E(Ce,{addToList:Oe}),Ce.emit(Ue("grabon")).emit(Ue("grab"));else{Oe=t.dragData.possibleDragElements=ve.collection();var et=ve.$(function(Ge){return Ge.isNode()&&Ge.selected()&&t.nodeIsGrabbable(Ge)});C(et,{addToList:Oe}),Ce.emit(Ue("grabon")),et.forEach(je)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=Ce,t.hoverData.downs=qe,t.hoverData.downTime=new Date().getTime()}a(Ce,["mousedown","tapstart","vmousedown"],j,{x:we[0],y:we[1]}),Ce==null?(xe[4]=1,t.data.bgActivePosistion={x:we[0],y:we[1]},t.redrawHint("select",!0),t.redraw()):Ce.pannable()&&(xe[4]=1),Ie()}xe[0]=xe[2]=we[0],xe[1]=xe[3]=we[1]}},!1);var G=n(t.container);t.registerBinding([e,G],"mousemove",function(j){var ve=t.hoverData.capture;if(!(!ve&&!F(j))){var me=!1,we=t.cy,xe=we.zoom(),qe=[j.clientX,j.clientY],Ce=t.projectIntoViewport(qe[0],qe[1]),Oe=t.hoverData.mdownPos,Ie=t.hoverData.mdownGPos,He=t.selection,Ue=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(Ue=t.findNearestElement(Ce[0],Ce[1],!0,!1));var je=t.hoverData.last,et=t.hoverData.down,Ge=[Ce[0]-He[2],Ce[1]-He[3]],$e=t.dragData.possibleDragElements,vt;if(Ie){var nt=qe[0]-Ie[0],st=nt*nt,Tt=qe[1]-Ie[1],dt=Tt*Tt,gt=st+dt;t.hoverData.isOverThresholdDrag=vt=gt>=t.desktopTapThreshold2}var _t=i(j);vt&&(t.hoverData.tapholdCancelled=!0);var Mt=function(){var nr=t.hoverData.dragDelta=t.hoverData.dragDelta||[];nr.length===0?(nr.push(Ge[0]),nr.push(Ge[1])):(nr[0]+=Ge[0],nr[1]+=Ge[1])};me=!0,a(Ue,["mousemove","vmousemove","tapdrag"],j,{x:Ce[0],y:Ce[1]});var Zt=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||we.emit({originalEvent:j,type:"boxstart",position:{x:Ce[0],y:Ce[1]}}),He[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(vt){var Lt={originalEvent:j,type:"cxtdrag",position:{x:Ce[0],y:Ce[1]}};et?et.emit(Lt):we.emit(Lt),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||Ue!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:j,type:"cxtdragout",position:{x:Ce[0],y:Ce[1]}}),t.hoverData.cxtOver=Ue,Ue&&Ue.emit({originalEvent:j,type:"cxtdragover",position:{x:Ce[0],y:Ce[1]}}))}}else if(t.hoverData.dragging){if(me=!0,we.panningEnabled()&&we.userPanningEnabled()){var Ht;if(t.hoverData.justStartedPan){var Sr=t.hoverData.mdownPos;Ht={x:(Ce[0]-Sr[0])*xe,y:(Ce[1]-Sr[1])*xe},t.hoverData.justStartedPan=!1}else Ht={x:Ge[0]*xe,y:Ge[1]*xe};we.panBy(Ht),we.emit("dragpan"),t.hoverData.dragged=!0}Ce=t.projectIntoViewport(j.clientX,j.clientY)}else if(He[4]==1&&(et==null||et.pannable())){if(vt){if(!t.hoverData.dragging&&we.boxSelectionEnabled()&&(_t||!we.panningEnabled()||!we.userPanningEnabled()))Zt();else if(!t.hoverData.selecting&&we.panningEnabled()&&we.userPanningEnabled()){var on=o(et,t.hoverData.downs);on&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,He[4]=0,t.data.bgActivePosistion=fs(Oe),t.redrawHint("select",!0),t.redraw())}et&&et.pannable()&&et.active()&&et.unactivate()}}else{if(et&&et.pannable()&&et.active()&&et.unactivate(),(!et||!et.grabbed())&&Ue!=je&&(je&&a(je,["mouseout","tapdragout"],j,{x:Ce[0],y:Ce[1]}),Ue&&a(Ue,["mouseover","tapdragover"],j,{x:Ce[0],y:Ce[1]}),t.hoverData.last=Ue),et)if(vt){if(we.boxSelectionEnabled()&&_t)et&&et.grabbed()&&(v($e),et.emit("freeon"),$e.emit("free"),t.dragData.didDrag&&(et.emit("dragfreeon"),$e.emit("dragfree"))),Zt();else if(et&&et.grabbed()&&t.nodeIsDraggable(et)){var Rt=!t.dragData.didDrag;Rt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||C($e,{inDragLayer:!0});var rr={x:0,y:0};if(it(Ge[0])&&it(Ge[1])&&(rr.x+=Ge[0],rr.y+=Ge[1],Rt)){var Qt=t.hoverData.dragDelta;Qt&&it(Qt[0])&&it(Qt[1])&&(rr.x+=Qt[0],rr.y+=Qt[1])}t.hoverData.draggingEles=!0,$e.silentShift(rr).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else Mt();me=!0}if(He[2]=Ce[0],He[3]=Ce[1],me)return j.stopPropagation&&j.stopPropagation(),j.preventDefault&&j.preventDefault(),!1}},!1);var B,q,R;t.registerBinding(e,"mouseup",function(j){if(!(t.hoverData.which===1&&j.which!==1&&t.hoverData.capture)){var ve=t.hoverData.capture;if(ve){t.hoverData.capture=!1;var me=t.cy,we=t.projectIntoViewport(j.clientX,j.clientY),xe=t.selection,qe=t.findNearestElement(we[0],we[1],!0,!1),Ce=t.dragData.possibleDragElements,Oe=t.hoverData.down,Ie=i(j);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,Oe&&Oe.unactivate(),t.hoverData.which===3){var He={originalEvent:j,type:"cxttapend",position:{x:we[0],y:we[1]}};if(Oe?Oe.emit(He):me.emit(He),!t.hoverData.cxtDragged){var Ue={originalEvent:j,type:"cxttap",position:{x:we[0],y:we[1]}};Oe?Oe.emit(Ue):me.emit(Ue)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(a(qe,["mouseup","tapend","vmouseup"],j,{x:we[0],y:we[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(a(Oe,["click","tap","vclick"],j,{x:we[0],y:we[1]}),q=!1,j.timeStamp-R<=me.multiClickDebounceTime()?(B&&clearTimeout(B),q=!0,R=null,a(Oe,["dblclick","dbltap","vdblclick"],j,{x:we[0],y:we[1]})):(B=setTimeout(function(){q||a(Oe,["oneclick","onetap","voneclick"],j,{x:we[0],y:we[1]})},me.multiClickDebounceTime()),R=j.timeStamp)),Oe==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(j)&&(me.$(r).unselect(["tapunselect"]),Ce.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=Ce=me.collection()),qe==Oe&&!t.dragData.didDrag&&!t.hoverData.selecting&&qe!=null&&qe._private.selectable&&(t.hoverData.dragging||(me.selectionType()==="additive"||Ie?qe.selected()?qe.unselect(["tapunselect"]):qe.select(["tapselect"]):Ie||(me.$(r).unmerge(qe).unselect(["tapunselect"]),qe.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var je=me.collection(t.getAllInBox(xe[0],xe[1],xe[2],xe[3]));t.redrawHint("select",!0),je.length>0&&t.redrawHint("eles",!0),me.emit({type:"boxend",originalEvent:j,position:{x:we[0],y:we[1]}});var et=function(vt){return vt.selectable()&&!vt.selected()};me.selectionType()==="additive"||Ie||me.$(r).unmerge(je).unselect(),je.emit("box").stdFilter(et).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!xe[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Ge=Oe&&Oe.grabbed();v(Ce),Ge&&(Oe.emit("freeon"),Ce.emit("free"),t.dragData.didDrag&&(Oe.emit("dragfreeon"),Ce.emit("dragfree")))}}xe[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var P=[],N=4,I,z=1e5,ae=function(j,ve){for(var me=0;me<j.length;me++)if(j[me]%ve!==0)return!1;return!0},re=function(j){for(var ve=Math.abs(j[0]),me=1;me<j.length;me++)if(Math.abs(j[me])!==ve)return!1;return!0},K=function(j){var ve=!1,me=j.deltaY;if(me==null&&(j.wheelDeltaY!=null?me=j.wheelDeltaY/4:j.wheelDelta!=null&&(me=j.wheelDelta/4)),I==null)if(P.length>=N){var we=P;if(I=ae(we,5),!I){var xe=Math.abs(we[0]);I=re(we)&&xe>5}if(I)for(var qe=0;qe<we.length;qe++)z=Math.min(Math.abs(we[qe]),z)}else P.push(me),ve=!0;else I&&(z=Math.min(Math.abs(me),z));if(!t.scrollingPage){var Ce=t.cy,Oe=Ce.zoom(),Ie=Ce.pan(),He=t.projectIntoViewport(j.clientX,j.clientY),Ue=[He[0]*Oe+Ie.x,He[1]*Oe+Ie.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||k()){j.preventDefault();return}if(Ce.panningEnabled()&&Ce.userPanningEnabled()&&Ce.zoomingEnabled()&&Ce.userZoomingEnabled()){j.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var je;ve&&Math.abs(me)>5&&(me=A1(me)*5),je=me/-250,I&&(je/=z,je*=3),je=je*t.wheelSensitivity;var et=j.deltaMode===1;et&&(je*=33);var Ge=Ce.zoom()*Math.pow(10,je);j.type==="gesturechange"&&(Ge=t.gestureStartZoom*j.scale),Ce.zoom({level:Ge,renderedPosition:{x:Ue[0],y:Ue[1]}}),Ce.emit(j.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",K,!0),t.registerBinding(e,"scroll",function(j){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(j){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||j.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(he){t.hasTouchStarted||K(he)},!0),t.registerBinding(t.container,"mouseout",function(j){var ve=t.projectIntoViewport(j.clientX,j.clientY);t.cy.emit({originalEvent:j,type:"mouseout",position:{x:ve[0],y:ve[1]}})},!1),t.registerBinding(t.container,"mouseover",function(j){var ve=t.projectIntoViewport(j.clientX,j.clientY);t.cy.emit({originalEvent:j,type:"mouseover",position:{x:ve[0],y:ve[1]}})},!1);var V,Z,U,W,X,ee,oe,te,ie,se,$,ne,le,Se=function(j,ve,me,we){return Math.sqrt((me-j)*(me-j)+(we-ve)*(we-ve))},De=function(j,ve,me,we){return(me-j)*(me-j)+(we-ve)*(we-ve)},be;t.registerBinding(t.container,"touchstart",be=function(j){if(t.hasTouchStarted=!0,!!F(j)){w(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var ve=t.cy,me=t.touchData.now,we=t.touchData.earlier;if(j.touches[0]){var xe=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);me[0]=xe[0],me[1]=xe[1]}if(j.touches[1]){var xe=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);me[2]=xe[0],me[3]=xe[1]}if(j.touches[2]){var xe=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);me[4]=xe[0],me[5]=xe[1]}if(j.touches[1]){t.touchData.singleTouchMoved=!0,v(t.dragData.touchDragEles);var qe=t.findContainerClientCoords();ie=qe[0],se=qe[1],$=qe[2],ne=qe[3],V=j.touches[0].clientX-ie,Z=j.touches[0].clientY-se,U=j.touches[1].clientX-ie,W=j.touches[1].clientY-se,le=0<=V&&V<=$&&0<=U&&U<=$&&0<=Z&&Z<=ne&&0<=W&&W<=ne;var Ce=ve.pan(),Oe=ve.zoom();X=Se(V,Z,U,W),ee=De(V,Z,U,W),oe=[(V+U)/2,(Z+W)/2],te=[(oe[0]-Ce.x)/Oe,(oe[1]-Ce.y)/Oe];var Ie=200,He=Ie*Ie;if(ee<He&&!j.touches[2]){var Ue=t.findNearestElement(me[0],me[1],!0,!0),je=t.findNearestElement(me[2],me[3],!0,!0);Ue&&Ue.isNode()?(Ue.activate().emit({originalEvent:j,type:"cxttapstart",position:{x:me[0],y:me[1]}}),t.touchData.start=Ue):je&&je.isNode()?(je.activate().emit({originalEvent:j,type:"cxttapstart",position:{x:me[0],y:me[1]}}),t.touchData.start=je):ve.emit({originalEvent:j,type:"cxttapstart",position:{x:me[0],y:me[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(j.touches[2])ve.boxSelectionEnabled()&&j.preventDefault();else if(!j.touches[1]){if(j.touches[0]){var et=t.findNearestElements(me[0],me[1],!0,!0),Ge=et[0];if(Ge!=null&&(Ge.activate(),t.touchData.start=Ge,t.touchData.starts=et,t.nodeIsGrabbable(Ge))){var $e=t.dragData.touchDragEles=ve.collection(),vt=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Ge.selected()?(vt=ve.$(function(gt){return gt.selected()&&t.nodeIsGrabbable(gt)}),C(vt,{addToList:$e})):E(Ge,{addToList:$e}),h(Ge);var nt=function(_t){return{originalEvent:j,type:_t,position:{x:me[0],y:me[1]}}};Ge.emit(nt("grabon")),vt?vt.forEach(function(gt){gt.emit(nt("grab"))}):Ge.emit(nt("grab"))}a(Ge,["touchstart","tapstart","vmousedown"],j,{x:me[0],y:me[1]}),Ge==null&&(t.data.bgActivePosistion={x:xe[0],y:xe[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&a(t.touchData.start,["taphold"],j,{x:me[0],y:me[1]})},t.tapholdDuration)}}if(j.touches.length>=1){for(var st=t.touchData.startPosition=[null,null,null,null,null,null],Tt=0;Tt<me.length;Tt++)st[Tt]=we[Tt]=me[Tt];var dt=j.touches[0];t.touchData.startGPosition=[dt.clientX,dt.clientY]}}},!1);var Te;t.registerBinding(e,"touchmove",Te=function(j){var ve=t.touchData.capture;if(!(!ve&&!F(j))){var me=t.selection,we=t.cy,xe=t.touchData.now,qe=t.touchData.earlier,Ce=we.zoom();if(j.touches[0]){var Oe=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);xe[0]=Oe[0],xe[1]=Oe[1]}if(j.touches[1]){var Oe=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);xe[2]=Oe[0],xe[3]=Oe[1]}if(j.touches[2]){var Oe=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);xe[4]=Oe[0],xe[5]=Oe[1]}var Ie=t.touchData.startGPosition,He;if(ve&&j.touches[0]&&Ie){for(var Ue=[],je=0;je<xe.length;je++)Ue[je]=xe[je]-qe[je];var et=j.touches[0].clientX-Ie[0],Ge=et*et,$e=j.touches[0].clientY-Ie[1],vt=$e*$e,nt=Ge+vt;He=nt>=t.touchTapThreshold2}if(ve&&t.touchData.cxt){j.preventDefault();var st=j.touches[0].clientX-ie,Tt=j.touches[0].clientY-se,dt=j.touches[1].clientX-ie,gt=j.touches[1].clientY-se,_t=De(st,Tt,dt,gt),Mt=_t/ee,Zt=150,Lt=Zt*Zt,Ht=1.5,Sr=Ht*Ht;if(Mt>=Sr||_t>=Lt){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var on={originalEvent:j,type:"cxttapend",position:{x:xe[0],y:xe[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(on),t.touchData.start=null):we.emit(on)}}if(ve&&t.touchData.cxt){var on={originalEvent:j,type:"cxtdrag",position:{x:xe[0],y:xe[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(on):we.emit(on),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Rt=t.findNearestElement(xe[0],xe[1],!0,!0);(!t.touchData.cxtOver||Rt!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:j,type:"cxtdragout",position:{x:xe[0],y:xe[1]}}),t.touchData.cxtOver=Rt,Rt&&Rt.emit({originalEvent:j,type:"cxtdragover",position:{x:xe[0],y:xe[1]}}))}else if(ve&&j.touches[2]&&we.boxSelectionEnabled())j.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||we.emit({originalEvent:j,type:"boxstart",position:{x:xe[0],y:xe[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,me[4]=1,!me||me.length===0||me[0]===void 0?(me[0]=(xe[0]+xe[2]+xe[4])/3,me[1]=(xe[1]+xe[3]+xe[5])/3,me[2]=(xe[0]+xe[2]+xe[4])/3+1,me[3]=(xe[1]+xe[3]+xe[5])/3+1):(me[2]=(xe[0]+xe[2]+xe[4])/3,me[3]=(xe[1]+xe[3]+xe[5])/3),t.redrawHint("select",!0),t.redraw();else if(ve&&j.touches[1]&&!t.touchData.didSelect&&we.zoomingEnabled()&&we.panningEnabled()&&we.userZoomingEnabled()&&we.userPanningEnabled()){j.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var rr=t.dragData.touchDragEles;if(rr){t.redrawHint("drag",!0);for(var Qt=0;Qt<rr.length;Qt++){var hr=rr[Qt]._private;hr.grabbed=!1,hr.rscratch.inDragLayer=!1}}var nr=t.touchData.start,st=j.touches[0].clientX-ie,Tt=j.touches[0].clientY-se,dt=j.touches[1].clientX-ie,gt=j.touches[1].clientY-se,jr=Se(st,Tt,dt,gt),gn=jr/X;if(le){var Qn=st-V,Ln=Tt-Z,Jn=dt-U,sn=gt-W,ka=(Qn+Jn)/2,Gn=(Ln+sn)/2,qt=we.zoom(),ct=qt*gn,Gr=we.pan(),ea=te[0]*qt+Gr.x,Pt=te[1]*qt+Gr.y,Q={x:-ct/qt*(ea-Gr.x-ka)+ea,y:-ct/qt*(Pt-Gr.y-Gn)+Pt};if(nr&&nr.active()){var rr=t.dragData.touchDragEles;v(rr),t.redrawHint("drag",!0),t.redrawHint("eles",!0),nr.unactivate().emit("freeon"),rr.emit("free"),t.dragData.didDrag&&(nr.emit("dragfreeon"),rr.emit("dragfree"))}we.viewport({zoom:ct,pan:Q,cancelOnFailedZoom:!0}),we.emit("pinchzoom"),X=jr,V=st,Z=Tt,U=dt,W=gt,t.pinching=!0}if(j.touches[0]){var Oe=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);xe[0]=Oe[0],xe[1]=Oe[1]}if(j.touches[1]){var Oe=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);xe[2]=Oe[0],xe[3]=Oe[1]}if(j.touches[2]){var Oe=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);xe[4]=Oe[0],xe[5]=Oe[1]}}else if(j.touches[0]&&!t.touchData.didSelect){var fe=t.touchData.start,ke=t.touchData.last,Rt;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Rt=t.findNearestElement(xe[0],xe[1],!0,!0)),ve&&fe!=null&&j.preventDefault(),ve&&fe!=null&&t.nodeIsDraggable(fe))if(He){var rr=t.dragData.touchDragEles,ze=!t.dragData.didDrag;ze&&C(rr,{inDragLayer:!0}),t.dragData.didDrag=!0;var Re={x:0,y:0};if(it(Ue[0])&&it(Ue[1])&&(Re.x+=Ue[0],Re.y+=Ue[1],ze)){t.redrawHint("eles",!0);var Ze=t.touchData.dragDelta;Ze&&it(Ze[0])&&it(Ze[1])&&(Re.x+=Ze[0],Re.y+=Ze[1])}t.hoverData.draggingEles=!0,rr.silentShift(Re).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==qe[0]&&t.touchData.startPosition[1]==qe[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Ze=t.touchData.dragDelta=t.touchData.dragDelta||[];Ze.length===0?(Ze.push(Ue[0]),Ze.push(Ue[1])):(Ze[0]+=Ue[0],Ze[1]+=Ue[1])}if(a(fe||Rt,["touchmove","tapdrag","vmousemove"],j,{x:xe[0],y:xe[1]}),(!fe||!fe.grabbed())&&Rt!=ke&&(ke&&ke.emit({originalEvent:j,type:"tapdragout",position:{x:xe[0],y:xe[1]}}),Rt&&Rt.emit({originalEvent:j,type:"tapdragover",position:{x:xe[0],y:xe[1]}})),t.touchData.last=Rt,ve)for(var Qt=0;Qt<xe.length;Qt++)xe[Qt]&&t.touchData.startPosition[Qt]&&He&&(t.touchData.singleTouchMoved=!0);if(ve&&(fe==null||fe.pannable())&&we.panningEnabled()&&we.userPanningEnabled()){var kt=o(fe,t.touchData.starts);kt&&(j.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=fs(t.touchData.startPosition)),t.swipePanning?(we.panBy({x:Ue[0]*Ce,y:Ue[1]*Ce}),we.emit("dragpan")):He&&(t.swipePanning=!0,we.panBy({x:et*Ce,y:$e*Ce}),we.emit("dragpan"),fe&&(fe.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var Oe=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);xe[0]=Oe[0],xe[1]=Oe[1]}}for(var je=0;je<xe.length;je++)qe[je]=xe[je];ve&&j.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var pe;t.registerBinding(e,"touchcancel",pe=function(j){var ve=t.touchData.start;t.touchData.capture=!1,ve&&ve.unactivate()});var de,ye,Ee,ue;if(t.registerBinding(e,"touchend",de=function(j){var ve=t.touchData.start,me=t.touchData.capture;if(me)j.touches.length===0&&(t.touchData.capture=!1),j.preventDefault();else return;var we=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var xe=t.cy,qe=xe.zoom(),Ce=t.touchData.now,Oe=t.touchData.earlier;if(j.touches[0]){var Ie=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);Ce[0]=Ie[0],Ce[1]=Ie[1]}if(j.touches[1]){var Ie=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);Ce[2]=Ie[0],Ce[3]=Ie[1]}if(j.touches[2]){var Ie=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);Ce[4]=Ie[0],Ce[5]=Ie[1]}ve&&ve.unactivate();var He;if(t.touchData.cxt){if(He={originalEvent:j,type:"cxttapend",position:{x:Ce[0],y:Ce[1]}},ve?ve.emit(He):xe.emit(He),!t.touchData.cxtDragged){var Ue={originalEvent:j,type:"cxttap",position:{x:Ce[0],y:Ce[1]}};ve?ve.emit(Ue):xe.emit(Ue)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!j.touches[2]&&xe.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var je=xe.collection(t.getAllInBox(we[0],we[1],we[2],we[3]));we[0]=void 0,we[1]=void 0,we[2]=void 0,we[3]=void 0,we[4]=0,t.redrawHint("select",!0),xe.emit({type:"boxend",originalEvent:j,position:{x:Ce[0],y:Ce[1]}});var et=function(Lt){return Lt.selectable()&&!Lt.selected()};je.emit("box").stdFilter(et).select().emit("boxselect"),je.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(ve!=null&&ve.unactivate(),j.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!j.touches[1]){if(!j.touches[0]){if(!j.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ge=t.dragData.touchDragEles;if(ve!=null){var $e=ve._private.grabbed;v(Ge),t.redrawHint("drag",!0),t.redrawHint("eles",!0),$e&&(ve.emit("freeon"),Ge.emit("free"),t.dragData.didDrag&&(ve.emit("dragfreeon"),Ge.emit("dragfree"))),a(ve,["touchend","tapend","vmouseup","tapdragout"],j,{x:Ce[0],y:Ce[1]}),ve.unactivate(),t.touchData.start=null}else{var vt=t.findNearestElement(Ce[0],Ce[1],!0,!0);a(vt,["touchend","tapend","vmouseup","tapdragout"],j,{x:Ce[0],y:Ce[1]})}var nt=t.touchData.startPosition[0]-Ce[0],st=nt*nt,Tt=t.touchData.startPosition[1]-Ce[1],dt=Tt*Tt,gt=st+dt,_t=gt*qe*qe;t.touchData.singleTouchMoved||(ve||xe.$(":selected").unselect(["tapunselect"]),a(ve,["tap","vclick"],j,{x:Ce[0],y:Ce[1]}),ye=!1,j.timeStamp-ue<=xe.multiClickDebounceTime()?(Ee&&clearTimeout(Ee),ye=!0,ue=null,a(ve,["dbltap","vdblclick"],j,{x:Ce[0],y:Ce[1]})):(Ee=setTimeout(function(){ye||a(ve,["onetap","voneclick"],j,{x:Ce[0],y:Ce[1]})},xe.multiClickDebounceTime()),ue=j.timeStamp)),ve!=null&&!t.dragData.didDrag&&ve._private.selectable&&_t<t.touchTapThreshold2&&!t.pinching&&(xe.selectionType()==="single"?(xe.$(r).unmerge(ve).unselect(["tapunselect"]),ve.select(["tapselect"])):ve.selected()?ve.unselect(["tapunselect"]):ve.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Mt=0;Mt<Ce.length;Mt++)Oe[Mt]=Ce[Mt];t.dragData.didDrag=!1,j.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),j.touches.length<2&&(j.touches.length===1&&(t.touchData.startGPosition=[j.touches[0].clientX,j.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var Ae=[],Pe=function(j){return{clientX:j.clientX,clientY:j.clientY,force:1,identifier:j.pointerId,pageX:j.pageX,pageY:j.pageY,radiusX:j.width/2,radiusY:j.height/2,screenX:j.screenX,screenY:j.screenY,target:j.target}},Fe=function(j){return{event:j,touch:Pe(j)}},Ye=function(j){Ae.push(Fe(j))},Ve=function(j){for(var ve=0;ve<Ae.length;ve++){var me=Ae[ve];if(me.event.pointerId===j.pointerId){Ae.splice(ve,1);return}}},Qe=function(j){var ve=Ae.filter(function(me){return me.event.pointerId===j.pointerId})[0];ve.event=j,ve.touch=Pe(j)},Xe=function(j){j.touches=Ae.map(function(ve){return ve.touch})},We=function(j){return j.pointerType==="mouse"||j.pointerType===4};t.registerBinding(t.container,"pointerdown",function(he){We(he)||(he.preventDefault(),Ye(he),Xe(he),be(he))}),t.registerBinding(t.container,"pointerup",function(he){We(he)||(Ve(he),Xe(he),de(he))}),t.registerBinding(t.container,"pointercancel",function(he){We(he)||(Ve(he),Xe(he),pe(he))}),t.registerBinding(t.container,"pointermove",function(he){We(he)||(he.preventDefault(),Qe(he),Xe(he),Te(he))})}};var ti={};ti.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,o,s,u){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,u,f,c){return jl(s,u,this.points,n,a,i/2,o/2,f)},checkPoint:function(n,a,i,o,s,u,f,c){return Ja(n,a,this.points,u,f,o,s,[0,-1],i)}}};ti.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s,u){return Zz(i,o,e,r,n/2+s,a/2+s)},checkPoint:function(e,r,n,a,i,o,s,u){return go(e,r,a,i,o,s,n)}}};ti.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,o,s,u,f){if(u[f]!==void 0&&u[f+"-cx"]===n&&u[f+"-cy"]===a)return u[f];u[f]=new Array(e.length/2),u[f+"-cx"]=n,u[f+"-cy"]=a;var c=i/2,h=o/2;s=s==="auto"?lk(i,o):s;for(var g=new Array(e.length/2),y=0;y<e.length/2;y++)g[y]={x:n+c*e[y*2],y:a+h*e[y*2+1]};var p,C,E,v,x=g.length;for(C=g[x-1],p=0;p<x;p++)E=g[p%x],v=g[(p+1)%x],u[f][p]=q1(C,E,v,s),C=E,E=v;return u[f]},draw:function(n,a,i,o,s,u,f){this.renderer.nodeShapeImpl("round-polygon",n,a,i,o,s,this.points,this.getOrCreateCorners(a,i,o,s,u,f,"drawCorners"))},intersectLine:function(n,a,i,o,s,u,f,c,h){return Qz(s,u,this.points,n,a,i,o,f,this.getOrCreateCorners(n,a,i,o,c,h,"corners"))},checkPoint:function(n,a,i,o,s,u,f,c,h){return jz(n,a,this.points,u,f,o,s,this.getOrCreateCorners(u,f,o,s,c,h,"corners"))}}};ti.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,o)},intersectLine:function(e,r,n,a,i,o,s,u){return ok(i,o,e,r,n,a,s,u)},checkPoint:function(e,r,n,a,i,o,s,u){var f=a/2,c=i/2;u=u==="auto"?Ri(a,i):u,u=Math.min(f,c,u);var h=u*2;return!!(Ja(e,r,this.points,o,s,a,i-h,[0,-1],n)||Ja(e,r,this.points,o,s,a-h,i,[0,-1],n)||go(e,r,h,h,o-f+u,s-c+u,n)||go(e,r,h,h,o+f-u,s-c+u,n)||go(e,r,h,h,o+f-u,s+c-u,n)||go(e,r,h,h,o-f+u,s+c-u,n))}}};ti.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:D1(),points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,o)},generateCutTrianglePts:function(e,r,n,a,i){var o=i==="auto"?this.cornerLength:i,s=r/2,u=e/2,f=n-u,c=n+u,h=a-s,g=a+s;return{topLeft:[f,h+o,f+o,h,f+o,h+o],topRight:[c-o,h,c,h+o,c-o,h+o],bottomRight:[c,g-o,c-o,g,c-o,g-o],bottomLeft:[f+o,g,f,g-o,f+o,g-o]}},intersectLine:function(e,r,n,a,i,o,s,u){var f=this.generateCutTrianglePts(n+2*s,a+2*s,e,r,u),c=[].concat.apply([],[f.topLeft.splice(0,4),f.topRight.splice(0,4),f.bottomRight.splice(0,4),f.bottomLeft.splice(0,4)]);return jl(i,o,c,e,r)},checkPoint:function(e,r,n,a,i,o,s,u){var f=u==="auto"?this.cornerLength:u;if(Ja(e,r,this.points,o,s,a,i-2*f,[0,-1],n)||Ja(e,r,this.points,o,s,a-2*f,i,[0,-1],n))return!0;var c=this.generateCutTrianglePts(a,i,o,s);return Rn(e,r,c.topLeft)||Rn(e,r,c.topRight)||Rn(e,r,c.bottomRight)||Rn(e,r,c.bottomLeft)}}};ti.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s,u){var f=.15,c=.5,h=.85,g=this.generateBarrelBezierPts(n+2*s,a+2*s,e,r),y=function(E){var v=bs({x:E[0],y:E[1]},{x:E[2],y:E[3]},{x:E[4],y:E[5]},f),x=bs({x:E[0],y:E[1]},{x:E[2],y:E[3]},{x:E[4],y:E[5]},c),w=bs({x:E[0],y:E[1]},{x:E[2],y:E[3]},{x:E[4],y:E[5]},h);return[E[0],E[1],v.x,v.y,x.x,x.y,w.x,w.y,E[4],E[5]]},p=[].concat(y(g.topLeft),y(g.topRight),y(g.bottomRight),y(g.bottomLeft));return jl(i,o,p,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,o=e/2,s=n-o,u=n+o,f=a-i,c=a+i,h=Ob(e,r),g=h.heightOffset,y=h.widthOffset,p=h.ctrlPtOffsetPct*e,C={topLeft:[s,f+g,s+p,f,s+y,f],topRight:[u-y,f,u-p,f,u,f+g],bottomRight:[u,c-g,u-p,c,u-y,c],bottomLeft:[s+y,c,s+p,c,s,c-g]};return C.topLeft.isTop=!0,C.topRight.isTop=!0,C.bottomLeft.isBottom=!0,C.bottomRight.isBottom=!0,C},checkPoint:function(e,r,n,a,i,o,s,u){var f=Ob(a,i),c=f.heightOffset,h=f.widthOffset;if(Ja(e,r,this.points,o,s,a,i-2*c,[0,-1],n)||Ja(e,r,this.points,o,s,a-2*h,i,[0,-1],n))return!0;for(var g=this.generateBarrelBezierPts(a,i,o,s),y=function(_,k,F){var G=F[4],B=F[2],q=F[0],R=F[5],P=F[1],N=Math.min(G,q),I=Math.max(G,q),z=Math.min(R,P),ae=Math.max(R,P);if(N<=_&&_<=I&&z<=k&&k<=ae){var re=Jz(G,B,q),K=$z(re[0],re[1],re[2],_),V=K.filter(function(Z){return 0<=Z&&Z<=1});if(V.length>0)return V[0]}return null},p=Object.keys(g),C=0;C<p.length;C++){var E=p[C],v=g[E],x=y(e,r,v);if(x!=null){var w=v[5],T=v[3],A=v[1],M=Vr(w,T,A,x);if(v.isTop&&M<=r||v.isBottom&&r<=M)return!0}}return!1}}};ti.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,o)},intersectLine:function(e,r,n,a,i,o,s,u){var f=e-(n/2+s),c=r-(a/2+s),h=c,g=e+(n/2+s),y=xi(i,o,e,r,f,c,g,h,!1);return y.length>0?y:ok(i,o,e,r,n,a,s,u)},checkPoint:function(e,r,n,a,i,o,s,u){u=u==="auto"?Ri(a,i):u;var f=2*u;if(Ja(e,r,this.points,o,s,a,i-f,[0,-1],n)||Ja(e,r,this.points,o,s,a-f,i,[0,-1],n))return!0;var c=a/2+2*n,h=i/2+2*n,g=[o-c,s-h,o-c,s,o+c,s,o+c,s-h];return!!(Rn(e,r,g)||go(e,r,f,f,o+a/2-u,s+i/2-u,n)||go(e,r,f,f,o-a/2+u,s+i/2-u,n))}}};ti.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Tn(3,0)),this.generateRoundPolygon("round-triangle",Tn(3,0)),this.generatePolygon("rectangle",Tn(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Tn(5,0)),this.generateRoundPolygon("round-pentagon",Tn(5,0)),this.generatePolygon("hexagon",Tn(6,0)),this.generateRoundPolygon("round-hexagon",Tn(6,0)),this.generatePolygon("heptagon",Tn(7,0)),this.generateRoundPolygon("round-heptagon",Tn(7,0)),this.generatePolygon("octagon",Tn(8,0)),this.generateRoundPolygon("round-octagon",Tn(8,0));var n=new Array(20);{var a=Nb(5,0),i=Nb(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=i[s*2],n[s*4+3]=i[s*2+1]}n=sk(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(f){var c=f.join("$"),h="polygon-"+c,g;return(g=this[h])?g:e.generatePolygon(h,f)}};var pu={};pu.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};pu.redraw=function(t){t=t||nk();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};pu.beforeRender=function(t,e){if(!this.destroyed){e==null&&yr("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var rS=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};pu.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){rS(t,!0,a);var i=Qa();t.render(t.renderOptions);var o=t.lastDrawTime=Qa();t.averageRedrawTime===void 0&&(t.averageRedrawTime=o-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=o-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else rS(t,!1,a);t.skipFrame=!1,jf(r)}};jf(r)}};var gU=function(e){this.init(e)},sN=gU,Ps=sN.prototype;Ps.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Ps.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",u=a.getElementById(o)!=null;if(r.className.indexOf(s)<0&&(r.className=(r.className||"")+" "+s),!u){var f=a.createElement("style");f.id=o,f.textContent="."+s+" { position: relative; }",i.insertBefore(f,i.children[0])}var c=n.getComputedStyle(r),h=c.getPropertyValue("position");h==="static"&&Xt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=it(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Ps.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Ps.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};Ps.isHeadless=function(){return!1};[B1,iN,oN,Rs,ti,pu].forEach(function(t){Et(Ps,t)});var kv=1e3/60,lN={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=fu(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(f,c){var h=Qa(),g=a.averageRedrawTime,y=a.lastRedrawTime,p=[],C=a.cy.extent(),E=a.getPixelRatio();for(f||a.flushRenderedStyleQueue();;){var v=Qa(),x=v-h,w=v-c;if(y<kv){var T=kv-(f?g:0);if(w>=e.deqFastCost*T)break}else if(f){if(x>=e.deqCost*y||x>=e.deqAvgCost*g)break}else if(w>=e.deqNoDrawCost*kv)break;var A=e.deq(n,E,C);if(A.length>0)for(var M=0;M<A.length;M++)p.push(A[M]);else break}p.length>0&&(e.onDeqd(n,p),!f&&e.shouldRedraw(n,p,E,C)&&i())},s=e.priority||C1;a.beforeRender(o,s(n))}}}},yU=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zf;Fi(this,t),this.idsByKey=new Xa,this.keyForId=new Xa,this.cachesByLvl=new Xa,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Bi(t,[{key:"getIdsFor",value:function(r){r==null&&yr("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new Ls,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new Xa,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])}(),nS=25,vf=50,Mf=-4,Xb=3,uN=7.99,mU=8,bU=1024,wU=1024,xU=1024,EU=.2,CU=.8,TU=10,SU=.15,AU=.1,LU=.9,DU=.9,_U=100,MU=1,ds={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},RU=nn({getKey:null,doesEleInvalidateKey:Zf,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:ek,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Tl=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=RU(r);Et(n,a),n.lookup=new yU(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},zr=Tl.prototype;zr.reasons=ds;zr.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};zr.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};zr.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new cu(function(r,n){return n.reqs-r.reqs});return e};zr.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};zr.getElement=function(t,e,r,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(S1(s*r))),n<Mf)n=Mf;else if(s>=uN||n>Xb)return null;var f=Math.pow(2,n),c=e.h*f,h=e.w*f,g=o.eleTextBiggerThanMin(t,f);if(!this.isVisible(t,g))return null;var y=u.get(t,n);if(y&&y.invalidated&&(y.invalidated=!1,y.texture.invalidatedWidth-=y.width),y)return y;var p;if(c<=nS?p=nS:c<=vf?p=vf:p=Math.ceil(c/vf)*vf,c>xU||h>wU)return null;var C=i.getTextureQueue(p),E=C[C.length-2],v=function(){return i.recycleTexture(p,h)||i.addTexture(p,h)};E||(E=C[C.length-1]),E||(E=v()),E.width-E.usedWidth<h&&(E=v());for(var x=function(N){return N&&N.scaledLabelShown===g},w=a&&a===ds.dequeue,T=a&&a===ds.highQuality,A=a&&a===ds.downscale,M,D=n+1;D<=Xb;D++){var _=u.get(t,D);if(_){M=_;break}}var k=M&&M.level===n+1?M:null,F=function(){E.context.drawImage(k.texture.canvas,k.x,0,k.width,k.height,E.usedWidth,0,h,c)};if(E.context.setTransform(1,0,0,1,0,0),E.context.clearRect(E.usedWidth,0,h,p),x(k))F();else if(x(M))if(T){for(var G=M.level;G>n;G--)k=i.getElement(t,e,r,G,ds.downscale);F()}else return i.queueElement(t,M.level-1),M;else{var B;if(!w&&!T&&!A)for(var q=n-1;q>=Mf;q--){var R=u.get(t,q);if(R){B=R;break}}if(x(B))return i.queueElement(t,n),B;E.context.translate(E.usedWidth,0),E.context.scale(f,f),this.drawElement(E.context,t,e,g,!1),E.context.scale(1/f,1/f),E.context.translate(-E.usedWidth,0)}return y={x:E.usedWidth,texture:E,level:n,scale:f,width:h,height:c,scaledLabelShown:g},E.usedWidth+=Math.ceil(h+mU),E.eleCaches.push(y),u.set(t,n,y),i.checkTextureFullness(E),y};zr.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};zr.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=Mf;i<=Xb;i++){var o=r.getForCachedKey(t,i);o&&n.push(o)}var s=r.invalidate(t);if(s)for(var u=0;u<n.length;u++){var f=n[u],c=f.texture;c.invalidatedWidth+=f.width,f.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};zr.checkTextureUtility=function(t){t.invalidatedWidth>=EU*t.width&&this.retireTexture(t)};zr.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>CU&&t.fullnessChecks>=TU?Mi(r,t):t.fullnessChecks++};zr.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;Mi(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}T1(i);var u=e.getRetiredTextureQueue(r);u.push(t)};zr.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(bU,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};zr.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,T1(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Mi(a,o),n.push(o),o}};zr.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(s),a[i]=s}};zr.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<MU&&r.size()>0;o++){var s=r.pop(),u=s.key,f=s.eles[0],c=i.hasCache(f,s.level);if(n[u]=null,c)continue;a.push(s);var h=e.getBoundingBox(f);e.getElement(f,h,t,s.level,ds.dequeue)}return a};zr.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=E1,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};zr.onDequeue=function(t){this.onDequeues.push(t)};zr.offDequeue=function(t){Mi(this.onDequeues,t)};zr.setupDequeueing=lN.setupDequeueing({deqRedrawThreshold:_U,deqCost:SU,deqAvgCost:AU,deqNoDrawCost:LU,deqFastCost:DU,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var o=r[i].eles,s=0;s<o.length;s++){var u=o[s].boundingBox();if(L1(u,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var PU=1,Il=-4,ic=2,kU=3.99,NU=50,OU=50,IU=.15,FU=.1,BU=.9,qU=.9,zU=1,aS=250,GU=4e3*4e3,iS=32767,HU=!0,fN=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Qa()-2*aS,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=fu(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},OU),n.beforeRender(function(o,s){s-r.lastInvalidationTime<=aS?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(s,u){return u.reqs-s.reqs};r.layersQueue=new cu(i),r.setupDequeueing()},an=fN.prototype,oS=0,UU=Math.pow(2,53)-1;an.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),o={id:oS=++oS%UU,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,f=-o.bb.y1;return s.scale(r,r),s.translate(u,f),o};an.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),s=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(S1(o*e)),r<Il)r=Il;else if(o>=kU||r>ic)return null}n.validateLayersElesOrdering(r,t);var u=n.layersByLevel,f=Math.pow(2,r),c=u[r]=u[r]||[],h,g=n.levelIsComplete(r,t),y,p=function(){var F=function(P){if(n.validateLayersElesOrdering(P,t),n.levelIsComplete(P,t))return y=u[P],!0},G=function(P){if(!y)for(var N=r+P;Il<=N&&N<=ic&&!F(N);N+=P);};G(1),G(-1);for(var B=c.length-1;B>=0;B--){var q=c[B];q.invalid&&Mi(c,q)}};if(!g)p();else return c;var C=function(){if(!h){h=Nn();for(var F=0;F<t.length;F++)ik(h,t[F].boundingBox())}return h},E=function(F){F=F||{};var G=F.after;C();var B=Math.ceil(h.w*f),q=Math.ceil(h.h*f);if(B>iS||q>iS)return null;var R=B*q;if(R>GU)return null;var P=n.makeLayer(h,r);if(G!=null){var N=c.indexOf(G)+1;c.splice(N,0,P)}else(F.insert===void 0||F.insert)&&c.unshift(P);return P};if(n.skipping&&!s)return null;for(var v=null,x=t.length/PU,w=!s,T=0;T<t.length;T++){var A=t[T],M=A._private.rscratch,D=M.imgLayerCaches=M.imgLayerCaches||{},_=D[r];if(_){v=_;continue}if((!v||v.eles.length>=x||!Uz(v.bb,A.boundingBox()))&&(v=E({insert:!0,after:v}),!v))return null;y||w?n.queueLayer(v,A):n.drawEleInLayer(v,A,r,e),v.eles.push(A),D[r]=v}return y||(w?null:c)};an.getEleLevelForLayerLevel=function(t,e){return t};an.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,o=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,r,HU),i.setImgSmoothing(o,!0))};an.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};an.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var s=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}};an.updateElementsInLayers=function(t,e){for(var r=this,n=ou(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],o=n?t[a]:t[a].ele,s=o._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},f=Il;f<=ic;f++){var c=u[f];c&&(i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,o,i))}};an.haveLayers=function(){for(var t=this,e=!1,r=Il;r<=ic;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};an.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=Qa(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};an.invalidateLayer=function(t){if(this.lastInvalidationTime=Qa(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];Mi(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};an.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};an.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};an.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};an.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<zU&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};an.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};an.requestRedraw=fu(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);an.setupDequeueing=lN.setupDequeueing({deqRedrawThreshold:NU,deqCost:IU,deqAvgCost:FU,deqNoDrawCost:BU,deqFastCost:qU,deq:function(e,r){return e.dequeue(r)},onDeqd:C1,shouldRedraw:ek,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var cN={},sS;function VU(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function WU(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function lS(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var o=r,s=r[0];t.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function $U(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,o=i[0];t.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var u=i[s];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function YU(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}cN.arrowShapeImpl=function(t){return(sS||(sS={polygon:VU,"triangle-backcurve":WU,"triangle-tee":lS,"circle-triangle":$U,"triangle-cross":lS,circle:YU}))[t]};var Ra={};Ra.drawElement=function(t,e,r,n,a,i){var o=this;e.isNode()?o.drawNode(t,e,r,n,a,i):o.drawEdge(t,e,r,n,a,i)};Ra.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};Ra.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};Ra.drawCachedElementPortion=function(t,e,r,n,a,i,o,s){var u=this,f=r.getBoundingBox(e);if(!(f.w===0||f.h===0)){var c=r.getElement(e,f,n,a,i);if(c!=null){var h=s(u,e);if(h===0)return;var g=o(u,e),y=f.x1,p=f.y1,C=f.w,E=f.h,v,x,w,T,A;if(g!==0){var M=r.getRotationPoint(e);w=M.x,T=M.y,t.translate(w,T),t.rotate(g),A=u.getImgSmoothing(t),A||u.setImgSmoothing(t,!0);var D=r.getRotationOffset(e);v=D.x,x=D.y}else v=y,x=p;var _;h!==1&&(_=t.globalAlpha,t.globalAlpha=_*h),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,v,x,C,E),h!==1&&(t.globalAlpha=_),g!==0&&(t.rotate(-g),t.translate(-w,-T),A||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var XU=function(){return 0},KU=function(e,r){return e.getTextAngle(r,null)},jU=function(e,r){return e.getTextAngle(r,"source")},ZU=function(e,r){return e.getTextAngle(r,"target")},QU=function(e,r){return r.effectiveOpacity()},Nv=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Ra.drawCachedElement=function(t,e,r,n,a,i){var o=this,s=o.data,u=s.eleTxrCache,f=s.lblTxrCache,c=s.slbTxrCache,h=s.tlbTxrCache,g=e.boundingBox(),y=i===!0?u.reasons.highQuality:null;if(!(g.w===0||g.h===0||!e.visible())&&(!n||L1(g,n))){var p=e.isEdge(),C=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,u,r,a,y,XU,QU),(!p||!C)&&o.drawCachedElementPortion(t,e,f,r,a,y,KU,Nv),p&&!C&&(o.drawCachedElementPortion(t,e,c,r,a,y,jU,Nv),o.drawCachedElementPortion(t,e,h,r,a,y,ZU,Nv)),o.drawElementOverlay(t,e)}};Ra.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};Ra.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(t,o,r,n)}};Ra.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&a.drawCachedElement(t,o,r,n)}};Ra.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var o=0;o<i.length;o++){var s=i[o],u=s.bb;u.w===0||u.h===0||t.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else a.drawCachedElements(t,e,r,n)};var ri={};ri.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var f=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,h=e.pstyle("curve-style").value,g=e.pstyle("line-style").value,y=e.pstyle("width").pfValue,p=e.pstyle("line-cap").value,C=e.pstyle("line-outline-width").value,E=e.pstyle("line-outline-color").value,v=f*c,x=f*c,w=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;h==="straight-triangle"?(o.eleStrokeStyle(t,e,P),o.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=y,t.lineCap=p,o.eleStrokeStyle(t,e,P),o.drawEdgePath(e,t,s.allpts,g),t.lineCap="butt")},T=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;if(t.lineWidth=y+C,t.lineCap=p,C>0)o.colorStrokeStyle(t,E[0],E[1],E[2],P);else{t.lineCap="butt";return}h==="straight-triangle"?o.drawEdgeTrianglePath(e,t,s.allpts):(o.drawEdgePath(e,t,s.allpts,g),t.lineCap="butt")},A=function(){a&&o.drawEdgeOverlay(t,e)},M=function(){a&&o.drawEdgeUnderlay(t,e)},D=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x;o.drawArrowheads(t,e,P)},_=function(){o.drawElementText(t,e,null,n)};t.lineJoin="round";var k=e.pstyle("ghost").value==="yes";if(k){var F=e.pstyle("ghost-offset-x").pfValue,G=e.pstyle("ghost-offset-y").pfValue,B=e.pstyle("ghost-opacity").value,q=v*B;t.translate(F,G),w(q),D(q),t.translate(-F,-G)}else T();M(),w(),D(),A(),_(),r&&t.translate(u.x1,u.y1)}};var dN=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,f=2*u,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=f,s.edgeType==="self"&&!o?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],a),i.drawEdgePath(n,r,s.allpts,"solid")}}}};ri.drawEdgeOverlay=dN("overlay");ri.drawEdgeUnderlay=dN("underlay");ri.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,o,s=!1,u=this.usePaths(),f=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var h=r.join("$"),g=a.pathCacheKey&&a.pathCacheKey===h;g?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=h,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(f),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var y=2;y+3<r.length;y+=4)e.quadraticCurveTo(r[y],r[y+1],r[y+2],r[y+3]);break;case"straight":case"haystack":for(var p=2;p+1<r.length;p+=2)e.lineTo(r[p],r[p+1]);break;case"segments":if(a.isRound){var C=Pn(a.roundCorners),E;try{for(C.s();!(E=C.n()).done;){var v=E.value;eN(e,v)}}catch(w){C.e(w)}finally{C.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var x=2;x+1<r.length;x+=2)e.lineTo(r[x],r[x+1]);break}e=i,u?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};ri.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(r[a]-u[0],r[a+1]-u[1]),e.lineTo(r[a]+u[0],r[a+1]+u[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};ri.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};ri.drawArrowhead=function(t,e,r,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var s=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var f=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,h=e.pstyle("width").pfValue,g=e.pstyle(r+"-arrow-width"),y=g.value==="match-line"?h:g.pfValue;g.units==="%"&&(y*=h);var p=e.pstyle("opacity").value;o===void 0&&(o=p);var C=t.globalCompositeOperation;(o!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,f,h,u,y,n,a,i),t.globalCompositeOperation=C);var E=e.pstyle(r+"-arrow-color").value;s.colorFillStyle(t,E[0],E[1],E[2],o),s.colorStrokeStyle(t,E[0],E[1],E[2],o),s.drawArrowShape(e,t,c,h,u,y,n,a,i)}}};ri.drawArrowShape=function(t,e,r,n,a,i,o,s,u){var f=this,c=this.usePaths()&&a!=="triangle-cross",h=!1,g,y=e,p={x:o,y:s},C=t.pstyle("arrow-scale").value,E=this.getArrowWidth(n,C),v=f.arrowShapes[a];if(c){var x=f.arrowPathCache=f.arrowPathCache||[],w=bo(a),T=x[w];T!=null?(g=e=T,h=!0):(g=e=new Path2D,x[w]=g)}h||(e.beginPath&&e.beginPath(),c?v.draw(e,1,0,{x:0,y:0},1):v.draw(e,E,u,p,n),e.closePath&&e.closePath()),e=y,c&&(e.translate(o,s),e.rotate(u),e.scale(E,E)),(r==="filled"||r==="both")&&(c?e.fill(g):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(c?E:1),e.lineJoin="miter",c?e.stroke(g):e.stroke()),c&&(e.scale(1/E,1/E),e.rotate(-u),e.translate(-o,-s))};var G1={};G1.safeDrawImage=function(t,e,r,n,a,i,o,s,u,f){if(!(a<=0||i<=0||u<=0||f<=0))try{t.drawImage(e,r,n,a,i,o,s,u,f)}catch(c){Xt(c)}};G1.drawInscribedImage=function(t,e,r,n,a){var i=this,o=r.position(),s=o.x,u=o.y,f=r.cy().style(),c=f.getIndexedStyle.bind(f),h=c(r,"background-fit","value",n),g=c(r,"background-repeat","value",n),y=r.width(),p=r.height(),C=r.padding()*2,E=y+(c(r,"background-width-relative-to","value",n)==="inner"?0:C),v=p+(c(r,"background-height-relative-to","value",n)==="inner"?0:C),x=r._private.rscratch,w=c(r,"background-clip","value",n),T=w==="node",A=c(r,"background-image-opacity","value",n)*a,M=c(r,"background-image-smoothing","value",n),D=r.pstyle("corner-radius").value;D!=="auto"&&(D=r.pstyle("corner-radius").pfValue);var _=e.width||e.cachedW,k=e.height||e.cachedH;(_==null||k==null)&&(document.body.appendChild(e),_=e.cachedW=e.width||e.offsetWidth,k=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var F=_,G=k;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?F=c(r,"background-width","pfValue",n)*E:F=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?G=c(r,"background-height","pfValue",n)*v:G=c(r,"background-height","pfValue",n)),!(F===0||G===0)){if(h==="contain"){var B=Math.min(E/F,v/G);F*=B,G*=B}else if(h==="cover"){var B=Math.max(E/F,v/G);F*=B,G*=B}var q=s-E/2,R=c(r,"background-position-x","units",n),P=c(r,"background-position-x","pfValue",n);R==="%"?q+=(E-F)*P:q+=P;var N=c(r,"background-offset-x","units",n),I=c(r,"background-offset-x","pfValue",n);N==="%"?q+=(E-F)*I:q+=I;var z=u-v/2,ae=c(r,"background-position-y","units",n),re=c(r,"background-position-y","pfValue",n);ae==="%"?z+=(v-G)*re:z+=re;var K=c(r,"background-offset-y","units",n),V=c(r,"background-offset-y","pfValue",n);K==="%"?z+=(v-G)*V:z+=V,x.pathCache&&(q-=s,z-=u,s=0,u=0);var Z=t.globalAlpha;t.globalAlpha=A;var U=i.getImgSmoothing(t),W=!1;if(M==="no"&&U?(i.setImgSmoothing(t,!1),W=!0):M==="yes"&&!U&&(i.setImgSmoothing(t,!0),W=!0),g==="no-repeat")T&&(t.save(),x.pathCache?t.clip(x.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,s,u,E,v,D,x),t.clip())),i.safeDrawImage(t,e,0,0,_,k,q,z,F,G),T&&t.restore();else{var X=t.createPattern(e,g);t.fillStyle=X,i.nodeShapes[i.getNodeShape(r)].draw(t,s,u,E,v,D,x),t.translate(q,z),t.fill(),t.translate(-q,-z)}t.globalAlpha=Z,W&&i.setImgSmoothing(t,U)}};var So={};So.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(S1(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,o=t.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};So.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var f=e.element()._private.rscratch.badLine,c=e.pstyle("label"),h=e.pstyle("source-label"),g=e.pstyle("target-label");if(f||(!c||!c.value)&&(!h||!h.value)&&(!g||!g.value))return;t.textAlign="center",t.textBaseline="bottom"}var y=!r,p;r&&(p=r,t.translate(-p.x1,-p.y1)),a==null?(o.drawText(t,e,null,y,i),e.isEdge()&&(o.drawText(t,e,"source",y,i),o.drawText(t,e,"target",y,i))):o.drawText(t,e,a,y,i),r&&t.translate(p.x1,p.y1)};So.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};So.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,f=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+o+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,f[0],f[1],f[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function Ov(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+a-i),t.quadraticCurveTo(e+n,r+a,e+n-i,r+a),t.lineTo(e+i,r+a),t.quadraticCurveTo(e,r+a,e,r+a-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),o?t.stroke():t.fill()}So.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",o=t.pstyle(i+"text-rotation");if(o.strValue==="autorotate"){var s=Mn(a,"labelAngle",e);r=t.isEdge()?s:0}else o.strValue==="none"?r=0:r=o.pfValue;return r};So.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Mn(o,"labelX",r),f=Mn(o,"labelY",r),c,h,g=this.getLabelText(e,r);if(g!=null&&g!==""&&!isNaN(u)&&!isNaN(f)){this.setupTextStyle(t,e,a);var y=r?r+"-":"",p=Mn(o,"labelWidth",r),C=Mn(o,"labelHeight",r),E=e.pstyle(y+"text-margin-x").pfValue,v=e.pstyle(y+"text-margin-y").pfValue,x=e.isEdge(),w=e.pstyle("text-halign").value,T=e.pstyle("text-valign").value;x&&(w="center",T="center"),u+=E,f+=v;var A;switch(n?A=this.getTextAngle(e,r):A=0,A!==0&&(c=u,h=f,t.translate(c,h),t.rotate(A),u=0,f=0),T){case"top":break;case"center":f+=C/2;break;case"bottom":f+=C;break}var M=e.pstyle("text-background-opacity").value,D=e.pstyle("text-border-opacity").value,_=e.pstyle("text-border-width").pfValue,k=e.pstyle("text-background-padding").pfValue,F=e.pstyle("text-background-shape").strValue,G=F.indexOf("round")===0,B=2;if(M>0||_>0&&D>0){var q=u-k;switch(w){case"left":q-=p;break;case"center":q-=p/2;break}var R=f-C-k,P=p+2*k,N=C+2*k;if(M>0){var I=t.fillStyle,z=e.pstyle("text-background-color").value;t.fillStyle="rgba("+z[0]+","+z[1]+","+z[2]+","+M*s+")",G?Ov(t,q,R,P,N,B):t.fillRect(q,R,P,N),t.fillStyle=I}if(_>0&&D>0){var ae=t.strokeStyle,re=t.lineWidth,K=e.pstyle("text-border-color").value,V=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+K[0]+","+K[1]+","+K[2]+","+D*s+")",t.lineWidth=_,t.setLineDash)switch(V){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=_/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(G?Ov(t,q,R,P,N,B,"stroke"):t.strokeRect(q,R,P,N),V==="double"){var Z=_/2;G?Ov(t,q+Z,R+Z,P-Z*2,N-Z*2,B,"stroke"):t.strokeRect(q+Z,R+Z,P-Z*2,N-Z*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=re,t.strokeStyle=ae}}var U=2*e.pstyle("text-outline-width").pfValue;if(U>0&&(t.lineWidth=U),e.pstyle("text-wrap").value==="wrap"){var W=Mn(o,"labelWrapCachedLines",r),X=Mn(o,"labelLineHeight",r),ee=p/2,oe=this.getLabelJustification(e);switch(oe==="auto"||(w==="left"?oe==="left"?u+=-p:oe==="center"&&(u+=-ee):w==="center"?oe==="left"?u+=-ee:oe==="right"&&(u+=ee):w==="right"&&(oe==="center"?u+=ee:oe==="right"&&(u+=p))),T){case"top":f-=(W.length-1)*X;break;case"center":case"bottom":f-=(W.length-1)*X;break}for(var te=0;te<W.length;te++)U>0&&t.strokeText(W[te],u,f),t.fillText(W[te],u,f),f+=X}else U>0&&t.strokeText(g,u,f),t.fillText(g,u,f);A!==0&&(t.rotate(-A),t.translate(-c,-h))}}};var zi={};zi.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,u,f=e._private,c=f.rscratch,h=e.position();if(!(!it(h.x)||!it(h.y))&&!(i&&!e.visible())){var g=i?e.effectiveOpacity():1,y=o.usePaths(),p,C=!1,E=e.padding();s=e.width()+2*E,u=e.height()+2*E;var v;r&&(v=r,t.translate(-v.x1,-v.y1));for(var x=e.pstyle("background-image"),w=x.value,T=new Array(w.length),A=new Array(w.length),M=0,D=0;D<w.length;D++){var _=w[D],k=T[D]=_!=null&&_!=="none";if(k){var F=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",D);M++,A[D]=o.getCachedImage(_,F,function(){f.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var G=e.pstyle("background-blacken").value,B=e.pstyle("border-width").pfValue,q=e.pstyle("background-opacity").value*g,R=e.pstyle("border-color").value,P=e.pstyle("border-style").value,N=e.pstyle("border-join").value,I=e.pstyle("border-cap").value,z=e.pstyle("border-position").value,ae=e.pstyle("border-dash-pattern").pfValue,re=e.pstyle("border-dash-offset").pfValue,K=e.pstyle("border-opacity").value*g,V=e.pstyle("outline-width").pfValue,Z=e.pstyle("outline-color").value,U=e.pstyle("outline-style").value,W=e.pstyle("outline-opacity").value*g,X=e.pstyle("outline-offset").value,ee=e.pstyle("corner-radius").value;ee!=="auto"&&(ee=e.pstyle("corner-radius").pfValue);var oe=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q;o.eleFillStyle(t,e,We)},te=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K;o.colorStrokeStyle(t,R[0],R[1],R[2],We)},ie=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W;o.colorStrokeStyle(t,Z[0],Z[1],Z[2],We)},se=function(We,he,j,ve){var me=o.nodePathCache=o.nodePathCache||[],we=JP(j==="polygon"?j+","+ve.join(","):j,""+he,""+We,""+ee),xe=me[we],qe,Ce=!1;return xe!=null?(qe=xe,Ce=!0,c.pathCache=qe):(qe=new Path2D,me[we]=c.pathCache=qe),{path:qe,cacheHit:Ce}},$=e.pstyle("shape").strValue,ne=e.pstyle("shape-polygon-points").pfValue;if(y){t.translate(h.x,h.y);var le=se(s,u,$,ne);p=le.path,C=le.cacheHit}var Se=function(){if(!C){var We=h;y&&(We={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(p||t,We.x,We.y,s,u,ee,c)}y?t.fill(p):t.fill()},De=function(){for(var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,j=f.backgrounding,ve=0,me=0;me<A.length;me++){var we=e.cy().style().getIndexedStyle(e,"background-image-containment","value",me);if(he&&we==="over"||!he&&we==="inside"){ve++;continue}T[me]&&A[me].complete&&!A[me].error&&(ve++,o.drawInscribedImage(t,A[me],e,me,We))}f.backgrounding=ve!==M,j!==f.backgrounding&&e.updateStyle(!1)},be=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;o.hasPie(e)&&(o.drawPie(t,e,he),We&&(y||o.nodeShapes[o.getNodeShape(e)].draw(t,h.x,h.y,s,u,ee,c)))},Te=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;o.hasStripe(e)&&(t.save(),y?t.clip(c.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(t,h.x,h.y,s,u,ee,c),t.clip()),o.drawStripe(t,e,he),t.restore(),We&&(y||o.nodeShapes[o.getNodeShape(e)].draw(t,h.x,h.y,s,u,ee,c)))},pe=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,he=(G>0?G:-G)*We,j=G>0?0:255;G!==0&&(o.colorFillStyle(t,j,j,j,he),y?t.fill(p):t.fill())},de=function(){if(B>0){if(t.lineWidth=B,t.lineCap=I,t.lineJoin=N,t.setLineDash)switch(P){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(ae),t.lineDashOffset=re;break;case"solid":case"double":t.setLineDash([]);break}if(z!=="center"){if(t.save(),t.lineWidth*=2,z==="inside")y?t.clip(p):t.clip();else{var We=new Path2D;We.rect(-s/2-B,-u/2-B,s+2*B,u+2*B),We.addPath(p),t.clip(We,"evenodd")}y?t.stroke(p):t.stroke(),t.restore()}else y?t.stroke(p):t.stroke();if(P==="double"){t.lineWidth=B/3;var he=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",y?t.stroke(p):t.stroke(),t.globalCompositeOperation=he}t.setLineDash&&t.setLineDash([])}},ye=function(){if(V>0){if(t.lineWidth=V,t.lineCap="butt",t.setLineDash)switch(U){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var We=h;y&&(We={x:0,y:0});var he=o.getNodeShape(e),j=B;z==="inside"&&(j=0),z==="outside"&&(j*=2);var ve=(s+j+(V+X))/s,me=(u+j+(V+X))/u,we=s*ve,xe=u*me,qe=o.nodeShapes[he].points,Ce;if(y){var Oe=se(we,xe,he,qe);Ce=Oe.path}if(he==="ellipse")o.drawEllipsePath(Ce||t,We.x,We.y,we,xe);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(he)){var Ie=0,He=0,Ue=0;he==="round-diamond"?Ie=(j+X+V)*1.4:he==="round-heptagon"?(Ie=(j+X+V)*1.075,Ue=-(j/2+X+V)/35):he==="round-hexagon"?Ie=(j+X+V)*1.12:he==="round-pentagon"?(Ie=(j+X+V)*1.13,Ue=-(j/2+X+V)/15):he==="round-tag"?(Ie=(j+X+V)*1.12,He=(j/2+V+X)*.07):he==="round-triangle"&&(Ie=(j+X+V)*(Math.PI/2),Ue=-(j+X/2+V)/Math.PI),Ie!==0&&(ve=(s+Ie)/s,we=s*ve,["round-hexagon","round-tag"].includes(he)||(me=(u+Ie)/u,xe=u*me)),ee=ee==="auto"?lk(we,xe):ee;for(var je=we/2,et=xe/2,Ge=ee+(j+V+X)/2,$e=new Array(qe.length/2),vt=new Array(qe.length/2),nt=0;nt<qe.length/2;nt++)$e[nt]={x:We.x+He+je*qe[nt*2],y:We.y+Ue+et*qe[nt*2+1]};var st,Tt,dt,gt,_t=$e.length;for(Tt=$e[_t-1],st=0;st<_t;st++)dt=$e[st%_t],gt=$e[(st+1)%_t],vt[st]=q1(Tt,dt,gt,Ge),Tt=dt,dt=gt;o.drawRoundPolygonPath(Ce||t,We.x+He,We.y+Ue,s*ve,u*me,qe,vt)}else if(["roundrectangle","round-rectangle"].includes(he))ee=ee==="auto"?Ri(we,xe):ee,o.drawRoundRectanglePath(Ce||t,We.x,We.y,we,xe,ee+(j+V+X)/2);else if(["cutrectangle","cut-rectangle"].includes(he))ee=ee==="auto"?D1():ee,o.drawCutRectanglePath(Ce||t,We.x,We.y,we,xe,null,ee+(j+V+X)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(he))ee=ee==="auto"?Ri(we,xe):ee,o.drawBottomRoundRectanglePath(Ce||t,We.x,We.y,we,xe,ee+(j+V+X)/2);else if(he==="barrel")o.drawBarrelPath(Ce||t,We.x,We.y,we,xe);else if(he.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(he)){var Mt=(j+V+X)/s;qe=Qf(Jf(qe,Mt)),o.drawPolygonPath(Ce||t,We.x,We.y,s,u,qe)}else{var Zt=(j+V+X)/s;qe=Qf(Jf(qe,-Zt)),o.drawPolygonPath(Ce||t,We.x,We.y,s,u,qe)}if(y?t.stroke(Ce):t.stroke(),U==="double"){t.lineWidth=j/3;var Lt=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",y?t.stroke(Ce):t.stroke(),t.globalCompositeOperation=Lt}t.setLineDash&&t.setLineDash([])}},Ee=function(){a&&o.drawNodeOverlay(t,e,h,s,u)},ue=function(){a&&o.drawNodeUnderlay(t,e,h,s,u)},Ae=function(){o.drawElementText(t,e,null,n)},Pe=e.pstyle("ghost").value==="yes";if(Pe){var Fe=e.pstyle("ghost-offset-x").pfValue,Ye=e.pstyle("ghost-offset-y").pfValue,Ve=e.pstyle("ghost-opacity").value,Qe=Ve*g;t.translate(Fe,Ye),ie(),ye(),oe(Ve*q),Se(),De(Qe,!0),te(Ve*K),de(),be(G!==0||B!==0),Te(G!==0||B!==0),De(Qe,!1),pe(Qe),t.translate(-Fe,-Ye)}y&&t.translate(-h.x,-h.y),ue(),y&&t.translate(h.x,h.y),ie(),ye(),oe(),Se(),De(g,!0),te(),de(),be(G!==0||B!==0),Te(G!==0||B!==0),De(g,!1),pe(),y&&t.translate(-h.x,-h.y),Ae(),Ee(),r&&t.translate(v.x1,v.y1)}};var hN=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,o){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,f=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,h=n.pstyle("".concat(e,"-shape")).value,g=n.pstyle("".concat(e,"-corner-radius")).value;if(f>0){if(a=a||n.position(),i==null||o==null){var y=n.padding();i=n.width()+2*y,o=n.height()+2*y}s.colorFillStyle(r,c[0],c[1],c[2],f),s.nodeShapes[h].draw(r,a.x,a.y,i+u*2,o+u*2,g),r.fill()}}}};zi.drawNodeOverlay=hN("overlay");zi.drawNodeUnderlay=hN("underlay");zi.hasPie=function(t){return t=t[0],t._private.hasPie};zi.hasStripe=function(t){return t=t[0],t._private.hasStripe};zi.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,u=n.x,f=n.y,c=e.width(),h=e.height(),g=Math.min(c,h)/2,y,p=0,C=this.usePaths();if(C&&(u=0,f=0),i.units==="%"?g=g*i.pfValue:i.pfValue!==void 0&&(g=i.pfValue/2),o.units==="%"?y=g*o.pfValue:o.pfValue!==void 0&&(y=o.pfValue/2),!(y>=g))for(var E=1;E<=a.pieBackgroundN;E++){var v=e.pstyle("pie-"+E+"-background-size").value,x=e.pstyle("pie-"+E+"-background-color").value,w=e.pstyle("pie-"+E+"-background-opacity").value*r,T=v/100;T+p>1&&(T=1-p);var A=1.5*Math.PI+2*Math.PI*p;A+=s;var M=2*Math.PI*T,D=A+M;v===0||p>=1||p+T>1||(y===0?(t.beginPath(),t.moveTo(u,f),t.arc(u,f,g,A,D),t.closePath()):(t.beginPath(),t.arc(u,f,g,A,D),t.arc(u,f,y,D,A,!0),t.closePath()),this.colorFillStyle(t,x[0],x[1],x[2],w),t.fill(),p+=T)}};zi.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,o=n.y,s=e.width(),u=e.height(),f=0,c=this.usePaths();t.save();var h=e.pstyle("stripe-direction").value,g=e.pstyle("stripe-size");switch(h){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var y=s,p=u;g.units==="%"?(y=y*g.pfValue,p=p*g.pfValue):g.pfValue!==void 0&&(y=g.pfValue,p=g.pfValue),c&&(i=0,o=0),o-=y/2,i-=p/2;for(var C=1;C<=a.stripeBackgroundN;C++){var E=e.pstyle("stripe-"+C+"-background-size").value,v=e.pstyle("stripe-"+C+"-background-color").value,x=e.pstyle("stripe-"+C+"-background-opacity").value*r,w=E/100;w+f>1&&(w=1-f),!(E===0||f>=1||f+w>1)&&(t.beginPath(),t.rect(i,o+p*f,y,p*w),t.closePath(),this.colorFillStyle(t,v[0],v[1],v[2],x),t.fill(),f+=w)}t.restore()};var An={},JU=100;An.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};An.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};An.createGradientStyleFor=function(t,e,r,n,a){var i,o=this.usePaths(),s=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var f=r.sourceEndpoint(),c=r.targetEndpoint(),h=r.midpoint(),g=wo(f,h),y=wo(c,h);i=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(g,y))}else{var p=o?{x:0,y:0}:r.position(),C=r.paddedWidth(),E=r.paddedHeight();i=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(C,E))}else if(r.isEdge()){var v=r.sourceEndpoint(),x=r.targetEndpoint();i=t.createLinearGradient(v.x,v.y,x.x,x.y)}else{var w=o?{x:0,y:0}:r.position(),T=r.paddedWidth(),A=r.paddedHeight(),M=T/2,D=A/2,_=r.pstyle("background-gradient-direction").value;switch(_){case"to-bottom":i=t.createLinearGradient(w.x,w.y-D,w.x,w.y+D);break;case"to-top":i=t.createLinearGradient(w.x,w.y+D,w.x,w.y-D);break;case"to-left":i=t.createLinearGradient(w.x+M,w.y,w.x-M,w.y);break;case"to-right":i=t.createLinearGradient(w.x-M,w.y,w.x+M,w.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(w.x-M,w.y-D,w.x+M,w.y+D);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(w.x-M,w.y+D,w.x+M,w.y-D);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(w.x+M,w.y-D,w.x-M,w.y+D);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(w.x+M,w.y+D,w.x-M,w.y-D);break}}if(!i)return null;for(var k=u.length===s.length,F=s.length,G=0;G<F;G++)i.addColorStop(k?u[G]:G/(F-1),"rgba("+s[G][0]+","+s[G][1]+","+s[G][2]+","+a+")");return i};An.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};An.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};An.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};An.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};An.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};An.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};An.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var u=a*o,f=i*o,c;if(!(u===e.canvasWidth&&f===e.canvasHeight)){e.fontCaches=null;var h=r.canvasContainer;h.style.width=a+"px",h.style.height=i+"px";for(var g=0;g<e.CANVAS_LAYERS;g++)c=r.canvases[g],c.width=u,c.height=f,c.style.width=a+"px",c.style.height=i+"px";for(var g=0;g<e.BUFFER_COUNT;g++)c=r.bufferCanvases[g],c.width=u,c.height=f,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,o<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=f*e.textureMult),e.canvasWidth=u,e.canvasHeight=f,e.pixelRatio=o}};An.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};An.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};An.render=function(t){var e=this;t=t||nk();var r=e.cy,n=t.forcedContext,a=t.drawAllLayers,i=t.drawOnlyNodeLayer,o=t.forcedZoom,s=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,f=e.data,c=f.canvasNeedsRedraw,h=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),g=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,y=e.motionBlurPxRatio,p=r.hasCompoundNodes(),C=e.hoverData.draggingEles,E=!!(e.hoverData.selecting||e.touchData.selecting);g=g&&!n&&e.motionBlurEnabled&&!E;var v=g;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),g&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(v=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!h&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var x=r.style(),w=r.zoom(),T=o!==void 0?o:w,A=r.pan(),M={x:A.x,y:A.y},D={zoom:w,pan:{x:A.x,y:A.y}},_=e.prevViewport,k=_===void 0||D.zoom!==_.zoom||D.pan.x!==_.pan.x||D.pan.y!==_.pan.y;!k&&!(C&&!p)&&(e.motionBlurPxRatio=1),s&&(M=s),T*=u,M.x*=u,M.y*=u;var F=e.getCachedZSortedEles();function G(te,ie,se,$,ne){var le=te.globalCompositeOperation;te.globalCompositeOperation="destination-out",e.colorFillStyle(te,255,255,255,e.motionBlurTransparency),te.fillRect(ie,se,$,ne),te.globalCompositeOperation=le}function B(te,ie){var se,$,ne,le;!e.clearingMotionBlur&&(te===f.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||te===f.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(se={x:A.x*y,y:A.y*y},$=w*y,ne=e.canvasWidth*y,le=e.canvasHeight*y):(se=M,$=T,ne=e.canvasWidth,le=e.canvasHeight),te.setTransform(1,0,0,1,0,0),ie==="motionBlur"?G(te,0,0,ne,le):!n&&(ie===void 0||ie)&&te.clearRect(0,0,ne,le),a||(te.translate(se.x,se.y),te.scale($,$)),s&&te.translate(s.x,s.y),o&&te.scale(o,o)}if(h||(e.textureDrawLastFrame=!1),h){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var q=e.data.bufferContexts[e.TEXTURE_BUFFER];q.setTransform(1,0,0,1,0,0),q.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:q,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var D=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};D.mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var R=f.contexts[e.NODE],P=e.textureCache.texture,D=e.textureCache.viewport;R.setTransform(1,0,0,1,0,0),g?G(R,0,0,D.width,D.height):R.clearRect(0,0,D.width,D.height);var N=x.core("outside-texture-bg-color").value,I=x.core("outside-texture-bg-opacity").value;e.colorFillStyle(R,N[0],N[1],N[2],I),R.fillRect(0,0,D.width,D.height);var w=r.zoom();B(R,!1),R.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/u,D.height/D.zoom/u),R.drawImage(P,D.mpan.x,D.mpan.y,D.width/D.zoom/u,D.height/D.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var z=r.extent(),ae=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),re=e.hideEdgesOnViewport&&ae,K=[];if(K[e.NODE]=!c[e.NODE]&&g&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,K[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),K[e.DRAG]=!c[e.DRAG]&&g&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,K[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||a||i||K[e.NODE]){var V=g&&!K[e.NODE]&&y!==1,R=n||(V?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:f.contexts[e.NODE]),Z=g&&!V?"motionBlur":void 0;B(R,Z),re?e.drawCachedNodes(R,F.nondrag,u,z):e.drawLayeredElements(R,F.nondrag,u,z),e.debug&&e.drawDebugPoints(R,F.nondrag),!a&&!g&&(c[e.NODE]=!1)}if(!i&&(c[e.DRAG]||a||K[e.DRAG])){var V=g&&!K[e.DRAG]&&y!==1,R=n||(V?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:f.contexts[e.DRAG]);B(R,g&&!V?"motionBlur":void 0),re?e.drawCachedNodes(R,F.drag,u,z):e.drawCachedElements(R,F.drag,u,z),e.debug&&e.drawDebugPoints(R,F.drag),!a&&!g&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,B),g&&y!==1){var U=f.contexts[e.NODE],W=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],X=f.contexts[e.DRAG],ee=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],oe=function(ie,se,$){ie.setTransform(1,0,0,1,0,0),$||!v?ie.clearRect(0,0,e.canvasWidth,e.canvasHeight):G(ie,0,0,e.canvasWidth,e.canvasHeight);var ne=y;ie.drawImage(se,0,0,e.canvasWidth*ne,e.canvasHeight*ne,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||K[e.NODE])&&(oe(U,W,K[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||K[e.DRAG])&&(oe(X,ee,K[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=D,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),g&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!h,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},JU)),n||r.emit("render")};var ml;An.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,a=r.data,i=n.style(),o=t.drawOnlyNodeLayer,s=t.drawAllLayers,u=a.canvasNeedsRedraw,f=t.forcedContext;if(r.showFps||!o&&u[r.SELECT_BOX]&&!s){var c=f||a.contexts[r.SELECT_BOX];if(e(c),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var h=r.cy.zoom(),g=i.core("selection-box-border-width").value/h;c.lineWidth=g,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),g>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(a.bgActivePosistion&&!r.hoverData.selecting){var h=r.cy.zoom(),y=a.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(y.x,y.y,i.core("active-bg-size").pfValue/h,0,2*Math.PI),c.fill()}var p=r.lastRedrawTime;if(r.showFps&&p){p=Math.round(p);var C=Math.round(1e3/p),E="1 frame = "+p+" ms = "+C+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!ml){var v=c.measureText(E);ml=v.actualBoundingBoxAscent}c.fillText(E,0,ml);var x=60;c.strokeRect(0,ml+10,250,20),c.fillRect(0,ml+10,250*Math.min(C/x,1),20)}s||(u[r.SELECT_BOX]=!1)}};function uS(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function eV(t,e,r){var n=uS(t,t.VERTEX_SHADER,e),a=uS(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function tV(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function H1(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function rV(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function nV(t,e,r,n,a){var i=n*r+e.x,o=a*r+e.y;return o=Math.round(t.canvasHeight-o),[i,o]}function aV(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function iV(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function io(t,e,r){var n=t[0]/255,a=t[1]/255,i=t[2]/255,o=e,s=r||new Array(4);return s[0]=n*o,s[1]=a*o,s[2]=i*o,s[3]=o,s}function is(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function oV(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function sV(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function vN(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function pN(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function lV(t,e,r,n,a,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*n,a);case t.INT:return new Int32Array(r.buffer,i*n,a)}}function uV(t,e,r,n){var a=vN(t,e),i=Fr(a,2),o=i[0],s=i[1],u=pN(t,s,n),f=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),s===t.FLOAT?t.vertexAttribPointer(r,o,s,!1,0,0):s===t.INT&&t.vertexAttribIPointer(r,o,s,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),f}function wa(t,e,r,n){var a=vN(t,r),i=Fr(a,3),o=i[0],s=i[1],u=i[2],f=pN(t,s,e*o),c=o*u,h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),s===t.FLOAT?t.vertexAttribPointer(n,o,s,!1,c,0):s===t.INT&&t.vertexAttribIPointer(n,o,s,c,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var g=new Array(e),y=0;y<e;y++)g[y]=lV(t,s,f,c,o,y);return h.dataArray=f,h.stride=c,h.size=o,h.getView=function(p){return g[p]},h.setPoint=function(p,C,E){var v=g[p];v[0]=C,v[1]=E},h.bufferSubData=function(p){t.bindBuffer(t.ARRAY_BUFFER,h),p?t.bufferSubData(t.ARRAY_BUFFER,0,f,0,p*o):t.bufferSubData(t.ARRAY_BUFFER,0,f)},h}function fV(t,e,r){for(var n=9,a=new Float32Array(e*n),i=new Array(e),o=0;o<e;o++){var s=o*n*4;i[o]=new Float32Array(a.buffer,s,n)}var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,a.byteLength,t.DYNAMIC_DRAW);for(var f=0;f<3;f++){var c=r+f;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,3*12,f*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),u.getMatrixView=function(h){return i[h]},u.setData=function(h,g){i[g].set(h,0)},u.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferSubData(t.ARRAY_BUFFER,0,a)},u}function cV(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var fS=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Iv(){var t=new fS(9);return fS!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function cS(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function dV(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],g=r[0],y=r[1],p=r[2],C=r[3],E=r[4],v=r[5],x=r[6],w=r[7],T=r[8];return t[0]=g*n+y*o+p*f,t[1]=g*a+y*s+p*c,t[2]=g*i+y*u+p*h,t[3]=C*n+E*o+v*f,t[4]=C*a+E*s+v*c,t[5]=C*i+E*u+v*h,t[6]=x*n+w*o+T*f,t[7]=x*a+w*s+T*c,t[8]=x*i+w*u+T*h,t}function Rf(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],g=r[0],y=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=g*n+y*o+f,t[7]=g*a+y*s+c,t[8]=g*i+y*u+h,t}function dS(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],g=Math.sin(r),y=Math.cos(r);return t[0]=y*n+g*o,t[1]=y*a+g*s,t[2]=y*i+g*u,t[3]=y*o-g*n,t[4]=y*s-g*a,t[5]=y*u-g*i,t[6]=f,t[7]=c,t[8]=h,t}function Kb(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function hV(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var vV=function(){function t(e,r,n,a){Fi(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,r,r),this.scratch=a(e,r,this.texHeight,"scratch")}return Bi(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,a=r.h,i=this.texHeight,o=this.texSize,s=i/a,u=n*s,f=a*s;return u>o&&(s=o/n,u=n*s,f=a*s),{scale:s,texW:u,texH:f}}},{key:"draw",value:function(r,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,s=this.texRows,u=this.texHeight,f=this.getScale(n),c=f.scale,h=f.texW,g=f.texH,y=function(w,T){if(a&&T){var A=T.context,M=w.x,D=w.row,_=M,k=u*D;A.save(),A.translate(_,k),A.scale(c,c),a(A,n),A.restore()}},p=[null,null],C=function(){y(i.freePointer,i.canvas),p[0]={x:i.freePointer.x,y:i.freePointer.row*u,w:h,h:g},p[1]={x:i.freePointer.x+h,y:i.freePointer.row*u,w:0,h:g},i.freePointer.x+=h,i.freePointer.x==o&&(i.freePointer.x=0,i.freePointer.row++)},E=function(){var w=i.scratch,T=i.canvas;w.clear(),y({x:0,row:0},w);var A=o-i.freePointer.x,M=h-A,D=u;{var _=i.freePointer.x,k=i.freePointer.row*u,F=A;T.context.drawImage(w,0,0,F,D,_,k,F,D),p[0]={x:_,y:k,w:F,h:g}}{var G=A,B=(i.freePointer.row+1)*u,q=M;T&&T.context.drawImage(w,G,0,q,D,0,B,q,D),p[1]={x:0,y:B,w:q,h:g}}i.freePointer.x=M,i.freePointer.row++},v=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+h<=o)C();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===o?(v(),C()):this.enableWrapping?E():(v(),C())}return this.keyToLocation.set(r,p),this.needsBuffer=!0,p}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(r),o=i.texW;return this.freePointer.x+o>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=sV(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),pV=function(){function t(e,r,n,a){Fi(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Bi(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new vV(r,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,o=Math.floor(n/a);this.scratch=i(r,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,a){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,n,a),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,o=null,s=Pn(this.atlases),u;try{var f=function(){var h=u.value,g=h.getKeys(),y=gV(n,g);if(y.size===0)return a.push(h),g.forEach(function(A){return i.set(A,h)}),1;o||(o=r._createAtlas(),a.push(o));var p=Pn(g),C;try{for(p.s();!(C=p.n()).done;){var E=C.value;if(!y.has(E)){var v=h.getOffsets(E),x=Fr(v,2),w=x[0],T=x[1];o.canFit({w:w.w+T.w,h:w.h})||(o.lock(),o=r._createAtlas(),a.push(o)),h.canvas&&(r._copyTextureToNewAtlas(E,h,o),i.set(E,o))}}}catch(A){p.e(A)}finally{p.f()}h.dispose()};for(s.s();!(u=s.n()).done;)f()}catch(c){s.e(c)}finally{s.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,a){var i=n.getOffsets(r),o=Fr(i,2),s=o[0],u=o[1];if(u.w===0)a.draw(r,s,function(g){g.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var f=this._getScratchCanvas();f.clear(),f.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),f.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,h=s.h;a.draw(r,{w:c,h},function(g){g.drawImage(f,0,0,c,h,0,0,c,h)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function gV(t,e){return t.intersection?t.intersection(e):new Set(Xf(t).filter(function(r){return e.has(r)}))}var yV=function(){function t(e,r){Fi(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Bi(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var a=this.globalOptions,i=a.webglTexSize,o=a.createTextureCanvas,s=n.texRows,u=this._cacheScratchCanvas(o),f=new pV(this.r,i,s,u);this.collections.set(r,f)}},{key:"addRenderType",value:function(r,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),o=Et({type:r,atlasCollection:i},n);this.renderTypes.set(r,o)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,a=-1,i=null;return function(o,s,u,f){return f?((!i||s!=n||u!=a)&&(n=s,a=u,i=r(o,s,u)),i):r(o,s,u)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,o=i===void 0?!1:i,s=a.filterEle,u=s===void 0?function(){return!0}:s,f=a.filterType,c=f===void 0?function(){return!0}:f,h=!1,g=!1,y=Pn(r),p;try{for(y.s();!(p=y.n()).done;){var C=p.value;if(u(C)){var E=Pn(this.renderTypes.values()),v;try{var x=function(){var T=v.value,A=T.type;if(c(A)){var M=n.collections.get(T.collection),D=T.getKey(C),_=Array.isArray(D)?D:[D];if(o)_.forEach(function(B){return M.markKeyForGC(B)}),g=!0;else{var k=T.getID?T.getID(C):C.id(),F=n._key(A,k),G=n.typeAndIdToKey.get(F);G!==void 0&&!iV(_,G)&&(h=!0,n.typeAndIdToKey.delete(F),G.forEach(function(B){return M.markKeyForGC(B)}))}}};for(E.s();!(v=E.n()).done;)x()}catch(w){E.e(w)}finally{E.f()}}}}catch(w){y.e(w)}finally{y.f()}return g&&(this.gc(),h=!1),h}},{key:"gc",value:function(){var r=Pn(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;a.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,a,i){var o=this.renderTypes.get(n),s=this.collections.get(o.collection),u=!1,f=s.draw(i,a,function(g){o.drawClipped?(g.save(),g.beginPath(),g.rect(0,0,a.w,a.h),g.clip(),o.drawElement(g,r,a,!0,!0),g.restore()):o.drawElement(g,r,a,!0,!0),u=!0});if(u){var c=o.getID?o.getID(r):r.id(),h=this._key(n,c);this.typeAndIdToKey.has(h)?this.typeAndIdToKey.get(h).push(i):this.typeAndIdToKey.set(h,[i])}return f}},{key:"getAtlasInfo",value:function(r,n){var a=this,i=this.renderTypes.get(n),o=i.getKey(r),s=Array.isArray(o)?o:[o];return s.map(function(u){var f=i.getBoundingBox(r,u),c=a.getOrCreateAtlas(r,n,f,u),h=c.getOffsets(u),g=Fr(h,2),y=g[0],p=g[1];return{atlas:c,tex:y,tex1:y,tex2:p,bb:f}})}},{key:"getDebugInfo",value:function(){var r=[],n=Pn(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=Fr(a.value,2),o=i[0],s=i[1],u=s.getCounts(),f=u.keyCount,c=u.atlasCount;r.push({type:o,keyCount:f,atlasCount:c})}}catch(h){n.e(h)}finally{n.f()}return r}}])}(),mV=function(){function t(e){Fi(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Bi(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])}(),bV=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,wV=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,xV=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,EV=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Fl={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},oc={IGNORE:1,USE_BB:2},Fv=0,hS=1,vS=2,Bv=3,os=4,pf=5,bl=6,wl=7,CV=function(){function t(e,r,n){Fi(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=tV,this.atlasManager=new yV(e,n),this.batchManager=new mV(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Fl.SCREEN),this.pickingProgram=this._createShaderProgram(Fl.PICKING),this.vao=this._createVAO()}return Bi(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(r,{filterType:function(s){return s===a},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Fv,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(os," || aVertType == ").concat(wl,` 
             || aVertType == `).concat(pf," || aVertType == ").concat(bl,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(hS,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(vS,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(Bv,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(f){return"uniform sampler2D uTexture".concat(f,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(bV,`
      `).concat(wV,`
      `).concat(xV,`
      `).concat(EV,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Fv,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(f){return"if(vAtlasId == ".concat(f,") outColor = texture(uTexture").concat(f,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(Bv,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(os,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(os," || vVertType == ").concat(wl,` 
          || vVertType == `).concat(pf," || vVertType == ").concat(bl,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(os,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(wl,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(wl,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=eV(n,a,o);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.aCornerRadius=n.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=n.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uZoom=n.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,a=this.gl,i=this.program,o=a.createVertexArray();return a.bindVertexArray(o),uV(a,"vec2",i.aPosition,r),this.transformBuffer=fV(a,n,i.aTransform),this.indexBuffer=wa(a,n,"vec4",i.aIndex),this.vertTypeBuffer=wa(a,n,"int",i.aVertType),this.atlasIdBuffer=wa(a,n,"int",i.aAtlasId),this.texBuffer=wa(a,n,"vec4",i.aTex),this.pointAPointBBuffer=wa(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=wa(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=wa(a,n,"vec2",i.aLineWidth),this.colorBuffer=wa(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=wa(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=wa(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),o}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fl.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,a){var i=this.atlasManager,o=this.batchManager,s=i.getRenderTypeOpts(a);if(this._isVisible(r,s)){if(this.renderTarget.picking&&s.getTexPickingMode){var u=s.getTexPickingMode(r);if(u===oc.IGNORE)return;if(u==oc.USE_BB){this.drawPickingRectangle(r,n,a);return}}var f=i.getAtlasInfo(r,a),c=Pn(f),h;try{for(c.s();!(h=c.n()).done;){var g=h.value,y=g.atlas,p=g.tex1,C=g.tex2;o.canAddToCurrentBatch(y)||this.endBatch();for(var E=o.getAtlasIndexForBatch(y),v=0,x=[[p,!0],[C,!1]];v<x.length;v++){var w=Fr(x[v],2),T=w[0],A=w[1];if(T.w!=0){var M=this.instanceCount;this.vertTypeBuffer.getView(M)[0]=Fv;var D=this.indexBuffer.getView(M);is(n,D);var _=this.atlasIdBuffer.getView(M);_[0]=E;var k=this.texBuffer.getView(M);k[0]=T.x,k[1]=T.y,k[2]=T.w,k[3]=T.h;var F=this.transformBuffer.getMatrixView(M);this.setTransformMatrix(r,F,s,g,A),this.instanceCount++,A||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(G){c.e(G)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(r,n,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(a.shapeProps&&a.shapeProps.padding&&(s=r.pstyle(a.shapeProps.padding).pfValue),i){var u=i.bb,f=i.tex1,c=i.tex2,h=f.w/(f.w+c.w);o||(h=1-h);var g=this._getAdjustedBB(u,s,o,h);this._applyTransformMatrix(n,g,a,r)}else{var y=a.getBoundingBox(r),p=this._getAdjustedBB(y,s,!0,1);this._applyTransformMatrix(n,p,a,r)}}},{key:"_applyTransformMatrix",value:function(r,n,a,i){var o,s;cS(r);var u=a.getRotation?a.getRotation(i):0;if(u!==0){var f=a.getRotationPoint(i),c=f.x,h=f.y;Rf(r,r,[c,h]),dS(r,r,u);var g=a.getRotationOffset(i);o=g.x+(n.xOffset||0),s=g.y+(n.yOffset||0)}else o=n.x1,s=n.y1;Rf(r,r,[o,s]),Kb(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,a,i){var o=r.x1,s=r.y1,u=r.w,f=r.h,c=r.yOffset;n&&(o-=n,s-=n,u+=2*n,f+=2*n);var h=0,g=u*i;return a&&i<1?u=g:!a&&i<1&&(h=u-g,o+=h,u=g),{x1:o,y1:s,w:u,h:f,xOffset:h,yOffset:c}}},{key:"drawPickingRectangle",value:function(r,n,a){var i=this.atlasManager.getRenderTypeOpts(a),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=os;var s=this.indexBuffer.getView(o);is(n,s);var u=this.colorBuffer.getView(o);io([0,0,0],1,u);var f=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(r,f,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(r,i)){var o=i.shapeProps,s=this._getVertTypeForShape(r,o.shape);if(s===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,n,a);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=s,s===pf||s===bl){var f=i.getBoundingBox(r),c=this._getCornerRadius(r,o.radius,f),h=this.cornerRadiusBuffer.getView(u);h[0]=c,h[1]=c,h[2]=c,h[3]=c,s===bl&&(h[0]=0,h[2]=0)}var g=this.indexBuffer.getView(u);is(n,g);var y=r.pstyle(o.color).value,p=r.pstyle(o.opacity).value,C=this.colorBuffer.getView(u);io(y,p,C);var E=this.lineWidthBuffer.getView(u);if(E[0]=0,E[1]=0,o.border){var v=r.pstyle("border-width").value;if(v>0){var x=r.pstyle("border-color").value,w=r.pstyle("border-opacity").value,T=this.borderColorBuffer.getView(u);io(x,w,T);var A=r.pstyle("border-position").value;if(A==="inside")E[0]=0,E[1]=-v;else if(A==="outside")E[0]=v,E[1]=0;else{var M=v/2;E[0]=M,E[1]=-M}}}var D=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,D,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var a=r.pstyle(n).value;switch(a){case"rectangle":return os;case"ellipse":return wl;case"roundrectangle":case"round-rectangle":return pf;case"bottom-round-rectangle":return bl;default:return}}},{key:"_getCornerRadius",value:function(r,n,a){var i=a.w,o=a.h;if(r.pstyle(n).value==="auto")return Ri(i,o);var s=r.pstyle(n).pfValue,u=i/2,f=o/2;return Math.min(s,f,u)}},{key:"drawEdgeArrow",value:function(r,n,a){if(r.visible()){var i=r._private.rscratch,o,s,u;if(a==="source"?(o=i.arrowStartX,s=i.arrowStartY,u=i.srcArrowAngle):(o=i.arrowEndX,s=i.arrowEndY,u=i.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(s)||s==null||isNaN(u)||u==null)){var f=r.pstyle(a+"-arrow-shape").value;if(f!=="none"){var c=r.pstyle(a+"-arrow-color").value,h=r.pstyle("opacity").value,g=r.pstyle("line-opacity").value,y=h*g,p=r.pstyle("width").pfValue,C=r.pstyle("arrow-scale").value,E=this.r.getArrowWidth(p,C),v=this.instanceCount,x=this.transformBuffer.getMatrixView(v);cS(x),Rf(x,x,[o,s]),Kb(x,x,[E,E]),dS(x,x,u),this.vertTypeBuffer.getView(v)[0]=Bv;var w=this.indexBuffer.getView(v);is(n,w);var T=this.colorBuffer.getView(v);io(c,y,T),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var a=this._getEdgePoints(r);if(a){var i=r.pstyle("opacity").value,o=r.pstyle("line-opacity").value,s=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,f=i*o;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=hS;var h=this.indexBuffer.getView(c);is(n,h);var g=this.colorBuffer.getView(c);io(u,f,g);var y=this.lineWidthBuffer.getView(c);y[0]=s;var p=this.pointAPointBBuffer.getView(c);p[0]=a[0],p[1]=a[1],p[2]=a[2],p[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var C=0;C<a.length-2;C+=2){var E=this.instanceCount;this.vertTypeBuffer.getView(E)[0]=vS;var v=this.indexBuffer.getView(E);is(n,v);var x=this.colorBuffer.getView(E);io(u,f,x);var w=this.lineWidthBuffer.getView(E);w[0]=s;var T=a[C-2],A=a[C-1],M=a[C],D=a[C+1],_=a[C+2],k=a[C+3],F=a[C+4],G=a[C+5];C==0&&(T=2*M-_+.001,A=2*D-k+.001),C==a.length-4&&(F=2*_-M+.001,G=2*k-D+.001);var B=this.pointAPointBBuffer.getView(E);B[0]=T,B[1]=A,B[2]=M,B[3]=D;var q=this.pointCPointDBuffer.getView(E);q[0]=_,q[1]=k,q[2]=F,q[3]=G,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=r[0],a[1]=r[1];else if(i==n)a[i*2]=r[r.length-2],a[i*2+1]=r[r.length-1];else{var o=i/n;this._setCurvePoint(r,o,a,i*2)}return a}},{key:"_setCurvePoint",value:function(r,n,a,i){if(r.length<=2)a[i]=r[0],a[i+1]=r[1];else{for(var o=Array(r.length-2),s=0;s<o.length;s+=2){var u=(1-n)*r[s]+n*r[s+2],f=(1-n)*r[s+1]+n*r[s+3];o[s]=u,o[s+1]=f}return this._setCurvePoint(o,n,a,i)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(o),r.bindVertexArray(n);var s=Pn(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var f=u.value;f.bufferSubData(i)}}catch(p){s.e(p)}finally{s.f()}for(var c=this.batchManager.getAtlases(),h=0;h<c.length;h++)c[h].bufferIfNeeded(r);for(var g=0;g<c.length;g++)r.activeTexture(r.TEXTURE0+g),r.bindTexture(r.TEXTURE_2D,c[g].texture),r.uniform1i(o.uTextures[g],g);r.uniform1f(o.uZoom,rV(this.r)),r.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var y=io(this.bgColor,1);r.uniform4fv(o.uBGColor,y),r.drawArraysInstanced(r.TRIANGLES,0,a,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(o,s){return o+s.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(o,s){return o+s.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])}(),gN={};gN.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=TV(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=cV(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new CV(r,n,t);var a=function(h){return function(g){return r.getTextAngle(g,h)}},i=function(h){return function(g){var y=g.pstyle(h);return y&&y.value}},o=function(h){return function(g){return g.pstyle("".concat(h,"-opacity")).value>0}},s=function(h){var g=h.pstyle("text-events").strValue==="yes";return g?oc.USE_BB:oc.IGNORE},u=function(h){var g=h.position(),y=g.x,p=g.y,C=h.outerWidth(),E=h.outerHeight();return{w:C,h:E,x1:y-C/2,y1:p-E/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:aV,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:qv(e.getLabelKey,null),getBoundingBox:zv(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:qv(e.getSourceLabelKey,"source"),getBoundingBox:zv(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:qv(e.getTargetLabelKey,"target"),getBoundingBox:zv(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var f=fu(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(c,h){var g=!1;h&&h.length>0&&(g|=r.drawing.invalidate(h)),g&&f()}),SV(r)};function TV(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return $P(r)}function yN(t,e){var r=t._private.rscratch;return Mn(r,"labelWrapCachedLines",e)||[]}var qv=function(e,r){return function(n){var a=e(n),i=yN(n,r);return i.length>1?i.map(function(o,s){return"".concat(a,"_").concat(s)}):a}},zv=function(e,r){return function(n,a){var i=e(n);if(typeof a=="string"){var o=a.indexOf("_");if(o>0){var s=Number(a.substring(o+1)),u=yN(n,r),f=i.h/u.length,c=f*s,h=i.y1+c;return{x1:i.x1,w:i.w,y1:h,h:f,yOffset:c}}}return i}};function SV(t){{var e=t.render;t.render=function(i){i=i||{};var o=t.cy;t.webgl&&(o.zoom()>uN?(AV(t),e.call(t,i)):(LV(t),bN(t,i,Fl.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,o,s,u){return kV(t,i,o)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var a=t.notify;t.notify=function(i,o){a.call(t,i,o),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(o,{type:"node-body"})}}}function AV(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function LV(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function DV(t){var e=t.canvasWidth,r=t.canvasHeight,n=H1(t),a=n.pan,i=n.zoom,o=Iv();Rf(o,o,[a.x,a.y]),Kb(o,o,[i,i]);var s=Iv();hV(s,e,r);var u=Iv();return dV(u,s,o),u}function mN(t,e){var r=t.canvasWidth,n=t.canvasHeight,a=H1(t),i=a.pan,o=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(i.x,i.y),e.scale(o,o)}function _V(t,e){t.drawSelectionRectangle(e,function(r){return mN(t,r)})}function MV(t){var e=t.data.contexts[t.NODE];e.save(),mN(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function RV(t){var e=function(a,i,o){for(var s=a.atlasManager.getAtlasCollection(i),u=t.data.contexts[t.NODE],f=s.atlases,c=0;c<f.length;c++){var h=f[c],g=h.canvas;if(g){var y=g.width,p=g.height,C=y*c,E=g.height*o,v=.4;u.save(),u.scale(v,v),u.drawImage(g,C,E),u.strokeStyle="black",u.rect(C,E,y,p),u.stroke(),u.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function PV(t,e,r,n,a){var i,o,s,u,f=H1(t),c=f.pan,h=f.zoom;{var g=nV(t,c,h,e,r),y=Fr(g,2),p=y[0],C=y[1],E=6;i=p-E/2,o=C-E/2,s=E,u=E}if(s===0||u===0)return[];var v=t.data.contexts[t.WEBGL];v.bindFramebuffer(v.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(v.viewport(0,0,v.canvas.width,v.canvas.height),bN(t,null,Fl.PICKING),t.pickingFrameBuffer.needsDraw=!1);var x=s*u,w=new Uint8Array(x*4);v.readPixels(i,o,s,u,v.RGBA,v.UNSIGNED_BYTE,w),v.bindFramebuffer(v.FRAMEBUFFER,null);for(var T=new Set,A=0;A<x;A++){var M=w.slice(A*4,A*4+4),D=oV(M)-1;D>=0&&T.add(D)}return T}function kV(t,e,r){var n=PV(t,e,r),a=t.getCachedZSortedEles(),i,o,s=Pn(n),u;try{for(s.s();!(u=s.n()).done;){var f=u.value,c=a[f];if(!i&&c.isNode()&&(i=c),!o&&c.isEdge()&&(o=c),i&&o)break}}catch(h){s.e(h)}finally{s.f()}return[i,o].filter(Boolean)}function Gv(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function bN(t,e,r){var n;t.webglDebug&&(n=performance.now());var a=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&_V(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var o=t.data.contexts[t.WEBGL];r.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var s=DV(t),u=t.getCachedZSortedEles();if(i=u.length,a.startFrame(s,r),r.screen){for(var f=0;f<u.nondrag.length;f++)Gv(t,f,u.nondrag[f]);for(var c=0;c<u.drag.length;c++)Gv(t,c,u.drag[c])}else if(r.picking)for(var h=0;h<u.length;h++)Gv(t,h,u[h]);a.endFrame(),r.screen&&t.webglDebugShowAtlases&&(MV(t),RV(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var g=performance.now(),y=!1,p=Math.ceil(g-n),C=a.getDebugInfo(),E=["".concat(i," elements"),"".concat(C.totalInstances," instances"),"".concat(C.batchCount," batches"),"".concat(C.totalAtlases," atlases"),"".concat(C.wrappedCount," wrapped textures"),"".concat(C.simpleCount," simple shapes")].join(", ");if(y)console.log("WebGL (".concat(r.name,") - time ").concat(p,"ms, ").concat(E));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(p,"ms")),console.log("Totals:"),console.log("  ".concat(E)),console.log("Texture Atlases Used:");var v=C.atlasInfo,x=Pn(v),w;try{for(x.s();!(w=x.n()).done;){var T=w.value;console.log("  ".concat(T.type,": ").concat(T.keyCount," keys, ").concat(T.atlasCount," atlases"))}}catch(A){x.e(A)}finally{x.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc())}var Gi={};Gi.drawPolygonPath=function(t,e,r,n,a,i){var o=n/2,s=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*i[0],r+s*i[1]);for(var u=1;u<i.length/2;u++)t.lineTo(e+o*i[u*2],r+s*i[u*2+1]);t.closePath()};Gi.drawRoundPolygonPath=function(t,e,r,n,a,i,o){o.forEach(function(s){return eN(t,s)}),t.closePath()};Gi.drawRoundRectanglePath=function(t,e,r,n,a,i){var o=n/2,s=a/2,u=i==="auto"?Ri(n,a):Math.min(i,s,o);t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.arcTo(e+o,r-s,e+o,r,u),t.arcTo(e+o,r+s,e,r+s,u),t.arcTo(e-o,r+s,e-o,r,u),t.arcTo(e-o,r-s,e,r-s,u),t.lineTo(e,r-s),t.closePath()};Gi.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var o=n/2,s=a/2,u=i==="auto"?Ri(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-s),t.lineTo(e+o,r-s),t.lineTo(e+o,r),t.arcTo(e+o,r+s,e,r+s,u),t.arcTo(e-o,r+s,e-o,r,u),t.lineTo(e-o,r-s),t.lineTo(e,r-s),t.closePath()};Gi.drawCutRectanglePath=function(t,e,r,n,a,i,o){var s=n/2,u=a/2,f=o==="auto"?D1():o;t.beginPath&&t.beginPath(),t.moveTo(e-s+f,r-u),t.lineTo(e+s-f,r-u),t.lineTo(e+s,r-u+f),t.lineTo(e+s,r+u-f),t.lineTo(e+s-f,r+u),t.lineTo(e-s+f,r+u),t.lineTo(e-s,r+u-f),t.lineTo(e-s,r-u+f),t.closePath()};Gi.drawBarrelPath=function(t,e,r,n,a){var i=n/2,o=a/2,s=e-i,u=e+i,f=r-o,c=r+o,h=Ob(n,a),g=h.widthOffset,y=h.heightOffset,p=h.ctrlPtOffsetPct*g;t.beginPath&&t.beginPath(),t.moveTo(s,f+y),t.lineTo(s,c-y),t.quadraticCurveTo(s+p,c,s+g,c),t.lineTo(u-g,c),t.quadraticCurveTo(u-p,c,u,c-y),t.lineTo(u,f+y),t.quadraticCurveTo(u-p,f,u-g,f),t.lineTo(s+g,f),t.quadraticCurveTo(s+p,f,s,f+y),t.closePath()};var pS=Math.sin(0),gS=Math.cos(0),jb={},Zb={},wN=Math.PI/40;for(var ss=0*Math.PI;ss<2*Math.PI;ss+=wN)jb[ss]=Math.sin(ss),Zb[ss]=Math.cos(ss);Gi.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,u=a/2,f=0*Math.PI;f<2*Math.PI;f+=wN)i=e-s*jb[f]*pS+s*Zb[f]*gS,o=r+u*Zb[f]*pS+u*jb[f]*gS,f===0?t.moveTo(i,o):t.lineTo(i,o);t.closePath()};var gu={};gu.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};gu.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],o=t.full?Math.ceil(n.h):a[3],s=it(t.maxWidth)||it(t.maxHeight),u=this.getPixelRatio(),f=1;if(t.scale!==void 0)i*=t.scale,o*=t.scale,f=t.scale;else if(s){var c=1/0,h=1/0;it(t.maxWidth)&&(c=f*t.maxWidth/i),it(t.maxHeight)&&(h=f*t.maxHeight/o),f=Math.min(c,h),i*=f,o*=f}s||(i*=u,o*=u,f*=u);var g=document.createElement("canvas");g.width=i,g.height=o,g.style.width=i+"px",g.style.height=o+"px";var y=g.getContext("2d");if(i>0&&o>0){y.clearRect(0,0,i,o),y.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(t.full)y.translate(-n.x1*f,-n.y1*f),y.scale(f,f),this.drawElements(y,p),y.scale(1/f,1/f),y.translate(n.x1*f,n.y1*f);else{var C=e.pan(),E={x:C.x*f,y:C.y*f};f*=e.zoom(),y.translate(E.x,E.y),y.scale(f,f),this.drawElements(y,p),y.scale(1/f,1/f),y.translate(-E.x,-E.y)}t.bg&&(y.globalCompositeOperation="destination-over",y.fillStyle=t.bg,y.rect(0,0,i,o),y.fill())}return g};function NV(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function yS(t){var e=t.indexOf(",");return t.substr(e+1)}function xN(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new Ds(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(o){i(o)}});case"blob":return NV(yS(n()),r);case"base64":return yS(n());case"base64uri":default:return n()}}gu.png=function(t){return xN(t,this.bufferCanvasImage(t),"image/png")};gu.jpg=function(t){return xN(t,this.bufferCanvasImage(t),"image/jpeg")};var EN={};EN.nodeShapeImpl=function(t,e,r,n,a,i,o,s){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,s);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var OV=CN,Dt=CN.prototype;Dt.CANVAS_LAYERS=3;Dt.SELECT_BOX=0;Dt.DRAG=1;Dt.NODE=2;Dt.WEBGL=3;Dt.CANVAS_TYPES=["2d","2d","2d","webgl2"];Dt.BUFFER_COUNT=3;Dt.TEXTURE_BUFFER=0;Dt.MOTIONBLUR_BUFFER_NODE=1;Dt.MOTIONBLUR_BUFFER_DRAG=2;function CN(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(Dt.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Dt.CANVAS_LAYERS),contexts:new Array(Dt.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Dt.CANVAS_LAYERS),bufferCanvases:new Array(Dt.BUFFER_COUNT),bufferContexts:new Array(Dt.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),s.style[a]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};kq()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var f=0;f<Dt.CANVAS_LAYERS;f++){var c=e.data.canvases[f]=n.createElement("canvas"),h=Dt.CANVAS_TYPES[f];e.data.contexts[f]=c.getContext(h),e.data.contexts[f]||yr("Could not create canvas of type "+h),Object.keys(u).forEach(function(te){c.style[te]=u[te]}),c.style.position="absolute",c.setAttribute("data-id","layer"+f),c.style.zIndex=String(Dt.CANVAS_LAYERS-f),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[f]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Dt.NODE].setAttribute("data-id","layer"+Dt.NODE+"-node"),e.data.canvases[Dt.SELECT_BOX].setAttribute("data-id","layer"+Dt.SELECT_BOX+"-selectbox"),e.data.canvases[Dt.DRAG].setAttribute("data-id","layer"+Dt.DRAG+"-drag"),e.data.canvases[Dt.WEBGL]&&e.data.canvases[Dt.WEBGL].setAttribute("data-id","layer"+Dt.WEBGL+"-webgl");for(var f=0;f<Dt.BUFFER_COUNT;f++)e.data.bufferCanvases[f]=n.createElement("canvas"),e.data.bufferContexts[f]=e.data.bufferCanvases[f].getContext("2d"),e.data.bufferCanvases[f].style.position="absolute",e.data.bufferCanvases[f].setAttribute("data-id","buffer"+f),e.data.bufferCanvases[f].style.zIndex=String(-f-1),e.data.bufferCanvases[f].style.visibility="hidden";e.pathsEnabled=!0;var g=Nn(),y=function(ie){return{x:(ie.x1+ie.x2)/2,y:(ie.y1+ie.y2)/2}},p=function(ie){return{x:-ie.w/2,y:-ie.h/2}},C=function(ie){var se=ie[0]._private,$=se.oldBackgroundTimestamp===se.backgroundTimestamp;return!$},E=function(ie){return ie[0]._private.nodeKey},v=function(ie){return ie[0]._private.labelStyleKey},x=function(ie){return ie[0]._private.sourceLabelStyleKey},w=function(ie){return ie[0]._private.targetLabelStyleKey},T=function(ie,se,$,ne,le){return e.drawElement(ie,se,$,!1,!1,le)},A=function(ie,se,$,ne,le){return e.drawElementText(ie,se,$,ne,"main",le)},M=function(ie,se,$,ne,le){return e.drawElementText(ie,se,$,ne,"source",le)},D=function(ie,se,$,ne,le){return e.drawElementText(ie,se,$,ne,"target",le)},_=function(ie){return ie.boundingBox(),ie[0]._private.bodyBounds},k=function(ie){return ie.boundingBox(),ie[0]._private.labelBounds.main||g},F=function(ie){return ie.boundingBox(),ie[0]._private.labelBounds.source||g},G=function(ie){return ie.boundingBox(),ie[0]._private.labelBounds.target||g},B=function(ie,se){return se},q=function(ie){return y(_(ie))},R=function(ie,se,$){var ne=ie?ie+"-":"";return{x:se.x+$.pstyle(ne+"text-margin-x").pfValue,y:se.y+$.pstyle(ne+"text-margin-y").pfValue}},P=function(ie,se,$){var ne=ie[0]._private.rscratch;return{x:ne[se],y:ne[$]}},N=function(ie){return R("",P(ie,"labelX","labelY"),ie)},I=function(ie){return R("source",P(ie,"sourceLabelX","sourceLabelY"),ie)},z=function(ie){return R("target",P(ie,"targetLabelX","targetLabelY"),ie)},ae=function(ie){return p(_(ie))},re=function(ie){return p(F(ie))},K=function(ie){return p(G(ie))},V=function(ie){var se=k(ie),$=p(k(ie));if(ie.isNode()){switch(ie.pstyle("text-halign").value){case"left":$.x=-se.w-(se.leftPad||0);break;case"right":$.x=-(se.rightPad||0);break}switch(ie.pstyle("text-valign").value){case"top":$.y=-se.h-(se.topPad||0);break;case"bottom":$.y=-(se.botPad||0);break}}return $},Z=e.data.eleTxrCache=new Tl(e,{getKey:E,doesEleInvalidateKey:C,drawElement:T,getBoundingBox:_,getRotationPoint:q,getRotationOffset:ae,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),U=e.data.lblTxrCache=new Tl(e,{getKey:v,drawElement:A,getBoundingBox:k,getRotationPoint:N,getRotationOffset:V,isVisible:B}),W=e.data.slbTxrCache=new Tl(e,{getKey:x,drawElement:M,getBoundingBox:F,getRotationPoint:I,getRotationOffset:re,isVisible:B}),X=e.data.tlbTxrCache=new Tl(e,{getKey:w,drawElement:D,getBoundingBox:G,getRotationPoint:z,getRotationOffset:K,isVisible:B}),ee=e.data.lyrTxrCache=new fN(e);e.onUpdateEleCalcs(function(ie,se){Z.invalidateElements(se),U.invalidateElements(se),W.invalidateElements(se),X.invalidateElements(se),ee.invalidateElements(se);for(var $=0;$<se.length;$++){var ne=se[$]._private;ne.oldBackgroundTimestamp=ne.backgroundTimestamp}});var oe=function(ie){for(var se=0;se<ie.length;se++)ee.enqueueElementRefinement(ie[se].ele)};Z.onDequeue(oe),U.onDequeue(oe),W.onDequeue(oe),X.onDequeue(oe),t.webgl&&e.initWebgl(t,{getStyleKey:E,getLabelKey:v,getSourceLabelKey:x,getTargetLabelKey:w,drawElement:T,drawLabel:A,drawSourceLabel:M,drawTargetLabel:D,getElementBox:_,getLabelBox:k,getSourceLabelBox:F,getTargetLabelBox:G,getElementRotationPoint:q,getElementRotationOffset:ae,getLabelRotationPoint:N,getSourceLabelRotationPoint:I,getTargetLabelRotationPoint:z,getLabelRotationOffset:V,getSourceLabelRotationOffset:re,getTargetLabelRotationOffset:K})}Dt.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Dt.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Dt.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Dt.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var IV=typeof Path2D<"u";Dt.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Dt.usePaths=function(){return IV&&this.pathsEnabled};Dt.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Dt.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Dt.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":qr(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[cN,Ra,ri,G1,So,zi,An,gN,Gi,gu,EN].forEach(function(t){Et(Dt,t)});var FV=[{name:"null",impl:Zk},{name:"base",impl:sN},{name:"canvas",impl:OV}],BV=[{type:"layout",extensions:fU},{type:"renderer",extensions:FV}],TN={},SN={};function AN(t,e,r){var n=r,a=function(_){Xt("Can not register `"+e+"` for `"+t+"` since `"+_+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(eu.prototype[e])return a(e);eu.prototype[e]=r}else if(t==="collection"){if(rn.prototype[e])return a(e);rn.prototype[e]=r}else if(t==="layout"){for(var i=function(_){this.options=_,r.call(this,_),Bt(this._private)||(this._private={}),this._private.cy=_.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(r.prototype),s=[],u=0;u<s.length;u++){var f=s[u];o[f]=o[f]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=r.prototype.stop;o.stop=function(){var D=this.options;if(D&&D.animate){var _=this.animations;if(_)for(var k=0;k<_.length;k++)_[k].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var h=function(_){return _._private.cy},g={addEventFields:function(_,k){k.layout=_,k.cy=h(_),k.target=_},bubble:function(){return!0},parent:function(_){return h(_)}};Et(o,{createEmitter:function(){return this._private.emitter=new Nc(g,this),this},emitter:function(){return this._private.emitter},on:function(_,k){return this.emitter().on(_,k),this},one:function(_,k){return this.emitter().one(_,k),this},once:function(_,k){return this.emitter().one(_,k),this},removeListener:function(_,k){return this.emitter().removeListener(_,k),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(_,k){return this.emitter().emit(_,k),this}}),$t.eventAliasesOn(o),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var y=LN("renderer","base"),p=y.prototype,C=r,E=r.prototype,v=function(){y.apply(this,arguments),C.apply(this,arguments)},x=v.prototype;for(var w in p){var T=p[w],A=E[w]!=null;if(A)return a(w);x[w]=T}for(var M in E)x[M]=E[M];p.clientFunctions.forEach(function(D){x[D]=x[D]||function(){yr("Renderer does not implement `renderer."+D+"()` on its prototype")}}),n=v}else if(t==="__proto__"||t==="constructor"||t==="prototype")return yr(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return YP({map:TN,keys:[t,e],value:n})}function LN(t,e){return XP({map:TN,keys:[t,e]})}function qV(t,e,r,n,a){return YP({map:SN,keys:[t,e,r,n],value:a})}function zV(t,e,r,n){return XP({map:SN,keys:[t,e,r,n]})}var Qb=function(){if(arguments.length===2)return LN.apply(null,arguments);if(arguments.length===3)return AN.apply(null,arguments);if(arguments.length===4)return zV.apply(null,arguments);if(arguments.length===5)return qV.apply(null,arguments);yr("Invalid extension access syntax")};eu.prototype.extension=Qb;BV.forEach(function(t){t.extensions.forEach(function(e){AN(t.type,e.name,e.impl)})});var sc=function(){if(!(this instanceof sc))return new sc;this.length=0},Co=sc.prototype;Co.instanceString=function(){return"stylesheet"};Co.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Co.css=function(t,e){var r=this.length-1;if(mt(t))this[r].properties.push({name:t,value:e});else if(Bt(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(s!=null){var u=$r.properties[o]||$r.properties[Tc(o)];if(u!=null){var f=u.name,c=s;this[r].properties.push({name:f,value:c})}}}return this};Co.style=Co.css;Co.generateStyle=function(t){var e=new $r(t);return this.appendToStyle(e)};Co.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var o=a[i];t.css(o.name,o.value)}}return t};var GV="3.32.0",zn=function(e){if(e===void 0&&(e={}),Bt(e))return new eu(e);if(mt(e))return Qb.apply(Qb,arguments)};zn.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(zn),t.apply(null,e),this};zn.warnings=function(t){return tk(t)};zn.version=GV;zn.stylesheet=zn.Stylesheet=sc;var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ao(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hv={exports:{}},mS={},bS;function HV(){return bS||(bS=1,Object.extend=function(t){t=t||{};for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var n in r)r.hasOwnProperty(n)&&(Array.isArray(r[n])?t[n]=r[n].slice():typeof r[n]=="object"?t[n]=Object.extend(t[n],r[n]):t[n]=r[n])}return t}),mS}var Uv,wS;function UV(){return wS||(wS=1,Uv=function(t,e,r){var n={};n.changeOptions=function(i){e=i.gridSpacing,r=i.snapToGridCenter?.5:0};var a=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};return n.snapPos=function(i){var o=r?Math.floor(i.x/e):Math.round(i.x/e),s=r?Math.floor(i.y/e):Math.round(i.y/e),u={x:(o+r)*e,y:(s+r)*e};return u},n.snapNode=function(i){var o=i.position(),s=n.snapPos(o);i.position(s)},n.snapNodesTopDown=function(i){t.startBatch(),i.union(i.descendants()).filter(":childless").positions(function(o,s){typeof o=="number"&&(o=s);var u=o.position();return n.snapPos(u)}),t.endBatch()},n.onFreeNode=function(i){var o,s=i.target||i.cyTarget;s.selected()?o=i.cy.$(":selected"):o=s,n.snapNodesTopDown(o)},n.recoverSnapNode=function(i){var o=a(i).snap;o&&i.position(o.oldPos)},n}),Uv}var Vv,xS;function VV(){return xS||(xS=1,Vv=function(t,e){var r={},n,a,i,o;r.onTapStartNode=function(c){if(!(c.originalEvent.altKey||c.originalEvent.ctrlKey||c.originalEvent.metaKey||c.originalEvent.shiftKey)){var h=c.target||c.cyTarget;h.selected()?a=c.cy.$(":selected"):a=h,i=c.position||c.cyPosition,h.grabbable()&&!h.locked()&&(n=h,n.lock(),t.on("tapdrag",f),t.on("tapend",s))}};var s=function(c){t.off("tapdrag",f),t.off("tapend",s),n.unlock(),c.preventDefault()},u=function(){return{x:o.x-i.x,y:o.y-i.y}},f=function(c){n.position(),o=c.position||c.cyPosition,o=e.snapPos(o);var h=u();if(h.x!=0||h.y!=0){n.unlock();var g=a.union(a.descendants());g.filter(":childless").positions(function(y,p){typeof y=="number"&&(y=p);var C=y.position();return e.snapPos({x:C.x+h.x,y:C.y+h.y})}),i=o,n.lock(),n.trigger("drag")}};return r}),Vv}var Wv,ES;function WV(){return ES||(ES=1,Wv=function(t,e,r){var n=t,a=function(y){n=y},i=function(y){var p=y.getBoundingClientRect();return{top:p.top+document.documentElement.scrollTop,left:p.left+document.documentElement.scrollLeft}},o=document.createElement("canvas"),s=e.container(),u=o.getContext("2d");s.appendChild(o);var f=function(){o.height=0,o.width=0,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder};f();var c=function(){var y=e.zoom(),p=e.width(),C=e.height(),E=n.gridSpacing*y,v=e.pan(),x=v.x%E,w=v.y%E;u.strokeStyle=n.gridColor,u.lineWidth=n.lineWidth;var T='	<svg width="'+p+'" height="'+C+`" xmlns="http://www.w3.org/2000/svg">
	            <defs>
	                <pattern id="horizontalLines" width="`+E+'" height="'+E+`" patternUnits="userSpaceOnUse">
	                    <path d="M `+E+' 0 L 0 0 0 0" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	                <pattern id="verticalLines" width="`+E+'" height="'+E+`" patternUnits="userSpaceOnUse">
	                    <path d="M 0 0 L 0 0 0 `+E+'" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	            </defs>
	            <rect width="100%" height="100%" fill="url(#horizontalLines)" transform="translate(0, `+w+`)" />
	            <rect width="100%" height="100%" fill="url(#verticalLines)" transform="translate(`+x+`, 0)" />
	        </svg>
`,A=new Image;T=encodeURIComponent(T),A.onload=function(){h(),u.drawImage(A,0,0)},A.src="data:image/svg+xml,"+T},h=function(){var y=e.width(),p=e.height();u.clearRect(0,0,y,p)},g=r(function(){o.height=e.height(),o.width=e.width(),o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder,setTimeout(function(){o.height=e.height(),o.width=e.width();var y=i(o),p=i(s);o.style.top=-(y.top-p.top),o.style.left=-(y.left-p.left),c()},0)},250);return{initCanvas:g,resizeCanvas:g,resetCanvas:f,clearCanvas:h,drawGrid:c,changeOptions:a,sizeCanvas:c}}),Wv}var $v,CS;function $V(){return CS||(CS=1,$v=function(t){var e=function(i){t=Number(i.gridSpacing)},r=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};function n(i){var o=i.width(),s=i.height(),u=Math.round((o-t)/(t*2))*(t*2),f=Math.round((s-t)/(t*2))*(t*2);u=u>0?u+t:t,f=f>0?f+t:t,(o!=u||s!=f)&&(i.style({width:u,height:f}),r(i).resize={oldWidth:o,oldHeight:s})}function a(i){var o=r(i).resize;o&&i.style({width:o.oldWidth,height:o.oldHeight})}return{resizeNode:n,recoverNodeDimensions:a,changeOptions:e}}),$v}var Yv,TS;function YV(){return TS||(TS=1,Yv=function(t,e,r,n,a,i,o,s){var u=function(U){return function(W){U(W)}},f={snapToGridDuringDrag:new u(p),resize:new u(v),snapToGridOnRelease:new u(A),drawGrid:new u(_),guidelines:new u(N),parentPadding:new u(ae)};function c(U,W){return function(X){var ee=X.target||X.cyTarget;(!ee.is(":parent")||W)&&U(ee)}}function h(U){return function(){t.nodes().not(":parent").each(function(W,X){typeof W=="number"&&(W=X),U(W)})}}function g(U){return function(){t.nodes().each(function(W,X){typeof W=="number"&&(W=X),U(W)})}}function y(U){return U?"on":"off"}function p(U){t[y(U)]("tapstart","node",n.onTapStartNode)}var C=h(r.resizeNode);c(r.resizeNode);var E=h(r.recoverNodeDimensions);function v(U){t[y(U)]("ready",C),U?C():E()}var x=g(e.snapNodesTopDown),w=g(e.recoverSnapNode),T=c(e.snapNode,!0);function A(U){t[y(U)]("add","node",T),t[y(U)]("ready",x),t[y(U)]("free","node",e.onFreeNode),U?x():w()}var M=function(){K.zoomDash&&a.drawGrid()},D=function(){K.panGrid&&a.drawGrid()};function _(U){t[y(U)]("zoom",M),t[y(U)]("pan",D),U?(a.initCanvas(),t.on("resize",a.resizeCanvas)):(a.clearCanvas(),a.resetCanvas(),t.off("resize",a.resizeCanvas))}var k=null,F=function(U){var W=U.target||U.cyTarget,X=W.selected()?U.cy.$(":selected"):W;k=i.getTopMostNodes(X.nodes()),i.lines.init(k)},G=function(U){this.id()==k.id()&&(i.lines.update(k),K.snapToAlignmentLocationDuringDrag&&i.lines.snapToAlignmentLocation(k))},B=function(U){K.snapToAlignmentLocationOnRelease&&i.lines.snapToAlignmentLocation(k),i.lines.destroy(),k=null},q=function(U){i.lines.resize()},R=function(U){i.getMousePos(U)},P=function(U){k&&(i.setMousePos(t.pan()),i.lines.init(k))};function N(U){U?(i.resizeCanvas(),t.on("tapstart","node",R),t.on("grab",F),t.on("pan",P),t.on("drag","node",G),t.on("free",B),window.addEventListener("resize",q)):(t.off("tapstart","node",R),t.off("grab",F),t.off("pan",P),t.off("drag","node",G),t.off("free",B),i.resetCanvas(),window.removeEventListener("resize",q))}var I=function(U){o.setPaddingOfParent(t.nodes(":parent"),U)},z=function(U){o.setPaddingOfParent(U,!0)};function ae(U){I(U),t[y(U)]("ready",I),t[y(U)]("add","node:parent",c(z,!0))}var re={},K,V={drawGrid:["gridSpacing","zoomDash","panGrid","gridStackOrder","gridColor","lineWidth","lineDash"],guidelines:["gridSpacing","guidelinesStackOrder","guidelinesTolerance","guidelinesStyle","distributionGuidelines","range","minDistRange","geometricGuidelineRange"],resize:["gridSpacing"],parentPadding:["gridSpacing","parentSpacing"],snapToGridOnRelease:["gridSpacing","snapToGridCenter"]};function Z(U){K=Object.extend({},U),U.guidelines=U.initPosAlignment||U.distributionGuidelines||U.geometricGuideline;for(var W in U)if(re[W]!=U[W])if(f.hasOwnProperty(W))f[W](U[W]);else for(var X in V){var ee=V[X];ee.indexOf(W)>=0&&(X=="drawGrid"&&(a.changeOptions(U),U.drawGrid&&a.resizeCanvas()),X=="snapToGridOnRelease"&&(e.changeOptions(U),U.snapToGridOnRelease&&x()),X=="guidelines"&&i.changeOptions(U),X=="resize"&&(r.changeOptions(U),U.resize&&C()),X=="parentPadding"&&o.changeOptions(U))}re=Object.extend({},re,U)}return{init:Z,syncWithOptions:Z}}),Yv}var Xv,SS;function XV(){if(SS)return Xv;SS=1,Xv=E;var t=0,e=1;function r(v,x,w,T,A,M){this._color=v,this.key=x,this.value=w,this.left=T,this.right=A,this._count=M}function n(v){return new r(v._color,v.key,v.value,v.left,v.right,v._count)}function a(v,x){return new r(v,x.key,x.value,x.left,x.right,x._count)}function i(v){v._count=1+(v.left?v.left._count:0)+(v.right?v.right._count:0)}function o(v,x){this._compare=v,this.root=x}var s=o.prototype;Object.defineProperty(s,"keys",{get:function(){var v=[];return this.forEach(function(x,w){v.push(x)}),v}}),Object.defineProperty(s,"values",{get:function(){var v=[];return this.forEach(function(x,w){v.push(w)}),v}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(v,x){for(var w=this._compare,T=this.root,A=[],M=[];T;){var D=w(v,T.key);A.push(T),M.push(D),D<=0?T=T.left:T=T.right}A.push(new r(t,v,x,null,null,1));for(var _=A.length-2;_>=0;--_){var T=A[_];M[_]<=0?A[_]=new r(T._color,T.key,T.value,A[_+1],T.right,T._count+1):A[_]=new r(T._color,T.key,T.value,T.left,A[_+1],T._count+1)}for(var _=A.length-1;_>1;--_){var k=A[_-1],T=A[_];if(k._color===e||T._color===e)break;var F=A[_-2];if(F.left===k)if(k.left===T){var G=F.right;if(G&&G._color===t)k._color=e,F.right=a(e,G),F._color=t,_-=1;else{if(F._color=t,F.left=k.right,k._color=e,k.right=F,A[_-2]=k,A[_-1]=T,i(F),i(k),_>=3){var B=A[_-3];B.left===F?B.left=k:B.right=k}break}}else{var G=F.right;if(G&&G._color===t)k._color=e,F.right=a(e,G),F._color=t,_-=1;else{if(k.right=T.left,F._color=t,F.left=T.right,T._color=e,T.left=k,T.right=F,A[_-2]=T,A[_-1]=k,i(F),i(k),i(T),_>=3){var B=A[_-3];B.left===F?B.left=T:B.right=T}break}}else if(k.right===T){var G=F.left;if(G&&G._color===t)k._color=e,F.left=a(e,G),F._color=t,_-=1;else{if(F._color=t,F.right=k.left,k._color=e,k.left=F,A[_-2]=k,A[_-1]=T,i(F),i(k),_>=3){var B=A[_-3];B.right===F?B.right=k:B.left=k}break}}else{var G=F.left;if(G&&G._color===t)k._color=e,F.left=a(e,G),F._color=t,_-=1;else{if(k.left=T.right,F._color=t,F.right=T.left,T._color=e,T.right=k,T.left=F,A[_-2]=T,A[_-1]=k,i(F),i(k),i(T),_>=3){var B=A[_-3];B.right===F?B.right=T:B.left=T}break}}}return A[0]._color=e,new o(w,A[0])};function u(v,x){if(x.left){var w=u(v,x.left);if(w)return w}var w=v(x.key,x.value);if(w)return w;if(x.right)return u(v,x.right)}function f(v,x,w,T){var A=x(v,T.key);if(A<=0){if(T.left){var M=f(v,x,w,T.left);if(M)return M}var M=w(T.key,T.value);if(M)return M}if(T.right)return f(v,x,w,T.right)}function c(v,x,w,T,A){var M=w(v,A.key),D=w(x,A.key),_;if(M<=0&&(A.left&&(_=c(v,x,w,T,A.left),_)||D>0&&(_=T(A.key,A.value),_)))return _;if(D>0&&A.right)return c(v,x,w,T,A.right)}s.forEach=function(x,w,T){if(this.root)switch(arguments.length){case 1:return u(x,this.root);case 2:return f(w,this._compare,x,this.root);case 3:return this._compare(w,T)>=0?void 0:c(w,T,this._compare,x,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var v=[],x=this.root;x;)v.push(x),x=x.left;return new h(this,v)}}),Object.defineProperty(s,"end",{get:function(){for(var v=[],x=this.root;x;)v.push(x),x=x.right;return new h(this,v)}}),s.at=function(v){if(v<0)return new h(this,[]);for(var x=this.root,w=[];;){if(w.push(x),x.left){if(v<x.left._count){x=x.left;continue}v-=x.left._count}if(!v)return new h(this,w);if(v-=1,x.right){if(v>=x.right._count)break;x=x.right}else break}return new h(this,[])},s.ge=function(v){for(var x=this._compare,w=this.root,T=[],A=0;w;){var M=x(v,w.key);T.push(w),M<=0&&(A=T.length),M<=0?w=w.left:w=w.right}return T.length=A,new h(this,T)},s.gt=function(v){for(var x=this._compare,w=this.root,T=[],A=0;w;){var M=x(v,w.key);T.push(w),M<0&&(A=T.length),M<0?w=w.left:w=w.right}return T.length=A,new h(this,T)},s.lt=function(v){for(var x=this._compare,w=this.root,T=[],A=0;w;){var M=x(v,w.key);T.push(w),M>0&&(A=T.length),M<=0?w=w.left:w=w.right}return T.length=A,new h(this,T)},s.le=function(v){for(var x=this._compare,w=this.root,T=[],A=0;w;){var M=x(v,w.key);T.push(w),M>=0&&(A=T.length),M<0?w=w.left:w=w.right}return T.length=A,new h(this,T)},s.find=function(v){for(var x=this._compare,w=this.root,T=[];w;){var A=x(v,w.key);if(T.push(w),A===0)return new h(this,T);A<=0?w=w.left:w=w.right}return new h(this,[])},s.remove=function(v){var x=this.find(v);return x?x.remove():this},s.get=function(v){for(var x=this._compare,w=this.root;w;){var T=x(v,w.key);if(T===0)return w.value;T<=0?w=w.left:w=w.right}};function h(v,x){this.tree=v,this._stack=x}var g=h.prototype;Object.defineProperty(g,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(g,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),g.clone=function(){return new h(this.tree,this._stack.slice())};function y(v,x){v.key=x.key,v.value=x.value,v.left=x.left,v.right=x.right,v._color=x._color,v._count=x._count}function p(v){for(var x,w,T,A,M=v.length-1;M>=0;--M){if(x=v[M],M===0){x._color=e;return}if(w=v[M-1],w.left===x){if(T=w.right,T.right&&T.right._color===t){if(T=w.right=n(T),A=T.right=n(T.right),w.right=T.left,T.left=w,T.right=A,T._color=w._color,x._color=e,w._color=e,A._color=e,i(w),i(T),M>1){var D=v[M-2];D.left===w?D.left=T:D.right=T}v[M-1]=T;return}else if(T.left&&T.left._color===t){if(T=w.right=n(T),A=T.left=n(T.left),w.right=A.left,T.left=A.right,A.left=w,A.right=T,A._color=w._color,w._color=e,T._color=e,x._color=e,i(w),i(T),i(A),M>1){var D=v[M-2];D.left===w?D.left=A:D.right=A}v[M-1]=A;return}if(T._color===e)if(w._color===t){w._color=e,w.right=a(t,T);return}else{w.right=a(t,T);continue}else{if(T=n(T),w.right=T.left,T.left=w,T._color=w._color,w._color=t,i(w),i(T),M>1){var D=v[M-2];D.left===w?D.left=T:D.right=T}v[M-1]=T,v[M]=w,M+1<v.length?v[M+1]=x:v.push(x),M=M+2}}else{if(T=w.left,T.left&&T.left._color===t){if(T=w.left=n(T),A=T.left=n(T.left),w.left=T.right,T.right=w,T.left=A,T._color=w._color,x._color=e,w._color=e,A._color=e,i(w),i(T),M>1){var D=v[M-2];D.right===w?D.right=T:D.left=T}v[M-1]=T;return}else if(T.right&&T.right._color===t){if(T=w.left=n(T),A=T.right=n(T.right),w.left=A.right,T.right=A.left,A.right=w,A.left=T,A._color=w._color,w._color=e,T._color=e,x._color=e,i(w),i(T),i(A),M>1){var D=v[M-2];D.right===w?D.right=A:D.left=A}v[M-1]=A;return}if(T._color===e)if(w._color===t){w._color=e,w.left=a(t,T);return}else{w.left=a(t,T);continue}else{if(T=n(T),w.left=T.right,T.right=w,T._color=w._color,w._color=t,i(w),i(T),M>1){var D=v[M-2];D.right===w?D.right=T:D.left=T}v[M-1]=T,v[M]=w,M+1<v.length?v[M+1]=x:v.push(x),M=M+2}}}}g.remove=function(){var v=this._stack;if(v.length===0)return this.tree;var x=new Array(v.length),w=v[v.length-1];x[x.length-1]=new r(w._color,w.key,w.value,w.left,w.right,w._count);for(var T=v.length-2;T>=0;--T){var w=v[T];w.left===v[T+1]?x[T]=new r(w._color,w.key,w.value,x[T+1],w.right,w._count):x[T]=new r(w._color,w.key,w.value,w.left,x[T+1],w._count)}if(w=x[x.length-1],w.left&&w.right){var A=x.length;for(w=w.left;w.right;)x.push(w),w=w.right;var M=x[A-1];x.push(new r(w._color,M.key,M.value,w.left,w.right,w._count)),x[A-1].key=w.key,x[A-1].value=w.value;for(var T=x.length-2;T>=A;--T)w=x[T],x[T]=new r(w._color,w.key,w.value,w.left,x[T+1],w._count);x[A-1].left=x[A]}if(w=x[x.length-1],w._color===t){var D=x[x.length-2];D.left===w?D.left=null:D.right===w&&(D.right=null),x.pop();for(var T=0;T<x.length;++T)x[T]._count--;return new o(this.tree._compare,x[0])}else if(w.left||w.right){w.left?y(w,w.left):w.right&&y(w,w.right),w._color=e;for(var T=0;T<x.length-1;++T)x[T]._count--;return new o(this.tree._compare,x[0])}else{if(x.length===1)return new o(this.tree._compare,null);for(var T=0;T<x.length;++T)x[T]._count--;var _=x[x.length-2];p(x),_.left===w?_.left=null:_.right=null}return new o(this.tree._compare,x[0])},Object.defineProperty(g,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(g,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(g,"index",{get:function(){var v=0,x=this._stack;if(x.length===0){var w=this.tree.root;return w?w._count:0}else x[x.length-1].left&&(v=x[x.length-1].left._count);for(var T=x.length-2;T>=0;--T)x[T+1]===x[T].right&&(++v,x[T].left&&(v+=x[T].left._count));return v},enumerable:!0}),g.next=function(){var v=this._stack;if(v.length!==0){var x=v[v.length-1];if(x.right)for(x=x.right;x;)v.push(x),x=x.left;else for(v.pop();v.length>0&&v[v.length-1].right===x;)x=v[v.length-1],v.pop()}},Object.defineProperty(g,"hasNext",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].right)return!0;for(var x=v.length-1;x>0;--x)if(v[x-1].left===v[x])return!0;return!1}}),g.update=function(v){var x=this._stack;if(x.length===0)throw new Error("Can't update empty node!");var w=new Array(x.length),T=x[x.length-1];w[w.length-1]=new r(T._color,T.key,v,T.left,T.right,T._count);for(var A=x.length-2;A>=0;--A)T=x[A],T.left===x[A+1]?w[A]=new r(T._color,T.key,T.value,w[A+1],T.right,T._count):w[A]=new r(T._color,T.key,T.value,T.left,w[A+1],T._count);return new o(this.tree._compare,w[0])},g.prev=function(){var v=this._stack;if(v.length!==0){var x=v[v.length-1];if(x.left)for(x=x.left;x;)v.push(x),x=x.right;else for(v.pop();v.length>0&&v[v.length-1].left===x;)x=v[v.length-1],v.pop()}},Object.defineProperty(g,"hasPrev",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].left)return!0;for(var x=v.length-1;x>0;--x)if(v[x-1].right===v[x])return!0;return!1}});function C(v,x){return v<x?-1:v>x?1:0}function E(v){return new o(v||C,null)}return Xv}var Kv,AS;function KV(){return AS||(AS=1,Kv=function(t,e,r){var n=XV(),a=t,i=function(N){a=N,a.guidelinesTolerance==0&&(a.guidelinesTolerance=.001)},o=function(N){var I=N.getBoundingClientRect();return{top:I.top+document.documentElement.scrollTop,left:I.left+document.documentElement.scrollLeft}},s=r(function(){u(),f.height=e.height(),f.width=e.width(),f.style.position="absolute",f.style.top=0,f.style.left=0,f.style.zIndex=a.guidelinesStackOrder,setTimeout(function(){f.height=e.height(),f.width=e.width();var N=o(f),I=o(c);f.style.top=-(N.top-I.top),f.style.left=-(N.left-I.left)},0)},250),u=function(){var N=e.width(),I=e.height();h.clearRect(0,0,N,I)},f=document.createElement("canvas"),c=e.container(),h=f.getContext("2d");c.appendChild(f);var g=function(){f.height=0,f.width=0,f.style.position="absolute",f.style.top=0,f.style.left=0,f.style.zIndex=a.guidelinesStackOrder};g();var y=null,p=null,C,E,v={},x={},w={h:null,v:null};v.getDims=function(N){var I=N.renderedPosition(),z=N.renderedWidth(),ae=N.renderedHeight(),re={left:Number(N.renderedStyle("padding-left").replace("px","")),right:Number(N.renderedStyle("padding-right").replace("px","")),top:Number(N.renderedStyle("padding-top").replace("px","")),bottom:Number(N.renderedStyle("padding-bottom").replace("px",""))};return{horizontal:{center:I.x,left:Math.round(I.x-(re.left+z/2)),right:Math.round(I.x+(re.right+z/2))},vertical:{center:I.y,top:Math.round(I.y-(re.top+ae/2)),bottom:Math.round(I.y+(re.bottom+ae/2))}}},v.init=function(N){y=n(),p=n(),C||(x.x=e.pan("x"),x.y=e.pan("y"),C=N.renderedPosition());var I=e.nodes(":visible");E=N.union(N.ancestors()),E=E.union(N.descendants()),I.not(E).each(function(z,ae){typeof z=="number"&&(z=ae);var re=v.getDims(z);["left","center","right"].forEach(function(K){var V=re.horizontal[K];p.get(V)?p.get(V).push(z):p=p.insert(V,[z])}),["top","center","bottom"].forEach(function(K){var V=re.vertical[K];y.get(V)?y.get(V).push(z):y=y.insert(V,[z])})}),h.lineWidth=a.lineWidth,v.update(N)},v.destroy=function(){v.clear(),y=null,p=null,C=null,M={},w={h:null,v:null},P&&(P.unlock(),P=void 0)},v.clear=u,v.drawLine=function(N,I,z,ae){h.setLineDash(ae),h.beginPath(),h.moveTo(N.x,N.y),h.lineTo(I.x,I.y),h.strokeStyle=z,h.stroke()},v.drawArrow=function(N,I){I=="right"?(h.setLineDash([]),h.beginPath(),h.moveTo(N.x-5,N.y-5),h.lineTo(N.x,N.y),h.lineTo(N.x-5,N.y+5),h.stroke()):I=="left"?(h.setLineDash([]),h.beginPath(),h.moveTo(N.x+5,N.y-5),h.lineTo(N.x,N.y),h.lineTo(N.x+5,N.y+5),h.stroke()):I=="top"?(h.setLineDash([]),h.beginPath(),h.moveTo(N.x-5,N.y+5),h.lineTo(N.x,N.y),h.lineTo(N.x+5,N.y+5),h.stroke()):I=="bottom"&&(h.setLineDash([]),h.beginPath(),h.moveTo(N.x-5,N.y-5),h.lineTo(N.x,N.y),h.lineTo(N.x+5,N.y-5),h.stroke())},v.drawCross=function(N){h.setLineDash([]),h.beginPath(),h.moveTo(N.x-5,N.y+5),h.lineTo(N.x+5,N.y-5),h.moveTo(N.x-5,N.y-5),h.lineTo(N.x+5,N.y+5),h.stroke()};var T=function(N,I){for(var z=N[0],ae=v.getDims(z)[I].center,re=N[0],K=v.getDims(re)[I].center,V=0;V<N.length;V++){var Z=N[V];v.getDims(Z)[I].center<ae&&(ae=v.getDims(Z)[I].center,z=Z),v.getDims(Z)[I].center>K&&(K=v.getDims(Z)[I].center,re=Z)}if(I=="horizontal")var U=(ae+K)/2<v.getDims(N[1])[I].center?K+(.5*re.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():ae-(.5*z.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();else var U=(ae+K)/2<v.getDims(N[1])[I].center?K+(.5*re.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():ae-(.5*z.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();return U};v.horizontalDistribution=function(N){var I=null,z=null,ae=v.getDims(N),re=ae.horizontal.center,K=ae.vertical.center;if(p.forEach(function(U,W){for(var X=0;X<W.length;X++){var ee=W[X],oe=v.getDims(ee);if(Math.abs(oe.vertical.center-ae.vertical.center)<a.guidelinesStyle.range*e.zoom()&&oe.horizontal.right==U&&ae.horizontal.left-oe.horizontal.right>a.guidelinesStyle.minDistRange){var te=Math.round(2*re)-U;p.forEach(function(ie,se){for(var $=0;$<se.length;$++){var ne=se[$];Math.abs(v.getDims(ne).vertical.center-K)<a.guidelinesStyle.range*e.zoom()&&Math.abs(te-v.getDims(ne).horizontal.left)<2*a.guidelinesTolerance&&(I=ee,z=ne)}},te-a.guidelinesTolerance,te+a.guidelinesTolerance)}}},re-a.guidelinesStyle.range*e.zoom(),re),I){w.hd=re-(v.getDims(z).horizontal.left+v.getDims(I).horizontal.right)/2,(!a.geometricGuideline||w.h==null||Math.abs(w.h)>Math.abs(w.hd))&&(w.h=w.hd);var V=T([I,N,z],"vertical");v.drawLine({x:v.getDims(I).horizontal.right,y:V},{x:ae.horizontal.left,y:V},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(z).horizontal.left,y:V},{x:ae.horizontal.right,y:V},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(I).horizontal.right,y:V},{x:v.getDims(I).horizontal.right,y:v.getDims(I).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(z).horizontal.left,y:V},{x:v.getDims(z).horizontal.left,y:v.getDims(z).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:ae.horizontal.left,y:V},{x:ae.horizontal.left,y:K},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:ae.horizontal.right,y:V},{x:ae.horizontal.right,y:K},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(I).horizontal.right,y:V},"left"),v.drawArrow({x:ae.horizontal.left,y:V},"right"),v.drawArrow({x:ae.horizontal.right,y:V},"left"),v.drawArrow({x:v.getDims(z).horizontal.left,y:V},"right")}else{var Z=v.horizontalDistributionNext(N,"left");Z||v.horizontalDistributionNext(N,"right")}},v.verticalDistribution=function(N){var I=null,z=null,ae=v.getDims(N),re=ae.horizontal.center,K=ae.vertical.center;if(y.forEach(function(U,W){for(var X=0;X<W.length;X++){var ee=W[X],oe=v.getDims(ee);if(Math.abs(oe.horizontal.center-ae.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&oe.vertical.bottom==U&&ae.vertical.top-oe.vertical.bottom>a.guidelinesStyle.minDistRange){var te=Math.round(2*K-U);y.forEach(function(ie,se){for(var $=0;$<se.length;$++){var ne=se[$];Math.abs(v.getDims(ne).horizontal.center-re)<a.guidelinesStyle.range*e.zoom()&&Math.abs(te-v.getDims(ne).vertical.top)<2*a.guidelinesTolerance&&(I=ee,z=ne)}},te-a.guidelinesTolerance,te+a.guidelinesTolerance)}}},K-a.guidelinesStyle.range*e.zoom(),K),I){w.vd=K-(v.getDims(I).vertical.bottom+v.getDims(z).vertical.top)/2,(!a.geometricGuideline||w.v==null||Math.abs(w.v)>Math.abs(w.vd))&&(w.v=w.vd);var V=T([I,N,z],"horizontal");v.drawLine({y:v.getDims(I).vertical.bottom,x:V},{y:ae.vertical.top,x:V},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(z).vertical.top,x:V},{y:ae.vertical.bottom,x:V},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(I).vertical.bottom,x:V},{y:v.getDims(I).vertical.bottom,x:v.getDims(I).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(z).vertical.top,x:V},{y:v.getDims(z).vertical.top,x:v.getDims(z).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:ae.vertical.bottom,x:V},{y:ae.vertical.bottom,x:re},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:ae.vertical.top,x:V},{y:ae.vertical.top,x:re},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawArrow({x:V,y:v.getDims(I).vertical.bottom},"top"),v.drawArrow({x:V,y:ae.vertical.top},"bottom"),v.drawArrow({x:V,y:v.getDims(z).vertical.top},"bottom"),v.drawArrow({x:V,y:ae.vertical.bottom},"top")}else{var Z=v.verticalDistributionNext(N,"below");Z||v.verticalDistributionNext(N,"above")}},v.searchForLine=function(N,I){var z,ae,re,K,V,Z,U,W=v.getDims(I)[N],X=Number.MAX_SAFE_INTEGER;N=="horizontal"?(Z=p,K="y",V="x",w.h=null):(Z=y,K="x",V="y",w.v=null),re=I.renderedPosition(K);for(var ee in W)if(z=W[ee],Z.forEach(function(oe,te){for(var ie=0;ie<te.length;ie++){var se=te[ie];if(a.centerToEdgeAlignment||ee!="center"&&se.renderedPosition(V)!=oe||ee=="center"&&se.renderedPosition(V)==oe){var $=Math.abs(re-se.renderedPosition(K));$<X&&$<a.guidelinesStyle.geometricGuidelineRange*e.zoom()&&(ae=se,X=$,U=oe)}}},z-Number(a.guidelinesTolerance),z+Number(a.guidelinesTolerance)),ae){X=v.getDims(I)[N][ee],N=="horizontal"?(w.h=X-U,v.drawLine({x:X,y:I.renderedPosition("y")},{x:X,y:ae.renderedPosition("y")},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash)):(w.v=X-U,v.drawLine({x:I.renderedPosition("x"),y:X},{x:ae.renderedPosition("x"),y:X},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash));break}},v.horizontalDistributionNext=function(N,I){var z=null,ae=null,re=v.getDims(N),K=re.horizontal.center,V=re.vertical.center,Z="right",U="left",W=K;if(I=="left"){Z="left",U="right";var W=K-a.guidelinesStyle.range*e.zoom()}var X={left:function(ee,oe){return oe-ee>a.guidelinesStyle.minDistRange},right:function(ee,oe){return ee-oe>a.guidelinesStyle.minDistRange}};return p.forEach(function(ee,oe){for(var te=0;te<oe.length;te++){var ie=oe[te],se=v.getDims(ie);if(Math.abs(se.vertical.center-re.vertical.center)<a.guidelinesStyle.range*e.zoom()&&se.horizontal[U]==ee&&X[I](se.horizontal[U],re.horizontal[Z])){var $=se.horizontal[Z]-(re.horizontal[Z]-ee);p.forEach(function(ne,le){for(var Se=0;Se<le.length;Se++){var De=le[Se];Math.abs(v.getDims(De).vertical.center-V)<a.guidelinesStyle.range*e.zoom()&&Math.abs($-v.getDims(De).horizontal[U])<2*a.guidelinesTolerance&&(z=ie,ae=De)}},$-a.guidelinesTolerance,$+a.guidelinesTolerance)}}},W,W+a.guidelinesStyle.range*e.zoom()),z?(w.hd=v.getDims(N).horizontal[Z]-v.getDims(z).horizontal[U]-(v.getDims(z).horizontal[Z]-v.getDims(ae).horizontal[U]),(!a.geometricGuideline||w.h==null||Math.abs(w.h)>Math.abs(w.hd))&&(w.h=w.hd),v.drawDH(N,z,ae,I),!0):(a.geometricGuideline||(w.h=null),!1)},v.drawDH=function(N,I,z,ae){var re=v.getDims(N).vertical.center,K="right",V="left";ae=="left"&&(K="left",V="right");var Z=T([I,N,z],"vertical");v.drawLine({x:v.getDims(I).horizontal[V],y:Z},{x:v.getDims(N).horizontal[K],y:Z},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(N).horizontal[K],y:Z},{x:v.getDims(N).horizontal[K],y:re},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(z).horizontal[V],y:Z},{x:v.getDims(I).horizontal[K],y:Z},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(z).horizontal[V],y:Z},{x:v.getDims(z).horizontal[V],y:v.getDims(z).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(I).horizontal[V],y:Z},{x:v.getDims(I).horizontal[V],y:v.getDims(I).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(I).horizontal[K],y:Z},{x:v.getDims(I).horizontal[K],y:v.getDims(I).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(N).horizontal[K],y:Z},V),v.drawArrow({x:v.getDims(I).horizontal[V],y:Z},K),v.drawArrow({x:v.getDims(I).horizontal[K],y:Z},V),v.drawArrow({x:v.getDims(z).horizontal[V],y:Z},K)},v.verticalDistributionNext=function(N,I){var z=null,ae=null,re=v.getDims(N),K=re.horizontal.center,V=re.vertical.center,Z="top",U="bottom",W=V-a.guidelinesStyle.range*e.zoom();I=="above"&&(Z="bottom",U="top",W=V);var X={below:function(ee,oe){return oe-ee>a.guidelinesStyle.minDistRange},above:function(ee,oe){return ee-oe>a.guidelinesStyle.minDistRange}};return y.forEach(function(ee,oe){for(var te=0;te<oe.length;te++){var ie=oe[te],se=v.getDims(ie);if(Math.abs(se.horizontal.center-re.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&se.vertical[U]==ee&&X[I](se.vertical[U],re.vertical[Z])){var $=se.vertical[Z]-(re.vertical[Z]-ee);y.forEach(function(ne,le){for(var Se=0;Se<le.length;Se++){var De=le[Se];Math.abs(v.getDims(De).horizontal.center-K)<a.guidelinesStyle.range*e.zoom()&&Math.abs($-v.getDims(De).vertical[U])<2*a.guidelinesTolerance&&(z=ie,ae=De)}},$-a.guidelinesTolerance,$+a.guidelinesTolerance)}}},W,W+a.guidelinesStyle.range*e.zoom()),z?(w.vd=v.getDims(N).vertical[Z]-v.getDims(z).vertical[U]-(v.getDims(z).vertical[Z]-v.getDims(ae).vertical[U]),(!a.geometricGuideline||w.v==null||Math.abs(w.v)>Math.abs(w.vd))&&(w.v=w.vd),v.drawDV(N,z,ae,I),!0):(a.geometricGuideline||(w.v=null),!1)},v.drawDV=function(N,I,z,ae){var re=v.getDims(N),K=re.horizontal.center,V="top",Z="bottom";ae=="above"&&(V="bottom",Z="top");var U=T([I,N,z],"horizontal");v.drawLine({x:U,y:re.vertical[V]},{x:U,y:v.getDims(I).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:U,y:v.getDims(I).vertical[V]},{x:U,y:v.getDims(z).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:K,y:re.vertical[V]},{x:U,y:re.vertical[V]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(I).horizontal.center,y:v.getDims(I).vertical[Z]},{x:U,y:v.getDims(I).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(I).horizontal.center,y:v.getDims(I).vertical[V]},{x:U,y:v.getDims(I).vertical[V]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:U,y:v.getDims(z).vertical[Z]},{x:v.getDims(z).horizontal.center,y:v.getDims(z).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawArrow({x:U,y:re.vertical[V]},Z),v.drawArrow({x:U,y:v.getDims(I).vertical[Z]},V),v.drawArrow({x:U,y:v.getDims(I).vertical[V]},Z),v.drawArrow({x:U,y:v.getDims(z).vertical[Z]},V)},v.update=function(N){v.clear(),a.initPosAlignment&&F(N),N.each(function(I,z){typeof I=="number"&&(I=z),a.geometricGuideline&&(v.searchForLine("horizontal",I),v.searchForLine("vertical",I)),a.distributionGuidelines&&(v.horizontalDistribution(I),v.verticalDistribution(I))})},v.resize=function(){s()};function A(N){for(var I={},z=0;z<N.length;z++)I[N[z].id()]=!0;var ae=N.filter(function(re,K){typeof re=="number"&&(re=K);for(var V=re.parent()[0];V!=null;){if(I[V.id()])return!1;V=V.parent()[0]}return!0});return ae}var M={},D={},_=function(N){M=N.renderedPosition||N.cyRenderedPosition,D.x=M.x,D.y=M.y},k=function(N){D.x+=N.x-x.x,D.y+=N.y-x.y,x.x=N.x,x.y=N.y},F=function(N){var I=N.renderedPosition();Math.abs(C.y-I.y)<a.guidelinesTolerance?(v.drawLine({x:D.x,y:M.y},{x:I.x,y:M.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),M.y==D.y?v.drawCross(D):v.drawCross(M)):Math.abs(C.x-I.x)<a.guidelinesTolerance&&(v.drawLine({x:M.x,y:D.y},{x:M.x,y:I.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),M.x==D.x?v.drawCross(D):v.drawCross(M))};function G(N,I){var z=A(I),ae=z.union(z.descendants());ae.filter(":childless").forEach(function(re,K){typeof re=="number"&&(re=K);var V={x:N.x+re.renderedPosition("x"),y:N.y+re.renderedPosition("y")};re.renderedPosition(V)})}var B;e.on("tapstart","node",function(){B=this});var q,R={x:0,y:0};e.on("mousemove",function(N){q=N.renderedPosition||N.cyRenderedPosition,P&&P.each(function(I,z){if(typeof I=="number"&&(I=z),I.locked()&&(Math.abs(q.x-R.x)>2*a.guidelinesTolerance||Math.abs(q.y-R.y)>2*a.guidelinesTolerance)){I.unlock();var ae={};ae.x=q.x-B.renderedPosition("x"),ae.y=q.y-B.renderedPosition("y"),G(ae,I)}})});var P;return v.snapToAlignmentLocation=function(N){P=N,N.each(function(I,z){typeof I=="number"&&(I=z);var ae=I.renderedPosition();w.h&&(R=q,ae.x-=w.h,I.renderedPosition(ae)),w.v&&(R=q,ae.y-=w.v,I.renderedPosition(ae)),(w.v||w.h)&&(w.h=null,w.v=null,P.lock())}),v.update(N)},{changeOptions:i,lines:v,getTopMostNodes:A,getMousePos:_,setMousePos:k,resizeCanvas:s,resetCanvas:g}}),Kv}var jv,LS;function jV(){return LS||(LS=1,jv=function(t,e){var r=t,n="_gridParentPadding",a;function i(){e.style().selector("."+n).style("compound-sizing-wrt-labels","exclude").style("padding-left",a).style("padding-right",a).style("padding-top",a).style("padding-bottom",a).update()}function o(u){r=u,a=r.parentSpacing<0?r.gridSpacing:r.parentSpacing,i()}function s(u,f){f?u.addClass(n):u.removeClass(n)}return{changeOptions:o,setPaddingOfParent:s}}),jv}var Zv,DS;function ZV(){return DS||(DS=1,Zv=function(t,e,r){function n(u,f,c){var h=u.union(u.descendants());h.filter(":childless").positions(function(g,y){typeof g=="number"&&(g=y);var p=g.position();return{x:p.x+f,y:p.y+c}})}function a(u){for(var f={},c=0;c<u.length;c++)f[u[c].id()]=!0;var h=u.filter(function(g,y){typeof g=="number"&&(g=y);for(var p=g.parent()[0];p!=null;){if(f[p.id()])return!1;p=p.parent()[0]}return!0});return h}if(r||t("collection","align",function(u,f,c){var h=a(this.nodes(":visible")),g=c||h[0];h=h.not(g),u=u||"none",f=f||"none";var y=0,p=0;f=="left"?y=-1:f=="right"&&(y=1),u=="top"?p=-1:u=="bottom"&&(p=1);for(var C=0;C<h.length;C++){var E=h[C],v=Object.assign({},E.position()),x=Object.assign({},E.position());f!="none"&&(x.x=g.position("x")+y*(g.outerWidth()-E.outerWidth())/2),u!="none"&&(x.y=g.position("y")+p*(g.outerHeight()-E.outerHeight())/2),n(E,x.x-v.x,x.y-v.y)}return this}),e.undoRedo){let u=function(){for(var c={},h=e.nodes(),g=0;g<h.length;g++){var y=h[g];c[y.id()]={x:y.position("x"),y:y.position("y")}}return c},f=function(c){var h={};return e.nodes().not(":parent").positions(function(g,y){typeof g=="number"&&(g=y),h[g.id()]={x:g.position("x"),y:g.position("y")};var p=c[g.id()];return{x:p.x,y:p.y}}),h};var o=u,s=f,i=e.undoRedo(null,!0);i.action("align",function(c){var h;return c.firstTime?(h=u(),c.nodes.align(c.horizontal,c.vertical,c.alignTo)):h=f(c),h},function(c){return f(c)})}}),Zv}var Qv,_S;function QV(){if(_S)return Qv;_S=1;var t=function(){var e="Expected a function",r=Math.max,n=Date.now,a=n||function(){return new Date().getTime()};function i(s,u,f){var c,h,g,y,p,C,E,v=0,x=!1,w=!0;if(typeof s!="function")throw new TypeError(e);if(u=u<0?0:+u||0,f===!0){var T=!0;w=!1}else o(f)&&(T=!!f.leading,x="maxWait"in f&&r(+f.maxWait||0,u),w="trailing"in f?!!f.trailing:w);function A(){C&&clearTimeout(C),h&&clearTimeout(h),v=0,h=C=E=void 0}function M(F,G){G&&clearTimeout(G),h=C=E=void 0,F&&(v=a(),g=s.apply(p,c),!C&&!h&&(c=p=void 0))}function D(){var F=u-(a()-y);F<=0||F>u?M(E,h):C=setTimeout(D,F)}function _(){M(w,C)}function k(){if(c=arguments,y=a(),p=this,E=w&&(C||!T),x===!1)var F=T&&!C;else{!h&&!T&&(v=y);var G=x-(y-v),B=G<=0||G>x;B?(h&&(h=clearTimeout(h)),v=y,g=s.apply(p,c)):h||(h=setTimeout(_,G))}return B&&C?C=clearTimeout(C):!C&&u!==x&&(C=setTimeout(D,u)),F&&(B=!0,g=s.apply(p,c)),B&&!C&&!h&&(c=p=void 0),g}return k.cancel=A,k}function o(s){var u=typeof s;return!!s&&(u=="object"||u=="function")}return i}();return Qv=t,Qv}var MS;function JV(){return MS||(MS=1,function(t){(function(){var e=function(r){if(!r)return;HV();var n=!1,a={snapToGridOnRelease:!0,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!1,geometricGuideline:!1,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:20,snapToGridCenter:!0,zoomDash:!0,panGrid:!1,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1},i=UV(),o=VV(),s=WV(),u=$V(),f=YV(),c=KV(),h=jV(),g=ZV(),y=QV();function p(C){return C.scratch("_gridGuide")||C.scratch("_gridGuide",{}),C.scratch("_gridGuide")}r("core","gridGuide",function(C){var E=this,v=p(E),x=Object.extend({},v.options||a,C);if(v.options=x,v.initialized){var D=v.eventsController;D.syncWithOptions(x)}else{var w,T,A,M,D,_,k;w=i(E,x.gridSpacing,x.snapToGridCenter),T=u(x.gridSpacing),A=o(E,w),M=s(x,E,y),_=c(x,E,y),k=h(x,E),D=f(E,w,T,A,M,_,k,x),g(r,E,n),n=!0,D.init(x),v.initialized=!0,v.eventsController=D}return this})};t.exports&&(t.exports=e),typeof cytoscape<"u"&&e(cytoscape)})()}(Hv)),Hv.exports}var eW=JV();const tW=Ao(eW);var Pf={exports:{}},rW=Pf.exports,RS;function nW(){return RS||(RS=1,function(t,e){(function(r,n){t.exports=n()})(rW,function(){return(()=>{var r={621:(i,o,s)=>{function u(V,Z){(Z==null||Z>V.length)&&(Z=V.length);for(var U=0,W=new Array(Z);U<Z;U++)W[U]=V[U];return W}function f(V,Z){var U={};for(var W in V)U[W]=V[W];for(var X in Z)U[X]instanceof Array?U[X]=U[X].concat(Z[X]):U[X]=Z[X];return U}function c(V){for(var Z="",U=0;U<V.length;U++)Z+=V[U],U!==V.length-1&&(Z+=" ");return Z}function h(V,Z,U){U?V.setAttribute(Z,""):V.removeAttribute(Z)}function g(V,Z,U){customElements.get(V)===void 0&&customElements.define(V,Z,{extends:U})}s.r(o),s.d(o,{contextMenus:()=>K});var y="cy-context-menus-divider",p={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function C(V){return(C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z})(V)}function E(V,Z){var U;if(typeof Symbol>"u"||V[Symbol.iterator]==null){if(Array.isArray(V)||(U=function(ie,se){if(ie){if(typeof ie=="string")return v(ie,se);var $=Object.prototype.toString.call(ie).slice(8,-1);return $==="Object"&&ie.constructor&&($=ie.constructor.name),$==="Map"||$==="Set"?Array.from(ie):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?v(ie,se):void 0}}(V))||Z){U&&(V=U);var W=0,X=function(){};return{s:X,n:function(){return W>=V.length?{done:!0}:{done:!1,value:V[W++]}},e:function(ie){throw ie},f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ee,oe=!0,te=!1;return{s:function(){U=V[Symbol.iterator]()},n:function(){var ie=U.next();return oe=ie.done,ie},e:function(ie){te=!0,ee=ie},f:function(){try{oe||U.return==null||U.return()}finally{if(te)throw ee}}}}function v(V,Z){(Z==null||Z>V.length)&&(Z=V.length);for(var U=0,W=new Array(Z);U<Z;U++)W[U]=V[U];return W}function x(V,Z){if(!(V instanceof Z))throw new TypeError("Cannot call a class as a function")}function w(V,Z){for(var U=0;U<Z.length;U++){var W=Z[U];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(V,W.key,W)}}function T(V,Z,U){return Z&&w(V.prototype,Z),U&&w(V,U),V}function A(V,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(Z&&Z.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),Z&&q(V,Z)}function M(V){var Z=B();return function(){var U,W=R(V);if(Z){var X=R(this).constructor;U=Reflect.construct(W,arguments,X)}else U=W.apply(this,arguments);return D(this,U)}}function D(V,Z){return!Z||C(Z)!=="object"&&typeof Z!="function"?_(V):Z}function _(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function k(V,Z,U){return(k=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(W,X,ee){var oe=function(ie,se){for(;!Object.prototype.hasOwnProperty.call(ie,se)&&(ie=R(ie))!==null;);return ie}(W,X);if(oe){var te=Object.getOwnPropertyDescriptor(oe,X);return te.get?te.get.call(ee):te.value}})(V,Z,U||V)}function F(V){var Z=typeof Map=="function"?new Map:void 0;return(F=function(U){if(U===null||(W=U,Function.toString.call(W).indexOf("[native code]")===-1))return U;var W;if(typeof U!="function")throw new TypeError("Super expression must either be null or a function");if(Z!==void 0){if(Z.has(U))return Z.get(U);Z.set(U,X)}function X(){return G(U,arguments,R(this).constructor)}return X.prototype=Object.create(U.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),q(X,U)})(V)}function G(V,Z,U){return(G=B()?Reflect.construct:function(W,X,ee){var oe=[null];oe.push.apply(oe,X);var te=new(Function.bind.apply(W,oe));return ee&&q(te,ee.prototype),te}).apply(null,arguments)}function B(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function q(V,Z){return(q=Object.setPrototypeOf||function(U,W){return U.__proto__=W,U})(V,Z)}function R(V){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(Z){return Z.__proto__||Object.getPrototypeOf(Z)})(V)}function P(V){V.preventDefault(),V.stopPropagation()}var N=function(V){A(U,V);var Z=M(U);function U(W,X,ee){var oe,te,ie,se,$,ne,le,Se,De,be;x(this,U),k((te=_(be=Z.call(this)),R(U.prototype)),"setAttribute",te).call(te,"id",W.id);var Te=be._getMenuItemClassStr(ee.cxtMenuItemClasses,W.hasTrailingDivider);if(k((ie=_(be),R(U.prototype)),"setAttribute",ie).call(ie,"class",Te),k((se=_(be),R(U.prototype)),"setAttribute",se).call(se,"title",(oe=W.tooltipText)!==null&&oe!==void 0?oe:""),W.disabled&&h(_(be),"disabled",!0),W.image){var pe=document.createElement("img");pe.src=W.image.src,pe.width=W.image.width,pe.height=W.image.height,pe.style.position="absolute",pe.style.top=W.image.y+"px",pe.style.left=W.image.x+"px",k(($=_(be),R(U.prototype)),"appendChild",$).call($,pe)}if(be.innerHTML+=W.content,be.onMenuItemClick=X,be.data={},be.clickFns=[],be.selector=W.selector,be.hasTrailingDivider=W.hasTrailingDivider,be.show=W.show===void 0||W.show,be.coreAsWell=W.coreAsWell||!1,be.scratchpad=ee,W.onClickFunction===void 0&&W.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return be.onClickFunction=W.onClickFunction,W.submenu instanceof Array&&be._createSubmenu(W.submenu),k((ne=_(be),R(U.prototype)),"addEventListener",ne).call(ne,"mousedown",P),k((le=_(be),R(U.prototype)),"addEventListener",le).call(le,"mouseup",P),k((Se=_(be),R(U.prototype)),"addEventListener",Se).call(Se,"touchstart",P),k((De=_(be),R(U.prototype)),"addEventListener",De).call(De,"touchend",P),be}return T(U,[{key:"bindOnClickFunction",value:function(W){this.clickFns.push(W),k(R(U.prototype),"addEventListener",this).call(this,"click",W)}},{key:"unbindOnClickFunctions",value:function(){var W,X=E(this.clickFns);try{for(X.s();!(W=X.n()).done;){var ee=W.value;k(R(U.prototype),"removeEventListener",this).call(this,"click",ee)}}catch(oe){X.e(oe)}finally{X.f()}this.clickFns=[]}},{key:"enable",value:function(){h(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){h(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(W){this.hasTrailingDivider=W}},{key:"hasSubmenu",value:function(){return this.submenu instanceof I}},{key:"appendSubmenuItem",value:function(W){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(W,X)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(W){var X=this.getBoundingClientRect(),ee=function($){$.style.opacity="0",$.style.display="block";var ne=$.getBoundingClientRect();return $.style.opacity="1",$.style.display="none",ne}(this.submenu),oe=X.right+ee.width>window.innerWidth,te=X.top+ee.height>window.innerHeight;oe||te?oe&&!te?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):oe&&te?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var ie=Array.from(this.submenu.children).filter(function($){if($ instanceof U)return $.isVisible()}),se=ie.length;ie.forEach(function($,ne){$ instanceof U&&(ne<se-1&&$.getHasTrailingDivider()?$.classList.add(y):$.getHasTrailingDivider()&&$.classList.remove(y))})}},{key:"_onMouseLeave",value:function(W){var X,ee,oe,te,ie;X={x:W.clientX,y:W.clientY},ee=this.submenu,te=X.y,(oe=X.x)>=(ie=ee.getBoundingClientRect()).left&&oe<=ie.right&&te>=ie.top&&te<=ie.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new I(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var X,ee=E(W);try{for(ee.s();!(X=ee.n()).done;){var oe=X.value,te=new U(oe,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(te)}}catch(ie){ee.e(ie)}finally{ee.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(W,X){return X?W+" "+y:W}}],[{key:"define",value:function(){g("ctx-menu-item",U,"button")}}]),U}(F(HTMLButtonElement)),I=function(V){A(U,V);var Z=M(U);function U(W,X){var ee,oe;return x(this,U),k((ee=_(oe=Z.call(this)),R(U.prototype)),"setAttribute",ee).call(ee,"class",X.cxtMenuClasses),oe.style.position="absolute",oe.onMenuItemClick=W,oe.scratchpad=X,oe}return T(U,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var W,X=E(this.children);try{for(X.s();!(W=X.n()).done;){var ee=W.value;ee instanceof HTMLElement?ee.style.display="none":console.warn("".concat(ee," is not a HTMLElement"))}}catch(oe){X.e(oe)}finally{X.f()}}},{key:"hideSubmenus",value:function(){var W,X=E(this.children);try{for(X.s();!(W=X.n()).done;){var ee=W.value;ee instanceof N&&ee.submenu&&ee.submenu.hide()}}catch(oe){X.e(oe)}finally{X.f()}}},{key:"appendMenuItem",value:function(W){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(X!==void 0){if(X.parentNode!==this)throw new Error("The item with id='".concat(X.id,"' is not a child of the context menu"));this.insertBefore(W,X)}else this.appendChild(W);W.isClickable()&&this._performBindings(W)}},{key:"moveBefore",value:function(W,X){if(W.parentNode!==this)throw new Error("The item with id='".concat(W.id,"' is not a child of context menu"));if(X.parentNode!==this)throw new Error("The item with id='".concat(X.id,"' is not a child of context menu"));this.removeChild(W),this.insertBefore(W,X)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var W=this.lastChild;W instanceof N?this._removeImmediateMenuItem(W):(console.warn("Found non menu item in the context menu: ",W),this.removeChild(W))}}},{key:"_removeImmediateMenuItem",value:function(W){if(!this._detachImmediateMenuItem(W))throw new Error("menu item(id=".concat(W.id,") is not in the context menu"));W.detachSubmenu(),W.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(W){if(W.parentNode===this){if(this.removeChild(W),this.children.length<=0){var X=this.parentNode;X instanceof N&&X.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(W){var X=this._bindOnClick(W.onClickFunction);W.bindOnClickFunction(X),W.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(W){var X=this;return function(){var ee=X.scratchpad.currentCyEvent;W(ee)}}}],[{key:"define",value:function(){g("menu-item-list",U,"div")}}]),U}(F(HTMLDivElement)),z=function(V){A(U,V);var Z=M(U);function U(W,X){var ee;return x(this,U),(ee=Z.call(this,W,X)).onMenuItemClick=function(oe){P(oe),ee.hide(),W()},ee}return T(U,[{key:"removeMenuItem",value:function(W){var X=W.parentElement;X instanceof I&&this.contains(X)&&X._removeImmediateMenuItem(W)}},{key:"appendMenuItem",value:function(W){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(W.id),k(R(U.prototype),"appendMenuItem",this).call(this,W,X)}},{key:"insertMenuItem",value:function(W){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=X.before,oe=X.parent;if(this.ensureDoesntContain(W.id),ee!==void 0){if(!this.contains(ee))throw new Error("before(id=".concat(ee.id,") is not in the context menu"));var te=ee.parentNode;if(!(te instanceof I))throw new Error("Parent of before(id=".concat(ee.id,") is not a submenu"));te.appendMenuItem(W,ee)}else if(oe!==void 0){if(!this.contains(oe))throw new Error("parent(id=".concat(oe.id,") is not a descendant of the context menu"));oe.appendSubmenuItem(W)}else this.appendMenuItem(W)}},{key:"moveBefore",value:function(W,X){var ee=W.parentElement;if(!this.contains(ee))throw new Error("parent(id=".concat(ee.id,") is not in the contex menu"));if(!this.contains(X))throw new Error("before(id=".concat(X.id,") is not in the context menu"));ee.removeChild(W),this.insertMenuItem(W,{before:X})}},{key:"moveToSubmenu",value:function(W){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,oe=W.parentElement;if(!(oe instanceof I))throw new Error("current parent(id=".concat(oe.id,") is not a submenu"));if(!this.contains(oe))throw new Error("parent of the menu item(id=".concat(oe.id,") is not in the context menu"));if(X!==null){if(!this.contains(X))throw new Error("parent(id=".concat(X.id,") is not in the context menu"));oe._detachImmediateMenuItem(W),X.appendSubmenuItem(W)}else ee!==null&&(W.selector=ee.selector,W.coreAsWell=ee.coreAsWell),oe._detachImmediateMenuItem(W),this.appendMenuItem(W)}},{key:"ensureDoesntContain",value:function(W){var X=document.getElementById(W);if(X!==void 0&&this.contains(X))throw new Error("There is already an element with id=".concat(W," in the context menu"))}},{key:"ensureContains",value:function(W){var X=document.getElementById(W);if(X==null||X==null||!this.contains(X))throw new Error("An element with id '".concat(W,"' does not exist!"))}}],[{key:"define",value:function(){g("ctx-menu",U,"div")}}]),U}(I);function ae(V,Z){var U;if(typeof Symbol>"u"||V[Symbol.iterator]==null){if(Array.isArray(V)||(U=function(ie,se){if(ie){if(typeof ie=="string")return re(ie,se);var $=Object.prototype.toString.call(ie).slice(8,-1);return $==="Object"&&ie.constructor&&($=ie.constructor.name),$==="Map"||$==="Set"?Array.from(ie):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?re(ie,se):void 0}}(V))||Z){U&&(V=U);var W=0,X=function(){};return{s:X,n:function(){return W>=V.length?{done:!0}:{done:!1,value:V[W++]}},e:function(ie){throw ie},f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ee,oe=!0,te=!1;return{s:function(){U=V[Symbol.iterator]()},n:function(){var ie=U.next();return oe=ie.done,ie},e:function(ie){te=!0,ee=ie},f:function(){try{oe||U.return==null||U.return()}finally{if(te)throw ee}}}}function re(V,Z){(Z==null||Z>V.length)&&(Z=V.length);for(var U=0,W=new Array(Z);U<Z;U++)W[U]=V[U];return W}function K(V){var Z=this;Z.scratch("cycontextmenus")||Z.scratch("cycontextmenus",{});var U,W,X=function(pe){return Z.scratch("cycontextmenus")[pe]},ee=function(pe,de){return Z.scratch("cycontextmenus")[pe]=de},oe=X("options"),te=X("cxtMenu"),ie=function(pe){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,ye=$(pe);if(de!==void 0){var Ee=le(de);te.insertMenuItem(ye,{parent:Ee})}else te.insertMenuItem(ye)},se=function(pe){for(var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,ye=0;ye<pe.length;ye++)ie(pe[ye],de)},$=function(pe){var de=Z.scratch("cycontextmenus");return new N(pe,te.onMenuItemClick,de)},ne=function(){X("active")&&(te.removeAllMenuItems(),Z.off("tapstart",X("eventCyTapStart")),Z.off(oe.evtType,X("onCxttap")),Z.off("viewport",X("onViewport")),document.removeEventListener("mouseup",X("hideOnNonCyClick")),te.parentNode.removeChild(te),te=void 0,ee("cxtMenu",void 0),ee("active",!1),ee("anyVisibleChild",!1),ee("onCxttap",void 0),ee("onViewport",void 0),ee("hideOnNonCyClick",void 0))},le=function(pe){var de=document.getElementById(pe);if(de instanceof N)return de;throw new Error("The item with id=".concat(pe," is not a menu item"))},Se=function(){var pe,de=!1,ye=ae(te.children);try{for(ye.s();!(pe=ye.n()).done;){var Ee=pe.value;if(Ee instanceof N&&Ee.show&&Ee.style.display!="none"){de=!0;break}}}catch(ue){ye.e(ue)}finally{ye.f()}de?te.display():te.hide()};if(V!=="get"){N.define(),I.define(),z.define(),oe=f(p,V),ee("options",oe),X("active")&&ne(),ee("active",!0),ee("submenuIndicatorGen",(function(pe){var de=document.createElement("img");return de.src=pe.src,de.width=pe.width,de.height=pe.height,de.classList.add("cy-context-menus-submenu-indicator"),de}).bind(void 0,oe.submenuIndicator));var De=c(oe.contextMenuClasses);ee("cxtMenuClasses",De);var be=Z.scratch("cycontextmenus");te=new z(function(){return ee("cxtMenuPosition",void 0)},be),ee("cxtMenu",te),Z.container().appendChild(te),ee("cxtMenuItemClasses",c(oe.menuItemClasses));var Te=oe.menuItems;se(Te),W=function(pe){ee("currentCyEvent",pe),function(Fe){var Ye,Ve=Z.container(),Qe=X("cxtMenuPosition"),Xe=Fe.position||Fe.cyPosition;if(Qe!=Xe){te.hideMenuItems(),ee("anyVisibleChild",!1),ee("cxtMenuPosition",Xe);var We={top:(Ye=Ve.getBoundingClientRect()).top,left:Ye.left},he=Fe.renderedPosition||Fe.cyRenderedPosition,j=getComputedStyle(Ve)["border-width"],ve=parseInt(j.replace("px",""))||0;ve>0&&(We.top+=ve,We.left+=ve);var me=Ve.clientHeight,we=Ve.clientWidth,xe=me/2,qe=we/2;he.y>xe&&he.x<=qe?(te.style.left=he.x+"px",te.style.bottom=me-he.y+"px",te.style.right="auto",te.style.top="auto"):he.y>xe&&he.x>qe?(te.style.right=we-he.x+"px",te.style.bottom=me-he.y+"px",te.style.left="auto",te.style.top="auto"):he.y<=xe&&he.x<=qe?(te.style.left=he.x+"px",te.style.top=he.y+"px",te.style.right="auto",te.style.bottom="auto"):(te.style.right=we-he.x+"px",te.style.top=he.y+"px",te.style.left="auto",te.style.bottom="auto")}}(pe);var de,ye=pe.target||pe.cyTarget,Ee=ae(te.children);try{for(Ee.s();!(de=Ee.n()).done;){var ue=de.value;ue instanceof N&&(ye===Z?ue.coreAsWell:ye.is(ue.selector))&&ue.show&&(te.display(),ee("anyVisibleChild",!0),ue.display())}}catch(Fe){Ee.e(Fe)}finally{Ee.f()}var Ae=Array.from(te.children).filter(function(Fe){if(Fe instanceof N)return Fe.isVisible()}),Pe=Ae.length;Ae.forEach(function(Fe,Ye){Fe instanceof N&&(Ye<Pe-1&&Fe.getHasTrailingDivider()?Fe.classList.add(y):Fe.getHasTrailingDivider()&&Fe.classList.remove(y))}),!X("anyVisibleChild")&&!function(Fe){return Fe.offsetWidth<=0&&Fe.offsetHeight<=0||Fe.style&&Fe.style.display||getComputedStyle(Fe).display}(te)&&te.hide()},Z.on(oe.evtType,W),ee("onCxttap",W),function(){var pe=function(ye){if(te.contains(ye.originalEvent.target))return!1;te.hide(),ee("cxtMenuPosition",void 0),ee("currentCyEvent",void 0)};Z.on("tapstart",pe),ee("eventCyTapStart",pe);var de=function(){te.hide()};Z.on("viewport",de),ee("onViewport",de)}(),U=function(pe){Z.container().contains(pe.target)||te.contains(pe.target)||(te.hide(),ee("cxtMenuPosition",void 0))},document.addEventListener("mouseup",U),ee("hideOnNonCyClick",U),function(){var pe,de=function(ye,Ee){var ue;if(typeof Symbol>"u"||ye[Symbol.iterator]==null){if(Array.isArray(ye)||(ue=function(Qe,Xe){if(Qe){if(typeof Qe=="string")return u(Qe,Xe);var We=Object.prototype.toString.call(Qe).slice(8,-1);return We==="Object"&&Qe.constructor&&(We=Qe.constructor.name),We==="Map"||We==="Set"?Array.from(Qe):We==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(We)?u(Qe,Xe):void 0}}(ye))||Ee){ue&&(ye=ue);var Ae=0,Pe=function(){};return{s:Pe,n:function(){return Ae>=ye.length?{done:!0}:{done:!1,value:ye[Ae++]}},e:function(Qe){throw Qe},f:Pe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fe,Ye=!0,Ve=!1;return{s:function(){ue=ye[Symbol.iterator]()},n:function(){var Qe=ue.next();return Ye=Qe.done,Qe},e:function(Qe){Ve=!0,Fe=Qe},f:function(){try{Ye||ue.return==null||ue.return()}finally{if(Ve)throw Fe}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(de.s();!(pe=de.n()).done;)pe.value.addEventListener("contextmenu",function(ye){return ye.preventDefault()})}catch(ye){de.e(ye)}finally{de.f()}}()}return function(pe){return{isActive:function(){return X("active")},appendMenuItem:function(de){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return ie(de,ye),pe},appendMenuItems:function(de){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return se(de,ye),pe},removeMenuItem:function(de){var ye=le(de);return te.removeMenuItem(ye),pe},setTrailingDivider:function(de,ye){var Ee=le(de);return Ee.setHasTrailingDivider(ye),ye?Ee.classList.add(y):Ee.classList.remove(y),pe},insertBeforeMenuItem:function(de,ye){var Ee=$(de),ue=le(ye);return te.insertMenuItem(Ee,{before:ue}),pe},moveToSubmenu:function(de){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Ee=le(de);if(ye===null)te.moveToSubmenu(Ee);else if(typeof ye=="string"){var ue=le(ye.toString());te.moveToSubmenu(Ee,ue)}else ye.coreAsWell!==void 0||ye.selector!==void 0?te.moveToSubmenu(Ee,null,ye):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return pe},moveBeforeOtherMenuItem:function(de,ye){var Ee=le(de),ue=le(ye);return te.moveBefore(Ee,ue),pe},disableMenuItem:function(de){return le(de).disable(),pe},enableMenuItem:function(de){return le(de).enable(),pe},hideMenuItem:function(de){return le(de).hide(),Se(),pe},showMenuItem:function(de){return le(de).display(),Se(),pe},destroy:function(){return ne(),pe},getOptions:function(){return f(p,oe)},swapItems:function(de,ye){te.ensureContains(de),te.ensureContains(ye);var Ee=document.getElementById(de),ue=document.getElementById(ye),Ae=Ee.nextSibling,Pe=ue.nextSibling,Fe=Ee.parentNode,Ye=ue.parentNode;if(!Fe.isSameNode(Ye))throw new Error("To swap, the items should have the same parent!");Ae&&Ae.isSameNode(ue)?Fe.insertBefore(ue,Ee):Pe&&Pe.isSameNode(Ee)?Fe.insertBefore(Ee,ue):(Fe.insertBefore(ue,Ee),Fe.insertBefore(Ee,Pe))}}}(this)}},579:(i,o,s)=>{var u=s(621).contextMenus,f=function(c){c&&c("core","contextMenus",u)};typeof cytoscape<"u"&&f(cytoscape),i.exports=f}},n={};function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return r[i](s,s.exports,a),s.exports}return a.d=(i,o)=>{for(var s in o)a.o(o,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},a.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a(579)})()})}(Pf)),Pf.exports}var aW=nW();const iW=Ao(aW);var kf={exports:{}};function U1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Jv,PS;function oW(){if(PS)return Jv;PS=1;function t(){this.__data__=[],this.size=0}return Jv=t,Jv}var ep,kS;function ks(){if(kS)return ep;kS=1;function t(e,r){return e===r||e!==e&&r!==r}return ep=t,ep}var tp,NS;function Hc(){if(NS)return tp;NS=1;var t=ks();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return tp=e,tp}var rp,OS;function sW(){if(OS)return rp;OS=1;var t=Hc(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var s=i.length-1;return o==s?i.pop():r.call(i,o,1),--this.size,!0}return rp=n,rp}var np,IS;function lW(){if(IS)return np;IS=1;var t=Hc();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return np=e,np}var ap,FS;function uW(){if(FS)return ap;FS=1;var t=Hc();function e(r){return t(this.__data__,r)>-1}return ap=e,ap}var ip,BS;function fW(){if(BS)return ip;BS=1;var t=Hc();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return ip=e,ip}var op,qS;function Uc(){if(qS)return op;qS=1;var t=oW(),e=sW(),r=lW(),n=uW(),a=fW();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,op=i,op}var sp,zS;function cW(){if(zS)return sp;zS=1;var t=Uc();function e(){this.__data__=new t,this.size=0}return sp=e,sp}var lp,GS;function dW(){if(GS)return lp;GS=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return lp=t,lp}var up,HS;function hW(){if(HS)return up;HS=1;function t(e){return this.__data__.get(e)}return up=t,up}var fp,US;function vW(){if(US)return fp;US=1;function t(e){return this.__data__.has(e)}return fp=t,fp}var cp,VS;function DN(){if(VS)return cp;VS=1;var t=typeof gf=="object"&&gf&&gf.Object===Object&&gf;return cp=t,cp}var dp,WS;function ha(){if(WS)return dp;WS=1;var t=DN(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return dp=r,dp}var hp,$S;function Ns(){if($S)return hp;$S=1;var t=ha(),e=t.Symbol;return hp=e,hp}var vp,YS;function pW(){if(YS)return vp;YS=1;var t=Ns(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var s=r.call(o,a),u=o[a];try{o[a]=void 0;var f=!0}catch{}var c=n.call(o);return f&&(s?o[a]=u:delete o[a]),c}return vp=i,vp}var pp,XS;function gW(){if(XS)return pp;XS=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return pp=r,pp}var gp,KS;function Lo(){if(KS)return gp;KS=1;var t=Ns(),e=pW(),r=gW(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(s){return s==null?s===void 0?a:n:i&&i in Object(s)?e(s):r(s)}return gp=o,gp}var yp,jS;function jn(){if(jS)return yp;jS=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return yp=t,yp}var mp,ZS;function yu(){if(ZS)return mp;ZS=1;var t=Lo(),e=jn(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(s){if(!e(s))return!1;var u=t(s);return u==n||u==a||u==r||u==i}return mp=o,mp}var bp,QS;function yW(){if(QS)return bp;QS=1;var t=ha(),e=t["__core-js_shared__"];return bp=e,bp}var wp,JS;function mW(){if(JS)return wp;JS=1;var t=yW(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return wp=r,wp}var xp,eA;function _N(){if(eA)return xp;eA=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return xp=r,xp}var Ep,tA;function bW(){if(tA)return Ep;tA=1;var t=yu(),e=mW(),r=jn(),n=_N(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,f=s.hasOwnProperty,c=RegExp("^"+u.call(f).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(g){if(!r(g)||e(g))return!1;var y=t(g)?c:i;return y.test(n(g))}return Ep=h,Ep}var Cp,rA;function wW(){if(rA)return Cp;rA=1;function t(e,r){return e==null?void 0:e[r]}return Cp=t,Cp}var Tp,nA;function Do(){if(nA)return Tp;nA=1;var t=bW(),e=wW();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Tp=r,Tp}var Sp,aA;function V1(){if(aA)return Sp;aA=1;var t=Do(),e=ha(),r=t(e,"Map");return Sp=r,Sp}var Ap,iA;function Vc(){if(iA)return Ap;iA=1;var t=Do(),e=t(Object,"create");return Ap=e,Ap}var Lp,oA;function xW(){if(oA)return Lp;oA=1;var t=Vc();function e(){this.__data__=t?t(null):{},this.size=0}return Lp=e,Lp}var Dp,sA;function EW(){if(sA)return Dp;sA=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Dp=t,Dp}var _p,lA;function CW(){if(lA)return _p;lA=1;var t=Vc(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var s=o[i];return s===e?void 0:s}return n.call(o,i)?o[i]:void 0}return _p=a,_p}var Mp,uA;function TW(){if(uA)return Mp;uA=1;var t=Vc(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Mp=n,Mp}var Rp,fA;function SW(){if(fA)return Rp;fA=1;var t=Vc(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Rp=r,Rp}var Pp,cA;function AW(){if(cA)return Pp;cA=1;var t=xW(),e=EW(),r=CW(),n=TW(),a=SW();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Pp=i,Pp}var kp,dA;function LW(){if(dA)return kp;dA=1;var t=AW(),e=Uc(),r=V1();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return kp=n,kp}var Np,hA;function DW(){if(hA)return Np;hA=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Np=t,Np}var Op,vA;function Wc(){if(vA)return Op;vA=1;var t=DW();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Op=e,Op}var Ip,pA;function _W(){if(pA)return Ip;pA=1;var t=Wc();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Ip=e,Ip}var Fp,gA;function MW(){if(gA)return Fp;gA=1;var t=Wc();function e(r){return t(this,r).get(r)}return Fp=e,Fp}var Bp,yA;function RW(){if(yA)return Bp;yA=1;var t=Wc();function e(r){return t(this,r).has(r)}return Bp=e,Bp}var qp,mA;function PW(){if(mA)return qp;mA=1;var t=Wc();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return qp=e,qp}var zp,bA;function W1(){if(bA)return zp;bA=1;var t=LW(),e=_W(),r=MW(),n=RW(),a=PW();function i(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var f=o[s];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,zp=i,zp}var Gp,wA;function kW(){if(wA)return Gp;wA=1;var t=Uc(),e=V1(),r=W1(),n=200;function a(i,o){var s=this.__data__;if(s instanceof t){var u=s.__data__;if(!e||u.length<n-1)return u.push([i,o]),this.size=++s.size,this;s=this.__data__=new r(u)}return s.set(i,o),this.size=s.size,this}return Gp=a,Gp}var Hp,xA;function $c(){if(xA)return Hp;xA=1;var t=Uc(),e=cW(),r=dW(),n=hW(),a=vW(),i=kW();function o(s){var u=this.__data__=new t(s);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,Hp=o,Hp}var Up,EA;function $1(){if(EA)return Up;EA=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a&&r(e[n],n,e)!==!1;);return e}return Up=t,Up}var Vp,CA;function MN(){if(CA)return Vp;CA=1;var t=Do(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Vp=e,Vp}var Wp,TA;function Yc(){if(TA)return Wp;TA=1;var t=MN();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return Wp=e,Wp}var $p,SA;function Xc(){if(SA)return $p;SA=1;var t=Yc(),e=ks(),r=Object.prototype,n=r.hasOwnProperty;function a(i,o,s){var u=i[o];(!(n.call(i,o)&&e(u,s))||s===void 0&&!(o in i))&&t(i,o,s)}return $p=a,$p}var Yp,AA;function mu(){if(AA)return Yp;AA=1;var t=Xc(),e=Yc();function r(n,a,i,o){var s=!i;i||(i={});for(var u=-1,f=a.length;++u<f;){var c=a[u],h=o?o(i[c],n[c],c,i,n):void 0;h===void 0&&(h=n[c]),s?e(i,c,h):t(i,c,h)}return i}return Yp=r,Yp}var Xp,LA;function NW(){if(LA)return Xp;LA=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return Xp=t,Xp}var Kp,DA;function Pa(){if(DA)return Kp;DA=1;function t(e){return e!=null&&typeof e=="object"}return Kp=t,Kp}var jp,_A;function OW(){if(_A)return jp;_A=1;var t=Lo(),e=Pa(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return jp=n,jp}var Zp,MA;function bu(){if(MA)return Zp;MA=1;var t=OW(),e=Pa(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t(function(){return arguments}())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return Zp=i,Zp}var Qp,RA;function _r(){if(RA)return Qp;RA=1;var t=Array.isArray;return Qp=t,Qp}var Sl={exports:{}},Jp,PA;function IW(){if(PA)return Jp;PA=1;function t(){return!1}return Jp=t,Jp}Sl.exports;var kA;function Os(){return kA||(kA=1,function(t,e){var r=ha(),n=IW(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,s=o?r.Buffer:void 0,u=s?s.isBuffer:void 0,f=u||n;t.exports=f}(Sl,Sl.exports)),Sl.exports}var eg,NA;function Kc(){if(NA)return eg;NA=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return eg=r,eg}var tg,OA;function Y1(){if(OA)return tg;OA=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return tg=e,tg}var rg,IA;function FW(){if(IA)return rg;IA=1;var t=Lo(),e=Y1(),r=Pa(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",s="[object Error]",u="[object Function]",f="[object Map]",c="[object Number]",h="[object Object]",g="[object RegExp]",y="[object Set]",p="[object String]",C="[object WeakMap]",E="[object ArrayBuffer]",v="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",T="[object Int8Array]",A="[object Int16Array]",M="[object Int32Array]",D="[object Uint8Array]",_="[object Uint8ClampedArray]",k="[object Uint16Array]",F="[object Uint32Array]",G={};G[x]=G[w]=G[T]=G[A]=G[M]=G[D]=G[_]=G[k]=G[F]=!0,G[n]=G[a]=G[E]=G[i]=G[v]=G[o]=G[s]=G[u]=G[f]=G[c]=G[h]=G[g]=G[y]=G[p]=G[C]=!1;function B(q){return r(q)&&e(q.length)&&!!G[t(q)]}return rg=B,rg}var ng,FA;function jc(){if(FA)return ng;FA=1;function t(e){return function(r){return e(r)}}return ng=t,ng}var Al={exports:{}};Al.exports;var BA;function X1(){return BA||(BA=1,function(t,e){var r=DN(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,s=function(){try{var u=a&&a.require&&a.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s}(Al,Al.exports)),Al.exports}var ag,qA;function wu(){if(qA)return ag;qA=1;var t=FW(),e=jc(),r=X1(),n=r&&r.isTypedArray,a=n?e(n):t;return ag=a,ag}var ig,zA;function RN(){if(zA)return ig;zA=1;var t=NW(),e=bu(),r=_r(),n=Os(),a=Kc(),i=wu(),o=Object.prototype,s=o.hasOwnProperty;function u(f,c){var h=r(f),g=!h&&e(f),y=!h&&!g&&n(f),p=!h&&!g&&!y&&i(f),C=h||g||y||p,E=C?t(f.length,String):[],v=E.length;for(var x in f)(c||s.call(f,x))&&!(C&&(x=="length"||y&&(x=="offset"||x=="parent")||p&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||a(x,v)))&&E.push(x);return E}return ig=u,ig}var og,GA;function Zc(){if(GA)return og;GA=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return og=e,og}var sg,HA;function PN(){if(HA)return sg;HA=1;function t(e,r){return function(n){return e(r(n))}}return sg=t,sg}var lg,UA;function BW(){if(UA)return lg;UA=1;var t=PN(),e=t(Object.keys,Object);return lg=e,lg}var ug,VA;function K1(){if(VA)return ug;VA=1;var t=Zc(),e=BW(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var s in Object(i))n.call(i,s)&&s!="constructor"&&o.push(s);return o}return ug=a,ug}var fg,WA;function ni(){if(WA)return fg;WA=1;var t=yu(),e=Y1();function r(n){return n!=null&&e(n.length)&&!t(n)}return fg=r,fg}var cg,$A;function Hi(){if($A)return cg;$A=1;var t=RN(),e=K1(),r=ni();function n(a){return r(a)?t(a):e(a)}return cg=n,cg}var dg,YA;function qW(){if(YA)return dg;YA=1;var t=mu(),e=Hi();function r(n,a){return n&&t(a,e(a),n)}return dg=r,dg}var hg,XA;function zW(){if(XA)return hg;XA=1;function t(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}return hg=t,hg}var vg,KA;function GW(){if(KA)return vg;KA=1;var t=jn(),e=Zc(),r=zW(),n=Object.prototype,a=n.hasOwnProperty;function i(o){if(!t(o))return r(o);var s=e(o),u=[];for(var f in o)f=="constructor"&&(s||!a.call(o,f))||u.push(f);return u}return vg=i,vg}var pg,jA;function _o(){if(jA)return pg;jA=1;var t=RN(),e=GW(),r=ni();function n(a){return r(a)?t(a,!0):e(a)}return pg=n,pg}var gg,ZA;function HW(){if(ZA)return gg;ZA=1;var t=mu(),e=_o();function r(n,a){return n&&t(a,e(a),n)}return gg=r,gg}var Ll={exports:{}};Ll.exports;var QA;function kN(){return QA||(QA=1,function(t,e){var r=ha(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;function u(f,c){if(c)return f.slice();var h=f.length,g=s?s(h):new f.constructor(h);return f.copy(g),g}t.exports=u}(Ll,Ll.exports)),Ll.exports}var yg,JA;function NN(){if(JA)return yg;JA=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return yg=t,yg}var mg,eL;function ON(){if(eL)return mg;eL=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var s=e[n];r(s,n,e)&&(o[i++]=s)}return o}return mg=t,mg}var bg,tL;function IN(){if(tL)return bg;tL=1;function t(){return[]}return bg=t,bg}var wg,rL;function j1(){if(rL)return wg;rL=1;var t=ON(),e=IN(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(s){return n.call(o,s)}))}:e;return wg=i,wg}var xg,nL;function UW(){if(nL)return xg;nL=1;var t=mu(),e=j1();function r(n,a){return t(n,e(n),a)}return xg=r,xg}var Eg,aL;function Z1(){if(aL)return Eg;aL=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return Eg=t,Eg}var Cg,iL;function Qc(){if(iL)return Cg;iL=1;var t=PN(),e=t(Object.getPrototypeOf,Object);return Cg=e,Cg}var Tg,oL;function FN(){if(oL)return Tg;oL=1;var t=Z1(),e=Qc(),r=j1(),n=IN(),a=Object.getOwnPropertySymbols,i=a?function(o){for(var s=[];o;)t(s,r(o)),o=e(o);return s}:n;return Tg=i,Tg}var Sg,sL;function VW(){if(sL)return Sg;sL=1;var t=mu(),e=FN();function r(n,a){return t(n,e(n),a)}return Sg=r,Sg}var Ag,lL;function BN(){if(lL)return Ag;lL=1;var t=Z1(),e=_r();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return Ag=r,Ag}var Lg,uL;function qN(){if(uL)return Lg;uL=1;var t=BN(),e=j1(),r=Hi();function n(a){return t(a,r,e)}return Lg=n,Lg}var Dg,fL;function WW(){if(fL)return Dg;fL=1;var t=BN(),e=FN(),r=_o();function n(a){return t(a,r,e)}return Dg=n,Dg}var _g,cL;function $W(){if(cL)return _g;cL=1;var t=Do(),e=ha(),r=t(e,"DataView");return _g=r,_g}var Mg,dL;function YW(){if(dL)return Mg;dL=1;var t=Do(),e=ha(),r=t(e,"Promise");return Mg=r,Mg}var Rg,hL;function zN(){if(hL)return Rg;hL=1;var t=Do(),e=ha(),r=t(e,"Set");return Rg=r,Rg}var Pg,vL;function XW(){if(vL)return Pg;vL=1;var t=Do(),e=ha(),r=t(e,"WeakMap");return Pg=r,Pg}var kg,pL;function Is(){if(pL)return kg;pL=1;var t=$W(),e=V1(),r=YW(),n=zN(),a=XW(),i=Lo(),o=_N(),s="[object Map]",u="[object Object]",f="[object Promise]",c="[object Set]",h="[object WeakMap]",g="[object DataView]",y=o(t),p=o(e),C=o(r),E=o(n),v=o(a),x=i;return(t&&x(new t(new ArrayBuffer(1)))!=g||e&&x(new e)!=s||r&&x(r.resolve())!=f||n&&x(new n)!=c||a&&x(new a)!=h)&&(x=function(w){var T=i(w),A=T==u?w.constructor:void 0,M=A?o(A):"";if(M)switch(M){case y:return g;case p:return s;case C:return f;case E:return c;case v:return h}return T}),kg=x,kg}var Ng,gL;function KW(){if(gL)return Ng;gL=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n){var a=n.length,i=new n.constructor(a);return a&&typeof n[0]=="string"&&e.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return Ng=r,Ng}var Og,yL;function GN(){if(yL)return Og;yL=1;var t=ha(),e=t.Uint8Array;return Og=e,Og}var Ig,mL;function Q1(){if(mL)return Ig;mL=1;var t=GN();function e(r){var n=new r.constructor(r.byteLength);return new t(n).set(new t(r)),n}return Ig=e,Ig}var Fg,bL;function jW(){if(bL)return Fg;bL=1;var t=Q1();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}return Fg=e,Fg}var Bg,wL;function ZW(){if(wL)return Bg;wL=1;var t=/\w*$/;function e(r){var n=new r.constructor(r.source,t.exec(r));return n.lastIndex=r.lastIndex,n}return Bg=e,Bg}var qg,xL;function QW(){if(xL)return qg;xL=1;var t=Ns(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function n(a){return r?Object(r.call(a)):{}}return qg=n,qg}var zg,EL;function HN(){if(EL)return zg;EL=1;var t=Q1();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}return zg=e,zg}var Gg,CL;function JW(){if(CL)return Gg;CL=1;var t=Q1(),e=jW(),r=ZW(),n=QW(),a=HN(),i="[object Boolean]",o="[object Date]",s="[object Map]",u="[object Number]",f="[object RegExp]",c="[object Set]",h="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",p="[object DataView]",C="[object Float32Array]",E="[object Float64Array]",v="[object Int8Array]",x="[object Int16Array]",w="[object Int32Array]",T="[object Uint8Array]",A="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]";function _(k,F,G){var B=k.constructor;switch(F){case y:return t(k);case i:case o:return new B(+k);case p:return e(k,G);case C:case E:case v:case x:case w:case T:case A:case M:case D:return a(k,G);case s:return new B;case u:case h:return new B(k);case f:return r(k);case c:return new B;case g:return n(k)}}return Gg=_,Gg}var Hg,TL;function UN(){if(TL)return Hg;TL=1;var t=jn(),e=Object.create,r=function(){function n(){}return function(a){if(!t(a))return{};if(e)return e(a);n.prototype=a;var i=new n;return n.prototype=void 0,i}}();return Hg=r,Hg}var Ug,SL;function VN(){if(SL)return Ug;SL=1;var t=UN(),e=Qc(),r=Zc();function n(a){return typeof a.constructor=="function"&&!r(a)?t(e(a)):{}}return Ug=n,Ug}var Vg,AL;function e3(){if(AL)return Vg;AL=1;var t=Is(),e=Pa(),r="[object Map]";function n(a){return e(a)&&t(a)==r}return Vg=n,Vg}var Wg,LL;function t3(){if(LL)return Wg;LL=1;var t=e3(),e=jc(),r=X1(),n=r&&r.isMap,a=n?e(n):t;return Wg=a,Wg}var $g,DL;function r3(){if(DL)return $g;DL=1;var t=Is(),e=Pa(),r="[object Set]";function n(a){return e(a)&&t(a)==r}return $g=n,$g}var Yg,_L;function n3(){if(_L)return Yg;_L=1;var t=r3(),e=jc(),r=X1(),n=r&&r.isSet,a=n?e(n):t;return Yg=a,Yg}var Xg,ML;function WN(){if(ML)return Xg;ML=1;var t=$c(),e=$1(),r=Xc(),n=qW(),a=HW(),i=kN(),o=NN(),s=UW(),u=VW(),f=qN(),c=WW(),h=Is(),g=KW(),y=JW(),p=VN(),C=_r(),E=Os(),v=t3(),x=jn(),w=n3(),T=Hi(),A=_o(),M=1,D=2,_=4,k="[object Arguments]",F="[object Array]",G="[object Boolean]",B="[object Date]",q="[object Error]",R="[object Function]",P="[object GeneratorFunction]",N="[object Map]",I="[object Number]",z="[object Object]",ae="[object RegExp]",re="[object Set]",K="[object String]",V="[object Symbol]",Z="[object WeakMap]",U="[object ArrayBuffer]",W="[object DataView]",X="[object Float32Array]",ee="[object Float64Array]",oe="[object Int8Array]",te="[object Int16Array]",ie="[object Int32Array]",se="[object Uint8Array]",$="[object Uint8ClampedArray]",ne="[object Uint16Array]",le="[object Uint32Array]",Se={};Se[k]=Se[F]=Se[U]=Se[W]=Se[G]=Se[B]=Se[X]=Se[ee]=Se[oe]=Se[te]=Se[ie]=Se[N]=Se[I]=Se[z]=Se[ae]=Se[re]=Se[K]=Se[V]=Se[se]=Se[$]=Se[ne]=Se[le]=!0,Se[q]=Se[R]=Se[Z]=!1;function De(be,Te,pe,de,ye,Ee){var ue,Ae=Te&M,Pe=Te&D,Fe=Te&_;if(pe&&(ue=ye?pe(be,de,ye,Ee):pe(be)),ue!==void 0)return ue;if(!x(be))return be;var Ye=C(be);if(Ye){if(ue=g(be),!Ae)return o(be,ue)}else{var Ve=h(be),Qe=Ve==R||Ve==P;if(E(be))return i(be,Ae);if(Ve==z||Ve==k||Qe&&!ye){if(ue=Pe||Qe?{}:p(be),!Ae)return Pe?u(be,a(ue,be)):s(be,n(ue,be))}else{if(!Se[Ve])return ye?be:{};ue=y(be,Ve,Ae)}}Ee||(Ee=new t);var Xe=Ee.get(be);if(Xe)return Xe;Ee.set(be,ue),w(be)?be.forEach(function(j){ue.add(De(j,Te,pe,j,be,Ee))}):v(be)&&be.forEach(function(j,ve){ue.set(ve,De(j,Te,pe,ve,be,Ee))});var We=Fe?Pe?c:f:Pe?A:T,he=Ye?void 0:We(be);return e(he||be,function(j,ve){he&&(ve=j,j=be[ve]),r(ue,ve,De(j,Te,pe,ve,be,Ee))}),ue}return Xg=De,Xg}var Kg,RL;function a3(){if(RL)return Kg;RL=1;var t=WN(),e=4;function r(n){return t(n,e)}return Kg=r,Kg}var jg,PL;function J1(){if(PL)return jg;PL=1;function t(e){return function(){return e}}return jg=t,jg}var Zg,kL;function i3(){if(kL)return Zg;kL=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),s=a(r),u=s.length;u--;){var f=s[e?u:++i];if(n(o[f],f,o)===!1)break}return r}}return Zg=t,Zg}var Qg,NL;function ew(){if(NL)return Qg;NL=1;var t=i3(),e=t();return Qg=e,Qg}var Jg,OL;function tw(){if(OL)return Jg;OL=1;var t=ew(),e=Hi();function r(n,a){return n&&t(n,a,e)}return Jg=r,Jg}var ey,IL;function o3(){if(IL)return ey;IL=1;var t=ni();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,s=n?o:-1,u=Object(a);(n?s--:++s<o)&&i(u[s],s,u)!==!1;);return a}}return ey=e,ey}var ty,FL;function Jc(){if(FL)return ty;FL=1;var t=tw(),e=o3(),r=e(t);return ty=r,ty}var ry,BL;function Mo(){if(BL)return ry;BL=1;function t(e){return e}return ry=t,ry}var ny,qL;function $N(){if(qL)return ny;qL=1;var t=Mo();function e(r){return typeof r=="function"?r:t}return ny=e,ny}var ay,zL;function YN(){if(zL)return ay;zL=1;var t=$1(),e=Jc(),r=$N(),n=_r();function a(i,o){var s=n(i)?t:e;return s(i,r(o))}return ay=a,ay}var iy,GL;function XN(){return GL||(GL=1,iy=YN()),iy}var oy,HL;function s3(){if(HL)return oy;HL=1;var t=Jc();function e(r,n){var a=[];return t(r,function(i,o,s){n(i,o,s)&&a.push(i)}),a}return oy=e,oy}var sy,UL;function l3(){if(UL)return sy;UL=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return sy=e,sy}var ly,VL;function u3(){if(VL)return ly;VL=1;function t(e){return this.__data__.has(e)}return ly=t,ly}var uy,WL;function KN(){if(WL)return uy;WL=1;var t=W1(),e=l3(),r=u3();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,uy=n,uy}var fy,$L;function f3(){if($L)return fy;$L=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return fy=t,fy}var cy,YL;function jN(){if(YL)return cy;YL=1;function t(e,r){return e.has(r)}return cy=t,cy}var dy,XL;function ZN(){if(XL)return dy;XL=1;var t=KN(),e=f3(),r=jN(),n=1,a=2;function i(o,s,u,f,c,h){var g=u&n,y=o.length,p=s.length;if(y!=p&&!(g&&p>y))return!1;var C=h.get(o),E=h.get(s);if(C&&E)return C==s&&E==o;var v=-1,x=!0,w=u&a?new t:void 0;for(h.set(o,s),h.set(s,o);++v<y;){var T=o[v],A=s[v];if(f)var M=g?f(A,T,v,s,o,h):f(T,A,v,o,s,h);if(M!==void 0){if(M)continue;x=!1;break}if(w){if(!e(s,function(D,_){if(!r(w,_)&&(T===D||c(T,D,u,f,h)))return w.push(_)})){x=!1;break}}else if(!(T===A||c(T,A,u,f,h))){x=!1;break}}return h.delete(o),h.delete(s),x}return dy=i,dy}var hy,KL;function c3(){if(KL)return hy;KL=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return hy=t,hy}var vy,jL;function rw(){if(jL)return vy;jL=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return vy=t,vy}var py,ZL;function d3(){if(ZL)return py;ZL=1;var t=Ns(),e=GN(),r=ks(),n=ZN(),a=c3(),i=rw(),o=1,s=2,u="[object Boolean]",f="[object Date]",c="[object Error]",h="[object Map]",g="[object Number]",y="[object RegExp]",p="[object Set]",C="[object String]",E="[object Symbol]",v="[object ArrayBuffer]",x="[object DataView]",w=t?t.prototype:void 0,T=w?w.valueOf:void 0;function A(M,D,_,k,F,G,B){switch(_){case x:if(M.byteLength!=D.byteLength||M.byteOffset!=D.byteOffset)return!1;M=M.buffer,D=D.buffer;case v:return!(M.byteLength!=D.byteLength||!G(new e(M),new e(D)));case u:case f:case g:return r(+M,+D);case c:return M.name==D.name&&M.message==D.message;case y:case C:return M==D+"";case h:var q=a;case p:var R=k&o;if(q||(q=i),M.size!=D.size&&!R)return!1;var P=B.get(M);if(P)return P==D;k|=s,B.set(M,D);var N=n(q(M),q(D),k,F,G,B);return B.delete(M),N;case E:if(T)return T.call(M)==T.call(D)}return!1}return py=A,py}var gy,QL;function h3(){if(QL)return gy;QL=1;var t=qN(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,s,u,f,c){var h=s&e,g=t(i),y=g.length,p=t(o),C=p.length;if(y!=C&&!h)return!1;for(var E=y;E--;){var v=g[E];if(!(h?v in o:n.call(o,v)))return!1}var x=c.get(i),w=c.get(o);if(x&&w)return x==o&&w==i;var T=!0;c.set(i,o),c.set(o,i);for(var A=h;++E<y;){v=g[E];var M=i[v],D=o[v];if(u)var _=h?u(D,M,v,o,i,c):u(M,D,v,i,o,c);if(!(_===void 0?M===D||f(M,D,s,u,c):_)){T=!1;break}A||(A=v=="constructor")}if(T&&!A){var k=i.constructor,F=o.constructor;k!=F&&"constructor"in i&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof F=="function"&&F instanceof F)&&(T=!1)}return c.delete(i),c.delete(o),T}return gy=a,gy}var yy,JL;function v3(){if(JL)return yy;JL=1;var t=$c(),e=ZN(),r=d3(),n=h3(),a=Is(),i=_r(),o=Os(),s=wu(),u=1,f="[object Arguments]",c="[object Array]",h="[object Object]",g=Object.prototype,y=g.hasOwnProperty;function p(C,E,v,x,w,T){var A=i(C),M=i(E),D=A?c:a(C),_=M?c:a(E);D=D==f?h:D,_=_==f?h:_;var k=D==h,F=_==h,G=D==_;if(G&&o(C)){if(!o(E))return!1;A=!0,k=!1}if(G&&!k)return T||(T=new t),A||s(C)?e(C,E,v,x,w,T):r(C,E,D,v,x,w,T);if(!(v&u)){var B=k&&y.call(C,"__wrapped__"),q=F&&y.call(E,"__wrapped__");if(B||q){var R=B?C.value():C,P=q?E.value():E;return T||(T=new t),w(R,P,v,x,T)}}return G?(T||(T=new t),n(C,E,v,x,w,T)):!1}return yy=p,yy}var my,eD;function QN(){if(eD)return my;eD=1;var t=v3(),e=Pa();function r(n,a,i,o,s){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,s)}return my=r,my}var by,tD;function p3(){if(tD)return by;tD=1;var t=$c(),e=QN(),r=1,n=2;function a(i,o,s,u){var f=s.length,c=f,h=!u;if(i==null)return!c;for(i=Object(i);f--;){var g=s[f];if(h&&g[2]?g[1]!==i[g[0]]:!(g[0]in i))return!1}for(;++f<c;){g=s[f];var y=g[0],p=i[y],C=g[1];if(h&&g[2]){if(p===void 0&&!(y in i))return!1}else{var E=new t;if(u)var v=u(p,C,y,i,o,E);if(!(v===void 0?e(C,p,r|n,u,E):v))return!1}}return!0}return by=a,by}var wy,rD;function JN(){if(rD)return wy;rD=1;var t=jn();function e(r){return r===r&&!t(r)}return wy=e,wy}var xy,nD;function g3(){if(nD)return xy;nD=1;var t=JN(),e=Hi();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],s=n[o];a[i]=[o,s,t(s)]}return a}return xy=r,xy}var Ey,aD;function eO(){if(aD)return Ey;aD=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return Ey=t,Ey}var Cy,iD;function y3(){if(iD)return Cy;iD=1;var t=p3(),e=g3(),r=eO();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return Cy=n,Cy}var Ty,oD;function Fs(){if(oD)return Ty;oD=1;var t=Lo(),e=Pa(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Ty=n,Ty}var Sy,sD;function nw(){if(sD)return Sy;sD=1;var t=_r(),e=Fs(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return Sy=a,Sy}var Ay,lD;function m3(){if(lD)return Ay;lD=1;var t=W1(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,s=a?a.apply(this,o):o[0],u=i.cache;if(u.has(s))return u.get(s);var f=n.apply(this,o);return i.cache=u.set(s,f)||u,f};return i.cache=new(r.Cache||t),i}return r.Cache=t,Ay=r,Ay}var Ly,uD;function b3(){if(uD)return Ly;uD=1;var t=m3(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return Ly=r,Ly}var Dy,fD;function w3(){if(fD)return Dy;fD=1;var t=b3(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,s,u,f){i.push(u?f.replace(r,"$1"):s||o)}),i});return Dy=n,Dy}var _y,cD;function ed(){if(cD)return _y;cD=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return _y=t,_y}var My,dD;function x3(){if(dD)return My;dD=1;var t=Ns(),e=ed(),r=_r(),n=Fs(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(s){if(typeof s=="string")return s;if(r(s))return e(s,o)+"";if(n(s))return i?i.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return My=o,My}var Ry,hD;function tO(){if(hD)return Ry;hD=1;var t=x3();function e(r){return r==null?"":t(r)}return Ry=e,Ry}var Py,vD;function td(){if(vD)return Py;vD=1;var t=_r(),e=nw(),r=w3(),n=tO();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return Py=a,Py}var ky,pD;function xu(){if(pD)return ky;pD=1;var t=Fs();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return ky=e,ky}var Ny,gD;function rd(){if(gD)return Ny;gD=1;var t=td(),e=xu();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return Ny=r,Ny}var Oy,yD;function E3(){if(yD)return Oy;yD=1;var t=rd();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return Oy=e,Oy}var Iy,mD;function C3(){if(mD)return Iy;mD=1;function t(e,r){return e!=null&&r in Object(e)}return Iy=t,Iy}var Fy,bD;function rO(){if(bD)return Fy;bD=1;var t=td(),e=bu(),r=_r(),n=Kc(),a=Y1(),i=xu();function o(s,u,f){u=t(u,s);for(var c=-1,h=u.length,g=!1;++c<h;){var y=i(u[c]);if(!(g=s!=null&&f(s,y)))break;s=s[y]}return g||++c!=h?g:(h=s==null?0:s.length,!!h&&a(h)&&n(y,h)&&(r(s)||e(s)))}return Fy=o,Fy}var By,wD;function nO(){if(wD)return By;wD=1;var t=C3(),e=rO();function r(n,a){return n!=null&&e(n,a,t)}return By=r,By}var qy,xD;function T3(){if(xD)return qy;xD=1;var t=QN(),e=E3(),r=nO(),n=nw(),a=JN(),i=eO(),o=xu(),s=1,u=2;function f(c,h){return n(c)&&a(h)?i(o(c),h):function(g){var y=e(g,c);return y===void 0&&y===h?r(g,c):t(h,y,s|u)}}return qy=f,qy}var zy,ED;function aO(){if(ED)return zy;ED=1;function t(e){return function(r){return r==null?void 0:r[e]}}return zy=t,zy}var Gy,CD;function S3(){if(CD)return Gy;CD=1;var t=rd();function e(r){return function(n){return t(n,r)}}return Gy=e,Gy}var Hy,TD;function A3(){if(TD)return Hy;TD=1;var t=aO(),e=S3(),r=nw(),n=xu();function a(i){return r(i)?t(n(i)):e(i)}return Hy=a,Hy}var Uy,SD;function ai(){if(SD)return Uy;SD=1;var t=y3(),e=T3(),r=Mo(),n=_r(),a=A3();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return Uy=i,Uy}var Vy,AD;function iO(){if(AD)return Vy;AD=1;var t=ON(),e=s3(),r=ai(),n=_r();function a(i,o){var s=n(i)?t:e;return s(i,r(o,3))}return Vy=a,Vy}var Wy,LD;function L3(){if(LD)return Wy;LD=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n,a){return n!=null&&e.call(n,a)}return Wy=r,Wy}var $y,DD;function oO(){if(DD)return $y;DD=1;var t=L3(),e=rO();function r(n,a){return n!=null&&e(n,a,t)}return $y=r,$y}var Yy,_D;function D3(){if(_D)return Yy;_D=1;var t=K1(),e=Is(),r=bu(),n=_r(),a=ni(),i=Os(),o=Zc(),s=wu(),u="[object Map]",f="[object Set]",c=Object.prototype,h=c.hasOwnProperty;function g(y){if(y==null)return!0;if(a(y)&&(n(y)||typeof y=="string"||typeof y.splice=="function"||i(y)||s(y)||r(y)))return!y.length;var p=e(y);if(p==u||p==f)return!y.size;if(o(y))return!t(y).length;for(var C in y)if(h.call(y,C))return!1;return!0}return Yy=g,Yy}var Xy,MD;function sO(){if(MD)return Xy;MD=1;function t(e){return e===void 0}return Xy=t,Xy}var Ky,RD;function lO(){if(RD)return Ky;RD=1;var t=Jc(),e=ni();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(s,u,f){o[++i]=a(s,u,f)}),o}return Ky=r,Ky}var jy,PD;function uO(){if(PD)return jy;PD=1;var t=ed(),e=ai(),r=lO(),n=_r();function a(i,o){var s=n(i)?t:r;return s(i,e(o,3))}return jy=a,jy}var Zy,kD;function _3(){if(kD)return Zy;kD=1;function t(e,r,n,a){var i=-1,o=e==null?0:e.length;for(a&&o&&(n=e[++i]);++i<o;)n=r(n,e[i],i,e);return n}return Zy=t,Zy}var Qy,ND;function M3(){if(ND)return Qy;ND=1;function t(e,r,n,a,i){return i(e,function(o,s,u){n=a?(a=!1,o):r(n,o,s,u)}),n}return Qy=t,Qy}var Jy,OD;function fO(){if(OD)return Jy;OD=1;var t=_3(),e=Jc(),r=ai(),n=M3(),a=_r();function i(o,s,u){var f=a(o)?t:n,c=arguments.length<3;return f(o,r(s,4),u,c,e)}return Jy=i,Jy}var em,ID;function R3(){if(ID)return em;ID=1;var t=Lo(),e=_r(),r=Pa(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return em=a,em}var tm,FD;function P3(){if(FD)return tm;FD=1;var t=aO(),e=t("length");return tm=e,tm}var rm,BD;function k3(){if(BD)return rm;BD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+t+a+i+"]");function u(f){return s.test(f)}return rm=u,rm}var nm,qD;function N3(){if(qD)return nm;qD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="["+t+"]",s="["+a+"]",u="\\ud83c[\\udffb-\\udfff]",f="(?:"+s+"|"+u+")",c="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",p=f+"?",C="["+i+"]?",E="(?:"+y+"(?:"+[c,h,g].join("|")+")"+C+p+")*",v=C+p+E,x="(?:"+[c+s+"?",s,h,g,o].join("|")+")",w=RegExp(u+"(?="+u+")|"+x+v,"g");function T(A){for(var M=w.lastIndex=0;w.test(A);)++M;return M}return nm=T,nm}var am,zD;function O3(){if(zD)return am;zD=1;var t=P3(),e=k3(),r=N3();function n(a){return e(a)?r(a):t(a)}return am=n,am}var im,GD;function I3(){if(GD)return im;GD=1;var t=K1(),e=Is(),r=ni(),n=R3(),a=O3(),i="[object Map]",o="[object Set]";function s(u){if(u==null)return 0;if(r(u))return n(u)?a(u):u.length;var f=e(u);return f==i||f==o?u.size:t(u).length}return im=s,im}var om,HD;function F3(){if(HD)return om;HD=1;var t=$1(),e=UN(),r=tw(),n=ai(),a=Qc(),i=_r(),o=Os(),s=yu(),u=jn(),f=wu();function c(h,g,y){var p=i(h),C=p||o(h)||f(h);if(g=n(g,4),y==null){var E=h&&h.constructor;C?y=p?new E:[]:u(h)?y=s(E)?e(a(h)):{}:y={}}return(C?t:r)(h,function(v,x,w){return g(y,v,x,w)}),y}return om=c,om}var sm,UD;function B3(){if(UD)return sm;UD=1;var t=Ns(),e=bu(),r=_r(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return sm=a,sm}var lm,VD;function aw(){if(VD)return lm;VD=1;var t=Z1(),e=B3();function r(n,a,i,o,s){var u=-1,f=n.length;for(i||(i=e),s||(s=[]);++u<f;){var c=n[u];a>0&&i(c)?a>1?r(c,a-1,i,o,s):t(s,c):o||(s[s.length]=c)}return s}return lm=r,lm}var um,WD;function q3(){if(WD)return um;WD=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return um=t,um}var fm,$D;function cO(){if($D)return fm;$D=1;var t=q3(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,s=-1,u=e(o.length-a,0),f=Array(u);++s<u;)f[s]=o[a+s];s=-1;for(var c=Array(a+1);++s<a;)c[s]=o[s];return c[a]=i(f),t(n,this,c)}}return fm=r,fm}var cm,YD;function z3(){if(YD)return cm;YD=1;var t=J1(),e=MN(),r=Mo(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return cm=n,cm}var dm,XD;function G3(){if(XD)return dm;XD=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var s=r(),u=e-(s-o);if(o=s,u>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return dm=n,dm}var hm,KD;function dO(){if(KD)return hm;KD=1;var t=z3(),e=G3(),r=e(t);return hm=r,hm}var vm,jD;function nd(){if(jD)return vm;jD=1;var t=Mo(),e=cO(),r=dO();function n(a,i){return r(e(a,i,t),a+"")}return vm=n,vm}var pm,ZD;function hO(){if(ZD)return pm;ZD=1;function t(e,r,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return pm=t,pm}var gm,QD;function H3(){if(QD)return gm;QD=1;function t(e){return e!==e}return gm=t,gm}var ym,JD;function U3(){if(JD)return ym;JD=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return ym=t,ym}var mm,e_;function V3(){if(e_)return mm;e_=1;var t=hO(),e=H3(),r=U3();function n(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return mm=n,mm}var bm,t_;function W3(){if(t_)return bm;t_=1;var t=V3();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return bm=e,bm}var wm,r_;function $3(){if(r_)return wm;r_=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return wm=t,wm}var xm,n_;function Y3(){if(n_)return xm;n_=1;function t(){}return xm=t,xm}var Em,a_;function X3(){if(a_)return Em;a_=1;var t=zN(),e=Y3(),r=rw(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return Em=a,Em}var Cm,i_;function K3(){if(i_)return Cm;i_=1;var t=KN(),e=W3(),r=$3(),n=jN(),a=X3(),i=rw(),o=200;function s(u,f,c){var h=-1,g=e,y=u.length,p=!0,C=[],E=C;if(c)p=!1,g=r;else if(y>=o){var v=f?null:a(u);if(v)return i(v);p=!1,g=n,E=new t}else E=f?[]:C;e:for(;++h<y;){var x=u[h],w=f?f(x):x;if(x=c||x!==0?x:0,p&&w===w){for(var T=E.length;T--;)if(E[T]===w)continue e;f&&E.push(w),C.push(x)}else g(E,w,c)||(E!==C&&E.push(w),C.push(x))}return C}return Cm=s,Cm}var Tm,o_;function vO(){if(o_)return Tm;o_=1;var t=ni(),e=Pa();function r(n){return e(n)&&t(n)}return Tm=r,Tm}var Sm,s_;function j3(){if(s_)return Sm;s_=1;var t=aw(),e=nd(),r=K3(),n=vO(),a=e(function(i){return r(t(i,1,n,!0))});return Sm=a,Sm}var Am,l_;function Z3(){if(l_)return Am;l_=1;var t=ed();function e(r,n){return t(n,function(a){return r[a]})}return Am=e,Am}var Lm,u_;function pO(){if(u_)return Lm;u_=1;var t=Z3(),e=Hi();function r(n){return n==null?[]:t(n,e(n))}return Lm=r,Lm}var Dm,f_;function Zn(){if(f_)return Dm;f_=1;var t;if(typeof U1=="function")try{t={clone:a3(),constant:J1(),each:XN(),filter:iO(),has:oO(),isArray:_r(),isEmpty:D3(),isFunction:yu(),isUndefined:sO(),keys:Hi(),map:uO(),reduce:fO(),size:I3(),transform:F3(),union:j3(),values:pO()}}catch{}return t||(t=window._),Dm=t,Dm}var _m,c_;function iw(){if(c_)return _m;c_=1;var t=Zn();_m=a;var e="\0",r="\0",n="";function a(c){this._isDirected=t.has(c,"directed")?c.directed:!0,this._isMultigraph=t.has(c,"multigraph")?c.multigraph:!1,this._isCompound=t.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(c){return this._label=c,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultNodeLabelFn=c,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return t.keys(this._nodes)},a.prototype.sources=function(){var c=this;return t.filter(this.nodes(),function(h){return t.isEmpty(c._in[h])})},a.prototype.sinks=function(){var c=this;return t.filter(this.nodes(),function(h){return t.isEmpty(c._out[h])})},a.prototype.setNodes=function(c,h){var g=arguments,y=this;return t.each(c,function(p){g.length>1?y.setNode(p,h):y.setNode(p)}),this},a.prototype.setNode=function(c,h){return t.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=h),this):(this._nodes[c]=arguments.length>1?h:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=r,this._children[c]={},this._children[r][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},a.prototype.node=function(c){return this._nodes[c]},a.prototype.hasNode=function(c){return t.has(this._nodes,c)},a.prototype.removeNode=function(c){var h=this;if(t.has(this._nodes,c)){var g=function(y){h.removeEdge(h._edgeObjs[y])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],t.each(this.children(c),function(y){h.setParent(y)}),delete this._children[c]),t.each(t.keys(this._in[c]),g),delete this._in[c],delete this._preds[c],t.each(t.keys(this._out[c]),g),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},a.prototype.setParent=function(c,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(h))h=r;else{h+="";for(var g=h;!t.isUndefined(g);g=this.parent(g))if(g===c)throw new Error("Setting "+h+" as parent of "+c+" would create a cycle");this.setNode(h)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=h,this._children[h][c]=!0,this},a.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},a.prototype.parent=function(c){if(this._isCompound){var h=this._parent[c];if(h!==r)return h}},a.prototype.children=function(c){if(t.isUndefined(c)&&(c=r),this._isCompound){var h=this._children[c];if(h)return t.keys(h)}else{if(c===r)return this.nodes();if(this.hasNode(c))return[]}},a.prototype.predecessors=function(c){var h=this._preds[c];if(h)return t.keys(h)},a.prototype.successors=function(c){var h=this._sucs[c];if(h)return t.keys(h)},a.prototype.neighbors=function(c){var h=this.predecessors(c);if(h)return t.union(h,this.successors(c))},a.prototype.isLeaf=function(c){var h;return this.isDirected()?h=this.successors(c):h=this.neighbors(c),h.length===0},a.prototype.filterNodes=function(c){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var g=this;t.each(this._nodes,function(C,E){c(E)&&h.setNode(E,C)}),t.each(this._edgeObjs,function(C){h.hasNode(C.v)&&h.hasNode(C.w)&&h.setEdge(C,g.edge(C))});var y={};function p(C){var E=g.parent(C);return E===void 0||h.hasNode(E)?(y[C]=E,E):E in y?y[E]:p(E)}return this._isCompound&&t.each(h.nodes(),function(C){h.setParent(C,p(C))}),h},a.prototype.setDefaultEdgeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultEdgeLabelFn=c,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return t.values(this._edgeObjs)},a.prototype.setPath=function(c,h){var g=this,y=arguments;return t.reduce(c,function(p,C){return y.length>1?g.setEdge(p,C,h):g.setEdge(p,C),C}),this},a.prototype.setEdge=function(){var c,h,g,y,p=!1,C=arguments[0];typeof C=="object"&&C!==null&&"v"in C?(c=C.v,h=C.w,g=C.name,arguments.length===2&&(y=arguments[1],p=!0)):(c=C,h=arguments[1],g=arguments[3],arguments.length>2&&(y=arguments[2],p=!0)),c=""+c,h=""+h,t.isUndefined(g)||(g=""+g);var E=s(this._isDirected,c,h,g);if(t.has(this._edgeLabels,E))return p&&(this._edgeLabels[E]=y),this;if(!t.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(h),this._edgeLabels[E]=p?y:this._defaultEdgeLabelFn(c,h,g);var v=u(this._isDirected,c,h,g);return c=v.v,h=v.w,Object.freeze(v),this._edgeObjs[E]=v,i(this._preds[h],c),i(this._sucs[c],h),this._in[h][E]=v,this._out[c][E]=v,this._edgeCount++,this},a.prototype.edge=function(c,h,g){var y=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,h,g);return this._edgeLabels[y]},a.prototype.hasEdge=function(c,h,g){var y=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,h,g);return t.has(this._edgeLabels,y)},a.prototype.removeEdge=function(c,h,g){var y=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,h,g),p=this._edgeObjs[y];return p&&(c=p.v,h=p.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[h],c),o(this._sucs[c],h),delete this._in[h][y],delete this._out[c][y],this._edgeCount--),this},a.prototype.inEdges=function(c,h){var g=this._in[c];if(g){var y=t.values(g);return h?t.filter(y,function(p){return p.v===h}):y}},a.prototype.outEdges=function(c,h){var g=this._out[c];if(g){var y=t.values(g);return h?t.filter(y,function(p){return p.w===h}):y}},a.prototype.nodeEdges=function(c,h){var g=this.inEdges(c,h);if(g)return g.concat(this.outEdges(c,h))};function i(c,h){c[h]?c[h]++:c[h]=1}function o(c,h){--c[h]||delete c[h]}function s(c,h,g,y){var p=""+h,C=""+g;if(!c&&p>C){var E=p;p=C,C=E}return p+n+C+n+(t.isUndefined(y)?e:y)}function u(c,h,g,y){var p=""+h,C=""+g;if(!c&&p>C){var E=p;p=C,C=E}var v={v:p,w:C};return y&&(v.name=y),v}function f(c,h){return s(c,h.v,h.w,h.name)}return _m}var Mm,d_;function Q3(){return d_||(d_=1,Mm="2.1.8"),Mm}var Rm,h_;function J3(){return h_||(h_=1,Rm={Graph:iw(),version:Q3()}),Rm}var Pm,v_;function e$(){if(v_)return Pm;v_=1;var t=Zn(),e=iw();Pm={write:r,read:i};function r(o){var s={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:a(o)};return t.isUndefined(o.graph())||(s.value=t.clone(o.graph())),s}function n(o){return t.map(o.nodes(),function(s){var u=o.node(s),f=o.parent(s),c={v:s};return t.isUndefined(u)||(c.value=u),t.isUndefined(f)||(c.parent=f),c})}function a(o){return t.map(o.edges(),function(s){var u=o.edge(s),f={v:s.v,w:s.w};return t.isUndefined(s.name)||(f.name=s.name),t.isUndefined(u)||(f.value=u),f})}function i(o){var s=new e(o.options).setGraph(o.value);return t.each(o.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),t.each(o.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return Pm}var km,p_;function t$(){if(p_)return km;p_=1;var t=Zn();km=e;function e(r){var n={},a=[],i;function o(s){t.has(n,s)||(n[s]=!0,i.push(s),t.each(r.successors(s),o),t.each(r.predecessors(s),o))}return t.each(r.nodes(),function(s){i=[],o(s),i.length&&a.push(i)}),a}return km}var Nm,g_;function gO(){if(g_)return Nm;g_=1;var t=Zn();Nm=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(r){return r.key})},e.prototype.has=function(r){return t.has(this._keyIndices,r)},e.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(r,n){var a=this._keyIndices;if(r=String(r),!t.has(a,r)){var i=this._arr,o=i.length;return a[r]=o,i.push({key:r,priority:n}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},e.prototype.decrease=function(r,n){var a=this._keyIndices[r];if(n>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[a].priority+" New: "+n);this._arr[a].priority=n,this._decrease(a)},e.prototype._heapify=function(r){var n=this._arr,a=2*r,i=a+1,o=r;a<n.length&&(o=n[a].priority<n[o].priority?a:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==r&&(this._swap(r,o),this._heapify(o)))},e.prototype._decrease=function(r){for(var n=this._arr,a=n[r].priority,i;r!==0&&(i=r>>1,!(n[i].priority<a));)this._swap(r,i),r=i},e.prototype._swap=function(r,n){var a=this._arr,i=this._keyIndices,o=a[r],s=a[n];a[r]=s,a[n]=o,i[s.key]=r,i[o.key]=n},Nm}var Om,y_;function yO(){if(y_)return Om;y_=1;var t=Zn(),e=gO();Om=n;var r=t.constant(1);function n(i,o,s,u){return a(i,String(o),s||r,u||function(f){return i.outEdges(f)})}function a(i,o,s,u){var f={},c=new e,h,g,y=function(p){var C=p.v!==h?p.v:p.w,E=f[C],v=s(p),x=g.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+v);x<E.distance&&(E.distance=x,E.predecessor=h,c.decrease(C,x))};for(i.nodes().forEach(function(p){var C=p===o?0:Number.POSITIVE_INFINITY;f[p]={distance:C},c.add(p,C)});c.size()>0&&(h=c.removeMin(),g=f[h],g.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(y);return f}return Om}var Im,m_;function r$(){if(m_)return Im;m_=1;var t=yO(),e=Zn();Im=r;function r(n,a,i){return e.transform(n.nodes(),function(o,s){o[s]=t(n,s,a,i)},{})}return Im}var Fm,b_;function mO(){if(b_)return Fm;b_=1;var t=Zn();Fm=e;function e(r){var n=0,a=[],i={},o=[];function s(u){var f=i[u]={onStack:!0,lowlink:n,index:n++};if(a.push(u),r.successors(u).forEach(function(g){t.has(i,g)?i[g].onStack&&(f.lowlink=Math.min(f.lowlink,i[g].index)):(s(g),f.lowlink=Math.min(f.lowlink,i[g].lowlink))}),f.lowlink===f.index){var c=[],h;do h=a.pop(),i[h].onStack=!1,c.push(h);while(u!==h);o.push(c)}}return r.nodes().forEach(function(u){t.has(i,u)||s(u)}),o}return Fm}var Bm,w_;function n$(){if(w_)return Bm;w_=1;var t=Zn(),e=mO();Bm=r;function r(n){return t.filter(e(n),function(a){return a.length>1||a.length===1&&n.hasEdge(a[0],a[0])})}return Bm}var qm,x_;function a$(){if(x_)return qm;x_=1;var t=Zn();qm=r;var e=t.constant(1);function r(a,i,o){return n(a,i||e,o||function(s){return a.outEdges(s)})}function n(a,i,o){var s={},u=a.nodes();return u.forEach(function(f){s[f]={},s[f][f]={distance:0},u.forEach(function(c){f!==c&&(s[f][c]={distance:Number.POSITIVE_INFINITY})}),o(f).forEach(function(c){var h=c.v===f?c.w:c.v,g=i(c);s[f][h]={distance:g,predecessor:f}})}),u.forEach(function(f){var c=s[f];u.forEach(function(h){var g=s[h];u.forEach(function(y){var p=g[f],C=c[y],E=g[y],v=p.distance+C.distance;v<E.distance&&(E.distance=v,E.predecessor=C.predecessor)})})}),s}return qm}var zm,E_;function bO(){if(E_)return zm;E_=1;var t=Zn();zm=e,e.CycleException=r;function e(n){var a={},i={},o=[];function s(u){if(t.has(i,u))throw new r;t.has(a,u)||(i[u]=!0,a[u]=!0,t.each(n.predecessors(u),s),delete i[u],o.push(u))}if(t.each(n.sinks(),s),t.size(a)!==n.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,zm}var Gm,C_;function i$(){if(C_)return Gm;C_=1;var t=bO();Gm=e;function e(r){try{t(r)}catch(n){if(n instanceof t.CycleException)return!1;throw n}return!0}return Gm}var Hm,T_;function wO(){if(T_)return Hm;T_=1;var t=Zn();Hm=e;function e(n,a,i){t.isArray(a)||(a=[a]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),s=[],u={};return t.each(a,function(f){if(!n.hasNode(f))throw new Error("Graph does not have node: "+f);r(n,f,i==="post",u,o,s)}),s}function r(n,a,i,o,s,u){t.has(o,a)||(o[a]=!0,i||u.push(a),t.each(s(a),function(f){r(n,f,i,o,s,u)}),i&&u.push(a))}return Hm}var Um,S_;function o$(){if(S_)return Um;S_=1;var t=wO();Um=e;function e(r,n){return t(r,n,"post")}return Um}var Vm,A_;function s$(){if(A_)return Vm;A_=1;var t=wO();Vm=e;function e(r,n){return t(r,n,"pre")}return Vm}var Wm,L_;function l$(){if(L_)return Wm;L_=1;var t=Zn(),e=iw(),r=gO();Wm=n;function n(a,i){var o=new e,s={},u=new r,f;function c(g){var y=g.v===f?g.w:g.v,p=u.priority(y);if(p!==void 0){var C=i(g);C<p&&(s[y]=f,u.decrease(y,C))}}if(a.nodeCount()===0)return o;t.each(a.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),o.setNode(g)}),u.decrease(a.nodes()[0],0);for(var h=!1;u.size()>0;){if(f=u.removeMin(),t.has(s,f))o.setEdge(f,s[f]);else{if(h)throw new Error("Input graph is not connected: "+a);h=!0}a.nodeEdges(f).forEach(c)}return o}return Wm}var $m,D_;function u$(){return D_||(D_=1,$m={components:t$(),dijkstra:yO(),dijkstraAll:r$(),findCycles:n$(),floydWarshall:a$(),isAcyclic:i$(),postorder:o$(),preorder:s$(),prim:l$(),tarjan:mO(),topsort:bO()}),$m}var Ym,__;function f$(){if(__)return Ym;__=1;var t=J3();return Ym={Graph:t.Graph,json:e$(),alg:u$(),version:t.version},Ym}var Xm,M_;function da(){if(M_)return Xm;M_=1;var t;if(typeof U1=="function")try{t=f$()}catch{}return t||(t=window.graphlib),Xm=t,Xm}var Km,R_;function c$(){if(R_)return Km;R_=1;var t=WN(),e=1,r=4;function n(a){return t(a,e|r)}return Km=n,Km}var jm,P_;function ad(){if(P_)return jm;P_=1;var t=ks(),e=ni(),r=Kc(),n=jn();function a(i,o,s){if(!n(s))return!1;var u=typeof o;return(u=="number"?e(s)&&r(o,s.length):u=="string"&&o in s)?t(s[o],i):!1}return jm=a,jm}var Zm,k_;function d$(){if(k_)return Zm;k_=1;var t=nd(),e=ks(),r=ad(),n=_o(),a=Object.prototype,i=a.hasOwnProperty,o=t(function(s,u){s=Object(s);var f=-1,c=u.length,h=c>2?u[2]:void 0;for(h&&r(u[0],u[1],h)&&(c=1);++f<c;)for(var g=u[f],y=n(g),p=-1,C=y.length;++p<C;){var E=y[p],v=s[E];(v===void 0||e(v,a[E])&&!i.call(s,E))&&(s[E]=g[E])}return s});return Zm=o,Zm}var Qm,N_;function h$(){if(N_)return Qm;N_=1;var t=ai(),e=ni(),r=Hi();function n(a){return function(i,o,s){var u=Object(i);if(!e(i)){var f=t(o,3);i=r(i),o=function(h){return f(u[h],h,u)}}var c=a(i,o,s);return c>-1?u[f?i[c]:c]:void 0}}return Qm=n,Qm}var Jm,O_;function v$(){if(O_)return Jm;O_=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return Jm=e,Jm}var e0,I_;function p$(){if(I_)return e0;I_=1;var t=v$(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return e0=r,e0}var t0,F_;function g$(){if(F_)return t0;F_=1;var t=p$(),e=jn(),r=Fs(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(f){if(typeof f=="number")return f;if(r(f))return n;if(e(f)){var c=typeof f.valueOf=="function"?f.valueOf():f;f=e(c)?c+"":c}if(typeof f!="string")return f===0?f:+f;f=t(f);var h=i.test(f);return h||o.test(f)?s(f.slice(2),h?2:8):a.test(f)?n:+f}return t0=u,t0}var r0,B_;function xO(){if(B_)return r0;B_=1;var t=g$(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-1/0){var i=a<0?-1:1;return i*r}return a===a?a:0}return r0=n,r0}var n0,q_;function y$(){if(q_)return n0;q_=1;var t=xO();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return n0=e,n0}var a0,z_;function m$(){if(z_)return a0;z_=1;var t=hO(),e=ai(),r=y$(),n=Math.max;function a(i,o,s){var u=i==null?0:i.length;if(!u)return-1;var f=s==null?0:r(s);return f<0&&(f=n(u+f,0)),t(i,e(o,3),f)}return a0=a,a0}var i0,G_;function b$(){if(G_)return i0;G_=1;var t=h$(),e=m$(),r=t(e);return i0=r,i0}var o0,H_;function EO(){if(H_)return o0;H_=1;var t=aw();function e(r){var n=r==null?0:r.length;return n?t(r,1):[]}return o0=e,o0}var s0,U_;function w$(){if(U_)return s0;U_=1;var t=ew(),e=$N(),r=_o();function n(a,i){return a==null?a:t(a,e(i),r)}return s0=n,s0}var l0,V_;function x$(){if(V_)return l0;V_=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return l0=t,l0}var u0,W_;function E$(){if(W_)return u0;W_=1;var t=Yc(),e=tw(),r=ai();function n(a,i){var o={};return i=r(i,3),e(a,function(s,u,f){t(o,u,i(s,u,f))}),o}return u0=n,u0}var f0,$_;function ow(){if($_)return f0;$_=1;var t=Fs();function e(r,n,a){for(var i=-1,o=r.length;++i<o;){var s=r[i],u=n(s);if(u!=null&&(f===void 0?u===u&&!t(u):a(u,f)))var f=u,c=s}return c}return f0=e,f0}var c0,Y_;function C$(){if(Y_)return c0;Y_=1;function t(e,r){return e>r}return c0=t,c0}var d0,X_;function T$(){if(X_)return d0;X_=1;var t=ow(),e=C$(),r=Mo();function n(a){return a&&a.length?t(a,r,e):void 0}return d0=n,d0}var h0,K_;function CO(){if(K_)return h0;K_=1;var t=Yc(),e=ks();function r(n,a,i){(i!==void 0&&!e(n[a],i)||i===void 0&&!(a in n))&&t(n,a,i)}return h0=r,h0}var v0,j_;function S$(){if(j_)return v0;j_=1;var t=Lo(),e=Qc(),r=Pa(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,s=i.hasOwnProperty,u=o.call(Object);function f(c){if(!r(c)||t(c)!=n)return!1;var h=e(c);if(h===null)return!0;var g=s.call(h,"constructor")&&h.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==u}return v0=f,v0}var p0,Z_;function TO(){if(Z_)return p0;Z_=1;function t(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return p0=t,p0}var g0,Q_;function A$(){if(Q_)return g0;Q_=1;var t=mu(),e=_o();function r(n){return t(n,e(n))}return g0=r,g0}var y0,J_;function L$(){if(J_)return y0;J_=1;var t=CO(),e=kN(),r=HN(),n=NN(),a=VN(),i=bu(),o=_r(),s=vO(),u=Os(),f=yu(),c=jn(),h=S$(),g=wu(),y=TO(),p=A$();function C(E,v,x,w,T,A,M){var D=y(E,x),_=y(v,x),k=M.get(_);if(k){t(E,x,k);return}var F=A?A(D,_,x+"",E,v,M):void 0,G=F===void 0;if(G){var B=o(_),q=!B&&u(_),R=!B&&!q&&g(_);F=_,B||q||R?o(D)?F=D:s(D)?F=n(D):q?(G=!1,F=e(_,!0)):R?(G=!1,F=r(_,!0)):F=[]:h(_)||i(_)?(F=D,i(D)?F=p(D):(!c(D)||f(D))&&(F=a(_))):G=!1}G&&(M.set(_,F),T(F,_,w,A,M),M.delete(_)),t(E,x,F)}return y0=C,y0}var m0,eM;function D$(){if(eM)return m0;eM=1;var t=$c(),e=CO(),r=ew(),n=L$(),a=jn(),i=_o(),o=TO();function s(u,f,c,h,g){u!==f&&r(f,function(y,p){if(g||(g=new t),a(y))n(u,f,p,c,s,h,g);else{var C=h?h(o(u,p),y,p+"",u,f,g):void 0;C===void 0&&(C=y),e(u,p,C)}},i)}return m0=s,m0}var b0,tM;function _$(){if(tM)return b0;tM=1;var t=nd(),e=ad();function r(n){return t(function(a,i){var o=-1,s=i.length,u=s>1?i[s-1]:void 0,f=s>2?i[2]:void 0;for(u=n.length>3&&typeof u=="function"?(s--,u):void 0,f&&e(i[0],i[1],f)&&(u=s<3?void 0:u,s=1),a=Object(a);++o<s;){var c=i[o];c&&n(a,c,o,u)}return a})}return b0=r,b0}var w0,rM;function M$(){if(rM)return w0;rM=1;var t=D$(),e=_$(),r=e(function(n,a,i){t(n,a,i)});return w0=r,w0}var x0,nM;function SO(){if(nM)return x0;nM=1;function t(e,r){return e<r}return x0=t,x0}var E0,aM;function R$(){if(aM)return E0;aM=1;var t=ow(),e=SO(),r=Mo();function n(a){return a&&a.length?t(a,r,e):void 0}return E0=n,E0}var C0,iM;function P$(){if(iM)return C0;iM=1;var t=ow(),e=ai(),r=SO();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return C0=n,C0}var T0,oM;function k$(){if(oM)return T0;oM=1;var t=ha(),e=function(){return t.Date.now()};return T0=e,T0}var S0,sM;function N$(){if(sM)return S0;sM=1;var t=Xc(),e=td(),r=Kc(),n=jn(),a=xu();function i(o,s,u,f){if(!n(o))return o;s=e(s,o);for(var c=-1,h=s.length,g=h-1,y=o;y!=null&&++c<h;){var p=a(s[c]),C=u;if(p==="__proto__"||p==="constructor"||p==="prototype")return o;if(c!=g){var E=y[p];C=f?f(E,p,y):void 0,C===void 0&&(C=n(E)?E:r(s[c+1])?[]:{})}t(y,p,C),y=y[p]}return o}return S0=i,S0}var A0,lM;function O$(){if(lM)return A0;lM=1;var t=rd(),e=N$(),r=td();function n(a,i,o){for(var s=-1,u=i.length,f={};++s<u;){var c=i[s],h=t(a,c);o(h,c)&&e(f,r(c,a),h)}return f}return A0=n,A0}var L0,uM;function I$(){if(uM)return L0;uM=1;var t=O$(),e=nO();function r(n,a){return t(n,a,function(i,o){return e(n,o)})}return L0=r,L0}var D0,fM;function F$(){if(fM)return D0;fM=1;var t=EO(),e=cO(),r=dO();function n(a){return r(e(a,void 0,t),a+"")}return D0=n,D0}var _0,cM;function B$(){if(cM)return _0;cM=1;var t=I$(),e=F$(),r=e(function(n,a){return n==null?{}:t(n,a)});return _0=r,_0}var M0,dM;function q$(){if(dM)return M0;dM=1;var t=Math.ceil,e=Math.max;function r(n,a,i,o){for(var s=-1,u=e(t((a-n)/(i||1)),0),f=Array(u);u--;)f[o?u:++s]=n,n+=i;return f}return M0=r,M0}var R0,hM;function z$(){if(hM)return R0;hM=1;var t=q$(),e=ad(),r=xO();function n(a){return function(i,o,s){return s&&typeof s!="number"&&e(i,o,s)&&(o=s=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),s=s===void 0?i<o?1:-1:r(s),t(i,o,s,a)}}return R0=n,R0}var P0,vM;function G$(){if(vM)return P0;vM=1;var t=z$(),e=t();return P0=e,P0}var k0,pM;function H$(){if(pM)return k0;pM=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return k0=t,k0}var N0,gM;function U$(){if(gM)return N0;gM=1;var t=Fs();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,s=t(r),u=n!==void 0,f=n===null,c=n===n,h=t(n);if(!f&&!h&&!s&&r>n||s&&u&&c&&!f&&!h||i&&u&&c||!a&&c||!o)return 1;if(!i&&!s&&!h&&r<n||h&&a&&o&&!i&&!s||f&&a&&o||!u&&o||!c)return-1}return 0}return N0=e,N0}var O0,yM;function V$(){if(yM)return O0;yM=1;var t=U$();function e(r,n,a){for(var i=-1,o=r.criteria,s=n.criteria,u=o.length,f=a.length;++i<u;){var c=t(o[i],s[i]);if(c){if(i>=f)return c;var h=a[i];return c*(h=="desc"?-1:1)}}return r.index-n.index}return O0=e,O0}var I0,mM;function W$(){if(mM)return I0;mM=1;var t=ed(),e=rd(),r=ai(),n=lO(),a=H$(),i=jc(),o=V$(),s=Mo(),u=_r();function f(c,h,g){h.length?h=t(h,function(C){return u(C)?function(E){return e(E,C.length===1?C[0]:C)}:C}):h=[s];var y=-1;h=t(h,i(r));var p=n(c,function(C,E,v){var x=t(h,function(w){return w(C)});return{criteria:x,index:++y,value:C}});return a(p,function(C,E){return o(C,E,g)})}return I0=f,I0}var F0,bM;function $$(){if(bM)return F0;bM=1;var t=aw(),e=W$(),r=nd(),n=ad(),a=r(function(i,o){if(i==null)return[];var s=o.length;return s>1&&n(i,o[0],o[1])?o=[]:s>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return F0=a,F0}var B0,wM;function Y$(){if(wM)return B0;wM=1;var t=tO(),e=0;function r(n){var a=++e;return t(n)+a}return B0=r,B0}var q0,xM;function X$(){if(xM)return q0;xM=1;function t(e,r,n){for(var a=-1,i=e.length,o=r.length,s={};++a<i;){var u=a<o?r[a]:void 0;n(s,e[a],u)}return s}return q0=t,q0}var z0,EM;function K$(){if(EM)return z0;EM=1;var t=Xc(),e=X$();function r(n,a){return e(n||[],a||[],t)}return z0=r,z0}var G0,CM;function pr(){if(CM)return G0;CM=1;var t;if(typeof U1=="function")try{t={cloneDeep:c$(),constant:J1(),defaults:d$(),each:XN(),filter:iO(),find:b$(),flatten:EO(),forEach:YN(),forIn:w$(),has:oO(),isUndefined:sO(),last:x$(),map:uO(),mapValues:E$(),max:T$(),merge:M$(),min:R$(),minBy:P$(),now:k$(),pick:B$(),range:G$(),reduce:fO(),sortBy:$$(),uniqueId:Y$(),values:pO(),zipObject:K$()}}catch{}return t||(t=window._),G0=t,G0}var H0,TM;function j$(){if(TM)return H0;TM=1,H0=t;function t(){var n={};n._next=n._prev=n,this._sentinel=n}t.prototype.dequeue=function(){var n=this._sentinel,a=n._prev;if(a!==n)return e(a),a},t.prototype.enqueue=function(n){var a=this._sentinel;n._prev&&n._next&&e(n),n._next=a._next,a._next._prev=n,a._next=n,n._prev=a},t.prototype.toString=function(){for(var n=[],a=this._sentinel,i=a._prev;i!==a;)n.push(JSON.stringify(i,r)),i=i._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,a){if(n!=="_next"&&n!=="_prev")return a}return H0}var U0,SM;function Z$(){if(SM)return U0;SM=1;var t=pr(),e=da().Graph,r=j$();U0=a;var n=t.constant(1);function a(f,c){if(f.nodeCount()<=1)return[];var h=s(f,c||n),g=i(h.graph,h.buckets,h.zeroIdx);return t.flatten(t.map(g,function(y){return f.outEdges(y.v,y.w)}),!0)}function i(f,c,h){for(var g=[],y=c[c.length-1],p=c[0],C;f.nodeCount();){for(;C=p.dequeue();)o(f,c,h,C);for(;C=y.dequeue();)o(f,c,h,C);if(f.nodeCount()){for(var E=c.length-2;E>0;--E)if(C=c[E].dequeue(),C){g=g.concat(o(f,c,h,C,!0));break}}}return g}function o(f,c,h,g,y){var p=y?[]:void 0;return t.forEach(f.inEdges(g.v),function(C){var E=f.edge(C),v=f.node(C.v);y&&p.push({v:C.v,w:C.w}),v.out-=E,u(c,h,v)}),t.forEach(f.outEdges(g.v),function(C){var E=f.edge(C),v=C.w,x=f.node(v);x.in-=E,u(c,h,x)}),f.removeNode(g.v),p}function s(f,c){var h=new e,g=0,y=0;t.forEach(f.nodes(),function(E){h.setNode(E,{v:E,in:0,out:0})}),t.forEach(f.edges(),function(E){var v=h.edge(E.v,E.w)||0,x=c(E),w=v+x;h.setEdge(E.v,E.w,w),y=Math.max(y,h.node(E.v).out+=x),g=Math.max(g,h.node(E.w).in+=x)});var p=t.range(y+g+3).map(function(){return new r}),C=g+1;return t.forEach(h.nodes(),function(E){u(p,C,h.node(E))}),{graph:h,buckets:p,zeroIdx:C}}function u(f,c,h){h.out?h.in?f[h.out-h.in+c].enqueue(h):f[f.length-1].enqueue(h):f[0].enqueue(h)}return U0}var V0,AM;function Q$(){if(AM)return V0;AM=1;var t=pr(),e=Z$();V0={run:r,undo:a};function r(i){var o=i.graph().acyclicer==="greedy"?e(i,s(i)):n(i);t.forEach(o,function(u){var f=i.edge(u);i.removeEdge(u),f.forwardName=u.name,f.reversed=!0,i.setEdge(u.w,u.v,f,t.uniqueId("rev"))});function s(u){return function(f){return u.edge(f).weight}}}function n(i){var o=[],s={},u={};function f(c){t.has(u,c)||(u[c]=!0,s[c]=!0,t.forEach(i.outEdges(c),function(h){t.has(s,h.w)?o.push(h):f(h.w)}),delete s[c])}return t.forEach(i.nodes(),f),o}function a(i){t.forEach(i.edges(),function(o){var s=i.edge(o);if(s.reversed){i.removeEdge(o);var u=s.forwardName;delete s.reversed,delete s.forwardName,i.setEdge(o.w,o.v,s,u)}})}return V0}var W0,LM;function kn(){if(LM)return W0;LM=1;var t=pr(),e=da().Graph;W0={addDummyNode:r,simplify:n,asNonCompoundGraph:a,successorWeights:i,predecessorWeights:o,intersectRect:s,buildLayerMatrix:u,normalizeRanks:f,removeEmptyRanks:c,addBorderNode:h,maxRank:g,partition:y,time:p,notime:C};function r(E,v,x,w){var T;do T=t.uniqueId(w);while(E.hasNode(T));return x.dummy=v,E.setNode(T,x),T}function n(E){var v=new e().setGraph(E.graph());return t.forEach(E.nodes(),function(x){v.setNode(x,E.node(x))}),t.forEach(E.edges(),function(x){var w=v.edge(x.v,x.w)||{weight:0,minlen:1},T=E.edge(x);v.setEdge(x.v,x.w,{weight:w.weight+T.weight,minlen:Math.max(w.minlen,T.minlen)})}),v}function a(E){var v=new e({multigraph:E.isMultigraph()}).setGraph(E.graph());return t.forEach(E.nodes(),function(x){E.children(x).length||v.setNode(x,E.node(x))}),t.forEach(E.edges(),function(x){v.setEdge(x,E.edge(x))}),v}function i(E){var v=t.map(E.nodes(),function(x){var w={};return t.forEach(E.outEdges(x),function(T){w[T.w]=(w[T.w]||0)+E.edge(T).weight}),w});return t.zipObject(E.nodes(),v)}function o(E){var v=t.map(E.nodes(),function(x){var w={};return t.forEach(E.inEdges(x),function(T){w[T.v]=(w[T.v]||0)+E.edge(T).weight}),w});return t.zipObject(E.nodes(),v)}function s(E,v){var x=E.x,w=E.y,T=v.x-x,A=v.y-w,M=E.width/2,D=E.height/2;if(!T&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var _,k;return Math.abs(A)*M>Math.abs(T)*D?(A<0&&(D=-D),_=D*T/A,k=D):(T<0&&(M=-M),_=M,k=M*A/T),{x:x+_,y:w+k}}function u(E){var v=t.map(t.range(g(E)+1),function(){return[]});return t.forEach(E.nodes(),function(x){var w=E.node(x),T=w.rank;t.isUndefined(T)||(v[T][w.order]=x)}),v}function f(E){var v=t.min(t.map(E.nodes(),function(x){return E.node(x).rank}));t.forEach(E.nodes(),function(x){var w=E.node(x);t.has(w,"rank")&&(w.rank-=v)})}function c(E){var v=t.min(t.map(E.nodes(),function(A){return E.node(A).rank})),x=[];t.forEach(E.nodes(),function(A){var M=E.node(A).rank-v;x[M]||(x[M]=[]),x[M].push(A)});var w=0,T=E.graph().nodeRankFactor;t.forEach(x,function(A,M){t.isUndefined(A)&&M%T!==0?--w:w&&t.forEach(A,function(D){E.node(D).rank+=w})})}function h(E,v,x,w){var T={width:0,height:0};return arguments.length>=4&&(T.rank=x,T.order=w),r(E,"border",T,v)}function g(E){return t.max(t.map(E.nodes(),function(v){var x=E.node(v).rank;if(!t.isUndefined(x))return x}))}function y(E,v){var x={lhs:[],rhs:[]};return t.forEach(E,function(w){v(w)?x.lhs.push(w):x.rhs.push(w)}),x}function p(E,v){var x=t.now();try{return v()}finally{console.log(E+" time: "+(t.now()-x)+"ms")}}function C(E,v){return v()}return W0}var $0,DM;function J$(){if(DM)return $0;DM=1;var t=pr(),e=kn();$0={run:r,undo:a};function r(i){i.graph().dummyChains=[],t.forEach(i.edges(),function(o){n(i,o)})}function n(i,o){var s=o.v,u=i.node(s).rank,f=o.w,c=i.node(f).rank,h=o.name,g=i.edge(o),y=g.labelRank;if(c!==u+1){i.removeEdge(o);var p,C,E;for(E=0,++u;u<c;++E,++u)g.points=[],C={width:0,height:0,edgeLabel:g,edgeObj:o,rank:u},p=e.addDummyNode(i,"edge",C,"_d"),u===y&&(C.width=g.width,C.height=g.height,C.dummy="edge-label",C.labelpos=g.labelpos),i.setEdge(s,p,{weight:g.weight},h),E===0&&i.graph().dummyChains.push(p),s=p;i.setEdge(s,f,{weight:g.weight},h)}}function a(i){t.forEach(i.graph().dummyChains,function(o){var s=i.node(o),u=s.edgeLabel,f;for(i.setEdge(s.edgeObj,u);s.dummy;)f=i.successors(o)[0],i.removeNode(o),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),o=f,s=i.node(o)})}return $0}var Y0,_M;function lc(){if(_M)return Y0;_M=1;var t=pr();Y0={longestPath:e,slack:r};function e(n){var a={};function i(o){var s=n.node(o);if(t.has(a,o))return s.rank;a[o]=!0;var u=t.min(t.map(n.outEdges(o),function(f){return i(f.w)-n.edge(f).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}t.forEach(n.sources(),i)}function r(n,a){return n.node(a.w).rank-n.node(a.v).rank-n.edge(a).minlen}return Y0}var X0,MM;function AO(){if(MM)return X0;MM=1;var t=pr(),e=da().Graph,r=lc().slack;X0=n;function n(s){var u=new e({directed:!1}),f=s.nodes()[0],c=s.nodeCount();u.setNode(f,{});for(var h,g;a(u,s)<c;)h=i(u,s),g=u.hasNode(h.v)?r(s,h):-r(s,h),o(u,s,g);return u}function a(s,u){function f(c){t.forEach(u.nodeEdges(c),function(h){var g=h.v,y=c===g?h.w:g;!s.hasNode(y)&&!r(u,h)&&(s.setNode(y,{}),s.setEdge(c,y,{}),f(y))})}return t.forEach(s.nodes(),f),s.nodeCount()}function i(s,u){return t.minBy(u.edges(),function(f){if(s.hasNode(f.v)!==s.hasNode(f.w))return r(u,f)})}function o(s,u,f){t.forEach(s.nodes(),function(c){u.node(c).rank+=f})}return X0}var K0,RM;function e4(){if(RM)return K0;RM=1;var t=pr(),e=AO(),r=lc().slack,n=lc().longestPath,a=da().alg.preorder,i=da().alg.postorder,o=kn().simplify;K0=s,s.initLowLimValues=h,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=y,s.enterEdge=p,s.exchangeEdges=C;function s(w){w=o(w),n(w);var T=e(w);h(T),u(T,w);for(var A,M;A=y(T);)M=p(T,w,A),C(T,w,A,M)}function u(w,T){var A=i(w,w.nodes());A=A.slice(0,A.length-1),t.forEach(A,function(M){f(w,T,M)})}function f(w,T,A){var M=w.node(A),D=M.parent;w.edge(A,D).cutvalue=c(w,T,A)}function c(w,T,A){var M=w.node(A),D=M.parent,_=!0,k=T.edge(A,D),F=0;return k||(_=!1,k=T.edge(D,A)),F=k.weight,t.forEach(T.nodeEdges(A),function(G){var B=G.v===A,q=B?G.w:G.v;if(q!==D){var R=B===_,P=T.edge(G).weight;if(F+=R?P:-P,v(w,A,q)){var N=w.edge(A,q).cutvalue;F+=R?-N:N}}}),F}function h(w,T){arguments.length<2&&(T=w.nodes()[0]),g(w,{},1,T)}function g(w,T,A,M,D){var _=A,k=w.node(M);return T[M]=!0,t.forEach(w.neighbors(M),function(F){t.has(T,F)||(A=g(w,T,A,F,M))}),k.low=_,k.lim=A++,D?k.parent=D:delete k.parent,A}function y(w){return t.find(w.edges(),function(T){return w.edge(T).cutvalue<0})}function p(w,T,A){var M=A.v,D=A.w;T.hasEdge(M,D)||(M=A.w,D=A.v);var _=w.node(M),k=w.node(D),F=_,G=!1;_.lim>k.lim&&(F=k,G=!0);var B=t.filter(T.edges(),function(q){return G===x(w,w.node(q.v),F)&&G!==x(w,w.node(q.w),F)});return t.minBy(B,function(q){return r(T,q)})}function C(w,T,A,M){var D=A.v,_=A.w;w.removeEdge(D,_),w.setEdge(M.v,M.w,{}),h(w),u(w,T),E(w,T)}function E(w,T){var A=t.find(w.nodes(),function(D){return!T.node(D).parent}),M=a(w,A);M=M.slice(1),t.forEach(M,function(D){var _=w.node(D).parent,k=T.edge(D,_),F=!1;k||(k=T.edge(_,D),F=!0),T.node(D).rank=T.node(_).rank+(F?k.minlen:-k.minlen)})}function v(w,T,A){return w.hasEdge(T,A)}function x(w,T,A){return A.low<=T.lim&&T.lim<=A.lim}return K0}var j0,PM;function t4(){if(PM)return j0;PM=1;var t=lc(),e=t.longestPath,r=AO(),n=e4();j0=a;function a(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":o(u);break;case"longest-path":i(u);break;default:s(u)}}var i=e;function o(u){e(u),r(u)}function s(u){n(u)}return j0}var Z0,kM;function r4(){if(kM)return Z0;kM=1;var t=pr();Z0=e;function e(a){var i=n(a);t.forEach(a.graph().dummyChains,function(o){for(var s=a.node(o),u=s.edgeObj,f=r(a,i,u.v,u.w),c=f.path,h=f.lca,g=0,y=c[g],p=!0;o!==u.w;){if(s=a.node(o),p){for(;(y=c[g])!==h&&a.node(y).maxRank<s.rank;)g++;y===h&&(p=!1)}if(!p){for(;g<c.length-1&&a.node(y=c[g+1]).minRank<=s.rank;)g++;y=c[g]}a.setParent(o,y),o=a.successors(o)[0]}})}function r(a,i,o,s){var u=[],f=[],c=Math.min(i[o].low,i[s].low),h=Math.max(i[o].lim,i[s].lim),g,y;g=o;do g=a.parent(g),u.push(g);while(g&&(i[g].low>c||h>i[g].lim));for(y=g,g=s;(g=a.parent(g))!==y;)f.push(g);return{path:u.concat(f.reverse()),lca:y}}function n(a){var i={},o=0;function s(u){var f=o;t.forEach(a.children(u),s),i[u]={low:f,lim:o++}}return t.forEach(a.children(),s),i}return Z0}var Q0,NM;function n4(){if(NM)return Q0;NM=1;var t=pr(),e=kn();Q0={run:r,cleanup:o};function r(s){var u=e.addDummyNode(s,"root",{},"_root"),f=a(s),c=t.max(t.values(f))-1,h=2*c+1;s.graph().nestingRoot=u,t.forEach(s.edges(),function(y){s.edge(y).minlen*=h});var g=i(s)+1;t.forEach(s.children(),function(y){n(s,u,h,g,c,f,y)}),s.graph().nodeRankFactor=h}function n(s,u,f,c,h,g,y){var p=s.children(y);if(!p.length){y!==u&&s.setEdge(u,y,{weight:0,minlen:f});return}var C=e.addBorderNode(s,"_bt"),E=e.addBorderNode(s,"_bb"),v=s.node(y);s.setParent(C,y),v.borderTop=C,s.setParent(E,y),v.borderBottom=E,t.forEach(p,function(x){n(s,u,f,c,h,g,x);var w=s.node(x),T=w.borderTop?w.borderTop:x,A=w.borderBottom?w.borderBottom:x,M=w.borderTop?c:2*c,D=T!==A?1:h-g[y]+1;s.setEdge(C,T,{weight:M,minlen:D,nestingEdge:!0}),s.setEdge(A,E,{weight:M,minlen:D,nestingEdge:!0})}),s.parent(y)||s.setEdge(u,C,{weight:0,minlen:h+g[y]})}function a(s){var u={};function f(c,h){var g=s.children(c);g&&g.length&&t.forEach(g,function(y){f(y,h+1)}),u[c]=h}return t.forEach(s.children(),function(c){f(c,1)}),u}function i(s){return t.reduce(s.edges(),function(u,f){return u+s.edge(f).weight},0)}function o(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,t.forEach(s.edges(),function(f){var c=s.edge(f);c.nestingEdge&&s.removeEdge(f)})}return Q0}var J0,OM;function a4(){if(OM)return J0;OM=1;var t=pr(),e=kn();J0=r;function r(a){function i(o){var s=a.children(o),u=a.node(o);if(s.length&&t.forEach(s,i),t.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var f=u.minRank,c=u.maxRank+1;f<c;++f)n(a,"borderLeft","_bl",o,u,f),n(a,"borderRight","_br",o,u,f)}}t.forEach(a.children(),i)}function n(a,i,o,s,u,f){var c={width:0,height:0,rank:f,borderType:i},h=u[i][f-1],g=e.addDummyNode(a,"border",c,o);u[i][f]=g,a.setParent(g,s),h&&a.setEdge(h,g,{weight:1})}return J0}var eb,IM;function i4(){if(IM)return eb;IM=1;var t=pr();eb={adjust:e,undo:r};function e(f){var c=f.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(f)}function r(f){var c=f.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&i(f),(c==="lr"||c==="rl")&&(s(f),n(f))}function n(f){t.forEach(f.nodes(),function(c){a(f.node(c))}),t.forEach(f.edges(),function(c){a(f.edge(c))})}function a(f){var c=f.width;f.width=f.height,f.height=c}function i(f){t.forEach(f.nodes(),function(c){o(f.node(c))}),t.forEach(f.edges(),function(c){var h=f.edge(c);t.forEach(h.points,o),t.has(h,"y")&&o(h)})}function o(f){f.y=-f.y}function s(f){t.forEach(f.nodes(),function(c){u(f.node(c))}),t.forEach(f.edges(),function(c){var h=f.edge(c);t.forEach(h.points,u),t.has(h,"x")&&u(h)})}function u(f){var c=f.x;f.x=f.y,f.y=c}return eb}var tb,FM;function o4(){if(FM)return tb;FM=1;var t=pr();tb=e;function e(r){var n={},a=t.filter(r.nodes(),function(f){return!r.children(f).length}),i=t.max(t.map(a,function(f){return r.node(f).rank})),o=t.map(t.range(i+1),function(){return[]});function s(f){if(!t.has(n,f)){n[f]=!0;var c=r.node(f);o[c.rank].push(f),t.forEach(r.successors(f),s)}}var u=t.sortBy(a,function(f){return r.node(f).rank});return t.forEach(u,s),o}return tb}var rb,BM;function s4(){if(BM)return rb;BM=1;var t=pr();rb=e;function e(n,a){for(var i=0,o=1;o<a.length;++o)i+=r(n,a[o-1],a[o]);return i}function r(n,a,i){for(var o=t.zipObject(i,t.map(i,function(g,y){return y})),s=t.flatten(t.map(a,function(g){return t.sortBy(t.map(n.outEdges(g),function(y){return{pos:o[y.w],weight:n.edge(y).weight}}),"pos")}),!0),u=1;u<i.length;)u<<=1;var f=2*u-1;u-=1;var c=t.map(new Array(f),function(){return 0}),h=0;return t.forEach(s.forEach(function(g){var y=g.pos+u;c[y]+=g.weight;for(var p=0;y>0;)y%2&&(p+=c[y+1]),y=y-1>>1,c[y]+=g.weight;h+=g.weight*p})),h}return rb}var nb,qM;function l4(){if(qM)return nb;qM=1;var t=pr();nb=e;function e(r,n){return t.map(n,function(a){var i=r.inEdges(a);if(i.length){var o=t.reduce(i,function(s,u){var f=r.edge(u),c=r.node(u.v);return{sum:s.sum+f.weight*c.order,weight:s.weight+f.weight}},{sum:0,weight:0});return{v:a,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:a}})}return nb}var ab,zM;function u4(){if(zM)return ab;zM=1;var t=pr();ab=e;function e(a,i){var o={};t.forEach(a,function(u,f){var c=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:f};t.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),t.forEach(i.edges(),function(u){var f=o[u.v],c=o[u.w];!t.isUndefined(f)&&!t.isUndefined(c)&&(c.indegree++,f.out.push(o[u.w]))});var s=t.filter(o,function(u){return!u.indegree});return r(s)}function r(a){var i=[];function o(f){return function(c){c.merged||(t.isUndefined(c.barycenter)||t.isUndefined(f.barycenter)||c.barycenter>=f.barycenter)&&n(f,c)}}function s(f){return function(c){c.in.push(f),--c.indegree===0&&a.push(c)}}for(;a.length;){var u=a.pop();i.push(u),t.forEach(u.in.reverse(),o(u)),t.forEach(u.out,s(u))}return t.map(t.filter(i,function(f){return!f.merged}),function(f){return t.pick(f,["vs","i","barycenter","weight"])})}function n(a,i){var o=0,s=0;a.weight&&(o+=a.barycenter*a.weight,s+=a.weight),i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),a.vs=i.vs.concat(a.vs),a.barycenter=o/s,a.weight=s,a.i=Math.min(i.i,a.i),i.merged=!0}return ab}var ib,GM;function f4(){if(GM)return ib;GM=1;var t=pr(),e=kn();ib=r;function r(i,o){var s=e.partition(i,function(C){return t.has(C,"barycenter")}),u=s.lhs,f=t.sortBy(s.rhs,function(C){return-C.i}),c=[],h=0,g=0,y=0;u.sort(a(!!o)),y=n(c,f,y),t.forEach(u,function(C){y+=C.vs.length,c.push(C.vs),h+=C.barycenter*C.weight,g+=C.weight,y=n(c,f,y)});var p={vs:t.flatten(c,!0)};return g&&(p.barycenter=h/g,p.weight=g),p}function n(i,o,s){for(var u;o.length&&(u=t.last(o)).i<=s;)o.pop(),i.push(u.vs),s++;return s}function a(i){return function(o,s){return o.barycenter<s.barycenter?-1:o.barycenter>s.barycenter?1:i?s.i-o.i:o.i-s.i}}return ib}var ob,HM;function c4(){if(HM)return ob;HM=1;var t=pr(),e=l4(),r=u4(),n=f4();ob=a;function a(s,u,f,c){var h=s.children(u),g=s.node(u),y=g?g.borderLeft:void 0,p=g?g.borderRight:void 0,C={};y&&(h=t.filter(h,function(A){return A!==y&&A!==p}));var E=e(s,h);t.forEach(E,function(A){if(s.children(A.v).length){var M=a(s,A.v,f,c);C[A.v]=M,t.has(M,"barycenter")&&o(A,M)}});var v=r(E,f);i(v,C);var x=n(v,c);if(y&&(x.vs=t.flatten([y,x.vs,p],!0),s.predecessors(y).length)){var w=s.node(s.predecessors(y)[0]),T=s.node(s.predecessors(p)[0]);t.has(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+w.order+T.order)/(x.weight+2),x.weight+=2}return x}function i(s,u){t.forEach(s,function(f){f.vs=t.flatten(f.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function o(s,u){t.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return ob}var sb,UM;function d4(){if(UM)return sb;UM=1;var t=pr(),e=da().Graph;sb=r;function r(a,i,o){var s=n(a),u=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(f){return a.node(f)});return t.forEach(a.nodes(),function(f){var c=a.node(f),h=a.parent(f);(c.rank===i||c.minRank<=i&&i<=c.maxRank)&&(u.setNode(f),u.setParent(f,h||s),t.forEach(a[o](f),function(g){var y=g.v===f?g.w:g.v,p=u.edge(y,f),C=t.isUndefined(p)?0:p.weight;u.setEdge(y,f,{weight:a.edge(g).weight+C})}),t.has(c,"minRank")&&u.setNode(f,{borderLeft:c.borderLeft[i],borderRight:c.borderRight[i]}))}),u}function n(a){for(var i;a.hasNode(i=t.uniqueId("_root")););return i}return sb}var lb,VM;function h4(){if(VM)return lb;VM=1;var t=pr();lb=e;function e(r,n,a){var i={},o;t.forEach(a,function(s){for(var u=r.parent(s),f,c;u;){if(f=r.parent(u),f?(c=i[f],i[f]=u):(c=o,o=u),c&&c!==u){n.setEdge(c,u);return}u=f}})}return lb}var ub,WM;function v4(){if(WM)return ub;WM=1;var t=pr(),e=o4(),r=s4(),n=c4(),a=d4(),i=h4(),o=da().Graph,s=kn();ub=u;function u(g){var y=s.maxRank(g),p=f(g,t.range(1,y+1),"inEdges"),C=f(g,t.range(y-1,-1,-1),"outEdges"),E=e(g);h(g,E);for(var v=Number.POSITIVE_INFINITY,x,w=0,T=0;T<4;++w,++T){c(w%2?p:C,w%4>=2),E=s.buildLayerMatrix(g);var A=r(g,E);A<v&&(T=0,x=t.cloneDeep(E),v=A)}h(g,x)}function f(g,y,p){return t.map(y,function(C){return a(g,C,p)})}function c(g,y){var p=new o;t.forEach(g,function(C){var E=C.graph().root,v=n(C,E,p,y);t.forEach(v.vs,function(x,w){C.node(x).order=w}),i(C,p,v.vs)})}function h(g,y){t.forEach(y,function(p){t.forEach(p,function(C,E){g.node(C).order=E})})}return ub}var fb,$M;function p4(){if($M)return fb;$M=1;var t=pr(),e=da().Graph,r=kn();fb={positionX:p,findType1Conflicts:n,findType2Conflicts:a,addConflict:o,hasConflict:s,verticalAlignment:u,horizontalCompaction:f,alignCoordinates:g,findSmallestWidthAlignment:h,balance:y};function n(v,x){var w={};function T(A,M){var D=0,_=0,k=A.length,F=t.last(M);return t.forEach(M,function(G,B){var q=i(v,G),R=q?v.node(q).order:k;(q||G===F)&&(t.forEach(M.slice(_,B+1),function(P){t.forEach(v.predecessors(P),function(N){var I=v.node(N),z=I.order;(z<D||R<z)&&!(I.dummy&&v.node(P).dummy)&&o(w,N,P)})}),_=B+1,D=R)}),M}return t.reduce(x,T),w}function a(v,x){var w={};function T(M,D,_,k,F){var G;t.forEach(t.range(D,_),function(B){G=M[B],v.node(G).dummy&&t.forEach(v.predecessors(G),function(q){var R=v.node(q);R.dummy&&(R.order<k||R.order>F)&&o(w,q,G)})})}function A(M,D){var _=-1,k,F=0;return t.forEach(D,function(G,B){if(v.node(G).dummy==="border"){var q=v.predecessors(G);q.length&&(k=v.node(q[0]).order,T(D,F,B,_,k),F=B,_=k)}T(D,F,D.length,k,M.length)}),D}return t.reduce(x,A),w}function i(v,x){if(v.node(x).dummy)return t.find(v.predecessors(x),function(w){return v.node(w).dummy})}function o(v,x,w){if(x>w){var T=x;x=w,w=T}var A=v[x];A||(v[x]=A={}),A[w]=!0}function s(v,x,w){if(x>w){var T=x;x=w,w=T}return t.has(v[x],w)}function u(v,x,w,T){var A={},M={},D={};return t.forEach(x,function(_){t.forEach(_,function(k,F){A[k]=k,M[k]=k,D[k]=F})}),t.forEach(x,function(_){var k=-1;t.forEach(_,function(F){var G=T(F);if(G.length){G=t.sortBy(G,function(N){return D[N]});for(var B=(G.length-1)/2,q=Math.floor(B),R=Math.ceil(B);q<=R;++q){var P=G[q];M[F]===F&&k<D[P]&&!s(w,F,P)&&(M[P]=F,M[F]=A[F]=A[P],k=D[P])}}})}),{root:A,align:M}}function f(v,x,w,T,A){var M={},D=c(v,x,w,A),_=A?"borderLeft":"borderRight";function k(B,q){for(var R=D.nodes(),P=R.pop(),N={};P;)N[P]?B(P):(N[P]=!0,R.push(P),R=R.concat(q(P))),P=R.pop()}function F(B){M[B]=D.inEdges(B).reduce(function(q,R){return Math.max(q,M[R.v]+D.edge(R))},0)}function G(B){var q=D.outEdges(B).reduce(function(P,N){return Math.min(P,M[N.w]-D.edge(N))},Number.POSITIVE_INFINITY),R=v.node(B);q!==Number.POSITIVE_INFINITY&&R.borderType!==_&&(M[B]=Math.max(M[B],q))}return k(F,D.predecessors.bind(D)),k(G,D.successors.bind(D)),t.forEach(T,function(B){M[B]=M[w[B]]}),M}function c(v,x,w,T){var A=new e,M=v.graph(),D=C(M.nodesep,M.edgesep,T);return t.forEach(x,function(_){var k;t.forEach(_,function(F){var G=w[F];if(A.setNode(G),k){var B=w[k],q=A.edge(B,G);A.setEdge(B,G,Math.max(D(v,F,k),q||0))}k=F})}),A}function h(v,x){return t.minBy(t.values(x),function(w){var T=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return t.forIn(w,function(M,D){var _=E(v,D)/2;T=Math.max(M+_,T),A=Math.min(M-_,A)}),T-A})}function g(v,x){var w=t.values(x),T=t.min(w),A=t.max(w);t.forEach(["u","d"],function(M){t.forEach(["l","r"],function(D){var _=M+D,k=v[_],F;if(k!==x){var G=t.values(k);F=D==="l"?T-t.min(G):A-t.max(G),F&&(v[_]=t.mapValues(k,function(B){return B+F}))}})})}function y(v,x){return t.mapValues(v.ul,function(w,T){if(x)return v[x.toLowerCase()][T];var A=t.sortBy(t.map(v,T));return(A[1]+A[2])/2})}function p(v){var x=r.buildLayerMatrix(v),w=t.merge(n(v,x),a(v,x)),T={},A;t.forEach(["u","d"],function(D){A=D==="u"?x:t.values(x).reverse(),t.forEach(["l","r"],function(_){_==="r"&&(A=t.map(A,function(B){return t.values(B).reverse()}));var k=(D==="u"?v.predecessors:v.successors).bind(v),F=u(v,A,w,k),G=f(v,A,F.root,F.align,_==="r");_==="r"&&(G=t.mapValues(G,function(B){return-B})),T[D+_]=G})});var M=h(v,T);return g(T,M),y(T,v.graph().align)}function C(v,x,w){return function(T,A,M){var D=T.node(A),_=T.node(M),k=0,F;if(k+=D.width/2,t.has(D,"labelpos"))switch(D.labelpos.toLowerCase()){case"l":F=-D.width/2;break;case"r":F=D.width/2;break}if(F&&(k+=w?F:-F),F=0,k+=(D.dummy?x:v)/2,k+=(_.dummy?x:v)/2,k+=_.width/2,t.has(_,"labelpos"))switch(_.labelpos.toLowerCase()){case"l":F=_.width/2;break;case"r":F=-_.width/2;break}return F&&(k+=w?F:-F),F=0,k}}function E(v,x){return v.node(x).width}return fb}var cb,YM;function g4(){if(YM)return cb;YM=1;var t=pr(),e=kn(),r=p4().positionX;cb=n;function n(i){i=e.asNonCompoundGraph(i),a(i),t.forEach(r(i),function(o,s){i.node(s).x=o})}function a(i){var o=e.buildLayerMatrix(i),s=i.graph().ranksep,u=0;t.forEach(o,function(f){var c=t.max(t.map(f,function(h){return i.node(h).height}));t.forEach(f,function(h){i.node(h).y=u+c/2}),u+=c+s})}return cb}var db,XM;function y4(){if(XM)return db;XM=1;var t=pr(),e=Q$(),r=J$(),n=t4(),a=kn().normalizeRanks,i=r4(),o=kn().removeEmptyRanks,s=n4(),u=a4(),f=i4(),c=v4(),h=g4(),g=kn(),y=da().Graph;db=p;function p(U,W){var X=W&&W.debugTiming?g.time:g.notime;X("layout",function(){var ee=X("  buildLayoutGraph",function(){return k(U)});X("  runLayout",function(){C(ee,X)}),X("  updateInputGraph",function(){E(U,ee)})})}function C(U,W){W("    makeSpaceForEdgeLabels",function(){F(U)}),W("    removeSelfEdges",function(){ae(U)}),W("    acyclic",function(){e.run(U)}),W("    nestingGraph.run",function(){s.run(U)}),W("    rank",function(){n(g.asNonCompoundGraph(U))}),W("    injectEdgeLabelProxies",function(){G(U)}),W("    removeEmptyRanks",function(){o(U)}),W("    nestingGraph.cleanup",function(){s.cleanup(U)}),W("    normalizeRanks",function(){a(U)}),W("    assignRankMinMax",function(){B(U)}),W("    removeEdgeLabelProxies",function(){q(U)}),W("    normalize.run",function(){r.run(U)}),W("    parentDummyChains",function(){i(U)}),W("    addBorderSegments",function(){u(U)}),W("    order",function(){c(U)}),W("    insertSelfEdges",function(){re(U)}),W("    adjustCoordinateSystem",function(){f.adjust(U)}),W("    position",function(){h(U)}),W("    positionSelfEdges",function(){K(U)}),W("    removeBorderNodes",function(){z(U)}),W("    normalize.undo",function(){r.undo(U)}),W("    fixupEdgeLabelCoords",function(){N(U)}),W("    undoCoordinateSystem",function(){f.undo(U)}),W("    translateGraph",function(){R(U)}),W("    assignNodeIntersects",function(){P(U)}),W("    reversePoints",function(){I(U)}),W("    acyclic.undo",function(){e.undo(U)})}function E(U,W){t.forEach(U.nodes(),function(X){var ee=U.node(X),oe=W.node(X);ee&&(ee.x=oe.x,ee.y=oe.y,W.children(X).length&&(ee.width=oe.width,ee.height=oe.height))}),t.forEach(U.edges(),function(X){var ee=U.edge(X),oe=W.edge(X);ee.points=oe.points,t.has(oe,"x")&&(ee.x=oe.x,ee.y=oe.y)}),U.graph().width=W.graph().width,U.graph().height=W.graph().height}var v=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},w=["acyclicer","ranker","rankdir","align"],T=["width","height"],A={width:0,height:0},M=["minlen","weight","width","height","labeloffset"],D={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_=["labelpos"];function k(U){var W=new y({multigraph:!0,compound:!0}),X=Z(U.graph());return W.setGraph(t.merge({},x,V(X,v),t.pick(X,w))),t.forEach(U.nodes(),function(ee){var oe=Z(U.node(ee));W.setNode(ee,t.defaults(V(oe,T),A)),W.setParent(ee,U.parent(ee))}),t.forEach(U.edges(),function(ee){var oe=Z(U.edge(ee));W.setEdge(ee,t.merge({},D,V(oe,M),t.pick(oe,_)))}),W}function F(U){var W=U.graph();W.ranksep/=2,t.forEach(U.edges(),function(X){var ee=U.edge(X);ee.minlen*=2,ee.labelpos.toLowerCase()!=="c"&&(W.rankdir==="TB"||W.rankdir==="BT"?ee.width+=ee.labeloffset:ee.height+=ee.labeloffset)})}function G(U){t.forEach(U.edges(),function(W){var X=U.edge(W);if(X.width&&X.height){var ee=U.node(W.v),oe=U.node(W.w),te={rank:(oe.rank-ee.rank)/2+ee.rank,e:W};g.addDummyNode(U,"edge-proxy",te,"_ep")}})}function B(U){var W=0;t.forEach(U.nodes(),function(X){var ee=U.node(X);ee.borderTop&&(ee.minRank=U.node(ee.borderTop).rank,ee.maxRank=U.node(ee.borderBottom).rank,W=t.max(W,ee.maxRank))}),U.graph().maxRank=W}function q(U){t.forEach(U.nodes(),function(W){var X=U.node(W);X.dummy==="edge-proxy"&&(U.edge(X.e).labelRank=X.rank,U.removeNode(W))})}function R(U){var W=Number.POSITIVE_INFINITY,X=0,ee=Number.POSITIVE_INFINITY,oe=0,te=U.graph(),ie=te.marginx||0,se=te.marginy||0;function $(ne){var le=ne.x,Se=ne.y,De=ne.width,be=ne.height;W=Math.min(W,le-De/2),X=Math.max(X,le+De/2),ee=Math.min(ee,Se-be/2),oe=Math.max(oe,Se+be/2)}t.forEach(U.nodes(),function(ne){$(U.node(ne))}),t.forEach(U.edges(),function(ne){var le=U.edge(ne);t.has(le,"x")&&$(le)}),W-=ie,ee-=se,t.forEach(U.nodes(),function(ne){var le=U.node(ne);le.x-=W,le.y-=ee}),t.forEach(U.edges(),function(ne){var le=U.edge(ne);t.forEach(le.points,function(Se){Se.x-=W,Se.y-=ee}),t.has(le,"x")&&(le.x-=W),t.has(le,"y")&&(le.y-=ee)}),te.width=X-W+ie,te.height=oe-ee+se}function P(U){t.forEach(U.edges(),function(W){var X=U.edge(W),ee=U.node(W.v),oe=U.node(W.w),te,ie;X.points?(te=X.points[0],ie=X.points[X.points.length-1]):(X.points=[],te=oe,ie=ee),X.points.unshift(g.intersectRect(ee,te)),X.points.push(g.intersectRect(oe,ie))})}function N(U){t.forEach(U.edges(),function(W){var X=U.edge(W);if(t.has(X,"x"))switch((X.labelpos==="l"||X.labelpos==="r")&&(X.width-=X.labeloffset),X.labelpos){case"l":X.x-=X.width/2+X.labeloffset;break;case"r":X.x+=X.width/2+X.labeloffset;break}})}function I(U){t.forEach(U.edges(),function(W){var X=U.edge(W);X.reversed&&X.points.reverse()})}function z(U){t.forEach(U.nodes(),function(W){if(U.children(W).length){var X=U.node(W),ee=U.node(X.borderTop),oe=U.node(X.borderBottom),te=U.node(t.last(X.borderLeft)),ie=U.node(t.last(X.borderRight));X.width=Math.abs(ie.x-te.x),X.height=Math.abs(oe.y-ee.y),X.x=te.x+X.width/2,X.y=ee.y+X.height/2}}),t.forEach(U.nodes(),function(W){U.node(W).dummy==="border"&&U.removeNode(W)})}function ae(U){t.forEach(U.edges(),function(W){if(W.v===W.w){var X=U.node(W.v);X.selfEdges||(X.selfEdges=[]),X.selfEdges.push({e:W,label:U.edge(W)}),U.removeEdge(W)}})}function re(U){var W=g.buildLayerMatrix(U);t.forEach(W,function(X){var ee=0;t.forEach(X,function(oe,te){var ie=U.node(oe);ie.order=te+ee,t.forEach(ie.selfEdges,function(se){g.addDummyNode(U,"selfedge",{width:se.label.width,height:se.label.height,rank:ie.rank,order:te+ ++ee,e:se.e,label:se.label},"_se")}),delete ie.selfEdges})})}function K(U){t.forEach(U.nodes(),function(W){var X=U.node(W);if(X.dummy==="selfedge"){var ee=U.node(X.e.v),oe=ee.x+ee.width/2,te=ee.y,ie=X.x-oe,se=ee.height/2;U.setEdge(X.e,X.label),U.removeNode(W),X.label.points=[{x:oe+2*ie/3,y:te-se},{x:oe+5*ie/6,y:te-se},{x:oe+ie,y:te},{x:oe+5*ie/6,y:te+se},{x:oe+2*ie/3,y:te+se}],X.label.x=X.x,X.label.y=X.y}})}function V(U,W){return t.mapValues(t.pick(U,W),Number)}function Z(U){var W={};return t.forEach(U,function(X,ee){W[ee.toLowerCase()]=X}),W}return db}var hb,KM;function m4(){if(KM)return hb;KM=1;var t=pr(),e=kn(),r=da().Graph;hb={debugOrdering:n};function n(a){var i=e.buildLayerMatrix(a),o=new r({compound:!0,multigraph:!0}).setGraph({});return t.forEach(a.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+a.node(s).rank)}),t.forEach(a.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),t.forEach(i,function(s,u){var f="layer"+u;o.setNode(f,{rank:"same"}),t.reduce(s,function(c,h){return o.setEdge(c,h,{style:"invis"}),h})}),o}return hb}var vb,jM;function b4(){return jM||(jM=1,vb="0.8.5"),vb}var pb,ZM;function w4(){return ZM||(ZM=1,pb={graphlib:da(),layout:y4(),debug:m4(),util:{time:kn().time,notime:kn().notime},version:b4()}),pb}var x4=kf.exports,QM;function E4(){return QM||(QM=1,function(t,e){(function(n,a){t.exports=a(w4())})(x4,function(r){return function(n){var a={};function i(o){if(a[o])return a[o].exports;var s=a[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=n,i.c=a,i.d=function(o,s,u){i.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:u})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,s){if(s&1&&(o=i(o)),s&8||s&4&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(i.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),s&2&&typeof o!="string")for(var f in o)i.d(u,f,(function(c){return o[c]}).bind(null,f));return u},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=0)}([function(n,a,i){var o=i(1),s=function(f){f&&f("layout","dagre",o)};typeof cytoscape<"u"&&s(cytoscape),n.exports=s},function(n,a,i){function o(g){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(p){return typeof p}:o=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},o(g)}var s=function(y){return typeof y=="function"},u=i(2),f=i(3),c=i(4);function h(g){this.options=f({},u,g)}h.prototype.run=function(){var g=this.options,y=this,p=g.cy,C=g.eles,E=function(K,V){return s(V)?V.apply(K,[K]):V},v=g.boundingBox||{x1:0,y1:0,w:p.width(),h:p.height()};v.x2===void 0&&(v.x2=v.x1+v.w),v.w===void 0&&(v.w=v.x2-v.x1),v.y2===void 0&&(v.y2=v.y1+v.h),v.h===void 0&&(v.h=v.y2-v.y1);var x=new c.graphlib.Graph({multigraph:!0,compound:!0}),w={},T=function(K,V){V!=null&&(w[K]=V)};T("nodesep",g.nodeSep),T("edgesep",g.edgeSep),T("ranksep",g.rankSep),T("rankdir",g.rankDir),T("align",g.align),T("ranker",g.ranker),T("acyclicer",g.acyclicer),x.setGraph(w),x.setDefaultEdgeLabel(function(){return{}}),x.setDefaultNodeLabel(function(){return{}});var A=C.nodes();s(g.sort)&&(A=A.sort(g.sort));for(var M=0;M<A.length;M++){var D=A[M],_=D.layoutDimensions(g);x.setNode(D.id(),{width:_.w,height:_.h,name:D.id()})}for(var k=0;k<A.length;k++){var F=A[k];F.isChild()&&x.setParent(F.id(),F.parent().id())}var G=C.edges().stdFilter(function(re){return!re.source().isParent()&&!re.target().isParent()});s(g.sort)&&(G=G.sort(g.sort));for(var B=0;B<G.length;B++){var q=G[B];x.setEdge(q.source().id(),q.target().id(),{minlen:E(q,g.minLen),weight:E(q,g.edgeWeight),name:q.id()},q.id())}c.layout(x);for(var R=x.nodes(),P=0;P<R.length;P++){var N=R[P],I=x.node(N);p.getElementById(N).scratch().dagre=I}var z;g.boundingBox?(z={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},A.forEach(function(re){var K=re.scratch().dagre;z.x1=Math.min(z.x1,K.x),z.x2=Math.max(z.x2,K.x),z.y1=Math.min(z.y1,K.y),z.y2=Math.max(z.y2,K.y)}),z.w=z.x2-z.x1,z.h=z.y2-z.y1):z=v;var ae=function(K){if(g.boundingBox){var V=z.w===0?0:(K.x-z.x1)/z.w,Z=z.h===0?0:(K.y-z.y1)/z.h;return{x:v.x1+V*v.w,y:v.y1+Z*v.h}}else return K};return A.layoutPositions(y,g,function(re){re=o(re)==="object"?re:this;var K=re.scratch().dagre;return ae({x:K.x,y:K.y})}),this},n.exports=h},function(n,a){var i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(s){return 1},edgeWeight:function(s){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(s,u){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(s,u){return u},ready:function(){},sort:void 0,stop:function(){}};n.exports=i},function(n,a){n.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return s.forEach(function(f){Object.keys(f).forEach(function(c){return i[c]=f[c]})}),i}},function(n,a){n.exports=r}])})}(kf)),kf.exports}var C4=E4();const T4=Ao(C4);var Nf={exports:{}},Of={exports:{}},If={exports:{}},S4=If.exports,JM;function A4(){return JM||(JM=1,function(t,e){(function(n,a){t.exports=a()})(S4,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.i=function(i){return i},a.d=function(i,o,s){a.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:s})},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=28)}([function(r,n,a){function i(){}i.QUALITY=1,i.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,i.DEFAULT_INCREMENTAL=!1,i.DEFAULT_ANIMATION_ON_LAYOUT=!0,i.DEFAULT_ANIMATION_DURING_LAYOUT=!1,i.DEFAULT_ANIMATION_PERIOD=50,i.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,i.DEFAULT_GRAPH_MARGIN=15,i.NODE_DIMENSIONS_INCLUDE_LABELS=!1,i.SIMPLE_NODE_SIZE=40,i.SIMPLE_NODE_HALF_SIZE=i.SIMPLE_NODE_SIZE/2,i.EMPTY_COMPOUND_NODE_SIZE=40,i.MIN_EDGE_LENGTH=1,i.WORLD_BOUNDARY=1e6,i.INITIAL_WORLD_BOUNDARY=i.WORLD_BOUNDARY/1e3,i.WORLD_CENTER_X=1200,i.WORLD_CENTER_Y=900,r.exports=i},function(r,n,a){var i=a(2),o=a(8),s=a(9);function u(c,h,g){i.call(this,g),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=g,this.bendpoints=[],this.source=c,this.target=h}u.prototype=Object.create(i.prototype);for(var f in i)u[f]=i[f];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(c){if(this.source===c)return this.target;if(this.target===c)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(c,h){for(var g=this.getOtherEnd(c),y=h.getGraphManager().getRoot();;){if(g.getOwner()==h)return g;if(g.getOwner()==y)break;g=g.getOwner().getParent()}return null},u.prototype.updateLength=function(){var c=new Array(4);this.isOverlapingSourceAndTarget=o.getIntersection(this.target.getRect(),this.source.getRect(),c),this.isOverlapingSourceAndTarget||(this.lengthX=c[0]-c[2],this.lengthY=c[1]-c[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=u},function(r,n,a){function i(o){this.vGraphObject=o}r.exports=i},function(r,n,a){var i=a(2),o=a(10),s=a(13),u=a(0),f=a(16),c=a(5);function h(y,p,C,E){C==null&&E==null&&(E=p),i.call(this,E),y.graphManager!=null&&(y=y.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=E,this.edges=[],this.graphManager=y,C!=null&&p!=null?this.rect=new s(p.x,p.y,C.width,C.height):this.rect=new s}h.prototype=Object.create(i.prototype);for(var g in i)h[g]=i[g];h.prototype.getEdges=function(){return this.edges},h.prototype.getChild=function(){return this.child},h.prototype.getOwner=function(){return this.owner},h.prototype.getWidth=function(){return this.rect.width},h.prototype.setWidth=function(y){this.rect.width=y},h.prototype.getHeight=function(){return this.rect.height},h.prototype.setHeight=function(y){this.rect.height=y},h.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},h.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},h.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},h.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},h.prototype.getRect=function(){return this.rect},h.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},h.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},h.prototype.setRect=function(y,p){this.rect.x=y.x,this.rect.y=y.y,this.rect.width=p.width,this.rect.height=p.height},h.prototype.setCenter=function(y,p){this.rect.x=y-this.rect.width/2,this.rect.y=p-this.rect.height/2},h.prototype.setLocation=function(y,p){this.rect.x=y,this.rect.y=p},h.prototype.moveBy=function(y,p){this.rect.x+=y,this.rect.y+=p},h.prototype.getEdgeListToNode=function(y){var p=[],C=this;return C.edges.forEach(function(E){if(E.target==y){if(E.source!=C)throw"Incorrect edge source!";p.push(E)}}),p},h.prototype.getEdgesBetween=function(y){var p=[],C=this;return C.edges.forEach(function(E){if(!(E.source==C||E.target==C))throw"Incorrect edge source and/or target";(E.target==y||E.source==y)&&p.push(E)}),p},h.prototype.getNeighborsList=function(){var y=new Set,p=this;return p.edges.forEach(function(C){if(C.source==p)y.add(C.target);else{if(C.target!=p)throw"Incorrect incidency!";y.add(C.source)}}),y},h.prototype.withChildren=function(){var y=new Set,p,C;if(y.add(this),this.child!=null)for(var E=this.child.getNodes(),v=0;v<E.length;v++)p=E[v],C=p.withChildren(),C.forEach(function(x){y.add(x)});return y},h.prototype.getNoOfChildren=function(){var y=0,p;if(this.child==null)y=1;else for(var C=this.child.getNodes(),E=0;E<C.length;E++)p=C[E],y+=p.getNoOfChildren();return y==0&&(y=1),y},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},h.prototype.scatter=function(){var y,p,C=-u.INITIAL_WORLD_BOUNDARY,E=u.INITIAL_WORLD_BOUNDARY;y=u.WORLD_CENTER_X+f.nextDouble()*(E-C)+C;var v=-u.INITIAL_WORLD_BOUNDARY,x=u.INITIAL_WORLD_BOUNDARY;p=u.WORLD_CENTER_Y+f.nextDouble()*(x-v)+v,this.rect.x=y,this.rect.y=p},h.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var y=this.getChild();if(y.updateBounds(!0),this.rect.x=y.getLeft(),this.rect.y=y.getTop(),this.setWidth(y.getRight()-y.getLeft()),this.setHeight(y.getBottom()-y.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var p=y.getRight()-y.getLeft(),C=y.getBottom()-y.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(p+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>p?(this.rect.x-=(this.labelWidth-p)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(p+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(C+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>C?(this.rect.y-=(this.labelHeight-C)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(C+this.labelHeight))}}},h.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},h.prototype.transform=function(y){var p=this.rect.x;p>u.WORLD_BOUNDARY?p=u.WORLD_BOUNDARY:p<-u.WORLD_BOUNDARY&&(p=-u.WORLD_BOUNDARY);var C=this.rect.y;C>u.WORLD_BOUNDARY?C=u.WORLD_BOUNDARY:C<-u.WORLD_BOUNDARY&&(C=-u.WORLD_BOUNDARY);var E=new c(p,C),v=y.inverseTransformPoint(E);this.setLocation(v.x,v.y)},h.prototype.getLeft=function(){return this.rect.x},h.prototype.getRight=function(){return this.rect.x+this.rect.width},h.prototype.getTop=function(){return this.rect.y},h.prototype.getBottom=function(){return this.rect.y+this.rect.height},h.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=h},function(r,n,a){var i=a(0);function o(){}for(var s in i)o[s]=i[s];o.MAX_ITERATIONS=2500,o.DEFAULT_EDGE_LENGTH=50,o.DEFAULT_SPRING_STRENGTH=.45,o.DEFAULT_REPULSION_STRENGTH=4500,o.DEFAULT_GRAVITY_STRENGTH=.4,o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,o.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,o.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,o.COOLING_ADAPTATION_FACTOR=.33,o.ADAPTATION_LOWER_NODE_LIMIT=1e3,o.ADAPTATION_UPPER_NODE_LIMIT=5e3,o.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,o.MAX_NODE_DISPLACEMENT=o.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,o.MIN_REPULSION_DIST=o.DEFAULT_EDGE_LENGTH/10,o.CONVERGENCE_CHECK_PERIOD=100,o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,o.MIN_EDGE_LENGTH=1,o.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=o},function(r,n,a){function i(o,s){o==null&&s==null?(this.x=0,this.y=0):(this.x=o,this.y=s)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.setX=function(o){this.x=o},i.prototype.setY=function(o){this.y=o},i.prototype.getDifference=function(o){return new DimensionD(this.x-o.x,this.y-o.y)},i.prototype.getCopy=function(){return new i(this.x,this.y)},i.prototype.translate=function(o){return this.x+=o.width,this.y+=o.height,this},r.exports=i},function(r,n,a){var i=a(2),o=a(10),s=a(0),u=a(7),f=a(3),c=a(1),h=a(13),g=a(12),y=a(11);function p(E,v,x){i.call(this,x),this.estimatedSize=o.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=E,v!=null&&v instanceof u?this.graphManager=v:v!=null&&v instanceof Layout&&(this.graphManager=v.graphManager)}p.prototype=Object.create(i.prototype);for(var C in i)p[C]=i[C];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(E,v,x){if(v==null&&x==null){var w=E;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(w)>-1)throw"Node already in graph!";return w.owner=this,this.getNodes().push(w),w}else{var T=E;if(!(this.getNodes().indexOf(v)>-1&&this.getNodes().indexOf(x)>-1))throw"Source or target not in graph!";if(!(v.owner==x.owner&&v.owner==this))throw"Both owners must be this graph!";return v.owner!=x.owner?null:(T.source=v,T.target=x,T.isInterGraph=!1,this.getEdges().push(T),v.edges.push(T),x!=v&&x.edges.push(T),T)}},p.prototype.remove=function(E){var v=E;if(E instanceof f){if(v==null)throw"Node is null!";if(!(v.owner!=null&&v.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var x=v.edges.slice(),w,T=x.length,A=0;A<T;A++)w=x[A],w.isInterGraph?this.graphManager.remove(w):w.source.owner.remove(w);var M=this.nodes.indexOf(v);if(M==-1)throw"Node not in owner node list!";this.nodes.splice(M,1)}else if(E instanceof c){var w=E;if(w==null)throw"Edge is null!";if(!(w.source!=null&&w.target!=null))throw"Source and/or target is null!";if(!(w.source.owner!=null&&w.target.owner!=null&&w.source.owner==this&&w.target.owner==this))throw"Source and/or target owner is invalid!";var D=w.source.edges.indexOf(w),_=w.target.edges.indexOf(w);if(!(D>-1&&_>-1))throw"Source and/or target doesn't know this edge!";w.source.edges.splice(D,1),w.target!=w.source&&w.target.edges.splice(_,1);var M=w.source.owner.getEdges().indexOf(w);if(M==-1)throw"Not in owner's edge list!";w.source.owner.getEdges().splice(M,1)}},p.prototype.updateLeftTop=function(){for(var E=o.MAX_VALUE,v=o.MAX_VALUE,x,w,T,A=this.getNodes(),M=A.length,D=0;D<M;D++){var _=A[D];x=_.getTop(),w=_.getLeft(),E>x&&(E=x),v>w&&(v=w)}return E==o.MAX_VALUE?null:(A[0].getParent().paddingLeft!=null?T=A[0].getParent().paddingLeft:T=this.margin,this.left=v-T,this.top=E-T,new g(this.left,this.top))},p.prototype.updateBounds=function(E){for(var v=o.MAX_VALUE,x=-o.MAX_VALUE,w=o.MAX_VALUE,T=-o.MAX_VALUE,A,M,D,_,k,F=this.nodes,G=F.length,B=0;B<G;B++){var q=F[B];E&&q.child!=null&&q.updateBounds(),A=q.getLeft(),M=q.getRight(),D=q.getTop(),_=q.getBottom(),v>A&&(v=A),x<M&&(x=M),w>D&&(w=D),T<_&&(T=_)}var R=new h(v,w,x-v,T-w);v==o.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),F[0].getParent().paddingLeft!=null?k=F[0].getParent().paddingLeft:k=this.margin,this.left=R.x-k,this.right=R.x+R.width+k,this.top=R.y-k,this.bottom=R.y+R.height+k},p.calculateBounds=function(E){for(var v=o.MAX_VALUE,x=-o.MAX_VALUE,w=o.MAX_VALUE,T=-o.MAX_VALUE,A,M,D,_,k=E.length,F=0;F<k;F++){var G=E[F];A=G.getLeft(),M=G.getRight(),D=G.getTop(),_=G.getBottom(),v>A&&(v=A),x<M&&(x=M),w>D&&(w=D),T<_&&(T=_)}var B=new h(v,w,x-v,T-w);return B},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var E=0,v=this.nodes,x=v.length,w=0;w<x;w++){var T=v[w];E+=T.calcEstimatedSize()}return E==0?this.estimatedSize=s.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=E/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var E=this;if(this.nodes.length==0){this.isConnected=!0;return}var v=new y,x=new Set,w=this.nodes[0],T,A,M=w.withChildren();for(M.forEach(function(B){v.push(B),x.add(B)});v.length!==0;){w=v.shift(),T=w.getEdges();for(var D=T.length,_=0;_<D;_++){var k=T[_];if(A=k.getOtherEndInGraph(w,this),A!=null&&!x.has(A)){var F=A.withChildren();F.forEach(function(B){v.push(B),x.add(B)})}}}if(this.isConnected=!1,x.size>=this.nodes.length){var G=0;x.forEach(function(B){B.owner==E&&G++}),G==this.nodes.length&&(this.isConnected=!0)}},r.exports=p},function(r,n,a){var i,o=a(1);function s(u){i=a(6),this.layout=u,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var u=this.layout.newGraph(),f=this.layout.newNode(null),c=this.add(u,f);return this.setRootGraph(c),this.rootGraph},s.prototype.add=function(u,f,c,h,g){if(c==null&&h==null&&g==null){if(u==null)throw"Graph is null!";if(f==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(f.child!=null)throw"Already has a child!";return u.parent=f,f.child=u,u}else{g=c,h=f,c=u;var y=h.getOwner(),p=g.getOwner();if(!(y!=null&&y.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(p!=null&&p.getGraphManager()==this))throw"Target not in this graph mgr!";if(y==p)return c.isInterGraph=!1,y.add(c,h,g);if(c.isInterGraph=!0,c.source=h,c.target=g,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),!(c.source!=null&&c.target!=null))throw"Edge source and/or target is null!";if(!(c.source.edges.indexOf(c)==-1&&c.target.edges.indexOf(c)==-1))throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c}},s.prototype.remove=function(u){if(u instanceof i){var f=u;if(f.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(f==this.rootGraph||f.parent!=null&&f.parent.graphManager==this))throw"Invalid parent node!";var c=[];c=c.concat(f.getEdges());for(var h,g=c.length,y=0;y<g;y++)h=c[y],f.remove(h);var p=[];p=p.concat(f.getNodes());var C;g=p.length;for(var y=0;y<g;y++)C=p[y],f.remove(C);f==this.rootGraph&&this.setRootGraph(null);var E=this.graphs.indexOf(f);this.graphs.splice(E,1),f.parent=null}else if(u instanceof o){if(h=u,h==null)throw"Edge is null!";if(!h.isInterGraph)throw"Not an inter-graph edge!";if(!(h.source!=null&&h.target!=null))throw"Source and/or target is null!";if(!(h.source.edges.indexOf(h)!=-1&&h.target.edges.indexOf(h)!=-1))throw"Source and/or target doesn't know this edge!";var E=h.source.edges.indexOf(h);if(h.source.edges.splice(E,1),E=h.target.edges.indexOf(h),h.target.edges.splice(E,1),!(h.source.owner!=null&&h.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(h.source.owner.getGraphManager().edges.indexOf(h)==-1)throw"Not in owner graph manager's edge list!";var E=h.source.owner.getGraphManager().edges.indexOf(h);h.source.owner.getGraphManager().edges.splice(E,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],f=this.getGraphs(),c=f.length,h=0;h<c;h++)u=u.concat(f[h].getNodes());this.allNodes=u}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],f=this.getGraphs();f.length;for(var c=0;c<f.length;c++)u=u.concat(f[c].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(u,f){if(!(u!=null&&f!=null))throw"assert failed";if(u==f)return!0;var c=u.getOwner(),h;do{if(h=c.getParent(),h==null)break;if(h==f)return!0;if(c=h.getOwner(),c==null)break}while(!0);c=f.getOwner();do{if(h=c.getParent(),h==null)break;if(h==u)return!0;if(c=h.getOwner(),c==null)break}while(!0);return!1},s.prototype.calcLowestCommonAncestors=function(){for(var u,f,c,h,g,y=this.getAllEdges(),p=y.length,C=0;C<p;C++){if(u=y[C],f=u.source,c=u.target,u.lca=null,u.sourceInLca=f,u.targetInLca=c,f==c){u.lca=f.getOwner();continue}for(h=f.getOwner();u.lca==null;){for(u.targetInLca=c,g=c.getOwner();u.lca==null;){if(g==h){u.lca=g;break}if(g==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=g.getParent(),g=u.targetInLca.getOwner()}if(h==this.rootGraph)break;u.lca==null&&(u.sourceInLca=h.getParent(),h=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},s.prototype.calcLowestCommonAncestor=function(u,f){if(u==f)return u.getOwner();var c=u.getOwner();do{if(c==null)break;var h=f.getOwner();do{if(h==null)break;if(h==c)return h;h=h.getParent().getOwner()}while(!0);c=c.getParent().getOwner()}while(!0);return c},s.prototype.calcInclusionTreeDepths=function(u,f){u==null&&f==null&&(u=this.rootGraph,f=1);for(var c,h=u.getNodes(),g=h.length,y=0;y<g;y++)c=h[y],c.inclusionTreeDepth=f,c.child!=null&&this.calcInclusionTreeDepths(c.child,f+1)},s.prototype.includesInvalidEdge=function(){for(var u,f=[],c=this.edges.length,h=0;h<c;h++)u=this.edges[h],this.isOneAncestorOfOther(u.source,u.target)&&f.push(u);for(var h=0;h<f.length;h++)this.remove(f[h]);return!1},r.exports=s},function(r,n,a){var i=a(12);function o(){}o.calcSeparationAmount=function(s,u,f,c){if(!s.intersects(u))throw"assert failed";var h=new Array(2);this.decideDirectionsForOverlappingNodes(s,u,h),f[0]=Math.min(s.getRight(),u.getRight())-Math.max(s.x,u.x),f[1]=Math.min(s.getBottom(),u.getBottom())-Math.max(s.y,u.y),s.getX()<=u.getX()&&s.getRight()>=u.getRight()?f[0]+=Math.min(u.getX()-s.getX(),s.getRight()-u.getRight()):u.getX()<=s.getX()&&u.getRight()>=s.getRight()&&(f[0]+=Math.min(s.getX()-u.getX(),u.getRight()-s.getRight())),s.getY()<=u.getY()&&s.getBottom()>=u.getBottom()?f[1]+=Math.min(u.getY()-s.getY(),s.getBottom()-u.getBottom()):u.getY()<=s.getY()&&u.getBottom()>=s.getBottom()&&(f[1]+=Math.min(s.getY()-u.getY(),u.getBottom()-s.getBottom()));var g=Math.abs((u.getCenterY()-s.getCenterY())/(u.getCenterX()-s.getCenterX()));u.getCenterY()===s.getCenterY()&&u.getCenterX()===s.getCenterX()&&(g=1);var y=g*f[0],p=f[1]/g;f[0]<p?p=f[0]:y=f[1],f[0]=-1*h[0]*(p/2+c),f[1]=-1*h[1]*(y/2+c)},o.decideDirectionsForOverlappingNodes=function(s,u,f){s.getCenterX()<u.getCenterX()?f[0]=-1:f[0]=1,s.getCenterY()<u.getCenterY()?f[1]=-1:f[1]=1},o.getIntersection2=function(s,u,f){var c=s.getCenterX(),h=s.getCenterY(),g=u.getCenterX(),y=u.getCenterY();if(s.intersects(u))return f[0]=c,f[1]=h,f[2]=g,f[3]=y,!0;var p=s.getX(),C=s.getY(),E=s.getRight(),v=s.getX(),x=s.getBottom(),w=s.getRight(),T=s.getWidthHalf(),A=s.getHeightHalf(),M=u.getX(),D=u.getY(),_=u.getRight(),k=u.getX(),F=u.getBottom(),G=u.getRight(),B=u.getWidthHalf(),q=u.getHeightHalf(),R=!1,P=!1;if(c===g){if(h>y)return f[0]=c,f[1]=C,f[2]=g,f[3]=F,!1;if(h<y)return f[0]=c,f[1]=x,f[2]=g,f[3]=D,!1}else if(h===y){if(c>g)return f[0]=p,f[1]=h,f[2]=_,f[3]=y,!1;if(c<g)return f[0]=E,f[1]=h,f[2]=M,f[3]=y,!1}else{var N=s.height/s.width,I=u.height/u.width,z=(y-h)/(g-c),ae=void 0,re=void 0,K=void 0,V=void 0,Z=void 0,U=void 0;if(-N===z?c>g?(f[0]=v,f[1]=x,R=!0):(f[0]=E,f[1]=C,R=!0):N===z&&(c>g?(f[0]=p,f[1]=C,R=!0):(f[0]=w,f[1]=x,R=!0)),-I===z?g>c?(f[2]=k,f[3]=F,P=!0):(f[2]=_,f[3]=D,P=!0):I===z&&(g>c?(f[2]=M,f[3]=D,P=!0):(f[2]=G,f[3]=F,P=!0)),R&&P)return!1;if(c>g?h>y?(ae=this.getCardinalDirection(N,z,4),re=this.getCardinalDirection(I,z,2)):(ae=this.getCardinalDirection(-N,z,3),re=this.getCardinalDirection(-I,z,1)):h>y?(ae=this.getCardinalDirection(-N,z,1),re=this.getCardinalDirection(-I,z,3)):(ae=this.getCardinalDirection(N,z,2),re=this.getCardinalDirection(I,z,4)),!R)switch(ae){case 1:V=C,K=c+-A/z,f[0]=K,f[1]=V;break;case 2:K=w,V=h+T*z,f[0]=K,f[1]=V;break;case 3:V=x,K=c+A/z,f[0]=K,f[1]=V;break;case 4:K=v,V=h+-T*z,f[0]=K,f[1]=V;break}if(!P)switch(re){case 1:U=D,Z=g+-q/z,f[2]=Z,f[3]=U;break;case 2:Z=G,U=y+B*z,f[2]=Z,f[3]=U;break;case 3:U=F,Z=g+q/z,f[2]=Z,f[3]=U;break;case 4:Z=k,U=y+-B*z,f[2]=Z,f[3]=U;break}}return!1},o.getCardinalDirection=function(s,u,f){return s>u?f:1+f%4},o.getIntersection=function(s,u,f,c){if(c==null)return this.getIntersection2(s,u,f);var h=s.x,g=s.y,y=u.x,p=u.y,C=f.x,E=f.y,v=c.x,x=c.y,w=void 0,T=void 0,A=void 0,M=void 0,D=void 0,_=void 0,k=void 0,F=void 0,G=void 0;return A=p-g,D=h-y,k=y*g-h*p,M=x-E,_=C-v,F=v*E-C*x,G=A*_-M*D,G===0?null:(w=(D*F-_*k)/G,T=(M*k-A*F)/G,new i(w,T))},o.angleOfVector=function(s,u,f,c){var h=void 0;return s!==f?(h=Math.atan((c-u)/(f-s)),f<s?h+=Math.PI:c<u&&(h+=this.TWO_PI)):c<u?h=this.ONE_AND_HALF_PI:h=this.HALF_PI,h},o.doIntersect=function(s,u,f,c){var h=s.x,g=s.y,y=u.x,p=u.y,C=f.x,E=f.y,v=c.x,x=c.y,w=(y-h)*(x-E)-(v-C)*(p-g);if(w===0)return!1;var T=((x-E)*(v-h)+(C-v)*(x-g))/w,A=((g-p)*(v-h)+(y-h)*(x-g))/w;return 0<T&&T<1&&0<A&&A<1},o.findCircleLineIntersections=function(s,u,f,c,h,g,y){var p=(f-s)*(f-s)+(c-u)*(c-u),C=2*((s-h)*(f-s)+(u-g)*(c-u)),E=(s-h)*(s-h)+(u-g)*(u-g)-y*y,v=C*C-4*p*E;if(v>=0){var x=(-C+Math.sqrt(C*C-4*p*E))/(2*p),w=(-C-Math.sqrt(C*C-4*p*E))/(2*p),T=null;return x>=0&&x<=1?[x]:w>=0&&w<=1?[w]:T}else return null},o.HALF_PI=.5*Math.PI,o.ONE_AND_HALF_PI=1.5*Math.PI,o.TWO_PI=2*Math.PI,o.THREE_PI=3*Math.PI,r.exports=o},function(r,n,a){function i(){}i.sign=function(o){return o>0?1:o<0?-1:0},i.floor=function(o){return o<0?Math.ceil(o):Math.floor(o)},i.ceil=function(o){return o<0?Math.floor(o):Math.ceil(o)},r.exports=i},function(r,n,a){function i(){}i.MAX_VALUE=2147483647,i.MIN_VALUE=-2147483648,r.exports=i},function(r,n,a){var i=function(){function h(g,y){for(var p=0;p<y.length;p++){var C=y[p];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(g,C.key,C)}}return function(g,y,p){return y&&h(g.prototype,y),p&&h(g,p),g}}();function o(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}var s=function(g){return{value:g,next:null,prev:null}},u=function(g,y,p,C){return g!==null?g.next=y:C.head=y,p!==null?p.prev=y:C.tail=y,y.prev=g,y.next=p,C.length++,y},f=function(g,y){var p=g.prev,C=g.next;return p!==null?p.next=C:y.head=C,C!==null?C.prev=p:y.tail=p,g.prev=g.next=null,y.length--,g},c=function(){function h(g){var y=this;o(this,h),this.length=0,this.head=null,this.tail=null,g!=null&&g.forEach(function(p){return y.push(p)})}return i(h,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(y,p){return u(p.prev,s(y),p,this)}},{key:"insertAfter",value:function(y,p){return u(p,s(y),p.next,this)}},{key:"insertNodeBefore",value:function(y,p){return u(p.prev,y,p,this)}},{key:"insertNodeAfter",value:function(y,p){return u(p,y,p.next,this)}},{key:"push",value:function(y){return u(this.tail,s(y),null,this)}},{key:"unshift",value:function(y){return u(null,s(y),this.head,this)}},{key:"remove",value:function(y){return f(y,this)}},{key:"pop",value:function(){return f(this.tail,this).value}},{key:"popNode",value:function(){return f(this.tail,this)}},{key:"shift",value:function(){return f(this.head,this).value}},{key:"shiftNode",value:function(){return f(this.head,this)}},{key:"get_object_at",value:function(y){if(y<=this.length()){for(var p=1,C=this.head;p<y;)C=C.next,p++;return C.value}}},{key:"set_object_at",value:function(y,p){if(y<=this.length()){for(var C=1,E=this.head;C<y;)E=E.next,C++;E.value=p}}}]),h}();r.exports=c},function(r,n,a){function i(o,s,u){this.x=null,this.y=null,o==null&&s==null&&u==null?(this.x=0,this.y=0):typeof o=="number"&&typeof s=="number"&&u==null?(this.x=o,this.y=s):o.constructor.name=="Point"&&s==null&&u==null&&(u=o,this.x=u.x,this.y=u.y)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.getLocation=function(){return new i(this.x,this.y)},i.prototype.setLocation=function(o,s,u){o.constructor.name=="Point"&&s==null&&u==null?(u=o,this.setLocation(u.x,u.y)):typeof o=="number"&&typeof s=="number"&&u==null&&(parseInt(o)==o&&parseInt(s)==s?this.move(o,s):(this.x=Math.floor(o+.5),this.y=Math.floor(s+.5)))},i.prototype.move=function(o,s){this.x=o,this.y=s},i.prototype.translate=function(o,s){this.x+=o,this.y+=s},i.prototype.equals=function(o){if(o.constructor.name=="Point"){var s=o;return this.x==s.x&&this.y==s.y}return this==o},i.prototype.toString=function(){return new i().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=i},function(r,n,a){function i(o,s,u,f){this.x=0,this.y=0,this.width=0,this.height=0,o!=null&&s!=null&&u!=null&&f!=null&&(this.x=o,this.y=s,this.width=u,this.height=f)}i.prototype.getX=function(){return this.x},i.prototype.setX=function(o){this.x=o},i.prototype.getY=function(){return this.y},i.prototype.setY=function(o){this.y=o},i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(o){this.width=o},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(o){this.height=o},i.prototype.getRight=function(){return this.x+this.width},i.prototype.getBottom=function(){return this.y+this.height},i.prototype.intersects=function(o){return!(this.getRight()<o.x||this.getBottom()<o.y||o.getRight()<this.x||o.getBottom()<this.y)},i.prototype.getCenterX=function(){return this.x+this.width/2},i.prototype.getMinX=function(){return this.getX()},i.prototype.getMaxX=function(){return this.getX()+this.width},i.prototype.getCenterY=function(){return this.y+this.height/2},i.prototype.getMinY=function(){return this.getY()},i.prototype.getMaxY=function(){return this.getY()+this.height},i.prototype.getWidthHalf=function(){return this.width/2},i.prototype.getHeightHalf=function(){return this.height/2},r.exports=i},function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function o(){}o.lastID=0,o.createID=function(s){return o.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=o.getString(),o.lastID++),s.uniqueID)},o.getString=function(s){return s==null&&(s=o.lastID),"Object#"+s},o.isPrimitive=function(s){var u=typeof s>"u"?"undefined":i(s);return s==null||u!="object"&&u!="function"},r.exports=o},function(r,n,a){function i(C){if(Array.isArray(C)){for(var E=0,v=Array(C.length);E<C.length;E++)v[E]=C[E];return v}else return Array.from(C)}var o=a(0),s=a(7),u=a(3),f=a(1),c=a(6),h=a(5),g=a(17),y=a(29);function p(C){y.call(this),this.layoutQuality=o.QUALITY,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=o.DEFAULT_INCREMENTAL,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,C!=null&&(this.isRemoteUse=C)}p.RANDOM_SEED=1,p.prototype=Object.create(y.prototype),p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var C=new s(this);return this.graphManager=C,C},p.prototype.newGraph=function(C){return new c(null,this.graphManager,C)},p.prototype.newNode=function(C){return new u(this.graphManager,C)},p.prototype.newEdge=function(C){return new f(null,null,C)},p.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var C;return this.checkLayoutSuccess()?C=!1:C=this.layout(),o.ANIMATE==="during"?!1:(C&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,C)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var C=this.graphManager.getAllEdges(),E=0;E<C.length;E++)C[E];for(var v=this.graphManager.getRoot().getNodes(),E=0;E<v.length;E++)v[E];this.update(this.graphManager.getRoot())}},p.prototype.update=function(C){if(C==null)this.update2();else if(C instanceof u){var E=C;if(E.getChild()!=null)for(var v=E.getChild().getNodes(),x=0;x<v.length;x++)update(v[x]);if(E.vGraphObject!=null){var w=E.vGraphObject;w.update(E)}}else if(C instanceof f){var T=C;if(T.vGraphObject!=null){var A=T.vGraphObject;A.update(T)}}else if(C instanceof c){var M=C;if(M.vGraphObject!=null){var D=M.vGraphObject;D.update(M)}}},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=o.QUALITY,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=o.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(C){if(C==null)this.transform(new h(0,0));else{var E=new g,v=this.graphManager.getRoot().updateLeftTop();if(v!=null){E.setWorldOrgX(C.x),E.setWorldOrgY(C.y),E.setDeviceOrgX(v.x),E.setDeviceOrgY(v.y);for(var x=this.getAllNodes(),w,T=0;T<x.length;T++)w=x[T],w.transform(E)}}},p.prototype.positionNodesRandomly=function(C){if(C==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var E,v,x=C.getNodes(),w=0;w<x.length;w++)E=x[w],v=E.getChild(),v==null||v.getNodes().length==0?E.scatter():(this.positionNodesRandomly(v),E.updateBounds())},p.prototype.getFlatForest=function(){for(var C=[],E=!0,v=this.graphManager.getRoot().getNodes(),x=!0,w=0;w<v.length;w++)v[w].getChild()!=null&&(x=!1);if(!x)return C;var T=new Set,A=[],M=new Map,D=[];for(D=D.concat(v);D.length>0&&E;){for(A.push(D[0]);A.length>0&&E;){var _=A[0];A.splice(0,1),T.add(_);for(var k=_.getEdges(),w=0;w<k.length;w++){var F=k[w].getOtherEnd(_);if(M.get(_)!=F)if(!T.has(F))A.push(F),M.set(F,_);else{E=!1;break}}}if(!E)C=[];else{var G=[].concat(i(T));C.push(G);for(var w=0;w<G.length;w++){var B=G[w],q=D.indexOf(B);q>-1&&D.splice(q,1)}T=new Set,M=new Map}}return C},p.prototype.createDummyNodesForBendpoints=function(C){for(var E=[],v=C.source,x=this.graphManager.calcLowestCommonAncestor(C.source,C.target),w=0;w<C.bendpoints.length;w++){var T=this.newNode(null);T.setRect(new Point(0,0),new Dimension(1,1)),x.add(T);var A=this.newEdge(null);this.graphManager.add(A,v,T),E.add(T),v=T}var A=this.newEdge(null);return this.graphManager.add(A,v,C.target),this.edgeToDummyNodes.set(C,E),C.isInterGraph()?this.graphManager.remove(C):x.remove(C),E},p.prototype.createBendpointsFromDummyNodes=function(){var C=[];C=C.concat(this.graphManager.getAllEdges()),C=[].concat(i(this.edgeToDummyNodes.keys())).concat(C);for(var E=0;E<C.length;E++){var v=C[E];if(v.bendpoints.length>0){for(var x=this.edgeToDummyNodes.get(v),w=0;w<x.length;w++){var T=x[w],A=new h(T.getCenterX(),T.getCenterY()),M=v.bendpoints.get(w);M.x=A.x,M.y=A.y,T.getOwner().remove(T)}this.graphManager.add(v,v.source,v.target)}}},p.transform=function(C,E,v,x){if(v!=null&&x!=null){var w=E;if(C<=50){var T=E/v;w-=(E-T)/50*(50-C)}else{var A=E*x;w+=(A-E)/50*(C-50)}return w}else{var M,D;return C<=50?(M=9*E/500,D=E/10):(M=9*E/50,D=-8*E),M*C+D}},p.findCenterOfTree=function(C){var E=[];E=E.concat(C);var v=[],x=new Map,w=!1,T=null;(E.length==1||E.length==2)&&(w=!0,T=E[0]);for(var A=0;A<E.length;A++){var M=E[A],D=M.getNeighborsList().size;x.set(M,M.getNeighborsList().size),D==1&&v.push(M)}var _=[];for(_=_.concat(v);!w;){var k=[];k=k.concat(_),_=[];for(var A=0;A<E.length;A++){var M=E[A],F=E.indexOf(M);F>=0&&E.splice(F,1);var G=M.getNeighborsList();G.forEach(function(R){if(v.indexOf(R)<0){var P=x.get(R),N=P-1;N==1&&_.push(R),x.set(R,N)}})}v=v.concat(_),(E.length==1||E.length==2)&&(w=!0,T=E[0])}return T},p.prototype.setGraphManager=function(C){this.graphManager=C},r.exports=p},function(r,n,a){function i(){}i.seed=1,i.x=0,i.nextDouble=function(){return i.x=Math.sin(i.seed++)*1e4,i.x-Math.floor(i.x)},r.exports=i},function(r,n,a){var i=a(5);function o(s,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}o.prototype.getWorldOrgX=function(){return this.lworldOrgX},o.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},o.prototype.getWorldOrgY=function(){return this.lworldOrgY},o.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},o.prototype.getWorldExtX=function(){return this.lworldExtX},o.prototype.setWorldExtX=function(s){this.lworldExtX=s},o.prototype.getWorldExtY=function(){return this.lworldExtY},o.prototype.setWorldExtY=function(s){this.lworldExtY=s},o.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},o.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},o.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},o.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},o.prototype.getDeviceExtX=function(){return this.ldeviceExtX},o.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},o.prototype.getDeviceExtY=function(){return this.ldeviceExtY},o.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},o.prototype.transformX=function(s){var u=0,f=this.lworldExtX;return f!=0&&(u=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/f),u},o.prototype.transformY=function(s){var u=0,f=this.lworldExtY;return f!=0&&(u=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/f),u},o.prototype.inverseTransformX=function(s){var u=0,f=this.ldeviceExtX;return f!=0&&(u=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/f),u},o.prototype.inverseTransformY=function(s){var u=0,f=this.ldeviceExtY;return f!=0&&(u=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/f),u},o.prototype.inverseTransformPoint=function(s){var u=new i(this.inverseTransformX(s.x),this.inverseTransformY(s.y));return u},r.exports=o},function(r,n,a){function i(y){if(Array.isArray(y)){for(var p=0,C=Array(y.length);p<y.length;p++)C[p]=y[p];return C}else return Array.from(y)}var o=a(15),s=a(4),u=a(0),f=a(8),c=a(9);function h(){o.call(this),this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=s.MAX_ITERATIONS}h.prototype=Object.create(o.prototype);for(var g in o)h[g]=o[g];h.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},h.prototype.calcIdealEdgeLengths=function(){for(var y,p,C,E,v,x,w,T=this.getGraphManager().getAllEdges(),A=0;A<T.length;A++)y=T[A],p=y.idealLength,y.isInterGraph&&(E=y.getSource(),v=y.getTarget(),x=y.getSourceInLca().getEstimatedSize(),w=y.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(y.idealLength+=x+w-2*u.SIMPLE_NODE_SIZE),C=y.getLca().getInclusionTreeDepth(),y.idealLength+=p*s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(E.getInclusionTreeDepth()+v.getInclusionTreeDepth()-2*C))},h.prototype.initSpringEmbedder=function(){var y=this.getAllNodes().length;this.incremental?(y>s.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*s.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(y-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-s.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT_INCREMENTAL):(y>s.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(s.COOLING_ADAPTATION_FACTOR,1-(y-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*(1-s.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},h.prototype.calcSpringForces=function(){for(var y=this.getAllEdges(),p,C=0;C<y.length;C++)p=y[C],this.calcSpringForce(p,p.idealLength)},h.prototype.calcRepulsionForces=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C,E,v,x,w=this.getAllNodes(),T;if(this.useFRGridVariant)for(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&y&&this.updateGrid(),T=new Set,C=0;C<w.length;C++)v=w[C],this.calculateRepulsionForceOfANode(v,T,y,p),T.add(v);else for(C=0;C<w.length;C++)for(v=w[C],E=C+1;E<w.length;E++)x=w[E],v.getOwner()==x.getOwner()&&this.calcRepulsionForce(v,x)},h.prototype.calcGravitationalForces=function(){for(var y,p=this.getAllNodesToApplyGravitation(),C=0;C<p.length;C++)y=p[C],this.calcGravitationalForce(y)},h.prototype.moveNodes=function(){for(var y=this.getAllNodes(),p,C=0;C<y.length;C++)p=y[C],p.move()},h.prototype.calcSpringForce=function(y,p){var C=y.getSource(),E=y.getTarget(),v,x,w,T;if(this.uniformLeafNodeSizes&&C.getChild()==null&&E.getChild()==null)y.updateLengthSimple();else if(y.updateLength(),y.isOverlapingSourceAndTarget)return;v=y.getLength(),v!=0&&(x=y.edgeElasticity*(v-p),w=x*(y.lengthX/v),T=x*(y.lengthY/v),C.springForceX+=w,C.springForceY+=T,E.springForceX-=w,E.springForceY-=T)},h.prototype.calcRepulsionForce=function(y,p){var C=y.getRect(),E=p.getRect(),v=new Array(2),x=new Array(4),w,T,A,M,D,_,k;if(C.intersects(E)){f.calcSeparationAmount(C,E,v,s.DEFAULT_EDGE_LENGTH/2),_=2*v[0],k=2*v[1];var F=y.noOfChildren*p.noOfChildren/(y.noOfChildren+p.noOfChildren);y.repulsionForceX-=F*_,y.repulsionForceY-=F*k,p.repulsionForceX+=F*_,p.repulsionForceY+=F*k}else this.uniformLeafNodeSizes&&y.getChild()==null&&p.getChild()==null?(w=E.getCenterX()-C.getCenterX(),T=E.getCenterY()-C.getCenterY()):(f.getIntersection(C,E,x),w=x[2]-x[0],T=x[3]-x[1]),Math.abs(w)<s.MIN_REPULSION_DIST&&(w=c.sign(w)*s.MIN_REPULSION_DIST),Math.abs(T)<s.MIN_REPULSION_DIST&&(T=c.sign(T)*s.MIN_REPULSION_DIST),A=w*w+T*T,M=Math.sqrt(A),D=(y.nodeRepulsion/2+p.nodeRepulsion/2)*y.noOfChildren*p.noOfChildren/A,_=D*w/M,k=D*T/M,y.repulsionForceX-=_,y.repulsionForceY-=k,p.repulsionForceX+=_,p.repulsionForceY+=k},h.prototype.calcGravitationalForce=function(y){var p,C,E,v,x,w,T,A;p=y.getOwner(),C=(p.getRight()+p.getLeft())/2,E=(p.getTop()+p.getBottom())/2,v=y.getCenterX()-C,x=y.getCenterY()-E,w=Math.abs(v)+y.getWidth()/2,T=Math.abs(x)+y.getHeight()/2,y.getOwner()==this.graphManager.getRoot()?(A=p.getEstimatedSize()*this.gravityRangeFactor,(w>A||T>A)&&(y.gravitationForceX=-this.gravityConstant*v,y.gravitationForceY=-this.gravityConstant*x)):(A=p.getEstimatedSize()*this.compoundGravityRangeFactor,(w>A||T>A)&&(y.gravitationForceX=-this.gravityConstant*v*this.compoundGravityConstant,y.gravitationForceY=-this.gravityConstant*x*this.compoundGravityConstant))},h.prototype.isConverged=function(){var y,p=!1;return this.totalIterations>this.maxIterations/3&&(p=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),y=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,y||p},h.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},h.prototype.calcNoOfChildrenForAllNodes=function(){for(var y,p=this.graphManager.getAllNodes(),C=0;C<p.length;C++)y=p[C],y.noOfChildren=y.getNoOfChildren()},h.prototype.calcGrid=function(y){var p=0,C=0;p=parseInt(Math.ceil((y.getRight()-y.getLeft())/this.repulsionRange)),C=parseInt(Math.ceil((y.getBottom()-y.getTop())/this.repulsionRange));for(var E=new Array(p),v=0;v<p;v++)E[v]=new Array(C);for(var v=0;v<p;v++)for(var x=0;x<C;x++)E[v][x]=new Array;return E},h.prototype.addNodeToGrid=function(y,p,C){var E=0,v=0,x=0,w=0;E=parseInt(Math.floor((y.getRect().x-p)/this.repulsionRange)),v=parseInt(Math.floor((y.getRect().width+y.getRect().x-p)/this.repulsionRange)),x=parseInt(Math.floor((y.getRect().y-C)/this.repulsionRange)),w=parseInt(Math.floor((y.getRect().height+y.getRect().y-C)/this.repulsionRange));for(var T=E;T<=v;T++)for(var A=x;A<=w;A++)this.grid[T][A].push(y),y.setGridCoordinates(E,v,x,w)},h.prototype.updateGrid=function(){var y,p,C=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),y=0;y<C.length;y++)p=C[y],this.addNodeToGrid(p,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},h.prototype.calculateRepulsionForceOfANode=function(y,p,C,E){if(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&C||E){var v=new Set;y.surrounding=new Array;for(var x,w=this.grid,T=y.startX-1;T<y.finishX+2;T++)for(var A=y.startY-1;A<y.finishY+2;A++)if(!(T<0||A<0||T>=w.length||A>=w[0].length)){for(var M=0;M<w[T][A].length;M++)if(x=w[T][A][M],!(y.getOwner()!=x.getOwner()||y==x)&&!p.has(x)&&!v.has(x)){var D=Math.abs(y.getCenterX()-x.getCenterX())-(y.getWidth()/2+x.getWidth()/2),_=Math.abs(y.getCenterY()-x.getCenterY())-(y.getHeight()/2+x.getHeight()/2);D<=this.repulsionRange&&_<=this.repulsionRange&&v.add(x)}}y.surrounding=[].concat(i(v))}for(T=0;T<y.surrounding.length;T++)this.calcRepulsionForce(y,y.surrounding[T])},h.prototype.calcRepulsionRange=function(){return 0},r.exports=h},function(r,n,a){var i=a(1),o=a(4);function s(f,c,h){i.call(this,f,c,h),this.idealLength=o.DEFAULT_EDGE_LENGTH,this.edgeElasticity=o.DEFAULT_SPRING_STRENGTH}s.prototype=Object.create(i.prototype);for(var u in i)s[u]=i[u];r.exports=s},function(r,n,a){var i=a(3),o=a(4);function s(f,c,h,g){i.call(this,f,c,h,g),this.nodeRepulsion=o.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}s.prototype=Object.create(i.prototype);for(var u in i)s[u]=i[u];s.prototype.setGridCoordinates=function(f,c,h,g){this.startX=f,this.finishX=c,this.startY=h,this.finishY=g},r.exports=s},function(r,n,a){function i(o,s){this.width=0,this.height=0,o!==null&&s!==null&&(this.height=s,this.width=o)}i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(o){this.width=o},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(o){this.height=o},r.exports=i},function(r,n,a){var i=a(14);function o(){this.map={},this.keys=[]}o.prototype.put=function(s,u){var f=i.createID(s);this.contains(f)||(this.map[f]=u,this.keys.push(s))},o.prototype.contains=function(s){return i.createID(s),this.map[s]!=null},o.prototype.get=function(s){var u=i.createID(s);return this.map[u]},o.prototype.keySet=function(){return this.keys},r.exports=o},function(r,n,a){var i=a(14);function o(){this.set={}}o.prototype.add=function(s){var u=i.createID(s);this.contains(u)||(this.set[u]=s)},o.prototype.remove=function(s){delete this.set[i.createID(s)]},o.prototype.clear=function(){this.set={}},o.prototype.contains=function(s){return this.set[i.createID(s)]==s},o.prototype.isEmpty=function(){return this.size()===0},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAllTo=function(s){for(var u=Object.keys(this.set),f=u.length,c=0;c<f;c++)s.push(this.set[u[c]])},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAll=function(s){for(var u=s.length,f=0;f<u;f++){var c=s[f];this.add(c)}},r.exports=o},function(r,n,a){function i(){}i.multMat=function(o,s){for(var u=[],f=0;f<o.length;f++){u[f]=[];for(var c=0;c<s[0].length;c++){u[f][c]=0;for(var h=0;h<o[0].length;h++)u[f][c]+=o[f][h]*s[h][c]}}return u},i.transpose=function(o){for(var s=[],u=0;u<o[0].length;u++){s[u]=[];for(var f=0;f<o.length;f++)s[u][f]=o[f][u]}return s},i.multCons=function(o,s){for(var u=[],f=0;f<o.length;f++)u[f]=o[f]*s;return u},i.minusOp=function(o,s){for(var u=[],f=0;f<o.length;f++)u[f]=o[f]-s[f];return u},i.dotProduct=function(o,s){for(var u=0,f=0;f<o.length;f++)u+=o[f]*s[f];return u},i.mag=function(o){return Math.sqrt(this.dotProduct(o,o))},i.normalize=function(o){for(var s=[],u=this.mag(o),f=0;f<o.length;f++)s[f]=o[f]/u;return s},i.multGamma=function(o){for(var s=[],u=0,f=0;f<o.length;f++)u+=o[f];u*=-1/o.length;for(var c=0;c<o.length;c++)s[c]=u+o[c];return s},i.multL=function(o,s,u){for(var f=[],c=[],h=[],g=0;g<s[0].length;g++){for(var y=0,p=0;p<s.length;p++)y+=-.5*s[p][g]*o[p];c[g]=y}for(var C=0;C<u.length;C++){for(var E=0,v=0;v<u.length;v++)E+=u[C][v]*c[v];h[C]=E}for(var x=0;x<s.length;x++){for(var w=0,T=0;T<s[0].length;T++)w+=s[x][T]*h[T];f[x]=w}return f},r.exports=i},function(r,n,a){var i=function(){function f(c,h){for(var g=0;g<h.length;g++){var y=h[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(c,y.key,y)}}return function(c,h,g){return h&&f(c.prototype,h),g&&f(c,g),c}}();function o(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}var s=a(11),u=function(){function f(c,h){o(this,f),(h!==null||h!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var g=void 0;c instanceof s?g=c.size():g=c.length,this._quicksort(c,0,g-1)}return i(f,[{key:"_quicksort",value:function(h,g,y){if(g<y){var p=this._partition(h,g,y);this._quicksort(h,g,p),this._quicksort(h,p+1,y)}}},{key:"_partition",value:function(h,g,y){for(var p=this._get(h,g),C=g,E=y;;){for(;this.compareFunction(p,this._get(h,E));)E--;for(;this.compareFunction(this._get(h,C),p);)C++;if(C<E)this._swap(h,C,E),C++,E--;else return E}}},{key:"_get",value:function(h,g){return h instanceof s?h.get_object_at(g):h[g]}},{key:"_set",value:function(h,g,y){h instanceof s?h.set_object_at(g,y):h[g]=y}},{key:"_swap",value:function(h,g,y){var p=this._get(h,g);this._set(h,g,this._get(h,y)),this._set(h,y,p)}},{key:"_defaultCompareFunction",value:function(h,g){return g>h}}]),f}();r.exports=u},function(r,n,a){function i(){}i.svd=function(o){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=o.length,this.n=o[0].length;var s=Math.min(this.m,this.n);this.s=function(dt){for(var gt=[];dt-- >0;)gt.push(0);return gt}(Math.min(this.m+1,this.n)),this.U=function(dt){var gt=function _t(Mt){if(Mt.length==0)return 0;for(var Zt=[],Lt=0;Lt<Mt[0];Lt++)Zt.push(_t(Mt.slice(1)));return Zt};return gt(dt)}([this.m,s]),this.V=function(dt){var gt=function _t(Mt){if(Mt.length==0)return 0;for(var Zt=[],Lt=0;Lt<Mt[0];Lt++)Zt.push(_t(Mt.slice(1)));return Zt};return gt(dt)}([this.n,this.n]);for(var u=function(dt){for(var gt=[];dt-- >0;)gt.push(0);return gt}(this.n),f=function(dt){for(var gt=[];dt-- >0;)gt.push(0);return gt}(this.m),c=!0,h=Math.min(this.m-1,this.n),g=Math.max(0,Math.min(this.n-2,this.m)),y=0;y<Math.max(h,g);y++){if(y<h){this.s[y]=0;for(var p=y;p<this.m;p++)this.s[y]=i.hypot(this.s[y],o[p][y]);if(this.s[y]!==0){o[y][y]<0&&(this.s[y]=-this.s[y]);for(var C=y;C<this.m;C++)o[C][y]/=this.s[y];o[y][y]+=1}this.s[y]=-this.s[y]}for(var E=y+1;E<this.n;E++){if(function(dt,gt){return dt&&gt}(y<h,this.s[y]!==0)){for(var v=0,x=y;x<this.m;x++)v+=o[x][y]*o[x][E];v=-v/o[y][y];for(var w=y;w<this.m;w++)o[w][E]+=v*o[w][y]}u[E]=o[y][E]}if(function(dt,gt){return gt}(c,y<h))for(var T=y;T<this.m;T++)this.U[T][y]=o[T][y];if(y<g){u[y]=0;for(var A=y+1;A<this.n;A++)u[y]=i.hypot(u[y],u[A]);if(u[y]!==0){u[y+1]<0&&(u[y]=-u[y]);for(var M=y+1;M<this.n;M++)u[M]/=u[y];u[y+1]+=1}if(u[y]=-u[y],function(dt,gt){return dt&&gt}(y+1<this.m,u[y]!==0)){for(var D=y+1;D<this.m;D++)f[D]=0;for(var _=y+1;_<this.n;_++)for(var k=y+1;k<this.m;k++)f[k]+=u[_]*o[k][_];for(var F=y+1;F<this.n;F++)for(var G=-u[F]/u[y+1],B=y+1;B<this.m;B++)o[B][F]+=G*f[B]}for(var q=y+1;q<this.n;q++)this.V[q][y]=u[q]}}var R=Math.min(this.n,this.m+1);h<this.n&&(this.s[h]=o[h][h]),this.m<R&&(this.s[R-1]=0),g+1<R&&(u[g]=o[g][R-1]),u[R-1]=0;{for(var P=h;P<s;P++){for(var N=0;N<this.m;N++)this.U[N][P]=0;this.U[P][P]=1}for(var I=h-1;I>=0;I--)if(this.s[I]!==0){for(var z=I+1;z<s;z++){for(var ae=0,re=I;re<this.m;re++)ae+=this.U[re][I]*this.U[re][z];ae=-ae/this.U[I][I];for(var K=I;K<this.m;K++)this.U[K][z]+=ae*this.U[K][I]}for(var V=I;V<this.m;V++)this.U[V][I]=-this.U[V][I];this.U[I][I]=1+this.U[I][I];for(var Z=0;Z<I-1;Z++)this.U[Z][I]=0}else{for(var U=0;U<this.m;U++)this.U[U][I]=0;this.U[I][I]=1}}for(var W=this.n-1;W>=0;W--){if(function(dt,gt){return dt&&gt}(W<g,u[W]!==0))for(var X=W+1;X<s;X++){for(var ee=0,oe=W+1;oe<this.n;oe++)ee+=this.V[oe][W]*this.V[oe][X];ee=-ee/this.V[W+1][W];for(var te=W+1;te<this.n;te++)this.V[te][X]+=ee*this.V[te][W]}for(var ie=0;ie<this.n;ie++)this.V[ie][W]=0;this.V[W][W]=1}for(var se=R-1,$=Math.pow(2,-52),ne=Math.pow(2,-966);R>0;){var le=void 0,Se=void 0;for(le=R-2;le>=-1&&le!==-1;le--)if(Math.abs(u[le])<=ne+$*(Math.abs(this.s[le])+Math.abs(this.s[le+1]))){u[le]=0;break}if(le===R-2)Se=4;else{var De=void 0;for(De=R-1;De>=le&&De!==le;De--){var be=(De!==R?Math.abs(u[De]):0)+(De!==le+1?Math.abs(u[De-1]):0);if(Math.abs(this.s[De])<=ne+$*be){this.s[De]=0;break}}De===le?Se=3:De===R-1?Se=1:(Se=2,le=De)}switch(le++,Se){case 1:{var Te=u[R-2];u[R-2]=0;for(var pe=R-2;pe>=le;pe--){var de=i.hypot(this.s[pe],Te),ye=this.s[pe]/de,Ee=Te/de;this.s[pe]=de,pe!==le&&(Te=-Ee*u[pe-1],u[pe-1]=ye*u[pe-1]);for(var ue=0;ue<this.n;ue++)de=ye*this.V[ue][pe]+Ee*this.V[ue][R-1],this.V[ue][R-1]=-Ee*this.V[ue][pe]+ye*this.V[ue][R-1],this.V[ue][pe]=de}}break;case 2:{var Ae=u[le-1];u[le-1]=0;for(var Pe=le;Pe<R;Pe++){var Fe=i.hypot(this.s[Pe],Ae),Ye=this.s[Pe]/Fe,Ve=Ae/Fe;this.s[Pe]=Fe,Ae=-Ve*u[Pe],u[Pe]=Ye*u[Pe];for(var Qe=0;Qe<this.m;Qe++)Fe=Ye*this.U[Qe][Pe]+Ve*this.U[Qe][le-1],this.U[Qe][le-1]=-Ve*this.U[Qe][Pe]+Ye*this.U[Qe][le-1],this.U[Qe][Pe]=Fe}}break;case 3:{var Xe=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[R-1]),Math.abs(this.s[R-2])),Math.abs(u[R-2])),Math.abs(this.s[le])),Math.abs(u[le])),We=this.s[R-1]/Xe,he=this.s[R-2]/Xe,j=u[R-2]/Xe,ve=this.s[le]/Xe,me=u[le]/Xe,we=((he+We)*(he-We)+j*j)/2,xe=We*j*(We*j),qe=0;(function(dt,gt){return dt||gt})(we!==0,xe!==0)&&(qe=Math.sqrt(we*we+xe),we<0&&(qe=-qe),qe=xe/(we+qe));for(var Ce=(ve+We)*(ve-We)+qe,Oe=ve*me,Ie=le;Ie<R-1;Ie++){var He=i.hypot(Ce,Oe),Ue=Ce/He,je=Oe/He;Ie!==le&&(u[Ie-1]=He),Ce=Ue*this.s[Ie]+je*u[Ie],u[Ie]=Ue*u[Ie]-je*this.s[Ie],Oe=je*this.s[Ie+1],this.s[Ie+1]=Ue*this.s[Ie+1];for(var et=0;et<this.n;et++)He=Ue*this.V[et][Ie]+je*this.V[et][Ie+1],this.V[et][Ie+1]=-je*this.V[et][Ie]+Ue*this.V[et][Ie+1],this.V[et][Ie]=He;if(He=i.hypot(Ce,Oe),Ue=Ce/He,je=Oe/He,this.s[Ie]=He,Ce=Ue*u[Ie]+je*this.s[Ie+1],this.s[Ie+1]=-je*u[Ie]+Ue*this.s[Ie+1],Oe=je*u[Ie+1],u[Ie+1]=Ue*u[Ie+1],Ie<this.m-1)for(var Ge=0;Ge<this.m;Ge++)He=Ue*this.U[Ge][Ie]+je*this.U[Ge][Ie+1],this.U[Ge][Ie+1]=-je*this.U[Ge][Ie]+Ue*this.U[Ge][Ie+1],this.U[Ge][Ie]=He}u[R-2]=Ce}break;case 4:{if(this.s[le]<=0){this.s[le]=this.s[le]<0?-this.s[le]:0;for(var $e=0;$e<=se;$e++)this.V[$e][le]=-this.V[$e][le]}for(;le<se&&!(this.s[le]>=this.s[le+1]);){var vt=this.s[le];if(this.s[le]=this.s[le+1],this.s[le+1]=vt,le<this.n-1)for(var nt=0;nt<this.n;nt++)vt=this.V[nt][le+1],this.V[nt][le+1]=this.V[nt][le],this.V[nt][le]=vt;if(le<this.m-1)for(var st=0;st<this.m;st++)vt=this.U[st][le+1],this.U[st][le+1]=this.U[st][le],this.U[st][le]=vt;le++}R--}break}}var Tt={U:this.U,V:this.V,S:this.s};return Tt},i.hypot=function(o,s){var u=void 0;return Math.abs(o)>Math.abs(s)?(u=s/o,u=Math.abs(o)*Math.sqrt(1+u*u)):s!=0?(u=o/s,u=Math.abs(s)*Math.sqrt(1+u*u)):u=0,u},r.exports=i},function(r,n,a){var i=function(){function u(f,c){for(var h=0;h<c.length;h++){var g=c[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}return function(f,c,h){return c&&u(f.prototype,c),h&&u(f,h),f}}();function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var s=function(){function u(f,c){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;o(this,u),this.sequence1=f,this.sequence2=c,this.match_score=h,this.mismatch_penalty=g,this.gap_penalty=y,this.iMax=f.length+1,this.jMax=c.length+1,this.grid=new Array(this.iMax);for(var p=0;p<this.iMax;p++){this.grid[p]=new Array(this.jMax);for(var C=0;C<this.jMax;C++)this.grid[p][C]=0}this.tracebackGrid=new Array(this.iMax);for(var E=0;E<this.iMax;E++){this.tracebackGrid[E]=new Array(this.jMax);for(var v=0;v<this.jMax;v++)this.tracebackGrid[E][v]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return i(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var c=1;c<this.jMax;c++)this.grid[0][c]=this.grid[0][c-1]+this.gap_penalty,this.tracebackGrid[0][c]=[!1,!1,!0];for(var h=1;h<this.iMax;h++)this.grid[h][0]=this.grid[h-1][0]+this.gap_penalty,this.tracebackGrid[h][0]=[!1,!0,!1];for(var g=1;g<this.iMax;g++)for(var y=1;y<this.jMax;y++){var p=void 0;this.sequence1[g-1]===this.sequence2[y-1]?p=this.grid[g-1][y-1]+this.match_score:p=this.grid[g-1][y-1]+this.mismatch_penalty;var C=this.grid[g-1][y]+this.gap_penalty,E=this.grid[g][y-1]+this.gap_penalty,v=[p,C,E],x=this.arrayAllMaxIndexes(v);this.grid[g][y]=v[x[0]],this.tracebackGrid[g][y]=[x.includes(0),x.includes(1),x.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var c=[];for(c.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});c[0];){var h=c[0],g=this.tracebackGrid[h.pos[0]][h.pos[1]];g[0]&&c.push({pos:[h.pos[0]-1,h.pos[1]-1],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),g[1]&&c.push({pos:[h.pos[0]-1,h.pos[1]],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:"-"+h.seq2}),g[2]&&c.push({pos:[h.pos[0],h.pos[1]-1],seq1:"-"+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),h.pos[0]===0&&h.pos[1]===0&&this.alignments.push({sequence1:h.seq1,sequence2:h.seq2}),c.shift()}return this.alignments}},{key:"getAllIndexes",value:function(c,h){for(var g=[],y=-1;(y=c.indexOf(h,y+1))!==-1;)g.push(y);return g}},{key:"arrayAllMaxIndexes",value:function(c){return this.getAllIndexes(c,Math.max.apply(null,c))}}]),u}();r.exports=s},function(r,n,a){var i=function(){};i.FDLayout=a(18),i.FDLayoutConstants=a(4),i.FDLayoutEdge=a(19),i.FDLayoutNode=a(20),i.DimensionD=a(21),i.HashMap=a(22),i.HashSet=a(23),i.IGeometry=a(8),i.IMath=a(9),i.Integer=a(10),i.Point=a(12),i.PointD=a(5),i.RandomSeed=a(16),i.RectangleD=a(13),i.Transform=a(17),i.UniqueIDGeneretor=a(14),i.Quicksort=a(25),i.LinkedList=a(11),i.LGraphObject=a(2),i.LGraph=a(6),i.LEdge=a(1),i.LGraphManager=a(7),i.LNode=a(3),i.Layout=a(15),i.LayoutConstants=a(0),i.NeedlemanWunsch=a(27),i.Matrix=a(24),i.SVD=a(26),r.exports=i},function(r,n,a){function i(){this.listeners=[]}var o=i.prototype;o.addListener=function(s,u){this.listeners.push({event:s,callback:u})},o.removeListener=function(s,u){for(var f=this.listeners.length;f>=0;f--){var c=this.listeners[f];c.event===s&&c.callback===u&&this.listeners.splice(f,1)}},o.emit=function(s,u){for(var f=0;f<this.listeners.length;f++){var c=this.listeners[f];s===c.event&&c.callback(u)}},r.exports=i}])})}(If)),If.exports}var L4=Of.exports,eR;function D4(){return eR||(eR=1,function(t,e){(function(n,a){t.exports=a(A4())})(L4,function(r){return(()=>{var n={45:(s,u,f)=>{var c={};c.layoutBase=f(551),c.CoSEConstants=f(806),c.CoSEEdge=f(767),c.CoSEGraph=f(880),c.CoSEGraphManager=f(578),c.CoSELayout=f(765),c.CoSENode=f(991),c.ConstraintHandler=f(902),s.exports=c},806:(s,u,f)=>{var c=f(551).FDLayoutConstants;function h(){}for(var g in c)h[g]=c[g];h.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,h.DEFAULT_RADIAL_SEPARATION=c.DEFAULT_EDGE_LENGTH,h.DEFAULT_COMPONENT_SEPERATION=60,h.TILE=!0,h.TILING_PADDING_VERTICAL=10,h.TILING_PADDING_HORIZONTAL=10,h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!0,h.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,h.TREE_REDUCTION_ON_INCREMENTAL=!0,h.PURE_INCREMENTAL=h.DEFAULT_INCREMENTAL,s.exports=h},767:(s,u,f)=>{var c=f(551).FDLayoutEdge;function h(y,p,C){c.call(this,y,p,C)}h.prototype=Object.create(c.prototype);for(var g in c)h[g]=c[g];s.exports=h},880:(s,u,f)=>{var c=f(551).LGraph;function h(y,p,C){c.call(this,y,p,C)}h.prototype=Object.create(c.prototype);for(var g in c)h[g]=c[g];s.exports=h},578:(s,u,f)=>{var c=f(551).LGraphManager;function h(y){c.call(this,y)}h.prototype=Object.create(c.prototype);for(var g in c)h[g]=c[g];s.exports=h},765:(s,u,f)=>{var c=f(551).FDLayout,h=f(578),g=f(880),y=f(991),p=f(767),C=f(806),E=f(902),v=f(551).FDLayoutConstants,x=f(551).LayoutConstants,w=f(551).Point,T=f(551).PointD,A=f(551).DimensionD,M=f(551).Layout,D=f(551).Integer,_=f(551).IGeometry,k=f(551).LGraph,F=f(551).Transform,G=f(551).LinkedList;function B(){c.call(this),this.toBeTiled={},this.constraints={}}B.prototype=Object.create(c.prototype);for(var q in c)B[q]=c[q];B.prototype.newGraphManager=function(){var R=new h(this);return this.graphManager=R,R},B.prototype.newGraph=function(R){return new g(null,this.graphManager,R)},B.prototype.newNode=function(R){return new y(this.graphManager,R)},B.prototype.newEdge=function(R){return new p(null,null,R)},B.prototype.initParameters=function(){c.prototype.initParameters.call(this,arguments),this.isSubLayout||(C.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=C.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=C.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=v.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=v.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=v.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},B.prototype.initSpringEmbedder=function(){c.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/v.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},B.prototype.layout=function(){var R=x.DEFAULT_CREATE_BENDS_AS_NEEDED;return R&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},B.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(C.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var P=new Set(this.getAllNodes()),N=this.nodesWithGravity.filter(function(ae){return P.has(ae)});this.graphManager.setAllNodesToApplyGravitation(N)}}else{var R=this.getFlatForest();if(R.length>0)this.positionNodesRadially(R);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var P=new Set(this.getAllNodes()),N=this.nodesWithGravity.filter(function(I){return P.has(I)});this.graphManager.setAllNodesToApplyGravitation(N),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(E.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),C.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},B.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%v.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var R=new Set(this.getAllNodes()),P=this.nodesWithGravity.filter(function(z){return R.has(z)});this.graphManager.setAllNodesToApplyGravitation(P),this.graphManager.updateBounds(),this.updateGrid(),C.PURE_INCREMENTAL?this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),C.PURE_INCREMENTAL?this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var N=!this.isTreeGrowing&&!this.isGrowthFinished,I=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(N,I),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},B.prototype.getPositionsData=function(){for(var R=this.graphManager.getAllNodes(),P={},N=0;N<R.length;N++){var I=R[N].rect,z=R[N].id;P[z]={id:z,x:I.getCenterX(),y:I.getCenterY(),w:I.width,h:I.height}}return P},B.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var R=!1;if(v.ANIMATE==="during")this.emit("layoutstarted");else{for(;!R;)R=this.tick();this.graphManager.updateBounds()}},B.prototype.moveNodes=function(){for(var R=this.getAllNodes(),P,N=0;N<R.length;N++)P=R[N],P.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var N=0;N<R.length;N++)P=R[N],P.move()},B.prototype.initConstraintVariables=function(){var R=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var P=this.graphManager.getAllNodes(),N=0;N<P.length;N++){var I=P[N];this.idToNodeMap.set(I.id,I)}var z=function te(ie){for(var se=ie.getChild().getNodes(),$,ne=0,le=0;le<se.length;le++)$=se[le],$.getChild()==null?R.fixedNodeSet.has($.id)&&(ne+=100):ne+=te($);return ne};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(se){R.fixedNodeSet.add(se.nodeId)});for(var P=this.graphManager.getAllNodes(),I,N=0;N<P.length;N++)if(I=P[N],I.getChild()!=null){var ae=z(I);ae>0&&(I.fixedNodeWeight=ae)}}if(this.constraints.relativePlacementConstraint){var re=new Map,K=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(te){R.fixedNodesOnHorizontal.add(te),R.fixedNodesOnVertical.add(te)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var V=this.constraints.alignmentConstraint.vertical,N=0;N<V.length;N++)this.dummyToNodeForVerticalAlignment.set("dummy"+N,[]),V[N].forEach(function(ie){re.set(ie,"dummy"+N),R.dummyToNodeForVerticalAlignment.get("dummy"+N).push(ie),R.fixedNodeSet.has(ie)&&R.fixedNodesOnHorizontal.add("dummy"+N)});if(this.constraints.alignmentConstraint.horizontal)for(var Z=this.constraints.alignmentConstraint.horizontal,N=0;N<Z.length;N++)this.dummyToNodeForHorizontalAlignment.set("dummy"+N,[]),Z[N].forEach(function(ie){K.set(ie,"dummy"+N),R.dummyToNodeForHorizontalAlignment.get("dummy"+N).push(ie),R.fixedNodeSet.has(ie)&&R.fixedNodesOnVertical.add("dummy"+N)})}if(C.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(te){var ie,se,$;for($=te.length-1;$>=2*te.length/3;$--)ie=Math.floor(Math.random()*($+1)),se=te[$],te[$]=te[ie],te[ie]=se;return te},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(te){if(te.left){var ie=re.has(te.left)?re.get(te.left):te.left,se=re.has(te.right)?re.get(te.right):te.right;R.nodesInRelativeHorizontal.includes(ie)||(R.nodesInRelativeHorizontal.push(ie),R.nodeToRelativeConstraintMapHorizontal.set(ie,[]),R.dummyToNodeForVerticalAlignment.has(ie)?R.nodeToTempPositionMapHorizontal.set(ie,R.idToNodeMap.get(R.dummyToNodeForVerticalAlignment.get(ie)[0]).getCenterX()):R.nodeToTempPositionMapHorizontal.set(ie,R.idToNodeMap.get(ie).getCenterX())),R.nodesInRelativeHorizontal.includes(se)||(R.nodesInRelativeHorizontal.push(se),R.nodeToRelativeConstraintMapHorizontal.set(se,[]),R.dummyToNodeForVerticalAlignment.has(se)?R.nodeToTempPositionMapHorizontal.set(se,R.idToNodeMap.get(R.dummyToNodeForVerticalAlignment.get(se)[0]).getCenterX()):R.nodeToTempPositionMapHorizontal.set(se,R.idToNodeMap.get(se).getCenterX())),R.nodeToRelativeConstraintMapHorizontal.get(ie).push({right:se,gap:te.gap}),R.nodeToRelativeConstraintMapHorizontal.get(se).push({left:ie,gap:te.gap})}else{var $=K.has(te.top)?K.get(te.top):te.top,ne=K.has(te.bottom)?K.get(te.bottom):te.bottom;R.nodesInRelativeVertical.includes($)||(R.nodesInRelativeVertical.push($),R.nodeToRelativeConstraintMapVertical.set($,[]),R.dummyToNodeForHorizontalAlignment.has($)?R.nodeToTempPositionMapVertical.set($,R.idToNodeMap.get(R.dummyToNodeForHorizontalAlignment.get($)[0]).getCenterY()):R.nodeToTempPositionMapVertical.set($,R.idToNodeMap.get($).getCenterY())),R.nodesInRelativeVertical.includes(ne)||(R.nodesInRelativeVertical.push(ne),R.nodeToRelativeConstraintMapVertical.set(ne,[]),R.dummyToNodeForHorizontalAlignment.has(ne)?R.nodeToTempPositionMapVertical.set(ne,R.idToNodeMap.get(R.dummyToNodeForHorizontalAlignment.get(ne)[0]).getCenterY()):R.nodeToTempPositionMapVertical.set(ne,R.idToNodeMap.get(ne).getCenterY())),R.nodeToRelativeConstraintMapVertical.get($).push({bottom:ne,gap:te.gap}),R.nodeToRelativeConstraintMapVertical.get(ne).push({top:$,gap:te.gap})}});else{var U=new Map,W=new Map;this.constraints.relativePlacementConstraint.forEach(function(te){if(te.left){var ie=re.has(te.left)?re.get(te.left):te.left,se=re.has(te.right)?re.get(te.right):te.right;U.has(ie)?U.get(ie).push(se):U.set(ie,[se]),U.has(se)?U.get(se).push(ie):U.set(se,[ie])}else{var $=K.has(te.top)?K.get(te.top):te.top,ne=K.has(te.bottom)?K.get(te.bottom):te.bottom;W.has($)?W.get($).push(ne):W.set($,[ne]),W.has(ne)?W.get(ne).push($):W.set(ne,[$])}});var X=function(ie,se){var $=[],ne=[],le=new G,Se=new Set,De=0;return ie.forEach(function(be,Te){if(!Se.has(Te)){$[De]=[],ne[De]=!1;var pe=Te;for(le.push(pe),Se.add(pe),$[De].push(pe);le.length!=0;){pe=le.shift(),se.has(pe)&&(ne[De]=!0);var de=ie.get(pe);de.forEach(function(ye){Se.has(ye)||(le.push(ye),Se.add(ye),$[De].push(ye))})}De++}}),{components:$,isFixed:ne}},ee=X(U,R.fixedNodesOnHorizontal);this.componentsOnHorizontal=ee.components,this.fixedComponentsOnHorizontal=ee.isFixed;var oe=X(W,R.fixedNodesOnVertical);this.componentsOnVertical=oe.components,this.fixedComponentsOnVertical=oe.isFixed}}},B.prototype.updateDisplacements=function(){var R=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(oe){var te=R.idToNodeMap.get(oe.nodeId);te.displacementX=0,te.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var P=this.constraints.alignmentConstraint.vertical,N=0;N<P.length;N++){for(var I=0,z=0;z<P[N].length;z++){if(this.fixedNodeSet.has(P[N][z])){I=0;break}I+=this.idToNodeMap.get(P[N][z]).displacementX}for(var ae=I/P[N].length,z=0;z<P[N].length;z++)this.idToNodeMap.get(P[N][z]).displacementX=ae}if(this.constraints.alignmentConstraint.horizontal)for(var re=this.constraints.alignmentConstraint.horizontal,N=0;N<re.length;N++){for(var K=0,z=0;z<re[N].length;z++){if(this.fixedNodeSet.has(re[N][z])){K=0;break}K+=this.idToNodeMap.get(re[N][z]).displacementY}for(var V=K/re[N].length,z=0;z<re[N].length;z++)this.idToNodeMap.get(re[N][z]).displacementY=V}}if(this.constraints.relativePlacementConstraint)if(C.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(oe){if(!R.fixedNodesOnHorizontal.has(oe)){var te=0;R.dummyToNodeForVerticalAlignment.has(oe)?te=R.idToNodeMap.get(R.dummyToNodeForVerticalAlignment.get(oe)[0]).displacementX:te=R.idToNodeMap.get(oe).displacementX,R.nodeToRelativeConstraintMapHorizontal.get(oe).forEach(function(ie){if(ie.right){var se=R.nodeToTempPositionMapHorizontal.get(ie.right)-R.nodeToTempPositionMapHorizontal.get(oe)-te;se<ie.gap&&(te-=ie.gap-se)}else{var se=R.nodeToTempPositionMapHorizontal.get(oe)-R.nodeToTempPositionMapHorizontal.get(ie.left)+te;se<ie.gap&&(te+=ie.gap-se)}}),R.nodeToTempPositionMapHorizontal.set(oe,R.nodeToTempPositionMapHorizontal.get(oe)+te),R.dummyToNodeForVerticalAlignment.has(oe)?R.dummyToNodeForVerticalAlignment.get(oe).forEach(function(ie){R.idToNodeMap.get(ie).displacementX=te}):R.idToNodeMap.get(oe).displacementX=te}}),this.nodesInRelativeVertical.forEach(function(oe){if(!R.fixedNodesOnHorizontal.has(oe)){var te=0;R.dummyToNodeForHorizontalAlignment.has(oe)?te=R.idToNodeMap.get(R.dummyToNodeForHorizontalAlignment.get(oe)[0]).displacementY:te=R.idToNodeMap.get(oe).displacementY,R.nodeToRelativeConstraintMapVertical.get(oe).forEach(function(ie){if(ie.bottom){var se=R.nodeToTempPositionMapVertical.get(ie.bottom)-R.nodeToTempPositionMapVertical.get(oe)-te;se<ie.gap&&(te-=ie.gap-se)}else{var se=R.nodeToTempPositionMapVertical.get(oe)-R.nodeToTempPositionMapVertical.get(ie.top)+te;se<ie.gap&&(te+=ie.gap-se)}}),R.nodeToTempPositionMapVertical.set(oe,R.nodeToTempPositionMapVertical.get(oe)+te),R.dummyToNodeForHorizontalAlignment.has(oe)?R.dummyToNodeForHorizontalAlignment.get(oe).forEach(function(ie){R.idToNodeMap.get(ie).displacementY=te}):R.idToNodeMap.get(oe).displacementY=te}});else{for(var N=0;N<this.componentsOnHorizontal.length;N++){var Z=this.componentsOnHorizontal[N];if(this.fixedComponentsOnHorizontal[N])for(var z=0;z<Z.length;z++)this.dummyToNodeForVerticalAlignment.has(Z[z])?this.dummyToNodeForVerticalAlignment.get(Z[z]).forEach(function(ie){R.idToNodeMap.get(ie).displacementX=0}):this.idToNodeMap.get(Z[z]).displacementX=0;else{for(var U=0,W=0,z=0;z<Z.length;z++)if(this.dummyToNodeForVerticalAlignment.has(Z[z])){var X=this.dummyToNodeForVerticalAlignment.get(Z[z]);U+=X.length*this.idToNodeMap.get(X[0]).displacementX,W+=X.length}else U+=this.idToNodeMap.get(Z[z]).displacementX,W++;for(var ee=U/W,z=0;z<Z.length;z++)this.dummyToNodeForVerticalAlignment.has(Z[z])?this.dummyToNodeForVerticalAlignment.get(Z[z]).forEach(function(ie){R.idToNodeMap.get(ie).displacementX=ee}):this.idToNodeMap.get(Z[z]).displacementX=ee}}for(var N=0;N<this.componentsOnVertical.length;N++){var Z=this.componentsOnVertical[N];if(this.fixedComponentsOnVertical[N])for(var z=0;z<Z.length;z++)this.dummyToNodeForHorizontalAlignment.has(Z[z])?this.dummyToNodeForHorizontalAlignment.get(Z[z]).forEach(function(se){R.idToNodeMap.get(se).displacementY=0}):this.idToNodeMap.get(Z[z]).displacementY=0;else{for(var U=0,W=0,z=0;z<Z.length;z++)if(this.dummyToNodeForHorizontalAlignment.has(Z[z])){var X=this.dummyToNodeForHorizontalAlignment.get(Z[z]);U+=X.length*this.idToNodeMap.get(X[0]).displacementY,W+=X.length}else U+=this.idToNodeMap.get(Z[z]).displacementY,W++;for(var ee=U/W,z=0;z<Z.length;z++)this.dummyToNodeForHorizontalAlignment.has(Z[z])?this.dummyToNodeForHorizontalAlignment.get(Z[z]).forEach(function(le){R.idToNodeMap.get(le).displacementY=ee}):this.idToNodeMap.get(Z[z]).displacementY=ee}}}},B.prototype.calculateNodesToApplyGravitationTo=function(){var R=[],P,N=this.graphManager.getGraphs(),I=N.length,z;for(z=0;z<I;z++)P=N[z],P.updateConnected(),P.isConnected||(R=R.concat(P.getNodes()));return R},B.prototype.createBendpoints=function(){var R=[];R=R.concat(this.graphManager.getAllEdges());var P=new Set,N;for(N=0;N<R.length;N++){var I=R[N];if(!P.has(I)){var z=I.getSource(),ae=I.getTarget();if(z==ae)I.getBendpoints().push(new T),I.getBendpoints().push(new T),this.createDummyNodesForBendpoints(I),P.add(I);else{var re=[];if(re=re.concat(z.getEdgeListToNode(ae)),re=re.concat(ae.getEdgeListToNode(z)),!P.has(re[0])){if(re.length>1){var K;for(K=0;K<re.length;K++){var V=re[K];V.getBendpoints().push(new T),this.createDummyNodesForBendpoints(V)}}re.forEach(function(Z){P.add(Z)})}}}if(P.size==R.length)break}},B.prototype.positionNodesRadially=function(R){for(var P=new w(0,0),N=Math.ceil(Math.sqrt(R.length)),I=0,z=0,ae=0,re=new T(0,0),K=0;K<R.length;K++){K%N==0&&(ae=0,z=I,K!=0&&(z+=C.DEFAULT_COMPONENT_SEPERATION),I=0);var V=R[K],Z=M.findCenterOfTree(V);P.x=ae,P.y=z,re=B.radialLayout(V,Z,P),re.y>I&&(I=Math.floor(re.y)),ae=Math.floor(re.x+C.DEFAULT_COMPONENT_SEPERATION)}this.transform(new T(x.WORLD_CENTER_X-re.x/2,x.WORLD_CENTER_Y-re.y/2))},B.radialLayout=function(R,P,N){var I=Math.max(this.maxDiagonalInTree(R),C.DEFAULT_RADIAL_SEPARATION);B.branchRadialLayout(P,null,0,359,0,I);var z=k.calculateBounds(R),ae=new F;ae.setDeviceOrgX(z.getMinX()),ae.setDeviceOrgY(z.getMinY()),ae.setWorldOrgX(N.x),ae.setWorldOrgY(N.y);for(var re=0;re<R.length;re++){var K=R[re];K.transform(ae)}var V=new T(z.getMaxX(),z.getMaxY());return ae.inverseTransformPoint(V)},B.branchRadialLayout=function(R,P,N,I,z,ae){var re=(I-N+1)/2;re<0&&(re+=180);var K=(re+N)%360,V=K*_.TWO_PI/360,Z=z*Math.cos(V),U=z*Math.sin(V);R.setCenter(Z,U);var W=[];W=W.concat(R.getEdges());var X=W.length;P!=null&&X--;for(var ee=0,oe=W.length,te,ie=R.getEdgesBetween(P);ie.length>1;){var se=ie[0];ie.splice(0,1);var $=W.indexOf(se);$>=0&&W.splice($,1),oe--,X--}P!=null?te=(W.indexOf(ie[0])+1)%oe:te=0;for(var ne=Math.abs(I-N)/X,le=te;ee!=X;le=++le%oe){var Se=W[le].getOtherEnd(R);if(Se!=P){var De=(N+ee*ne)%360,be=(De+ne)%360;B.branchRadialLayout(Se,R,De,be,z+ae,ae),ee++}}},B.maxDiagonalInTree=function(R){for(var P=D.MIN_VALUE,N=0;N<R.length;N++){var I=R[N],z=I.getDiagonal();z>P&&(P=z)}return P},B.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},B.prototype.groupZeroDegreeMembers=function(){var R=this,P={};this.memberGroups={},this.idToDummyNode={};for(var N=[],I=this.graphManager.getAllNodes(),z=0;z<I.length;z++){var ae=I[z],re=ae.getParent();this.getNodeDegreeWithChildren(ae)===0&&(re.id==null||!this.getToBeTiled(re))&&N.push(ae)}for(var z=0;z<N.length;z++){var ae=N[z],K=ae.getParent().id;typeof P[K]>"u"&&(P[K]=[]),P[K]=P[K].concat(ae)}Object.keys(P).forEach(function(V){if(P[V].length>1){var Z="DummyCompound_"+V;R.memberGroups[Z]=P[V];var U=P[V][0].getParent(),W=new y(R.graphManager);W.id=Z,W.paddingLeft=U.paddingLeft||0,W.paddingRight=U.paddingRight||0,W.paddingBottom=U.paddingBottom||0,W.paddingTop=U.paddingTop||0,R.idToDummyNode[Z]=W;var X=R.getGraphManager().add(R.newGraph(),W),ee=U.getChild();ee.add(W);for(var oe=0;oe<P[V].length;oe++){var te=P[V][oe];ee.remove(te),X.add(te)}}})},B.prototype.clearCompounds=function(){var R={},P={};this.performDFSOnCompounds();for(var N=0;N<this.compoundOrder.length;N++)P[this.compoundOrder[N].id]=this.compoundOrder[N],R[this.compoundOrder[N].id]=[].concat(this.compoundOrder[N].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[N].getChild()),this.compoundOrder[N].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(R,P)},B.prototype.clearZeroDegreeMembers=function(){var R=this,P=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(N){var I=R.idToDummyNode[N];if(P[N]=R.tileNodes(R.memberGroups[N],I.paddingLeft+I.paddingRight),I.rect.width=P[N].width,I.rect.height=P[N].height,I.setCenter(P[N].centerX,P[N].centerY),I.labelMarginLeft=0,I.labelMarginTop=0,C.NODE_DIMENSIONS_INCLUDE_LABELS){var z=I.rect.width,ae=I.rect.height;I.labelWidth&&(I.labelPosHorizontal=="left"?(I.rect.x-=I.labelWidth,I.setWidth(z+I.labelWidth),I.labelMarginLeft=I.labelWidth):I.labelPosHorizontal=="center"&&I.labelWidth>z?(I.rect.x-=(I.labelWidth-z)/2,I.setWidth(I.labelWidth),I.labelMarginLeft=(I.labelWidth-z)/2):I.labelPosHorizontal=="right"&&I.setWidth(z+I.labelWidth)),I.labelHeight&&(I.labelPosVertical=="top"?(I.rect.y-=I.labelHeight,I.setHeight(ae+I.labelHeight),I.labelMarginTop=I.labelHeight):I.labelPosVertical=="center"&&I.labelHeight>ae?(I.rect.y-=(I.labelHeight-ae)/2,I.setHeight(I.labelHeight),I.labelMarginTop=(I.labelHeight-ae)/2):I.labelPosVertical=="bottom"&&I.setHeight(ae+I.labelHeight))}})},B.prototype.repopulateCompounds=function(){for(var R=this.compoundOrder.length-1;R>=0;R--){var P=this.compoundOrder[R],N=P.id,I=P.paddingLeft,z=P.paddingTop,ae=P.labelMarginLeft,re=P.labelMarginTop;this.adjustLocations(this.tiledMemberPack[N],P.rect.x,P.rect.y,I,z,ae,re)}},B.prototype.repopulateZeroDegreeMembers=function(){var R=this,P=this.tiledZeroDegreePack;Object.keys(P).forEach(function(N){var I=R.idToDummyNode[N],z=I.paddingLeft,ae=I.paddingTop,re=I.labelMarginLeft,K=I.labelMarginTop;R.adjustLocations(P[N],I.rect.x,I.rect.y,z,ae,re,K)})},B.prototype.getToBeTiled=function(R){var P=R.id;if(this.toBeTiled[P]!=null)return this.toBeTiled[P];var N=R.getChild();if(N==null)return this.toBeTiled[P]=!1,!1;for(var I=N.getNodes(),z=0;z<I.length;z++){var ae=I[z];if(this.getNodeDegree(ae)>0)return this.toBeTiled[P]=!1,!1;if(ae.getChild()==null){this.toBeTiled[ae.id]=!1;continue}if(!this.getToBeTiled(ae))return this.toBeTiled[P]=!1,!1}return this.toBeTiled[P]=!0,!0},B.prototype.getNodeDegree=function(R){R.id;for(var P=R.getEdges(),N=0,I=0;I<P.length;I++){var z=P[I];z.getSource().id!==z.getTarget().id&&(N=N+1)}return N},B.prototype.getNodeDegreeWithChildren=function(R){var P=this.getNodeDegree(R);if(R.getChild()==null)return P;for(var N=R.getChild().getNodes(),I=0;I<N.length;I++){var z=N[I];P+=this.getNodeDegreeWithChildren(z)}return P},B.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},B.prototype.fillCompexOrderByDFS=function(R){for(var P=0;P<R.length;P++){var N=R[P];N.getChild()!=null&&this.fillCompexOrderByDFS(N.getChild().getNodes()),this.getToBeTiled(N)&&this.compoundOrder.push(N)}},B.prototype.adjustLocations=function(R,P,N,I,z,ae,re){P+=I+ae,N+=z+re;for(var K=P,V=0;V<R.rows.length;V++){var Z=R.rows[V];P=K;for(var U=0,W=0;W<Z.length;W++){var X=Z[W];X.rect.x=P,X.rect.y=N,P+=X.rect.width+R.horizontalPadding,X.rect.height>U&&(U=X.rect.height)}N+=U+R.verticalPadding}},B.prototype.tileCompoundMembers=function(R,P){var N=this;this.tiledMemberPack=[],Object.keys(R).forEach(function(I){var z=P[I];if(N.tiledMemberPack[I]=N.tileNodes(R[I],z.paddingLeft+z.paddingRight),z.rect.width=N.tiledMemberPack[I].width,z.rect.height=N.tiledMemberPack[I].height,z.setCenter(N.tiledMemberPack[I].centerX,N.tiledMemberPack[I].centerY),z.labelMarginLeft=0,z.labelMarginTop=0,C.NODE_DIMENSIONS_INCLUDE_LABELS){var ae=z.rect.width,re=z.rect.height;z.labelWidth&&(z.labelPosHorizontal=="left"?(z.rect.x-=z.labelWidth,z.setWidth(ae+z.labelWidth),z.labelMarginLeft=z.labelWidth):z.labelPosHorizontal=="center"&&z.labelWidth>ae?(z.rect.x-=(z.labelWidth-ae)/2,z.setWidth(z.labelWidth),z.labelMarginLeft=(z.labelWidth-ae)/2):z.labelPosHorizontal=="right"&&z.setWidth(ae+z.labelWidth)),z.labelHeight&&(z.labelPosVertical=="top"?(z.rect.y-=z.labelHeight,z.setHeight(re+z.labelHeight),z.labelMarginTop=z.labelHeight):z.labelPosVertical=="center"&&z.labelHeight>re?(z.rect.y-=(z.labelHeight-re)/2,z.setHeight(z.labelHeight),z.labelMarginTop=(z.labelHeight-re)/2):z.labelPosVertical=="bottom"&&z.setHeight(re+z.labelHeight))}})},B.prototype.tileNodes=function(R,P){var N=this.tileNodesByFavoringDim(R,P,!0),I=this.tileNodesByFavoringDim(R,P,!1),z=this.getOrgRatio(N),ae=this.getOrgRatio(I),re;return ae<z?re=I:re=N,re},B.prototype.getOrgRatio=function(R){var P=R.width,N=R.height,I=P/N;return I<1&&(I=1/I),I},B.prototype.calcIdealRowWidth=function(R,P){var N=C.TILING_PADDING_VERTICAL,I=C.TILING_PADDING_HORIZONTAL,z=R.length,ae=0,re=0,K=0;R.forEach(function(oe){ae+=oe.getWidth(),re+=oe.getHeight(),oe.getWidth()>K&&(K=oe.getWidth())});var V=ae/z,Z=re/z,U=Math.pow(N-I,2)+4*(V+I)*(Z+N)*z,W=(I-N+Math.sqrt(U))/(2*(V+I)),X;P?(X=Math.ceil(W),X==W&&X++):X=Math.floor(W);var ee=X*(V+I)-I;return K>ee&&(ee=K),ee+=I*2,ee},B.prototype.tileNodesByFavoringDim=function(R,P,N){var I=C.TILING_PADDING_VERTICAL,z=C.TILING_PADDING_HORIZONTAL,ae=C.TILING_COMPARE_BY,re={rows:[],rowWidth:[],rowHeight:[],width:0,height:P,verticalPadding:I,horizontalPadding:z,centerX:0,centerY:0};ae&&(re.idealRowWidth=this.calcIdealRowWidth(R,N));var K=function(te){return te.rect.width*te.rect.height},V=function(te,ie){return K(ie)-K(te)};R.sort(function(oe,te){var ie=V;return re.idealRowWidth?(ie=ae,ie(oe.id,te.id)):ie(oe,te)});for(var Z=0,U=0,W=0;W<R.length;W++){var X=R[W];Z+=X.getCenterX(),U+=X.getCenterY()}re.centerX=Z/R.length,re.centerY=U/R.length;for(var W=0;W<R.length;W++){var X=R[W];if(re.rows.length==0)this.insertNodeToRow(re,X,0,P);else if(this.canAddHorizontal(re,X.rect.width,X.rect.height)){var ee=re.rows.length-1;re.idealRowWidth||(ee=this.getShortestRowIndex(re)),this.insertNodeToRow(re,X,ee,P)}else this.insertNodeToRow(re,X,re.rows.length,P);this.shiftToLastRow(re)}return re},B.prototype.insertNodeToRow=function(R,P,N,I){var z=I;if(N==R.rows.length){var ae=[];R.rows.push(ae),R.rowWidth.push(z),R.rowHeight.push(0)}var re=R.rowWidth[N]+P.rect.width;R.rows[N].length>0&&(re+=R.horizontalPadding),R.rowWidth[N]=re,R.width<re&&(R.width=re);var K=P.rect.height;N>0&&(K+=R.verticalPadding);var V=0;K>R.rowHeight[N]&&(V=R.rowHeight[N],R.rowHeight[N]=K,V=R.rowHeight[N]-V),R.height+=V,R.rows[N].push(P)},B.prototype.getShortestRowIndex=function(R){for(var P=-1,N=Number.MAX_VALUE,I=0;I<R.rows.length;I++)R.rowWidth[I]<N&&(P=I,N=R.rowWidth[I]);return P},B.prototype.getLongestRowIndex=function(R){for(var P=-1,N=Number.MIN_VALUE,I=0;I<R.rows.length;I++)R.rowWidth[I]>N&&(P=I,N=R.rowWidth[I]);return P},B.prototype.canAddHorizontal=function(R,P,N){if(R.idealRowWidth){var I=R.rows.length-1,z=R.rowWidth[I];return z+P+R.horizontalPadding<=R.idealRowWidth}var ae=this.getShortestRowIndex(R);if(ae<0)return!0;var re=R.rowWidth[ae];if(re+R.horizontalPadding+P<=R.width)return!0;var K=0;R.rowHeight[ae]<N&&ae>0&&(K=N+R.verticalPadding-R.rowHeight[ae]);var V;R.width-re>=P+R.horizontalPadding?V=(R.height+K)/(re+P+R.horizontalPadding):V=(R.height+K)/R.width,K=N+R.verticalPadding;var Z;return R.width<P?Z=(R.height+K)/P:Z=(R.height+K)/R.width,Z<1&&(Z=1/Z),V<1&&(V=1/V),V<Z},B.prototype.shiftToLastRow=function(R){var P=this.getLongestRowIndex(R),N=R.rowWidth.length-1,I=R.rows[P],z=I[I.length-1],ae=z.width+R.horizontalPadding;if(R.width-R.rowWidth[N]>ae&&P!=N){I.splice(-1,1),R.rows[N].push(z),R.rowWidth[P]=R.rowWidth[P]-ae,R.rowWidth[N]=R.rowWidth[N]+ae,R.width=R.rowWidth[instance.getLongestRowIndex(R)];for(var re=Number.MIN_VALUE,K=0;K<I.length;K++)I[K].height>re&&(re=I[K].height);P>0&&(re+=R.verticalPadding);var V=R.rowHeight[P]+R.rowHeight[N];R.rowHeight[P]=re,R.rowHeight[N]<z.height+R.verticalPadding&&(R.rowHeight[N]=z.height+R.verticalPadding);var Z=R.rowHeight[P]+R.rowHeight[N];R.height+=Z-V,this.shiftToLastRow(R)}},B.prototype.tilingPreLayout=function(){C.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},B.prototype.tilingPostLayout=function(){C.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},B.prototype.reduceTrees=function(){for(var R=[],P=!0,N;P;){var I=this.graphManager.getAllNodes(),z=[];P=!1;for(var ae=0;ae<I.length;ae++)if(N=I[ae],N.getEdges().length==1&&!N.getEdges()[0].isInterGraph&&N.getChild()==null){if(C.PURE_INCREMENTAL){var re=N.getEdges()[0].getOtherEnd(N),K=new A(N.getCenterX()-re.getCenterX(),N.getCenterY()-re.getCenterY());z.push([N,N.getEdges()[0],N.getOwner(),K])}else z.push([N,N.getEdges()[0],N.getOwner()]);P=!0}if(P==!0){for(var V=[],Z=0;Z<z.length;Z++)z[Z][0].getEdges().length==1&&(V.push(z[Z]),z[Z][0].getOwner().remove(z[Z][0]));R.push(V),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=R},B.prototype.growTree=function(R){for(var P=R.length,N=R[P-1],I,z=0;z<N.length;z++)I=N[z],this.findPlaceforPrunedNode(I),I[2].add(I[0]),I[2].add(I[1],I[1].source,I[1].target);R.splice(R.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},B.prototype.findPlaceforPrunedNode=function(R){var P,N,I=R[0];if(I==R[1].source?N=R[1].target:N=R[1].source,C.PURE_INCREMENTAL)I.setCenter(N.getCenterX()+R[3].getWidth(),N.getCenterY()+R[3].getHeight());else{var z=N.startX,ae=N.finishX,re=N.startY,K=N.finishY,V=0,Z=0,U=0,W=0,X=[V,U,Z,W];if(re>0)for(var ee=z;ee<=ae;ee++)X[0]+=this.grid[ee][re-1].length+this.grid[ee][re].length-1;if(ae<this.grid.length-1)for(var ee=re;ee<=K;ee++)X[1]+=this.grid[ae+1][ee].length+this.grid[ae][ee].length-1;if(K<this.grid[0].length-1)for(var ee=z;ee<=ae;ee++)X[2]+=this.grid[ee][K+1].length+this.grid[ee][K].length-1;if(z>0)for(var ee=re;ee<=K;ee++)X[3]+=this.grid[z-1][ee].length+this.grid[z][ee].length-1;for(var oe=D.MAX_VALUE,te,ie,se=0;se<X.length;se++)X[se]<oe?(oe=X[se],te=1,ie=se):X[se]==oe&&te++;if(te==3&&oe==0)X[0]==0&&X[1]==0&&X[2]==0?P=1:X[0]==0&&X[1]==0&&X[3]==0?P=0:X[0]==0&&X[2]==0&&X[3]==0?P=3:X[1]==0&&X[2]==0&&X[3]==0&&(P=2);else if(te==2&&oe==0){var $=Math.floor(Math.random()*2);X[0]==0&&X[1]==0?$==0?P=0:P=1:X[0]==0&&X[2]==0?$==0?P=0:P=2:X[0]==0&&X[3]==0?$==0?P=0:P=3:X[1]==0&&X[2]==0?$==0?P=1:P=2:X[1]==0&&X[3]==0?$==0?P=1:P=3:$==0?P=2:P=3}else if(te==4&&oe==0){var $=Math.floor(Math.random()*4);P=$}else P=ie;P==0?I.setCenter(N.getCenterX(),N.getCenterY()-N.getHeight()/2-v.DEFAULT_EDGE_LENGTH-I.getHeight()/2):P==1?I.setCenter(N.getCenterX()+N.getWidth()/2+v.DEFAULT_EDGE_LENGTH+I.getWidth()/2,N.getCenterY()):P==2?I.setCenter(N.getCenterX(),N.getCenterY()+N.getHeight()/2+v.DEFAULT_EDGE_LENGTH+I.getHeight()/2):I.setCenter(N.getCenterX()-N.getWidth()/2-v.DEFAULT_EDGE_LENGTH-I.getWidth()/2,N.getCenterY())}},s.exports=B},991:(s,u,f)=>{var c=f(551).FDLayoutNode,h=f(551).IMath;function g(p,C,E,v){c.call(this,p,C,E,v)}g.prototype=Object.create(c.prototype);for(var y in c)g[y]=c[y];g.prototype.calculateDisplacement=function(){var p=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=p.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=p.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=p.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=p.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>p.coolingFactor*p.maxNodeDisplacement&&(this.displacementX=p.coolingFactor*p.maxNodeDisplacement*h.sign(this.displacementX)),Math.abs(this.displacementY)>p.coolingFactor*p.maxNodeDisplacement&&(this.displacementY=p.coolingFactor*p.maxNodeDisplacement*h.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},g.prototype.propogateDisplacementToChildren=function(p,C){for(var E=this.getChild().getNodes(),v,x=0;x<E.length;x++)v=E[x],v.getChild()==null?(v.displacementX+=p,v.displacementY+=C):v.propogateDisplacementToChildren(p,C)},g.prototype.move=function(){var p=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),p.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},g.prototype.setPred1=function(p){this.pred1=p},g.prototype.getPred1=function(){return pred1},g.prototype.getPred2=function(){return pred2},g.prototype.setNext=function(p){this.next=p},g.prototype.getNext=function(){return next},g.prototype.setProcessed=function(p){this.processed=p},g.prototype.isProcessed=function(){return processed},s.exports=g},902:(s,u,f)=>{function c(E){if(Array.isArray(E)){for(var v=0,x=Array(E.length);v<E.length;v++)x[v]=E[v];return x}else return Array.from(E)}var h=f(806),g=f(551).LinkedList,y=f(551).Matrix,p=f(551).SVD;function C(){}C.handleConstraints=function(E){var v={};v.fixedNodeConstraint=E.constraints.fixedNodeConstraint,v.alignmentConstraint=E.constraints.alignmentConstraint,v.relativePlacementConstraint=E.constraints.relativePlacementConstraint;for(var x=new Map,w=new Map,T=[],A=[],M=E.getAllNodes(),D=0,_=0;_<M.length;_++){var k=M[_];k.getChild()==null&&(w.set(k.id,D++),T.push(k.getCenterX()),A.push(k.getCenterY()),x.set(k.id,k))}v.relativePlacementConstraint&&v.relativePlacementConstraint.forEach(function(he){!he.gap&&he.gap!=0&&(he.left?he.gap=h.DEFAULT_EDGE_LENGTH+x.get(he.left).getWidth()/2+x.get(he.right).getWidth()/2:he.gap=h.DEFAULT_EDGE_LENGTH+x.get(he.top).getHeight()/2+x.get(he.bottom).getHeight()/2)});var F=function(j,ve){return{x:j.x-ve.x,y:j.y-ve.y}},G=function(j){var ve=0,me=0;return j.forEach(function(we){ve+=T[w.get(we)],me+=A[w.get(we)]}),{x:ve/j.size,y:me/j.size}},B=function(j,ve,me,we,xe){function qe(Ge,$e){var vt=new Set(Ge),nt=!0,st=!1,Tt=void 0;try{for(var dt=$e[Symbol.iterator](),gt;!(nt=(gt=dt.next()).done);nt=!0){var _t=gt.value;vt.add(_t)}}catch(Mt){st=!0,Tt=Mt}finally{try{!nt&&dt.return&&dt.return()}finally{if(st)throw Tt}}return vt}var Ce=new Map;j.forEach(function(Ge,$e){Ce.set($e,0)}),j.forEach(function(Ge,$e){Ge.forEach(function(vt){Ce.set(vt.id,Ce.get(vt.id)+1)})});var Oe=new Map,Ie=new Map,He=new g;Ce.forEach(function(Ge,$e){Ge==0?(He.push($e),me||(ve=="horizontal"?Oe.set($e,w.has($e)?T[w.get($e)]:we.get($e)):Oe.set($e,w.has($e)?A[w.get($e)]:we.get($e)))):Oe.set($e,Number.NEGATIVE_INFINITY),me&&Ie.set($e,new Set([$e]))}),me&&xe.forEach(function(Ge){var $e=[];if(Ge.forEach(function(st){me.has(st)&&$e.push(st)}),$e.length>0){var vt=0;$e.forEach(function(st){ve=="horizontal"?(Oe.set(st,w.has(st)?T[w.get(st)]:we.get(st)),vt+=Oe.get(st)):(Oe.set(st,w.has(st)?A[w.get(st)]:we.get(st)),vt+=Oe.get(st))}),vt=vt/$e.length,Ge.forEach(function(st){me.has(st)||Oe.set(st,vt)})}else{var nt=0;Ge.forEach(function(st){ve=="horizontal"?nt+=w.has(st)?T[w.get(st)]:we.get(st):nt+=w.has(st)?A[w.get(st)]:we.get(st)}),nt=nt/Ge.length,Ge.forEach(function(st){Oe.set(st,nt)})}});for(var Ue=function(){var $e=He.shift(),vt=j.get($e);vt.forEach(function(nt){if(Oe.get(nt.id)<Oe.get($e)+nt.gap)if(me&&me.has(nt.id)){var st=void 0;if(ve=="horizontal"?st=w.has(nt.id)?T[w.get(nt.id)]:we.get(nt.id):st=w.has(nt.id)?A[w.get(nt.id)]:we.get(nt.id),Oe.set(nt.id,st),st<Oe.get($e)+nt.gap){var Tt=Oe.get($e)+nt.gap-st;Ie.get($e).forEach(function(dt){Oe.set(dt,Oe.get(dt)-Tt)})}}else Oe.set(nt.id,Oe.get($e)+nt.gap);Ce.set(nt.id,Ce.get(nt.id)-1),Ce.get(nt.id)==0&&He.push(nt.id),me&&Ie.set(nt.id,qe(Ie.get($e),Ie.get(nt.id)))})};He.length!=0;)Ue();if(me){var je=new Set;j.forEach(function(Ge,$e){Ge.length==0&&je.add($e)});var et=[];Ie.forEach(function(Ge,$e){if(je.has($e)){var vt=!1,nt=!0,st=!1,Tt=void 0;try{for(var dt=Ge[Symbol.iterator](),gt;!(nt=(gt=dt.next()).done);nt=!0){var _t=gt.value;me.has(_t)&&(vt=!0)}}catch(Lt){st=!0,Tt=Lt}finally{try{!nt&&dt.return&&dt.return()}finally{if(st)throw Tt}}if(!vt){var Mt=!1,Zt=void 0;et.forEach(function(Lt,Ht){Lt.has([].concat(c(Ge))[0])&&(Mt=!0,Zt=Ht)}),Mt?Ge.forEach(function(Lt){et[Zt].add(Lt)}):et.push(new Set(Ge))}}}),et.forEach(function(Ge,$e){var vt=Number.POSITIVE_INFINITY,nt=Number.POSITIVE_INFINITY,st=Number.NEGATIVE_INFINITY,Tt=Number.NEGATIVE_INFINITY,dt=!0,gt=!1,_t=void 0;try{for(var Mt=Ge[Symbol.iterator](),Zt;!(dt=(Zt=Mt.next()).done);dt=!0){var Lt=Zt.value,Ht=void 0;ve=="horizontal"?Ht=w.has(Lt)?T[w.get(Lt)]:we.get(Lt):Ht=w.has(Lt)?A[w.get(Lt)]:we.get(Lt);var Sr=Oe.get(Lt);Ht<vt&&(vt=Ht),Ht>st&&(st=Ht),Sr<nt&&(nt=Sr),Sr>Tt&&(Tt=Sr)}}catch(gn){gt=!0,_t=gn}finally{try{!dt&&Mt.return&&Mt.return()}finally{if(gt)throw _t}}var on=(vt+st)/2-(nt+Tt)/2,Rt=!0,rr=!1,Qt=void 0;try{for(var hr=Ge[Symbol.iterator](),nr;!(Rt=(nr=hr.next()).done);Rt=!0){var jr=nr.value;Oe.set(jr,Oe.get(jr)+on)}}catch(gn){rr=!0,Qt=gn}finally{try{!Rt&&hr.return&&hr.return()}finally{if(rr)throw Qt}}})}return Oe},q=function(j){var ve=0,me=0,we=0,xe=0;if(j.forEach(function(Ie){Ie.left?T[w.get(Ie.left)]-T[w.get(Ie.right)]>=0?ve++:me++:A[w.get(Ie.top)]-A[w.get(Ie.bottom)]>=0?we++:xe++}),ve>me&&we>xe)for(var qe=0;qe<w.size;qe++)T[qe]=-1*T[qe],A[qe]=-1*A[qe];else if(ve>me)for(var Ce=0;Ce<w.size;Ce++)T[Ce]=-1*T[Ce];else if(we>xe)for(var Oe=0;Oe<w.size;Oe++)A[Oe]=-1*A[Oe]},R=function(j){var ve=[],me=new g,we=new Set,xe=0;return j.forEach(function(qe,Ce){if(!we.has(Ce)){ve[xe]=[];var Oe=Ce;for(me.push(Oe),we.add(Oe),ve[xe].push(Oe);me.length!=0;){Oe=me.shift();var Ie=j.get(Oe);Ie.forEach(function(He){we.has(He.id)||(me.push(He.id),we.add(He.id),ve[xe].push(He.id))})}xe++}}),ve},P=function(j){var ve=new Map;return j.forEach(function(me,we){ve.set(we,[])}),j.forEach(function(me,we){me.forEach(function(xe){ve.get(we).push(xe),ve.get(xe.id).push({id:we,gap:xe.gap,direction:xe.direction})})}),ve},N=function(j){var ve=new Map;return j.forEach(function(me,we){ve.set(we,[])}),j.forEach(function(me,we){me.forEach(function(xe){ve.get(xe.id).push({id:we,gap:xe.gap,direction:xe.direction})})}),ve},I=[],z=[],ae=!1,re=!1,K=new Set,V=new Map,Z=new Map,U=[];if(v.fixedNodeConstraint&&v.fixedNodeConstraint.forEach(function(he){K.add(he.nodeId)}),v.relativePlacementConstraint&&(v.relativePlacementConstraint.forEach(function(he){he.left?(V.has(he.left)?V.get(he.left).push({id:he.right,gap:he.gap,direction:"horizontal"}):V.set(he.left,[{id:he.right,gap:he.gap,direction:"horizontal"}]),V.has(he.right)||V.set(he.right,[])):(V.has(he.top)?V.get(he.top).push({id:he.bottom,gap:he.gap,direction:"vertical"}):V.set(he.top,[{id:he.bottom,gap:he.gap,direction:"vertical"}]),V.has(he.bottom)||V.set(he.bottom,[]))}),Z=P(V),U=R(Z)),h.TRANSFORM_ON_CONSTRAINT_HANDLING){if(v.fixedNodeConstraint&&v.fixedNodeConstraint.length>1)v.fixedNodeConstraint.forEach(function(he,j){I[j]=[he.position.x,he.position.y],z[j]=[T[w.get(he.nodeId)],A[w.get(he.nodeId)]]}),ae=!0;else if(v.alignmentConstraint)(function(){var he=0;if(v.alignmentConstraint.vertical){for(var j=v.alignmentConstraint.vertical,ve=function(Oe){var Ie=new Set;j[Oe].forEach(function(je){Ie.add(je)});var He=new Set([].concat(c(Ie)).filter(function(je){return K.has(je)})),Ue=void 0;He.size>0?Ue=T[w.get(He.values().next().value)]:Ue=G(Ie).x,j[Oe].forEach(function(je){I[he]=[Ue,A[w.get(je)]],z[he]=[T[w.get(je)],A[w.get(je)]],he++})},me=0;me<j.length;me++)ve(me);ae=!0}if(v.alignmentConstraint.horizontal){for(var we=v.alignmentConstraint.horizontal,xe=function(Oe){var Ie=new Set;we[Oe].forEach(function(je){Ie.add(je)});var He=new Set([].concat(c(Ie)).filter(function(je){return K.has(je)})),Ue=void 0;He.size>0?Ue=T[w.get(He.values().next().value)]:Ue=G(Ie).y,we[Oe].forEach(function(je){I[he]=[T[w.get(je)],Ue],z[he]=[T[w.get(je)],A[w.get(je)]],he++})},qe=0;qe<we.length;qe++)xe(qe);ae=!0}v.relativePlacementConstraint&&(re=!0)})();else if(v.relativePlacementConstraint){for(var W=0,X=0,ee=0;ee<U.length;ee++)U[ee].length>W&&(W=U[ee].length,X=ee);if(W<Z.size/2)q(v.relativePlacementConstraint),ae=!1,re=!1;else{var oe=new Map,te=new Map,ie=[];U[X].forEach(function(he){V.get(he).forEach(function(j){j.direction=="horizontal"?(oe.has(he)?oe.get(he).push(j):oe.set(he,[j]),oe.has(j.id)||oe.set(j.id,[]),ie.push({left:he,right:j.id})):(te.has(he)?te.get(he).push(j):te.set(he,[j]),te.has(j.id)||te.set(j.id,[]),ie.push({top:he,bottom:j.id}))})}),q(ie),re=!1;var se=B(oe,"horizontal"),$=B(te,"vertical");U[X].forEach(function(he,j){z[j]=[T[w.get(he)],A[w.get(he)]],I[j]=[],se.has(he)?I[j][0]=se.get(he):I[j][0]=T[w.get(he)],$.has(he)?I[j][1]=$.get(he):I[j][1]=A[w.get(he)]}),ae=!0}}if(ae){for(var ne=void 0,le=y.transpose(I),Se=y.transpose(z),De=0;De<le.length;De++)le[De]=y.multGamma(le[De]),Se[De]=y.multGamma(Se[De]);var be=y.multMat(le,y.transpose(Se)),Te=p.svd(be);ne=y.multMat(Te.V,y.transpose(Te.U));for(var pe=0;pe<w.size;pe++){var de=[T[pe],A[pe]],ye=[ne[0][0],ne[1][0]],Ee=[ne[0][1],ne[1][1]];T[pe]=y.dotProduct(de,ye),A[pe]=y.dotProduct(de,Ee)}re&&q(v.relativePlacementConstraint)}}if(h.ENFORCE_CONSTRAINTS){if(v.fixedNodeConstraint&&v.fixedNodeConstraint.length>0){var ue={x:0,y:0};v.fixedNodeConstraint.forEach(function(he,j){var ve={x:T[w.get(he.nodeId)],y:A[w.get(he.nodeId)]},me=he.position,we=F(me,ve);ue.x+=we.x,ue.y+=we.y}),ue.x/=v.fixedNodeConstraint.length,ue.y/=v.fixedNodeConstraint.length,T.forEach(function(he,j){T[j]+=ue.x}),A.forEach(function(he,j){A[j]+=ue.y}),v.fixedNodeConstraint.forEach(function(he){T[w.get(he.nodeId)]=he.position.x,A[w.get(he.nodeId)]=he.position.y})}if(v.alignmentConstraint){if(v.alignmentConstraint.vertical)for(var Ae=v.alignmentConstraint.vertical,Pe=function(j){var ve=new Set;Ae[j].forEach(function(xe){ve.add(xe)});var me=new Set([].concat(c(ve)).filter(function(xe){return K.has(xe)})),we=void 0;me.size>0?we=T[w.get(me.values().next().value)]:we=G(ve).x,ve.forEach(function(xe){K.has(xe)||(T[w.get(xe)]=we)})},Fe=0;Fe<Ae.length;Fe++)Pe(Fe);if(v.alignmentConstraint.horizontal)for(var Ye=v.alignmentConstraint.horizontal,Ve=function(j){var ve=new Set;Ye[j].forEach(function(xe){ve.add(xe)});var me=new Set([].concat(c(ve)).filter(function(xe){return K.has(xe)})),we=void 0;me.size>0?we=A[w.get(me.values().next().value)]:we=G(ve).y,ve.forEach(function(xe){K.has(xe)||(A[w.get(xe)]=we)})},Qe=0;Qe<Ye.length;Qe++)Ve(Qe)}v.relativePlacementConstraint&&function(){var he=new Map,j=new Map,ve=new Map,me=new Map,we=new Map,xe=new Map,qe=new Set,Ce=new Set;if(K.forEach(function(Pt){qe.add(Pt),Ce.add(Pt)}),v.alignmentConstraint){if(v.alignmentConstraint.vertical)for(var Oe=v.alignmentConstraint.vertical,Ie=function(Q){ve.set("dummy"+Q,[]),Oe[Q].forEach(function(fe){he.set(fe,"dummy"+Q),ve.get("dummy"+Q).push(fe),K.has(fe)&&qe.add("dummy"+Q)}),we.set("dummy"+Q,T[w.get(Oe[Q][0])])},He=0;He<Oe.length;He++)Ie(He);if(v.alignmentConstraint.horizontal)for(var Ue=v.alignmentConstraint.horizontal,je=function(Q){me.set("dummy"+Q,[]),Ue[Q].forEach(function(fe){j.set(fe,"dummy"+Q),me.get("dummy"+Q).push(fe),K.has(fe)&&Ce.add("dummy"+Q)}),xe.set("dummy"+Q,A[w.get(Ue[Q][0])])},et=0;et<Ue.length;et++)je(et)}var Ge=new Map,$e=new Map,vt=function(Q){V.get(Q).forEach(function(fe){var ke=void 0,ze=void 0;fe.direction=="horizontal"?(ke=he.get(Q)?he.get(Q):Q,he.get(fe.id)?ze={id:he.get(fe.id),gap:fe.gap,direction:fe.direction}:ze=fe,Ge.has(ke)?Ge.get(ke).push(ze):Ge.set(ke,[ze]),Ge.has(ze.id)||Ge.set(ze.id,[])):(ke=j.get(Q)?j.get(Q):Q,j.get(fe.id)?ze={id:j.get(fe.id),gap:fe.gap,direction:fe.direction}:ze=fe,$e.has(ke)?$e.get(ke).push(ze):$e.set(ke,[ze]),$e.has(ze.id)||$e.set(ze.id,[]))})},nt=!0,st=!1,Tt=void 0;try{for(var dt=V.keys()[Symbol.iterator](),gt;!(nt=(gt=dt.next()).done);nt=!0){var _t=gt.value;vt(_t)}}catch(Pt){st=!0,Tt=Pt}finally{try{!nt&&dt.return&&dt.return()}finally{if(st)throw Tt}}var Mt=P(Ge),Zt=P($e),Lt=R(Mt),Ht=R(Zt),Sr=N(Ge),on=N($e),Rt=[],rr=[];Lt.forEach(function(Pt,Q){Rt[Q]=[],Pt.forEach(function(fe){Sr.get(fe).length==0&&Rt[Q].push(fe)})}),Ht.forEach(function(Pt,Q){rr[Q]=[],Pt.forEach(function(fe){on.get(fe).length==0&&rr[Q].push(fe)})});var Qt=B(Ge,"horizontal",qe,we,Rt),hr=B($e,"vertical",Ce,xe,rr),nr=function(Q){ve.get(Q)?ve.get(Q).forEach(function(fe){T[w.get(fe)]=Qt.get(Q)}):T[w.get(Q)]=Qt.get(Q)},jr=!0,gn=!1,Qn=void 0;try{for(var Ln=Qt.keys()[Symbol.iterator](),Jn;!(jr=(Jn=Ln.next()).done);jr=!0){var sn=Jn.value;nr(sn)}}catch(Pt){gn=!0,Qn=Pt}finally{try{!jr&&Ln.return&&Ln.return()}finally{if(gn)throw Qn}}var ka=function(Q){me.get(Q)?me.get(Q).forEach(function(fe){A[w.get(fe)]=hr.get(Q)}):A[w.get(Q)]=hr.get(Q)},Gn=!0,qt=!1,ct=void 0;try{for(var Gr=hr.keys()[Symbol.iterator](),ea;!(Gn=(ea=Gr.next()).done);Gn=!0){var sn=ea.value;ka(sn)}}catch(Pt){qt=!0,ct=Pt}finally{try{!Gn&&Gr.return&&Gr.return()}finally{if(qt)throw ct}}}()}for(var Xe=0;Xe<M.length;Xe++){var We=M[Xe];We.getChild()==null&&We.setCenter(T[w.get(We.id)],A[w.get(We.id)])}},s.exports=C},551:s=>{s.exports=r}},a={};function i(s){var u=a[s];if(u!==void 0)return u.exports;var f=a[s]={exports:{}};return n[s](f,f.exports,i),f.exports}var o=i(45);return o})()})}(Of)),Of.exports}var _4=Nf.exports,tR;function M4(){return tR||(tR=1,function(t,e){(function(n,a){t.exports=a(D4())})(_4,function(r){return(()=>{var n={658:s=>{s.exports=Object.assign!=null?Object.assign.bind(Object):function(u){for(var f=arguments.length,c=Array(f>1?f-1:0),h=1;h<f;h++)c[h-1]=arguments[h];return c.forEach(function(g){Object.keys(g).forEach(function(y){return u[y]=g[y]})}),u}},548:(s,u,f)=>{var c=function(){function y(p,C){var E=[],v=!0,x=!1,w=void 0;try{for(var T=p[Symbol.iterator](),A;!(v=(A=T.next()).done)&&(E.push(A.value),!(C&&E.length===C));v=!0);}catch(M){x=!0,w=M}finally{try{!v&&T.return&&T.return()}finally{if(x)throw w}}return E}return function(p,C){if(Array.isArray(p))return p;if(Symbol.iterator in Object(p))return y(p,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=f(140).layoutBase.LinkedList,g={};g.getTopMostNodes=function(y){for(var p={},C=0;C<y.length;C++)p[y[C].id()]=!0;var E=y.filter(function(v,x){typeof v=="number"&&(v=x);for(var w=v.parent()[0];w!=null;){if(p[w.id()])return!1;w=w.parent()[0]}return!0});return E},g.connectComponents=function(y,p,C,E){var v=new h,x=new Set,w=[],T=void 0,A=void 0,M=void 0,D=!1,_=1,k=[],F=[],G=function(){var q=y.collection();F.push(q);var R=C[0],P=y.collection();P.merge(R).merge(R.descendants().intersection(p)),w.push(R),P.forEach(function(z){v.push(z),x.add(z),q.merge(z)});for(var N=function(){R=v.shift();var ae=y.collection();R.neighborhood().nodes().forEach(function(Z){p.intersection(R.edgesWith(Z)).length>0&&ae.merge(Z)});for(var re=0;re<ae.length;re++){var K=ae[re];if(T=C.intersection(K.union(K.ancestors())),T!=null&&!x.has(T[0])){var V=T.union(T.descendants());V.forEach(function(Z){v.push(Z),x.add(Z),q.merge(Z),C.has(Z)&&w.push(Z)})}}};v.length!=0;)N();if(q.forEach(function(z){p.intersection(z.connectedEdges()).forEach(function(ae){q.has(ae.source())&&q.has(ae.target())&&q.merge(ae)})}),w.length==C.length&&(D=!0),!D||D&&_>1){A=w[0],M=A.connectedEdges().length,w.forEach(function(z){z.connectedEdges().length<M&&(M=z.connectedEdges().length,A=z)}),k.push(A.id());var I=y.collection();I.merge(w[0]),w.forEach(function(z){I.merge(z)}),w=[],C=C.difference(I),_++}};do G();while(!D);return E&&k.length>0&&E.set("dummy"+(E.size+1),k),F},g.relocateComponent=function(y,p,C){if(!C.fixedNodeConstraint){var E=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,x=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY;if(C.quality=="draft"){var T=!0,A=!1,M=void 0;try{for(var D=p.nodeIndexes[Symbol.iterator](),_;!(T=(_=D.next()).done);T=!0){var k=_.value,F=c(k,2),G=F[0],B=F[1],q=C.cy.getElementById(G);if(q){var R=q.boundingBox(),P=p.xCoords[B]-R.w/2,N=p.xCoords[B]+R.w/2,I=p.yCoords[B]-R.h/2,z=p.yCoords[B]+R.h/2;P<E&&(E=P),N>v&&(v=N),I<x&&(x=I),z>w&&(w=z)}}}catch(Z){A=!0,M=Z}finally{try{!T&&D.return&&D.return()}finally{if(A)throw M}}var ae=y.x-(v+E)/2,re=y.y-(w+x)/2;p.xCoords=p.xCoords.map(function(Z){return Z+ae}),p.yCoords=p.yCoords.map(function(Z){return Z+re})}else{Object.keys(p).forEach(function(Z){var U=p[Z],W=U.getRect().x,X=U.getRect().x+U.getRect().width,ee=U.getRect().y,oe=U.getRect().y+U.getRect().height;W<E&&(E=W),X>v&&(v=X),ee<x&&(x=ee),oe>w&&(w=oe)});var K=y.x-(v+E)/2,V=y.y-(w+x)/2;Object.keys(p).forEach(function(Z){var U=p[Z];U.setCenter(U.getCenterX()+K,U.getCenterY()+V)})}}},g.calcBoundingBox=function(y,p,C,E){for(var v=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER,w=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER,A=void 0,M=void 0,D=void 0,_=void 0,k=y.descendants().not(":parent"),F=k.length,G=0;G<F;G++){var B=k[G];A=p[E.get(B.id())]-B.width()/2,M=p[E.get(B.id())]+B.width()/2,D=C[E.get(B.id())]-B.height()/2,_=C[E.get(B.id())]+B.height()/2,v>A&&(v=A),x<M&&(x=M),w>D&&(w=D),T<_&&(T=_)}var q={};return q.topLeftX=v,q.topLeftY=w,q.width=x-v,q.height=T-w,q},g.calcParentsWithoutChildren=function(y,p){var C=y.collection();return p.nodes(":parent").forEach(function(E){var v=!1;E.children().forEach(function(x){x.css("display")!="none"&&(v=!0)}),v||C.merge(E)}),C},s.exports=g},816:(s,u,f)=>{var c=f(548),h=f(140).CoSELayout,g=f(140).CoSENode,y=f(140).layoutBase.PointD,p=f(140).layoutBase.DimensionD,C=f(140).layoutBase.LayoutConstants,E=f(140).layoutBase.FDLayoutConstants,v=f(140).CoSEConstants,x=function(T,A){var M=T.cy,D=T.eles,_=D.nodes(),k=D.edges(),F=void 0,G=void 0,B=void 0,q={};T.randomize&&(F=A.nodeIndexes,G=A.xCoords,B=A.yCoords);var R=function(Z){return typeof Z=="function"},P=function(Z,U){return R(Z)?Z(U):Z},N=c.calcParentsWithoutChildren(M,D),I=function V(Z,U,W,X){for(var ee=U.length,oe=0;oe<ee;oe++){var te=U[oe],ie=null;te.intersection(N).length==0&&(ie=te.children());var se=void 0,$=te.layoutDimensions({nodeDimensionsIncludeLabels:X.nodeDimensionsIncludeLabels});if(te.outerWidth()!=null&&te.outerHeight()!=null)if(X.randomize)if(!te.isParent())se=Z.add(new g(W.graphManager,new y(G[F.get(te.id())]-$.w/2,B[F.get(te.id())]-$.h/2),new p(parseFloat($.w),parseFloat($.h))));else{var ne=c.calcBoundingBox(te,G,B,F);te.intersection(N).length==0?se=Z.add(new g(W.graphManager,new y(ne.topLeftX,ne.topLeftY),new p(ne.width,ne.height))):se=Z.add(new g(W.graphManager,new y(ne.topLeftX,ne.topLeftY),new p(parseFloat($.w),parseFloat($.h))))}else se=Z.add(new g(W.graphManager,new y(te.position("x")-$.w/2,te.position("y")-$.h/2),new p(parseFloat($.w),parseFloat($.h))));else se=Z.add(new g(this.graphManager));if(se.id=te.data("id"),se.nodeRepulsion=P(X.nodeRepulsion,te),se.paddingLeft=parseInt(te.css("padding")),se.paddingTop=parseInt(te.css("padding")),se.paddingRight=parseInt(te.css("padding")),se.paddingBottom=parseInt(te.css("padding")),X.nodeDimensionsIncludeLabels&&(se.labelWidth=te.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,se.labelHeight=te.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,se.labelPosVertical=te.css("text-valign"),se.labelPosHorizontal=te.css("text-halign")),q[te.data("id")]=se,isNaN(se.rect.x)&&(se.rect.x=0),isNaN(se.rect.y)&&(se.rect.y=0),ie!=null&&ie.length>0){var le=void 0;le=W.getGraphManager().add(W.newGraph(),se),V(le,ie,W,X)}}},z=function(Z,U,W){for(var X=0,ee=0,oe=0;oe<W.length;oe++){var te=W[oe],ie=q[te.data("source")],se=q[te.data("target")];if(ie&&se&&ie!==se&&ie.getEdgesBetween(se).length==0){var $=U.add(Z.newEdge(),ie,se);$.id=te.id(),$.idealLength=P(T.idealEdgeLength,te),$.edgeElasticity=P(T.edgeElasticity,te),X+=$.idealLength,ee++}}T.idealEdgeLength!=null&&(ee>0?v.DEFAULT_EDGE_LENGTH=E.DEFAULT_EDGE_LENGTH=X/ee:R(T.idealEdgeLength)?v.DEFAULT_EDGE_LENGTH=E.DEFAULT_EDGE_LENGTH=50:v.DEFAULT_EDGE_LENGTH=E.DEFAULT_EDGE_LENGTH=T.idealEdgeLength,v.MIN_REPULSION_DIST=E.MIN_REPULSION_DIST=E.DEFAULT_EDGE_LENGTH/10,v.DEFAULT_RADIAL_SEPARATION=E.DEFAULT_EDGE_LENGTH)},ae=function(Z,U){U.fixedNodeConstraint&&(Z.constraints.fixedNodeConstraint=U.fixedNodeConstraint),U.alignmentConstraint&&(Z.constraints.alignmentConstraint=U.alignmentConstraint),U.relativePlacementConstraint&&(Z.constraints.relativePlacementConstraint=U.relativePlacementConstraint)};T.nestingFactor!=null&&(v.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=E.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=T.nestingFactor),T.gravity!=null&&(v.DEFAULT_GRAVITY_STRENGTH=E.DEFAULT_GRAVITY_STRENGTH=T.gravity),T.numIter!=null&&(v.MAX_ITERATIONS=E.MAX_ITERATIONS=T.numIter),T.gravityRange!=null&&(v.DEFAULT_GRAVITY_RANGE_FACTOR=E.DEFAULT_GRAVITY_RANGE_FACTOR=T.gravityRange),T.gravityCompound!=null&&(v.DEFAULT_COMPOUND_GRAVITY_STRENGTH=E.DEFAULT_COMPOUND_GRAVITY_STRENGTH=T.gravityCompound),T.gravityRangeCompound!=null&&(v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=E.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=T.gravityRangeCompound),T.initialEnergyOnIncremental!=null&&(v.DEFAULT_COOLING_FACTOR_INCREMENTAL=E.DEFAULT_COOLING_FACTOR_INCREMENTAL=T.initialEnergyOnIncremental),T.tilingCompareBy!=null&&(v.TILING_COMPARE_BY=T.tilingCompareBy),T.quality=="proof"?C.QUALITY=2:C.QUALITY=0,v.NODE_DIMENSIONS_INCLUDE_LABELS=E.NODE_DIMENSIONS_INCLUDE_LABELS=C.NODE_DIMENSIONS_INCLUDE_LABELS=T.nodeDimensionsIncludeLabels,v.DEFAULT_INCREMENTAL=E.DEFAULT_INCREMENTAL=C.DEFAULT_INCREMENTAL=!T.randomize,v.ANIMATE=E.ANIMATE=C.ANIMATE=T.animate,v.TILE=T.tile,v.TILING_PADDING_VERTICAL=typeof T.tilingPaddingVertical=="function"?T.tilingPaddingVertical.call():T.tilingPaddingVertical,v.TILING_PADDING_HORIZONTAL=typeof T.tilingPaddingHorizontal=="function"?T.tilingPaddingHorizontal.call():T.tilingPaddingHorizontal,v.DEFAULT_INCREMENTAL=E.DEFAULT_INCREMENTAL=C.DEFAULT_INCREMENTAL=!0,v.PURE_INCREMENTAL=!T.randomize,C.DEFAULT_UNIFORM_LEAF_NODE_SIZES=T.uniformNodeDimensions,T.step=="transformed"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,v.ENFORCE_CONSTRAINTS=!1,v.APPLY_LAYOUT=!1),T.step=="enforced"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!0,v.APPLY_LAYOUT=!1),T.step=="cose"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!1,v.APPLY_LAYOUT=!0),T.step=="all"&&(T.randomize?v.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!0,v.APPLY_LAYOUT=!0),T.fixedNodeConstraint||T.alignmentConstraint||T.relativePlacementConstraint?v.TREE_REDUCTION_ON_INCREMENTAL=!1:v.TREE_REDUCTION_ON_INCREMENTAL=!0;var re=new h,K=re.newGraphManager();return I(K.addRoot(),c.getTopMostNodes(_),re,T),z(re,K,k),ae(re,T),re.runLayout(),q};s.exports={coseLayout:x}},212:(s,u,f)=>{var c=function(){function T(A,M){for(var D=0;D<M.length;D++){var _=M[D];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(A,_.key,_)}}return function(A,M,D){return M&&T(A.prototype,M),D&&T(A,D),A}}();function h(T,A){if(!(T instanceof A))throw new TypeError("Cannot call a class as a function")}var g=f(658),y=f(548),p=f(657),C=p.spectralLayout,E=f(816),v=E.coseLayout,x=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(A){return 4500},idealEdgeLength:function(A){return 50},edgeElasticity:function(A){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),w=function(){function T(A){h(this,T),this.options=g({},x,A)}return c(T,[{key:"run",value:function(){var M=this,D=this.options,_=D.cy,k=D.eles,F=[],G=[],B=void 0,q=[];D.fixedNodeConstraint&&(!Array.isArray(D.fixedNodeConstraint)||D.fixedNodeConstraint.length==0)&&(D.fixedNodeConstraint=void 0),D.alignmentConstraint&&(D.alignmentConstraint.vertical&&(!Array.isArray(D.alignmentConstraint.vertical)||D.alignmentConstraint.vertical.length==0)&&(D.alignmentConstraint.vertical=void 0),D.alignmentConstraint.horizontal&&(!Array.isArray(D.alignmentConstraint.horizontal)||D.alignmentConstraint.horizontal.length==0)&&(D.alignmentConstraint.horizontal=void 0)),D.relativePlacementConstraint&&(!Array.isArray(D.relativePlacementConstraint)||D.relativePlacementConstraint.length==0)&&(D.relativePlacementConstraint=void 0);var R=D.fixedNodeConstraint||D.alignmentConstraint||D.relativePlacementConstraint;R&&(D.tile=!1,D.packComponents=!1);var P=void 0,N=!1;if(_.layoutUtilities&&D.packComponents&&(P=_.layoutUtilities("get"),P||(P=_.layoutUtilities()),N=!0),k.nodes().length>0)if(N){var ae=y.getTopMostNodes(D.eles.nodes());if(B=y.connectComponents(_,D.eles,ae),B.forEach(function(be){var Te=be.boundingBox();q.push({x:Te.x1+Te.w/2,y:Te.y1+Te.h/2})}),D.randomize&&B.forEach(function(be){D.eles=be,F.push(C(D))}),D.quality=="default"||D.quality=="proof"){var re=_.collection();if(D.tile){var K=new Map,V=[],Z=[],U=0,W={nodeIndexes:K,xCoords:V,yCoords:Z},X=[];if(B.forEach(function(be,Te){be.edges().length==0&&(be.nodes().forEach(function(pe,de){re.merge(be.nodes()[de]),pe.isParent()||(W.nodeIndexes.set(be.nodes()[de].id(),U++),W.xCoords.push(be.nodes()[0].position().x),W.yCoords.push(be.nodes()[0].position().y))}),X.push(Te))}),re.length>1){var ee=re.boundingBox();q.push({x:ee.x1+ee.w/2,y:ee.y1+ee.h/2}),B.push(re),F.push(W);for(var oe=X.length-1;oe>=0;oe--)B.splice(X[oe],1),F.splice(X[oe],1),q.splice(X[oe],1)}}B.forEach(function(be,Te){D.eles=be,G.push(v(D,F[Te])),y.relocateComponent(q[Te],G[Te],D)})}else B.forEach(function(be,Te){y.relocateComponent(q[Te],F[Te],D)});var te=new Set;if(B.length>1){var ie=[],se=k.filter(function(be){return be.css("display")=="none"});B.forEach(function(be,Te){var pe=void 0;if(D.quality=="draft"&&(pe=F[Te].nodeIndexes),be.nodes().not(se).length>0){var de={};de.edges=[],de.nodes=[];var ye=void 0;be.nodes().not(se).forEach(function(Ee){if(D.quality=="draft")if(!Ee.isParent())ye=pe.get(Ee.id()),de.nodes.push({x:F[Te].xCoords[ye]-Ee.boundingbox().w/2,y:F[Te].yCoords[ye]-Ee.boundingbox().h/2,width:Ee.boundingbox().w,height:Ee.boundingbox().h});else{var ue=y.calcBoundingBox(Ee,F[Te].xCoords,F[Te].yCoords,pe);de.nodes.push({x:ue.topLeftX,y:ue.topLeftY,width:ue.width,height:ue.height})}else G[Te][Ee.id()]&&de.nodes.push({x:G[Te][Ee.id()].getLeft(),y:G[Te][Ee.id()].getTop(),width:G[Te][Ee.id()].getWidth(),height:G[Te][Ee.id()].getHeight()})}),be.edges().forEach(function(Ee){var ue=Ee.source(),Ae=Ee.target();if(ue.css("display")!="none"&&Ae.css("display")!="none")if(D.quality=="draft"){var Pe=pe.get(ue.id()),Fe=pe.get(Ae.id()),Ye=[],Ve=[];if(ue.isParent()){var Qe=y.calcBoundingBox(ue,F[Te].xCoords,F[Te].yCoords,pe);Ye.push(Qe.topLeftX+Qe.width/2),Ye.push(Qe.topLeftY+Qe.height/2)}else Ye.push(F[Te].xCoords[Pe]),Ye.push(F[Te].yCoords[Pe]);if(Ae.isParent()){var Xe=y.calcBoundingBox(Ae,F[Te].xCoords,F[Te].yCoords,pe);Ve.push(Xe.topLeftX+Xe.width/2),Ve.push(Xe.topLeftY+Xe.height/2)}else Ve.push(F[Te].xCoords[Fe]),Ve.push(F[Te].yCoords[Fe]);de.edges.push({startX:Ye[0],startY:Ye[1],endX:Ve[0],endY:Ve[1]})}else G[Te][ue.id()]&&G[Te][Ae.id()]&&de.edges.push({startX:G[Te][ue.id()].getCenterX(),startY:G[Te][ue.id()].getCenterY(),endX:G[Te][Ae.id()].getCenterX(),endY:G[Te][Ae.id()].getCenterY()})}),de.nodes.length>0&&(ie.push(de),te.add(Te))}});var $=P.packComponents(ie,D.randomize).shifts;if(D.quality=="draft")F.forEach(function(be,Te){var pe=be.xCoords.map(function(ye){return ye+$[Te].dx}),de=be.yCoords.map(function(ye){return ye+$[Te].dy});be.xCoords=pe,be.yCoords=de});else{var ne=0;te.forEach(function(be){Object.keys(G[be]).forEach(function(Te){var pe=G[be][Te];pe.setCenter(pe.getCenterX()+$[ne].dx,pe.getCenterY()+$[ne].dy)}),ne++})}}}else{var I=D.eles.boundingBox();if(q.push({x:I.x1+I.w/2,y:I.y1+I.h/2}),D.randomize){var z=C(D);F.push(z)}D.quality=="default"||D.quality=="proof"?(G.push(v(D,F[0])),y.relocateComponent(q[0],G[0],D)):y.relocateComponent(q[0],F[0],D)}var le=function(Te,pe){if(D.quality=="default"||D.quality=="proof"){typeof Te=="number"&&(Te=pe);var de=void 0,ye=void 0,Ee=Te.data("id");return G.forEach(function(Ae){Ee in Ae&&(de={x:Ae[Ee].getRect().getCenterX(),y:Ae[Ee].getRect().getCenterY()},ye=Ae[Ee])}),D.nodeDimensionsIncludeLabels&&(ye.labelWidth&&(ye.labelPosHorizontal=="left"?de.x+=ye.labelWidth/2:ye.labelPosHorizontal=="right"&&(de.x-=ye.labelWidth/2)),ye.labelHeight&&(ye.labelPosVertical=="top"?de.y+=ye.labelHeight/2:ye.labelPosVertical=="bottom"&&(de.y-=ye.labelHeight/2))),de==null&&(de={x:Te.position("x"),y:Te.position("y")}),{x:de.x,y:de.y}}else{var ue=void 0;return F.forEach(function(Ae){var Pe=Ae.nodeIndexes.get(Te.id());Pe!=null&&(ue={x:Ae.xCoords[Pe],y:Ae.yCoords[Pe]})}),ue==null&&(ue={x:Te.position("x"),y:Te.position("y")}),{x:ue.x,y:ue.y}}};if(D.quality=="default"||D.quality=="proof"||D.randomize){var Se=y.calcParentsWithoutChildren(_,k),De=k.filter(function(be){return be.css("display")=="none"});D.eles=k.not(De),k.nodes().not(":parent").not(De).layoutPositions(M,D,le),Se.length>0&&Se.forEach(function(be){be.position(le(be))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),T}();s.exports=w},657:(s,u,f)=>{var c=f(548),h=f(140).layoutBase.Matrix,g=f(140).layoutBase.SVD,y=function(C){var E=C.cy,v=C.eles,x=v.nodes(),w=v.nodes(":parent"),T=new Map,A=new Map,M=new Map,D=[],_=[],k=[],F=[],G=[],B=[],q=[],R=[],P=void 0,N=1e8,I=1e-9,z=C.piTol,ae=C.samplingType,re=C.nodeSeparation,K=void 0,V=function(){for(var j=0,ve=0,me=!1;ve<K;){j=Math.floor(Math.random()*P),me=!1;for(var we=0;we<ve;we++)if(F[we]==j){me=!0;break}if(!me)F[ve]=j,ve++;else continue}},Z=function(j,ve,me){for(var we=[],xe=0,qe=0,Ce=0,Oe=void 0,Ie=[],He=0,Ue=1,je=0;je<P;je++)Ie[je]=N;for(we[qe]=j,Ie[j]=0;qe>=xe;){Ce=we[xe++];for(var et=D[Ce],Ge=0;Ge<et.length;Ge++)Oe=A.get(et[Ge]),Ie[Oe]==N&&(Ie[Oe]=Ie[Ce]+1,we[++qe]=Oe);B[Ce][ve]=Ie[Ce]*re}if(me){for(var $e=0;$e<P;$e++)B[$e][ve]<G[$e]&&(G[$e]=B[$e][ve]);for(var vt=0;vt<P;vt++)G[vt]>He&&(He=G[vt],Ue=vt)}return Ue},U=function(j){var ve=void 0;if(j){ve=Math.floor(Math.random()*P);for(var we=0;we<P;we++)G[we]=N;for(var xe=0;xe<K;xe++)F[xe]=ve,ve=Z(ve,xe,j)}else{V();for(var me=0;me<K;me++)Z(F[me],me,j)}for(var qe=0;qe<P;qe++)for(var Ce=0;Ce<K;Ce++)B[qe][Ce]*=B[qe][Ce];for(var Oe=0;Oe<K;Oe++)q[Oe]=[];for(var Ie=0;Ie<K;Ie++)for(var He=0;He<K;He++)q[Ie][He]=B[F[He]][Ie]},W=function(){for(var j=g.svd(q),ve=j.S,me=j.U,we=j.V,xe=ve[0]*ve[0]*ve[0],qe=[],Ce=0;Ce<K;Ce++){qe[Ce]=[];for(var Oe=0;Oe<K;Oe++)qe[Ce][Oe]=0,Ce==Oe&&(qe[Ce][Oe]=ve[Ce]/(ve[Ce]*ve[Ce]+xe/(ve[Ce]*ve[Ce])))}R=h.multMat(h.multMat(we,qe),h.transpose(me))},X=function(){for(var j=void 0,ve=void 0,me=[],we=[],xe=[],qe=[],Ce=0;Ce<P;Ce++)me[Ce]=Math.random(),we[Ce]=Math.random();me=h.normalize(me),we=h.normalize(we);for(var Oe=I,Ie=I,He=void 0;;){for(var Ue=0;Ue<P;Ue++)xe[Ue]=me[Ue];if(me=h.multGamma(h.multL(h.multGamma(xe),B,R)),j=h.dotProduct(xe,me),me=h.normalize(me),Oe=h.dotProduct(xe,me),He=Math.abs(Oe/Ie),He<=1+z&&He>=1)break;Ie=Oe}for(var je=0;je<P;je++)xe[je]=me[je];for(Ie=I;;){for(var et=0;et<P;et++)qe[et]=we[et];if(qe=h.minusOp(qe,h.multCons(xe,h.dotProduct(xe,qe))),we=h.multGamma(h.multL(h.multGamma(qe),B,R)),ve=h.dotProduct(qe,we),we=h.normalize(we),Oe=h.dotProduct(qe,we),He=Math.abs(Oe/Ie),He<=1+z&&He>=1)break;Ie=Oe}for(var Ge=0;Ge<P;Ge++)qe[Ge]=we[Ge];_=h.multCons(xe,Math.sqrt(Math.abs(j))),k=h.multCons(qe,Math.sqrt(Math.abs(ve)))};c.connectComponents(E,v,c.getTopMostNodes(x),T),w.forEach(function(he){c.connectComponents(E,v,c.getTopMostNodes(he.descendants().intersection(v)),T)});for(var ee=0,oe=0;oe<x.length;oe++)x[oe].isParent()||A.set(x[oe].id(),ee++);var te=!0,ie=!1,se=void 0;try{for(var $=T.keys()[Symbol.iterator](),ne;!(te=(ne=$.next()).done);te=!0){var le=ne.value;A.set(le,ee++)}}catch(he){ie=!0,se=he}finally{try{!te&&$.return&&$.return()}finally{if(ie)throw se}}for(var Se=0;Se<A.size;Se++)D[Se]=[];w.forEach(function(he){for(var j=he.children().intersection(v);j.nodes(":childless").length==0;)j=j.nodes()[0].children().intersection(v);var ve=0,me=j.nodes(":childless")[0].connectedEdges().length;j.nodes(":childless").forEach(function(we,xe){we.connectedEdges().length<me&&(me=we.connectedEdges().length,ve=xe)}),M.set(he.id(),j.nodes(":childless")[ve].id())}),x.forEach(function(he){var j=void 0;he.isParent()?j=A.get(M.get(he.id())):j=A.get(he.id()),he.neighborhood().nodes().forEach(function(ve){v.intersection(he.edgesWith(ve)).length>0&&(ve.isParent()?D[j].push(M.get(ve.id())):D[j].push(ve.id()))})});var De=function(j){var ve=A.get(j),me=void 0;T.get(j).forEach(function(we){E.getElementById(we).isParent()?me=M.get(we):me=we,D[ve].push(me),D[A.get(me)].push(j)})},be=!0,Te=!1,pe=void 0;try{for(var de=T.keys()[Symbol.iterator](),ye;!(be=(ye=de.next()).done);be=!0){var Ee=ye.value;De(Ee)}}catch(he){Te=!0,pe=he}finally{try{!be&&de.return&&de.return()}finally{if(Te)throw pe}}P=A.size;var ue=void 0;if(P>2){K=P<C.sampleSize?P:C.sampleSize;for(var Ae=0;Ae<P;Ae++)B[Ae]=[];for(var Pe=0;Pe<K;Pe++)R[Pe]=[];return C.quality=="draft"||C.step=="all"?(U(ae),W(),X(),ue={nodeIndexes:A,xCoords:_,yCoords:k}):(A.forEach(function(he,j){_.push(E.getElementById(j).position("x")),k.push(E.getElementById(j).position("y"))}),ue={nodeIndexes:A,xCoords:_,yCoords:k}),ue}else{var Fe=A.keys(),Ye=E.getElementById(Fe.next().value),Ve=Ye.position(),Qe=Ye.outerWidth();if(_.push(Ve.x),k.push(Ve.y),P==2){var Xe=E.getElementById(Fe.next().value),We=Xe.outerWidth();_.push(Ve.x+Qe/2+We/2+C.idealEdgeLength),k.push(Ve.y)}return ue={nodeIndexes:A,xCoords:_,yCoords:k},ue}};s.exports={spectralLayout:y}},579:(s,u,f)=>{var c=f(212),h=function(y){y&&y("layout","fcose",c)};typeof cytoscape<"u"&&h(cytoscape),s.exports=h},140:s=>{s.exports=r}},a={};function i(s){var u=a[s];if(u!==void 0)return u.exports;var f=a[s]={exports:{}};return n[s](f,f.exports,i),f.exports}var o=i(579);return o})()})}(Nf)),Nf.exports}var R4=M4();const P4=Ao(R4);var gb={exports:{}},rR;function k4(){return rR||(rR=1,function(t,e){(function(n,a){t.exports=a()})(self,function(){return(()=>{var r={658:o=>{o.exports=Object.assign!=null?Object.assign.bind(Object):function(s){for(var u=arguments.length,f=new Array(u>1?u-1:0),c=1;c<u;c++)f[c-1]=arguments[c];return f.filter(function(h){return h!=null}).forEach(function(h){Object.keys(h).forEach(function(g){return s[g]=h[g]})}),s}},738:o=>{o.exports={grabbedNode:function(u){return!0},dropTarget:function(u,f){return!0},dropSibling:function(u,f){return!0},newParentNode:function(u,f){return{}},boundingBoxOptions:{includeOverlays:!1,includeLabels:!0},overThreshold:10,outThreshold:10}},904:(o,s,u)=>{var f=u(658),c=u(738),h=u(43),g=u(444),y=function(E,v){this.cy=E,this.options=f({},c,v),this.listeners=[],this.enabled=!0,this.addListeners()},p=function(){this.removeListeners()};[h,g,{destroy:p}].forEach(function(C){f(y.prototype,C)}),o.exports=function(C){var E=this;return new y(E,C)}},444:(o,s,u)=>{var f=u(235),c=f.isParent,h=f.isChild,g=f.isOnlyChild,y=f.getBounds,p=f.getBoundsTuple,C=f.boundsOverlap,E=f.expandBounds,v=f.getBoundsCopy,x=f.setParent,w=f.removeParent,T=function(_,k,F){this.listeners.push({event:_,selector:k,callback:F}),k==null?this.cy.on(_,F):this.cy.on(_,k,F)},A=function(){var _=this,k=this.options,F=this.cy,G=function(K){return K.selected()&&F.elements("node:selected").length>1},B=function(K){return!c(K)&&!G(K)&&k.grabbedNode(K)},q=function(K){return!h(K)&&!K.same(_.grabbedNode)&&k.dropTarget(K,_.grabbedNode)},R=function(K){return h(K)&&!K.same(_.grabbedNode)&&k.dropSibling(K,_.grabbedNode)},P=function(K){return h(K)},N=function(K){return p(K,k.boundingBoxOptions)},I=function(K){return(q(K)||R(K))&&!K.same(_.dropTarget)},z=function(){return _.boundsTuples=F.nodes(I).map(N)},ae=function(){_.grabbedNode.removeClass("cdnd-grabbed-node"),_.dropTarget.removeClass("cdnd-drop-target"),_.dropSibling.removeClass("cdnd-drop-sibling"),_.grabbedNode=F.collection(),_.dropTarget=F.collection(),_.dropSibling=F.collection(),_.dropTargetBounds=null,_.boundsTuples=[],_.inGesture=!1};this.addListener("grab","node",function(re){var K=re.target;!_.enabled||!B(K)||(_.inGesture=!0,_.grabbedNode=K,_.dropTarget=F.collection(),_.dropSibling=F.collection(),P(K)&&(_.dropTarget=K.parent(),_.dropTargetBounds=v(_.dropTarget,k.boundingBoxOptions)),z(),_.grabbedNode.addClass("cdnd-grabbed-node"),_.dropTarget.addClass("cdnd-drop-target"),K.emit("cdndgrab"))}),this.addListener("add","node",function(re){if(!(!_.inGesture||!_.enabled)){var K=re.target;I(K)&&_.boundsTuples.push(p(K,k.boundingBoxOptions))}}),this.addListener("remove","node",function(re){if(!(!_.inGesture||!_.enabled)){var K=re.target,V=K.same(_.dropTarget),Z=K.same(_.dropSibling),U=K.same(_.grabbedNode);(V||Z||U)&&(U?ae():(_.dropTarget=F.collection(),_.dropSibling=F.collection(),z()))}}),this.addListener("drag","node",function(){if(!(!_.inGesture||!_.enabled))if(_.dropTarget.nonempty()){var re=E(y(_.grabbedNode,k.boundingBoxOptions),k.outThreshold),K=_.dropTarget,V=_.dropSibling,Z=!C(_.dropTargetBounds,re),U=g(_.grabbedNode);if(Z){w(_.grabbedNode),w(_.dropSibling),_.dropTarget.removeClass("cdnd-drop-target"),_.dropSibling.removeClass("cdnd-drop-sibling");var W=_.dropTarget&&_.dropTarget.hasClass("cdnd-new-parent");(_.dropSibling.nonempty()||U)&&W&&_.dropTarget.remove(),_.dropTarget=F.collection(),_.dropSibling=F.collection(),_.dropTargetBounds=null,W&&z(),_.grabbedNode.emit("cdndout",[K,V])}}else{var X=E(y(_.grabbedNode,k.boundingBoxOptions),k.overThreshold),ee=function(ne){return!ne.node.removed()&&C(X,ne.bb)},oe=_.boundsTuples.filter(ee).map(function($){return $.node});if(oe.length>0){var te=oe.filter(c),ie,se;te.length>0?(se=F.collection(),ie=te[0]):(se=oe[0],ie=F.add(k.newParentNode(_.grabbedNode,se))),ie.addClass("cdnd-drop-target"),ie!==se&&ie.addClass("cdnd-new-parent"),se.addClass("cdnd-drop-sibling"),x(se,ie),_.dropTargetBounds=v(ie,k.boundingBoxOptions),x(_.grabbedNode,ie),_.dropTarget=ie,_.dropSibling=se,_.grabbedNode.emit("cdndover",[ie,se])}}}),this.addListener("free","node",function(){if(!(!_.inGesture||!_.enabled)){var re=_.grabbedNode,K=_.dropTarget,V=_.dropSibling;ae(),re.emit("cdnddrop",[K,V])}})},M=function(){var _=this.cy;this.listeners.forEach(function(k){var F=k.event,G=k.selector,B=k.callback;G==null?_.removeListener(F,B):_.removeListener(F,G,B)}),this.listeners=[]};o.exports={addListener:T,addListeners:A,removeListeners:M}},43:o=>{function s(){this.enabled=!0}function u(){this.enabled=!1}o.exports={enable:s,disable:u}},235:o=>{var s=function(w){return w.isParent()},u=function(w){return w.isChild()},f=function(w){return u(w)&&w.parent().children().length===1},c=function(w,T){return w.boundingBox(T)},h=function(w,T){return{node:w,bb:g(c(w,T))}},g=function(w){return{x1:w.x1,x2:w.x2,y1:w.y1,y2:w.y2,w:w.w,h:w.h}},y=function(w,T){return g(c(w,T))},p=function(w){return w.move({parent:null})},C=function(w,T){return w.move({parent:T.id()})},E=function(w,T){return!(w.x1>T.x2||T.x1>w.x2||w.x2<T.x1||T.x2<w.x1||w.y2<T.y1||T.y2<w.y1||w.y1>T.y2||T.y1>w.y2)},v=function(w,T){return{x1:w.x1-T,x2:w.x2+T,w:w.w+2*T,y1:w.y1-T,y2:w.y2+T,h:w.h+2*T}};o.exports={isParent:s,isChild:u,isOnlyChild:f,getBoundsTuple:h,boundsOverlap:E,getBounds:c,expandBounds:v,copyBounds:g,getBoundsCopy:y,removeParent:p,setParent:C}},579:(o,s,u)=>{var f=u(904),c=function(g){g&&g("core","compoundDragAndDrop",f)};typeof cytoscape<"u"&&c(cytoscape),o.exports=c}},n={};function a(o){var s=n[o];if(s!==void 0)return s.exports;var u=n[o]={exports:{}};return r[o](u,u.exports,a),u.exports}var i=a(579);return i})()})}(gb)),gb.exports}var N4=k4();const O4=Ao(N4);var yb={exports:{}},nR;function I4(){return nR||(nR=1,function(t,e){(function(r,n){t.exports=n()})(window,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.d=function(i,o,s){a.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:s})},a.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a.t=function(i,o){if(1&o&&(i=a(i)),8&o||4&o&&typeof i=="object"&&i&&i.__esModule)return i;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&o&&typeof i!="string")for(var u in i)a.d(s,u,(function(f){return i[f]}).bind(null,u));return s},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=0)}([function(r,n,a){var i=a(1),o=function(s){s&&s("core","svg",i.svg)};typeof cytoscape<"u"&&o(cytoscape),r.exports=o},function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},o=a(2),s={},u={};u.number=function(f){return f!=null&&(f===void 0?"undefined":i(f))===i(1)&&!isNaN(f)},s.bufferCanvasImage=function(f,c){var h=c.renderer().usePaths;c.renderer().usePaths=function(){return!1},c.elements().forEach(function(G){G._private.rscratch.pathCacheKey=null,G._private.rscratch.pathCache=null});var g=c.renderer(),y=c.mutableElements().boundingBox(),p=g.findContainerClientCoords(),C=f.full?Math.ceil(y.w):p[2],E=f.full?Math.ceil(y.h):p[3],v=u.number(f.maxWidth)||u.number(f.maxHeight),x=g.getPixelRatio(),w=1;if(f.scale!==void 0)C*=f.scale,E*=f.scale,w=f.scale;else if(v){var T=1/0,A=1/0;u.number(f.maxWidth)&&(T=w*f.maxWidth/C),u.number(f.maxHeight)&&(A=w*f.maxHeight/E),C*=w=Math.min(T,A),E*=w}v||(C*=x,E*=x,w*=x);var M=null,D=M=new o(C,E);if(C>0&&E>0){M.clearRect(0,0,C,E),f.bg&&(M.globalCompositeOperation="destination-over",M.fillStyle=f.bg,M.fillRect(0,0,C,E)),M.globalCompositeOperation="source-over";var _=g.getCachedZSortedEles();if(f.full)M.translate(-y.x1*w,-y.y1*w),M.scale(w,w),g.drawElements(M,_),M.scale(1/w,1/w),M.translate(y.x1*w,y.y1*w);else{var k=c.pan(),F={x:k.x*w,y:k.y*w};w*=c.zoom(),M.translate(F.x,F.y),M.scale(w,w),g.drawElements(M,_),M.scale(1/w,1/w),M.translate(-F.x,-F.y)}}return c.renderer().usePaths=h,D},s.svg=function(f){return s.bufferCanvasImage(f||{},this).getSerializedSvg()},r.exports=s},function(r,n,a){(function(){var i,o,s,u,f;function c(p,C){var E,v=Object.keys(C);for(E=0;E<v.length;E++)p=p.replace(new RegExp("\\{"+v[E]+"\\}","gi"),C[v[E]]);return p}function h(p){var C,E,v;if(!p)throw new Error("cannot create a random attribute name for an undefined object");C="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",E="";do for(E="",v=0;v<12;v++)E+=C[Math.floor(Math.random()*C.length)];while(p[E]);return E}function g(p){var C={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return C[p]||C.alphabetic}f=function(p,C){var E,v,x,w={};for(p=p.split(","),C=C||10,E=0;E<p.length;E+=2)v="&"+p[E+1]+";",x=parseInt(p[E],C),w[v]="&#"+x+";";return w["\\xa0"]="&#160;",w}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),i={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(s=function(p,C){this.__root=p,this.__ctx=C}).prototype.addColorStop=function(p,C){var E,v=this.__ctx.__createElement("stop");v.setAttribute("offset",p),C.indexOf("rgba")!==-1?(E=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(C),v.setAttribute("stop-color",c("rgb({r},{g},{b})",{r:E[1],g:E[2],b:E[3]})),v.setAttribute("stop-opacity",E[4])):v.setAttribute("stop-color",C),this.__root.appendChild(v)},u=function(p,C){this.__root=p,this.__ctx=C},(o=function(p){var C,E={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((C=E).width=arguments[0],C.height=arguments[1]):C=p||E,!(this instanceof o))return new o(C);this.width=C.width||E.width,this.height=C.height||E.height,this.enableMirroring=C.enableMirroring!==void 0?C.enableMirroring:E.enableMirroring,this.canvas=this,this.__document=C.document||document,C.ctx?this.__ctx=C.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(p,C,E){C===void 0&&(C={});var v,x,w=this.__document.createElementNS("http://www.w3.org/2000/svg",p),T=Object.keys(C);for(E&&(w.setAttribute("fill","none"),w.setAttribute("stroke","none")),v=0;v<T.length;v++)x=T[v],w.setAttribute(x,C[x]);return w},o.prototype.__setDefaultStyles=function(){var p,C,E=Object.keys(i);for(p=0;p<E.length;p++)this[C=E[p]]=i[C].canvas},o.prototype.__applyStyleState=function(p){if(p){var C,E,v=Object.keys(p);for(C=0;C<v.length;C++)this[E=v[C]]=p[E]}},o.prototype.__getStyleState=function(){var p,C,E={},v=Object.keys(i);for(p=0;p<v.length;p++)E[C=v[p]]=this[C];return E},o.prototype.__applyStyleToCurrentElement=function(p){var C=this.__currentElement;this.__currentElementsToStyle;var E,v,x,w,T,A=Object.keys(i);for(E=0;E<A.length;E++)if(v=i[A[E]],x=this[A[E]],v.apply){if(x instanceof u){if(x.__ctx)for(;x.__ctx.__defs.childNodes.length;)w=x.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[w]=w,this.__defs.appendChild(x.__ctx.__defs.childNodes[0]);C.setAttribute(v.apply,c("url(#{id})",{id:x.__root.getAttribute("id")}))}else if(x instanceof s)C.setAttribute(v.apply,c("url(#{id})",{id:x.__root.getAttribute("id")}));else if(v.apply.indexOf(p)!==-1&&v.svg!==x)if(v.svgAttr!=="stroke"&&v.svgAttr!=="fill"||x.indexOf("rgba")===-1){var M=v.svgAttr;if(A[E]==="globalAlpha"&&(M=p+"-"+v.svgAttr,C.getAttribute(M)))continue;C.setAttribute(M,x)}else{T=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(x),C.setAttribute(v.svgAttr,c("rgb({r},{g},{b})",{r:T[1],g:T[2],b:T[3]}));var D=T[4],_=this.globalAlpha;_!=null&&(D*=_),C.setAttribute(v.svgAttr+"-opacity",D)}}},o.prototype.__closestGroupOrSvg=function(p){return(p=p||this.__currentElement).nodeName==="g"||p.nodeName==="svg"?p:this.__closestGroupOrSvg(p.parentNode)},o.prototype.getSerializedSvg=function(p){var C,E,v,x,w,T=new XMLSerializer().serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(T)&&(T=T.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),p)for(C=Object.keys(f),E=0;E<C.length;E++)v=C[E],x=f[v],(w=new RegExp(v,"gi")).test(T)&&(T=T.replace(w,x));return T},o.prototype.getSvg=function(){return this.__root},o.prototype.save=function(){var p=this.__createElement("g"),C=this.__closestGroupOrSvg();this.__groupStack.push(C),C.appendChild(p),this.__currentElement=p,this.__stack.push(this.__getStyleState())},o.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var p=this.__stack.pop();this.__applyStyleState(p)},o.prototype.__addTransform=function(p){var C=this.__closestGroupOrSvg();if(C.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:C,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var E=this.__createElement("g");C.appendChild(E),this.__currentElement=E}var v=this.__currentElement.getAttribute("transform");v?v+=" ":v="",v+=p,this.__currentElement.setAttribute("transform",v)},o.prototype.scale=function(p,C){C===void 0&&(C=p),this.__addTransform(c("scale({x},{y})",{x:p,y:C}))},o.prototype.rotate=function(p){var C=180*p/Math.PI;this.__addTransform(c("rotate({angle},{cx},{cy})",{angle:C,cx:0,cy:0}))},o.prototype.translate=function(p,C){this.__addTransform(c("translate({x},{y})",{x:p,y:C}))},o.prototype.transform=function(p,C,E,v,x,w){this.__addTransform(c("matrix({a},{b},{c},{d},{e},{f})",{a:p,b:C,c:E,d:v,e:x,f:w}))},o.prototype.beginPath=function(){var p;this.__currentDefaultPath="",this.__currentPosition={},p=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(p),this.__currentElement=p},o.prototype.__applyCurrentDefaultPath=function(){var p=this.__currentElement;p.nodeName==="path"?p.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",p.nodeName)},o.prototype.__addPathCommand=function(p){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=p},o.prototype.moveTo=function(p,C){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:p,y:C},this.__addPathCommand(c("M {x} {y}",{x:p,y:C}))},o.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},o.prototype.lineTo=function(p,C){this.__currentPosition={x:p,y:C},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(c("L {x} {y}",{x:p,y:C})):this.__addPathCommand(c("M {x} {y}",{x:p,y:C}))},o.prototype.bezierCurveTo=function(p,C,E,v,x,w){this.__currentPosition={x,y:w},this.__addPathCommand(c("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:p,cp1y:C,cp2x:E,cp2y:v,x,y:w}))},o.prototype.quadraticCurveTo=function(p,C,E,v){this.__currentPosition={x:E,y:v},this.__addPathCommand(c("Q {cpx} {cpy} {x} {y}",{cpx:p,cpy:C,x:E,y:v}))};var y=function(p){var C=Math.sqrt(p[0]*p[0]+p[1]*p[1]);return[p[0]/C,p[1]/C]};o.prototype.arcTo=function(p,C,E,v,x){var w=this.__currentPosition&&this.__currentPosition.x,T=this.__currentPosition&&this.__currentPosition.y;if(w!==void 0&&T!==void 0){if(x<0)throw new Error("IndexSizeError: The radius provided ("+x+") is negative.");if(w===p&&T===C||p===E&&C===v||x===0)this.lineTo(p,C);else{var A=y([w-p,T-C]),M=y([E-p,v-C]);if(A[0]*M[1]!=A[1]*M[0]){var D=A[0]*M[0]+A[1]*M[1],_=Math.acos(Math.abs(D)),k=y([A[0]+M[0],A[1]+M[1]]),F=x/Math.sin(_/2),G=p+F*k[0],B=C+F*k[1],q=[-A[1],A[0]],R=[M[1],-M[0]],P=function(z){var ae=z[0];return z[1]>=0?Math.acos(ae):-Math.acos(ae)},N=P(q),I=P(R);this.lineTo(G+q[0]*x,B+q[1]*x),this.arc(G,B,x,N,I)}else this.lineTo(p,C)}}},o.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},o.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},o.prototype.rect=function(p,C,E,v){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(p,C),this.lineTo(p+E,C),this.lineTo(p+E,C+v),this.lineTo(p,C+v),this.lineTo(p,C),this.closePath()},o.prototype.fillRect=function(p,C,E,v){var x;x=this.__createElement("rect",{x:p,y:C,width:E,height:v},!0),this.__closestGroupOrSvg().appendChild(x),this.__currentElement=x,this.__applyStyleToCurrentElement("fill")},o.prototype.strokeRect=function(p,C,E,v){var x;x=this.__createElement("rect",{x:p,y:C,width:E,height:v},!0),this.__closestGroupOrSvg().appendChild(x),this.__currentElement=x,this.__applyStyleToCurrentElement("stroke")},o.prototype.__clearCanvas=function(){for(var p=this.__closestGroupOrSvg().getAttribute("transform"),C=this.__root.childNodes[1],E=C.childNodes,v=E.length-1;v>=0;v--)E[v]&&C.removeChild(E[v]);this.__currentElement=C,this.__groupStack=[],p&&this.__addTransform(p)},o.prototype.clearRect=function(p,C,E,v){if(p!==0||C!==0||E!==this.width||v!==this.height){var x,w=this.__closestGroupOrSvg();x=this.__createElement("rect",{x:p,y:C,width:E,height:v,fill:"#FFFFFF"},!0),w.appendChild(x)}else this.__clearCanvas()},o.prototype.createLinearGradient=function(p,C,E,v){var x=this.__createElement("linearGradient",{id:h(this.__ids),x1:p+"px",x2:E+"px",y1:C+"px",y2:v+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(x),new s(x,this)},o.prototype.createRadialGradient=function(p,C,E,v,x,w){var T=this.__createElement("radialGradient",{id:h(this.__ids),cx:v+"px",cy:x+"px",r:w+"px",fx:p+"px",fy:C+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(T),new s(T,this)},o.prototype.__parseFont=function(){var p=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),C={style:p[1]||"normal",size:p[4]||"10px",family:p[6]||"sans-serif",weight:p[3]||"normal",decoration:p[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(C.decoration="underline"),this.__fontHref&&(C.href=this.__fontHref),C},o.prototype.__wrapTextLink=function(p,C){if(p.href){var E=this.__createElement("a");return E.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.href),E.appendChild(C),E}return C},o.prototype.__applyText=function(p,C,E,v){var x,w,T=this.__parseFont(),A=this.__closestGroupOrSvg(),M=this.__createElement("text",{"font-family":T.family,"font-size":T.size,"font-style":T.style,"font-weight":T.weight,"text-decoration":T.decoration,x:C,y:E,"text-anchor":(x=this.textAlign,w={left:"start",right:"end",center:"middle",start:"start",end:"end"},w[x]||w.start),"dominant-baseline":g(this.textBaseline)},!0);M.appendChild(this.__document.createTextNode(p)),this.__currentElement=M,this.__applyStyleToCurrentElement(v),A.appendChild(this.__wrapTextLink(T,M))},o.prototype.fillText=function(p,C,E){this.__applyText(p,C,E,"fill")},o.prototype.strokeText=function(p,C,E){this.__applyText(p,C,E,"stroke")},o.prototype.measureText=function(p){return this.__ctx.font=this.font,this.__ctx.measureText(p)},o.prototype.arc=function(p,C,E,v,x,w){if(v!==x){(v%=2*Math.PI)===(x%=2*Math.PI)&&(x=(x+2*Math.PI-.001*(w?-1:1))%(2*Math.PI));var T=p+E*Math.cos(x),A=C+E*Math.sin(x),M=p+E*Math.cos(v),D=C+E*Math.sin(v),_=w?0:1,k=0,F=x-v;F<0&&(F+=2*Math.PI),k=w?F>Math.PI?0:1:F>Math.PI?1:0,this.lineTo(M,D),this.__addPathCommand(c("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:E,ry:E,xAxisRotation:0,largeArcFlag:k,sweepFlag:_,endX:T,endY:A})),this.__currentPosition={x:T,y:A}}},o.prototype.clip=function(){var p=this.__closestGroupOrSvg(),C=this.__createElement("clipPath"),E=h(this.__ids),v=this.__createElement("g");this.__applyCurrentDefaultPath(),p.removeChild(this.__currentElement),C.setAttribute("id",E),C.appendChild(this.__currentElement),this.__defs.appendChild(C),p.setAttribute("clip-path",c("url(#{id})",{id:E})),p.appendChild(v),this.__currentElement=v},o.prototype.drawImage=function(){var p,C,E,v,x,w,T,A,M,D,_,k,F,G=Array.prototype.slice.call(arguments),B=G[0],q=0,R=0;if(G.length===3)p=G[1],C=G[2],E=x=B.width,v=w=B.height;else if(G.length===5)p=G[1],C=G[2],E=G[3],v=G[4],x=B.width,w=B.height;else{if(G.length!==9)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);q=G[1],R=G[2],x=G[3],w=G[4],p=G[5],C=G[6],E=G[7],v=G[8]}T=this.__closestGroupOrSvg(),this.__currentElement;var P="translate("+p+", "+C+")";if(B instanceof o){if((A=B.getSvg().cloneNode(!0)).childNodes&&A.childNodes.length>1){for(M=A.childNodes[0];M.childNodes.length;)F=M.childNodes[0].getAttribute("id"),this.__ids[F]=F,this.__defs.appendChild(M.childNodes[0]);if(D=A.childNodes[1]){var N,I=D.getAttribute("transform");N=I?I+" "+P:P,D.setAttribute("transform",N),T.appendChild(D)}}}else B.nodeName!=="CANVAS"&&B.nodeName!=="IMG"||((_=this.__createElement("image")).setAttribute("width",E),_.setAttribute("height",v),_.setAttribute("opacity",this.globalAlpha),_.setAttribute("preserveAspectRatio","none"),(k=this.__document.createElement("canvas")).width=E,k.height=v,k.getContext("2d").drawImage(B,q,R,x,w,0,0,E,v),B=k,_.setAttribute("transform",P),_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",B.nodeName==="CANVAS"?B.toDataURL():B.getAttribute("src")),T.appendChild(_))},o.prototype.createPattern=function(p,C){var E,v=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),x=h(this.__ids);return v.setAttribute("id",x),v.setAttribute("width",p.width),v.setAttribute("height",p.height),p.nodeName==="CANVAS"||p.nodeName==="IMG"?((E=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",p.width),E.setAttribute("height",p.height),E.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.nodeName==="CANVAS"?p.toDataURL():p.getAttribute("src")),v.appendChild(E),this.__defs.appendChild(v)):p instanceof o&&(v.appendChild(p.__root.childNodes[1]),this.__defs.appendChild(v)),new u(v,this)},o.prototype.setLineDash=function(p){p&&p.length>0?this.lineDash=p.join(","):this.lineDash=null},o.prototype.drawFocusRing=function(){},o.prototype.createImageData=function(){},o.prototype.getImageData=function(){},o.prototype.putImageData=function(){},o.prototype.globalCompositeOperation=function(){},o.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=o),typeof r.exports=="object"&&(r.exports=o)})()}])})}(yb)),yb.exports}var F4=I4();const B4=Ao(F4);zn.use(tW);zn.use(iW);zn.use(T4);zn.use(P4);zn.use(O4);zn.use(B4);let xa=null;function sw(){return{initCytoscape:(n,a)=>(xa&&(xa.destroy(),xa=null),xa=zn({container:n,elements:a,style:[{selector:"node",style:{"background-color":"#e0e0e0","border-color":"#555","border-width":2,label:o=>{const s=o.data("name"),u=o.data("indices");return u?`${s}[${u}]`:s},"text-valign":"center","text-halign":"center",padding:"10px","font-size":"10px","text-wrap":"wrap","text-max-width":"80px",height:"60px",width:"60px","line-height":1.2,"border-style":"solid","z-index":10}},{selector:'node[nodeType="plate"]',style:{"background-color":"#f0f8ff","border-color":"#4682b4","border-style":"dashed",shape:"round-rectangle","corner-radius":"10px",label:o=>`for(${o.data("loopVariable")} in ${o.data("loopRange")})`}},{selector:":parent",style:{"text-valign":"top","text-halign":"center",padding:"15px","background-opacity":.2,"z-index":5}},{selector:'node[nodeType="stochastic"]',style:{"background-color":"#ffe0e0","border-color":"#dc3545",shape:"ellipse"}},{selector:'node[nodeType="deterministic"]',style:{"background-color":"#e0ffe0","border-color":"#28a745",shape:"triangle"}},{selector:'node[nodeType="constant"]',style:{"background-color":"#e9ecef","border-color":"#6c757d",shape:"rectangle"}},{selector:'node[nodeType="observed"]',style:{"background-color":"#e0f0ff","border-color":"#007bff","border-style":"dashed",shape:"ellipse"}},{selector:"node[?hasError]",style:{"border-color":"#ffc107","border-width":3,"border-style":"double"}},{selector:"edge",style:{width:3,"line-color":"#a0a0a0","target-arrow-color":"#a0a0a0","target-arrow-shape":"triangle","curve-style":"bezier","z-index":1}},{selector:"edge[name]",style:{label:"data(name)","font-size":"8px","text-rotation":"autorotate","text-background-opacity":1,"text-background-color":"#ffffff","text-background-padding":"3px","text-border-width":1,"text-border-color":"#ccc"}},{selector:'edge[relationshipType="stochastic"]',style:{"line-color":"#dc3545","target-arrow-color":"#dc3545","line-style":"dashed"}},{selector:'edge[relationshipType="deterministic"]',style:{"line-color":"#28a745","target-arrow-color":"#28a745","line-style":"solid"}},{selector:".cy-selected",style:{"border-width":3,"border-color":"#007acc","overlay-color":"#007acc","overlay-opacity":.2}},{selector:".cdnd-grabbed-node",style:{"background-color":"#f1c40f",opacity:.7}},{selector:".cdnd-drop-target",style:{"border-color":"#f1c40f","border-style":"solid"}}],layout:{name:"preset"},minZoom:.1,maxZoom:2,boxSelectionEnabled:!0,wheelSensitivity:.2,autounselectify:!1}),xa.compoundDragAndDrop({grabbedNode:o=>o.data("nodeType")!=="plate",dropTarget:o=>o.data("nodeType")==="plate",dropSibling:()=>!1,outThreshold:50}),xa.gridGuide({drawGrid:!1,snapToGridOnRelease:!0,snapToGridDuringDrag:!0,gridSpacing:20}),xa.contextMenus({menuItems:[{id:"remove",content:"Remove",selector:"node, edge",onClickFunction:o=>{var u;const s=o.target;(u=s.cy().container())==null||u.dispatchEvent(new CustomEvent("cxt-remove",{detail:{elementId:s.id()}}))}}]}),xa),destroyCytoscape:n=>{n&&(n.destroy(),xa=null)},getCyInstance:()=>xa}}function q4(t){const e=bt(!1),r=bt(20),n=Ft(()=>`${r.value}px`),a=()=>{const u=t();if(u){const f=u.container();f&&(e.value&&r.value>0?(f.classList.add("grid-background"),f.style.setProperty("--grid-size",n.value)):(f.classList.remove("grid-background"),f.style.removeProperty("--grid-size")))}},i=()=>{e.value=!0,a()},o=()=>{e.value=!1,a()},s=u=>{r.value=u,e.value&&a()};return cr([e,r],a),{isGridEnabledRef:e,gridSizeRef:r,cssGridSize:n,enableGridSnapping:i,disableGridSnapping:o,setGridSize:s}}const z4=Dr({__name:"GraphCanvas",props:{elements:{},isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},validationErrors:{}},emits:["canvas-tap","node-moved","node-dropped","plate-emptied","element-remove"],setup(t,{emit:e}){const r=t,n=e,a=bt(null);let i=null;const{initCytoscape:o,destroyCytoscape:s,getCyInstance:u}=sw(),{enableGridSnapping:f,disableGridSnapping:c,setGridSize:h}=q4(u),g=["stochastic","deterministic","constant","observed","plate"],y=(C,E)=>C.map(v=>{if(v.type==="node"){const x=v,w=E.has(x.id);return{group:"nodes",data:{...x,hasError:w},position:x.position}}else{const x=v,w=C.find(A=>A.id===x.target&&A.type==="node"),T=(w==null?void 0:w.nodeType)==="stochastic"||(w==null?void 0:w.nodeType)==="observed"?"stochastic":"deterministic";return{group:"edges",data:{...x,relationshipType:T}}}}),p=(C,E)=>{if(!i)return;const v=y(C,E);i.batch(()=>{const x=new Set(C.map(w=>w.id));i.elements().forEach(w=>{x.has(w.id())||w.remove()}),v.forEach(w=>{if(!w.data.id)return;const T=i.getElementById(w.data.id);if(T.empty())i.add(w);else if(T.data(w.data),w.group==="nodes"){const A=w,M=T.position();(A.position.x!==M.x||A.position.y!==M.y)&&T.position(A.position);const D=T.parent(),_=D.length>0?D.first().id():void 0;A.data.parent!==_&&T.move({parent:A.data.parent??null})}})})};return Da(()=>{var C;a.value&&(i=o(a.value,[]),p(r.elements,r.validationErrors),h(r.gridSize),r.isGridEnabled?f():c(),(C=i.container())==null||C.addEventListener("cxt-remove",E=>{const v=E;v.detail.elementId&&n("element-remove",v.detail.elementId)}),i.on("tap",E=>{n("canvas-tap",E)}),i.on("cdnddrop","node",(E,v)=>{const x=E.target,w=v?v.id():void 0,T=r.elements.find(A=>A.id===x.id()&&A.type==="node");if(T&&T.parent&&T.parent!==w){const A=T.parent;r.elements.find(D=>D.id===A&&D.type==="node"&&D.nodeType==="plate")&&r.elements.filter(_=>_.type==="node"&&_.parent===A).length===1&&n("plate-emptied",A)}n("node-moved",{nodeId:x.id(),position:x.position(),parentId:w})}),i.on("tap","node, edge",E=>{i==null||i.elements().removeClass("cy-selected"),E.target.addClass("cy-selected")}),i.on("tap",E=>{E.target===i&&(i==null||i.elements().removeClass("cy-selected"))}),a.value.addEventListener("dragover",E=>{E.preventDefault(),E.dataTransfer&&(E.dataTransfer.dropEffect="copy")}),a.value.addEventListener("drop",E=>{var v;if(E.preventDefault(),E.dataTransfer){const x=E.dataTransfer.getData("text/plain");if(g.includes(x)){const w=(v=a.value)==null?void 0:v.getBoundingClientRect();if(w&&i){const T=E.clientX,A=E.clientY,M={x:T-w.left,y:A-w.top},D=i.panzoom().renderedPositionToModelPosition(M);n("node-dropped",{nodeType:x,position:D})}}}}))}),_a(()=>{i&&s(i)}),cr(()=>r.isGridEnabled,C=>{C?f():c()}),cr(()=>r.gridSize,C=>{h(C),r.isGridEnabled&&f()}),cr([()=>r.elements,()=>r.validationErrors],([C,E])=>{p(C,E)},{deep:!0}),(C,E)=>(Je(),ot("div",{ref_key:"cyContainer",ref:a,class:jt(["cytoscape-container",{"grid-background":C.isGridEnabled&&C.gridSize>0,"mode-add-node":C.currentMode==="add-node","mode-add-edge":C.currentMode==="add-edge","mode-select":C.currentMode==="select"}]),style:Ci({"--grid-size":`${C.gridSize}px`})},null,6))}}),Kr=(t,e)=>{const r=t.__vccOpts||t;for(const[n,a]of e)r[n]=a;return r},G4=Kr(z4,[["__scopeId","data-v-b0070bcb"]]),H4=["disabled"],U4=Dr({__name:"BaseButton",props:{type:{},size:{},disabled:{type:Boolean}},setup(t){const e=t,r=Ft(()=>({"base-button":!0,[`button-${e.type||"default"}`]:!0,[`button-${e.size||"medium"}`]:!0,"button-disabled":e.disabled}));return(n,a)=>(Je(),ot("button",{class:jt(r.value),disabled:n.disabled},[ys(n.$slots,"default",{},void 0,!0)],10,H4))}}),Wt=Kr(U4,[["__scopeId","data-v-320dead9"]]),Jb=[{value:"dnorm",label:"Normal (dnorm)",paramCount:2,paramNames:["mean","precision"],helpText:"Parameters: mean (expected value), precision (1/variance). Note: BUGS uses precision instead of standard deviation."},{value:"dgamma",label:"Gamma (dgamma)",paramCount:2,paramNames:["shape","rate"],helpText:"Parameters: shape (alpha), rate (1/beta)."},{value:"dbeta",label:"Beta (dbeta)",paramCount:2,paramNames:["shape1","shape2"],helpText:"Parameters: shape1 (alpha), shape2 (beta)."},{value:"dbin",label:"Binomial (dbin)",paramCount:2,paramNames:["prob","size"],helpText:"Parameters: prob (success probability), size (number of trials)."},{value:"dpois",label:"Poisson (dpois)",paramCount:1,paramNames:["lambda"],helpText:"Parameter: lambda (expected number of occurrences)."},{value:"dt",label:"Student-t (dt)",paramCount:3,paramNames:["mu","tau","k"],helpText:"Parameters: mu (mean), tau (precision), k (degrees of freedom)."},{value:"dunif",label:"Uniform (dunif)",paramCount:2,paramNames:["lower","upper"],helpText:"Parameters: lower (minimum value), upper (maximum value)."}],id=[{nodeType:"stochastic",label:"Stochastic",icon:"~",description:"Random variable with a distribution",styleClass:"stochastic",properties:[{key:"name",label:"Name",type:"text",defaultValue:"stochastic.node"},{key:"distribution",label:"Distribution (~)",type:"select",defaultValue:"dnorm",options:Jb},{key:"observed",label:"Observed",type:"checkbox",defaultValue:!1,helpText:"If checked, this node's value is provided in the data section."},{key:"indices",label:"Indices",type:"text",placeholder:"e.g., i,j or 1:N",defaultValue:""}],parameters:[{key:"param1",label:"Parameter 1",type:"text",defaultValue:""},{key:"param2",label:"Parameter 2",type:"text",defaultValue:""},{key:"param3",label:"Parameter 3",type:"text",defaultValue:""}]},{nodeType:"deterministic",label:"Deterministic",icon:"<-",description:"Logical function of parents",styleClass:"deterministic",properties:[{key:"name",label:"Name",type:"text",defaultValue:"logical.node"},{key:"equation",label:"Equation (<-)",type:"text",placeholder:"e.g., a + b * x",defaultValue:""},{key:"indices",label:"Indices",type:"text",placeholder:"e.g., i,j",defaultValue:""}]},{nodeType:"constant",label:"Constant",icon:"C",description:"A fixed value or data input",styleClass:"constant",properties:[{key:"name",label:"Name",type:"text",defaultValue:"constant.node"},{key:"indices",label:"Indices",type:"text",placeholder:"e.g., i,j",defaultValue:""}]},{nodeType:"observed",label:"Observed",icon:"O",description:"A data node with a fixed value",styleClass:"observed",properties:[{key:"name",label:"Name",type:"text",defaultValue:"observed.node"},{key:"distribution",label:"Distribution (~)",type:"select",defaultValue:"dnorm",options:Jb},{key:"observed",label:"Observed",type:"checkbox",defaultValue:!0},{key:"indices",label:"Indices",type:"text",placeholder:"e.g., i,j or 1:N",defaultValue:""}],parameters:[{key:"param1",label:"Parameter 1",type:"text",defaultValue:""},{key:"param2",label:"Parameter 2",type:"text",defaultValue:""},{key:"param3",label:"Parameter 3",type:"text",defaultValue:""}]},{nodeType:"plate",label:"Plate",icon:"[]",description:"Represents a loop structure",styleClass:"plate",properties:[{key:"name",label:"Name",type:"text",defaultValue:"Plate"},{key:"loopVariable",label:"Loop Variable",type:"text",placeholder:"e.g., i",defaultValue:"i"},{key:"loopRange",label:"Loop Range",type:"text",placeholder:"e.g., 1:N",defaultValue:"1:N"}]}],V4=[{label:"Add Edge",type:"add-edge",styleClass:"connection",description:"Connect two nodes"}],W4=[{name:"Rats Model",key:"rats"}],e1=t=>id.find(e=>e.nodeType===t),LO=t=>Jb.find(e=>e.value===t),$4=t=>{const e=e1(t);if(!e)return{};const r={};return e.properties.forEach(n=>{r[n.key]=n.defaultValue}),e.parameters&&e.parameters.forEach(n=>{r[n.key]=n.defaultValue}),r},Y4={class:"canvas-toolbar"},X4={key:0,class:"node-type-selector"},K4=["value"],j4=["value"],Z4={key:1,class:"connecting-message"},Q4=Dr({__name:"CanvasToolbar",props:{currentMode:{},currentNodeType:{},isConnecting:{type:Boolean},sourceNodeName:{}},emits:["update:currentMode","update:currentNodeType"],setup(t,{emit:e}){const r=e,n=Ft(()=>id.map(o=>({label:o.label,value:o.nodeType}))),a=o=>{r("update:currentMode",o)},i=o=>{const s=o.target;r("update:currentNodeType",s.value)};return(o,s)=>(Je(),ot("div",Y4,[at(Wt,{class:jt({active:o.currentMode==="select"}),onClick:s[0]||(s[0]=u=>a("select"))},{default:ft(()=>s[3]||(s[3]=[xt(" Select ")])),_:1,__:[3]},8,["class"]),at(Wt,{class:jt({active:o.currentMode==="add-node"}),onClick:s[1]||(s[1]=u=>a("add-node"))},{default:ft(()=>s[4]||(s[4]=[xt(" Add Node ")])),_:1,__:[4]},8,["class"]),at(Wt,{class:jt({active:o.currentMode==="add-edge"}),onClick:s[2]||(s[2]=u=>a("add-edge"))},{default:ft(()=>s[5]||(s[5]=[xt(" Add Edge ")])),_:1,__:[5]},8,["class"]),o.currentMode==="add-node"?(Je(),ot("div",X4,[s[6]||(s[6]=Me("label",{for:"node-type"},"Node Type:",-1)),Me("select",{id:"node-type",value:o.currentNodeType,onChange:i},[(Je(!0),ot(Yt,null,Bn(n.value,u=>(Je(),ot("option",{key:u.value,value:u.value},Kt(u.label),9,j4))),128))],40,K4)])):fr("",!0),o.isConnecting?(Je(),ot("span",Z4,[s[7]||(s[7]=xt(" Connecting from: ")),Me("strong",null,Kt(o.sourceNodeName),1),s[8]||(s[8]=xt(" (Click target node) "))])):fr("",!0)]))}}),J4=Kr(Q4,[["__scopeId","data-v-e6df3305"]]),yf=`{
  "data": {},
  "inits": {}
}`,od=Cc("data",()=>{const t=Ro(),e=bt(new Map),r=Ft({get:()=>{const s=t.currentGraphId;if(s&&e.value.has(s))return e.value.get(s);if(s){const u=localStorage.getItem(`doodlebugs-data-${s}`);return u?(e.value.set(s,u),u):(e.value.set(s,yf),yf)}return yf},set:s=>{const u=t.currentGraphId;u&&a(u,s)}}),n=Ft(()=>{try{const s=JSON.parse(r.value);return{data:s.data||{},inits:s.inits||{}}}catch{return{data:{},inits:{}}}}),a=(s,u)=>{e.value.set(s,u),localStorage.setItem(`doodlebugs-data-${s}`,u)};return{currentGraphDataString:r,parsedGraphData:n,createNewGraphData:s=>{a(s,yf)},deleteGraphData:s=>{e.value.delete(s),localStorage.removeItem(`doodlebugs-data-${s}`)}}}),Ro=Cc("graph",()=>{const t=od(),e=bt(new Map),r=bt(localStorage.getItem("doodlebugs-currentGraphId")||null);cr(r,c=>{c?localStorage.setItem("doodlebugs-currentGraphId",c):localStorage.removeItem("doodlebugs-currentGraphId")});const n=Ft(()=>r.value&&e.value.has(r.value)?e.value.get(r.value).elements:[]),a=c=>{r.value=c,c&&!e.value.has(c)&&f(c)},i=c=>{const h={graphId:c,elements:[]};e.value.set(c,h),u(c,h),t.createNewGraphData(c)},o=(c,h)=>{if(e.value.has(c)){const g=e.value.get(c);g.elements=h,u(c,g)}},s=c=>{e.value.delete(c),localStorage.removeItem(`doodlebugs-graph-${c}`),t.deleteGraphData(c),r.value===c&&a(null)},u=(c,h)=>{localStorage.setItem(`doodlebugs-graph-${c}`,JSON.stringify(h))},f=c=>{const h=localStorage.getItem(`doodlebugs-graph-${c}`);if(h){const g=JSON.parse(h);return e.value.set(c,g),g}return null};return{graphContents:e,currentGraphId:r,currentGraphElements:n,selectGraph:a,createNewGraphContent:i,updateGraphElements:o,deleteGraphContent:s,saveGraph:u,loadGraph:f}});function lw(){const t=Ro(),e=bt(null),r=Ft({get:()=>t.currentGraphElements,set:o=>{t.currentGraphId&&t.updateGraphElements(t.currentGraphId,o)}}),n=o=>{r.value=[...r.value,o],e.value=o},a=o=>{var s;r.value=r.value.map(u=>u.id===o.id?o:u),((s=e.value)==null?void 0:s.id)===o.id&&(e.value=o)},i=(o,s=new Set)=>{if(s.has(o))return;s.add(o);const u=r.value.find(g=>g.id===o);if(!u)return;const f=u.type==="node"?u.parent:void 0,c=new Set([o]);if(u.type==="node"&&u.nodeType==="plate"){const g=y=>{r.value.forEach(p=>{p.type==="node"&&p.parent===y&&(c.add(p.id),p.nodeType==="plate"&&g(p.id))})};g(o)}const h=new Set;if(c.forEach(g=>{const y=r.value.find(p=>p.id===g);(y==null?void 0:y.type)==="node"&&h.add(g)}),r.value.forEach(g=>{g.type==="edge"&&(h.has(g.source)||h.has(g.target))&&c.add(g.id)}),r.value=r.value.filter(g=>!c.has(g.id)),e.value&&c.has(e.value.id)&&(e.value=null),f){const g=r.value.find(y=>y.id===f);g&&g.type==="node"&&g.nodeType==="plate"&&(r.value.some(p=>p.type==="node"&&p.parent===f)||i(f,s))}};return{elements:r,selectedElement:e,addElement:n,updateElement:a,deleteElement:i}}const e9={class:"graph-editor-container"},t9=1e3,r9=Dr({__name:"GraphEditor",props:{isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},currentNodeType:{},elements:{},validationErrors:{}},emits:["element-selected","update:currentMode","update:currentNodeType"],setup(t,{emit:e}){const r=t,n=e,{elements:a,addElement:i,updateElement:o,deleteElement:s}=lw(),{getCyInstance:u}=sw(),f=bt(null),c=bt(!1),h=["alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega"],g=()=>{const T=new Set(a.value.filter(M=>M.type==="node").map(M=>M.name));for(const M of h)if(!T.has(M))return M;let A=1;for(;A<t9;){const M=`var${A}`;if(!T.has(M))return M;A++}return`node_${Date.now()}`},y=(T,A,M)=>{const D=$4(T),_=`node_${crypto.randomUUID().substring(0,8)}`,k=T==="plate"?"Plate":g(),F={...D,id:_,type:"node",nodeType:T,position:A,parent:M,name:k};return(F.nodeType==="stochastic"||F.nodeType==="observed")&&(F.distribution==="dnorm"&&(F.param1="0.0",F.param2="1.0"),F.distribution==="dgamma"&&(F.param1="0.001",F.param2="0.001")),F},p=(T,A)=>{const M=y("plate",T,A),D=y("stochastic",{x:T.x,y:T.y},M.id);return a.value=[...a.value,M,D],M},C=T=>{var B,q;const{position:A,target:M}=T,D=u();if(!D)return;const _=M===D,k=!_&&M.isNode()&&M.data("nodeType")==="plate",F=!_&&M.isNode(),G=!_&&M.isEdge();switch(r.currentMode){case"add-node":if(_||k)if(r.currentNodeType==="plate"){if(k){alert("Nesting plates is not currently supported.");return}const R=p(A,k?M.id():void 0);n("element-selected",R),n("update:currentMode","select")}else{const R=y(r.currentNodeType,A,k?M.id():void 0);i(R),n("element-selected",R),n("update:currentMode","select")}break;case"add-edge":if(F){const R=M;if(f.value&&f.value.id()!==R.id()){const P={id:`edge_${crypto.randomUUID().substring(0,8)}`,type:"edge",source:f.value.id(),target:R.id(),name:""};i(P),(B=f.value)==null||B.removeClass("cy-connecting"),f.value=null,c.value=!1,n("update:currentMode","select"),n("element-selected",P)}else f.value||(f.value=R,f.value.addClass("cy-connecting"),c.value=!0,n("element-selected",f.value.data()))}else _&&((q=f.value)==null||q.removeClass("cy-connecting"),f.value=null,c.value=!1,n("element-selected",null));break;default:F||G?n("element-selected",M.data()):_&&n("element-selected",null);break}},E=T=>{const A=a.value.find(M=>M.id===T.nodeId);if(A){const M={...A,position:T.position,parent:T.parentId};o(M)}},v=T=>{const{nodeType:A,position:M}=T,D=u();let _;if(A==="plate"){if(D){const G=D.nodes('[nodeType="plate"]');for(const B of G){const q=B.boundingBox();if(M.x>q.x1&&M.x<q.x2&&M.y>q.y1&&M.y<q.y2){alert("Nesting plates is not currently supported.");return}}}const F=p(M);n("element-selected",F),n("update:currentMode","select");return}if(D){const F=D.nodes('[nodeType="plate"]');for(const G of F){const B=G.boundingBox();if(M.x>B.x1&&M.x<B.x2&&M.y>B.y1&&M.y<B.y2){_=G.id();break}}}const k=y(A,M,_);i(k),n("element-selected",k),n("update:currentMode","select")},x=T=>{s(T)},w=T=>{s(T)};return cr(()=>r.currentMode,T=>{var A;T!=="add-edge"&&((A=f.value)==null||A.removeClass("cy-connecting"),f.value=null,c.value=!1)}),(T,A)=>{var M;return Je(),ot("div",e9,[at(J4,{"current-mode":r.currentMode,"current-node-type":r.currentNodeType,"onUpdate:currentMode":A[0]||(A[0]=D=>n("update:currentMode",D)),"onUpdate:currentNodeType":A[1]||(A[1]=D=>n("update:currentNodeType",D)),"is-connecting":c.value,"source-node-name":(M=f.value)==null?void 0:M.data("name")},null,8,["current-mode","current-node-type","is-connecting","source-node-name"]),at(G4,{elements:r.elements,"is-grid-enabled":T.isGridEnabled,"grid-size":T.gridSize,"current-mode":r.currentMode,"validation-errors":r.validationErrors,onCanvasTap:C,onNodeMoved:E,onNodeDropped:v,onPlateEmptied:x,onElementRemove:w},null,8,["elements","is-grid-enabled","grid-size","current-mode","validation-errors"])])}}}),n9=Kr(r9,[["__scopeId","data-v-4e827e3f"]]),DO=Cc("project",()=>{const t=bt([]),e=bt(localStorage.getItem("doodlebugs-currentProjectId")||null),r=Ro(),n=p=>{const C={id:`project_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,name:p,createdAt:Date.now(),lastModified:Date.now(),graphs:[]};t.value.push(C),g(),i(C.id)},a=(p,C)=>{const E=t.value.find(v=>v.id===p);E&&C.trim()&&(E.name=C.trim(),E.lastModified=Date.now(),g())},i=p=>{e.value=p,p?localStorage.setItem("doodlebugs-currentProjectId",p):localStorage.removeItem("doodlebugs-currentProjectId")},o=p=>{const C=t.value.find(E=>E.id===p);C&&(C.graphs.forEach(E=>{r.deleteGraphContent(E.id)}),t.value=t.value.filter(E=>E.id!==p),e.value===p&&i(null),g())},s=Ft(()=>t.value.find(p=>p.id===e.value)||null),u=(p,C)=>{const E=t.value.find(v=>v.id===p);if(E){const v={id:`graph_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,name:C,createdAt:Date.now(),lastModified:Date.now()};return E.graphs.push(v),E.lastModified=Date.now(),g(),r.createNewGraphContent(v.id),r.selectGraph(v.id),v}},f=(p,C,E)=>{const v=t.value.find(x=>x.id===p);if(v&&E.trim()){const x=v.graphs.find(w=>w.id===C);x&&(x.name=E.trim(),x.lastModified=Date.now(),v.lastModified=Date.now(),g())}},c=(p,C)=>{const E=t.value.find(v=>v.id===p);E&&(E.graphs=E.graphs.filter(v=>v.id!==C),E.lastModified=Date.now(),g(),r.deleteGraphContent(C))},h=p=>{var C;return((C=t.value.find(E=>E.id===p))==null?void 0:C.graphs)||[]},g=()=>{localStorage.setItem("doodlebugs-projects",JSON.stringify(t.value))};return{projects:t,currentProjectId:e,currentProject:s,createProject:n,renameProject:a,selectProject:i,deleteProject:o,addGraphToProject:u,renameGraphInProject:f,deleteGraphFromProject:c,getGraphsForProject:h,loadProjects:()=>{const p=localStorage.getItem("doodlebugs-projects");p&&(t.value=JSON.parse(p)),e.value&&!t.value.some(C=>C.id===e.value)&&i(null)}}}),a9={class:"modal-content",role:"dialog","aria-modal":"true"},i9={key:0,class:"modal-header"},o9={key:1,class:"modal-body"},s9={key:2,class:"modal-footer"},Oi=Dr({__name:"BaseModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const r=e,n=a=>{a.key==="Escape"&&r("close")};return Da(()=>{document.addEventListener("keydown",n)}),_a(()=>{document.removeEventListener("keydown",n)}),(a,i)=>(Je(),fa(y1,{name:"modal-fade"},{default:ft(()=>[a.isOpen?(Je(),ot("div",{key:0,class:"modal-overlay",onClick:i[0]||(i[0]=Ur(o=>r("close"),["self"]))},[Me("div",a9,[a.$slots.header?(Je(),ot("header",i9,[ys(a.$slots,"header")])):fr("",!0),a.$slots.body?(Je(),ot("section",o9,[ys(a.$slots,"body")])):fr("",!0),a.$slots.footer?(Je(),ot("footer",s9,[ys(a.$slots,"footer")])):fr("",!0)])])):fr("",!0)]),_:3}))}}),l9=["type","value","placeholder","disabled","readonly"],u9=Dr({__name:"BaseInput",props:{modelValue:{},type:{},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean}},emits:["update:modelValue","change","input","keyup.enter"],setup(t,{emit:e}){const r=t,n=e,a=Ft(()=>r.type||"text"),i=u=>{const f=u.target;n("update:modelValue",f.value),n("input",u)},o=u=>{n("change",u)},s=u=>{u.key==="Enter"&&n("keyup.enter",u)};return(u,f)=>(Je(),ot("input",{type:a.value,value:u.modelValue??"",placeholder:u.placeholder,disabled:u.disabled,readonly:u.readonly,onInput:i,onChange:o,onKeyup:s,class:"base-input"},null,40,l9))}}),Yn=Kr(u9,[["__scopeId","data-v-6905db26"]]),f9={class:"project-manager"},c9={class:"header"},d9={key:0,class:"empty-state"},h9={key:1,class:"project-list"},v9=["onClick"],p9={class:"project-name"},g9=["onClick"],y9={key:0,class:"graph-list"},m9=["onClick"],b9=["onClick"],w9={key:0,class:"empty-state-inner"},x9={key:0},E9={key:0},C9=Dr({__name:"ProjectManager",emits:["newProject","newGraph"],setup(t,{emit:e}){const r=DO(),n=Ro(),a=bt(!1),i=bt(null),o=bt(!1),s=bt(null),u=bt(""),f=bt(null),c=bt(null),h=Ft(()=>r.currentProject),g=Ft(()=>h.value?r.getGraphsForProject(h.value.id):[]),y=D=>{c.value&&!c.value.contains(D.target)&&(f.value=null)};Da(()=>{r.loadProjects(),r.projects.length>0&&!r.currentProjectId&&r.selectProject(r.projects[0].id),document.addEventListener("click",y)}),_a(()=>{document.removeEventListener("click",y)});const p=D=>{n.selectGraph(D)},C=async(D,_,k)=>{D.stopPropagation(),D.preventDefault(),f.value=null,await Kn(),f.value={type:_,id:k,x:D.clientX,y:D.clientY}},E=(D,_,k,F)=>{i.value={type:D,id:_,name:k,projectId:F},a.value=!0,f.value=null},v=()=>{i.value&&(i.value.type==="project"?r.deleteProject(i.value.id):i.value.type==="graph"&&i.value.projectId&&(r.deleteGraphFromProject(i.value.projectId,i.value.id),n.currentGraphId===i.value.id&&n.selectGraph(null)),a.value=!1,i.value=null)},x=(D,_,k,F)=>{s.value={type:D,id:_,name:k,projectId:F},u.value=k,o.value=!0,f.value=null},w=()=>{s.value&&u.value.trim()&&(s.value.type==="project"?r.renameProject(s.value.id,u.value):s.value.type==="graph"&&s.value.projectId&&r.renameGraphInProject(s.value.projectId,s.value.id,u.value)),o.value=!1,s.value=null,u.value=""},T=e,A=()=>{T("newProject"),f.value=null},M=()=>{T("newGraph"),f.value=null};return(D,_)=>(Je(),ot("div",f9,[Me("div",c9,[_[10]||(_[10]=Me("h4",null,"Projects",-1)),at(Wt,{onClick:A,type:"primary",size:"small",class:"add-project-btn",title:"New Project"},{default:ft(()=>_[9]||(_[9]=[Me("i",{class:"fas fa-plus"},null,-1)])),_:1,__:[9]})]),Nt(r).projects.length===0?(Je(),ot("div",d9,[_[12]||(_[12]=Me("p",null,"No projects yet.",-1)),at(Wt,{onClick:A,type:"primary"},{default:ft(()=>_[11]||(_[11]=[xt("Create New Project")])),_:1,__:[11]})])):(Je(),ot("div",h9,[(Je(!0),ot(Yt,null,Bn(Nt(r).projects,k=>(Je(),ot("div",{key:k.id,class:"project-item"},[Me("div",{class:jt(["project-header",{active:Nt(r).currentProjectId===k.id}]),onClick:F=>Nt(r).selectProject(k.id)},[Me("i",{class:jt(["icon-chevron fas fa-chevron-right",{open:Nt(r).currentProjectId===k.id}])},null,2),_[14]||(_[14]=Me("i",{class:"icon-folder fas fa-folder"},null,-1)),Me("span",p9,Kt(k.name),1),Me("button",{onClick:F=>C(F,"project",k.id),class:"context-menu-btn"},_[13]||(_[13]=[Me("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,g9)],10,v9),at(y1,{name:"slide-fade"},{default:ft(()=>{var F;return[((F=Nt(r).currentProject)==null?void 0:F.id)===k.id?(Je(),ot("div",y9,[(Je(!0),ot(Yt,null,Bn(g.value,G=>(Je(),ot("div",{key:G.id,class:jt(["graph-item",{active:Nt(n).currentGraphId===G.id}]),onClick:B=>p(G.id)},[_[16]||(_[16]=Me("i",{class:"icon-file fas fa-file-alt"},null,-1)),Me("span",null,Kt(G.name),1),Me("button",{onClick:B=>C(B,"graph",G.id),class:"context-menu-btn"},_[15]||(_[15]=[Me("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,b9)],10,m9))),128)),g.value.length===0?(Je(),ot("div",w9,[_[18]||(_[18]=Me("p",null,"No graphs in this project.",-1)),at(Wt,{onClick:M,type:"secondary",size:"small"},{default:ft(()=>_[17]||(_[17]=[xt("Create New Graph")])),_:1,__:[17]})])):fr("",!0)])):fr("",!0)]}),_:2},1024)]))),128))])),f.value?(Je(),ot("div",{key:2,ref_key:"contextMenuRef",ref:c,class:"context-menu",style:Ci({top:`${f.value.y}px`,left:`${f.value.x}px`})},[f.value.type==="project"?(Je(),ot(Yt,{key:0},[Me("div",{class:"context-menu-item",onClick:M},_[19]||(_[19]=[Me("i",{class:"fas fa-plus"},null,-1),xt(" New Graph")])),Me("div",{class:"context-menu-item",onClick:_[0]||(_[0]=k=>x("project",f.value.id,Nt(r).projects.find(F=>F.id===f.value.id).name))},_[20]||(_[20]=[Me("i",{class:"fas fa-edit"},null,-1),xt(" Rename")])),Me("div",{class:"context-menu-item danger",onClick:_[1]||(_[1]=k=>E("project",f.value.id,Nt(r).projects.find(F=>F.id===f.value.id).name))},_[21]||(_[21]=[Me("i",{class:"fas fa-trash-alt"},null,-1),xt(" Delete Project")]))],64)):fr("",!0),f.value.type==="graph"?(Je(),ot(Yt,{key:1},[Me("div",{class:"context-menu-item",onClick:_[2]||(_[2]=k=>x("graph",f.value.id,g.value.find(F=>F.id===f.value.id).name,h.value.id))},_[22]||(_[22]=[Me("i",{class:"fas fa-edit"},null,-1),xt(" Rename")])),Me("div",{class:"context-menu-item danger",onClick:_[3]||(_[3]=k=>E("graph",f.value.id,g.value.find(F=>F.id===f.value.id).name,h.value.id))},_[23]||(_[23]=[Me("i",{class:"fas fa-trash-alt"},null,-1),xt(" Delete Graph")]))],64)):fr("",!0)],4)):fr("",!0),at(Oi,{"is-open":a.value,onClose:_[5]||(_[5]=k=>a.value=!1)},{header:ft(()=>_[24]||(_[24]=[Me("h3",null,"Confirm Deletion",-1)])),body:ft(()=>[i.value?(Je(),ot("p",x9,[xt(" Are you sure you want to delete the "+Kt(i.value.type)+" ",1),Me("strong",null,'"'+Kt(i.value.name)+'"',1),_[25]||(_[25]=xt("? ")),i.value.type==="project"?(Je(),ot("span",E9,"This will also delete all of its graphs.")):fr("",!0),_[26]||(_[26]=xt(" This action cannot be undone. "))])):fr("",!0)]),footer:ft(()=>[at(Wt,{onClick:_[4]||(_[4]=k=>a.value=!1),type:"secondary"},{default:ft(()=>_[27]||(_[27]=[xt("Cancel")])),_:1,__:[27]}),at(Wt,{onClick:v,type:"danger"},{default:ft(()=>_[28]||(_[28]=[xt("Delete")])),_:1,__:[28]})]),_:1},8,["is-open"]),at(Oi,{"is-open":o.value,onClose:_[8]||(_[8]=k=>o.value=!1)},{header:ft(()=>{var k;return[Me("h3",null,"Rename "+Kt((k=s.value)==null?void 0:k.type),1)]}),body:ft(()=>{var k;return[_[29]||(_[29]=Me("label",{for:"new-item-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"New Name:",-1)),at(Yn,{id:"new-item-name",modelValue:u.value,"onUpdate:modelValue":_[6]||(_[6]=F=>u.value=F),placeholder:`Enter new ${(k=s.value)==null?void 0:k.type} name`,onKeyup:_b(w,["enter"])},null,8,["modelValue","placeholder"])]}),footer:ft(()=>[at(Wt,{onClick:_[7]||(_[7]=k=>o.value=!1),type:"secondary"},{default:ft(()=>_[30]||(_[30]=[xt("Cancel")])),_:1,__:[30]}),at(Wt,{onClick:w,type:"primary"},{default:ft(()=>_[31]||(_[31]=[xt("Rename")])),_:1,__:[31]})]),_:1},8,["is-open"])]))}}),T9=Kr(C9,[["__scopeId","data-v-0240cdfe"]]),S9={class:"node-palette"},A9={class:"palette-section"},L9={class:"palette-grid"},D9=["onDragstart","onClick","title"],_9={class:"card-label"},M9={class:"palette-section"},R9={class:"palette-grid"},P9=["onClick","title"],k9={class:"card-label"},N9=Dr({__name:"NodePalette",emits:["select-palette-item"],setup(t,{emit:e}){const r=e,n=(i,o)=>{i.dataTransfer&&(i.dataTransfer.setData("text/plain",o),i.dataTransfer.effectAllowed="copy")},a=i=>{r("select-palette-item",i)};return(i,o)=>(Je(),ot("div",S9,[Me("div",A9,[o[0]||(o[0]=Me("h5",{class:"section-title"},"Nodes",-1)),Me("div",L9,[(Je(!0),ot(Yt,null,Bn(Nt(id),s=>(Je(),ot("div",{key:s.nodeType,class:jt(["palette-card",s.styleClass]),draggable:"true",onDragstart:u=>n(u,s.nodeType),onClick:u=>a(s.nodeType),title:s.description},[Me("div",{class:jt(["card-icon",`icon-${s.nodeType}`])},Kt(s.icon),3),Me("span",_9,Kt(s.label),1)],42,D9))),128))])]),Me("div",M9,[o[2]||(o[2]=Me("h5",{class:"section-title"},"Connections",-1)),Me("div",R9,[(Je(!0),ot(Yt,null,Bn(Nt(V4),s=>(Je(),ot("div",{key:s.type,class:jt(["palette-card",s.styleClass]),draggable:"false",onClick:u=>a(s.type),title:s.description},[o[1]||(o[1]=Me("div",{class:"card-icon connection-icon"},null,-1)),Me("span",k9,Kt(s.label),1)],10,P9))),128))])])]))}}),O9=Kr(N9,[["__scopeId","data-v-655da713"]]);var aR={exports:{}},Ff={exports:{}},I9=Ff.exports,iR;function Ui(){return iR||(iR=1,function(t,e){(function(r,n){t.exports=n()})(I9,function(){var r=navigator.userAgent,n=navigator.platform,a=/gecko\/\d/i.test(r),i=/MSIE \d/.test(r),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),s=/Edge\/(\d+)/.exec(r),u=i||o||s,f=u&&(i?document.documentMode||6:+(s||o)[1]),c=!s&&/WebKit\//.test(r),h=c&&/Qt\/\d+\.\d+/.test(r),g=!s&&/Chrome\/(\d+)/.exec(r),y=g&&+g[1],p=/Opera\//.test(r),C=/Apple Computer/.test(navigator.vendor),E=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),v=/PhantomJS/.test(r),x=C&&(/Mobile\/\w+/.test(r)||navigator.maxTouchPoints>2),w=/Android/.test(r),T=x||w||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),A=x||/Mac/.test(n),M=/\bCrOS\b/.test(r),D=/win/i.test(n),_=p&&r.match(/Version\/(\d*\.\d*)/);_&&(_=Number(_[1])),_&&_>=15&&(p=!1,c=!0);var k=A&&(h||p&&(_==null||_<12.11)),F=a||u&&f>=9;function G(l){return new RegExp("(^|\\s)"+l+"(?:$|\\s)\\s*")}var B=function(l,d){var b=l.className,m=G(d).exec(b);if(m){var S=b.slice(m.index+m[0].length);l.className=b.slice(0,m.index)+(S?m[1]+S:"")}};function q(l){for(var d=l.childNodes.length;d>0;--d)l.removeChild(l.firstChild);return l}function R(l,d){return q(l).appendChild(d)}function P(l,d,b,m){var S=document.createElement(l);if(b&&(S.className=b),m&&(S.style.cssText=m),typeof d=="string")S.appendChild(document.createTextNode(d));else if(d)for(var L=0;L<d.length;++L)S.appendChild(d[L]);return S}function N(l,d,b,m){var S=P(l,d,b,m);return S.setAttribute("role","presentation"),S}var I;document.createRange?I=function(l,d,b,m){var S=document.createRange();return S.setEnd(m||l,b),S.setStart(l,d),S}:I=function(l,d,b){var m=document.body.createTextRange();try{m.moveToElementText(l.parentNode)}catch{return m}return m.collapse(!0),m.moveEnd("character",b),m.moveStart("character",d),m};function z(l,d){if(d.nodeType==3&&(d=d.parentNode),l.contains)return l.contains(d);do if(d.nodeType==11&&(d=d.host),d==l)return!0;while(d=d.parentNode)}function ae(l){var d=l.ownerDocument||l,b;try{b=l.activeElement}catch{b=d.body||null}for(;b&&b.shadowRoot&&b.shadowRoot.activeElement;)b=b.shadowRoot.activeElement;return b}function re(l,d){var b=l.className;G(d).test(b)||(l.className+=(b?" ":"")+d)}function K(l,d){for(var b=l.split(" "),m=0;m<b.length;m++)b[m]&&!G(b[m]).test(d)&&(d+=" "+b[m]);return d}var V=function(l){l.select()};x?V=function(l){l.selectionStart=0,l.selectionEnd=l.value.length}:u&&(V=function(l){try{l.select()}catch{}});function Z(l){return l.display.wrapper.ownerDocument}function U(l){return W(l.display.wrapper)}function W(l){return l.getRootNode?l.getRootNode():l.ownerDocument}function X(l){return Z(l).defaultView}function ee(l){var d=Array.prototype.slice.call(arguments,1);return function(){return l.apply(null,d)}}function oe(l,d,b){d||(d={});for(var m in l)l.hasOwnProperty(m)&&(b!==!1||!d.hasOwnProperty(m))&&(d[m]=l[m]);return d}function te(l,d,b,m,S){d==null&&(d=l.search(/[^\s\u00a0]/),d==-1&&(d=l.length));for(var L=m||0,O=S||0;;){var H=l.indexOf("	",L);if(H<0||H>=d)return O+(d-L);O+=H-L,O+=b-O%b,L=H+1}}var ie=function(){this.id=null,this.f=null,this.time=0,this.handler=ee(this.onTimeout,this)};ie.prototype.onTimeout=function(l){l.id=0,l.time<=+new Date?l.f():setTimeout(l.handler,l.time-+new Date)},ie.prototype.set=function(l,d){this.f=d;var b=+new Date+l;(!this.id||b<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,l),this.time=b)};function se(l,d){for(var b=0;b<l.length;++b)if(l[b]==d)return b;return-1}var $=50,ne={toString:function(){return"CodeMirror.Pass"}},le={scroll:!1},Se={origin:"*mouse"},De={origin:"+move"};function be(l,d,b){for(var m=0,S=0;;){var L=l.indexOf("	",m);L==-1&&(L=l.length);var O=L-m;if(L==l.length||S+O>=d)return m+Math.min(O,d-S);if(S+=L-m,S+=b-S%b,m=L+1,S>=d)return m}}var Te=[""];function pe(l){for(;Te.length<=l;)Te.push(de(Te)+" ");return Te[l]}function de(l){return l[l.length-1]}function ye(l,d){for(var b=[],m=0;m<l.length;m++)b[m]=d(l[m],m);return b}function Ee(l,d,b){for(var m=0,S=b(d);m<l.length&&b(l[m])<=S;)m++;l.splice(m,0,d)}function ue(){}function Ae(l,d){var b;return Object.create?b=Object.create(l):(ue.prototype=l,b=new ue),d&&oe(d,b),b}var Pe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Fe(l){return/\w/.test(l)||l>""&&(l.toUpperCase()!=l.toLowerCase()||Pe.test(l))}function Ye(l,d){return d?d.source.indexOf("\\w")>-1&&Fe(l)?!0:d.test(l):Fe(l)}function Ve(l){for(var d in l)if(l.hasOwnProperty(d)&&l[d])return!1;return!0}var Qe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Xe(l){return l.charCodeAt(0)>=768&&Qe.test(l)}function We(l,d,b){for(;(b<0?d>0:d<l.length)&&Xe(l.charAt(d));)d+=b;return d}function he(l,d,b){for(var m=d>b?-1:1;;){if(d==b)return d;var S=(d+b)/2,L=m<0?Math.ceil(S):Math.floor(S);if(L==d)return l(L)?d:b;l(L)?b=L:d=L+m}}function j(l,d,b,m){if(!l)return m(d,b,"ltr",0);for(var S=!1,L=0;L<l.length;++L){var O=l[L];(O.from<b&&O.to>d||d==b&&O.to==d)&&(m(Math.max(O.from,d),Math.min(O.to,b),O.level==1?"rtl":"ltr",L),S=!0)}S||m(d,b,"ltr")}var ve=null;function me(l,d,b){var m;ve=null;for(var S=0;S<l.length;++S){var L=l[S];if(L.from<d&&L.to>d)return S;L.to==d&&(L.from!=L.to&&b=="before"?m=S:ve=S),L.from==d&&(L.from!=L.to&&b!="before"?m=S:ve=S)}return m??ve}var we=function(){var l="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function b(J){return J<=247?l.charAt(J):1424<=J&&J<=1524?"R":1536<=J&&J<=1785?d.charAt(J-1536):1774<=J&&J<=2220?"r":8192<=J&&J<=8203?"w":J==8204?"b":"L"}var m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,S=/[stwN]/,L=/[LRr]/,O=/[Lb1n]/,H=/[1n]/;function Y(J,ce,ge){this.level=J,this.from=ce,this.to=ge}return function(J,ce){var ge=ce=="ltr"?"L":"R";if(J.length==0||ce=="ltr"&&!m.test(J))return!1;for(var _e=J.length,Le=[],Ne=0;Ne<_e;++Ne)Le.push(b(J.charCodeAt(Ne)));for(var Be=0,Ke=ge;Be<_e;++Be){var tt=Le[Be];tt=="m"?Le[Be]=Ke:Ke=tt}for(var lt=0,rt=ge;lt<_e;++lt){var ut=Le[lt];ut=="1"&&rt=="r"?Le[lt]="n":L.test(ut)&&(rt=ut,ut=="r"&&(Le[lt]="R"))}for(var yt=1,pt=Le[0];yt<_e-1;++yt){var At=Le[yt];At=="+"&&pt=="1"&&Le[yt+1]=="1"?Le[yt]="1":At==","&&pt==Le[yt+1]&&(pt=="1"||pt=="n")&&(Le[yt]=pt),pt=At}for(var Jt=0;Jt<_e;++Jt){var Nr=Le[Jt];if(Nr==",")Le[Jt]="N";else if(Nr=="%"){var vr=void 0;for(vr=Jt+1;vr<_e&&Le[vr]=="%";++vr);for(var _n=Jt&&Le[Jt-1]=="!"||vr<_e&&Le[vr]=="1"?"1":"N",wn=Jt;wn<vr;++wn)Le[wn]=_n;Jt=vr-1}}for(var Er=0,xn=ge;Er<_e;++Er){var Hr=Le[Er];xn=="L"&&Hr=="1"?Le[Er]="L":L.test(Hr)&&(xn=Hr)}for(var Ar=0;Ar<_e;++Ar)if(S.test(Le[Ar])){var Cr=void 0;for(Cr=Ar+1;Cr<_e&&S.test(Le[Cr]);++Cr);for(var gr=(Ar?Le[Ar-1]:ge)=="L",En=(Cr<_e?Le[Cr]:ge)=="L",jo=gr==En?gr?"L":"R":ge,hi=Ar;hi<Cr;++hi)Le[hi]=jo;Ar=Cr-1}for(var Qr=[],ya,Or=0;Or<_e;)if(O.test(Le[Or])){var Qd=Or;for(++Or;Or<_e&&O.test(Le[Or]);++Or);Qr.push(new Y(0,Qd,Or))}else{var qa=Or,Qi=Qr.length,Ji=ce=="rtl"?1:0;for(++Or;Or<_e&&Le[Or]!="L";++Or);for(var un=qa;un<Or;)if(H.test(Le[un])){qa<un&&(Qr.splice(Qi,0,new Y(1,qa,un)),Qi+=Ji);var Zo=un;for(++un;un<Or&&H.test(Le[un]);++un);Qr.splice(Qi,0,new Y(2,Zo,un)),Qi+=Ji,qa=un}else++un;qa<Or&&Qr.splice(Qi,0,new Y(1,qa,Or))}return ce=="ltr"&&(Qr[0].level==1&&(ya=J.match(/^\s+/))&&(Qr[0].from=ya[0].length,Qr.unshift(new Y(0,0,ya[0].length))),de(Qr).level==1&&(ya=J.match(/\s+$/))&&(de(Qr).to-=ya[0].length,Qr.push(new Y(0,_e-ya[0].length,_e)))),ce=="rtl"?Qr.reverse():Qr}}();function xe(l,d){var b=l.order;return b==null&&(b=l.order=we(l.text,d)),b}var qe=[],Ce=function(l,d,b){if(l.addEventListener)l.addEventListener(d,b,!1);else if(l.attachEvent)l.attachEvent("on"+d,b);else{var m=l._handlers||(l._handlers={});m[d]=(m[d]||qe).concat(b)}};function Oe(l,d){return l._handlers&&l._handlers[d]||qe}function Ie(l,d,b){if(l.removeEventListener)l.removeEventListener(d,b,!1);else if(l.detachEvent)l.detachEvent("on"+d,b);else{var m=l._handlers,S=m&&m[d];if(S){var L=se(S,b);L>-1&&(m[d]=S.slice(0,L).concat(S.slice(L+1)))}}}function He(l,d){var b=Oe(l,d);if(b.length)for(var m=Array.prototype.slice.call(arguments,2),S=0;S<b.length;++S)b[S].apply(null,m)}function Ue(l,d,b){return typeof d=="string"&&(d={type:d,preventDefault:function(){this.defaultPrevented=!0}}),He(l,b||d.type,l,d),nt(d)||d.codemirrorIgnore}function je(l){var d=l._handlers&&l._handlers.cursorActivity;if(d)for(var b=l.curOp.cursorActivityHandlers||(l.curOp.cursorActivityHandlers=[]),m=0;m<d.length;++m)se(b,d[m])==-1&&b.push(d[m])}function et(l,d){return Oe(l,d).length>0}function Ge(l){l.prototype.on=function(d,b){Ce(this,d,b)},l.prototype.off=function(d,b){Ie(this,d,b)}}function $e(l){l.preventDefault?l.preventDefault():l.returnValue=!1}function vt(l){l.stopPropagation?l.stopPropagation():l.cancelBubble=!0}function nt(l){return l.defaultPrevented!=null?l.defaultPrevented:l.returnValue==!1}function st(l){$e(l),vt(l)}function Tt(l){return l.target||l.srcElement}function dt(l){var d=l.which;return d==null&&(l.button&1?d=1:l.button&2?d=3:l.button&4&&(d=2)),A&&l.ctrlKey&&d==1&&(d=3),d}var gt=function(){if(u&&f<9)return!1;var l=P("div");return"draggable"in l||"dragDrop"in l}(),_t;function Mt(l){if(_t==null){var d=P("span","​");R(l,P("span",[d,document.createTextNode("x")])),l.firstChild.offsetHeight!=0&&(_t=d.offsetWidth<=1&&d.offsetHeight>2&&!(u&&f<8))}var b=_t?P("span","​"):P("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return b.setAttribute("cm-text",""),b}var Zt;function Lt(l){if(Zt!=null)return Zt;var d=R(l,document.createTextNode("AخA")),b=I(d,0,1).getBoundingClientRect(),m=I(d,1,2).getBoundingClientRect();return q(l),!b||b.left==b.right?!1:Zt=m.right-b.right<3}var Ht=`

b`.split(/\n/).length!=3?function(l){for(var d=0,b=[],m=l.length;d<=m;){var S=l.indexOf(`
`,d);S==-1&&(S=l.length);var L=l.slice(d,l.charAt(S-1)=="\r"?S-1:S),O=L.indexOf("\r");O!=-1?(b.push(L.slice(0,O)),d+=O+1):(b.push(L),d=S+1)}return b}:function(l){return l.split(/\r\n?|\n/)},Sr=window.getSelection?function(l){try{return l.selectionStart!=l.selectionEnd}catch{return!1}}:function(l){var d;try{d=l.ownerDocument.selection.createRange()}catch{}return!d||d.parentElement()!=l?!1:d.compareEndPoints("StartToEnd",d)!=0},on=function(){var l=P("div");return"oncopy"in l?!0:(l.setAttribute("oncopy","return;"),typeof l.oncopy=="function")}(),Rt=null;function rr(l){if(Rt!=null)return Rt;var d=R(l,P("span","x")),b=d.getBoundingClientRect(),m=I(d,0,1).getBoundingClientRect();return Rt=Math.abs(b.left-m.left)>1}var Qt={},hr={};function nr(l,d){arguments.length>2&&(d.dependencies=Array.prototype.slice.call(arguments,2)),Qt[l]=d}function jr(l,d){hr[l]=d}function gn(l){if(typeof l=="string"&&hr.hasOwnProperty(l))l=hr[l];else if(l&&typeof l.name=="string"&&hr.hasOwnProperty(l.name)){var d=hr[l.name];typeof d=="string"&&(d={name:d}),l=Ae(d,l),l.name=d.name}else{if(typeof l=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(l))return gn("application/xml");if(typeof l=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(l))return gn("application/json")}return typeof l=="string"?{name:l}:l||{name:"null"}}function Qn(l,d){d=gn(d);var b=Qt[d.name];if(!b)return Qn(l,"text/plain");var m=b(l,d);if(Ln.hasOwnProperty(d.name)){var S=Ln[d.name];for(var L in S)S.hasOwnProperty(L)&&(m.hasOwnProperty(L)&&(m["_"+L]=m[L]),m[L]=S[L])}if(m.name=d.name,d.helperType&&(m.helperType=d.helperType),d.modeProps)for(var O in d.modeProps)m[O]=d.modeProps[O];return m}var Ln={};function Jn(l,d){var b=Ln.hasOwnProperty(l)?Ln[l]:Ln[l]={};oe(d,b)}function sn(l,d){if(d===!0)return d;if(l.copyState)return l.copyState(d);var b={};for(var m in d){var S=d[m];S instanceof Array&&(S=S.concat([])),b[m]=S}return b}function ka(l,d){for(var b;l.innerMode&&(b=l.innerMode(d),!(!b||b.mode==l));)d=b.state,l=b.mode;return b||{mode:l,state:d}}function Gn(l,d,b){return l.startState?l.startState(d,b):!0}var qt=function(l,d,b){this.pos=this.start=0,this.string=l,this.tabSize=d||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=b};qt.prototype.eol=function(){return this.pos>=this.string.length},qt.prototype.sol=function(){return this.pos==this.lineStart},qt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},qt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},qt.prototype.eat=function(l){var d=this.string.charAt(this.pos),b;if(typeof l=="string"?b=d==l:b=d&&(l.test?l.test(d):l(d)),b)return++this.pos,d},qt.prototype.eatWhile=function(l){for(var d=this.pos;this.eat(l););return this.pos>d},qt.prototype.eatSpace=function(){for(var l=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>l},qt.prototype.skipToEnd=function(){this.pos=this.string.length},qt.prototype.skipTo=function(l){var d=this.string.indexOf(l,this.pos);if(d>-1)return this.pos=d,!0},qt.prototype.backUp=function(l){this.pos-=l},qt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=te(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?te(this.string,this.lineStart,this.tabSize):0)},qt.prototype.indentation=function(){return te(this.string,null,this.tabSize)-(this.lineStart?te(this.string,this.lineStart,this.tabSize):0)},qt.prototype.match=function(l,d,b){if(typeof l=="string"){var m=function(O){return b?O.toLowerCase():O},S=this.string.substr(this.pos,l.length);if(m(S)==m(l))return d!==!1&&(this.pos+=l.length),!0}else{var L=this.string.slice(this.pos).match(l);return L&&L.index>0?null:(L&&d!==!1&&(this.pos+=L[0].length),L)}},qt.prototype.current=function(){return this.string.slice(this.start,this.pos)},qt.prototype.hideFirstChars=function(l,d){this.lineStart+=l;try{return d()}finally{this.lineStart-=l}},qt.prototype.lookAhead=function(l){var d=this.lineOracle;return d&&d.lookAhead(l)},qt.prototype.baseToken=function(){var l=this.lineOracle;return l&&l.baseToken(this.pos)};function ct(l,d){if(d-=l.first,d<0||d>=l.size)throw new Error("There is no line "+(d+l.first)+" in the document.");for(var b=l;!b.lines;)for(var m=0;;++m){var S=b.children[m],L=S.chunkSize();if(d<L){b=S;break}d-=L}return b.lines[d]}function Gr(l,d,b){var m=[],S=d.line;return l.iter(d.line,b.line+1,function(L){var O=L.text;S==b.line&&(O=O.slice(0,b.ch)),S==d.line&&(O=O.slice(d.ch)),m.push(O),++S}),m}function ea(l,d,b){var m=[];return l.iter(d,b,function(S){m.push(S.text)}),m}function Pt(l,d){var b=d-l.height;if(b)for(var m=l;m;m=m.parent)m.height+=b}function Q(l){if(l.parent==null)return null;for(var d=l.parent,b=se(d.lines,l),m=d.parent;m;d=m,m=m.parent)for(var S=0;m.children[S]!=d;++S)b+=m.children[S].chunkSize();return b+d.first}function fe(l,d){var b=l.first;e:do{for(var m=0;m<l.children.length;++m){var S=l.children[m],L=S.height;if(d<L){l=S;continue e}d-=L,b+=S.chunkSize()}return b}while(!l.lines);for(var O=0;O<l.lines.length;++O){var H=l.lines[O],Y=H.height;if(d<Y)break;d-=Y}return b+O}function ke(l,d){return d>=l.first&&d<l.first+l.size}function ze(l,d){return String(l.lineNumberFormatter(d+l.firstLineNumber))}function Re(l,d,b){if(b===void 0&&(b=null),!(this instanceof Re))return new Re(l,d,b);this.line=l,this.ch=d,this.sticky=b}function Ze(l,d){return l.line-d.line||l.ch-d.ch}function kt(l,d){return l.sticky==d.sticky&&Ze(l,d)==0}function Mr(l){return Re(l.line,l.ch)}function yn(l,d){return Ze(l,d)<0?d:l}function Po(l,d){return Ze(l,d)<0?l:d}function fw(l,d){return Math.max(l.first,Math.min(d,l.first+l.size-1))}function Ct(l,d){if(d.line<l.first)return Re(l.first,0);var b=l.first+l.size-1;return d.line>b?Re(b,ct(l,b).text.length):RO(d,ct(l,d.line).text.length)}function RO(l,d){var b=l.ch;return b==null||b>d?Re(l.line,d):b<0?Re(l.line,0):l}function cw(l,d){for(var b=[],m=0;m<d.length;m++)b[m]=Ct(l,d[m]);return b}var Eu=function(l,d){this.state=l,this.lookAhead=d},va=function(l,d,b,m){this.state=d,this.doc=l,this.line=b,this.maxLookAhead=m||0,this.baseTokens=null,this.baseTokenPos=1};va.prototype.lookAhead=function(l){var d=this.doc.getLine(this.line+l);return d!=null&&l>this.maxLookAhead&&(this.maxLookAhead=l),d},va.prototype.baseToken=function(l){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=l;)this.baseTokenPos+=2;var d=this.baseTokens[this.baseTokenPos+1];return{type:d&&d.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-l}},va.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},va.fromSaved=function(l,d,b){return d instanceof Eu?new va(l,sn(l.mode,d.state),b,d.lookAhead):new va(l,sn(l.mode,d),b)},va.prototype.save=function(l){var d=l!==!1?sn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Eu(d,this.maxLookAhead):d};function dw(l,d,b,m){var S=[l.state.modeGen],L={};mw(l,d.text,l.doc.mode,b,function(J,ce){return S.push(J,ce)},L,m);for(var O=b.state,H=function(J){b.baseTokens=S;var ce=l.state.overlays[J],ge=1,_e=0;b.state=!0,mw(l,d.text,ce.mode,b,function(Le,Ne){for(var Be=ge;_e<Le;){var Ke=S[ge];Ke>Le&&S.splice(ge,1,Le,S[ge+1],Ke),ge+=2,_e=Math.min(Le,Ke)}if(Ne)if(ce.opaque)S.splice(Be,ge-Be,Le,"overlay "+Ne),ge=Be+2;else for(;Be<ge;Be+=2){var tt=S[Be+1];S[Be+1]=(tt?tt+" ":"")+"overlay "+Ne}},L),b.state=O,b.baseTokens=null,b.baseTokenPos=1},Y=0;Y<l.state.overlays.length;++Y)H(Y);return{styles:S,classes:L.bgClass||L.textClass?L:null}}function hw(l,d,b){if(!d.styles||d.styles[0]!=l.state.modeGen){var m=Bs(l,Q(d)),S=d.text.length>l.options.maxHighlightLength&&sn(l.doc.mode,m.state),L=dw(l,d,m);S&&(m.state=S),d.stateAfter=m.save(!S),d.styles=L.styles,L.classes?d.styleClasses=L.classes:d.styleClasses&&(d.styleClasses=null),b===l.doc.highlightFrontier&&(l.doc.modeFrontier=Math.max(l.doc.modeFrontier,++l.doc.highlightFrontier))}return d.styles}function Bs(l,d,b){var m=l.doc,S=l.display;if(!m.mode.startState)return new va(m,!0,d);var L=PO(l,d,b),O=L>m.first&&ct(m,L-1).stateAfter,H=O?va.fromSaved(m,O,L):new va(m,Gn(m.mode),L);return m.iter(L,d,function(Y){sd(l,Y.text,H);var J=H.line;Y.stateAfter=J==d-1||J%5==0||J>=S.viewFrom&&J<S.viewTo?H.save():null,H.nextLine()}),b&&(m.modeFrontier=H.line),H}function sd(l,d,b,m){var S=l.doc.mode,L=new qt(d,l.options.tabSize,b);for(L.start=L.pos=m||0,d==""&&vw(S,b.state);!L.eol();)ld(S,L,b.state),L.start=L.pos}function vw(l,d){if(l.blankLine)return l.blankLine(d);if(l.innerMode){var b=ka(l,d);if(b.mode.blankLine)return b.mode.blankLine(b.state)}}function ld(l,d,b,m){for(var S=0;S<10;S++){m&&(m[0]=ka(l,b).mode);var L=l.token(d,b);if(d.pos>d.start)return L}throw new Error("Mode "+l.name+" failed to advance stream.")}var pw=function(l,d,b){this.start=l.start,this.end=l.pos,this.string=l.current(),this.type=d||null,this.state=b};function gw(l,d,b,m){var S=l.doc,L=S.mode,O;d=Ct(S,d);var H=ct(S,d.line),Y=Bs(l,d.line,b),J=new qt(H.text,l.options.tabSize,Y),ce;for(m&&(ce=[]);(m||J.pos<d.ch)&&!J.eol();)J.start=J.pos,O=ld(L,J,Y.state),m&&ce.push(new pw(J,O,sn(S.mode,Y.state)));return m?ce:new pw(J,O,Y.state)}function yw(l,d){if(l)for(;;){var b=l.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!b)break;l=l.slice(0,b.index)+l.slice(b.index+b[0].length);var m=b[1]?"bgClass":"textClass";d[m]==null?d[m]=b[2]:new RegExp("(?:^|\\s)"+b[2]+"(?:$|\\s)").test(d[m])||(d[m]+=" "+b[2])}return l}function mw(l,d,b,m,S,L,O){var H=b.flattenSpans;H==null&&(H=l.options.flattenSpans);var Y=0,J=null,ce=new qt(d,l.options.tabSize,m),ge,_e=l.options.addModeClass&&[null];for(d==""&&yw(vw(b,m.state),L);!ce.eol();){if(ce.pos>l.options.maxHighlightLength?(H=!1,O&&sd(l,d,m,ce.pos),ce.pos=d.length,ge=null):ge=yw(ld(b,ce,m.state,_e),L),_e){var Le=_e[0].name;Le&&(ge="m-"+(ge?Le+" "+ge:Le))}if(!H||J!=ge){for(;Y<ce.start;)Y=Math.min(ce.start,Y+5e3),S(Y,J);J=ge}ce.start=ce.pos}for(;Y<ce.pos;){var Ne=Math.min(ce.pos,Y+5e3);S(Ne,J),Y=Ne}}function PO(l,d,b){for(var m,S,L=l.doc,O=b?-1:d-(l.doc.mode.innerMode?1e3:100),H=d;H>O;--H){if(H<=L.first)return L.first;var Y=ct(L,H-1),J=Y.stateAfter;if(J&&(!b||H+(J instanceof Eu?J.lookAhead:0)<=L.modeFrontier))return H;var ce=te(Y.text,null,l.options.tabSize);(S==null||m>ce)&&(S=H-1,m=ce)}return S}function kO(l,d){if(l.modeFrontier=Math.min(l.modeFrontier,d),!(l.highlightFrontier<d-10)){for(var b=l.first,m=d-1;m>b;m--){var S=ct(l,m).stateAfter;if(S&&(!(S instanceof Eu)||m+S.lookAhead<d)){b=m+1;break}}l.highlightFrontier=Math.min(l.highlightFrontier,b)}}var bw=!1,Na=!1;function NO(){bw=!0}function OO(){Na=!0}function Cu(l,d,b){this.marker=l,this.from=d,this.to=b}function qs(l,d){if(l)for(var b=0;b<l.length;++b){var m=l[b];if(m.marker==d)return m}}function IO(l,d){for(var b,m=0;m<l.length;++m)l[m]!=d&&(b||(b=[])).push(l[m]);return b}function FO(l,d,b){var m=b&&window.WeakSet&&(b.markedSpans||(b.markedSpans=new WeakSet));m&&l.markedSpans&&m.has(l.markedSpans)?l.markedSpans.push(d):(l.markedSpans=l.markedSpans?l.markedSpans.concat([d]):[d],m&&m.add(l.markedSpans)),d.marker.attachLine(l)}function BO(l,d,b){var m;if(l)for(var S=0;S<l.length;++S){var L=l[S],O=L.marker,H=L.from==null||(O.inclusiveLeft?L.from<=d:L.from<d);if(H||L.from==d&&O.type=="bookmark"&&(!b||!L.marker.insertLeft)){var Y=L.to==null||(O.inclusiveRight?L.to>=d:L.to>d);(m||(m=[])).push(new Cu(O,L.from,Y?null:L.to))}}return m}function qO(l,d,b){var m;if(l)for(var S=0;S<l.length;++S){var L=l[S],O=L.marker,H=L.to==null||(O.inclusiveRight?L.to>=d:L.to>d);if(H||L.from==d&&O.type=="bookmark"&&(!b||L.marker.insertLeft)){var Y=L.from==null||(O.inclusiveLeft?L.from<=d:L.from<d);(m||(m=[])).push(new Cu(O,Y?null:L.from-d,L.to==null?null:L.to-d))}}return m}function ud(l,d){if(d.full)return null;var b=ke(l,d.from.line)&&ct(l,d.from.line).markedSpans,m=ke(l,d.to.line)&&ct(l,d.to.line).markedSpans;if(!b&&!m)return null;var S=d.from.ch,L=d.to.ch,O=Ze(d.from,d.to)==0,H=BO(b,S,O),Y=qO(m,L,O),J=d.text.length==1,ce=de(d.text).length+(J?S:0);if(H)for(var ge=0;ge<H.length;++ge){var _e=H[ge];if(_e.to==null){var Le=qs(Y,_e.marker);Le?J&&(_e.to=Le.to==null?null:Le.to+ce):_e.to=S}}if(Y)for(var Ne=0;Ne<Y.length;++Ne){var Be=Y[Ne];if(Be.to!=null&&(Be.to+=ce),Be.from==null){var Ke=qs(H,Be.marker);Ke||(Be.from=ce,J&&(H||(H=[])).push(Be))}else Be.from+=ce,J&&(H||(H=[])).push(Be)}H&&(H=ww(H)),Y&&Y!=H&&(Y=ww(Y));var tt=[H];if(!J){var lt=d.text.length-2,rt;if(lt>0&&H)for(var ut=0;ut<H.length;++ut)H[ut].to==null&&(rt||(rt=[])).push(new Cu(H[ut].marker,null,null));for(var yt=0;yt<lt;++yt)tt.push(rt);tt.push(Y)}return tt}function ww(l){for(var d=0;d<l.length;++d){var b=l[d];b.from!=null&&b.from==b.to&&b.marker.clearWhenEmpty!==!1&&l.splice(d--,1)}return l.length?l:null}function zO(l,d,b){var m=null;if(l.iter(d.line,b.line+1,function(Le){if(Le.markedSpans)for(var Ne=0;Ne<Le.markedSpans.length;++Ne){var Be=Le.markedSpans[Ne].marker;Be.readOnly&&(!m||se(m,Be)==-1)&&(m||(m=[])).push(Be)}}),!m)return null;for(var S=[{from:d,to:b}],L=0;L<m.length;++L)for(var O=m[L],H=O.find(0),Y=0;Y<S.length;++Y){var J=S[Y];if(!(Ze(J.to,H.from)<0||Ze(J.from,H.to)>0)){var ce=[Y,1],ge=Ze(J.from,H.from),_e=Ze(J.to,H.to);(ge<0||!O.inclusiveLeft&&!ge)&&ce.push({from:J.from,to:H.from}),(_e>0||!O.inclusiveRight&&!_e)&&ce.push({from:H.to,to:J.to}),S.splice.apply(S,ce),Y+=ce.length-3}}return S}function xw(l){var d=l.markedSpans;if(d){for(var b=0;b<d.length;++b)d[b].marker.detachLine(l);l.markedSpans=null}}function Ew(l,d){if(d){for(var b=0;b<d.length;++b)d[b].marker.attachLine(l);l.markedSpans=d}}function Tu(l){return l.inclusiveLeft?-1:0}function Su(l){return l.inclusiveRight?1:0}function fd(l,d){var b=l.lines.length-d.lines.length;if(b!=0)return b;var m=l.find(),S=d.find(),L=Ze(m.from,S.from)||Tu(l)-Tu(d);if(L)return-L;var O=Ze(m.to,S.to)||Su(l)-Su(d);return O||d.id-l.id}function Cw(l,d){var b=Na&&l.markedSpans,m;if(b)for(var S=void 0,L=0;L<b.length;++L)S=b[L],S.marker.collapsed&&(d?S.from:S.to)==null&&(!m||fd(m,S.marker)<0)&&(m=S.marker);return m}function Tw(l){return Cw(l,!0)}function Au(l){return Cw(l,!1)}function GO(l,d){var b=Na&&l.markedSpans,m;if(b)for(var S=0;S<b.length;++S){var L=b[S];L.marker.collapsed&&(L.from==null||L.from<d)&&(L.to==null||L.to>d)&&(!m||fd(m,L.marker)<0)&&(m=L.marker)}return m}function Sw(l,d,b,m,S){var L=ct(l,d),O=Na&&L.markedSpans;if(O)for(var H=0;H<O.length;++H){var Y=O[H];if(Y.marker.collapsed){var J=Y.marker.find(0),ce=Ze(J.from,b)||Tu(Y.marker)-Tu(S),ge=Ze(J.to,m)||Su(Y.marker)-Su(S);if(!(ce>=0&&ge<=0||ce<=0&&ge>=0)&&(ce<=0&&(Y.marker.inclusiveRight&&S.inclusiveLeft?Ze(J.to,b)>=0:Ze(J.to,b)>0)||ce>=0&&(Y.marker.inclusiveRight&&S.inclusiveLeft?Ze(J.from,m)<=0:Ze(J.from,m)<0)))return!0}}}function ta(l){for(var d;d=Tw(l);)l=d.find(-1,!0).line;return l}function HO(l){for(var d;d=Au(l);)l=d.find(1,!0).line;return l}function UO(l){for(var d,b;d=Au(l);)l=d.find(1,!0).line,(b||(b=[])).push(l);return b}function cd(l,d){var b=ct(l,d),m=ta(b);return b==m?d:Q(m)}function Aw(l,d){if(d>l.lastLine())return d;var b=ct(l,d),m;if(!ii(l,b))return d;for(;m=Au(b);)b=m.find(1,!0).line;return Q(b)+1}function ii(l,d){var b=Na&&d.markedSpans;if(b){for(var m=void 0,S=0;S<b.length;++S)if(m=b[S],!!m.marker.collapsed){if(m.from==null)return!0;if(!m.marker.widgetNode&&m.from==0&&m.marker.inclusiveLeft&&dd(l,d,m))return!0}}}function dd(l,d,b){if(b.to==null){var m=b.marker.find(1,!0);return dd(l,m.line,qs(m.line.markedSpans,b.marker))}if(b.marker.inclusiveRight&&b.to==d.text.length)return!0;for(var S=void 0,L=0;L<d.markedSpans.length;++L)if(S=d.markedSpans[L],S.marker.collapsed&&!S.marker.widgetNode&&S.from==b.to&&(S.to==null||S.to!=b.from)&&(S.marker.inclusiveLeft||b.marker.inclusiveRight)&&dd(l,d,S))return!0}function Oa(l){l=ta(l);for(var d=0,b=l.parent,m=0;m<b.lines.length;++m){var S=b.lines[m];if(S==l)break;d+=S.height}for(var L=b.parent;L;b=L,L=b.parent)for(var O=0;O<L.children.length;++O){var H=L.children[O];if(H==b)break;d+=H.height}return d}function Lu(l){if(l.height==0)return 0;for(var d=l.text.length,b,m=l;b=Tw(m);){var S=b.find(0,!0);m=S.from.line,d+=S.from.ch-S.to.ch}for(m=l;b=Au(m);){var L=b.find(0,!0);d-=m.text.length-L.from.ch,m=L.to.line,d+=m.text.length-L.to.ch}return d}function hd(l){var d=l.display,b=l.doc;d.maxLine=ct(b,b.first),d.maxLineLength=Lu(d.maxLine),d.maxLineChanged=!0,b.iter(function(m){var S=Lu(m);S>d.maxLineLength&&(d.maxLineLength=S,d.maxLine=m)})}var ko=function(l,d,b){this.text=l,Ew(this,d),this.height=b?b(this):1};ko.prototype.lineNo=function(){return Q(this)},Ge(ko);function VO(l,d,b,m){l.text=d,l.stateAfter&&(l.stateAfter=null),l.styles&&(l.styles=null),l.order!=null&&(l.order=null),xw(l),Ew(l,b);var S=m?m(l):1;S!=l.height&&Pt(l,S)}function WO(l){l.parent=null,xw(l)}var $O={},YO={};function Lw(l,d){if(!l||/^\s*$/.test(l))return null;var b=d.addModeClass?YO:$O;return b[l]||(b[l]=l.replace(/\S+/g,"cm-$&"))}function Dw(l,d){var b=N("span",null,null,c?"padding-right: .1px":null),m={pre:N("pre",[b],"CodeMirror-line"),content:b,col:0,pos:0,cm:l,trailingSpace:!1,splitSpaces:l.getOption("lineWrapping")};d.measure={};for(var S=0;S<=(d.rest?d.rest.length:0);S++){var L=S?d.rest[S-1]:d.line,O=void 0;m.pos=0,m.addToken=KO,Lt(l.display.measure)&&(O=xe(L,l.doc.direction))&&(m.addToken=ZO(m.addToken,O)),m.map=[];var H=d!=l.display.externalMeasured&&Q(L);QO(L,m,hw(l,L,H)),L.styleClasses&&(L.styleClasses.bgClass&&(m.bgClass=K(L.styleClasses.bgClass,m.bgClass||"")),L.styleClasses.textClass&&(m.textClass=K(L.styleClasses.textClass,m.textClass||""))),m.map.length==0&&m.map.push(0,0,m.content.appendChild(Mt(l.display.measure))),S==0?(d.measure.map=m.map,d.measure.cache={}):((d.measure.maps||(d.measure.maps=[])).push(m.map),(d.measure.caches||(d.measure.caches=[])).push({}))}if(c){var Y=m.content.lastChild;(/\bcm-tab\b/.test(Y.className)||Y.querySelector&&Y.querySelector(".cm-tab"))&&(m.content.className="cm-tab-wrap-hack")}return He(l,"renderLine",l,d.line,m.pre),m.pre.className&&(m.textClass=K(m.pre.className,m.textClass||"")),m}function XO(l){var d=P("span","•","cm-invalidchar");return d.title="\\u"+l.charCodeAt(0).toString(16),d.setAttribute("aria-label",d.title),d}function KO(l,d,b,m,S,L,O){if(d){var H=l.splitSpaces?jO(d,l.trailingSpace):d,Y=l.cm.state.specialChars,J=!1,ce;if(!Y.test(d))l.col+=d.length,ce=document.createTextNode(H),l.map.push(l.pos,l.pos+d.length,ce),u&&f<9&&(J=!0),l.pos+=d.length;else{ce=document.createDocumentFragment();for(var ge=0;;){Y.lastIndex=ge;var _e=Y.exec(d),Le=_e?_e.index-ge:d.length-ge;if(Le){var Ne=document.createTextNode(H.slice(ge,ge+Le));u&&f<9?ce.appendChild(P("span",[Ne])):ce.appendChild(Ne),l.map.push(l.pos,l.pos+Le,Ne),l.col+=Le,l.pos+=Le}if(!_e)break;ge+=Le+1;var Be=void 0;if(_e[0]=="	"){var Ke=l.cm.options.tabSize,tt=Ke-l.col%Ke;Be=ce.appendChild(P("span",pe(tt),"cm-tab")),Be.setAttribute("role","presentation"),Be.setAttribute("cm-text","	"),l.col+=tt}else _e[0]=="\r"||_e[0]==`
`?(Be=ce.appendChild(P("span",_e[0]=="\r"?"␍":"␤","cm-invalidchar")),Be.setAttribute("cm-text",_e[0]),l.col+=1):(Be=l.cm.options.specialCharPlaceholder(_e[0]),Be.setAttribute("cm-text",_e[0]),u&&f<9?ce.appendChild(P("span",[Be])):ce.appendChild(Be),l.col+=1);l.map.push(l.pos,l.pos+1,Be),l.pos++}}if(l.trailingSpace=H.charCodeAt(d.length-1)==32,b||m||S||J||L||O){var lt=b||"";m&&(lt+=m),S&&(lt+=S);var rt=P("span",[ce],lt,L);if(O)for(var ut in O)O.hasOwnProperty(ut)&&ut!="style"&&ut!="class"&&rt.setAttribute(ut,O[ut]);return l.content.appendChild(rt)}l.content.appendChild(ce)}}function jO(l,d){if(l.length>1&&!/  /.test(l))return l;for(var b=d,m="",S=0;S<l.length;S++){var L=l.charAt(S);L==" "&&b&&(S==l.length-1||l.charCodeAt(S+1)==32)&&(L=" "),m+=L,b=L==" "}return m}function ZO(l,d){return function(b,m,S,L,O,H,Y){S=S?S+" cm-force-border":"cm-force-border";for(var J=b.pos,ce=J+m.length;;){for(var ge=void 0,_e=0;_e<d.length&&(ge=d[_e],!(ge.to>J&&ge.from<=J));_e++);if(ge.to>=ce)return l(b,m,S,L,O,H,Y);l(b,m.slice(0,ge.to-J),S,L,null,H,Y),L=null,m=m.slice(ge.to-J),J=ge.to}}}function _w(l,d,b,m){var S=!m&&b.widgetNode;S&&l.map.push(l.pos,l.pos+d,S),!m&&l.cm.display.input.needsContentAttribute&&(S||(S=l.content.appendChild(document.createElement("span"))),S.setAttribute("cm-marker",b.id)),S&&(l.cm.display.input.setUneditable(S),l.content.appendChild(S)),l.pos+=d,l.trailingSpace=!1}function QO(l,d,b){var m=l.markedSpans,S=l.text,L=0;if(!m){for(var O=1;O<b.length;O+=2)d.addToken(d,S.slice(L,L=b[O]),Lw(b[O+1],d.cm.options));return}for(var H=S.length,Y=0,J=1,ce="",ge,_e,Le=0,Ne,Be,Ke,tt,lt;;){if(Le==Y){Ne=Be=Ke=_e="",lt=null,tt=null,Le=1/0;for(var rt=[],ut=void 0,yt=0;yt<m.length;++yt){var pt=m[yt],At=pt.marker;if(At.type=="bookmark"&&pt.from==Y&&At.widgetNode)rt.push(At);else if(pt.from<=Y&&(pt.to==null||pt.to>Y||At.collapsed&&pt.to==Y&&pt.from==Y)){if(pt.to!=null&&pt.to!=Y&&Le>pt.to&&(Le=pt.to,Be=""),At.className&&(Ne+=" "+At.className),At.css&&(_e=(_e?_e+";":"")+At.css),At.startStyle&&pt.from==Y&&(Ke+=" "+At.startStyle),At.endStyle&&pt.to==Le&&(ut||(ut=[])).push(At.endStyle,pt.to),At.title&&((lt||(lt={})).title=At.title),At.attributes)for(var Jt in At.attributes)(lt||(lt={}))[Jt]=At.attributes[Jt];At.collapsed&&(!tt||fd(tt.marker,At)<0)&&(tt=pt)}else pt.from>Y&&Le>pt.from&&(Le=pt.from)}if(ut)for(var Nr=0;Nr<ut.length;Nr+=2)ut[Nr+1]==Le&&(Be+=" "+ut[Nr]);if(!tt||tt.from==Y)for(var vr=0;vr<rt.length;++vr)_w(d,0,rt[vr]);if(tt&&(tt.from||0)==Y){if(_w(d,(tt.to==null?H+1:tt.to)-Y,tt.marker,tt.from==null),tt.to==null)return;tt.to==Y&&(tt=!1)}}if(Y>=H)break;for(var _n=Math.min(H,Le);;){if(ce){var wn=Y+ce.length;if(!tt){var Er=wn>_n?ce.slice(0,_n-Y):ce;d.addToken(d,Er,ge?ge+Ne:Ne,Ke,Y+Er.length==Le?Be:"",_e,lt)}if(wn>=_n){ce=ce.slice(_n-Y),Y=_n;break}Y=wn,Ke=""}ce=S.slice(L,L=b[J++]),ge=Lw(b[J++],d.cm.options)}}}function Mw(l,d,b){this.line=d,this.rest=UO(d),this.size=this.rest?Q(de(this.rest))-b+1:1,this.node=this.text=null,this.hidden=ii(l,d)}function Du(l,d,b){for(var m=[],S,L=d;L<b;L=S){var O=new Mw(l.doc,ct(l.doc,L),L);S=L+O.size,m.push(O)}return m}var No=null;function JO(l){No?No.ops.push(l):l.ownsGroup=No={ops:[l],delayedCallbacks:[]}}function e2(l){var d=l.delayedCallbacks,b=0;do{for(;b<d.length;b++)d[b].call(null);for(var m=0;m<l.ops.length;m++){var S=l.ops[m];if(S.cursorActivityHandlers)for(;S.cursorActivityCalled<S.cursorActivityHandlers.length;)S.cursorActivityHandlers[S.cursorActivityCalled++].call(null,S.cm)}}while(b<d.length)}function t2(l,d){var b=l.ownsGroup;if(b)try{e2(b)}finally{No=null,d(b)}}var zs=null;function Rr(l,d){var b=Oe(l,d);if(b.length){var m=Array.prototype.slice.call(arguments,2),S;No?S=No.delayedCallbacks:zs?S=zs:(S=zs=[],setTimeout(r2,0));for(var L=function(H){S.push(function(){return b[H].apply(null,m)})},O=0;O<b.length;++O)L(O)}}function r2(){var l=zs;zs=null;for(var d=0;d<l.length;++d)l[d]()}function Rw(l,d,b,m){for(var S=0;S<d.changes.length;S++){var L=d.changes[S];L=="text"?a2(l,d):L=="gutter"?kw(l,d,b,m):L=="class"?vd(l,d):L=="widget"&&i2(l,d,m)}d.changes=null}function Gs(l){return l.node==l.text&&(l.node=P("div",null,null,"position: relative"),l.text.parentNode&&l.text.parentNode.replaceChild(l.node,l.text),l.node.appendChild(l.text),u&&f<8&&(l.node.style.zIndex=2)),l.node}function n2(l,d){var b=d.bgClass?d.bgClass+" "+(d.line.bgClass||""):d.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),d.background)b?d.background.className=b:(d.background.parentNode.removeChild(d.background),d.background=null);else if(b){var m=Gs(d);d.background=m.insertBefore(P("div",null,b),m.firstChild),l.display.input.setUneditable(d.background)}}function Pw(l,d){var b=l.display.externalMeasured;return b&&b.line==d.line?(l.display.externalMeasured=null,d.measure=b.measure,b.built):Dw(l,d)}function a2(l,d){var b=d.text.className,m=Pw(l,d);d.text==d.node&&(d.node=m.pre),d.text.parentNode.replaceChild(m.pre,d.text),d.text=m.pre,m.bgClass!=d.bgClass||m.textClass!=d.textClass?(d.bgClass=m.bgClass,d.textClass=m.textClass,vd(l,d)):b&&(d.text.className=b)}function vd(l,d){n2(l,d),d.line.wrapClass?Gs(d).className=d.line.wrapClass:d.node!=d.text&&(d.node.className="");var b=d.textClass?d.textClass+" "+(d.line.textClass||""):d.line.textClass;d.text.className=b||""}function kw(l,d,b,m){if(d.gutter&&(d.node.removeChild(d.gutter),d.gutter=null),d.gutterBackground&&(d.node.removeChild(d.gutterBackground),d.gutterBackground=null),d.line.gutterClass){var S=Gs(d);d.gutterBackground=P("div",null,"CodeMirror-gutter-background "+d.line.gutterClass,"left: "+(l.options.fixedGutter?m.fixedPos:-m.gutterTotalWidth)+"px; width: "+m.gutterTotalWidth+"px"),l.display.input.setUneditable(d.gutterBackground),S.insertBefore(d.gutterBackground,d.text)}var L=d.line.gutterMarkers;if(l.options.lineNumbers||L){var O=Gs(d),H=d.gutter=P("div",null,"CodeMirror-gutter-wrapper","left: "+(l.options.fixedGutter?m.fixedPos:-m.gutterTotalWidth)+"px");if(H.setAttribute("aria-hidden","true"),l.display.input.setUneditable(H),O.insertBefore(H,d.text),d.line.gutterClass&&(H.className+=" "+d.line.gutterClass),l.options.lineNumbers&&(!L||!L["CodeMirror-linenumbers"])&&(d.lineNumber=H.appendChild(P("div",ze(l.options,b),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+m.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.display.lineNumInnerWidth+"px"))),L)for(var Y=0;Y<l.display.gutterSpecs.length;++Y){var J=l.display.gutterSpecs[Y].className,ce=L.hasOwnProperty(J)&&L[J];ce&&H.appendChild(P("div",[ce],"CodeMirror-gutter-elt","left: "+m.gutterLeft[J]+"px; width: "+m.gutterWidth[J]+"px"))}}}function i2(l,d,b){d.alignable&&(d.alignable=null);for(var m=G("CodeMirror-linewidget"),S=d.node.firstChild,L=void 0;S;S=L)L=S.nextSibling,m.test(S.className)&&d.node.removeChild(S);Nw(l,d,b)}function o2(l,d,b,m){var S=Pw(l,d);return d.text=d.node=S.pre,S.bgClass&&(d.bgClass=S.bgClass),S.textClass&&(d.textClass=S.textClass),vd(l,d),kw(l,d,b,m),Nw(l,d,m),d.node}function Nw(l,d,b){if(Ow(l,d.line,d,b,!0),d.rest)for(var m=0;m<d.rest.length;m++)Ow(l,d.rest[m],d,b,!1)}function Ow(l,d,b,m,S){if(d.widgets)for(var L=Gs(b),O=0,H=d.widgets;O<H.length;++O){var Y=H[O],J=P("div",[Y.node],"CodeMirror-linewidget"+(Y.className?" "+Y.className:""));Y.handleMouseEvents||J.setAttribute("cm-ignore-events","true"),s2(Y,J,b,m),l.display.input.setUneditable(J),S&&Y.above?L.insertBefore(J,b.gutter||b.text):L.appendChild(J),Rr(Y,"redraw")}}function s2(l,d,b,m){if(l.noHScroll){(b.alignable||(b.alignable=[])).push(d);var S=m.wrapperWidth;d.style.left=m.fixedPos+"px",l.coverGutter||(S-=m.gutterTotalWidth,d.style.paddingLeft=m.gutterTotalWidth+"px"),d.style.width=S+"px"}l.coverGutter&&(d.style.zIndex=5,d.style.position="relative",l.noHScroll||(d.style.marginLeft=-m.gutterTotalWidth+"px"))}function Hs(l){if(l.height!=null)return l.height;var d=l.doc.cm;if(!d)return 0;if(!z(document.body,l.node)){var b="position: relative;";l.coverGutter&&(b+="margin-left: -"+d.display.gutters.offsetWidth+"px;"),l.noHScroll&&(b+="width: "+d.display.wrapper.clientWidth+"px;"),R(d.display.measure,P("div",[l.node],null,b))}return l.height=l.node.parentNode.offsetHeight}function Ia(l,d){for(var b=Tt(d);b!=l.wrapper;b=b.parentNode)if(!b||b.nodeType==1&&b.getAttribute("cm-ignore-events")=="true"||b.parentNode==l.sizer&&b!=l.mover)return!0}function _u(l){return l.lineSpace.offsetTop}function pd(l){return l.mover.offsetHeight-l.lineSpace.offsetHeight}function Iw(l){if(l.cachedPaddingH)return l.cachedPaddingH;var d=R(l.measure,P("pre","x","CodeMirror-line-like")),b=window.getComputedStyle?window.getComputedStyle(d):d.currentStyle,m={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};return!isNaN(m.left)&&!isNaN(m.right)&&(l.cachedPaddingH=m),m}function pa(l){return $-l.display.nativeBarWidth}function Vi(l){return l.display.scroller.clientWidth-pa(l)-l.display.barWidth}function gd(l){return l.display.scroller.clientHeight-pa(l)-l.display.barHeight}function l2(l,d,b){var m=l.options.lineWrapping,S=m&&Vi(l);if(!d.measure.heights||m&&d.measure.width!=S){var L=d.measure.heights=[];if(m){d.measure.width=S;for(var O=d.text.firstChild.getClientRects(),H=0;H<O.length-1;H++){var Y=O[H],J=O[H+1];Math.abs(Y.bottom-J.bottom)>2&&L.push((Y.bottom+J.top)/2-b.top)}}L.push(b.bottom-b.top)}}function Fw(l,d,b){if(l.line==d)return{map:l.measure.map,cache:l.measure.cache};if(l.rest){for(var m=0;m<l.rest.length;m++)if(l.rest[m]==d)return{map:l.measure.maps[m],cache:l.measure.caches[m]};for(var S=0;S<l.rest.length;S++)if(Q(l.rest[S])>b)return{map:l.measure.maps[S],cache:l.measure.caches[S],before:!0}}}function u2(l,d){d=ta(d);var b=Q(d),m=l.display.externalMeasured=new Mw(l.doc,d,b);m.lineN=b;var S=m.built=Dw(l,m);return m.text=S.pre,R(l.display.lineMeasure,S.pre),m}function Bw(l,d,b,m){return ga(l,Oo(l,d),b,m)}function yd(l,d){if(d>=l.display.viewFrom&&d<l.display.viewTo)return l.display.view[Yi(l,d)];var b=l.display.externalMeasured;if(b&&d>=b.lineN&&d<b.lineN+b.size)return b}function Oo(l,d){var b=Q(d),m=yd(l,b);m&&!m.text?m=null:m&&m.changes&&(Rw(l,m,b,Ed(l)),l.curOp.forceUpdate=!0),m||(m=u2(l,d));var S=Fw(m,d,b);return{line:d,view:m,rect:null,map:S.map,cache:S.cache,before:S.before,hasHeights:!1}}function ga(l,d,b,m,S){d.before&&(b=-1);var L=b+(m||""),O;return d.cache.hasOwnProperty(L)?O=d.cache[L]:(d.rect||(d.rect=d.view.text.getBoundingClientRect()),d.hasHeights||(l2(l,d.view,d.rect),d.hasHeights=!0),O=c2(l,d,b,m),O.bogus||(d.cache[L]=O)),{left:O.left,right:O.right,top:S?O.rtop:O.top,bottom:S?O.rbottom:O.bottom}}var qw={left:0,right:0,top:0,bottom:0};function zw(l,d,b){for(var m,S,L,O,H,Y,J=0;J<l.length;J+=3)if(H=l[J],Y=l[J+1],d<H?(S=0,L=1,O="left"):d<Y?(S=d-H,L=S+1):(J==l.length-3||d==Y&&l[J+3]>d)&&(L=Y-H,S=L-1,d>=Y&&(O="right")),S!=null){if(m=l[J+2],H==Y&&b==(m.insertLeft?"left":"right")&&(O=b),b=="left"&&S==0)for(;J&&l[J-2]==l[J-3]&&l[J-1].insertLeft;)m=l[(J-=3)+2],O="left";if(b=="right"&&S==Y-H)for(;J<l.length-3&&l[J+3]==l[J+4]&&!l[J+5].insertLeft;)m=l[(J+=3)+2],O="right";break}return{node:m,start:S,end:L,collapse:O,coverStart:H,coverEnd:Y}}function f2(l,d){var b=qw;if(d=="left")for(var m=0;m<l.length&&(b=l[m]).left==b.right;m++);else for(var S=l.length-1;S>=0&&(b=l[S]).left==b.right;S--);return b}function c2(l,d,b,m){var S=zw(d.map,b,m),L=S.node,O=S.start,H=S.end,Y=S.collapse,J;if(L.nodeType==3){for(var ce=0;ce<4;ce++){for(;O&&Xe(d.line.text.charAt(S.coverStart+O));)--O;for(;S.coverStart+H<S.coverEnd&&Xe(d.line.text.charAt(S.coverStart+H));)++H;if(u&&f<9&&O==0&&H==S.coverEnd-S.coverStart?J=L.parentNode.getBoundingClientRect():J=f2(I(L,O,H).getClientRects(),m),J.left||J.right||O==0)break;H=O,O=O-1,Y="right"}u&&f<11&&(J=d2(l.display.measure,J))}else{O>0&&(Y=m="right");var ge;l.options.lineWrapping&&(ge=L.getClientRects()).length>1?J=ge[m=="right"?ge.length-1:0]:J=L.getBoundingClientRect()}if(u&&f<9&&!O&&(!J||!J.left&&!J.right)){var _e=L.parentNode.getClientRects()[0];_e?J={left:_e.left,right:_e.left+Fo(l.display),top:_e.top,bottom:_e.bottom}:J=qw}for(var Le=J.top-d.rect.top,Ne=J.bottom-d.rect.top,Be=(Le+Ne)/2,Ke=d.view.measure.heights,tt=0;tt<Ke.length-1&&!(Be<Ke[tt]);tt++);var lt=tt?Ke[tt-1]:0,rt=Ke[tt],ut={left:(Y=="right"?J.right:J.left)-d.rect.left,right:(Y=="left"?J.left:J.right)-d.rect.left,top:lt,bottom:rt};return!J.left&&!J.right&&(ut.bogus=!0),l.options.singleCursorHeightPerLine||(ut.rtop=Le,ut.rbottom=Ne),ut}function d2(l,d){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!rr(l))return d;var b=screen.logicalXDPI/screen.deviceXDPI,m=screen.logicalYDPI/screen.deviceYDPI;return{left:d.left*b,right:d.right*b,top:d.top*m,bottom:d.bottom*m}}function Gw(l){if(l.measure&&(l.measure.cache={},l.measure.heights=null,l.rest))for(var d=0;d<l.rest.length;d++)l.measure.caches[d]={}}function Hw(l){l.display.externalMeasure=null,q(l.display.lineMeasure);for(var d=0;d<l.display.view.length;d++)Gw(l.display.view[d])}function Us(l){Hw(l),l.display.cachedCharWidth=l.display.cachedTextHeight=l.display.cachedPaddingH=null,l.options.lineWrapping||(l.display.maxLineChanged=!0),l.display.lineNumChars=null}function Uw(l){return g&&w?-(l.body.getBoundingClientRect().left-parseInt(getComputedStyle(l.body).marginLeft)):l.defaultView.pageXOffset||(l.documentElement||l.body).scrollLeft}function Vw(l){return g&&w?-(l.body.getBoundingClientRect().top-parseInt(getComputedStyle(l.body).marginTop)):l.defaultView.pageYOffset||(l.documentElement||l.body).scrollTop}function md(l){var d=ta(l),b=d.widgets,m=0;if(b)for(var S=0;S<b.length;++S)b[S].above&&(m+=Hs(b[S]));return m}function Mu(l,d,b,m,S){if(!S){var L=md(d);b.top+=L,b.bottom+=L}if(m=="line")return b;m||(m="local");var O=Oa(d);if(m=="local"?O+=_u(l.display):O-=l.display.viewOffset,m=="page"||m=="window"){var H=l.display.lineSpace.getBoundingClientRect();O+=H.top+(m=="window"?0:Vw(Z(l)));var Y=H.left+(m=="window"?0:Uw(Z(l)));b.left+=Y,b.right+=Y}return b.top+=O,b.bottom+=O,b}function Ww(l,d,b){if(b=="div")return d;var m=d.left,S=d.top;if(b=="page")m-=Uw(Z(l)),S-=Vw(Z(l));else if(b=="local"||!b){var L=l.display.sizer.getBoundingClientRect();m+=L.left,S+=L.top}var O=l.display.lineSpace.getBoundingClientRect();return{left:m-O.left,top:S-O.top}}function Ru(l,d,b,m,S){return m||(m=ct(l.doc,d.line)),Mu(l,m,Bw(l,m,d.ch,S),b)}function ra(l,d,b,m,S,L){m=m||ct(l.doc,d.line),S||(S=Oo(l,m));function O(Ne,Be){var Ke=ga(l,S,Ne,Be?"right":"left",L);return Be?Ke.left=Ke.right:Ke.right=Ke.left,Mu(l,m,Ke,b)}var H=xe(m,l.doc.direction),Y=d.ch,J=d.sticky;if(Y>=m.text.length?(Y=m.text.length,J="before"):Y<=0&&(Y=0,J="after"),!H)return O(J=="before"?Y-1:Y,J=="before");function ce(Ne,Be,Ke){var tt=H[Be],lt=tt.level==1;return O(Ke?Ne-1:Ne,lt!=Ke)}var ge=me(H,Y,J),_e=ve,Le=ce(Y,ge,J=="before");return _e!=null&&(Le.other=ce(Y,_e,J!="before")),Le}function $w(l,d){var b=0;d=Ct(l.doc,d),l.options.lineWrapping||(b=Fo(l.display)*d.ch);var m=ct(l.doc,d.line),S=Oa(m)+_u(l.display);return{left:b,right:b,top:S,bottom:S+m.height}}function bd(l,d,b,m,S){var L=Re(l,d,b);return L.xRel=S,m&&(L.outside=m),L}function wd(l,d,b){var m=l.doc;if(b+=l.display.viewOffset,b<0)return bd(m.first,0,null,-1,-1);var S=fe(m,b),L=m.first+m.size-1;if(S>L)return bd(m.first+m.size-1,ct(m,L).text.length,null,1,1);d<0&&(d=0);for(var O=ct(m,S);;){var H=h2(l,O,S,d,b),Y=GO(O,H.ch+(H.xRel>0||H.outside>0?1:0));if(!Y)return H;var J=Y.find(1);if(J.line==S)return J;O=ct(m,S=J.line)}}function Yw(l,d,b,m){m-=md(d);var S=d.text.length,L=he(function(O){return ga(l,b,O-1).bottom<=m},S,0);return S=he(function(O){return ga(l,b,O).top>m},L,S),{begin:L,end:S}}function Xw(l,d,b,m){b||(b=Oo(l,d));var S=Mu(l,d,ga(l,b,m),"line").top;return Yw(l,d,b,S)}function xd(l,d,b,m){return l.bottom<=b?!1:l.top>b?!0:(m?l.left:l.right)>d}function h2(l,d,b,m,S){S-=Oa(d);var L=Oo(l,d),O=md(d),H=0,Y=d.text.length,J=!0,ce=xe(d,l.doc.direction);if(ce){var ge=(l.options.lineWrapping?p2:v2)(l,d,b,L,ce,m,S);J=ge.level!=1,H=J?ge.from:ge.to-1,Y=J?ge.to:ge.from-1}var _e=null,Le=null,Ne=he(function(yt){var pt=ga(l,L,yt);return pt.top+=O,pt.bottom+=O,xd(pt,m,S,!1)?(pt.top<=S&&pt.left<=m&&(_e=yt,Le=pt),!0):!1},H,Y),Be,Ke,tt=!1;if(Le){var lt=m-Le.left<Le.right-m,rt=lt==J;Ne=_e+(rt?0:1),Ke=rt?"after":"before",Be=lt?Le.left:Le.right}else{!J&&(Ne==Y||Ne==H)&&Ne++,Ke=Ne==0?"after":Ne==d.text.length?"before":ga(l,L,Ne-(J?1:0)).bottom+O<=S==J?"after":"before";var ut=ra(l,Re(b,Ne,Ke),"line",d,L);Be=ut.left,tt=S<ut.top?-1:S>=ut.bottom?1:0}return Ne=We(d.text,Ne,1),bd(b,Ne,Ke,tt,m-Be)}function v2(l,d,b,m,S,L,O){var H=he(function(ge){var _e=S[ge],Le=_e.level!=1;return xd(ra(l,Re(b,Le?_e.to:_e.from,Le?"before":"after"),"line",d,m),L,O,!0)},0,S.length-1),Y=S[H];if(H>0){var J=Y.level!=1,ce=ra(l,Re(b,J?Y.from:Y.to,J?"after":"before"),"line",d,m);xd(ce,L,O,!0)&&ce.top>O&&(Y=S[H-1])}return Y}function p2(l,d,b,m,S,L,O){var H=Yw(l,d,m,O),Y=H.begin,J=H.end;/\s/.test(d.text.charAt(J-1))&&J--;for(var ce=null,ge=null,_e=0;_e<S.length;_e++){var Le=S[_e];if(!(Le.from>=J||Le.to<=Y)){var Ne=Le.level!=1,Be=ga(l,m,Ne?Math.min(J,Le.to)-1:Math.max(Y,Le.from)).right,Ke=Be<L?L-Be+1e9:Be-L;(!ce||ge>Ke)&&(ce=Le,ge=Ke)}}return ce||(ce=S[S.length-1]),ce.from<Y&&(ce={from:Y,to:ce.to,level:ce.level}),ce.to>J&&(ce={from:ce.from,to:J,level:ce.level}),ce}var Wi;function Io(l){if(l.cachedTextHeight!=null)return l.cachedTextHeight;if(Wi==null){Wi=P("pre",null,"CodeMirror-line-like");for(var d=0;d<49;++d)Wi.appendChild(document.createTextNode("x")),Wi.appendChild(P("br"));Wi.appendChild(document.createTextNode("x"))}R(l.measure,Wi);var b=Wi.offsetHeight/50;return b>3&&(l.cachedTextHeight=b),q(l.measure),b||1}function Fo(l){if(l.cachedCharWidth!=null)return l.cachedCharWidth;var d=P("span","xxxxxxxxxx"),b=P("pre",[d],"CodeMirror-line-like");R(l.measure,b);var m=d.getBoundingClientRect(),S=(m.right-m.left)/10;return S>2&&(l.cachedCharWidth=S),S||10}function Ed(l){for(var d=l.display,b={},m={},S=d.gutters.clientLeft,L=d.gutters.firstChild,O=0;L;L=L.nextSibling,++O){var H=l.display.gutterSpecs[O].className;b[H]=L.offsetLeft+L.clientLeft+S,m[H]=L.clientWidth}return{fixedPos:Cd(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:b,gutterWidth:m,wrapperWidth:d.wrapper.clientWidth}}function Cd(l){return l.scroller.getBoundingClientRect().left-l.sizer.getBoundingClientRect().left}function Kw(l){var d=Io(l.display),b=l.options.lineWrapping,m=b&&Math.max(5,l.display.scroller.clientWidth/Fo(l.display)-3);return function(S){if(ii(l.doc,S))return 0;var L=0;if(S.widgets)for(var O=0;O<S.widgets.length;O++)S.widgets[O].height&&(L+=S.widgets[O].height);return b?L+(Math.ceil(S.text.length/m)||1)*d:L+d}}function Td(l){var d=l.doc,b=Kw(l);d.iter(function(m){var S=b(m);S!=m.height&&Pt(m,S)})}function $i(l,d,b,m){var S=l.display;if(!b&&Tt(d).getAttribute("cm-not-content")=="true")return null;var L,O,H=S.lineSpace.getBoundingClientRect();try{L=d.clientX-H.left,O=d.clientY-H.top}catch{return null}var Y=wd(l,L,O),J;if(m&&Y.xRel>0&&(J=ct(l.doc,Y.line).text).length==Y.ch){var ce=te(J,J.length,l.options.tabSize)-J.length;Y=Re(Y.line,Math.max(0,Math.round((L-Iw(l.display).left)/Fo(l.display))-ce))}return Y}function Yi(l,d){if(d>=l.display.viewTo||(d-=l.display.viewFrom,d<0))return null;for(var b=l.display.view,m=0;m<b.length;m++)if(d-=b[m].size,d<0)return m}function mn(l,d,b,m){d==null&&(d=l.doc.first),b==null&&(b=l.doc.first+l.doc.size),m||(m=0);var S=l.display;if(m&&b<S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>d)&&(S.updateLineNumbers=d),l.curOp.viewChanged=!0,d>=S.viewTo)Na&&cd(l.doc,d)<S.viewTo&&si(l);else if(b<=S.viewFrom)Na&&Aw(l.doc,b+m)>S.viewFrom?si(l):(S.viewFrom+=m,S.viewTo+=m);else if(d<=S.viewFrom&&b>=S.viewTo)si(l);else if(d<=S.viewFrom){var L=Pu(l,b,b+m,1);L?(S.view=S.view.slice(L.index),S.viewFrom=L.lineN,S.viewTo+=m):si(l)}else if(b>=S.viewTo){var O=Pu(l,d,d,-1);O?(S.view=S.view.slice(0,O.index),S.viewTo=O.lineN):si(l)}else{var H=Pu(l,d,d,-1),Y=Pu(l,b,b+m,1);H&&Y?(S.view=S.view.slice(0,H.index).concat(Du(l,H.lineN,Y.lineN)).concat(S.view.slice(Y.index)),S.viewTo+=m):si(l)}var J=S.externalMeasured;J&&(b<J.lineN?J.lineN+=m:d<J.lineN+J.size&&(S.externalMeasured=null))}function oi(l,d,b){l.curOp.viewChanged=!0;var m=l.display,S=l.display.externalMeasured;if(S&&d>=S.lineN&&d<S.lineN+S.size&&(m.externalMeasured=null),!(d<m.viewFrom||d>=m.viewTo)){var L=m.view[Yi(l,d)];if(L.node!=null){var O=L.changes||(L.changes=[]);se(O,b)==-1&&O.push(b)}}}function si(l){l.display.viewFrom=l.display.viewTo=l.doc.first,l.display.view=[],l.display.viewOffset=0}function Pu(l,d,b,m){var S=Yi(l,d),L,O=l.display.view;if(!Na||b==l.doc.first+l.doc.size)return{index:S,lineN:b};for(var H=l.display.viewFrom,Y=0;Y<S;Y++)H+=O[Y].size;if(H!=d){if(m>0){if(S==O.length-1)return null;L=H+O[S].size-d,S++}else L=H-d;d+=L,b+=L}for(;cd(l.doc,b)!=b;){if(S==(m<0?0:O.length-1))return null;b+=m*O[S-(m<0?1:0)].size,S+=m}return{index:S,lineN:b}}function g2(l,d,b){var m=l.display,S=m.view;S.length==0||d>=m.viewTo||b<=m.viewFrom?(m.view=Du(l,d,b),m.viewFrom=d):(m.viewFrom>d?m.view=Du(l,d,m.viewFrom).concat(m.view):m.viewFrom<d&&(m.view=m.view.slice(Yi(l,d))),m.viewFrom=d,m.viewTo<b?m.view=m.view.concat(Du(l,m.viewTo,b)):m.viewTo>b&&(m.view=m.view.slice(0,Yi(l,b)))),m.viewTo=b}function jw(l){for(var d=l.display.view,b=0,m=0;m<d.length;m++){var S=d[m];!S.hidden&&(!S.node||S.changes)&&++b}return b}function Vs(l){l.display.input.showSelection(l.display.input.prepareSelection())}function Zw(l,d){d===void 0&&(d=!0);var b=l.doc,m={},S=m.cursors=document.createDocumentFragment(),L=m.selection=document.createDocumentFragment(),O=l.options.$customCursor;O&&(d=!0);for(var H=0;H<b.sel.ranges.length;H++)if(!(!d&&H==b.sel.primIndex)){var Y=b.sel.ranges[H];if(!(Y.from().line>=l.display.viewTo||Y.to().line<l.display.viewFrom)){var J=Y.empty();if(O){var ce=O(l,Y);ce&&Sd(l,ce,S)}else(J||l.options.showCursorWhenSelecting)&&Sd(l,Y.head,S);J||y2(l,Y,L)}}return m}function Sd(l,d,b){var m=ra(l,d,"div",null,null,!l.options.singleCursorHeightPerLine),S=b.appendChild(P("div"," ","CodeMirror-cursor"));if(S.style.left=m.left+"px",S.style.top=m.top+"px",S.style.height=Math.max(0,m.bottom-m.top)*l.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(l.getWrapperElement().className)){var L=Ru(l,d,"div",null,null),O=L.right-L.left;S.style.width=(O>0?O:l.defaultCharWidth())+"px"}if(m.other){var H=b.appendChild(P("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));H.style.display="",H.style.left=m.other.left+"px",H.style.top=m.other.top+"px",H.style.height=(m.other.bottom-m.other.top)*.85+"px"}}function ku(l,d){return l.top-d.top||l.left-d.left}function y2(l,d,b){var m=l.display,S=l.doc,L=document.createDocumentFragment(),O=Iw(l.display),H=O.left,Y=Math.max(m.sizerWidth,Vi(l)-m.sizer.offsetLeft)-O.right,J=S.direction=="ltr";function ce(rt,ut,yt,pt){ut<0&&(ut=0),ut=Math.round(ut),pt=Math.round(pt),L.appendChild(P("div",null,"CodeMirror-selected","position: absolute; left: "+rt+`px;
                             top: `+ut+"px; width: "+(yt??Y-rt)+`px;
                             height: `+(pt-ut)+"px"))}function ge(rt,ut,yt){var pt=ct(S,rt),At=pt.text.length,Jt,Nr;function vr(Er,xn){return Ru(l,Re(rt,Er),"div",pt,xn)}function _n(Er,xn,Hr){var Ar=Xw(l,pt,null,Er),Cr=xn=="ltr"==(Hr=="after")?"left":"right",gr=Hr=="after"?Ar.begin:Ar.end-(/\s/.test(pt.text.charAt(Ar.end-1))?2:1);return vr(gr,Cr)[Cr]}var wn=xe(pt,S.direction);return j(wn,ut||0,yt??At,function(Er,xn,Hr,Ar){var Cr=Hr=="ltr",gr=vr(Er,Cr?"left":"right"),En=vr(xn-1,Cr?"right":"left"),jo=ut==null&&Er==0,hi=yt==null&&xn==At,Qr=Ar==0,ya=!wn||Ar==wn.length-1;if(En.top-gr.top<=3){var Or=(J?jo:hi)&&Qr,Qd=(J?hi:jo)&&ya,qa=Or?H:(Cr?gr:En).left,Qi=Qd?Y:(Cr?En:gr).right;ce(qa,gr.top,Qi-qa,gr.bottom)}else{var Ji,un,Zo,Jd;Cr?(Ji=J&&jo&&Qr?H:gr.left,un=J?Y:_n(Er,Hr,"before"),Zo=J?H:_n(xn,Hr,"after"),Jd=J&&hi&&ya?Y:En.right):(Ji=J?_n(Er,Hr,"before"):H,un=!J&&jo&&Qr?Y:gr.right,Zo=!J&&hi&&ya?H:En.left,Jd=J?_n(xn,Hr,"after"):Y),ce(Ji,gr.top,un-Ji,gr.bottom),gr.bottom<En.top&&ce(H,gr.bottom,null,En.top),ce(Zo,En.top,Jd-Zo,En.bottom)}(!Jt||ku(gr,Jt)<0)&&(Jt=gr),ku(En,Jt)<0&&(Jt=En),(!Nr||ku(gr,Nr)<0)&&(Nr=gr),ku(En,Nr)<0&&(Nr=En)}),{start:Jt,end:Nr}}var _e=d.from(),Le=d.to();if(_e.line==Le.line)ge(_e.line,_e.ch,Le.ch);else{var Ne=ct(S,_e.line),Be=ct(S,Le.line),Ke=ta(Ne)==ta(Be),tt=ge(_e.line,_e.ch,Ke?Ne.text.length+1:null).end,lt=ge(Le.line,Ke?0:null,Le.ch).start;Ke&&(tt.top<lt.top-2?(ce(tt.right,tt.top,null,tt.bottom),ce(H,lt.top,lt.left,lt.bottom)):ce(tt.right,tt.top,lt.left-tt.right,tt.bottom)),tt.bottom<lt.top&&ce(H,tt.bottom,null,lt.top)}b.appendChild(L)}function Ad(l){if(l.state.focused){var d=l.display;clearInterval(d.blinker);var b=!0;d.cursorDiv.style.visibility="",l.options.cursorBlinkRate>0?d.blinker=setInterval(function(){l.hasFocus()||Bo(l),d.cursorDiv.style.visibility=(b=!b)?"":"hidden"},l.options.cursorBlinkRate):l.options.cursorBlinkRate<0&&(d.cursorDiv.style.visibility="hidden")}}function Qw(l){l.hasFocus()||(l.display.input.focus(),l.state.focused||Dd(l))}function Ld(l){l.state.delayingBlurEvent=!0,setTimeout(function(){l.state.delayingBlurEvent&&(l.state.delayingBlurEvent=!1,l.state.focused&&Bo(l))},100)}function Dd(l,d){l.state.delayingBlurEvent&&!l.state.draggingText&&(l.state.delayingBlurEvent=!1),l.options.readOnly!="nocursor"&&(l.state.focused||(He(l,"focus",l,d),l.state.focused=!0,re(l.display.wrapper,"CodeMirror-focused"),!l.curOp&&l.display.selForContextMenu!=l.doc.sel&&(l.display.input.reset(),c&&setTimeout(function(){return l.display.input.reset(!0)},20)),l.display.input.receivedFocus()),Ad(l))}function Bo(l,d){l.state.delayingBlurEvent||(l.state.focused&&(He(l,"blur",l,d),l.state.focused=!1,B(l.display.wrapper,"CodeMirror-focused")),clearInterval(l.display.blinker),setTimeout(function(){l.state.focused||(l.display.shift=!1)},150))}function Nu(l){for(var d=l.display,b=d.lineDiv.offsetTop,m=Math.max(0,d.scroller.getBoundingClientRect().top),S=d.lineDiv.getBoundingClientRect().top,L=0,O=0;O<d.view.length;O++){var H=d.view[O],Y=l.options.lineWrapping,J=void 0,ce=0;if(!H.hidden){if(S+=H.line.height,u&&f<8){var ge=H.node.offsetTop+H.node.offsetHeight;J=ge-b,b=ge}else{var _e=H.node.getBoundingClientRect();J=_e.bottom-_e.top,!Y&&H.text.firstChild&&(ce=H.text.firstChild.getBoundingClientRect().right-_e.left-1)}var Le=H.line.height-J;if((Le>.005||Le<-.005)&&(S<m&&(L-=Le),Pt(H.line,J),Jw(H.line),H.rest))for(var Ne=0;Ne<H.rest.length;Ne++)Jw(H.rest[Ne]);if(ce>l.display.sizerWidth){var Be=Math.ceil(ce/Fo(l.display));Be>l.display.maxLineLength&&(l.display.maxLineLength=Be,l.display.maxLine=H.line,l.display.maxLineChanged=!0)}}}Math.abs(L)>2&&(d.scroller.scrollTop+=L)}function Jw(l){if(l.widgets)for(var d=0;d<l.widgets.length;++d){var b=l.widgets[d],m=b.node.parentNode;m&&(b.height=m.offsetHeight)}}function Ou(l,d,b){var m=b&&b.top!=null?Math.max(0,b.top):l.scroller.scrollTop;m=Math.floor(m-_u(l));var S=b&&b.bottom!=null?b.bottom:m+l.wrapper.clientHeight,L=fe(d,m),O=fe(d,S);if(b&&b.ensure){var H=b.ensure.from.line,Y=b.ensure.to.line;H<L?(L=H,O=fe(d,Oa(ct(d,H))+l.wrapper.clientHeight)):Math.min(Y,d.lastLine())>=O&&(L=fe(d,Oa(ct(d,Y))-l.wrapper.clientHeight),O=Y)}return{from:L,to:Math.max(O,L+1)}}function m2(l,d){if(!Ue(l,"scrollCursorIntoView")){var b=l.display,m=b.sizer.getBoundingClientRect(),S=null,L=b.wrapper.ownerDocument;if(d.top+m.top<0?S=!0:d.bottom+m.top>(L.defaultView.innerHeight||L.documentElement.clientHeight)&&(S=!1),S!=null&&!v){var O=P("div","​",null,`position: absolute;
                         top: `+(d.top-b.viewOffset-_u(l.display))+`px;
                         height: `+(d.bottom-d.top+pa(l)+b.barHeight)+`px;
                         left: `+d.left+"px; width: "+Math.max(2,d.right-d.left)+"px;");l.display.lineSpace.appendChild(O),O.scrollIntoView(S),l.display.lineSpace.removeChild(O)}}}function b2(l,d,b,m){m==null&&(m=0);var S;!l.options.lineWrapping&&d==b&&(b=d.sticky=="before"?Re(d.line,d.ch+1,"before"):d,d=d.ch?Re(d.line,d.sticky=="before"?d.ch-1:d.ch,"after"):d);for(var L=0;L<5;L++){var O=!1,H=ra(l,d),Y=!b||b==d?H:ra(l,b);S={left:Math.min(H.left,Y.left),top:Math.min(H.top,Y.top)-m,right:Math.max(H.left,Y.left),bottom:Math.max(H.bottom,Y.bottom)+m};var J=_d(l,S),ce=l.doc.scrollTop,ge=l.doc.scrollLeft;if(J.scrollTop!=null&&($s(l,J.scrollTop),Math.abs(l.doc.scrollTop-ce)>1&&(O=!0)),J.scrollLeft!=null&&(Xi(l,J.scrollLeft),Math.abs(l.doc.scrollLeft-ge)>1&&(O=!0)),!O)break}return S}function w2(l,d){var b=_d(l,d);b.scrollTop!=null&&$s(l,b.scrollTop),b.scrollLeft!=null&&Xi(l,b.scrollLeft)}function _d(l,d){var b=l.display,m=Io(l.display);d.top<0&&(d.top=0);var S=l.curOp&&l.curOp.scrollTop!=null?l.curOp.scrollTop:b.scroller.scrollTop,L=gd(l),O={};d.bottom-d.top>L&&(d.bottom=d.top+L);var H=l.doc.height+pd(b),Y=d.top<m,J=d.bottom>H-m;if(d.top<S)O.scrollTop=Y?0:d.top;else if(d.bottom>S+L){var ce=Math.min(d.top,(J?H:d.bottom)-L);ce!=S&&(O.scrollTop=ce)}var ge=l.options.fixedGutter?0:b.gutters.offsetWidth,_e=l.curOp&&l.curOp.scrollLeft!=null?l.curOp.scrollLeft:b.scroller.scrollLeft-ge,Le=Vi(l)-b.gutters.offsetWidth,Ne=d.right-d.left>Le;return Ne&&(d.right=d.left+Le),d.left<10?O.scrollLeft=0:d.left<_e?O.scrollLeft=Math.max(0,d.left+ge-(Ne?0:10)):d.right>Le+_e-3&&(O.scrollLeft=d.right+(Ne?0:10)-Le),O}function Md(l,d){d!=null&&(Iu(l),l.curOp.scrollTop=(l.curOp.scrollTop==null?l.doc.scrollTop:l.curOp.scrollTop)+d)}function qo(l){Iu(l);var d=l.getCursor();l.curOp.scrollToPos={from:d,to:d,margin:l.options.cursorScrollMargin}}function Ws(l,d,b){(d!=null||b!=null)&&Iu(l),d!=null&&(l.curOp.scrollLeft=d),b!=null&&(l.curOp.scrollTop=b)}function x2(l,d){Iu(l),l.curOp.scrollToPos=d}function Iu(l){var d=l.curOp.scrollToPos;if(d){l.curOp.scrollToPos=null;var b=$w(l,d.from),m=$w(l,d.to);ex(l,b,m,d.margin)}}function ex(l,d,b,m){var S=_d(l,{left:Math.min(d.left,b.left),top:Math.min(d.top,b.top)-m,right:Math.max(d.right,b.right),bottom:Math.max(d.bottom,b.bottom)+m});Ws(l,S.scrollLeft,S.scrollTop)}function $s(l,d){Math.abs(l.doc.scrollTop-d)<2||(a||Pd(l,{top:d}),tx(l,d,!0),a&&Pd(l),Ks(l,100))}function tx(l,d,b){d=Math.max(0,Math.min(l.display.scroller.scrollHeight-l.display.scroller.clientHeight,d)),!(l.display.scroller.scrollTop==d&&!b)&&(l.doc.scrollTop=d,l.display.scrollbars.setScrollTop(d),l.display.scroller.scrollTop!=d&&(l.display.scroller.scrollTop=d))}function Xi(l,d,b,m){d=Math.max(0,Math.min(d,l.display.scroller.scrollWidth-l.display.scroller.clientWidth)),!((b?d==l.doc.scrollLeft:Math.abs(l.doc.scrollLeft-d)<2)&&!m)&&(l.doc.scrollLeft=d,ox(l),l.display.scroller.scrollLeft!=d&&(l.display.scroller.scrollLeft=d),l.display.scrollbars.setScrollLeft(d))}function Ys(l){var d=l.display,b=d.gutters.offsetWidth,m=Math.round(l.doc.height+pd(l.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:l.options.fixedGutter?b:0,docHeight:m,scrollHeight:m+pa(l)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:b}}var Ki=function(l,d,b){this.cm=b;var m=this.vert=P("div",[P("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),S=this.horiz=P("div",[P("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");m.tabIndex=S.tabIndex=-1,l(m),l(S),Ce(m,"scroll",function(){m.clientHeight&&d(m.scrollTop,"vertical")}),Ce(S,"scroll",function(){S.clientWidth&&d(S.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,u&&f<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ki.prototype.update=function(l){var d=l.scrollWidth>l.clientWidth+1,b=l.scrollHeight>l.clientHeight+1,m=l.nativeBarWidth;if(b){this.vert.style.display="block",this.vert.style.bottom=d?m+"px":"0";var S=l.viewHeight-(d?m:0);this.vert.firstChild.style.height=Math.max(0,l.scrollHeight-l.clientHeight+S)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(d){this.horiz.style.display="block",this.horiz.style.right=b?m+"px":"0",this.horiz.style.left=l.barLeft+"px";var L=l.viewWidth-l.barLeft-(b?m:0);this.horiz.firstChild.style.width=Math.max(0,l.scrollWidth-l.clientWidth+L)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&l.clientHeight>0&&(m==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:b?m:0,bottom:d?m:0}},Ki.prototype.setScrollLeft=function(l){this.horiz.scrollLeft!=l&&(this.horiz.scrollLeft=l),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ki.prototype.setScrollTop=function(l){this.vert.scrollTop!=l&&(this.vert.scrollTop=l),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ki.prototype.zeroWidthHack=function(){var l=A&&!E?"12px":"18px";this.horiz.style.height=this.vert.style.width=l,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new ie,this.disableVert=new ie},Ki.prototype.enableZeroWidthBar=function(l,d,b){l.style.visibility="";function m(){var S=l.getBoundingClientRect(),L=b=="vert"?document.elementFromPoint(S.right-1,(S.top+S.bottom)/2):document.elementFromPoint((S.right+S.left)/2,S.bottom-1);L!=l?l.style.visibility="hidden":d.set(1e3,m)}d.set(1e3,m)},Ki.prototype.clear=function(){var l=this.horiz.parentNode;l.removeChild(this.horiz),l.removeChild(this.vert)};var Xs=function(){};Xs.prototype.update=function(){return{bottom:0,right:0}},Xs.prototype.setScrollLeft=function(){},Xs.prototype.setScrollTop=function(){},Xs.prototype.clear=function(){};function zo(l,d){d||(d=Ys(l));var b=l.display.barWidth,m=l.display.barHeight;rx(l,d);for(var S=0;S<4&&b!=l.display.barWidth||m!=l.display.barHeight;S++)b!=l.display.barWidth&&l.options.lineWrapping&&Nu(l),rx(l,Ys(l)),b=l.display.barWidth,m=l.display.barHeight}function rx(l,d){var b=l.display,m=b.scrollbars.update(d);b.sizer.style.paddingRight=(b.barWidth=m.right)+"px",b.sizer.style.paddingBottom=(b.barHeight=m.bottom)+"px",b.heightForcer.style.borderBottom=m.bottom+"px solid transparent",m.right&&m.bottom?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=m.bottom+"px",b.scrollbarFiller.style.width=m.right+"px"):b.scrollbarFiller.style.display="",m.bottom&&l.options.coverGutterNextToScrollbar&&l.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=m.bottom+"px",b.gutterFiller.style.width=d.gutterWidth+"px"):b.gutterFiller.style.display=""}var nx={native:Ki,null:Xs};function ax(l){l.display.scrollbars&&(l.display.scrollbars.clear(),l.display.scrollbars.addClass&&B(l.display.wrapper,l.display.scrollbars.addClass)),l.display.scrollbars=new nx[l.options.scrollbarStyle](function(d){l.display.wrapper.insertBefore(d,l.display.scrollbarFiller),Ce(d,"mousedown",function(){l.state.focused&&setTimeout(function(){return l.display.input.focus()},0)}),d.setAttribute("cm-not-content","true")},function(d,b){b=="horizontal"?Xi(l,d):$s(l,d)},l),l.display.scrollbars.addClass&&re(l.display.wrapper,l.display.scrollbars.addClass)}var E2=0;function ji(l){l.curOp={cm:l,viewChanged:!1,startHeight:l.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++E2,markArrays:null},JO(l.curOp)}function Zi(l){var d=l.curOp;d&&t2(d,function(b){for(var m=0;m<b.ops.length;m++)b.ops[m].cm.curOp=null;C2(b)})}function C2(l){for(var d=l.ops,b=0;b<d.length;b++)T2(d[b]);for(var m=0;m<d.length;m++)S2(d[m]);for(var S=0;S<d.length;S++)A2(d[S]);for(var L=0;L<d.length;L++)L2(d[L]);for(var O=0;O<d.length;O++)D2(d[O])}function T2(l){var d=l.cm,b=d.display;M2(d),l.updateMaxLine&&hd(d),l.mustUpdate=l.viewChanged||l.forceUpdate||l.scrollTop!=null||l.scrollToPos&&(l.scrollToPos.from.line<b.viewFrom||l.scrollToPos.to.line>=b.viewTo)||b.maxLineChanged&&d.options.lineWrapping,l.update=l.mustUpdate&&new Fu(d,l.mustUpdate&&{top:l.scrollTop,ensure:l.scrollToPos},l.forceUpdate)}function S2(l){l.updatedDisplay=l.mustUpdate&&Rd(l.cm,l.update)}function A2(l){var d=l.cm,b=d.display;l.updatedDisplay&&Nu(d),l.barMeasure=Ys(d),b.maxLineChanged&&!d.options.lineWrapping&&(l.adjustWidthTo=Bw(d,b.maxLine,b.maxLine.text.length).left+3,d.display.sizerWidth=l.adjustWidthTo,l.barMeasure.scrollWidth=Math.max(b.scroller.clientWidth,b.sizer.offsetLeft+l.adjustWidthTo+pa(d)+d.display.barWidth),l.maxScrollLeft=Math.max(0,b.sizer.offsetLeft+l.adjustWidthTo-Vi(d))),(l.updatedDisplay||l.selectionChanged)&&(l.preparedSelection=b.input.prepareSelection())}function L2(l){var d=l.cm;l.adjustWidthTo!=null&&(d.display.sizer.style.minWidth=l.adjustWidthTo+"px",l.maxScrollLeft<d.doc.scrollLeft&&Xi(d,Math.min(d.display.scroller.scrollLeft,l.maxScrollLeft),!0),d.display.maxLineChanged=!1);var b=l.focus&&l.focus==ae(U(d));l.preparedSelection&&d.display.input.showSelection(l.preparedSelection,b),(l.updatedDisplay||l.startHeight!=d.doc.height)&&zo(d,l.barMeasure),l.updatedDisplay&&Nd(d,l.barMeasure),l.selectionChanged&&Ad(d),d.state.focused&&l.updateInput&&d.display.input.reset(l.typing),b&&Qw(l.cm)}function D2(l){var d=l.cm,b=d.display,m=d.doc;if(l.updatedDisplay&&ix(d,l.update),b.wheelStartX!=null&&(l.scrollTop!=null||l.scrollLeft!=null||l.scrollToPos)&&(b.wheelStartX=b.wheelStartY=null),l.scrollTop!=null&&tx(d,l.scrollTop,l.forceScroll),l.scrollLeft!=null&&Xi(d,l.scrollLeft,!0,!0),l.scrollToPos){var S=b2(d,Ct(m,l.scrollToPos.from),Ct(m,l.scrollToPos.to),l.scrollToPos.margin);m2(d,S)}var L=l.maybeHiddenMarkers,O=l.maybeUnhiddenMarkers;if(L)for(var H=0;H<L.length;++H)L[H].lines.length||He(L[H],"hide");if(O)for(var Y=0;Y<O.length;++Y)O[Y].lines.length&&He(O[Y],"unhide");b.wrapper.offsetHeight&&(m.scrollTop=d.display.scroller.scrollTop),l.changeObjs&&He(d,"changes",d,l.changeObjs),l.update&&l.update.finish()}function Dn(l,d){if(l.curOp)return d();ji(l);try{return d()}finally{Zi(l)}}function Pr(l,d){return function(){if(l.curOp)return d.apply(l,arguments);ji(l);try{return d.apply(l,arguments)}finally{Zi(l)}}}function ln(l){return function(){if(this.curOp)return l.apply(this,arguments);ji(this);try{return l.apply(this,arguments)}finally{Zi(this)}}}function kr(l){return function(){var d=this.cm;if(!d||d.curOp)return l.apply(this,arguments);ji(d);try{return l.apply(this,arguments)}finally{Zi(d)}}}function Ks(l,d){l.doc.highlightFrontier<l.display.viewTo&&l.state.highlight.set(d,ee(_2,l))}function _2(l){var d=l.doc;if(!(d.highlightFrontier>=l.display.viewTo)){var b=+new Date+l.options.workTime,m=Bs(l,d.highlightFrontier),S=[];d.iter(m.line,Math.min(d.first+d.size,l.display.viewTo+500),function(L){if(m.line>=l.display.viewFrom){var O=L.styles,H=L.text.length>l.options.maxHighlightLength?sn(d.mode,m.state):null,Y=dw(l,L,m,!0);H&&(m.state=H),L.styles=Y.styles;var J=L.styleClasses,ce=Y.classes;ce?L.styleClasses=ce:J&&(L.styleClasses=null);for(var ge=!O||O.length!=L.styles.length||J!=ce&&(!J||!ce||J.bgClass!=ce.bgClass||J.textClass!=ce.textClass),_e=0;!ge&&_e<O.length;++_e)ge=O[_e]!=L.styles[_e];ge&&S.push(m.line),L.stateAfter=m.save(),m.nextLine()}else L.text.length<=l.options.maxHighlightLength&&sd(l,L.text,m),L.stateAfter=m.line%5==0?m.save():null,m.nextLine();if(+new Date>b)return Ks(l,l.options.workDelay),!0}),d.highlightFrontier=m.line,d.modeFrontier=Math.max(d.modeFrontier,m.line),S.length&&Dn(l,function(){for(var L=0;L<S.length;L++)oi(l,S[L],"text")})}}var Fu=function(l,d,b){var m=l.display;this.viewport=d,this.visible=Ou(m,l.doc,d),this.editorIsHidden=!m.wrapper.offsetWidth,this.wrapperHeight=m.wrapper.clientHeight,this.wrapperWidth=m.wrapper.clientWidth,this.oldDisplayWidth=Vi(l),this.force=b,this.dims=Ed(l),this.events=[]};Fu.prototype.signal=function(l,d){et(l,d)&&this.events.push(arguments)},Fu.prototype.finish=function(){for(var l=0;l<this.events.length;l++)He.apply(null,this.events[l])};function M2(l){var d=l.display;!d.scrollbarsClipped&&d.scroller.offsetWidth&&(d.nativeBarWidth=d.scroller.offsetWidth-d.scroller.clientWidth,d.heightForcer.style.height=pa(l)+"px",d.sizer.style.marginBottom=-d.nativeBarWidth+"px",d.sizer.style.borderRightWidth=pa(l)+"px",d.scrollbarsClipped=!0)}function R2(l){if(l.hasFocus())return null;var d=ae(U(l));if(!d||!z(l.display.lineDiv,d))return null;var b={activeElt:d};if(window.getSelection){var m=X(l).getSelection();m.anchorNode&&m.extend&&z(l.display.lineDiv,m.anchorNode)&&(b.anchorNode=m.anchorNode,b.anchorOffset=m.anchorOffset,b.focusNode=m.focusNode,b.focusOffset=m.focusOffset)}return b}function P2(l){if(!(!l||!l.activeElt||l.activeElt==ae(W(l.activeElt)))&&(l.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(l.activeElt.nodeName)&&l.anchorNode&&z(document.body,l.anchorNode)&&z(document.body,l.focusNode))){var d=l.activeElt.ownerDocument,b=d.defaultView.getSelection(),m=d.createRange();m.setEnd(l.anchorNode,l.anchorOffset),m.collapse(!1),b.removeAllRanges(),b.addRange(m),b.extend(l.focusNode,l.focusOffset)}}function Rd(l,d){var b=l.display,m=l.doc;if(d.editorIsHidden)return si(l),!1;if(!d.force&&d.visible.from>=b.viewFrom&&d.visible.to<=b.viewTo&&(b.updateLineNumbers==null||b.updateLineNumbers>=b.viewTo)&&b.renderedView==b.view&&jw(l)==0)return!1;sx(l)&&(si(l),d.dims=Ed(l));var S=m.first+m.size,L=Math.max(d.visible.from-l.options.viewportMargin,m.first),O=Math.min(S,d.visible.to+l.options.viewportMargin);b.viewFrom<L&&L-b.viewFrom<20&&(L=Math.max(m.first,b.viewFrom)),b.viewTo>O&&b.viewTo-O<20&&(O=Math.min(S,b.viewTo)),Na&&(L=cd(l.doc,L),O=Aw(l.doc,O));var H=L!=b.viewFrom||O!=b.viewTo||b.lastWrapHeight!=d.wrapperHeight||b.lastWrapWidth!=d.wrapperWidth;g2(l,L,O),b.viewOffset=Oa(ct(l.doc,b.viewFrom)),l.display.mover.style.top=b.viewOffset+"px";var Y=jw(l);if(!H&&Y==0&&!d.force&&b.renderedView==b.view&&(b.updateLineNumbers==null||b.updateLineNumbers>=b.viewTo))return!1;var J=R2(l);return Y>4&&(b.lineDiv.style.display="none"),k2(l,b.updateLineNumbers,d.dims),Y>4&&(b.lineDiv.style.display=""),b.renderedView=b.view,P2(J),q(b.cursorDiv),q(b.selectionDiv),b.gutters.style.height=b.sizer.style.minHeight=0,H&&(b.lastWrapHeight=d.wrapperHeight,b.lastWrapWidth=d.wrapperWidth,Ks(l,400)),b.updateLineNumbers=null,!0}function ix(l,d){for(var b=d.viewport,m=!0;;m=!1){if(!m||!l.options.lineWrapping||d.oldDisplayWidth==Vi(l)){if(b&&b.top!=null&&(b={top:Math.min(l.doc.height+pd(l.display)-gd(l),b.top)}),d.visible=Ou(l.display,l.doc,b),d.visible.from>=l.display.viewFrom&&d.visible.to<=l.display.viewTo)break}else m&&(d.visible=Ou(l.display,l.doc,b));if(!Rd(l,d))break;Nu(l);var S=Ys(l);Vs(l),zo(l,S),Nd(l,S),d.force=!1}d.signal(l,"update",l),(l.display.viewFrom!=l.display.reportedViewFrom||l.display.viewTo!=l.display.reportedViewTo)&&(d.signal(l,"viewportChange",l,l.display.viewFrom,l.display.viewTo),l.display.reportedViewFrom=l.display.viewFrom,l.display.reportedViewTo=l.display.viewTo)}function Pd(l,d){var b=new Fu(l,d);if(Rd(l,b)){Nu(l),ix(l,b);var m=Ys(l);Vs(l),zo(l,m),Nd(l,m),b.finish()}}function k2(l,d,b){var m=l.display,S=l.options.lineNumbers,L=m.lineDiv,O=L.firstChild;function H(Ne){var Be=Ne.nextSibling;return c&&A&&l.display.currentWheelTarget==Ne?Ne.style.display="none":Ne.parentNode.removeChild(Ne),Be}for(var Y=m.view,J=m.viewFrom,ce=0;ce<Y.length;ce++){var ge=Y[ce];if(!ge.hidden)if(!ge.node||ge.node.parentNode!=L){var _e=o2(l,ge,J,b);L.insertBefore(_e,O)}else{for(;O!=ge.node;)O=H(O);var Le=S&&d!=null&&d<=J&&ge.lineNumber;ge.changes&&(se(ge.changes,"gutter")>-1&&(Le=!1),Rw(l,ge,J,b)),Le&&(q(ge.lineNumber),ge.lineNumber.appendChild(document.createTextNode(ze(l.options,J)))),O=ge.node.nextSibling}J+=ge.size}for(;O;)O=H(O)}function kd(l){var d=l.gutters.offsetWidth;l.sizer.style.marginLeft=d+"px",Rr(l,"gutterChanged",l)}function Nd(l,d){l.display.sizer.style.minHeight=d.docHeight+"px",l.display.heightForcer.style.top=d.docHeight+"px",l.display.gutters.style.height=d.docHeight+l.display.barHeight+pa(l)+"px"}function ox(l){var d=l.display,b=d.view;if(!(!d.alignWidgets&&(!d.gutters.firstChild||!l.options.fixedGutter))){for(var m=Cd(d)-d.scroller.scrollLeft+l.doc.scrollLeft,S=d.gutters.offsetWidth,L=m+"px",O=0;O<b.length;O++)if(!b[O].hidden){l.options.fixedGutter&&(b[O].gutter&&(b[O].gutter.style.left=L),b[O].gutterBackground&&(b[O].gutterBackground.style.left=L));var H=b[O].alignable;if(H)for(var Y=0;Y<H.length;Y++)H[Y].style.left=L}l.options.fixedGutter&&(d.gutters.style.left=m+S+"px")}}function sx(l){if(!l.options.lineNumbers)return!1;var d=l.doc,b=ze(l.options,d.first+d.size-1),m=l.display;if(b.length!=m.lineNumChars){var S=m.measure.appendChild(P("div",[P("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),L=S.firstChild.offsetWidth,O=S.offsetWidth-L;return m.lineGutter.style.width="",m.lineNumInnerWidth=Math.max(L,m.lineGutter.offsetWidth-O)+1,m.lineNumWidth=m.lineNumInnerWidth+O,m.lineNumChars=m.lineNumInnerWidth?b.length:-1,m.lineGutter.style.width=m.lineNumWidth+"px",kd(l.display),!0}return!1}function Od(l,d){for(var b=[],m=!1,S=0;S<l.length;S++){var L=l[S],O=null;if(typeof L!="string"&&(O=L.style,L=L.className),L=="CodeMirror-linenumbers")if(d)m=!0;else continue;b.push({className:L,style:O})}return d&&!m&&b.push({className:"CodeMirror-linenumbers",style:null}),b}function lx(l){var d=l.gutters,b=l.gutterSpecs;q(d),l.lineGutter=null;for(var m=0;m<b.length;++m){var S=b[m],L=S.className,O=S.style,H=d.appendChild(P("div",null,"CodeMirror-gutter "+L));O&&(H.style.cssText=O),L=="CodeMirror-linenumbers"&&(l.lineGutter=H,H.style.width=(l.lineNumWidth||1)+"px")}d.style.display=b.length?"":"none",kd(l)}function js(l){lx(l.display),mn(l),ox(l)}function N2(l,d,b,m){var S=this;this.input=b,S.scrollbarFiller=P("div",null,"CodeMirror-scrollbar-filler"),S.scrollbarFiller.setAttribute("cm-not-content","true"),S.gutterFiller=P("div",null,"CodeMirror-gutter-filler"),S.gutterFiller.setAttribute("cm-not-content","true"),S.lineDiv=N("div",null,"CodeMirror-code"),S.selectionDiv=P("div",null,null,"position: relative; z-index: 1"),S.cursorDiv=P("div",null,"CodeMirror-cursors"),S.measure=P("div",null,"CodeMirror-measure"),S.lineMeasure=P("div",null,"CodeMirror-measure"),S.lineSpace=N("div",[S.measure,S.lineMeasure,S.selectionDiv,S.cursorDiv,S.lineDiv],null,"position: relative; outline: none");var L=N("div",[S.lineSpace],"CodeMirror-lines");S.mover=P("div",[L],null,"position: relative"),S.sizer=P("div",[S.mover],"CodeMirror-sizer"),S.sizerWidth=null,S.heightForcer=P("div",null,null,"position: absolute; height: "+$+"px; width: 1px;"),S.gutters=P("div",null,"CodeMirror-gutters"),S.lineGutter=null,S.scroller=P("div",[S.sizer,S.heightForcer,S.gutters],"CodeMirror-scroll"),S.scroller.setAttribute("tabIndex","-1"),S.wrapper=P("div",[S.scrollbarFiller,S.gutterFiller,S.scroller],"CodeMirror"),g&&y>=105&&(S.wrapper.style.clipPath="inset(0px)"),S.wrapper.setAttribute("translate","no"),u&&f<8&&(S.gutters.style.zIndex=-1,S.scroller.style.paddingRight=0),!c&&!(a&&T)&&(S.scroller.draggable=!0),l&&(l.appendChild?l.appendChild(S.wrapper):l(S.wrapper)),S.viewFrom=S.viewTo=d.first,S.reportedViewFrom=S.reportedViewTo=d.first,S.view=[],S.renderedView=null,S.externalMeasured=null,S.viewOffset=0,S.lastWrapHeight=S.lastWrapWidth=0,S.updateLineNumbers=null,S.nativeBarWidth=S.barHeight=S.barWidth=0,S.scrollbarsClipped=!1,S.lineNumWidth=S.lineNumInnerWidth=S.lineNumChars=null,S.alignWidgets=!1,S.cachedCharWidth=S.cachedTextHeight=S.cachedPaddingH=null,S.maxLine=null,S.maxLineLength=0,S.maxLineChanged=!1,S.wheelDX=S.wheelDY=S.wheelStartX=S.wheelStartY=null,S.shift=!1,S.selForContextMenu=null,S.activeTouch=null,S.gutterSpecs=Od(m.gutters,m.lineNumbers),lx(S),b.init(S)}var Bu=0,Fa=null;u?Fa=-.53:a?Fa=15:g?Fa=-.7:C&&(Fa=-1/3);function ux(l){var d=l.wheelDeltaX,b=l.wheelDeltaY;return d==null&&l.detail&&l.axis==l.HORIZONTAL_AXIS&&(d=l.detail),b==null&&l.detail&&l.axis==l.VERTICAL_AXIS?b=l.detail:b==null&&(b=l.wheelDelta),{x:d,y:b}}function O2(l){var d=ux(l);return d.x*=Fa,d.y*=Fa,d}function fx(l,d){g&&y==102&&(l.display.chromeScrollHack==null?l.display.sizer.style.pointerEvents="none":clearTimeout(l.display.chromeScrollHack),l.display.chromeScrollHack=setTimeout(function(){l.display.chromeScrollHack=null,l.display.sizer.style.pointerEvents=""},100));var b=ux(d),m=b.x,S=b.y,L=Fa;d.deltaMode===0&&(m=d.deltaX,S=d.deltaY,L=1);var O=l.display,H=O.scroller,Y=H.scrollWidth>H.clientWidth,J=H.scrollHeight>H.clientHeight;if(m&&Y||S&&J){if(S&&A&&c){e:for(var ce=d.target,ge=O.view;ce!=H;ce=ce.parentNode)for(var _e=0;_e<ge.length;_e++)if(ge[_e].node==ce){l.display.currentWheelTarget=ce;break e}}if(m&&!a&&!p&&L!=null){S&&J&&$s(l,Math.max(0,H.scrollTop+S*L)),Xi(l,Math.max(0,H.scrollLeft+m*L)),(!S||S&&J)&&$e(d),O.wheelStartX=null;return}if(S&&L!=null){var Le=S*L,Ne=l.doc.scrollTop,Be=Ne+O.wrapper.clientHeight;Le<0?Ne=Math.max(0,Ne+Le-50):Be=Math.min(l.doc.height,Be+Le+50),Pd(l,{top:Ne,bottom:Be})}Bu<20&&d.deltaMode!==0&&(O.wheelStartX==null?(O.wheelStartX=H.scrollLeft,O.wheelStartY=H.scrollTop,O.wheelDX=m,O.wheelDY=S,setTimeout(function(){if(O.wheelStartX!=null){var Ke=H.scrollLeft-O.wheelStartX,tt=H.scrollTop-O.wheelStartY,lt=tt&&O.wheelDY&&tt/O.wheelDY||Ke&&O.wheelDX&&Ke/O.wheelDX;O.wheelStartX=O.wheelStartY=null,lt&&(Fa=(Fa*Bu+lt)/(Bu+1),++Bu)}},200)):(O.wheelDX+=m,O.wheelDY+=S))}}var On=function(l,d){this.ranges=l,this.primIndex=d};On.prototype.primary=function(){return this.ranges[this.primIndex]},On.prototype.equals=function(l){if(l==this)return!0;if(l.primIndex!=this.primIndex||l.ranges.length!=this.ranges.length)return!1;for(var d=0;d<this.ranges.length;d++){var b=this.ranges[d],m=l.ranges[d];if(!kt(b.anchor,m.anchor)||!kt(b.head,m.head))return!1}return!0},On.prototype.deepCopy=function(){for(var l=[],d=0;d<this.ranges.length;d++)l[d]=new zt(Mr(this.ranges[d].anchor),Mr(this.ranges[d].head));return new On(l,this.primIndex)},On.prototype.somethingSelected=function(){for(var l=0;l<this.ranges.length;l++)if(!this.ranges[l].empty())return!0;return!1},On.prototype.contains=function(l,d){d||(d=l);for(var b=0;b<this.ranges.length;b++){var m=this.ranges[b];if(Ze(d,m.from())>=0&&Ze(l,m.to())<=0)return b}return-1};var zt=function(l,d){this.anchor=l,this.head=d};zt.prototype.from=function(){return Po(this.anchor,this.head)},zt.prototype.to=function(){return yn(this.anchor,this.head)},zt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function na(l,d,b){var m=l&&l.options.selectionsMayTouch,S=d[b];d.sort(function(_e,Le){return Ze(_e.from(),Le.from())}),b=se(d,S);for(var L=1;L<d.length;L++){var O=d[L],H=d[L-1],Y=Ze(H.to(),O.from());if(m&&!O.empty()?Y>0:Y>=0){var J=Po(H.from(),O.from()),ce=yn(H.to(),O.to()),ge=H.empty()?O.from()==O.head:H.from()==H.head;L<=b&&--b,d.splice(--L,2,new zt(ge?ce:J,ge?J:ce))}}return new On(d,b)}function li(l,d){return new On([new zt(l,d||l)],0)}function ui(l){return l.text?Re(l.from.line+l.text.length-1,de(l.text).length+(l.text.length==1?l.from.ch:0)):l.to}function cx(l,d){if(Ze(l,d.from)<0)return l;if(Ze(l,d.to)<=0)return ui(d);var b=l.line+d.text.length-(d.to.line-d.from.line)-1,m=l.ch;return l.line==d.to.line&&(m+=ui(d).ch-d.to.ch),Re(b,m)}function Id(l,d){for(var b=[],m=0;m<l.sel.ranges.length;m++){var S=l.sel.ranges[m];b.push(new zt(cx(S.anchor,d),cx(S.head,d)))}return na(l.cm,b,l.sel.primIndex)}function dx(l,d,b){return l.line==d.line?Re(b.line,l.ch-d.ch+b.ch):Re(b.line+(l.line-d.line),l.ch)}function I2(l,d,b){for(var m=[],S=Re(l.first,0),L=S,O=0;O<d.length;O++){var H=d[O],Y=dx(H.from,S,L),J=dx(ui(H),S,L);if(S=H.to,L=J,b=="around"){var ce=l.sel.ranges[O],ge=Ze(ce.head,ce.anchor)<0;m[O]=new zt(ge?J:Y,ge?Y:J)}else m[O]=new zt(Y,Y)}return new On(m,l.sel.primIndex)}function Fd(l){l.doc.mode=Qn(l.options,l.doc.modeOption),Zs(l)}function Zs(l){l.doc.iter(function(d){d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null)}),l.doc.modeFrontier=l.doc.highlightFrontier=l.doc.first,Ks(l,100),l.state.modeGen++,l.curOp&&mn(l)}function hx(l,d){return d.from.ch==0&&d.to.ch==0&&de(d.text)==""&&(!l.cm||l.cm.options.wholeLineUpdateBefore)}function Bd(l,d,b,m){function S(lt){return b?b[lt]:null}function L(lt,rt,ut){VO(lt,rt,ut,m),Rr(lt,"change",lt,d)}function O(lt,rt){for(var ut=[],yt=lt;yt<rt;++yt)ut.push(new ko(J[yt],S(yt),m));return ut}var H=d.from,Y=d.to,J=d.text,ce=ct(l,H.line),ge=ct(l,Y.line),_e=de(J),Le=S(J.length-1),Ne=Y.line-H.line;if(d.full)l.insert(0,O(0,J.length)),l.remove(J.length,l.size-J.length);else if(hx(l,d)){var Be=O(0,J.length-1);L(ge,ge.text,Le),Ne&&l.remove(H.line,Ne),Be.length&&l.insert(H.line,Be)}else if(ce==ge)if(J.length==1)L(ce,ce.text.slice(0,H.ch)+_e+ce.text.slice(Y.ch),Le);else{var Ke=O(1,J.length-1);Ke.push(new ko(_e+ce.text.slice(Y.ch),Le,m)),L(ce,ce.text.slice(0,H.ch)+J[0],S(0)),l.insert(H.line+1,Ke)}else if(J.length==1)L(ce,ce.text.slice(0,H.ch)+J[0]+ge.text.slice(Y.ch),S(0)),l.remove(H.line+1,Ne);else{L(ce,ce.text.slice(0,H.ch)+J[0],S(0)),L(ge,_e+ge.text.slice(Y.ch),Le);var tt=O(1,J.length-1);Ne>1&&l.remove(H.line+1,Ne-1),l.insert(H.line+1,tt)}Rr(l,"change",l,d)}function fi(l,d,b){function m(S,L,O){if(S.linked)for(var H=0;H<S.linked.length;++H){var Y=S.linked[H];if(Y.doc!=L){var J=O&&Y.sharedHist;b&&!J||(d(Y.doc,J),m(Y.doc,S,J))}}}m(l,null,!0)}function vx(l,d){if(d.cm)throw new Error("This document is already in use.");l.doc=d,d.cm=l,Td(l),Fd(l),px(l),l.options.direction=d.direction,l.options.lineWrapping||hd(l),l.options.mode=d.modeOption,mn(l)}function px(l){(l.doc.direction=="rtl"?re:B)(l.display.lineDiv,"CodeMirror-rtl")}function F2(l){Dn(l,function(){px(l),mn(l)})}function qu(l){this.done=[],this.undone=[],this.undoDepth=l?l.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=l?l.maxGeneration:1}function qd(l,d){var b={from:Mr(d.from),to:ui(d),text:Gr(l,d.from,d.to)};return mx(l,b,d.from.line,d.to.line+1),fi(l,function(m){return mx(m,b,d.from.line,d.to.line+1)},!0),b}function gx(l){for(;l.length;){var d=de(l);if(d.ranges)l.pop();else break}}function B2(l,d){if(d)return gx(l.done),de(l.done);if(l.done.length&&!de(l.done).ranges)return de(l.done);if(l.done.length>1&&!l.done[l.done.length-2].ranges)return l.done.pop(),de(l.done)}function yx(l,d,b,m){var S=l.history;S.undone.length=0;var L=+new Date,O,H;if((S.lastOp==m||S.lastOrigin==d.origin&&d.origin&&(d.origin.charAt(0)=="+"&&S.lastModTime>L-(l.cm?l.cm.options.historyEventDelay:500)||d.origin.charAt(0)=="*"))&&(O=B2(S,S.lastOp==m)))H=de(O.changes),Ze(d.from,d.to)==0&&Ze(d.from,H.to)==0?H.to=ui(d):O.changes.push(qd(l,d));else{var Y=de(S.done);for((!Y||!Y.ranges)&&zu(l.sel,S.done),O={changes:[qd(l,d)],generation:S.generation},S.done.push(O);S.done.length>S.undoDepth;)S.done.shift(),S.done[0].ranges||S.done.shift()}S.done.push(b),S.generation=++S.maxGeneration,S.lastModTime=S.lastSelTime=L,S.lastOp=S.lastSelOp=m,S.lastOrigin=S.lastSelOrigin=d.origin,H||He(l,"historyAdded")}function q2(l,d,b,m){var S=d.charAt(0);return S=="*"||S=="+"&&b.ranges.length==m.ranges.length&&b.somethingSelected()==m.somethingSelected()&&new Date-l.history.lastSelTime<=(l.cm?l.cm.options.historyEventDelay:500)}function z2(l,d,b,m){var S=l.history,L=m&&m.origin;b==S.lastSelOp||L&&S.lastSelOrigin==L&&(S.lastModTime==S.lastSelTime&&S.lastOrigin==L||q2(l,L,de(S.done),d))?S.done[S.done.length-1]=d:zu(d,S.done),S.lastSelTime=+new Date,S.lastSelOrigin=L,S.lastSelOp=b,m&&m.clearRedo!==!1&&gx(S.undone)}function zu(l,d){var b=de(d);b&&b.ranges&&b.equals(l)||d.push(l)}function mx(l,d,b,m){var S=d["spans_"+l.id],L=0;l.iter(Math.max(l.first,b),Math.min(l.first+l.size,m),function(O){O.markedSpans&&((S||(S=d["spans_"+l.id]={}))[L]=O.markedSpans),++L})}function G2(l){if(!l)return null;for(var d,b=0;b<l.length;++b)l[b].marker.explicitlyCleared?d||(d=l.slice(0,b)):d&&d.push(l[b]);return d?d.length?d:null:l}function H2(l,d){var b=d["spans_"+l.id];if(!b)return null;for(var m=[],S=0;S<d.text.length;++S)m.push(G2(b[S]));return m}function bx(l,d){var b=H2(l,d),m=ud(l,d);if(!b)return m;if(!m)return b;for(var S=0;S<b.length;++S){var L=b[S],O=m[S];if(L&&O)e:for(var H=0;H<O.length;++H){for(var Y=O[H],J=0;J<L.length;++J)if(L[J].marker==Y.marker)continue e;L.push(Y)}else O&&(b[S]=O)}return b}function Go(l,d,b){for(var m=[],S=0;S<l.length;++S){var L=l[S];if(L.ranges){m.push(b?On.prototype.deepCopy.call(L):L);continue}var O=L.changes,H=[];m.push({changes:H});for(var Y=0;Y<O.length;++Y){var J=O[Y],ce=void 0;if(H.push({from:J.from,to:J.to,text:J.text}),d)for(var ge in J)(ce=ge.match(/^spans_(\d+)$/))&&se(d,Number(ce[1]))>-1&&(de(H)[ge]=J[ge],delete J[ge])}}return m}function zd(l,d,b,m){if(m){var S=l.anchor;if(b){var L=Ze(d,S)<0;L!=Ze(b,S)<0?(S=d,d=b):L!=Ze(d,b)<0&&(d=b)}return new zt(S,d)}else return new zt(b||d,d)}function Gu(l,d,b,m,S){S==null&&(S=l.cm&&(l.cm.display.shift||l.extend)),Zr(l,new On([zd(l.sel.primary(),d,b,S)],0),m)}function wx(l,d,b){for(var m=[],S=l.cm&&(l.cm.display.shift||l.extend),L=0;L<l.sel.ranges.length;L++)m[L]=zd(l.sel.ranges[L],d[L],null,S);var O=na(l.cm,m,l.sel.primIndex);Zr(l,O,b)}function Gd(l,d,b,m){var S=l.sel.ranges.slice(0);S[d]=b,Zr(l,na(l.cm,S,l.sel.primIndex),m)}function xx(l,d,b,m){Zr(l,li(d,b),m)}function U2(l,d,b){var m={ranges:d.ranges,update:function(S){this.ranges=[];for(var L=0;L<S.length;L++)this.ranges[L]=new zt(Ct(l,S[L].anchor),Ct(l,S[L].head))},origin:b&&b.origin};return He(l,"beforeSelectionChange",l,m),l.cm&&He(l.cm,"beforeSelectionChange",l.cm,m),m.ranges!=d.ranges?na(l.cm,m.ranges,m.ranges.length-1):d}function Ex(l,d,b){var m=l.history.done,S=de(m);S&&S.ranges?(m[m.length-1]=d,Hu(l,d,b)):Zr(l,d,b)}function Zr(l,d,b){Hu(l,d,b),z2(l,l.sel,l.cm?l.cm.curOp.id:NaN,b)}function Hu(l,d,b){(et(l,"beforeSelectionChange")||l.cm&&et(l.cm,"beforeSelectionChange"))&&(d=U2(l,d,b));var m=b&&b.bias||(Ze(d.primary().head,l.sel.primary().head)<0?-1:1);Cx(l,Sx(l,d,m,!0)),!(b&&b.scroll===!1)&&l.cm&&l.cm.getOption("readOnly")!="nocursor"&&qo(l.cm)}function Cx(l,d){d.equals(l.sel)||(l.sel=d,l.cm&&(l.cm.curOp.updateInput=1,l.cm.curOp.selectionChanged=!0,je(l.cm)),Rr(l,"cursorActivity",l))}function Tx(l){Cx(l,Sx(l,l.sel,null,!1))}function Sx(l,d,b,m){for(var S,L=0;L<d.ranges.length;L++){var O=d.ranges[L],H=d.ranges.length==l.sel.ranges.length&&l.sel.ranges[L],Y=Uu(l,O.anchor,H&&H.anchor,b,m),J=O.head==O.anchor?Y:Uu(l,O.head,H&&H.head,b,m);(S||Y!=O.anchor||J!=O.head)&&(S||(S=d.ranges.slice(0,L)),S[L]=new zt(Y,J))}return S?na(l.cm,S,d.primIndex):d}function Ho(l,d,b,m,S){var L=ct(l,d.line);if(L.markedSpans)for(var O=0;O<L.markedSpans.length;++O){var H=L.markedSpans[O],Y=H.marker,J="selectLeft"in Y?!Y.selectLeft:Y.inclusiveLeft,ce="selectRight"in Y?!Y.selectRight:Y.inclusiveRight;if((H.from==null||(J?H.from<=d.ch:H.from<d.ch))&&(H.to==null||(ce?H.to>=d.ch:H.to>d.ch))){if(S&&(He(Y,"beforeCursorEnter"),Y.explicitlyCleared))if(L.markedSpans){--O;continue}else break;if(!Y.atomic)continue;if(b){var ge=Y.find(m<0?1:-1),_e=void 0;if((m<0?ce:J)&&(ge=Ax(l,ge,-m,ge&&ge.line==d.line?L:null)),ge&&ge.line==d.line&&(_e=Ze(ge,b))&&(m<0?_e<0:_e>0))return Ho(l,ge,d,m,S)}var Le=Y.find(m<0?-1:1);return(m<0?J:ce)&&(Le=Ax(l,Le,m,Le.line==d.line?L:null)),Le?Ho(l,Le,d,m,S):null}}return d}function Uu(l,d,b,m,S){var L=m||1,O=Ho(l,d,b,L,S)||!S&&Ho(l,d,b,L,!0)||Ho(l,d,b,-L,S)||!S&&Ho(l,d,b,-L,!0);return O||(l.cantEdit=!0,Re(l.first,0))}function Ax(l,d,b,m){return b<0&&d.ch==0?d.line>l.first?Ct(l,Re(d.line-1)):null:b>0&&d.ch==(m||ct(l,d.line)).text.length?d.line<l.first+l.size-1?Re(d.line+1,0):null:new Re(d.line,d.ch+b)}function Lx(l){l.setSelection(Re(l.firstLine(),0),Re(l.lastLine()),le)}function Dx(l,d,b){var m={canceled:!1,from:d.from,to:d.to,text:d.text,origin:d.origin,cancel:function(){return m.canceled=!0}};return b&&(m.update=function(S,L,O,H){S&&(m.from=Ct(l,S)),L&&(m.to=Ct(l,L)),O&&(m.text=O),H!==void 0&&(m.origin=H)}),He(l,"beforeChange",l,m),l.cm&&He(l.cm,"beforeChange",l.cm,m),m.canceled?(l.cm&&(l.cm.curOp.updateInput=2),null):{from:m.from,to:m.to,text:m.text,origin:m.origin}}function Uo(l,d,b){if(l.cm){if(!l.cm.curOp)return Pr(l.cm,Uo)(l,d,b);if(l.cm.state.suppressEdits)return}if(!((et(l,"beforeChange")||l.cm&&et(l.cm,"beforeChange"))&&(d=Dx(l,d,!0),!d))){var m=bw&&!b&&zO(l,d.from,d.to);if(m)for(var S=m.length-1;S>=0;--S)_x(l,{from:m[S].from,to:m[S].to,text:S?[""]:d.text,origin:d.origin});else _x(l,d)}}function _x(l,d){if(!(d.text.length==1&&d.text[0]==""&&Ze(d.from,d.to)==0)){var b=Id(l,d);yx(l,d,b,l.cm?l.cm.curOp.id:NaN),Qs(l,d,b,ud(l,d));var m=[];fi(l,function(S,L){!L&&se(m,S.history)==-1&&(kx(S.history,d),m.push(S.history)),Qs(S,d,null,ud(S,d))})}}function Vu(l,d,b){var m=l.cm&&l.cm.state.suppressEdits;if(!(m&&!b)){for(var S=l.history,L,O=l.sel,H=d=="undo"?S.done:S.undone,Y=d=="undo"?S.undone:S.done,J=0;J<H.length&&(L=H[J],!(b?L.ranges&&!L.equals(l.sel):!L.ranges));J++);if(J!=H.length){for(S.lastOrigin=S.lastSelOrigin=null;;)if(L=H.pop(),L.ranges){if(zu(L,Y),b&&!L.equals(l.sel)){Zr(l,L,{clearRedo:!1});return}O=L}else if(m){H.push(L);return}else break;var ce=[];zu(O,Y),Y.push({changes:ce,generation:S.generation}),S.generation=L.generation||++S.maxGeneration;for(var ge=et(l,"beforeChange")||l.cm&&et(l.cm,"beforeChange"),_e=function(Be){var Ke=L.changes[Be];if(Ke.origin=d,ge&&!Dx(l,Ke,!1))return H.length=0,{};ce.push(qd(l,Ke));var tt=Be?Id(l,Ke):de(H);Qs(l,Ke,tt,bx(l,Ke)),!Be&&l.cm&&l.cm.scrollIntoView({from:Ke.from,to:ui(Ke)});var lt=[];fi(l,function(rt,ut){!ut&&se(lt,rt.history)==-1&&(kx(rt.history,Ke),lt.push(rt.history)),Qs(rt,Ke,null,bx(rt,Ke))})},Le=L.changes.length-1;Le>=0;--Le){var Ne=_e(Le);if(Ne)return Ne.v}}}}function Mx(l,d){if(d!=0&&(l.first+=d,l.sel=new On(ye(l.sel.ranges,function(S){return new zt(Re(S.anchor.line+d,S.anchor.ch),Re(S.head.line+d,S.head.ch))}),l.sel.primIndex),l.cm)){mn(l.cm,l.first,l.first-d,d);for(var b=l.cm.display,m=b.viewFrom;m<b.viewTo;m++)oi(l.cm,m,"gutter")}}function Qs(l,d,b,m){if(l.cm&&!l.cm.curOp)return Pr(l.cm,Qs)(l,d,b,m);if(d.to.line<l.first){Mx(l,d.text.length-1-(d.to.line-d.from.line));return}if(!(d.from.line>l.lastLine())){if(d.from.line<l.first){var S=d.text.length-1-(l.first-d.from.line);Mx(l,S),d={from:Re(l.first,0),to:Re(d.to.line+S,d.to.ch),text:[de(d.text)],origin:d.origin}}var L=l.lastLine();d.to.line>L&&(d={from:d.from,to:Re(L,ct(l,L).text.length),text:[d.text[0]],origin:d.origin}),d.removed=Gr(l,d.from,d.to),b||(b=Id(l,d)),l.cm?V2(l.cm,d,m):Bd(l,d,m),Hu(l,b,le),l.cantEdit&&Uu(l,Re(l.firstLine(),0))&&(l.cantEdit=!1)}}function V2(l,d,b){var m=l.doc,S=l.display,L=d.from,O=d.to,H=!1,Y=L.line;l.options.lineWrapping||(Y=Q(ta(ct(m,L.line))),m.iter(Y,O.line+1,function(Le){if(Le==S.maxLine)return H=!0,!0})),m.sel.contains(d.from,d.to)>-1&&je(l),Bd(m,d,b,Kw(l)),l.options.lineWrapping||(m.iter(Y,L.line+d.text.length,function(Le){var Ne=Lu(Le);Ne>S.maxLineLength&&(S.maxLine=Le,S.maxLineLength=Ne,S.maxLineChanged=!0,H=!1)}),H&&(l.curOp.updateMaxLine=!0)),kO(m,L.line),Ks(l,400);var J=d.text.length-(O.line-L.line)-1;d.full?mn(l):L.line==O.line&&d.text.length==1&&!hx(l.doc,d)?oi(l,L.line,"text"):mn(l,L.line,O.line+1,J);var ce=et(l,"changes"),ge=et(l,"change");if(ge||ce){var _e={from:L,to:O,text:d.text,removed:d.removed,origin:d.origin};ge&&Rr(l,"change",l,_e),ce&&(l.curOp.changeObjs||(l.curOp.changeObjs=[])).push(_e)}l.display.selForContextMenu=null}function Vo(l,d,b,m,S){var L;m||(m=b),Ze(m,b)<0&&(L=[m,b],b=L[0],m=L[1]),typeof d=="string"&&(d=l.splitLines(d)),Uo(l,{from:b,to:m,text:d,origin:S})}function Rx(l,d,b,m){b<l.line?l.line+=m:d<l.line&&(l.line=d,l.ch=0)}function Px(l,d,b,m){for(var S=0;S<l.length;++S){var L=l[S],O=!0;if(L.ranges){L.copied||(L=l[S]=L.deepCopy(),L.copied=!0);for(var H=0;H<L.ranges.length;H++)Rx(L.ranges[H].anchor,d,b,m),Rx(L.ranges[H].head,d,b,m);continue}for(var Y=0;Y<L.changes.length;++Y){var J=L.changes[Y];if(b<J.from.line)J.from=Re(J.from.line+m,J.from.ch),J.to=Re(J.to.line+m,J.to.ch);else if(d<=J.to.line){O=!1;break}}O||(l.splice(0,S+1),S=0)}}function kx(l,d){var b=d.from.line,m=d.to.line,S=d.text.length-(m-b)-1;Px(l.done,b,m,S),Px(l.undone,b,m,S)}function Js(l,d,b,m){var S=d,L=d;return typeof d=="number"?L=ct(l,fw(l,d)):S=Q(d),S==null?null:(m(L,S)&&l.cm&&oi(l.cm,S,b),L)}function el(l){this.lines=l,this.parent=null;for(var d=0,b=0;b<l.length;++b)l[b].parent=this,d+=l[b].height;this.height=d}el.prototype={chunkSize:function(){return this.lines.length},removeInner:function(l,d){for(var b=l,m=l+d;b<m;++b){var S=this.lines[b];this.height-=S.height,WO(S),Rr(S,"delete")}this.lines.splice(l,d)},collapse:function(l){l.push.apply(l,this.lines)},insertInner:function(l,d,b){this.height+=b,this.lines=this.lines.slice(0,l).concat(d).concat(this.lines.slice(l));for(var m=0;m<d.length;++m)d[m].parent=this},iterN:function(l,d,b){for(var m=l+d;l<m;++l)if(b(this.lines[l]))return!0}};function tl(l){this.children=l;for(var d=0,b=0,m=0;m<l.length;++m){var S=l[m];d+=S.chunkSize(),b+=S.height,S.parent=this}this.size=d,this.height=b,this.parent=null}tl.prototype={chunkSize:function(){return this.size},removeInner:function(l,d){this.size-=d;for(var b=0;b<this.children.length;++b){var m=this.children[b],S=m.chunkSize();if(l<S){var L=Math.min(d,S-l),O=m.height;if(m.removeInner(l,L),this.height-=O-m.height,S==L&&(this.children.splice(b--,1),m.parent=null),(d-=L)==0)break;l=0}else l-=S}if(this.size-d<25&&(this.children.length>1||!(this.children[0]instanceof el))){var H=[];this.collapse(H),this.children=[new el(H)],this.children[0].parent=this}},collapse:function(l){for(var d=0;d<this.children.length;++d)this.children[d].collapse(l)},insertInner:function(l,d,b){this.size+=d.length,this.height+=b;for(var m=0;m<this.children.length;++m){var S=this.children[m],L=S.chunkSize();if(l<=L){if(S.insertInner(l,d,b),S.lines&&S.lines.length>50){for(var O=S.lines.length%25+25,H=O;H<S.lines.length;){var Y=new el(S.lines.slice(H,H+=25));S.height-=Y.height,this.children.splice(++m,0,Y),Y.parent=this}S.lines=S.lines.slice(0,O),this.maybeSpill()}break}l-=L}},maybeSpill:function(){if(!(this.children.length<=10)){var l=this;do{var d=l.children.splice(l.children.length-5,5),b=new tl(d);if(l.parent){l.size-=b.size,l.height-=b.height;var S=se(l.parent.children,l);l.parent.children.splice(S+1,0,b)}else{var m=new tl(l.children);m.parent=l,l.children=[m,b],l=m}b.parent=l.parent}while(l.children.length>10);l.parent.maybeSpill()}},iterN:function(l,d,b){for(var m=0;m<this.children.length;++m){var S=this.children[m],L=S.chunkSize();if(l<L){var O=Math.min(d,L-l);if(S.iterN(l,O,b))return!0;if((d-=O)==0)break;l=0}else l-=L}}};var rl=function(l,d,b){if(b)for(var m in b)b.hasOwnProperty(m)&&(this[m]=b[m]);this.doc=l,this.node=d};rl.prototype.clear=function(){var l=this.doc.cm,d=this.line.widgets,b=this.line,m=Q(b);if(!(m==null||!d)){for(var S=0;S<d.length;++S)d[S]==this&&d.splice(S--,1);d.length||(b.widgets=null);var L=Hs(this);Pt(b,Math.max(0,b.height-L)),l&&(Dn(l,function(){Nx(l,b,-L),oi(l,m,"widget")}),Rr(l,"lineWidgetCleared",l,this,m))}},rl.prototype.changed=function(){var l=this,d=this.height,b=this.doc.cm,m=this.line;this.height=null;var S=Hs(this)-d;S&&(ii(this.doc,m)||Pt(m,m.height+S),b&&Dn(b,function(){b.curOp.forceUpdate=!0,Nx(b,m,S),Rr(b,"lineWidgetChanged",b,l,Q(m))}))},Ge(rl);function Nx(l,d,b){Oa(d)<(l.curOp&&l.curOp.scrollTop||l.doc.scrollTop)&&Md(l,b)}function W2(l,d,b,m){var S=new rl(l,b,m),L=l.cm;return L&&S.noHScroll&&(L.display.alignWidgets=!0),Js(l,d,"widget",function(O){var H=O.widgets||(O.widgets=[]);if(S.insertAt==null?H.push(S):H.splice(Math.min(H.length,Math.max(0,S.insertAt)),0,S),S.line=O,L&&!ii(l,O)){var Y=Oa(O)<l.scrollTop;Pt(O,O.height+Hs(S)),Y&&Md(L,S.height),L.curOp.forceUpdate=!0}return!0}),L&&Rr(L,"lineWidgetAdded",L,S,typeof d=="number"?d:Q(d)),S}var Ox=0,ci=function(l,d){this.lines=[],this.type=d,this.doc=l,this.id=++Ox};ci.prototype.clear=function(){if(!this.explicitlyCleared){var l=this.doc.cm,d=l&&!l.curOp;if(d&&ji(l),et(this,"clear")){var b=this.find();b&&Rr(this,"clear",b.from,b.to)}for(var m=null,S=null,L=0;L<this.lines.length;++L){var O=this.lines[L],H=qs(O.markedSpans,this);l&&!this.collapsed?oi(l,Q(O),"text"):l&&(H.to!=null&&(S=Q(O)),H.from!=null&&(m=Q(O))),O.markedSpans=IO(O.markedSpans,H),H.from==null&&this.collapsed&&!ii(this.doc,O)&&l&&Pt(O,Io(l.display))}if(l&&this.collapsed&&!l.options.lineWrapping)for(var Y=0;Y<this.lines.length;++Y){var J=ta(this.lines[Y]),ce=Lu(J);ce>l.display.maxLineLength&&(l.display.maxLine=J,l.display.maxLineLength=ce,l.display.maxLineChanged=!0)}m!=null&&l&&this.collapsed&&mn(l,m,S+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,l&&Tx(l.doc)),l&&Rr(l,"markerCleared",l,this,m,S),d&&Zi(l),this.parent&&this.parent.clear()}},ci.prototype.find=function(l,d){l==null&&this.type=="bookmark"&&(l=1);for(var b,m,S=0;S<this.lines.length;++S){var L=this.lines[S],O=qs(L.markedSpans,this);if(O.from!=null&&(b=Re(d?L:Q(L),O.from),l==-1))return b;if(O.to!=null&&(m=Re(d?L:Q(L),O.to),l==1))return m}return b&&{from:b,to:m}},ci.prototype.changed=function(){var l=this,d=this.find(-1,!0),b=this,m=this.doc.cm;!d||!m||Dn(m,function(){var S=d.line,L=Q(d.line),O=yd(m,L);if(O&&(Gw(O),m.curOp.selectionChanged=m.curOp.forceUpdate=!0),m.curOp.updateMaxLine=!0,!ii(b.doc,S)&&b.height!=null){var H=b.height;b.height=null;var Y=Hs(b)-H;Y&&Pt(S,S.height+Y)}Rr(m,"markerChanged",m,l)})},ci.prototype.attachLine=function(l){if(!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(!d.maybeHiddenMarkers||se(d.maybeHiddenMarkers,this)==-1)&&(d.maybeUnhiddenMarkers||(d.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(l)},ci.prototype.detachLine=function(l){if(this.lines.splice(se(this.lines,l),1),!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(d.maybeHiddenMarkers||(d.maybeHiddenMarkers=[])).push(this)}},Ge(ci);function Wo(l,d,b,m,S){if(m&&m.shared)return $2(l,d,b,m,S);if(l.cm&&!l.cm.curOp)return Pr(l.cm,Wo)(l,d,b,m,S);var L=new ci(l,S),O=Ze(d,b);if(m&&oe(m,L,!1),O>0||O==0&&L.clearWhenEmpty!==!1)return L;if(L.replacedWith&&(L.collapsed=!0,L.widgetNode=N("span",[L.replacedWith],"CodeMirror-widget"),m.handleMouseEvents||L.widgetNode.setAttribute("cm-ignore-events","true"),m.insertLeft&&(L.widgetNode.insertLeft=!0)),L.collapsed){if(Sw(l,d.line,d,b,L)||d.line!=b.line&&Sw(l,b.line,d,b,L))throw new Error("Inserting collapsed marker partially overlapping an existing one");OO()}L.addToHistory&&yx(l,{from:d,to:b,origin:"markText"},l.sel,NaN);var H=d.line,Y=l.cm,J;if(l.iter(H,b.line+1,function(ge){Y&&L.collapsed&&!Y.options.lineWrapping&&ta(ge)==Y.display.maxLine&&(J=!0),L.collapsed&&H!=d.line&&Pt(ge,0),FO(ge,new Cu(L,H==d.line?d.ch:null,H==b.line?b.ch:null),l.cm&&l.cm.curOp),++H}),L.collapsed&&l.iter(d.line,b.line+1,function(ge){ii(l,ge)&&Pt(ge,0)}),L.clearOnEnter&&Ce(L,"beforeCursorEnter",function(){return L.clear()}),L.readOnly&&(NO(),(l.history.done.length||l.history.undone.length)&&l.clearHistory()),L.collapsed&&(L.id=++Ox,L.atomic=!0),Y){if(J&&(Y.curOp.updateMaxLine=!0),L.collapsed)mn(Y,d.line,b.line+1);else if(L.className||L.startStyle||L.endStyle||L.css||L.attributes||L.title)for(var ce=d.line;ce<=b.line;ce++)oi(Y,ce,"text");L.atomic&&Tx(Y.doc),Rr(Y,"markerAdded",Y,L)}return L}var nl=function(l,d){this.markers=l,this.primary=d;for(var b=0;b<l.length;++b)l[b].parent=this};nl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var l=0;l<this.markers.length;++l)this.markers[l].clear();Rr(this,"clear")}},nl.prototype.find=function(l,d){return this.primary.find(l,d)},Ge(nl);function $2(l,d,b,m,S){m=oe(m),m.shared=!1;var L=[Wo(l,d,b,m,S)],O=L[0],H=m.widgetNode;return fi(l,function(Y){H&&(m.widgetNode=H.cloneNode(!0)),L.push(Wo(Y,Ct(Y,d),Ct(Y,b),m,S));for(var J=0;J<Y.linked.length;++J)if(Y.linked[J].isParent)return;O=de(L)}),new nl(L,O)}function Ix(l){return l.findMarks(Re(l.first,0),l.clipPos(Re(l.lastLine())),function(d){return d.parent})}function Y2(l,d){for(var b=0;b<d.length;b++){var m=d[b],S=m.find(),L=l.clipPos(S.from),O=l.clipPos(S.to);if(Ze(L,O)){var H=Wo(l,L,O,m.primary,m.primary.type);m.markers.push(H),H.parent=m}}}function X2(l){for(var d=function(m){var S=l[m],L=[S.primary.doc];fi(S.primary.doc,function(Y){return L.push(Y)});for(var O=0;O<S.markers.length;O++){var H=S.markers[O];se(L,H.doc)==-1&&(H.parent=null,S.markers.splice(O--,1))}},b=0;b<l.length;b++)d(b)}var K2=0,bn=function(l,d,b,m,S){if(!(this instanceof bn))return new bn(l,d,b,m,S);b==null&&(b=0),tl.call(this,[new el([new ko("",null)])]),this.first=b,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=b;var L=Re(b,0);this.sel=li(L),this.history=new qu(null),this.id=++K2,this.modeOption=d,this.lineSep=m,this.direction=S=="rtl"?"rtl":"ltr",this.extend=!1,typeof l=="string"&&(l=this.splitLines(l)),Bd(this,{from:L,to:L,text:l}),Zr(this,li(L),le)};bn.prototype=Ae(tl.prototype,{constructor:bn,iter:function(l,d,b){b?this.iterN(l-this.first,d-l,b):this.iterN(this.first,this.first+this.size,l)},insert:function(l,d){for(var b=0,m=0;m<d.length;++m)b+=d[m].height;this.insertInner(l-this.first,d,b)},remove:function(l,d){this.removeInner(l-this.first,d)},getValue:function(l){var d=ea(this,this.first,this.first+this.size);return l===!1?d:d.join(l||this.lineSeparator())},setValue:kr(function(l){var d=Re(this.first,0),b=this.first+this.size-1;Uo(this,{from:d,to:Re(b,ct(this,b).text.length),text:this.splitLines(l),origin:"setValue",full:!0},!0),this.cm&&Ws(this.cm,0,0),Zr(this,li(d),le)}),replaceRange:function(l,d,b,m){d=Ct(this,d),b=b?Ct(this,b):d,Vo(this,l,d,b,m)},getRange:function(l,d,b){var m=Gr(this,Ct(this,l),Ct(this,d));return b===!1?m:b===""?m.join(""):m.join(b||this.lineSeparator())},getLine:function(l){var d=this.getLineHandle(l);return d&&d.text},getLineHandle:function(l){if(ke(this,l))return ct(this,l)},getLineNumber:function(l){return Q(l)},getLineHandleVisualStart:function(l){return typeof l=="number"&&(l=ct(this,l)),ta(l)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(l){return Ct(this,l)},getCursor:function(l){var d=this.sel.primary(),b;return l==null||l=="head"?b=d.head:l=="anchor"?b=d.anchor:l=="end"||l=="to"||l===!1?b=d.to():b=d.from(),b},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:kr(function(l,d,b){xx(this,Ct(this,typeof l=="number"?Re(l,d||0):l),null,b)}),setSelection:kr(function(l,d,b){xx(this,Ct(this,l),Ct(this,d||l),b)}),extendSelection:kr(function(l,d,b){Gu(this,Ct(this,l),d&&Ct(this,d),b)}),extendSelections:kr(function(l,d){wx(this,cw(this,l),d)}),extendSelectionsBy:kr(function(l,d){var b=ye(this.sel.ranges,l);wx(this,cw(this,b),d)}),setSelections:kr(function(l,d,b){if(l.length){for(var m=[],S=0;S<l.length;S++)m[S]=new zt(Ct(this,l[S].anchor),Ct(this,l[S].head||l[S].anchor));d==null&&(d=Math.min(l.length-1,this.sel.primIndex)),Zr(this,na(this.cm,m,d),b)}}),addSelection:kr(function(l,d,b){var m=this.sel.ranges.slice(0);m.push(new zt(Ct(this,l),Ct(this,d||l))),Zr(this,na(this.cm,m,m.length-1),b)}),getSelection:function(l){for(var d=this.sel.ranges,b,m=0;m<d.length;m++){var S=Gr(this,d[m].from(),d[m].to());b=b?b.concat(S):S}return l===!1?b:b.join(l||this.lineSeparator())},getSelections:function(l){for(var d=[],b=this.sel.ranges,m=0;m<b.length;m++){var S=Gr(this,b[m].from(),b[m].to());l!==!1&&(S=S.join(l||this.lineSeparator())),d[m]=S}return d},replaceSelection:function(l,d,b){for(var m=[],S=0;S<this.sel.ranges.length;S++)m[S]=l;this.replaceSelections(m,d,b||"+input")},replaceSelections:kr(function(l,d,b){for(var m=[],S=this.sel,L=0;L<S.ranges.length;L++){var O=S.ranges[L];m[L]={from:O.from(),to:O.to(),text:this.splitLines(l[L]),origin:b}}for(var H=d&&d!="end"&&I2(this,m,d),Y=m.length-1;Y>=0;Y--)Uo(this,m[Y]);H?Ex(this,H):this.cm&&qo(this.cm)}),undo:kr(function(){Vu(this,"undo")}),redo:kr(function(){Vu(this,"redo")}),undoSelection:kr(function(){Vu(this,"undo",!0)}),redoSelection:kr(function(){Vu(this,"redo",!0)}),setExtending:function(l){this.extend=l},getExtending:function(){return this.extend},historySize:function(){for(var l=this.history,d=0,b=0,m=0;m<l.done.length;m++)l.done[m].ranges||++d;for(var S=0;S<l.undone.length;S++)l.undone[S].ranges||++b;return{undo:d,redo:b}},clearHistory:function(){var l=this;this.history=new qu(this.history),fi(this,function(d){return d.history=l.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(l){return l&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(l){return this.history.generation==(l||this.cleanGeneration)},getHistory:function(){return{done:Go(this.history.done),undone:Go(this.history.undone)}},setHistory:function(l){var d=this.history=new qu(this.history);d.done=Go(l.done.slice(0),null,!0),d.undone=Go(l.undone.slice(0),null,!0)},setGutterMarker:kr(function(l,d,b){return Js(this,l,"gutter",function(m){var S=m.gutterMarkers||(m.gutterMarkers={});return S[d]=b,!b&&Ve(S)&&(m.gutterMarkers=null),!0})}),clearGutter:kr(function(l){var d=this;this.iter(function(b){b.gutterMarkers&&b.gutterMarkers[l]&&Js(d,b,"gutter",function(){return b.gutterMarkers[l]=null,Ve(b.gutterMarkers)&&(b.gutterMarkers=null),!0})})}),lineInfo:function(l){var d;if(typeof l=="number"){if(!ke(this,l)||(d=l,l=ct(this,l),!l))return null}else if(d=Q(l),d==null)return null;return{line:d,handle:l,text:l.text,gutterMarkers:l.gutterMarkers,textClass:l.textClass,bgClass:l.bgClass,wrapClass:l.wrapClass,widgets:l.widgets}},addLineClass:kr(function(l,d,b){return Js(this,l,d=="gutter"?"gutter":"class",function(m){var S=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass";if(!m[S])m[S]=b;else{if(G(b).test(m[S]))return!1;m[S]+=" "+b}return!0})}),removeLineClass:kr(function(l,d,b){return Js(this,l,d=="gutter"?"gutter":"class",function(m){var S=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass",L=m[S];if(L)if(b==null)m[S]=null;else{var O=L.match(G(b));if(!O)return!1;var H=O.index+O[0].length;m[S]=L.slice(0,O.index)+(!O.index||H==L.length?"":" ")+L.slice(H)||null}else return!1;return!0})}),addLineWidget:kr(function(l,d,b){return W2(this,l,d,b)}),removeLineWidget:function(l){l.clear()},markText:function(l,d,b){return Wo(this,Ct(this,l),Ct(this,d),b,b&&b.type||"range")},setBookmark:function(l,d){var b={replacedWith:d&&(d.nodeType==null?d.widget:d),insertLeft:d&&d.insertLeft,clearWhenEmpty:!1,shared:d&&d.shared,handleMouseEvents:d&&d.handleMouseEvents};return l=Ct(this,l),Wo(this,l,l,b,"bookmark")},findMarksAt:function(l){l=Ct(this,l);var d=[],b=ct(this,l.line).markedSpans;if(b)for(var m=0;m<b.length;++m){var S=b[m];(S.from==null||S.from<=l.ch)&&(S.to==null||S.to>=l.ch)&&d.push(S.marker.parent||S.marker)}return d},findMarks:function(l,d,b){l=Ct(this,l),d=Ct(this,d);var m=[],S=l.line;return this.iter(l.line,d.line+1,function(L){var O=L.markedSpans;if(O)for(var H=0;H<O.length;H++){var Y=O[H];!(Y.to!=null&&S==l.line&&l.ch>=Y.to||Y.from==null&&S!=l.line||Y.from!=null&&S==d.line&&Y.from>=d.ch)&&(!b||b(Y.marker))&&m.push(Y.marker.parent||Y.marker)}++S}),m},getAllMarks:function(){var l=[];return this.iter(function(d){var b=d.markedSpans;if(b)for(var m=0;m<b.length;++m)b[m].from!=null&&l.push(b[m].marker)}),l},posFromIndex:function(l){var d,b=this.first,m=this.lineSeparator().length;return this.iter(function(S){var L=S.text.length+m;if(L>l)return d=l,!0;l-=L,++b}),Ct(this,Re(b,d))},indexFromPos:function(l){l=Ct(this,l);var d=l.ch;if(l.line<this.first||l.ch<0)return 0;var b=this.lineSeparator().length;return this.iter(this.first,l.line,function(m){d+=m.text.length+b}),d},copy:function(l){var d=new bn(ea(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return d.scrollTop=this.scrollTop,d.scrollLeft=this.scrollLeft,d.sel=this.sel,d.extend=!1,l&&(d.history.undoDepth=this.history.undoDepth,d.setHistory(this.getHistory())),d},linkedDoc:function(l){l||(l={});var d=this.first,b=this.first+this.size;l.from!=null&&l.from>d&&(d=l.from),l.to!=null&&l.to<b&&(b=l.to);var m=new bn(ea(this,d,b),l.mode||this.modeOption,d,this.lineSep,this.direction);return l.sharedHist&&(m.history=this.history),(this.linked||(this.linked=[])).push({doc:m,sharedHist:l.sharedHist}),m.linked=[{doc:this,isParent:!0,sharedHist:l.sharedHist}],Y2(m,Ix(this)),m},unlinkDoc:function(l){if(l instanceof ur&&(l=l.doc),this.linked)for(var d=0;d<this.linked.length;++d){var b=this.linked[d];if(b.doc==l){this.linked.splice(d,1),l.unlinkDoc(this),X2(Ix(this));break}}if(l.history==this.history){var m=[l.id];fi(l,function(S){return m.push(S.id)},!0),l.history=new qu(null),l.history.done=Go(this.history.done,m),l.history.undone=Go(this.history.undone,m)}},iterLinkedDocs:function(l){fi(this,l)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(l){return this.lineSep?l.split(this.lineSep):Ht(l)},lineSeparator:function(){return this.lineSep||`
`},setDirection:kr(function(l){l!="rtl"&&(l="ltr"),l!=this.direction&&(this.direction=l,this.iter(function(d){return d.order=null}),this.cm&&F2(this.cm))})}),bn.prototype.eachLine=bn.prototype.iter;var Fx=0;function j2(l){var d=this;if(Bx(d),!(Ue(d,l)||Ia(d.display,l))){$e(l),u&&(Fx=+new Date);var b=$i(d,l,!0),m=l.dataTransfer.files;if(!(!b||d.isReadOnly()))if(m&&m.length&&window.FileReader&&window.File)for(var S=m.length,L=Array(S),O=0,H=function(){++O==S&&Pr(d,function(){b=Ct(d.doc,b);var Le={from:b,to:b,text:d.doc.splitLines(L.filter(function(Ne){return Ne!=null}).join(d.doc.lineSeparator())),origin:"paste"};Uo(d.doc,Le),Ex(d.doc,li(Ct(d.doc,b),Ct(d.doc,ui(Le))))})()},Y=function(Le,Ne){if(d.options.allowDropFileTypes&&se(d.options.allowDropFileTypes,Le.type)==-1){H();return}var Be=new FileReader;Be.onerror=function(){return H()},Be.onload=function(){var Ke=Be.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Ke)){H();return}L[Ne]=Ke,H()},Be.readAsText(Le)},J=0;J<m.length;J++)Y(m[J],J);else{if(d.state.draggingText&&d.doc.sel.contains(b)>-1){d.state.draggingText(l),setTimeout(function(){return d.display.input.focus()},20);return}try{var ce=l.dataTransfer.getData("Text");if(ce){var ge;if(d.state.draggingText&&!d.state.draggingText.copy&&(ge=d.listSelections()),Hu(d.doc,li(b,b)),ge)for(var _e=0;_e<ge.length;++_e)Vo(d.doc,"",ge[_e].anchor,ge[_e].head,"drag");d.replaceSelection(ce,"around","paste"),d.display.input.focus()}}catch{}}}}function Z2(l,d){if(u&&(!l.state.draggingText||+new Date-Fx<100)){st(d);return}if(!(Ue(l,d)||Ia(l.display,d))&&(d.dataTransfer.setData("Text",l.getSelection()),d.dataTransfer.effectAllowed="copyMove",d.dataTransfer.setDragImage&&!C)){var b=P("img",null,null,"position: fixed; left: 0; top: 0;");b.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",p&&(b.width=b.height=1,l.display.wrapper.appendChild(b),b._top=b.offsetTop),d.dataTransfer.setDragImage(b,0,0),p&&b.parentNode.removeChild(b)}}function Q2(l,d){var b=$i(l,d);if(b){var m=document.createDocumentFragment();Sd(l,b,m),l.display.dragCursor||(l.display.dragCursor=P("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),l.display.lineSpace.insertBefore(l.display.dragCursor,l.display.cursorDiv)),R(l.display.dragCursor,m)}}function Bx(l){l.display.dragCursor&&(l.display.lineSpace.removeChild(l.display.dragCursor),l.display.dragCursor=null)}function qx(l){if(document.getElementsByClassName){for(var d=document.getElementsByClassName("CodeMirror"),b=[],m=0;m<d.length;m++){var S=d[m].CodeMirror;S&&b.push(S)}b.length&&b[0].operation(function(){for(var L=0;L<b.length;L++)l(b[L])})}}var zx=!1;function J2(){zx||(eI(),zx=!0)}function eI(){var l;Ce(window,"resize",function(){l==null&&(l=setTimeout(function(){l=null,qx(tI)},100))}),Ce(window,"blur",function(){return qx(Bo)})}function tI(l){var d=l.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.scrollbarsClipped=!1,l.setSize()}for(var di={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},al=0;al<10;al++)di[al+48]=di[al+96]=String(al);for(var Wu=65;Wu<=90;Wu++)di[Wu]=String.fromCharCode(Wu);for(var il=1;il<=12;il++)di[il+111]=di[il+63235]="F"+il;var Ba={};Ba.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ba.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ba.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ba.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ba.default=A?Ba.macDefault:Ba.pcDefault;function rI(l){var d=l.split(/-(?!$)/);l=d[d.length-1];for(var b,m,S,L,O=0;O<d.length-1;O++){var H=d[O];if(/^(cmd|meta|m)$/i.test(H))L=!0;else if(/^a(lt)?$/i.test(H))b=!0;else if(/^(c|ctrl|control)$/i.test(H))m=!0;else if(/^s(hift)?$/i.test(H))S=!0;else throw new Error("Unrecognized modifier name: "+H)}return b&&(l="Alt-"+l),m&&(l="Ctrl-"+l),L&&(l="Cmd-"+l),S&&(l="Shift-"+l),l}function nI(l){var d={};for(var b in l)if(l.hasOwnProperty(b)){var m=l[b];if(/^(name|fallthrough|(de|at)tach)$/.test(b))continue;if(m=="..."){delete l[b];continue}for(var S=ye(b.split(" "),rI),L=0;L<S.length;L++){var O=void 0,H=void 0;L==S.length-1?(H=S.join(" "),O=m):(H=S.slice(0,L+1).join(" "),O="...");var Y=d[H];if(!Y)d[H]=O;else if(Y!=O)throw new Error("Inconsistent bindings for "+H)}delete l[b]}for(var J in d)l[J]=d[J];return l}function $o(l,d,b,m){d=$u(d);var S=d.call?d.call(l,m):d[l];if(S===!1)return"nothing";if(S==="...")return"multi";if(S!=null&&b(S))return"handled";if(d.fallthrough){if(Object.prototype.toString.call(d.fallthrough)!="[object Array]")return $o(l,d.fallthrough,b,m);for(var L=0;L<d.fallthrough.length;L++){var O=$o(l,d.fallthrough[L],b,m);if(O)return O}}}function Gx(l){var d=typeof l=="string"?l:di[l.keyCode];return d=="Ctrl"||d=="Alt"||d=="Shift"||d=="Mod"}function Hx(l,d,b){var m=l;return d.altKey&&m!="Alt"&&(l="Alt-"+l),(k?d.metaKey:d.ctrlKey)&&m!="Ctrl"&&(l="Ctrl-"+l),(k?d.ctrlKey:d.metaKey)&&m!="Mod"&&(l="Cmd-"+l),!b&&d.shiftKey&&m!="Shift"&&(l="Shift-"+l),l}function Ux(l,d){if(p&&l.keyCode==34&&l.char)return!1;var b=di[l.keyCode];return b==null||l.altGraphKey?!1:(l.keyCode==3&&l.code&&(b=l.code),Hx(b,l,d))}function $u(l){return typeof l=="string"?Ba[l]:l}function Yo(l,d){for(var b=l.doc.sel.ranges,m=[],S=0;S<b.length;S++){for(var L=d(b[S]);m.length&&Ze(L.from,de(m).to)<=0;){var O=m.pop();if(Ze(O.from,L.from)<0){L.from=O.from;break}}m.push(L)}Dn(l,function(){for(var H=m.length-1;H>=0;H--)Vo(l.doc,"",m[H].from,m[H].to,"+delete");qo(l)})}function Hd(l,d,b){var m=We(l.text,d+b,b);return m<0||m>l.text.length?null:m}function Ud(l,d,b){var m=Hd(l,d.ch,b);return m==null?null:new Re(d.line,m,b<0?"after":"before")}function Vd(l,d,b,m,S){if(l){d.doc.direction=="rtl"&&(S=-S);var L=xe(b,d.doc.direction);if(L){var O=S<0?de(L):L[0],H=S<0==(O.level==1),Y=H?"after":"before",J;if(O.level>0||d.doc.direction=="rtl"){var ce=Oo(d,b);J=S<0?b.text.length-1:0;var ge=ga(d,ce,J).top;J=he(function(_e){return ga(d,ce,_e).top==ge},S<0==(O.level==1)?O.from:O.to-1,J),Y=="before"&&(J=Hd(b,J,1))}else J=S<0?O.to:O.from;return new Re(m,J,Y)}}return new Re(m,S<0?b.text.length:0,S<0?"before":"after")}function aI(l,d,b,m){var S=xe(d,l.doc.direction);if(!S)return Ud(d,b,m);b.ch>=d.text.length?(b.ch=d.text.length,b.sticky="before"):b.ch<=0&&(b.ch=0,b.sticky="after");var L=me(S,b.ch,b.sticky),O=S[L];if(l.doc.direction=="ltr"&&O.level%2==0&&(m>0?O.to>b.ch:O.from<b.ch))return Ud(d,b,m);var H=function(tt,lt){return Hd(d,tt instanceof Re?tt.ch:tt,lt)},Y,J=function(tt){return l.options.lineWrapping?(Y=Y||Oo(l,d),Xw(l,d,Y,tt)):{begin:0,end:d.text.length}},ce=J(b.sticky=="before"?H(b,-1):b.ch);if(l.doc.direction=="rtl"||O.level==1){var ge=O.level==1==m<0,_e=H(b,ge?1:-1);if(_e!=null&&(ge?_e<=O.to&&_e<=ce.end:_e>=O.from&&_e>=ce.begin)){var Le=ge?"before":"after";return new Re(b.line,_e,Le)}}var Ne=function(tt,lt,rt){for(var ut=function(Jt,Nr){return Nr?new Re(b.line,H(Jt,1),"before"):new Re(b.line,Jt,"after")};tt>=0&&tt<S.length;tt+=lt){var yt=S[tt],pt=lt>0==(yt.level!=1),At=pt?rt.begin:H(rt.end,-1);if(yt.from<=At&&At<yt.to||(At=pt?yt.from:H(yt.to,-1),rt.begin<=At&&At<rt.end))return ut(At,pt)}},Be=Ne(L+m,m,ce);if(Be)return Be;var Ke=m>0?ce.end:H(ce.begin,-1);return Ke!=null&&!(m>0&&Ke==d.text.length)&&(Be=Ne(m>0?0:S.length-1,m,J(Ke)),Be)?Be:null}var ol={selectAll:Lx,singleSelection:function(l){return l.setSelection(l.getCursor("anchor"),l.getCursor("head"),le)},killLine:function(l){return Yo(l,function(d){if(d.empty()){var b=ct(l.doc,d.head.line).text.length;return d.head.ch==b&&d.head.line<l.lastLine()?{from:d.head,to:Re(d.head.line+1,0)}:{from:d.head,to:Re(d.head.line,b)}}else return{from:d.from(),to:d.to()}})},deleteLine:function(l){return Yo(l,function(d){return{from:Re(d.from().line,0),to:Ct(l.doc,Re(d.to().line+1,0))}})},delLineLeft:function(l){return Yo(l,function(d){return{from:Re(d.from().line,0),to:d.from()}})},delWrappedLineLeft:function(l){return Yo(l,function(d){var b=l.charCoords(d.head,"div").top+5,m=l.coordsChar({left:0,top:b},"div");return{from:m,to:d.from()}})},delWrappedLineRight:function(l){return Yo(l,function(d){var b=l.charCoords(d.head,"div").top+5,m=l.coordsChar({left:l.display.lineDiv.offsetWidth+100,top:b},"div");return{from:d.from(),to:m}})},undo:function(l){return l.undo()},redo:function(l){return l.redo()},undoSelection:function(l){return l.undoSelection()},redoSelection:function(l){return l.redoSelection()},goDocStart:function(l){return l.extendSelection(Re(l.firstLine(),0))},goDocEnd:function(l){return l.extendSelection(Re(l.lastLine()))},goLineStart:function(l){return l.extendSelectionsBy(function(d){return Vx(l,d.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(l){return l.extendSelectionsBy(function(d){return Wx(l,d.head)},{origin:"+move",bias:1})},goLineEnd:function(l){return l.extendSelectionsBy(function(d){return iI(l,d.head.line)},{origin:"+move",bias:-1})},goLineRight:function(l){return l.extendSelectionsBy(function(d){var b=l.cursorCoords(d.head,"div").top+5;return l.coordsChar({left:l.display.lineDiv.offsetWidth+100,top:b},"div")},De)},goLineLeft:function(l){return l.extendSelectionsBy(function(d){var b=l.cursorCoords(d.head,"div").top+5;return l.coordsChar({left:0,top:b},"div")},De)},goLineLeftSmart:function(l){return l.extendSelectionsBy(function(d){var b=l.cursorCoords(d.head,"div").top+5,m=l.coordsChar({left:0,top:b},"div");return m.ch<l.getLine(m.line).search(/\S/)?Wx(l,d.head):m},De)},goLineUp:function(l){return l.moveV(-1,"line")},goLineDown:function(l){return l.moveV(1,"line")},goPageUp:function(l){return l.moveV(-1,"page")},goPageDown:function(l){return l.moveV(1,"page")},goCharLeft:function(l){return l.moveH(-1,"char")},goCharRight:function(l){return l.moveH(1,"char")},goColumnLeft:function(l){return l.moveH(-1,"column")},goColumnRight:function(l){return l.moveH(1,"column")},goWordLeft:function(l){return l.moveH(-1,"word")},goGroupRight:function(l){return l.moveH(1,"group")},goGroupLeft:function(l){return l.moveH(-1,"group")},goWordRight:function(l){return l.moveH(1,"word")},delCharBefore:function(l){return l.deleteH(-1,"codepoint")},delCharAfter:function(l){return l.deleteH(1,"char")},delWordBefore:function(l){return l.deleteH(-1,"word")},delWordAfter:function(l){return l.deleteH(1,"word")},delGroupBefore:function(l){return l.deleteH(-1,"group")},delGroupAfter:function(l){return l.deleteH(1,"group")},indentAuto:function(l){return l.indentSelection("smart")},indentMore:function(l){return l.indentSelection("add")},indentLess:function(l){return l.indentSelection("subtract")},insertTab:function(l){return l.replaceSelection("	")},insertSoftTab:function(l){for(var d=[],b=l.listSelections(),m=l.options.tabSize,S=0;S<b.length;S++){var L=b[S].from(),O=te(l.getLine(L.line),L.ch,m);d.push(pe(m-O%m))}l.replaceSelections(d)},defaultTab:function(l){l.somethingSelected()?l.indentSelection("add"):l.execCommand("insertTab")},transposeChars:function(l){return Dn(l,function(){for(var d=l.listSelections(),b=[],m=0;m<d.length;m++)if(d[m].empty()){var S=d[m].head,L=ct(l.doc,S.line).text;if(L){if(S.ch==L.length&&(S=new Re(S.line,S.ch-1)),S.ch>0)S=new Re(S.line,S.ch+1),l.replaceRange(L.charAt(S.ch-1)+L.charAt(S.ch-2),Re(S.line,S.ch-2),S,"+transpose");else if(S.line>l.doc.first){var O=ct(l.doc,S.line-1).text;O&&(S=new Re(S.line,1),l.replaceRange(L.charAt(0)+l.doc.lineSeparator()+O.charAt(O.length-1),Re(S.line-1,O.length-1),S,"+transpose"))}}b.push(new zt(S,S))}l.setSelections(b)})},newlineAndIndent:function(l){return Dn(l,function(){for(var d=l.listSelections(),b=d.length-1;b>=0;b--)l.replaceRange(l.doc.lineSeparator(),d[b].anchor,d[b].head,"+input");d=l.listSelections();for(var m=0;m<d.length;m++)l.indentLine(d[m].from().line,null,!0);qo(l)})},openLine:function(l){return l.replaceSelection(`
`,"start")},toggleOverwrite:function(l){return l.toggleOverwrite()}};function Vx(l,d){var b=ct(l.doc,d),m=ta(b);return m!=b&&(d=Q(m)),Vd(!0,l,m,d,1)}function iI(l,d){var b=ct(l.doc,d),m=HO(b);return m!=b&&(d=Q(m)),Vd(!0,l,b,d,-1)}function Wx(l,d){var b=Vx(l,d.line),m=ct(l.doc,b.line),S=xe(m,l.doc.direction);if(!S||S[0].level==0){var L=Math.max(b.ch,m.text.search(/\S/)),O=d.line==b.line&&d.ch<=L&&d.ch;return Re(b.line,O?0:L,b.sticky)}return b}function Yu(l,d,b){if(typeof d=="string"&&(d=ol[d],!d))return!1;l.display.input.ensurePolled();var m=l.display.shift,S=!1;try{l.isReadOnly()&&(l.state.suppressEdits=!0),b&&(l.display.shift=!1),S=d(l)!=ne}finally{l.display.shift=m,l.state.suppressEdits=!1}return S}function oI(l,d,b){for(var m=0;m<l.state.keyMaps.length;m++){var S=$o(d,l.state.keyMaps[m],b,l);if(S)return S}return l.options.extraKeys&&$o(d,l.options.extraKeys,b,l)||$o(d,l.options.keyMap,b,l)}var sI=new ie;function sl(l,d,b,m){var S=l.state.keySeq;if(S){if(Gx(d))return"handled";if(/\'$/.test(d)?l.state.keySeq=null:sI.set(50,function(){l.state.keySeq==S&&(l.state.keySeq=null,l.display.input.reset())}),$x(l,S+" "+d,b,m))return!0}return $x(l,d,b,m)}function $x(l,d,b,m){var S=oI(l,d,m);return S=="multi"&&(l.state.keySeq=d),S=="handled"&&Rr(l,"keyHandled",l,d,b),(S=="handled"||S=="multi")&&($e(b),Ad(l)),!!S}function Yx(l,d){var b=Ux(d,!0);return b?d.shiftKey&&!l.state.keySeq?sl(l,"Shift-"+b,d,function(m){return Yu(l,m,!0)})||sl(l,b,d,function(m){if(typeof m=="string"?/^go[A-Z]/.test(m):m.motion)return Yu(l,m)}):sl(l,b,d,function(m){return Yu(l,m)}):!1}function lI(l,d,b){return sl(l,"'"+b+"'",d,function(m){return Yu(l,m,!0)})}var Wd=null;function Xx(l){var d=this;if(!(l.target&&l.target!=d.display.input.getField())&&(d.curOp.focus=ae(U(d)),!Ue(d,l))){u&&f<11&&l.keyCode==27&&(l.returnValue=!1);var b=l.keyCode;d.display.shift=b==16||l.shiftKey;var m=Yx(d,l);p&&(Wd=m?b:null,!m&&b==88&&!on&&(A?l.metaKey:l.ctrlKey)&&d.replaceSelection("",null,"cut")),a&&!A&&!m&&b==46&&l.shiftKey&&!l.ctrlKey&&document.execCommand&&document.execCommand("cut"),b==18&&!/\bCodeMirror-crosshair\b/.test(d.display.lineDiv.className)&&uI(d)}}function uI(l){var d=l.display.lineDiv;re(d,"CodeMirror-crosshair");function b(m){(m.keyCode==18||!m.altKey)&&(B(d,"CodeMirror-crosshair"),Ie(document,"keyup",b),Ie(document,"mouseover",b))}Ce(document,"keyup",b),Ce(document,"mouseover",b)}function Kx(l){l.keyCode==16&&(this.doc.sel.shift=!1),Ue(this,l)}function jx(l){var d=this;if(!(l.target&&l.target!=d.display.input.getField())&&!(Ia(d.display,l)||Ue(d,l)||l.ctrlKey&&!l.altKey||A&&l.metaKey)){var b=l.keyCode,m=l.charCode;if(p&&b==Wd){Wd=null,$e(l);return}if(!(p&&(!l.which||l.which<10)&&Yx(d,l))){var S=String.fromCharCode(m??b);S!="\b"&&(lI(d,l,S)||d.display.input.onKeyPress(l))}}}var fI=400,$d=function(l,d,b){this.time=l,this.pos=d,this.button=b};$d.prototype.compare=function(l,d,b){return this.time+fI>l&&Ze(d,this.pos)==0&&b==this.button};var ll,ul;function cI(l,d){var b=+new Date;return ul&&ul.compare(b,l,d)?(ll=ul=null,"triple"):ll&&ll.compare(b,l,d)?(ul=new $d(b,l,d),ll=null,"double"):(ll=new $d(b,l,d),ul=null,"single")}function Zx(l){var d=this,b=d.display;if(!(Ue(d,l)||b.activeTouch&&b.input.supportsTouch())){if(b.input.ensurePolled(),b.shift=l.shiftKey,Ia(b,l)){c||(b.scroller.draggable=!1,setTimeout(function(){return b.scroller.draggable=!0},100));return}if(!Yd(d,l)){var m=$i(d,l),S=dt(l),L=m?cI(m,S):"single";X(d).focus(),S==1&&d.state.selectingText&&d.state.selectingText(l),!(m&&dI(d,S,m,L,l))&&(S==1?m?vI(d,m,L,l):Tt(l)==b.scroller&&$e(l):S==2?(m&&Gu(d.doc,m),setTimeout(function(){return b.input.focus()},20)):S==3&&(F?d.display.input.onContextMenu(l):Ld(d)))}}}function dI(l,d,b,m,S){var L="Click";return m=="double"?L="Double"+L:m=="triple"&&(L="Triple"+L),L=(d==1?"Left":d==2?"Middle":"Right")+L,sl(l,Hx(L,S),S,function(O){if(typeof O=="string"&&(O=ol[O]),!O)return!1;var H=!1;try{l.isReadOnly()&&(l.state.suppressEdits=!0),H=O(l,b)!=ne}finally{l.state.suppressEdits=!1}return H})}function hI(l,d,b){var m=l.getOption("configureMouse"),S=m?m(l,d,b):{};if(S.unit==null){var L=M?b.shiftKey&&b.metaKey:b.altKey;S.unit=L?"rectangle":d=="single"?"char":d=="double"?"word":"line"}return(S.extend==null||l.doc.extend)&&(S.extend=l.doc.extend||b.shiftKey),S.addNew==null&&(S.addNew=A?b.metaKey:b.ctrlKey),S.moveOnDrag==null&&(S.moveOnDrag=!(A?b.altKey:b.ctrlKey)),S}function vI(l,d,b,m){u?setTimeout(ee(Qw,l),0):l.curOp.focus=ae(U(l));var S=hI(l,b,m),L=l.doc.sel,O;l.options.dragDrop&&gt&&!l.isReadOnly()&&b=="single"&&(O=L.contains(d))>-1&&(Ze((O=L.ranges[O]).from(),d)<0||d.xRel>0)&&(Ze(O.to(),d)>0||d.xRel<0)?pI(l,m,d,S):gI(l,m,d,S)}function pI(l,d,b,m){var S=l.display,L=!1,O=Pr(l,function(J){c&&(S.scroller.draggable=!1),l.state.draggingText=!1,l.state.delayingBlurEvent&&(l.hasFocus()?l.state.delayingBlurEvent=!1:Ld(l)),Ie(S.wrapper.ownerDocument,"mouseup",O),Ie(S.wrapper.ownerDocument,"mousemove",H),Ie(S.scroller,"dragstart",Y),Ie(S.scroller,"drop",O),L||($e(J),m.addNew||Gu(l.doc,b,null,null,m.extend),c&&!C||u&&f==9?setTimeout(function(){S.wrapper.ownerDocument.body.focus({preventScroll:!0}),S.input.focus()},20):S.input.focus())}),H=function(J){L=L||Math.abs(d.clientX-J.clientX)+Math.abs(d.clientY-J.clientY)>=10},Y=function(){return L=!0};c&&(S.scroller.draggable=!0),l.state.draggingText=O,O.copy=!m.moveOnDrag,Ce(S.wrapper.ownerDocument,"mouseup",O),Ce(S.wrapper.ownerDocument,"mousemove",H),Ce(S.scroller,"dragstart",Y),Ce(S.scroller,"drop",O),l.state.delayingBlurEvent=!0,setTimeout(function(){return S.input.focus()},20),S.scroller.dragDrop&&S.scroller.dragDrop()}function Qx(l,d,b){if(b=="char")return new zt(d,d);if(b=="word")return l.findWordAt(d);if(b=="line")return new zt(Re(d.line,0),Ct(l.doc,Re(d.line+1,0)));var m=b(l,d);return new zt(m.from,m.to)}function gI(l,d,b,m){u&&Ld(l);var S=l.display,L=l.doc;$e(d);var O,H,Y=L.sel,J=Y.ranges;if(m.addNew&&!m.extend?(H=L.sel.contains(b),H>-1?O=J[H]:O=new zt(b,b)):(O=L.sel.primary(),H=L.sel.primIndex),m.unit=="rectangle")m.addNew||(O=new zt(b,b)),b=$i(l,d,!0,!0),H=-1;else{var ce=Qx(l,b,m.unit);m.extend?O=zd(O,ce.anchor,ce.head,m.extend):O=ce}m.addNew?H==-1?(H=J.length,Zr(L,na(l,J.concat([O]),H),{scroll:!1,origin:"*mouse"})):J.length>1&&J[H].empty()&&m.unit=="char"&&!m.extend?(Zr(L,na(l,J.slice(0,H).concat(J.slice(H+1)),0),{scroll:!1,origin:"*mouse"}),Y=L.sel):Gd(L,H,O,Se):(H=0,Zr(L,new On([O],0),Se),Y=L.sel);var ge=b;function _e(rt){if(Ze(ge,rt)!=0)if(ge=rt,m.unit=="rectangle"){for(var ut=[],yt=l.options.tabSize,pt=te(ct(L,b.line).text,b.ch,yt),At=te(ct(L,rt.line).text,rt.ch,yt),Jt=Math.min(pt,At),Nr=Math.max(pt,At),vr=Math.min(b.line,rt.line),_n=Math.min(l.lastLine(),Math.max(b.line,rt.line));vr<=_n;vr++){var wn=ct(L,vr).text,Er=be(wn,Jt,yt);Jt==Nr?ut.push(new zt(Re(vr,Er),Re(vr,Er))):wn.length>Er&&ut.push(new zt(Re(vr,Er),Re(vr,be(wn,Nr,yt))))}ut.length||ut.push(new zt(b,b)),Zr(L,na(l,Y.ranges.slice(0,H).concat(ut),H),{origin:"*mouse",scroll:!1}),l.scrollIntoView(rt)}else{var xn=O,Hr=Qx(l,rt,m.unit),Ar=xn.anchor,Cr;Ze(Hr.anchor,Ar)>0?(Cr=Hr.head,Ar=Po(xn.from(),Hr.anchor)):(Cr=Hr.anchor,Ar=yn(xn.to(),Hr.head));var gr=Y.ranges.slice(0);gr[H]=yI(l,new zt(Ct(L,Ar),Cr)),Zr(L,na(l,gr,H),Se)}}var Le=S.wrapper.getBoundingClientRect(),Ne=0;function Be(rt){var ut=++Ne,yt=$i(l,rt,!0,m.unit=="rectangle");if(yt)if(Ze(yt,ge)!=0){l.curOp.focus=ae(U(l)),_e(yt);var pt=Ou(S,L);(yt.line>=pt.to||yt.line<pt.from)&&setTimeout(Pr(l,function(){Ne==ut&&Be(rt)}),150)}else{var At=rt.clientY<Le.top?-20:rt.clientY>Le.bottom?20:0;At&&setTimeout(Pr(l,function(){Ne==ut&&(S.scroller.scrollTop+=At,Be(rt))}),50)}}function Ke(rt){l.state.selectingText=!1,Ne=1/0,rt&&($e(rt),S.input.focus()),Ie(S.wrapper.ownerDocument,"mousemove",tt),Ie(S.wrapper.ownerDocument,"mouseup",lt),L.history.lastSelOrigin=null}var tt=Pr(l,function(rt){rt.buttons===0||!dt(rt)?Ke(rt):Be(rt)}),lt=Pr(l,Ke);l.state.selectingText=lt,Ce(S.wrapper.ownerDocument,"mousemove",tt),Ce(S.wrapper.ownerDocument,"mouseup",lt)}function yI(l,d){var b=d.anchor,m=d.head,S=ct(l.doc,b.line);if(Ze(b,m)==0&&b.sticky==m.sticky)return d;var L=xe(S);if(!L)return d;var O=me(L,b.ch,b.sticky),H=L[O];if(H.from!=b.ch&&H.to!=b.ch)return d;var Y=O+(H.from==b.ch==(H.level!=1)?0:1);if(Y==0||Y==L.length)return d;var J;if(m.line!=b.line)J=(m.line-b.line)*(l.doc.direction=="ltr"?1:-1)>0;else{var ce=me(L,m.ch,m.sticky),ge=ce-O||(m.ch-b.ch)*(H.level==1?-1:1);ce==Y-1||ce==Y?J=ge<0:J=ge>0}var _e=L[Y+(J?-1:0)],Le=J==(_e.level==1),Ne=Le?_e.from:_e.to,Be=Le?"after":"before";return b.ch==Ne&&b.sticky==Be?d:new zt(new Re(b.line,Ne,Be),m)}function Jx(l,d,b,m){var S,L;if(d.touches)S=d.touches[0].clientX,L=d.touches[0].clientY;else try{S=d.clientX,L=d.clientY}catch{return!1}if(S>=Math.floor(l.display.gutters.getBoundingClientRect().right))return!1;m&&$e(d);var O=l.display,H=O.lineDiv.getBoundingClientRect();if(L>H.bottom||!et(l,b))return nt(d);L-=H.top-O.viewOffset;for(var Y=0;Y<l.display.gutterSpecs.length;++Y){var J=O.gutters.childNodes[Y];if(J&&J.getBoundingClientRect().right>=S){var ce=fe(l.doc,L),ge=l.display.gutterSpecs[Y];return He(l,b,l,ce,ge.className,d),nt(d)}}}function Yd(l,d){return Jx(l,d,"gutterClick",!0)}function eE(l,d){Ia(l.display,d)||mI(l,d)||Ue(l,d,"contextmenu")||F||l.display.input.onContextMenu(d)}function mI(l,d){return et(l,"gutterContextMenu")?Jx(l,d,"gutterContextMenu",!1):!1}function tE(l){l.display.wrapper.className=l.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+l.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Us(l)}var Xo={toString:function(){return"CodeMirror.Init"}},rE={},Xu={};function bI(l){var d=l.optionHandlers;function b(m,S,L,O){l.defaults[m]=S,L&&(d[m]=O?function(H,Y,J){J!=Xo&&L(H,Y,J)}:L)}l.defineOption=b,l.Init=Xo,b("value","",function(m,S){return m.setValue(S)},!0),b("mode",null,function(m,S){m.doc.modeOption=S,Fd(m)},!0),b("indentUnit",2,Fd,!0),b("indentWithTabs",!1),b("smartIndent",!0),b("tabSize",4,function(m){Zs(m),Us(m),mn(m)},!0),b("lineSeparator",null,function(m,S){if(m.doc.lineSep=S,!!S){var L=[],O=m.doc.first;m.doc.iter(function(Y){for(var J=0;;){var ce=Y.text.indexOf(S,J);if(ce==-1)break;J=ce+S.length,L.push(Re(O,ce))}O++});for(var H=L.length-1;H>=0;H--)Vo(m.doc,S,L[H],Re(L[H].line,L[H].ch+S.length))}}),b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(m,S,L){m.state.specialChars=new RegExp(S.source+(S.test("	")?"":"|	"),"g"),L!=Xo&&m.refresh()}),b("specialCharPlaceholder",XO,function(m){return m.refresh()},!0),b("electricChars",!0),b("inputStyle",T?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),b("spellcheck",!1,function(m,S){return m.getInputField().spellcheck=S},!0),b("autocorrect",!1,function(m,S){return m.getInputField().autocorrect=S},!0),b("autocapitalize",!1,function(m,S){return m.getInputField().autocapitalize=S},!0),b("rtlMoveVisually",!D),b("wholeLineUpdateBefore",!0),b("theme","default",function(m){tE(m),js(m)},!0),b("keyMap","default",function(m,S,L){var O=$u(S),H=L!=Xo&&$u(L);H&&H.detach&&H.detach(m,O),O.attach&&O.attach(m,H||null)}),b("extraKeys",null),b("configureMouse",null),b("lineWrapping",!1,xI,!0),b("gutters",[],function(m,S){m.display.gutterSpecs=Od(S,m.options.lineNumbers),js(m)},!0),b("fixedGutter",!0,function(m,S){m.display.gutters.style.left=S?Cd(m.display)+"px":"0",m.refresh()},!0),b("coverGutterNextToScrollbar",!1,function(m){return zo(m)},!0),b("scrollbarStyle","native",function(m){ax(m),zo(m),m.display.scrollbars.setScrollTop(m.doc.scrollTop),m.display.scrollbars.setScrollLeft(m.doc.scrollLeft)},!0),b("lineNumbers",!1,function(m,S){m.display.gutterSpecs=Od(m.options.gutters,S),js(m)},!0),b("firstLineNumber",1,js,!0),b("lineNumberFormatter",function(m){return m},js,!0),b("showCursorWhenSelecting",!1,Vs,!0),b("resetSelectionOnContextMenu",!0),b("lineWiseCopyCut",!0),b("pasteLinesPerSelection",!0),b("selectionsMayTouch",!1),b("readOnly",!1,function(m,S){S=="nocursor"&&(Bo(m),m.display.input.blur()),m.display.input.readOnlyChanged(S)}),b("screenReaderLabel",null,function(m,S){S=S===""?null:S,m.display.input.screenReaderLabelChanged(S)}),b("disableInput",!1,function(m,S){S||m.display.input.reset()},!0),b("dragDrop",!0,wI),b("allowDropFileTypes",null),b("cursorBlinkRate",530),b("cursorScrollMargin",0),b("cursorHeight",1,Vs,!0),b("singleCursorHeightPerLine",!0,Vs,!0),b("workTime",100),b("workDelay",100),b("flattenSpans",!0,Zs,!0),b("addModeClass",!1,Zs,!0),b("pollInterval",100),b("undoDepth",200,function(m,S){return m.doc.history.undoDepth=S}),b("historyEventDelay",1250),b("viewportMargin",10,function(m){return m.refresh()},!0),b("maxHighlightLength",1e4,Zs,!0),b("moveInputWithCursor",!0,function(m,S){S||m.display.input.resetPosition()}),b("tabindex",null,function(m,S){return m.display.input.getField().tabIndex=S||""}),b("autofocus",null),b("direction","ltr",function(m,S){return m.doc.setDirection(S)},!0),b("phrases",null)}function wI(l,d,b){var m=b&&b!=Xo;if(!d!=!m){var S=l.display.dragFunctions,L=d?Ce:Ie;L(l.display.scroller,"dragstart",S.start),L(l.display.scroller,"dragenter",S.enter),L(l.display.scroller,"dragover",S.over),L(l.display.scroller,"dragleave",S.leave),L(l.display.scroller,"drop",S.drop)}}function xI(l){l.options.lineWrapping?(re(l.display.wrapper,"CodeMirror-wrap"),l.display.sizer.style.minWidth="",l.display.sizerWidth=null):(B(l.display.wrapper,"CodeMirror-wrap"),hd(l)),Td(l),mn(l),Us(l),setTimeout(function(){return zo(l)},100)}function ur(l,d){var b=this;if(!(this instanceof ur))return new ur(l,d);this.options=d=d?oe(d):{},oe(rE,d,!1);var m=d.value;typeof m=="string"?m=new bn(m,d.mode,null,d.lineSeparator,d.direction):d.mode&&(m.modeOption=d.mode),this.doc=m;var S=new ur.inputStyles[d.inputStyle](this),L=this.display=new N2(l,m,S,d);L.wrapper.CodeMirror=this,tE(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ax(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ie,keySeq:null,specialChars:null},d.autofocus&&!T&&L.input.focus(),u&&f<11&&setTimeout(function(){return b.display.input.reset(!0)},20),EI(this),J2(),ji(this),this.curOp.forceUpdate=!0,vx(this,m),d.autofocus&&!T||this.hasFocus()?setTimeout(function(){b.hasFocus()&&!b.state.focused&&Dd(b)},20):Bo(this);for(var O in Xu)Xu.hasOwnProperty(O)&&Xu[O](this,d[O],Xo);sx(this),d.finishInit&&d.finishInit(this);for(var H=0;H<Xd.length;++H)Xd[H](this);Zi(this),c&&d.lineWrapping&&getComputedStyle(L.lineDiv).textRendering=="optimizelegibility"&&(L.lineDiv.style.textRendering="auto")}ur.defaults=rE,ur.optionHandlers=Xu;function EI(l){var d=l.display;Ce(d.scroller,"mousedown",Pr(l,Zx)),u&&f<11?Ce(d.scroller,"dblclick",Pr(l,function(Y){if(!Ue(l,Y)){var J=$i(l,Y);if(!(!J||Yd(l,Y)||Ia(l.display,Y))){$e(Y);var ce=l.findWordAt(J);Gu(l.doc,ce.anchor,ce.head)}}})):Ce(d.scroller,"dblclick",function(Y){return Ue(l,Y)||$e(Y)}),Ce(d.scroller,"contextmenu",function(Y){return eE(l,Y)}),Ce(d.input.getField(),"contextmenu",function(Y){d.scroller.contains(Y.target)||eE(l,Y)});var b,m={end:0};function S(){d.activeTouch&&(b=setTimeout(function(){return d.activeTouch=null},1e3),m=d.activeTouch,m.end=+new Date)}function L(Y){if(Y.touches.length!=1)return!1;var J=Y.touches[0];return J.radiusX<=1&&J.radiusY<=1}function O(Y,J){if(J.left==null)return!0;var ce=J.left-Y.left,ge=J.top-Y.top;return ce*ce+ge*ge>20*20}Ce(d.scroller,"touchstart",function(Y){if(!Ue(l,Y)&&!L(Y)&&!Yd(l,Y)){d.input.ensurePolled(),clearTimeout(b);var J=+new Date;d.activeTouch={start:J,moved:!1,prev:J-m.end<=300?m:null},Y.touches.length==1&&(d.activeTouch.left=Y.touches[0].pageX,d.activeTouch.top=Y.touches[0].pageY)}}),Ce(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)}),Ce(d.scroller,"touchend",function(Y){var J=d.activeTouch;if(J&&!Ia(d,Y)&&J.left!=null&&!J.moved&&new Date-J.start<300){var ce=l.coordsChar(d.activeTouch,"page"),ge;!J.prev||O(J,J.prev)?ge=new zt(ce,ce):!J.prev.prev||O(J,J.prev.prev)?ge=l.findWordAt(ce):ge=new zt(Re(ce.line,0),Ct(l.doc,Re(ce.line+1,0))),l.setSelection(ge.anchor,ge.head),l.focus(),$e(Y)}S()}),Ce(d.scroller,"touchcancel",S),Ce(d.scroller,"scroll",function(){d.scroller.clientHeight&&($s(l,d.scroller.scrollTop),Xi(l,d.scroller.scrollLeft,!0),He(l,"scroll",l))}),Ce(d.scroller,"mousewheel",function(Y){return fx(l,Y)}),Ce(d.scroller,"DOMMouseScroll",function(Y){return fx(l,Y)}),Ce(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0}),d.dragFunctions={enter:function(Y){Ue(l,Y)||st(Y)},over:function(Y){Ue(l,Y)||(Q2(l,Y),st(Y))},start:function(Y){return Z2(l,Y)},drop:Pr(l,j2),leave:function(Y){Ue(l,Y)||Bx(l)}};var H=d.input.getField();Ce(H,"keyup",function(Y){return Kx.call(l,Y)}),Ce(H,"keydown",Pr(l,Xx)),Ce(H,"keypress",Pr(l,jx)),Ce(H,"focus",function(Y){return Dd(l,Y)}),Ce(H,"blur",function(Y){return Bo(l,Y)})}var Xd=[];ur.defineInitHook=function(l){return Xd.push(l)};function fl(l,d,b,m){var S=l.doc,L;b==null&&(b="add"),b=="smart"&&(S.mode.indent?L=Bs(l,d).state:b="prev");var O=l.options.tabSize,H=ct(S,d),Y=te(H.text,null,O);H.stateAfter&&(H.stateAfter=null);var J=H.text.match(/^\s*/)[0],ce;if(!m&&!/\S/.test(H.text))ce=0,b="not";else if(b=="smart"&&(ce=S.mode.indent(L,H.text.slice(J.length),H.text),ce==ne||ce>150)){if(!m)return;b="prev"}b=="prev"?d>S.first?ce=te(ct(S,d-1).text,null,O):ce=0:b=="add"?ce=Y+l.options.indentUnit:b=="subtract"?ce=Y-l.options.indentUnit:typeof b=="number"&&(ce=Y+b),ce=Math.max(0,ce);var ge="",_e=0;if(l.options.indentWithTabs)for(var Le=Math.floor(ce/O);Le;--Le)_e+=O,ge+="	";if(_e<ce&&(ge+=pe(ce-_e)),ge!=J)return Vo(S,ge,Re(d,0),Re(d,J.length),"+input"),H.stateAfter=null,!0;for(var Ne=0;Ne<S.sel.ranges.length;Ne++){var Be=S.sel.ranges[Ne];if(Be.head.line==d&&Be.head.ch<J.length){var Ke=Re(d,J.length);Gd(S,Ne,new zt(Ke,Ke));break}}}var aa=null;function Ku(l){aa=l}function Kd(l,d,b,m,S){var L=l.doc;l.display.shift=!1,m||(m=L.sel);var O=+new Date-200,H=S=="paste"||l.state.pasteIncoming>O,Y=Ht(d),J=null;if(H&&m.ranges.length>1)if(aa&&aa.text.join(`
`)==d){if(m.ranges.length%aa.text.length==0){J=[];for(var ce=0;ce<aa.text.length;ce++)J.push(L.splitLines(aa.text[ce]))}}else Y.length==m.ranges.length&&l.options.pasteLinesPerSelection&&(J=ye(Y,function(tt){return[tt]}));for(var ge=l.curOp.updateInput,_e=m.ranges.length-1;_e>=0;_e--){var Le=m.ranges[_e],Ne=Le.from(),Be=Le.to();Le.empty()&&(b&&b>0?Ne=Re(Ne.line,Ne.ch-b):l.state.overwrite&&!H?Be=Re(Be.line,Math.min(ct(L,Be.line).text.length,Be.ch+de(Y).length)):H&&aa&&aa.lineWise&&aa.text.join(`
`)==Y.join(`
`)&&(Ne=Be=Re(Ne.line,0)));var Ke={from:Ne,to:Be,text:J?J[_e%J.length]:Y,origin:S||(H?"paste":l.state.cutIncoming>O?"cut":"+input")};Uo(l.doc,Ke),Rr(l,"inputRead",l,Ke)}d&&!H&&aE(l,d),qo(l),l.curOp.updateInput<2&&(l.curOp.updateInput=ge),l.curOp.typing=!0,l.state.pasteIncoming=l.state.cutIncoming=-1}function nE(l,d){var b=l.clipboardData&&l.clipboardData.getData("Text");if(b)return l.preventDefault(),!d.isReadOnly()&&!d.options.disableInput&&d.hasFocus()&&Dn(d,function(){return Kd(d,b,0,null,"paste")}),!0}function aE(l,d){if(!(!l.options.electricChars||!l.options.smartIndent))for(var b=l.doc.sel,m=b.ranges.length-1;m>=0;m--){var S=b.ranges[m];if(!(S.head.ch>100||m&&b.ranges[m-1].head.line==S.head.line)){var L=l.getModeAt(S.head),O=!1;if(L.electricChars){for(var H=0;H<L.electricChars.length;H++)if(d.indexOf(L.electricChars.charAt(H))>-1){O=fl(l,S.head.line,"smart");break}}else L.electricInput&&L.electricInput.test(ct(l.doc,S.head.line).text.slice(0,S.head.ch))&&(O=fl(l,S.head.line,"smart"));O&&Rr(l,"electricInput",l,S.head.line)}}}function iE(l){for(var d=[],b=[],m=0;m<l.doc.sel.ranges.length;m++){var S=l.doc.sel.ranges[m].head.line,L={anchor:Re(S,0),head:Re(S+1,0)};b.push(L),d.push(l.getRange(L.anchor,L.head))}return{text:d,ranges:b}}function jd(l,d,b,m){l.setAttribute("autocorrect",b?"on":"off"),l.setAttribute("autocapitalize",m?"on":"off"),l.setAttribute("spellcheck",!!d)}function oE(){var l=P("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),d=P("div",[l],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return c?l.style.width="1000px":l.setAttribute("wrap","off"),x&&(l.style.border="1px solid black"),d}function CI(l){var d=l.optionHandlers,b=l.helpers={};l.prototype={constructor:l,focus:function(){X(this).focus(),this.display.input.focus()},setOption:function(m,S){var L=this.options,O=L[m];L[m]==S&&m!="mode"||(L[m]=S,d.hasOwnProperty(m)&&Pr(this,d[m])(this,S,O),He(this,"optionChange",this,m))},getOption:function(m){return this.options[m]},getDoc:function(){return this.doc},addKeyMap:function(m,S){this.state.keyMaps[S?"push":"unshift"]($u(m))},removeKeyMap:function(m){for(var S=this.state.keyMaps,L=0;L<S.length;++L)if(S[L]==m||S[L].name==m)return S.splice(L,1),!0},addOverlay:ln(function(m,S){var L=m.token?m:l.getMode(this.options,m);if(L.startState)throw new Error("Overlays may not be stateful.");Ee(this.state.overlays,{mode:L,modeSpec:m,opaque:S&&S.opaque,priority:S&&S.priority||0},function(O){return O.priority}),this.state.modeGen++,mn(this)}),removeOverlay:ln(function(m){for(var S=this.state.overlays,L=0;L<S.length;++L){var O=S[L].modeSpec;if(O==m||typeof m=="string"&&O.name==m){S.splice(L,1),this.state.modeGen++,mn(this);return}}}),indentLine:ln(function(m,S,L){typeof S!="string"&&typeof S!="number"&&(S==null?S=this.options.smartIndent?"smart":"prev":S=S?"add":"subtract"),ke(this.doc,m)&&fl(this,m,S,L)}),indentSelection:ln(function(m){for(var S=this.doc.sel.ranges,L=-1,O=0;O<S.length;O++){var H=S[O];if(H.empty())H.head.line>L&&(fl(this,H.head.line,m,!0),L=H.head.line,O==this.doc.sel.primIndex&&qo(this));else{var Y=H.from(),J=H.to(),ce=Math.max(L,Y.line);L=Math.min(this.lastLine(),J.line-(J.ch?0:1))+1;for(var ge=ce;ge<L;++ge)fl(this,ge,m);var _e=this.doc.sel.ranges;Y.ch==0&&S.length==_e.length&&_e[O].from().ch>0&&Gd(this.doc,O,new zt(Y,_e[O].to()),le)}}}),getTokenAt:function(m,S){return gw(this,m,S)},getLineTokens:function(m,S){return gw(this,Re(m),S,!0)},getTokenTypeAt:function(m){m=Ct(this.doc,m);var S=hw(this,ct(this.doc,m.line)),L=0,O=(S.length-1)/2,H=m.ch,Y;if(H==0)Y=S[2];else for(;;){var J=L+O>>1;if((J?S[J*2-1]:0)>=H)O=J;else if(S[J*2+1]<H)L=J+1;else{Y=S[J*2+2];break}}var ce=Y?Y.indexOf("overlay "):-1;return ce<0?Y:ce==0?null:Y.slice(0,ce-1)},getModeAt:function(m){var S=this.doc.mode;return S.innerMode?l.innerMode(S,this.getTokenAt(m).state).mode:S},getHelper:function(m,S){return this.getHelpers(m,S)[0]},getHelpers:function(m,S){var L=[];if(!b.hasOwnProperty(S))return L;var O=b[S],H=this.getModeAt(m);if(typeof H[S]=="string")O[H[S]]&&L.push(O[H[S]]);else if(H[S])for(var Y=0;Y<H[S].length;Y++){var J=O[H[S][Y]];J&&L.push(J)}else H.helperType&&O[H.helperType]?L.push(O[H.helperType]):O[H.name]&&L.push(O[H.name]);for(var ce=0;ce<O._global.length;ce++){var ge=O._global[ce];ge.pred(H,this)&&se(L,ge.val)==-1&&L.push(ge.val)}return L},getStateAfter:function(m,S){var L=this.doc;return m=fw(L,m??L.first+L.size-1),Bs(this,m+1,S).state},cursorCoords:function(m,S){var L,O=this.doc.sel.primary();return m==null?L=O.head:typeof m=="object"?L=Ct(this.doc,m):L=m?O.from():O.to(),ra(this,L,S||"page")},charCoords:function(m,S){return Ru(this,Ct(this.doc,m),S||"page")},coordsChar:function(m,S){return m=Ww(this,m,S||"page"),wd(this,m.left,m.top)},lineAtHeight:function(m,S){return m=Ww(this,{top:m,left:0},S||"page").top,fe(this.doc,m+this.display.viewOffset)},heightAtLine:function(m,S,L){var O=!1,H;if(typeof m=="number"){var Y=this.doc.first+this.doc.size-1;m<this.doc.first?m=this.doc.first:m>Y&&(m=Y,O=!0),H=ct(this.doc,m)}else H=m;return Mu(this,H,{top:0,left:0},S||"page",L||O).top+(O?this.doc.height-Oa(H):0)},defaultTextHeight:function(){return Io(this.display)},defaultCharWidth:function(){return Fo(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(m,S,L,O,H){var Y=this.display;m=ra(this,Ct(this.doc,m));var J=m.bottom,ce=m.left;if(S.style.position="absolute",S.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(S),Y.sizer.appendChild(S),O=="over")J=m.top;else if(O=="above"||O=="near"){var ge=Math.max(Y.wrapper.clientHeight,this.doc.height),_e=Math.max(Y.sizer.clientWidth,Y.lineSpace.clientWidth);(O=="above"||m.bottom+S.offsetHeight>ge)&&m.top>S.offsetHeight?J=m.top-S.offsetHeight:m.bottom+S.offsetHeight<=ge&&(J=m.bottom),ce+S.offsetWidth>_e&&(ce=_e-S.offsetWidth)}S.style.top=J+"px",S.style.left=S.style.right="",H=="right"?(ce=Y.sizer.clientWidth-S.offsetWidth,S.style.right="0px"):(H=="left"?ce=0:H=="middle"&&(ce=(Y.sizer.clientWidth-S.offsetWidth)/2),S.style.left=ce+"px"),L&&w2(this,{left:ce,top:J,right:ce+S.offsetWidth,bottom:J+S.offsetHeight})},triggerOnKeyDown:ln(Xx),triggerOnKeyPress:ln(jx),triggerOnKeyUp:Kx,triggerOnMouseDown:ln(Zx),execCommand:function(m){if(ol.hasOwnProperty(m))return ol[m].call(null,this)},triggerElectric:ln(function(m){aE(this,m)}),findPosH:function(m,S,L,O){var H=1;S<0&&(H=-1,S=-S);for(var Y=Ct(this.doc,m),J=0;J<S&&(Y=Zd(this.doc,Y,H,L,O),!Y.hitSide);++J);return Y},moveH:ln(function(m,S){var L=this;this.extendSelectionsBy(function(O){return L.display.shift||L.doc.extend||O.empty()?Zd(L.doc,O.head,m,S,L.options.rtlMoveVisually):m<0?O.from():O.to()},De)}),deleteH:ln(function(m,S){var L=this.doc.sel,O=this.doc;L.somethingSelected()?O.replaceSelection("",null,"+delete"):Yo(this,function(H){var Y=Zd(O,H.head,m,S,!1);return m<0?{from:Y,to:H.head}:{from:H.head,to:Y}})}),findPosV:function(m,S,L,O){var H=1,Y=O;S<0&&(H=-1,S=-S);for(var J=Ct(this.doc,m),ce=0;ce<S;++ce){var ge=ra(this,J,"div");if(Y==null?Y=ge.left:ge.left=Y,J=sE(this,ge,H,L),J.hitSide)break}return J},moveV:ln(function(m,S){var L=this,O=this.doc,H=[],Y=!this.display.shift&&!O.extend&&O.sel.somethingSelected();if(O.extendSelectionsBy(function(ce){if(Y)return m<0?ce.from():ce.to();var ge=ra(L,ce.head,"div");ce.goalColumn!=null&&(ge.left=ce.goalColumn),H.push(ge.left);var _e=sE(L,ge,m,S);return S=="page"&&ce==O.sel.primary()&&Md(L,Ru(L,_e,"div").top-ge.top),_e},De),H.length)for(var J=0;J<O.sel.ranges.length;J++)O.sel.ranges[J].goalColumn=H[J]}),findWordAt:function(m){var S=this.doc,L=ct(S,m.line).text,O=m.ch,H=m.ch;if(L){var Y=this.getHelper(m,"wordChars");(m.sticky=="before"||H==L.length)&&O?--O:++H;for(var J=L.charAt(O),ce=Ye(J,Y)?function(ge){return Ye(ge,Y)}:/\s/.test(J)?function(ge){return/\s/.test(ge)}:function(ge){return!/\s/.test(ge)&&!Ye(ge)};O>0&&ce(L.charAt(O-1));)--O;for(;H<L.length&&ce(L.charAt(H));)++H}return new zt(Re(m.line,O),Re(m.line,H))},toggleOverwrite:function(m){m!=null&&m==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?re(this.display.cursorDiv,"CodeMirror-overwrite"):B(this.display.cursorDiv,"CodeMirror-overwrite"),He(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ae(U(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ln(function(m,S){Ws(this,m,S)}),getScrollInfo:function(){var m=this.display.scroller;return{left:m.scrollLeft,top:m.scrollTop,height:m.scrollHeight-pa(this)-this.display.barHeight,width:m.scrollWidth-pa(this)-this.display.barWidth,clientHeight:gd(this),clientWidth:Vi(this)}},scrollIntoView:ln(function(m,S){m==null?(m={from:this.doc.sel.primary().head,to:null},S==null&&(S=this.options.cursorScrollMargin)):typeof m=="number"?m={from:Re(m,0),to:null}:m.from==null&&(m={from:m,to:null}),m.to||(m.to=m.from),m.margin=S||0,m.from.line!=null?x2(this,m):ex(this,m.from,m.to,m.margin)}),setSize:ln(function(m,S){var L=this,O=function(Y){return typeof Y=="number"||/^\d+$/.test(String(Y))?Y+"px":Y};m!=null&&(this.display.wrapper.style.width=O(m)),S!=null&&(this.display.wrapper.style.height=O(S)),this.options.lineWrapping&&Hw(this);var H=this.display.viewFrom;this.doc.iter(H,this.display.viewTo,function(Y){if(Y.widgets){for(var J=0;J<Y.widgets.length;J++)if(Y.widgets[J].noHScroll){oi(L,H,"widget");break}}++H}),this.curOp.forceUpdate=!0,He(this,"refresh",this)}),operation:function(m){return Dn(this,m)},startOperation:function(){return ji(this)},endOperation:function(){return Zi(this)},refresh:ln(function(){var m=this.display.cachedTextHeight;mn(this),this.curOp.forceUpdate=!0,Us(this),Ws(this,this.doc.scrollLeft,this.doc.scrollTop),kd(this.display),(m==null||Math.abs(m-Io(this.display))>.5||this.options.lineWrapping)&&Td(this),He(this,"refresh",this)}),swapDoc:ln(function(m){var S=this.doc;return S.cm=null,this.state.selectingText&&this.state.selectingText(),vx(this,m),Us(this),this.display.input.reset(),Ws(this,m.scrollLeft,m.scrollTop),this.curOp.forceScroll=!0,Rr(this,"swapDoc",this,S),S}),phrase:function(m){var S=this.options.phrases;return S&&Object.prototype.hasOwnProperty.call(S,m)?S[m]:m},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ge(l),l.registerHelper=function(m,S,L){b.hasOwnProperty(m)||(b[m]=l[m]={_global:[]}),b[m][S]=L},l.registerGlobalHelper=function(m,S,L,O){l.registerHelper(m,S,O),b[m]._global.push({pred:L,val:O})}}function Zd(l,d,b,m,S){var L=d,O=b,H=ct(l,d.line),Y=S&&l.direction=="rtl"?-b:b;function J(){var lt=d.line+Y;return lt<l.first||lt>=l.first+l.size?!1:(d=new Re(lt,d.ch,d.sticky),H=ct(l,lt))}function ce(lt){var rt;if(m=="codepoint"){var ut=H.text.charCodeAt(d.ch+(b>0?0:-1));if(isNaN(ut))rt=null;else{var yt=b>0?ut>=55296&&ut<56320:ut>=56320&&ut<57343;rt=new Re(d.line,Math.max(0,Math.min(H.text.length,d.ch+b*(yt?2:1))),-b)}}else S?rt=aI(l.cm,H,d,b):rt=Ud(H,d,b);if(rt==null)if(!lt&&J())d=Vd(S,l.cm,H,d.line,Y);else return!1;else d=rt;return!0}if(m=="char"||m=="codepoint")ce();else if(m=="column")ce(!0);else if(m=="word"||m=="group")for(var ge=null,_e=m=="group",Le=l.cm&&l.cm.getHelper(d,"wordChars"),Ne=!0;!(b<0&&!ce(!Ne));Ne=!1){var Be=H.text.charAt(d.ch)||`
`,Ke=Ye(Be,Le)?"w":_e&&Be==`
`?"n":!_e||/\s/.test(Be)?null:"p";if(_e&&!Ne&&!Ke&&(Ke="s"),ge&&ge!=Ke){b<0&&(b=1,ce(),d.sticky="after");break}if(Ke&&(ge=Ke),b>0&&!ce(!Ne))break}var tt=Uu(l,d,L,O,!0);return kt(L,tt)&&(tt.hitSide=!0),tt}function sE(l,d,b,m){var S=l.doc,L=d.left,O;if(m=="page"){var H=Math.min(l.display.wrapper.clientHeight,X(l).innerHeight||S(l).documentElement.clientHeight),Y=Math.max(H-.5*Io(l.display),3);O=(b>0?d.bottom:d.top)+b*Y}else m=="line"&&(O=b>0?d.bottom+3:d.top-3);for(var J;J=wd(l,L,O),!!J.outside;){if(b<0?O<=0:O>=S.height){J.hitSide=!0;break}O+=b*5}return J}var Ut=function(l){this.cm=l,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ie,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ut.prototype.init=function(l){var d=this,b=this,m=b.cm,S=b.div=l.lineDiv;S.contentEditable=!0,jd(S,m.options.spellcheck,m.options.autocorrect,m.options.autocapitalize);function L(H){for(var Y=H.target;Y;Y=Y.parentNode){if(Y==S)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Y.className))break}return!1}Ce(S,"paste",function(H){!L(H)||Ue(m,H)||nE(H,m)||f<=11&&setTimeout(Pr(m,function(){return d.updateFromDOM()}),20)}),Ce(S,"compositionstart",function(H){d.composing={data:H.data,done:!1}}),Ce(S,"compositionupdate",function(H){d.composing||(d.composing={data:H.data,done:!1})}),Ce(S,"compositionend",function(H){d.composing&&(H.data!=d.composing.data&&d.readFromDOMSoon(),d.composing.done=!0)}),Ce(S,"touchstart",function(){return b.forceCompositionEnd()}),Ce(S,"input",function(){d.composing||d.readFromDOMSoon()});function O(H){if(!(!L(H)||Ue(m,H))){if(m.somethingSelected())Ku({lineWise:!1,text:m.getSelections()}),H.type=="cut"&&m.replaceSelection("",null,"cut");else if(m.options.lineWiseCopyCut){var Y=iE(m);Ku({lineWise:!0,text:Y.text}),H.type=="cut"&&m.operation(function(){m.setSelections(Y.ranges,0,le),m.replaceSelection("",null,"cut")})}else return;if(H.clipboardData){H.clipboardData.clearData();var J=aa.text.join(`
`);if(H.clipboardData.setData("Text",J),H.clipboardData.getData("Text")==J){H.preventDefault();return}}var ce=oE(),ge=ce.firstChild;jd(ge),m.display.lineSpace.insertBefore(ce,m.display.lineSpace.firstChild),ge.value=aa.text.join(`
`);var _e=ae(W(S));V(ge),setTimeout(function(){m.display.lineSpace.removeChild(ce),_e.focus(),_e==S&&b.showPrimarySelection()},50)}}Ce(S,"copy",O),Ce(S,"cut",O)},Ut.prototype.screenReaderLabelChanged=function(l){l?this.div.setAttribute("aria-label",l):this.div.removeAttribute("aria-label")},Ut.prototype.prepareSelection=function(){var l=Zw(this.cm,!1);return l.focus=ae(W(this.div))==this.div,l},Ut.prototype.showSelection=function(l,d){!l||!this.cm.display.view.length||((l.focus||d)&&this.showPrimarySelection(),this.showMultipleSelections(l))},Ut.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ut.prototype.showPrimarySelection=function(){var l=this.getSelection(),d=this.cm,b=d.doc.sel.primary(),m=b.from(),S=b.to();if(d.display.viewTo==d.display.viewFrom||m.line>=d.display.viewTo||S.line<d.display.viewFrom){l.removeAllRanges();return}var L=ju(d,l.anchorNode,l.anchorOffset),O=ju(d,l.focusNode,l.focusOffset);if(!(L&&!L.bad&&O&&!O.bad&&Ze(Po(L,O),m)==0&&Ze(yn(L,O),S)==0)){var H=d.display.view,Y=m.line>=d.display.viewFrom&&lE(d,m)||{node:H[0].measure.map[2],offset:0},J=S.line<d.display.viewTo&&lE(d,S);if(!J){var ce=H[H.length-1].measure,ge=ce.maps?ce.maps[ce.maps.length-1]:ce.map;J={node:ge[ge.length-1],offset:ge[ge.length-2]-ge[ge.length-3]}}if(!Y||!J){l.removeAllRanges();return}var _e=l.rangeCount&&l.getRangeAt(0),Le;try{Le=I(Y.node,Y.offset,J.offset,J.node)}catch{}Le&&(!a&&d.state.focused?(l.collapse(Y.node,Y.offset),Le.collapsed||(l.removeAllRanges(),l.addRange(Le))):(l.removeAllRanges(),l.addRange(Le)),_e&&l.anchorNode==null?l.addRange(_e):a&&this.startGracePeriod()),this.rememberSelection()}},Ut.prototype.startGracePeriod=function(){var l=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){l.gracePeriod=!1,l.selectionChanged()&&l.cm.operation(function(){return l.cm.curOp.selectionChanged=!0})},20)},Ut.prototype.showMultipleSelections=function(l){R(this.cm.display.cursorDiv,l.cursors),R(this.cm.display.selectionDiv,l.selection)},Ut.prototype.rememberSelection=function(){var l=this.getSelection();this.lastAnchorNode=l.anchorNode,this.lastAnchorOffset=l.anchorOffset,this.lastFocusNode=l.focusNode,this.lastFocusOffset=l.focusOffset},Ut.prototype.selectionInEditor=function(){var l=this.getSelection();if(!l.rangeCount)return!1;var d=l.getRangeAt(0).commonAncestorContainer;return z(this.div,d)},Ut.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ae(W(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ut.prototype.blur=function(){this.div.blur()},Ut.prototype.getField=function(){return this.div},Ut.prototype.supportsTouch=function(){return!0},Ut.prototype.receivedFocus=function(){var l=this,d=this;this.selectionInEditor()?setTimeout(function(){return l.pollSelection()},20):Dn(this.cm,function(){return d.cm.curOp.selectionChanged=!0});function b(){d.cm.state.focused&&(d.pollSelection(),d.polling.set(d.cm.options.pollInterval,b))}this.polling.set(this.cm.options.pollInterval,b)},Ut.prototype.selectionChanged=function(){var l=this.getSelection();return l.anchorNode!=this.lastAnchorNode||l.anchorOffset!=this.lastAnchorOffset||l.focusNode!=this.lastFocusNode||l.focusOffset!=this.lastFocusOffset},Ut.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var l=this.getSelection(),d=this.cm;if(w&&g&&this.cm.display.gutterSpecs.length&&TI(l.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var b=ju(d,l.anchorNode,l.anchorOffset),m=ju(d,l.focusNode,l.focusOffset);b&&m&&Dn(d,function(){Zr(d.doc,li(b,m),le),(b.bad||m.bad)&&(d.curOp.selectionChanged=!0)})}}},Ut.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var l=this.cm,d=l.display,b=l.doc.sel.primary(),m=b.from(),S=b.to();if(m.ch==0&&m.line>l.firstLine()&&(m=Re(m.line-1,ct(l.doc,m.line-1).length)),S.ch==ct(l.doc,S.line).text.length&&S.line<l.lastLine()&&(S=Re(S.line+1,0)),m.line<d.viewFrom||S.line>d.viewTo-1)return!1;var L,O,H;m.line==d.viewFrom||(L=Yi(l,m.line))==0?(O=Q(d.view[0].line),H=d.view[0].node):(O=Q(d.view[L].line),H=d.view[L-1].node.nextSibling);var Y=Yi(l,S.line),J,ce;if(Y==d.view.length-1?(J=d.viewTo-1,ce=d.lineDiv.lastChild):(J=Q(d.view[Y+1].line)-1,ce=d.view[Y+1].node.previousSibling),!H)return!1;for(var ge=l.doc.splitLines(SI(l,H,ce,O,J)),_e=Gr(l.doc,Re(O,0),Re(J,ct(l.doc,J).text.length));ge.length>1&&_e.length>1;)if(de(ge)==de(_e))ge.pop(),_e.pop(),J--;else if(ge[0]==_e[0])ge.shift(),_e.shift(),O++;else break;for(var Le=0,Ne=0,Be=ge[0],Ke=_e[0],tt=Math.min(Be.length,Ke.length);Le<tt&&Be.charCodeAt(Le)==Ke.charCodeAt(Le);)++Le;for(var lt=de(ge),rt=de(_e),ut=Math.min(lt.length-(ge.length==1?Le:0),rt.length-(_e.length==1?Le:0));Ne<ut&&lt.charCodeAt(lt.length-Ne-1)==rt.charCodeAt(rt.length-Ne-1);)++Ne;if(ge.length==1&&_e.length==1&&O==m.line)for(;Le&&Le>m.ch&&lt.charCodeAt(lt.length-Ne-1)==rt.charCodeAt(rt.length-Ne-1);)Le--,Ne++;ge[ge.length-1]=lt.slice(0,lt.length-Ne).replace(/^\u200b+/,""),ge[0]=ge[0].slice(Le).replace(/\u200b+$/,"");var yt=Re(O,Le),pt=Re(J,_e.length?de(_e).length-Ne:0);if(ge.length>1||ge[0]||Ze(yt,pt))return Vo(l.doc,ge,yt,pt,"+input"),!0},Ut.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ut.prototype.reset=function(){this.forceCompositionEnd()},Ut.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ut.prototype.readFromDOMSoon=function(){var l=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(l.readDOMTimeout=null,l.composing)if(l.composing.done)l.composing=null;else return;l.updateFromDOM()},80))},Ut.prototype.updateFromDOM=function(){var l=this;(this.cm.isReadOnly()||!this.pollContent())&&Dn(this.cm,function(){return mn(l.cm)})},Ut.prototype.setUneditable=function(l){l.contentEditable="false"},Ut.prototype.onKeyPress=function(l){l.charCode==0||this.composing||(l.preventDefault(),this.cm.isReadOnly()||Pr(this.cm,Kd)(this.cm,String.fromCharCode(l.charCode==null?l.keyCode:l.charCode),0))},Ut.prototype.readOnlyChanged=function(l){this.div.contentEditable=String(l!="nocursor")},Ut.prototype.onContextMenu=function(){},Ut.prototype.resetPosition=function(){},Ut.prototype.needsContentAttribute=!0;function lE(l,d){var b=yd(l,d.line);if(!b||b.hidden)return null;var m=ct(l.doc,d.line),S=Fw(b,m,d.line),L=xe(m,l.doc.direction),O="left";if(L){var H=me(L,d.ch);O=H%2?"right":"left"}var Y=zw(S.map,d.ch,O);return Y.offset=Y.collapse=="right"?Y.end:Y.start,Y}function TI(l){for(var d=l;d;d=d.parentNode)if(/CodeMirror-gutter-wrapper/.test(d.className))return!0;return!1}function Ko(l,d){return d&&(l.bad=!0),l}function SI(l,d,b,m,S){var L="",O=!1,H=l.doc.lineSeparator(),Y=!1;function J(Le){return function(Ne){return Ne.id==Le}}function ce(){O&&(L+=H,Y&&(L+=H),O=Y=!1)}function ge(Le){Le&&(ce(),L+=Le)}function _e(Le){if(Le.nodeType==1){var Ne=Le.getAttribute("cm-text");if(Ne){ge(Ne);return}var Be=Le.getAttribute("cm-marker"),Ke;if(Be){var tt=l.findMarks(Re(m,0),Re(S+1,0),J(+Be));tt.length&&(Ke=tt[0].find(0))&&ge(Gr(l.doc,Ke.from,Ke.to).join(H));return}if(Le.getAttribute("contenteditable")=="false")return;var lt=/^(pre|div|p|li|table|br)$/i.test(Le.nodeName);if(!/^br$/i.test(Le.nodeName)&&Le.textContent.length==0)return;lt&&ce();for(var rt=0;rt<Le.childNodes.length;rt++)_e(Le.childNodes[rt]);/^(pre|p)$/i.test(Le.nodeName)&&(Y=!0),lt&&(O=!0)}else Le.nodeType==3&&ge(Le.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;_e(d),d!=b;)d=d.nextSibling,Y=!1;return L}function ju(l,d,b){var m;if(d==l.display.lineDiv){if(m=l.display.lineDiv.childNodes[b],!m)return Ko(l.clipPos(Re(l.display.viewTo-1)),!0);d=null,b=0}else for(m=d;;m=m.parentNode){if(!m||m==l.display.lineDiv)return null;if(m.parentNode&&m.parentNode==l.display.lineDiv)break}for(var S=0;S<l.display.view.length;S++){var L=l.display.view[S];if(L.node==m)return AI(L,d,b)}}function AI(l,d,b){var m=l.text.firstChild,S=!1;if(!d||!z(m,d))return Ko(Re(Q(l.line),0),!0);if(d==m&&(S=!0,d=m.childNodes[b],b=0,!d)){var L=l.rest?de(l.rest):l.line;return Ko(Re(Q(L),L.text.length),S)}var O=d.nodeType==3?d:null,H=d;for(!O&&d.childNodes.length==1&&d.firstChild.nodeType==3&&(O=d.firstChild,b&&(b=O.nodeValue.length));H.parentNode!=m;)H=H.parentNode;var Y=l.measure,J=Y.maps;function ce(Ke,tt,lt){for(var rt=-1;rt<(J?J.length:0);rt++)for(var ut=rt<0?Y.map:J[rt],yt=0;yt<ut.length;yt+=3){var pt=ut[yt+2];if(pt==Ke||pt==tt){var At=Q(rt<0?l.line:l.rest[rt]),Jt=ut[yt]+lt;return(lt<0||pt!=Ke)&&(Jt=ut[yt+(lt?1:0)]),Re(At,Jt)}}}var ge=ce(O,H,b);if(ge)return Ko(ge,S);for(var _e=H.nextSibling,Le=O?O.nodeValue.length-b:0;_e;_e=_e.nextSibling){if(ge=ce(_e,_e.firstChild,0),ge)return Ko(Re(ge.line,ge.ch-Le),S);Le+=_e.textContent.length}for(var Ne=H.previousSibling,Be=b;Ne;Ne=Ne.previousSibling){if(ge=ce(Ne,Ne.firstChild,-1),ge)return Ko(Re(ge.line,ge.ch+Be),S);Be+=Ne.textContent.length}}var wr=function(l){this.cm=l,this.prevInput="",this.pollingFast=!1,this.polling=new ie,this.hasSelection=!1,this.composing=null,this.resetting=!1};wr.prototype.init=function(l){var d=this,b=this,m=this.cm;this.createField(l);var S=this.textarea;l.wrapper.insertBefore(this.wrapper,l.wrapper.firstChild),x&&(S.style.width="0px"),Ce(S,"input",function(){u&&f>=9&&d.hasSelection&&(d.hasSelection=null),b.poll()}),Ce(S,"paste",function(O){Ue(m,O)||nE(O,m)||(m.state.pasteIncoming=+new Date,b.fastPoll())});function L(O){if(!Ue(m,O)){if(m.somethingSelected())Ku({lineWise:!1,text:m.getSelections()});else if(m.options.lineWiseCopyCut){var H=iE(m);Ku({lineWise:!0,text:H.text}),O.type=="cut"?m.setSelections(H.ranges,null,le):(b.prevInput="",S.value=H.text.join(`
`),V(S))}else return;O.type=="cut"&&(m.state.cutIncoming=+new Date)}}Ce(S,"cut",L),Ce(S,"copy",L),Ce(l.scroller,"paste",function(O){if(!(Ia(l,O)||Ue(m,O))){if(!S.dispatchEvent){m.state.pasteIncoming=+new Date,b.focus();return}var H=new Event("paste");H.clipboardData=O.clipboardData,S.dispatchEvent(H)}}),Ce(l.lineSpace,"selectstart",function(O){Ia(l,O)||$e(O)}),Ce(S,"compositionstart",function(){var O=m.getCursor("from");b.composing&&b.composing.range.clear(),b.composing={start:O,range:m.markText(O,m.getCursor("to"),{className:"CodeMirror-composing"})}}),Ce(S,"compositionend",function(){b.composing&&(b.poll(),b.composing.range.clear(),b.composing=null)})},wr.prototype.createField=function(l){this.wrapper=oE(),this.textarea=this.wrapper.firstChild;var d=this.cm.options;jd(this.textarea,d.spellcheck,d.autocorrect,d.autocapitalize)},wr.prototype.screenReaderLabelChanged=function(l){l?this.textarea.setAttribute("aria-label",l):this.textarea.removeAttribute("aria-label")},wr.prototype.prepareSelection=function(){var l=this.cm,d=l.display,b=l.doc,m=Zw(l);if(l.options.moveInputWithCursor){var S=ra(l,b.sel.primary().head,"div"),L=d.wrapper.getBoundingClientRect(),O=d.lineDiv.getBoundingClientRect();m.teTop=Math.max(0,Math.min(d.wrapper.clientHeight-10,S.top+O.top-L.top)),m.teLeft=Math.max(0,Math.min(d.wrapper.clientWidth-10,S.left+O.left-L.left))}return m},wr.prototype.showSelection=function(l){var d=this.cm,b=d.display;R(b.cursorDiv,l.cursors),R(b.selectionDiv,l.selection),l.teTop!=null&&(this.wrapper.style.top=l.teTop+"px",this.wrapper.style.left=l.teLeft+"px")},wr.prototype.reset=function(l){if(!(this.contextMenuPending||this.composing&&l)){var d=this.cm;if(this.resetting=!0,d.somethingSelected()){this.prevInput="";var b=d.getSelection();this.textarea.value=b,d.state.focused&&V(this.textarea),u&&f>=9&&(this.hasSelection=b)}else l||(this.prevInput=this.textarea.value="",u&&f>=9&&(this.hasSelection=null));this.resetting=!1}},wr.prototype.getField=function(){return this.textarea},wr.prototype.supportsTouch=function(){return!1},wr.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!T||ae(W(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},wr.prototype.blur=function(){this.textarea.blur()},wr.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},wr.prototype.receivedFocus=function(){this.slowPoll()},wr.prototype.slowPoll=function(){var l=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){l.poll(),l.cm.state.focused&&l.slowPoll()})},wr.prototype.fastPoll=function(){var l=!1,d=this;d.pollingFast=!0;function b(){var m=d.poll();!m&&!l?(l=!0,d.polling.set(60,b)):(d.pollingFast=!1,d.slowPoll())}d.polling.set(20,b)},wr.prototype.poll=function(){var l=this,d=this.cm,b=this.textarea,m=this.prevInput;if(this.contextMenuPending||this.resetting||!d.state.focused||Sr(b)&&!m&&!this.composing||d.isReadOnly()||d.options.disableInput||d.state.keySeq)return!1;var S=b.value;if(S==m&&!d.somethingSelected())return!1;if(u&&f>=9&&this.hasSelection===S||A&&/[\uf700-\uf7ff]/.test(S))return d.display.input.reset(),!1;if(d.doc.sel==d.display.selForContextMenu){var L=S.charCodeAt(0);if(L==8203&&!m&&(m="​"),L==8666)return this.reset(),this.cm.execCommand("undo")}for(var O=0,H=Math.min(m.length,S.length);O<H&&m.charCodeAt(O)==S.charCodeAt(O);)++O;return Dn(d,function(){Kd(d,S.slice(O),m.length-O,null,l.composing?"*compose":null),S.length>1e3||S.indexOf(`
`)>-1?b.value=l.prevInput="":l.prevInput=S,l.composing&&(l.composing.range.clear(),l.composing.range=d.markText(l.composing.start,d.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},wr.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},wr.prototype.onKeyPress=function(){u&&f>=9&&(this.hasSelection=null),this.fastPoll()},wr.prototype.onContextMenu=function(l){var d=this,b=d.cm,m=b.display,S=d.textarea;d.contextMenuPending&&d.contextMenuPending();var L=$i(b,l),O=m.scroller.scrollTop;if(!L||p)return;var H=b.options.resetSelectionOnContextMenu;H&&b.doc.sel.contains(L)==-1&&Pr(b,Zr)(b.doc,li(L),le);var Y=S.style.cssText,J=d.wrapper.style.cssText,ce=d.wrapper.offsetParent.getBoundingClientRect();d.wrapper.style.cssText="position: static",S.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(l.clientY-ce.top-5)+"px; left: "+(l.clientX-ce.left-5)+`px;
      z-index: 1000; background: `+(u?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var ge;c&&(ge=S.ownerDocument.defaultView.scrollY),m.input.focus(),c&&S.ownerDocument.defaultView.scrollTo(null,ge),m.input.reset(),b.somethingSelected()||(S.value=d.prevInput=" "),d.contextMenuPending=Le,m.selForContextMenu=b.doc.sel,clearTimeout(m.detectingSelectAll);function _e(){if(S.selectionStart!=null){var Be=b.somethingSelected(),Ke="​"+(Be?S.value:"");S.value="⇚",S.value=Ke,d.prevInput=Be?"":"​",S.selectionStart=1,S.selectionEnd=Ke.length,m.selForContextMenu=b.doc.sel}}function Le(){if(d.contextMenuPending==Le&&(d.contextMenuPending=!1,d.wrapper.style.cssText=J,S.style.cssText=Y,u&&f<9&&m.scrollbars.setScrollTop(m.scroller.scrollTop=O),S.selectionStart!=null)){(!u||u&&f<9)&&_e();var Be=0,Ke=function(){m.selForContextMenu==b.doc.sel&&S.selectionStart==0&&S.selectionEnd>0&&d.prevInput=="​"?Pr(b,Lx)(b):Be++<10?m.detectingSelectAll=setTimeout(Ke,500):(m.selForContextMenu=null,m.input.reset())};m.detectingSelectAll=setTimeout(Ke,200)}}if(u&&f>=9&&_e(),F){st(l);var Ne=function(){Ie(window,"mouseup",Ne),setTimeout(Le,20)};Ce(window,"mouseup",Ne)}else setTimeout(Le,50)},wr.prototype.readOnlyChanged=function(l){l||this.reset(),this.textarea.disabled=l=="nocursor",this.textarea.readOnly=!!l},wr.prototype.setUneditable=function(){},wr.prototype.needsContentAttribute=!1;function LI(l,d){if(d=d?oe(d):{},d.value=l.value,!d.tabindex&&l.tabIndex&&(d.tabindex=l.tabIndex),!d.placeholder&&l.placeholder&&(d.placeholder=l.placeholder),d.autofocus==null){var b=ae(W(l));d.autofocus=b==l||l.getAttribute("autofocus")!=null&&b==document.body}function m(){l.value=H.getValue()}var S;if(l.form&&(Ce(l.form,"submit",m),!d.leaveSubmitMethodAlone)){var L=l.form;S=L.submit;try{var O=L.submit=function(){m(),L.submit=S,L.submit(),L.submit=O}}catch{}}d.finishInit=function(Y){Y.save=m,Y.getTextArea=function(){return l},Y.toTextArea=function(){Y.toTextArea=isNaN,m(),l.parentNode.removeChild(Y.getWrapperElement()),l.style.display="",l.form&&(Ie(l.form,"submit",m),!d.leaveSubmitMethodAlone&&typeof l.form.submit=="function"&&(l.form.submit=S))}},l.style.display="none";var H=ur(function(Y){return l.parentNode.insertBefore(Y,l.nextSibling)},d);return H}function DI(l){l.off=Ie,l.on=Ce,l.wheelEventPixels=O2,l.Doc=bn,l.splitLines=Ht,l.countColumn=te,l.findColumn=be,l.isWordChar=Fe,l.Pass=ne,l.signal=He,l.Line=ko,l.changeEnd=ui,l.scrollbarModel=nx,l.Pos=Re,l.cmpPos=Ze,l.modes=Qt,l.mimeModes=hr,l.resolveMode=gn,l.getMode=Qn,l.modeExtensions=Ln,l.extendMode=Jn,l.copyState=sn,l.startState=Gn,l.innerMode=ka,l.commands=ol,l.keyMap=Ba,l.keyName=Ux,l.isModifierKey=Gx,l.lookupKey=$o,l.normalizeKeyMap=nI,l.StringStream=qt,l.SharedTextMarker=nl,l.TextMarker=ci,l.LineWidget=rl,l.e_preventDefault=$e,l.e_stopPropagation=vt,l.e_stop=st,l.addClass=re,l.contains=z,l.rmClass=B,l.keyNames=di}bI(ur),CI(ur);var _I="iter insert remove copy getEditor constructor".split(" ");for(var Zu in bn.prototype)bn.prototype.hasOwnProperty(Zu)&&se(_I,Zu)<0&&(ur.prototype[Zu]=function(l){return function(){return l.apply(this.doc,arguments)}}(bn.prototype[Zu]));return Ge(bn),ur.inputStyles={textarea:wr,contenteditable:Ut},ur.defineMode=function(l){!ur.defaults.mode&&l!="null"&&(ur.defaults.mode=l),nr.apply(this,arguments)},ur.defineMIME=jr,ur.defineMode("null",function(){return{token:function(l){return l.skipToEnd()}}}),ur.defineMIME("text/plain","null"),ur.defineExtension=function(l,d){ur.prototype[l]=d},ur.defineDocExtension=function(l,d){bn.prototype[l]=d},ur.fromTextArea=LI,DI(ur),ur.version="5.65.19",ur})}(Ff)),Ff.exports}var oR;function F9(){return oR||(oR=1,function(t,e){(function(r){r(Ui())})(function(r){r.defineMode("javascript",function(n,a){var i=n.indentUnit,o=a.statementIndent,s=a.jsonld,u=a.json||s,f=a.trackScope!==!1,c=a.typescript,h=a.wordCharacters||/[\w$\xa1-\uffff]/,g=function(){function Q(Mr){return{type:Mr,style:"keyword"}}var fe=Q("keyword a"),ke=Q("keyword b"),ze=Q("keyword c"),Re=Q("keyword d"),Ze=Q("operator"),kt={type:"atom",style:"atom"};return{if:Q("if"),while:fe,with:fe,else:ke,do:ke,try:ke,finally:ke,return:Re,break:Re,continue:Re,new:Q("new"),delete:ze,void:ze,throw:ze,debugger:Q("debugger"),var:Q("var"),const:Q("var"),let:Q("var"),function:Q("function"),catch:Q("catch"),for:Q("for"),switch:Q("switch"),case:Q("case"),default:Q("default"),in:Ze,typeof:Ze,instanceof:Ze,true:kt,false:kt,null:kt,undefined:kt,NaN:kt,Infinity:kt,this:Q("this"),class:Q("class"),super:Q("atom"),yield:ze,export:Q("export"),import:Q("import"),extends:ze,await:ze}}(),y=/[+\-*&%=<>!?|~^@]/,p=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function C(Q){for(var fe=!1,ke,ze=!1;(ke=Q.next())!=null;){if(!fe){if(ke=="/"&&!ze)return;ke=="["?ze=!0:ze&&ke=="]"&&(ze=!1)}fe=!fe&&ke=="\\"}}var E,v;function x(Q,fe,ke){return E=Q,v=ke,fe}function w(Q,fe){var ke=Q.next();if(ke=='"'||ke=="'")return fe.tokenize=T(ke),fe.tokenize(Q,fe);if(ke=="."&&Q.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return x("number","number");if(ke=="."&&Q.match(".."))return x("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ke))return x(ke);if(ke=="="&&Q.eat(">"))return x("=>","operator");if(ke=="0"&&Q.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return x("number","number");if(/\d/.test(ke))return Q.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),x("number","number");if(ke=="/")return Q.eat("*")?(fe.tokenize=A,A(Q,fe)):Q.eat("/")?(Q.skipToEnd(),x("comment","comment")):Pt(Q,fe,1)?(C(Q),Q.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),x("regexp","string-2")):(Q.eat("="),x("operator","operator",Q.current()));if(ke=="`")return fe.tokenize=M,M(Q,fe);if(ke=="#"&&Q.peek()=="!")return Q.skipToEnd(),x("meta","meta");if(ke=="#"&&Q.eatWhile(h))return x("variable","property");if(ke=="<"&&Q.match("!--")||ke=="-"&&Q.match("->")&&!/\S/.test(Q.string.slice(0,Q.start)))return Q.skipToEnd(),x("comment","comment");if(y.test(ke))return(ke!=">"||!fe.lexical||fe.lexical.type!=">")&&(Q.eat("=")?(ke=="!"||ke=="=")&&Q.eat("="):/[<>*+\-|&?]/.test(ke)&&(Q.eat(ke),ke==">"&&Q.eat(ke))),ke=="?"&&Q.eat(".")?x("."):x("operator","operator",Q.current());if(h.test(ke)){Q.eatWhile(h);var ze=Q.current();if(fe.lastType!="."){if(g.propertyIsEnumerable(ze)){var Re=g[ze];return x(Re.type,Re.style,ze)}if(ze=="async"&&Q.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return x("async","keyword",ze)}return x("variable","variable",ze)}}function T(Q){return function(fe,ke){var ze=!1,Re;if(s&&fe.peek()=="@"&&fe.match(p))return ke.tokenize=w,x("jsonld-keyword","meta");for(;(Re=fe.next())!=null&&!(Re==Q&&!ze);)ze=!ze&&Re=="\\";return ze||(ke.tokenize=w),x("string","string")}}function A(Q,fe){for(var ke=!1,ze;ze=Q.next();){if(ze=="/"&&ke){fe.tokenize=w;break}ke=ze=="*"}return x("comment","comment")}function M(Q,fe){for(var ke=!1,ze;(ze=Q.next())!=null;){if(!ke&&(ze=="`"||ze=="$"&&Q.eat("{"))){fe.tokenize=w;break}ke=!ke&&ze=="\\"}return x("quasi","string-2",Q.current())}var D="([{}])";function _(Q,fe){fe.fatArrowAt&&(fe.fatArrowAt=null);var ke=Q.string.indexOf("=>",Q.start);if(!(ke<0)){if(c){var ze=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Q.string.slice(Q.start,ke));ze&&(ke=ze.index)}for(var Re=0,Ze=!1,kt=ke-1;kt>=0;--kt){var Mr=Q.string.charAt(kt),yn=D.indexOf(Mr);if(yn>=0&&yn<3){if(!Re){++kt;break}if(--Re==0){Mr=="("&&(Ze=!0);break}}else if(yn>=3&&yn<6)++Re;else if(h.test(Mr))Ze=!0;else if(/["'\/`]/.test(Mr))for(;;--kt){if(kt==0)return;var Po=Q.string.charAt(kt-1);if(Po==Mr&&Q.string.charAt(kt-2)!="\\"){kt--;break}}else if(Ze&&!Re){++kt;break}}Ze&&!Re&&(fe.fatArrowAt=kt)}}var k={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function F(Q,fe,ke,ze,Re,Ze){this.indented=Q,this.column=fe,this.type=ke,this.prev=Re,this.info=Ze,ze!=null&&(this.align=ze)}function G(Q,fe){if(!f)return!1;for(var ke=Q.localVars;ke;ke=ke.next)if(ke.name==fe)return!0;for(var ze=Q.context;ze;ze=ze.prev)for(var ke=ze.vars;ke;ke=ke.next)if(ke.name==fe)return!0}function B(Q,fe,ke,ze,Re){var Ze=Q.cc;for(q.state=Q,q.stream=Re,q.marked=null,q.cc=Ze,q.style=fe,Q.lexical.hasOwnProperty("align")||(Q.lexical.align=!0);;){var kt=Ze.length?Ze.pop():u?se:te;if(kt(ke,ze)){for(;Ze.length&&Ze[Ze.length-1].lex;)Ze.pop()();return q.marked?q.marked:ke=="variable"&&G(Q,ze)?"variable-2":fe}}}var q={state:null,marked:null,cc:null};function R(){for(var Q=arguments.length-1;Q>=0;Q--)q.cc.push(arguments[Q])}function P(){return R.apply(null,arguments),!0}function N(Q,fe){for(var ke=fe;ke;ke=ke.next)if(ke.name==Q)return!0;return!1}function I(Q){var fe=q.state;if(q.marked="def",!!f){if(fe.context){if(fe.lexical.info=="var"&&fe.context&&fe.context.block){var ke=z(Q,fe.context);if(ke!=null){fe.context=ke;return}}else if(!N(Q,fe.localVars)){fe.localVars=new K(Q,fe.localVars);return}}a.globalVars&&!N(Q,fe.globalVars)&&(fe.globalVars=new K(Q,fe.globalVars))}}function z(Q,fe){if(fe)if(fe.block){var ke=z(Q,fe.prev);return ke?ke==fe.prev?fe:new re(ke,fe.vars,!0):null}else return N(Q,fe.vars)?fe:new re(fe.prev,new K(Q,fe.vars),!1);else return null}function ae(Q){return Q=="public"||Q=="private"||Q=="protected"||Q=="abstract"||Q=="readonly"}function re(Q,fe,ke){this.prev=Q,this.vars=fe,this.block=ke}function K(Q,fe){this.name=Q,this.next=fe}var V=new K("this",new K("arguments",null));function Z(){q.state.context=new re(q.state.context,q.state.localVars,!1),q.state.localVars=V}function U(){q.state.context=new re(q.state.context,q.state.localVars,!0),q.state.localVars=null}Z.lex=U.lex=!0;function W(){q.state.localVars=q.state.context.vars,q.state.context=q.state.context.prev}W.lex=!0;function X(Q,fe){var ke=function(){var ze=q.state,Re=ze.indented;if(ze.lexical.type=="stat")Re=ze.lexical.indented;else for(var Ze=ze.lexical;Ze&&Ze.type==")"&&Ze.align;Ze=Ze.prev)Re=Ze.indented;ze.lexical=new F(Re,q.stream.column(),Q,null,ze.lexical,fe)};return ke.lex=!0,ke}function ee(){var Q=q.state;Q.lexical.prev&&(Q.lexical.type==")"&&(Q.indented=Q.lexical.indented),Q.lexical=Q.lexical.prev)}ee.lex=!0;function oe(Q){function fe(ke){return ke==Q?P():Q==";"||ke=="}"||ke==")"||ke=="]"?R():P(fe)}return fe}function te(Q,fe){return Q=="var"?P(X("vardef",fe),vt,oe(";"),ee):Q=="keyword a"?P(X("form"),ne,te,ee):Q=="keyword b"?P(X("form"),te,ee):Q=="keyword d"?q.stream.match(/^\s*$/,!1)?P():P(X("stat"),Se,oe(";"),ee):Q=="debugger"?P(oe(";")):Q=="{"?P(X("}"),U,he,ee,W):Q==";"?P():Q=="if"?(q.state.lexical.info=="else"&&q.state.cc[q.state.cc.length-1]==ee&&q.state.cc.pop()(),P(X("form"),ne,te,ee,_t)):Q=="function"?P(Ht):Q=="for"?P(X("form"),U,Mt,te,W,ee):Q=="class"||c&&fe=="interface"?(q.marked="keyword",P(X("form",Q=="class"?Q:fe),Qt,ee)):Q=="variable"?c&&fe=="declare"?(q.marked="keyword",P(te)):c&&(fe=="module"||fe=="enum"||fe=="type")&&q.stream.match(/^\s*\w/,!1)?(q.marked="keyword",fe=="enum"?P(ct):fe=="type"?P(on,oe("operator"),xe,oe(";")):P(X("form"),nt,oe("{"),X("}"),he,ee,ee)):c&&fe=="namespace"?(q.marked="keyword",P(X("form"),se,te,ee)):c&&fe=="abstract"?(q.marked="keyword",P(te)):P(X("stat"),Pe):Q=="switch"?P(X("form"),ne,oe("{"),X("}","switch"),U,he,ee,ee,W):Q=="case"?P(se,oe(":")):Q=="default"?P(oe(":")):Q=="catch"?P(X("form"),Z,ie,te,ee,W):Q=="export"?P(X("stat"),gn,ee):Q=="import"?P(X("stat"),Ln,ee):Q=="async"?P(te):fe=="@"?P(se,te):R(X("stat"),se,oe(";"),ee)}function ie(Q){if(Q=="(")return P(Rt,oe(")"))}function se(Q,fe){return le(Q,fe,!1)}function $(Q,fe){return le(Q,fe,!0)}function ne(Q){return Q!="("?R():P(X(")"),Se,oe(")"),ee)}function le(Q,fe,ke){if(q.state.fatArrowAt==q.stream.start){var ze=ke?ye:de;if(Q=="(")return P(Z,X(")"),Xe(Rt,")"),ee,oe("=>"),ze,W);if(Q=="variable")return R(Z,nt,oe("=>"),ze,W)}var Re=ke?be:De;return k.hasOwnProperty(Q)?P(Re):Q=="function"?P(Ht,Re):Q=="class"||c&&fe=="interface"?(q.marked="keyword",P(X("form"),rr,ee)):Q=="keyword c"||Q=="async"?P(ke?$:se):Q=="("?P(X(")"),Se,oe(")"),ee,Re):Q=="operator"||Q=="spread"?P(ke?$:se):Q=="["?P(X("]"),qt,ee,Re):Q=="{"?We(Ye,"}",null,Re):Q=="quasi"?R(Te,Re):Q=="new"?P(Ee(ke)):P()}function Se(Q){return Q.match(/[;\}\)\],]/)?R():R(se)}function De(Q,fe){return Q==","?P(Se):be(Q,fe,!1)}function be(Q,fe,ke){var ze=ke==!1?De:be,Re=ke==!1?se:$;if(Q=="=>")return P(Z,ke?ye:de,W);if(Q=="operator")return/\+\+|--/.test(fe)||c&&fe=="!"?P(ze):c&&fe=="<"&&q.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?P(X(">"),Xe(xe,">"),ee,ze):fe=="?"?P(se,oe(":"),Re):P(Re);if(Q=="quasi")return R(Te,ze);if(Q!=";"){if(Q=="(")return We($,")","call",ze);if(Q==".")return P(Fe,ze);if(Q=="[")return P(X("]"),Se,oe("]"),ee,ze);if(c&&fe=="as")return q.marked="keyword",P(xe,ze);if(Q=="regexp")return q.state.lastType=q.marked="operator",q.stream.backUp(q.stream.pos-q.stream.start-1),P(Re)}}function Te(Q,fe){return Q!="quasi"?R():fe.slice(fe.length-2)!="${"?P(Te):P(Se,pe)}function pe(Q){if(Q=="}")return q.marked="string-2",q.state.tokenize=M,P(Te)}function de(Q){return _(q.stream,q.state),R(Q=="{"?te:se)}function ye(Q){return _(q.stream,q.state),R(Q=="{"?te:$)}function Ee(Q){return function(fe){return fe=="."?P(Q?Ae:ue):fe=="variable"&&c?P(et,Q?be:De):R(Q?$:se)}}function ue(Q,fe){if(fe=="target")return q.marked="keyword",P(De)}function Ae(Q,fe){if(fe=="target")return q.marked="keyword",P(be)}function Pe(Q){return Q==":"?P(ee,te):R(De,oe(";"),ee)}function Fe(Q){if(Q=="variable")return q.marked="property",P()}function Ye(Q,fe){if(Q=="async")return q.marked="property",P(Ye);if(Q=="variable"||q.style=="keyword"){if(q.marked="property",fe=="get"||fe=="set")return P(Ve);var ke;return c&&q.state.fatArrowAt==q.stream.start&&(ke=q.stream.match(/^\s*:\s*/,!1))&&(q.state.fatArrowAt=q.stream.pos+ke[0].length),P(Qe)}else{if(Q=="number"||Q=="string")return q.marked=s?"property":q.style+" property",P(Qe);if(Q=="jsonld-keyword")return P(Qe);if(c&&ae(fe))return q.marked="keyword",P(Ye);if(Q=="[")return P(se,j,oe("]"),Qe);if(Q=="spread")return P($,Qe);if(fe=="*")return q.marked="keyword",P(Ye);if(Q==":")return R(Qe)}}function Ve(Q){return Q!="variable"?R(Qe):(q.marked="property",P(Ht))}function Qe(Q){if(Q==":")return P($);if(Q=="(")return R(Ht)}function Xe(Q,fe,ke){function ze(Re,Ze){if(ke?ke.indexOf(Re)>-1:Re==","){var kt=q.state.lexical;return kt.info=="call"&&(kt.pos=(kt.pos||0)+1),P(function(Mr,yn){return Mr==fe||yn==fe?R():R(Q)},ze)}return Re==fe||Ze==fe?P():ke&&ke.indexOf(";")>-1?R(Q):P(oe(fe))}return function(Re,Ze){return Re==fe||Ze==fe?P():R(Q,ze)}}function We(Q,fe,ke){for(var ze=3;ze<arguments.length;ze++)q.cc.push(arguments[ze]);return P(X(fe,ke),Xe(Q,fe),ee)}function he(Q){return Q=="}"?P():R(te,he)}function j(Q,fe){if(c){if(Q==":")return P(xe);if(fe=="?")return P(j)}}function ve(Q,fe){if(c&&(Q==":"||fe=="in"))return P(xe)}function me(Q){if(c&&Q==":")return q.stream.match(/^\s*\w+\s+is\b/,!1)?P(se,we,xe):P(xe)}function we(Q,fe){if(fe=="is")return q.marked="keyword",P()}function xe(Q,fe){if(fe=="keyof"||fe=="typeof"||fe=="infer"||fe=="readonly")return q.marked="keyword",P(fe=="typeof"?$:xe);if(Q=="variable"||fe=="void")return q.marked="type",P(je);if(fe=="|"||fe=="&")return P(xe);if(Q=="string"||Q=="number"||Q=="atom")return P(je);if(Q=="[")return P(X("]"),Xe(xe,"]",","),ee,je);if(Q=="{")return P(X("}"),Ce,ee,je);if(Q=="(")return P(Xe(Ue,")"),qe,je);if(Q=="<")return P(Xe(xe,">"),xe);if(Q=="quasi")return R(Ie,je)}function qe(Q){if(Q=="=>")return P(xe)}function Ce(Q){return Q.match(/[\}\)\]]/)?P():Q==","||Q==";"?P(Ce):R(Oe,Ce)}function Oe(Q,fe){if(Q=="variable"||q.style=="keyword")return q.marked="property",P(Oe);if(fe=="?"||Q=="number"||Q=="string")return P(Oe);if(Q==":")return P(xe);if(Q=="[")return P(oe("variable"),ve,oe("]"),Oe);if(Q=="(")return R(Sr,Oe);if(!Q.match(/[;\}\)\],]/))return P()}function Ie(Q,fe){return Q!="quasi"?R():fe.slice(fe.length-2)!="${"?P(Ie):P(xe,He)}function He(Q){if(Q=="}")return q.marked="string-2",q.state.tokenize=M,P(Ie)}function Ue(Q,fe){return Q=="variable"&&q.stream.match(/^\s*[?:]/,!1)||fe=="?"?P(Ue):Q==":"?P(xe):Q=="spread"?P(Ue):R(xe)}function je(Q,fe){if(fe=="<")return P(X(">"),Xe(xe,">"),ee,je);if(fe=="|"||Q=="."||fe=="&")return P(xe);if(Q=="[")return P(xe,oe("]"),je);if(fe=="extends"||fe=="implements")return q.marked="keyword",P(xe);if(fe=="?")return P(xe,oe(":"),xe)}function et(Q,fe){if(fe=="<")return P(X(">"),Xe(xe,">"),ee,je)}function Ge(){return R(xe,$e)}function $e(Q,fe){if(fe=="=")return P(xe)}function vt(Q,fe){return fe=="enum"?(q.marked="keyword",P(ct)):R(nt,j,dt,gt)}function nt(Q,fe){if(c&&ae(fe))return q.marked="keyword",P(nt);if(Q=="variable")return I(fe),P();if(Q=="spread")return P(nt);if(Q=="[")return We(Tt,"]");if(Q=="{")return We(st,"}")}function st(Q,fe){return Q=="variable"&&!q.stream.match(/^\s*:/,!1)?(I(fe),P(dt)):(Q=="variable"&&(q.marked="property"),Q=="spread"?P(nt):Q=="}"?R():Q=="["?P(se,oe("]"),oe(":"),st):P(oe(":"),nt,dt))}function Tt(){return R(nt,dt)}function dt(Q,fe){if(fe=="=")return P($)}function gt(Q){if(Q==",")return P(vt)}function _t(Q,fe){if(Q=="keyword b"&&fe=="else")return P(X("form","else"),te,ee)}function Mt(Q,fe){if(fe=="await")return P(Mt);if(Q=="(")return P(X(")"),Zt,ee)}function Zt(Q){return Q=="var"?P(vt,Lt):Q=="variable"?P(Lt):R(Lt)}function Lt(Q,fe){return Q==")"?P():Q==";"?P(Lt):fe=="in"||fe=="of"?(q.marked="keyword",P(se,Lt)):R(se,Lt)}function Ht(Q,fe){if(fe=="*")return q.marked="keyword",P(Ht);if(Q=="variable")return I(fe),P(Ht);if(Q=="(")return P(Z,X(")"),Xe(Rt,")"),ee,me,te,W);if(c&&fe=="<")return P(X(">"),Xe(Ge,">"),ee,Ht)}function Sr(Q,fe){if(fe=="*")return q.marked="keyword",P(Sr);if(Q=="variable")return I(fe),P(Sr);if(Q=="(")return P(Z,X(")"),Xe(Rt,")"),ee,me,W);if(c&&fe=="<")return P(X(">"),Xe(Ge,">"),ee,Sr)}function on(Q,fe){if(Q=="keyword"||Q=="variable")return q.marked="type",P(on);if(fe=="<")return P(X(">"),Xe(Ge,">"),ee)}function Rt(Q,fe){return fe=="@"&&P(se,Rt),Q=="spread"?P(Rt):c&&ae(fe)?(q.marked="keyword",P(Rt)):c&&Q=="this"?P(j,dt):R(nt,j,dt)}function rr(Q,fe){return Q=="variable"?Qt(Q,fe):hr(Q,fe)}function Qt(Q,fe){if(Q=="variable")return I(fe),P(hr)}function hr(Q,fe){if(fe=="<")return P(X(">"),Xe(Ge,">"),ee,hr);if(fe=="extends"||fe=="implements"||c&&Q==",")return fe=="implements"&&(q.marked="keyword"),P(c?xe:se,hr);if(Q=="{")return P(X("}"),nr,ee)}function nr(Q,fe){if(Q=="async"||Q=="variable"&&(fe=="static"||fe=="get"||fe=="set"||c&&ae(fe))&&q.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return q.marked="keyword",P(nr);if(Q=="variable"||q.style=="keyword")return q.marked="property",P(jr,nr);if(Q=="number"||Q=="string")return P(jr,nr);if(Q=="[")return P(se,j,oe("]"),jr,nr);if(fe=="*")return q.marked="keyword",P(nr);if(c&&Q=="(")return R(Sr,nr);if(Q==";"||Q==",")return P(nr);if(Q=="}")return P();if(fe=="@")return P(se,nr)}function jr(Q,fe){if(fe=="!"||fe=="?")return P(jr);if(Q==":")return P(xe,dt);if(fe=="=")return P($);var ke=q.state.lexical.prev,ze=ke&&ke.info=="interface";return R(ze?Sr:Ht)}function gn(Q,fe){return fe=="*"?(q.marked="keyword",P(Gn,oe(";"))):fe=="default"?(q.marked="keyword",P(se,oe(";"))):Q=="{"?P(Xe(Qn,"}"),Gn,oe(";")):R(te)}function Qn(Q,fe){if(fe=="as")return q.marked="keyword",P(oe("variable"));if(Q=="variable")return R($,Qn)}function Ln(Q){return Q=="string"?P():Q=="("?R(se):Q=="."?R(De):R(Jn,sn,Gn)}function Jn(Q,fe){return Q=="{"?We(Jn,"}"):(Q=="variable"&&I(fe),fe=="*"&&(q.marked="keyword"),P(ka))}function sn(Q){if(Q==",")return P(Jn,sn)}function ka(Q,fe){if(fe=="as")return q.marked="keyword",P(Jn)}function Gn(Q,fe){if(fe=="from")return q.marked="keyword",P(se)}function qt(Q){return Q=="]"?P():R(Xe($,"]"))}function ct(){return R(X("form"),nt,oe("{"),X("}"),Xe(Gr,"}"),ee,ee)}function Gr(){return R(nt,dt)}function ea(Q,fe){return Q.lastType=="operator"||Q.lastType==","||y.test(fe.charAt(0))||/[,.]/.test(fe.charAt(0))}function Pt(Q,fe,ke){return fe.tokenize==w&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(fe.lastType)||fe.lastType=="quasi"&&/\{\s*$/.test(Q.string.slice(0,Q.pos-(ke||0)))}return{startState:function(Q){var fe={tokenize:w,lastType:"sof",cc:[],lexical:new F((Q||0)-i,0,"block",!1),localVars:a.localVars,context:a.localVars&&new re(null,null,!1),indented:Q||0};return a.globalVars&&typeof a.globalVars=="object"&&(fe.globalVars=a.globalVars),fe},token:function(Q,fe){if(Q.sol()&&(fe.lexical.hasOwnProperty("align")||(fe.lexical.align=!1),fe.indented=Q.indentation(),_(Q,fe)),fe.tokenize!=A&&Q.eatSpace())return null;var ke=fe.tokenize(Q,fe);return E=="comment"?ke:(fe.lastType=E=="operator"&&(v=="++"||v=="--")?"incdec":E,B(fe,ke,E,v,Q))},indent:function(Q,fe){if(Q.tokenize==A||Q.tokenize==M)return r.Pass;if(Q.tokenize!=w)return 0;var ke=fe&&fe.charAt(0),ze=Q.lexical,Re;if(!/^\s*else\b/.test(fe))for(var Ze=Q.cc.length-1;Ze>=0;--Ze){var kt=Q.cc[Ze];if(kt==ee)ze=ze.prev;else if(kt!=_t&&kt!=W)break}for(;(ze.type=="stat"||ze.type=="form")&&(ke=="}"||(Re=Q.cc[Q.cc.length-1])&&(Re==De||Re==be)&&!/^[,\.=+\-*:?[\(]/.test(fe));)ze=ze.prev;o&&ze.type==")"&&ze.prev.type=="stat"&&(ze=ze.prev);var Mr=ze.type,yn=ke==Mr;return Mr=="vardef"?ze.indented+(Q.lastType=="operator"||Q.lastType==","?ze.info.length+1:0):Mr=="form"&&ke=="{"?ze.indented:Mr=="form"?ze.indented+i:Mr=="stat"?ze.indented+(ea(Q,fe)?o||i:0):ze.info=="switch"&&!yn&&a.doubleIndentSwitch!=!1?ze.indented+(/^(?:case|default)\b/.test(fe)?i:2*i):ze.align?ze.column+(yn?0:1):ze.indented+(yn?0:i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:u?null:"/*",blockCommentEnd:u?null:"*/",blockCommentContinue:u?null:" * ",lineComment:u?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:u?"json":"javascript",jsonldMode:s,jsonMode:u,expressionAllowed:Pt,skipExpression:function(Q){B(Q,"atom","atom","true",new r.StringStream("",2,null))}}}),r.registerHelper("wordChars","javascript",/[\w$]/),r.defineMIME("text/javascript","javascript"),r.defineMIME("text/ecmascript","javascript"),r.defineMIME("application/javascript","javascript"),r.defineMIME("application/x-javascript","javascript"),r.defineMIME("application/ecmascript","javascript"),r.defineMIME("application/json",{name:"javascript",json:!0}),r.defineMIME("application/x-json",{name:"javascript",json:!0}),r.defineMIME("application/manifest+json",{name:"javascript",json:!0}),r.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),r.defineMIME("text/typescript",{name:"javascript",typescript:!0}),r.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),aR.exports}F9();var B9=Ui();const uw=Ao(B9),q9={class:"data-input-panel"},z9={class:"editor-wrapper"},G9={class:"footer-status"},H9={key:0,class:"status-message error"},U9={key:1,class:"status-message success"},V9=Dr({__name:"DataInputPanel",props:{isActive:{type:Boolean}},setup(t){const e=t,r=od(),n=bt(null);let a=null,i=!1;const o=bt(null),s=u=>{try{JSON.parse(u),o.value=null}catch(f){o.value=f.message}};return Da(async()=>{await Kn(),n.value&&(a=uw(n.value,{value:r.currentGraphDataString,mode:{name:"javascript",json:!0},theme:"material-darker",lineNumbers:!0,tabSize:2}),a.on("change",u=>{if(i)return;const f=u.getValue();r.currentGraphDataString=f,s(f)}),s(r.currentGraphDataString),e.isActive&&Kn(()=>a==null?void 0:a.refresh()))}),_a(()=>{var u;if(a){const f=a.getWrapperElement();(u=f.parentNode)==null||u.removeChild(f),a=null}}),cr(()=>r.currentGraphDataString,u=>{a&&a.getValue()!==u&&(i=!0,a.setValue(u),i=!1,s(u))}),cr(()=>e.isActive,u=>{u&&a&&Kn(()=>{a==null||a.refresh()})}),(u,f)=>(Je(),ot("div",q9,[f[2]||(f[2]=Me("h4",null,"Model Data & Inits",-1)),f[3]||(f[3]=Me("p",{class:"description"}," Define observed data and initial values for your model in JSON format. ",-1)),Me("div",z9,[Me("div",{ref_key:"editorContainer",ref:n,class:"editor-container"},null,512)]),Me("div",G9,[o.value?(Je(),ot("div",H9,[f[0]||(f[0]=Me("i",{class:"fas fa-times-circle"},null,-1)),xt(" "+Kt(o.value),1)])):(Je(),ot("div",U9,f[1]||(f[1]=[Me("i",{class:"fas fa-check-circle"},null,-1),xt(" Valid JSON ")])))])]))}}),W9=Kr(V9,[["__scopeId","data-v-105d0034"]]),$9=["value","disabled"],Y9=["value"],X9=Dr({__name:"BaseSelect",props:{modelValue:{},options:{},disabled:{type:Boolean}},emits:["update:modelValue","change"],setup(t,{emit:e}){const r=t,n=e,a=o=>{const s=o.target;n("update:modelValue",s.value),n("change",o)},i=Ft(()=>({"base-select":!0,"select-disabled":r.disabled}));return(o,s)=>(Je(),ot("select",{value:o.modelValue,onChange:a,disabled:o.disabled,class:jt(i.value)},[(Je(!0),ot(Yt,null,Bn(o.options,u=>(Je(),ot("option",{key:u.value,value:u.value},Kt(u.label),9,Y9))),128))],42,$9))}}),K9=Kr(X9,[["__scopeId","data-v-4e558a4b"]]),j9={class:"node-properties-panel"},Z9={key:0,class:"no-selection-message"},Q9={key:1,class:"properties-form"},J9={key:0,class:"validation-errors-container"},e8={class:"form-group"},t8=["for"],r8={class:"input-wrapper"},n8=["id","onUpdate:modelValue"],a8={key:0,class:"help-text"},i8={key:1,class:"help-text distribution-help"},o8={key:2,class:"error-message"},s8=["for"],l8={key:2,class:"form-group"},u8={class:"action-buttons"},f8={key:0},c8={key:0},d8=Dr({__name:"NodePropertiesPanel",props:{selectedElement:{},validationErrors:{}},emits:["update-element","delete-element"],setup(t,{emit:e}){const r=t,n=e,a=bt(null),i=bt(!1),o=Ft(()=>{var v;if(((v=a.value)==null?void 0:v.type)==="node")return e1(a.value.nodeType)}),s=Ft(()=>{var v;if(((v=a.value)==null?void 0:v.type)==="node"){const x=a.value;return LO(x.distribution||"")}}),u=Ft(()=>{var v,x;if(((v=a.value)==null?void 0:v.type)==="node"){const w=a.value;if(w.distribution){const T=e1(w.nodeType),A=T==null?void 0:T.properties.find(M=>M.key==="distribution");return(x=A==null?void 0:A.options)==null?void 0:x.find(M=>M.value===w.distribution)}}}),f=Ft(()=>r.selectedElement?r.validationErrors.get(r.selectedElement.id)||[]:[]);cr(()=>r.selectedElement,v=>{a.value=v?JSON.parse(JSON.stringify(v)):null},{deep:!0,immediate:!0});const c=Ft(()=>{var v;return((v=a.value)==null?void 0:v.type)==="node"}),h=Ft(()=>{var v;return((v=a.value)==null?void 0:v.type)==="edge"}),g=()=>{a.value&&n("update-element",a.value)},y=()=>{a.value&&(i.value=!0)},p=()=>{a.value&&(n("delete-element",a.value.id),a.value=null),i.value=!1},C=()=>{i.value=!1},E=v=>{if(a.value){const x=r.validationErrors.get(a.value.id),w=x==null?void 0:x.find(T=>T.field===v);return w==null?void 0:w.message}};return(v,x)=>(Je(),ot("div",j9,[x[10]||(x[10]=Me("h4",null,"Properties",-1)),a.value?(Je(),ot("div",Q9,[f.value.length>0?(Je(),ot("div",J9,[x[2]||(x[2]=Me("h5",{class:"validation-title"},[Me("i",{class:"fas fa-exclamation-triangle"}),xt(" Validation Issues ")],-1)),Me("ul",null,[(Je(!0),ot(Yt,null,Bn(f.value,(w,T)=>(Je(),ot("li",{key:T},Kt(w.message),1))),128))])])):fr("",!0),Me("div",e8,[x[3]||(x[3]=Me("label",{for:"element-id"},"ID:",-1)),at(Yn,{id:"element-id","model-value":a.value.id,disabled:""},null,8,["model-value"])]),c.value&&o.value?(Je(),ot(Yt,{key:1},[(Je(!0),ot(Yt,null,Bn(o.value.properties,w=>{var T;return Je(),ot("div",{key:w.key,class:"form-group"},[Me("label",{for:`prop-${w.key}`},Kt(w.label)+":",9,t8),Me("div",r8,[w.type==="select"?(Je(),fa(K9,{key:0,id:`prop-${w.key}`,modelValue:a.value[w.key],"onUpdate:modelValue":A=>a.value[w.key]=A,options:w.options,onChange:g,class:jt({"has-error":E(w.key)})},null,8,["id","modelValue","onUpdate:modelValue","options","class"])):w.type==="checkbox"?Vn((Je(),ot("input",{key:1,type:"checkbox",id:`prop-${w.key}`,"onUpdate:modelValue":A=>a.value[w.key]=A,onChange:g,class:"form-checkbox"},null,40,n8)),[[kP,a.value[w.key]]]):(Je(),fa(Yn,{key:2,id:`prop-${w.key}`,type:w.type,modelValue:a.value[w.key],"onUpdate:modelValue":A=>a.value[w.key]=A,placeholder:w.placeholder,onInput:g,class:jt({"has-error":E(w.key)})},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","class"]))]),w.helpText?(Je(),ot("small",a8,Kt(w.helpText),1)):fr("",!0),w.key==="distribution"&&((T=u.value)!=null&&T.helpText)?(Je(),ot("small",i8,Kt(u.value.helpText),1)):fr("",!0),E(w.key)?(Je(),ot("small",o8,Kt(E(w.key)),1)):fr("",!0)])}),128)),s.value&&o.value.parameters?(Je(!0),ot(Yt,{key:0},Bn(s.value.paramNames,(w,T)=>(Je(),ot("div",{key:w,class:"form-group"},[Me("label",{for:`param-${T}`},Kt(w)+":",9,s8),at(Yn,{id:`param-${T}`,type:"text",modelValue:a.value[`param${T+1}`],"onUpdate:modelValue":A=>a.value[`param${T+1}`]=A,placeholder:"Enter value or parent name",onInput:g,class:jt({"has-error":E(`param${T+1}`)})},null,8,["id","modelValue","onUpdate:modelValue","class"])]))),128)):fr("",!0)],64)):h.value?(Je(),ot("div",l8,[x[4]||(x[4]=Me("label",{for:"edge-name"},"Name (Label):",-1)),at(Yn,{id:"edge-name",type:"text",modelValue:a.value.name,"onUpdate:modelValue":x[0]||(x[0]=w=>a.value.name=w),placeholder:"Enter optional edge label",onInput:g},null,8,["modelValue"])])):fr("",!0),Me("div",u8,[at(Wt,{onClick:y,type:"danger"},{default:ft(()=>x[5]||(x[5]=[xt("Delete Element")])),_:1,__:[5]})])])):(Je(),ot("div",Z9,x[1]||(x[1]=[Me("p",null,"Select a node or edge on the canvas to view/edit its properties.",-1)]))),at(Oi,{"is-open":i.value,onClose:C},{header:ft(()=>x[6]||(x[6]=[Me("h3",null,"Confirm Deletion",-1)])),body:ft(()=>[a.value?(Je(),ot("p",f8,[xt(" Are you sure you want to delete this "+Kt(a.value.type)+"? ",1),"name"in a.value&&a.value.name?(Je(),ot("strong",c8,Kt(a.value.name),1)):fr("",!0),x[7]||(x[7]=xt(" This action cannot be undone. "))])):fr("",!0)]),footer:ft(()=>[at(Wt,{onClick:C,type:"secondary"},{default:ft(()=>x[8]||(x[8]=[xt("Cancel")])),_:1,__:[8]}),at(Wt,{onClick:p,type:"danger"},{default:ft(()=>x[9]||(x[9]=[xt("Delete")])),_:1,__:[9]})]),_:1},8,["is-open"])]))}}),h8=Kr(d8,[["__scopeId","data-v-dcce786d"]]);function v8(t,e){return{generatedCode:Ft(()=>{var p;const n=t.value.filter(C=>C.type==="node"),a=t.value.filter(C=>C.type==="edge"),i=new Map(n.map(C=>[C.id,C]));if(n.length===0)return`model {
  # Your model will appear here...
}`;const o={},s={};n.forEach(C=>{o[C.id]=0,s[C.id]=[]}),a.forEach(C=>{s[C.source]&&o[C.target]!==void 0&&(s[C.source].push(C.target),o[C.target]++)});const u=n.filter(C=>o[C.id]===0).map(C=>C.id),f=[];for(;u.length>0;){const C=u.shift();f.push(C),(p=s[C])==null||p.forEach(E=>{o[E]!==void 0&&(o[E]--,o[E]===0&&u.push(E))})}const c={id:"root",type:"plate",children:[]},h=new Map([["root",c]]);n.forEach(C=>{h.set(C.id,{id:C.id,type:C.nodeType==="plate"?"plate":"node",children:[]})}),n.forEach(C=>{const E=C.parent||"root",v=h.get(E),x=h.get(C.id);v&&x&&v.children.push(x)});const g=(C,E)=>{let v=[];const x="  ".repeat(E);return C.children.sort((T,A)=>f.indexOf(T.id)-f.indexOf(A.id)).forEach(T=>{const A=i.get(T.id);if(A)if(T.type==="plate")v.push(`${x}for (${A.loopVariable} in ${A.loopRange}) {`),v.push(...g(T,E+1)),v.push(`${x}}`);else{const M=A.indices?`${A.name}[${A.indices}]`:A.name;if(A.nodeType==="stochastic"||A.nodeType==="observed"){const D=Object.keys(A).filter(_=>_.startsWith("param")&&A[_]&&String(A[_]).trim()!=="").map(_=>A[_]).join(", ");v.push(`${x}${M} ~ ${A.distribution}(${D})`)}else A.nodeType==="deterministic"&&A.equation&&v.push(`${x}${M} <- ${A.equation}`)}}),v};return["model {",...g(c,1),"}"].join(`
`)})}}var sR={exports:{}},lR;function p8(){return lR||(lR=1,function(t,e){(function(r){r(Ui())})(function(r){r.defineMode("julia",function(n,a){function i(K,V,Z){return typeof Z>"u"&&(Z=""),typeof V>"u"&&(V="\\b"),new RegExp("^"+Z+"(("+K.join(")|(")+"))"+V)}var o="\\\\[0-7]{1,3}",s="\\\\x[A-Fa-f0-9]{1,2}",u=`\\\\[abefnrtv0%?'"\\\\]`,f="([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])",c=["[<>]:","[<>=]=","<<=?",">>>?=?","=>","--?>","<--[->]?","\\/\\/","\\.{2,3}","[\\.\\\\%*+\\-<>!\\/^|&]=?","\\?","\\$","~",":"],h=a.operators||i(["[<>]:","[<>=]=","[!=]==","<<=?",">>>?=?","=>?","--?>","<--[->]?","\\/\\/","[\\\\%*+\\-<>!\\/^|&\\u00F7\\u22BB]=?","\\?","\\$","~",":","\\u00D7","\\u2208","\\u2209","\\u220B","\\u220C","\\u2218","\\u221A","\\u221B","\\u2229","\\u222A","\\u2260","\\u2264","\\u2265","\\u2286","\\u2288","\\u228A","\\u22C5","\\b(in|isa)\\b(?!.?\\()"],""),g=a.delimiters||/^[;,()[\]{}]/,y=a.identifiers||/^[_A-Za-z\u00A1-\u2217\u2219-\uFFFF][\w\u00A1-\u2217\u2219-\uFFFF]*!*/,p=i([o,s,u,f],"'"),C=["begin","function","type","struct","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"],E=["end","else","elseif","catch","finally"],v=["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","where","macro","module","baremodule","struct","type","mutable","immutable","quote","typealias","abstract","primitive","bitstype"],x=["true","false","nothing","NaN","Inf"];r.registerHelper("hintWords","julia",v.concat(x));var w=i(C),T=i(E),A=i(v),M=i(x),D=/^@[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,_=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,k=/^(`|([_A-Za-z\u00A1-\uFFFF]*"("")?))/,F=i(c,"","@"),G=i(c,"",":");function B(K){return K.nestedArrays>0}function q(K){return K.nestedGenerators>0}function R(K,V){return typeof V>"u"&&(V=0),K.scopes.length<=V?null:K.scopes[K.scopes.length-(V+1)]}function P(K,V){if(K.match("#=",!1))return V.tokenize=I,V.tokenize(K,V);var Z=V.leavingExpr;if(K.sol()&&(Z=!1),V.leavingExpr=!1,Z&&K.match(/^'+/))return"operator";if(K.match(/\.{4,}/))return"error";if(K.match(/\.{1,3}/))return"operator";if(K.eatSpace())return null;var U=K.peek();if(U==="#")return K.skipToEnd(),"comment";if(U==="["&&(V.scopes.push("["),V.nestedArrays++),U==="("&&(V.scopes.push("("),V.nestedGenerators++),B(V)&&U==="]"){for(;V.scopes.length&&R(V)!=="[";)V.scopes.pop();V.scopes.pop(),V.nestedArrays--,V.leavingExpr=!0}if(q(V)&&U===")"){for(;V.scopes.length&&R(V)!=="(";)V.scopes.pop();V.scopes.pop(),V.nestedGenerators--,V.leavingExpr=!0}if(B(V)){if(V.lastToken=="end"&&K.match(":"))return"operator";if(K.match("end"))return"number"}var W;if((W=K.match(w,!1))&&V.scopes.push(W[0]),K.match(T,!1)&&V.scopes.pop(),K.match(/^::(?![:\$])/))return V.tokenize=N,V.tokenize(K,V);if(!Z&&(K.match(_)||K.match(G)))return"builtin";if(K.match(h))return"operator";if(K.match(/^\.?\d/,!1)){var X=RegExp(/^im\b/),ee=!1;if(K.match(/^0x\.[0-9a-f_]+p[\+\-]?[_\d]+/i)&&(ee=!0),K.match(/^0x[0-9a-f_]+/i)&&(ee=!0),K.match(/^0b[01_]+/i)&&(ee=!0),K.match(/^0o[0-7_]+/i)&&(ee=!0),K.match(/^(?:(?:\d[_\d]*)?\.(?!\.)(?:\d[_\d]*)?|\d[_\d]*\.(?!\.)(?:\d[_\d]*))?([Eef][\+\-]?[_\d]+)?/i)&&(ee=!0),K.match(/^\d[_\d]*(e[\+\-]?\d+)?/i)&&(ee=!0),ee)return K.match(X),V.leavingExpr=!0,"number"}if(K.match("'"))return V.tokenize=z,V.tokenize(K,V);if(K.match(k))return V.tokenize=ae(K.current()),V.tokenize(K,V);if(K.match(D)||K.match(F))return"meta";if(K.match(g))return null;if(K.match(A))return"keyword";if(K.match(M))return"builtin";var oe=V.isDefinition||V.lastToken=="function"||V.lastToken=="macro"||V.lastToken=="type"||V.lastToken=="struct"||V.lastToken=="immutable";return K.match(y)?oe?K.peek()==="."?(V.isDefinition=!0,"variable"):(V.isDefinition=!1,"def"):(V.leavingExpr=!0,"variable"):(K.next(),"error")}function N(K,V){return K.match(/.*?(?=[,;{}()=\s]|$)/),K.match("{")?V.nestedParameters++:K.match("}")&&V.nestedParameters>0&&V.nestedParameters--,V.nestedParameters>0?K.match(/.*?(?={|})/)||K.next():V.nestedParameters==0&&(V.tokenize=P),"builtin"}function I(K,V){return K.match("#=")&&V.nestedComments++,K.match(/.*?(?=(#=|=#))/)||K.skipToEnd(),K.match("=#")&&(V.nestedComments--,V.nestedComments==0&&(V.tokenize=P)),"comment"}function z(K,V){var Z=!1,U;if(K.match(p))Z=!0;else if(U=K.match(/\\u([a-f0-9]{1,4})(?=')/i)){var W=parseInt(U[1],16);(W<=55295||W>=57344)&&(Z=!0,K.next())}else if(U=K.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var W=parseInt(U[1],16);W<=1114111&&(Z=!0,K.next())}return Z?(V.leavingExpr=!0,V.tokenize=P,"string"):(K.match(/^[^']+(?=')/)||K.skipToEnd(),K.match("'")&&(V.tokenize=P),"error")}function ae(K){K.substr(-3)==='"""'?K='"""':K.substr(-1)==='"'&&(K='"');function V(Z,U){if(Z.eat("\\"))Z.next();else{if(Z.match(K))return U.tokenize=P,U.leavingExpr=!0,"string";Z.eat(/[`"]/)}return Z.eatWhile(/[^\\`"]/),"string"}return V}var re={startState:function(){return{tokenize:P,scopes:[],lastToken:null,leavingExpr:!1,isDefinition:!1,nestedArrays:0,nestedComments:0,nestedGenerators:0,nestedParameters:0,firstParenPos:-1}},token:function(K,V){var Z=V.tokenize(K,V),U=K.current();return U&&Z&&(V.lastToken=U),Z},indent:function(K,V){var Z=0;return(V==="]"||V===")"||/^end\b/.test(V)||/^else/.test(V)||/^catch\b/.test(V)||/^elseif\b/.test(V)||/^finally/.test(V))&&(Z=-1),(K.scopes.length+Z)*n.indentUnit},electricInput:/\b(end|else|catch|finally)\b/,blockCommentStart:"#=",blockCommentEnd:"=#",lineComment:"#",closeBrackets:'()[]{}""',fold:"indent"};return re}),r.defineMIME("text/x-julia","julia")})}()),sR.exports}p8();var uR={exports:{}},fR;function g8(){return fR||(fR=1,function(t,e){(function(r){r(Ui())})(function(r){function n(o,s,u){this.orientation=s,this.scroll=u,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=o+"-"+s,this.inner=this.node.appendChild(document.createElement("div"));var f=this;r.on(this.inner,"mousedown",function(h){if(h.which!=1)return;r.e_preventDefault(h);var g=f.orientation=="horizontal"?"pageX":"pageY",y=h[g],p=f.pos;function C(){r.off(document,"mousemove",E),r.off(document,"mouseup",C)}function E(v){if(v.which!=1)return C();f.moveTo(p+(v[g]-y)*(f.total/f.size))}r.on(document,"mousemove",E),r.on(document,"mouseup",C)}),r.on(this.node,"click",function(h){r.e_preventDefault(h);var g=f.inner.getBoundingClientRect(),y;f.orientation=="horizontal"?y=h.clientX<g.left?-1:h.clientX>g.right?1:0:y=h.clientY<g.top?-1:h.clientY>g.bottom?1:0,f.moveTo(f.pos+y*f.screen)});function c(h){var g=r.wheelEventPixels(h)[f.orientation=="horizontal"?"x":"y"],y=f.pos;f.moveTo(f.pos+g),f.pos!=y&&r.e_preventDefault(h)}r.on(this.node,"mousewheel",c),r.on(this.node,"DOMMouseScroll",c)}n.prototype.setPos=function(o,s){return o<0&&(o=0),o>this.total-this.screen&&(o=this.total-this.screen),!s&&o==this.pos?!1:(this.pos=o,this.inner.style[this.orientation=="horizontal"?"left":"top"]=o*(this.size/this.total)+"px",!0)},n.prototype.moveTo=function(o){this.setPos(o)&&this.scroll(o,this.orientation)};var a=10;n.prototype.update=function(o,s,u){var f=this.screen!=s||this.total!=o||this.size!=u;f&&(this.screen=s,this.total=o,this.size=u);var c=this.screen*(this.size/this.total);c<a&&(this.size-=a-c,c=a),this.inner.style[this.orientation=="horizontal"?"width":"height"]=c+"px",this.setPos(this.pos,f)};function i(o,s,u){this.addClass=o,this.horiz=new n(o,"horizontal",u),s(this.horiz.node),this.vert=new n(o,"vertical",u),s(this.vert.node),this.width=null}i.prototype.update=function(o){if(this.width==null){var s=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;s&&(this.width=parseInt(s.height))}var u=this.width||0,f=o.scrollWidth>o.clientWidth+1,c=o.scrollHeight>o.clientHeight+1;return this.vert.node.style.display=c?"block":"none",this.horiz.node.style.display=f?"block":"none",c&&(this.vert.update(o.scrollHeight,o.clientHeight,o.viewHeight-(f?u:0)),this.vert.node.style.bottom=f?u+"px":"0"),f&&(this.horiz.update(o.scrollWidth,o.clientWidth,o.viewWidth-(c?u:0)-o.barLeft),this.horiz.node.style.right=c?u+"px":"0",this.horiz.node.style.left=o.barLeft+"px"),{right:c?u:0,bottom:f?u:0}},i.prototype.setScrollTop=function(o){this.vert.setPos(o)},i.prototype.setScrollLeft=function(o){this.horiz.setPos(o)},i.prototype.clear=function(){var o=this.horiz.node.parentNode;o.removeChild(this.horiz.node),o.removeChild(this.vert.node)},r.scrollbarModel.simple=function(o,s){return new i("CodeMirror-simplescroll",o,s)},r.scrollbarModel.overlay=function(o,s){return new i("CodeMirror-overlayscroll",o,s)}})}()),uR.exports}g8();var cR={exports:{}},dR={exports:{}},hR;function _O(){return hR||(hR=1,function(t,e){(function(r){r(Ui())})(function(r){function n(s,u,f,c){if(f&&f.call){var h=f;f=null}else var h=o(s,f,"rangeFinder");typeof u=="number"&&(u=r.Pos(u,0));var g=o(s,f,"minFoldSize");function y(v){var x=h(s,u);if(!x||x.to.line-x.from.line<g)return null;if(c==="fold")return x;for(var w=s.findMarksAt(x.from),T=0;T<w.length;++T)if(w[T].__isFold){if(!v)return null;x.cleared=!0,w[T].clear()}return x}var p=y(!0);if(o(s,f,"scanUp"))for(;!p&&u.line>s.firstLine();)u=r.Pos(u.line-1,0),p=y(!1);if(!(!p||p.cleared||c==="unfold")){var C=a(s,f,p);r.on(C,"mousedown",function(v){E.clear(),r.e_preventDefault(v)});var E=s.markText(p.from,p.to,{replacedWith:C,clearOnEnter:o(s,f,"clearOnEnter"),__isFold:!0});E.on("clear",function(v,x){r.signal(s,"unfold",s,v,x)}),r.signal(s,"fold",s,p.from,p.to)}}function a(s,u,f){var c=o(s,u,"widget");if(typeof c=="function"&&(c=c(f.from,f.to)),typeof c=="string"){var h=document.createTextNode(c);c=document.createElement("span"),c.appendChild(h),c.className="CodeMirror-foldmarker"}else c&&(c=c.cloneNode(!0));return c}r.newFoldFunction=function(s,u){return function(f,c){n(f,c,{rangeFinder:s,widget:u})}},r.defineExtension("foldCode",function(s,u,f){n(this,s,u,f)}),r.defineExtension("isFolded",function(s){for(var u=this.findMarksAt(s),f=0;f<u.length;++f)if(u[f].__isFold)return!0}),r.commands.toggleFold=function(s){s.foldCode(s.getCursor())},r.commands.fold=function(s){s.foldCode(s.getCursor(),null,"fold")},r.commands.unfold=function(s){s.foldCode(s.getCursor(),{scanUp:!1},"unfold")},r.commands.foldAll=function(s){s.operation(function(){for(var u=s.firstLine(),f=s.lastLine();u<=f;u++)s.foldCode(r.Pos(u,0),{scanUp:!1},"fold")})},r.commands.unfoldAll=function(s){s.operation(function(){for(var u=s.firstLine(),f=s.lastLine();u<=f;u++)s.foldCode(r.Pos(u,0),{scanUp:!1},"unfold")})},r.registerHelper("fold","combine",function(){var s=Array.prototype.slice.call(arguments,0);return function(u,f){for(var c=0;c<s.length;++c){var h=s[c](u,f);if(h)return h}}}),r.registerHelper("fold","auto",function(s,u){for(var f=s.getHelpers(u,"fold"),c=0;c<f.length;c++){var h=f[c](s,u);if(h)return h}});var i={rangeFinder:r.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};r.defineOption("foldOptions",null);function o(s,u,f){if(u&&u[f]!==void 0)return u[f];var c=s.options.foldOptions;return c&&c[f]!==void 0?c[f]:i[f]}r.defineExtension("foldOption",function(s,u){return o(this,s,u)})})}()),dR.exports}var vR;function y8(){return vR||(vR=1,function(t,e){(function(r){r(Ui(),_O())})(function(r){r.defineOption("foldGutter",!1,function(E,v,x){x&&x!=r.Init&&(E.clearGutter(E.state.foldGutter.options.gutter),E.state.foldGutter=null,E.off("gutterClick",h),E.off("changes",y),E.off("viewportChange",p),E.off("fold",C),E.off("unfold",C),E.off("swapDoc",y),E.off("optionChange",g)),v&&(E.state.foldGutter=new a(i(v)),c(E),E.on("gutterClick",h),E.on("changes",y),E.on("viewportChange",p),E.on("fold",C),E.on("unfold",C),E.on("swapDoc",y),E.on("optionChange",g))});var n=r.Pos;function a(E){this.options=E,this.from=this.to=0}function i(E){return E===!0&&(E={}),E.gutter==null&&(E.gutter="CodeMirror-foldgutter"),E.indicatorOpen==null&&(E.indicatorOpen="CodeMirror-foldgutter-open"),E.indicatorFolded==null&&(E.indicatorFolded="CodeMirror-foldgutter-folded"),E}function o(E,v){for(var x=E.findMarks(n(v,0),n(v+1,0)),w=0;w<x.length;++w)if(x[w].__isFold){var T=x[w].find(-1);if(T&&T.line===v)return x[w]}}function s(E){if(typeof E=="string"){var v=document.createElement("div");return v.className=E+" CodeMirror-guttermarker-subtle",v}else return E.cloneNode(!0)}function u(E,v,x){var w=E.state.foldGutter.options,T=v-1,A=E.foldOption(w,"minFoldSize"),M=E.foldOption(w,"rangeFinder"),D=typeof w.indicatorFolded=="string"&&f(w.indicatorFolded),_=typeof w.indicatorOpen=="string"&&f(w.indicatorOpen);E.eachLine(v,x,function(k){++T;var F=null,G=k.gutterMarkers;if(G&&(G=G[w.gutter]),o(E,T)){if(D&&G&&D.test(G.className))return;F=s(w.indicatorFolded)}else{var B=n(T,0),q=M&&M(E,B);if(q&&q.to.line-q.from.line>=A){if(_&&G&&_.test(G.className))return;F=s(w.indicatorOpen)}}!F&&!G||E.setGutterMarker(k,w.gutter,F)})}function f(E){return new RegExp("(^|\\s)"+E+"(?:$|\\s)\\s*")}function c(E){var v=E.getViewport(),x=E.state.foldGutter;x&&(E.operation(function(){u(E,v.from,v.to)}),x.from=v.from,x.to=v.to)}function h(E,v,x){var w=E.state.foldGutter;if(w){var T=w.options;if(x==T.gutter){var A=o(E,v);A?A.clear():E.foldCode(n(v,0),T)}}}function g(E,v){v=="mode"&&y(E)}function y(E){var v=E.state.foldGutter;if(v){var x=v.options;v.from=v.to=0,clearTimeout(v.changeUpdate),v.changeUpdate=setTimeout(function(){c(E)},x.foldOnChangeTimeSpan||600)}}function p(E){var v=E.state.foldGutter;if(v){var x=v.options;clearTimeout(v.changeUpdate),v.changeUpdate=setTimeout(function(){var w=E.getViewport();v.from==v.to||w.from-v.to>20||v.from-w.to>20?c(E):E.operation(function(){w.from<v.from&&(u(E,w.from,v.from),v.from=w.from),w.to>v.to&&(u(E,v.to,w.to),v.to=w.to)})},x.updateViewportTimeSpan||400)}}function C(E,v){var x=E.state.foldGutter;if(x){var w=v.line;w>=x.from&&w<x.to&&u(E,w,w+1)}}})}()),cR.exports}y8();var pR={exports:{}},gR;function m8(){return gR||(gR=1,function(t,e){(function(r){r(Ui())})(function(r){function n(a){return function(i,o){var s=o.line,u=i.getLine(s);function f(C){for(var E,v=o.ch,x=0;;){var w=v<=0?-1:u.lastIndexOf(C[0],v-1);if(w==-1){if(x==1)break;x=1,v=u.length;continue}if(x==1&&w<o.ch)break;if(E=i.getTokenTypeAt(r.Pos(s,w+1)),!/^(comment|string)/.test(E))return{ch:w+1,tokenType:E,pair:C};v=w-1}}function c(C){var E=1,v=i.lastLine(),x,w=C.ch,T;e:for(var A=s;A<=v;++A)for(var M=i.getLine(A),D=A==s?w:0;;){var _=M.indexOf(C.pair[0],D),k=M.indexOf(C.pair[1],D);if(_<0&&(_=M.length),k<0&&(k=M.length),D=Math.min(_,k),D==M.length)break;if(i.getTokenTypeAt(r.Pos(A,D+1))==C.tokenType){if(D==_)++E;else if(!--E){x=A,T=D;break e}}++D}return x==null||s==x?null:{from:r.Pos(s,w),to:r.Pos(x,T)}}for(var h=[],g=0;g<a.length;g++){var y=f(a[g]);y&&h.push(y)}h.sort(function(C,E){return C.ch-E.ch});for(var g=0;g<h.length;g++){var p=c(h[g]);if(p)return p}return null}}r.registerHelper("fold","brace",n([["{","}"],["[","]"]])),r.registerHelper("fold","brace-paren",n([["{","}"],["[","]"],["(",")"]])),r.registerHelper("fold","import",function(a,i){function o(g){if(g<a.firstLine()||g>a.lastLine())return null;var y=a.getTokenAt(r.Pos(g,1));if(/\S/.test(y.string)||(y=a.getTokenAt(r.Pos(g,y.end+1))),y.type!="keyword"||y.string!="import")return null;for(var p=g,C=Math.min(a.lastLine(),g+10);p<=C;++p){var E=a.getLine(p),v=E.indexOf(";");if(v!=-1)return{startCh:y.end,end:r.Pos(p,v)}}}var s=i.line,u=o(s),f;if(!u||o(s-1)||(f=o(s-2))&&f.end.line==s-1)return null;for(var c=u.end;;){var h=o(c.line+1);if(h==null)break;c=h.end}return{from:a.clipPos(r.Pos(s,u.startCh+1)),to:c}}),r.registerHelper("fold","include",function(a,i){function o(h){if(h<a.firstLine()||h>a.lastLine())return null;var g=a.getTokenAt(r.Pos(h,1));if(/\S/.test(g.string)||(g=a.getTokenAt(r.Pos(h,g.end+1))),g.type=="meta"&&g.string.slice(0,8)=="#include")return g.start+8}var s=i.line,u=o(s);if(u==null||o(s-1)!=null)return null;for(var f=s;;){var c=o(f+1);if(c==null)break;++f}return{from:r.Pos(s,u+1),to:a.clipPos(r.Pos(f))}})})}()),pR.exports}m8();const b8={class:"code-preview-panel"},w8={class:"editor-wrapper"},x8={key:0,class:"fas fa-check"},E8={key:1,class:"fas fa-copy"},C8=Dr({__name:"CodePreviewPanel",props:{isActive:{type:Boolean}},setup(t){const e=t,r=Ro(),n=od(),{currentGraphElements:a}=Pb(r),{parsedGraphData:i}=Pb(n),{generatedCode:o}=v8(a),s=bt(!1),u=bt(null);let f=null;Da(()=>{u.value&&(f=uw(u.value,{value:o.value,mode:"julia",theme:"material-darker",lineNumbers:!0,readOnly:!0,tabSize:2,scrollbarStyle:"simple",foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),e.isActive&&Kn(()=>f==null?void 0:f.refresh()))}),_a(()=>{var h;if(f){const g=f.getWrapperElement();(h=g.parentNode)==null||h.removeChild(g),f=null}}),cr(o,h=>{f&&f.getValue()!==h&&f.setValue(h)}),cr(()=>e.isActive,h=>{h&&f&&Kn(()=>{f==null||f.refresh()})});const c=()=>{navigator.clipboard.writeText(o.value).then(()=>{s.value=!0,setTimeout(()=>{s.value=!1},2e3)}).catch(h=>{console.error("Failed to copy code: ",h),alert("Failed to copy code to clipboard.")})};return(h,g)=>(Je(),ot("div",b8,[g[0]||(g[0]=Me("div",{class:"header-section"},[Me("h4",null,"Generated BUGS Code")],-1)),Me("div",w8,[Me("div",{ref_key:"editorContainer",ref:u,class:"editor-container"},null,512),at(Wt,{onClick:c,class:"copy-button",type:"secondary"},{default:ft(()=>[s.value?(Je(),ot("i",x8)):(Je(),ot("i",E8))]),_:1})])]))}}),T8=Kr(C8,[["__scopeId","data-v-a65ffac4"]]);var yR={exports:{}},mR;function S8(){return mR||(mR=1,function(t,e){(function(r){r(Ui())})(function(r){var n=r.Pos;function a(x){var w=x.flags;return w??(x.ignoreCase?"i":"")+(x.global?"g":"")+(x.multiline?"m":"")}function i(x,w){for(var T=a(x),A=T,M=0;M<w.length;M++)A.indexOf(w.charAt(M))==-1&&(A+=w.charAt(M));return T==A?x:new RegExp(x.source,A)}function o(x){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(x.source)}function s(x,w,T){w=i(w,"g");for(var A=T.line,M=T.ch,D=x.lastLine();A<=D;A++,M=0){w.lastIndex=M;var _=x.getLine(A),k=w.exec(_);if(k)return{from:n(A,k.index),to:n(A,k.index+k[0].length),match:k}}}function u(x,w,T){if(!o(w))return s(x,w,T);w=i(w,"gm");for(var A,M=1,D=T.line,_=x.lastLine();D<=_;){for(var k=0;k<M&&!(D>_);k++){var F=x.getLine(D++);A=A==null?F:A+`
`+F}M=M*2,w.lastIndex=T.ch;var G=w.exec(A);if(G){var B=A.slice(0,G.index).split(`
`),q=G[0].split(`
`),R=T.line+B.length-1,P=B[B.length-1].length;return{from:n(R,P),to:n(R+q.length-1,q.length==1?P+q[0].length:q[q.length-1].length),match:G}}}}function f(x,w,T){for(var A,M=0;M<=x.length;){w.lastIndex=M;var D=w.exec(x);if(!D)break;var _=D.index+D[0].length;if(_>x.length-T)break;(!A||_>A.index+A[0].length)&&(A=D),M=D.index+1}return A}function c(x,w,T){w=i(w,"g");for(var A=T.line,M=T.ch,D=x.firstLine();A>=D;A--,M=-1){var _=x.getLine(A),k=f(_,w,M<0?0:_.length-M);if(k)return{from:n(A,k.index),to:n(A,k.index+k[0].length),match:k}}}function h(x,w,T){if(!o(w))return c(x,w,T);w=i(w,"gm");for(var A,M=1,D=x.getLine(T.line).length-T.ch,_=T.line,k=x.firstLine();_>=k;){for(var F=0;F<M&&_>=k;F++){var G=x.getLine(_--);A=A==null?G:G+`
`+A}M*=2;var B=f(A,w,D);if(B){var q=A.slice(0,B.index).split(`
`),R=B[0].split(`
`),P=_+q.length,N=q[q.length-1].length;return{from:n(P,N),to:n(P+R.length-1,R.length==1?N+R[0].length:R[R.length-1].length),match:B}}}}var g,y;String.prototype.normalize?(g=function(x){return x.normalize("NFD").toLowerCase()},y=function(x){return x.normalize("NFD")}):(g=function(x){return x.toLowerCase()},y=function(x){return x});function p(x,w,T,A){if(x.length==w.length)return T;for(var M=0,D=T+Math.max(0,x.length-w.length);;){if(M==D)return M;var _=M+D>>1,k=A(x.slice(0,_)).length;if(k==T)return _;k>T?D=_:M=_+1}}function C(x,w,T,A){if(!w.length)return null;var M=A?g:y,D=M(w).split(/\r|\n\r?/);e:for(var _=T.line,k=T.ch,F=x.lastLine()+1-D.length;_<=F;_++,k=0){var G=x.getLine(_).slice(k),B=M(G);if(D.length==1){var q=B.indexOf(D[0]);if(q==-1)continue e;var T=p(G,B,q,M)+k;return{from:n(_,p(G,B,q,M)+k),to:n(_,p(G,B,q+D[0].length,M)+k)}}else{var R=B.length-D[0].length;if(B.slice(R)!=D[0])continue e;for(var P=1;P<D.length-1;P++)if(M(x.getLine(_+P))!=D[P])continue e;var N=x.getLine(_+D.length-1),I=M(N),z=D[D.length-1];if(I.slice(0,z.length)!=z)continue e;return{from:n(_,p(G,B,R,M)+k),to:n(_+D.length-1,p(N,I,z.length,M))}}}}function E(x,w,T,A){if(!w.length)return null;var M=A?g:y,D=M(w).split(/\r|\n\r?/);e:for(var _=T.line,k=T.ch,F=x.firstLine()-1+D.length;_>=F;_--,k=-1){var G=x.getLine(_);k>-1&&(G=G.slice(0,k));var B=M(G);if(D.length==1){var q=B.lastIndexOf(D[0]);if(q==-1)continue e;return{from:n(_,p(G,B,q,M)),to:n(_,p(G,B,q+D[0].length,M))}}else{var R=D[D.length-1];if(B.slice(0,R.length)!=R)continue e;for(var P=1,T=_-D.length+1;P<D.length-1;P++)if(M(x.getLine(T+P))!=D[P])continue e;var N=x.getLine(_+1-D.length),I=M(N);if(I.slice(I.length-D[0].length)!=D[0])continue e;return{from:n(_+1-D.length,p(N,I,N.length-D[0].length,M)),to:n(_,p(G,B,R.length,M))}}}}function v(x,w,T,A){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=x,T=T?x.clipPos(T):n(0,0),this.pos={from:T,to:T};var M;typeof A=="object"?M=A.caseFold:(M=A,A=null),typeof w=="string"?(M==null&&(M=!1),this.matches=function(D,_){return(D?E:C)(x,w,_,M)}):(w=i(w,"gm"),!A||A.multiline!==!1?this.matches=function(D,_){return(D?h:u)(x,w,_)}:this.matches=function(D,_){return(D?c:s)(x,w,_)})}v.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(x){var w=this.doc.clipPos(x?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(w=n(w.line,w.ch),x?(w.ch--,w.ch<0&&(w.line--,w.ch=(this.doc.getLine(w.line)||"").length)):(w.ch++,w.ch>(this.doc.getLine(w.line)||"").length&&(w.ch=0,w.line++)),r.cmpPos(w,this.doc.clipPos(w))!=0))return this.atOccurrence=!1;var T=this.matches(x,w);if(this.afterEmptyMatch=T&&r.cmpPos(T.from,T.to)==0,T)return this.pos=T,this.atOccurrence=!0,this.pos.match||!0;var A=n(x?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:A,to:A},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(x,w){if(this.atOccurrence){var T=r.splitLines(x);this.doc.replaceRange(T,this.pos.from,this.pos.to,w),this.pos.to=n(this.pos.from.line+T.length-1,T[T.length-1].length+(T.length==1?this.pos.from.ch:0))}}},r.defineExtension("getSearchCursor",function(x,w,T){return new v(this.doc,x,w,T)}),r.defineDocExtension("getSearchCursor",function(x,w,T){return new v(this,x,w,T)}),r.defineExtension("selectMatches",function(x,w){for(var T=[],A=this.getSearchCursor(x,this.getCursor("from"),w);A.findNext()&&!(r.cmpPos(A.to(),this.getCursor("to"))>0);)T.push({anchor:A.from(),head:A.to()});T.length&&this.setSelections(T,0)})})}()),yR.exports}S8();_O();const A8={class:"json-editor-panel"},L8={class:"editor-wrapper"},D8={class:"footer-section"},_8={key:0,class:"error-message"},M8={key:1,class:"status-text"},R8=Dr({__name:"JsonEditorPanel",props:{isActive:{type:Boolean}},setup(t){const e=t,r=Ro(),{selectedElement:n}=lw(),a=bt(""),i=bt(null);let o=null,s=!1,u=new Set;const f=Ft(()=>r.currentGraphElements),c=["id","type","nodeType","source","target","parent"],h=()=>{if(!o)return;const p=o.getValue().split(`
`),C=new Set;p.forEach((E,v)=>{const w=E.trim().match(/"([^"]+)"\s*:/);if(w&&c.includes(w[1])){const T=o==null?void 0:o.markText({line:v,ch:0},{line:v,ch:E.length},{readOnly:!0,className:"cm-protected"});T&&C.add(T)}}),u.forEach(E=>{C.has(E)||E.clear()}),u=C};Da(()=>{if(i.value){o=uw(i.value,{value:"[]",mode:{name:"javascript",json:!0},theme:"material-darker",lineNumbers:!0,tabSize:2,scrollbarStyle:"simple",lineWrapping:!1,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),o.on("change",p=>{s||g(p.getValue())});const y=JSON.stringify(f.value,null,2);s=!0,o.setValue(y),h(),s=!1,e.isActive&&Kn(()=>o==null?void 0:o.refresh())}}),_a(()=>{var y;if(o){const p=o.getWrapperElement();(y=p.parentNode)==null||y.removeChild(p),o=null}}),cr(f,y=>{if(!o)return;const p=o.getValue(),C=JSON.stringify(y,null,2);try{if(JSON.stringify(JSON.parse(p))===JSON.stringify(JSON.parse(C)))return}catch{if(p===C)return}s=!0,o.setValue(C),h(),s=!1},{deep:!0}),cr(()=>e.isActive,y=>{y&&o&&Kn(()=>{o==null||o.refresh()})}),cr(n,async y=>{if(!y||!o)return;await Kn();const p=`"id": "${y.id}"`,C=o.getSearchCursor(p);if(C.findNext()){const E=C.from(),v=o.getSearchCursor("{",E);if(v.findPrevious()){const x=v.from(),w=o.findMatchingBracket(x,!1);if(w&&w.to){const T={line:w.to.line,ch:w.to.ch+1};o.focus(),o.setSelection(x,T),o.scrollIntoView({from:x,to:T},50)}}}});const g=y=>{try{const p=JSON.parse(y);if(!Array.isArray(p))throw new Error("Invalid format: The root element must be an array of graph objects.");r.currentGraphId&&r.updateGraphElements(r.currentGraphId,p),a.value=""}catch(p){a.value=p.message}};return(y,p)=>(Je(),ot("div",A8,[p[1]||(p[1]=Me("div",{class:"header-section"},[Me("h4",null,"Live Graph JSON"),Me("p",{class:"description"}," Edit the JSON below to see live updates on the canvas. Read-only fields are protected. ")],-1)),Me("div",L8,[Me("div",{ref_key:"editorContainer",ref:i,class:"json-editor-container"},null,512)]),Me("div",D8,[a.value?(Je(),ot("div",_8,Kt(a.value),1)):(Je(),ot("span",M8,p[0]||(p[0]=[Me("i",{class:"fas fa-check-circle"},null,-1),xt(" Live Sync Enabled ")])))])]))}}),P8=Kr(R8,[["__scopeId","data-v-6450329e"]]),k8=Dr({__name:"DropdownMenu",setup(t){const e=bt(!1),r=bt(null),n=()=>{e.value=!e.value},a=()=>{e.value=!1},i=o=>{r.value&&!r.value.contains(o.target)&&a()};return Da(()=>{document.addEventListener("click",i,!0)}),_a(()=>{document.removeEventListener("click",i,!0)}),(o,s)=>(Je(),ot("div",{class:"menu-item-wrapper",ref_key:"dropdownRef",ref:r},[Me("div",{onClick:n,class:"menu-toggle"},[ys(o.$slots,"trigger",{},void 0,!0)]),at(y1,{name:"dropdown-animation"},{default:ft(()=>[e.value?(Je(),ot("div",{key:0,class:"dropdown-content",onClick:a},[ys(o.$slots,"content",{},void 0,!0)])):fr("",!0)]),_:3})],512))}}),oo=Kr(k8,[["__scopeId","data-v-90292090"]]),N8={class:"navbar"},O8={class:"navbar-left"},I8={class:"navbar-menu"},F8=["onClick"],B8=["checked"],q8=["onClick"],z8={class:"navbar-center"},G8=["title"],H8={class:"navbar-right"},U8={class:"pane-toggles"},V8={class:"project-name"},W8=Dr({__name:"TheNavbar",props:{projectName:{},activeGraphName:{},isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},currentNodeType:{},isLeftSidebarOpen:{type:Boolean},isRightSidebarOpen:{type:Boolean},isModelValid:{type:Boolean}},emits:["update:isGridEnabled","update:gridSize","update:currentMode","update:currentNodeType","new-project","new-graph","toggle-left-sidebar","toggle-right-sidebar","open-about-modal","open-export-modal","export-json","apply-layout","load-example","validate-model","show-validation-issues"],setup(t,{emit:e}){const r=t,n=e,a=Ft(()=>r.projectName&&r.activeGraphName?`${r.projectName} — ${r.activeGraphName}`:r.projectName?r.projectName:"No Project Selected"),i=s=>{n("update:currentNodeType",s),n("update:currentMode","add-node")},o=s=>{const u=s.target;n("update:gridSize",Number(u.value))};return(s,u)=>(Je(),ot("nav",N8,[Me("div",O8,[u[33]||(u[33]=Me("div",{class:"navbar-brand"},"DoodleBUGS",-1)),Me("div",I8,[at(oo,null,{trigger:ft(()=>[at(Wt,{type:"ghost",size:"small"},{default:ft(()=>u[18]||(u[18]=[xt("Project")])),_:1,__:[18]})]),content:ft(()=>[Me("a",{href:"#",onClick:u[0]||(u[0]=Ur(f=>n("new-project"),["prevent"]))},"New Project..."),Me("a",{href:"#",onClick:u[1]||(u[1]=Ur(f=>n("new-graph"),["prevent"]))},"New Graph...")]),_:1}),at(oo,null,{trigger:ft(()=>[at(Wt,{type:"ghost",size:"small"},{default:ft(()=>u[19]||(u[19]=[xt("Export")])),_:1,__:[19]})]),content:ft(()=>[Me("a",{href:"#",onClick:u[2]||(u[2]=Ur(f=>n("open-export-modal","png"),["prevent"]))},"as PNG..."),Me("a",{href:"#",onClick:u[3]||(u[3]=Ur(f=>n("open-export-modal","jpg"),["prevent"]))},"as JPG..."),Me("a",{href:"#",onClick:u[4]||(u[4]=Ur(f=>n("open-export-modal","svg"),["prevent"]))},"as SVG..."),u[20]||(u[20]=Me("div",{class:"dropdown-divider"},null,-1)),Me("a",{href:"#",onClick:u[5]||(u[5]=Ur(f=>n("export-json"),["prevent"]))},"as JSON")]),_:1}),at(oo,null,{trigger:ft(()=>[at(Wt,{type:"ghost",size:"small"},{default:ft(()=>u[21]||(u[21]=[xt("Add")])),_:1,__:[21]})]),content:ft(()=>[u[22]||(u[22]=Me("div",{class:"dropdown-section-title"},"Nodes",-1)),(Je(!0),ot(Yt,null,Bn(Nt(id),f=>(Je(),ot("a",{key:f.nodeType,href:"#",onClick:Ur(c=>i(f.nodeType),["prevent"])},Kt(f.label),9,F8))),128)),u[23]||(u[23]=Me("div",{class:"dropdown-divider"},null,-1)),Me("a",{href:"#",onClick:u[6]||(u[6]=Ur(f=>n("update:currentMode","add-edge"),["prevent"]))},"Add Edge")]),_:1}),at(oo,null,{trigger:ft(()=>[at(Wt,{type:"ghost",size:"small"},{default:ft(()=>u[24]||(u[24]=[xt("Layout")])),_:1,__:[24]})]),content:ft(()=>[Me("a",{href:"#",onClick:u[7]||(u[7]=Ur(f=>n("apply-layout","dagre"),["prevent"]))},"Dagre (Hierarchical)"),Me("a",{href:"#",onClick:u[8]||(u[8]=Ur(f=>n("apply-layout","fcose"),["prevent"]))},"fCoSE (Force-Directed)"),Me("a",{href:"#",onClick:u[9]||(u[9]=Ur(f=>n("apply-layout","preset"),["prevent"]))},"Reset to Preset")]),_:1}),at(oo,null,{trigger:ft(()=>[at(Wt,{type:"ghost",size:"small"},{default:ft(()=>u[25]||(u[25]=[xt("View")])),_:1,__:[25]})]),content:ft(()=>[Me("label",{class:"dropdown-checkbox",onClick:u[11]||(u[11]=Ur(()=>{},["stop"]))},[Me("input",{type:"checkbox",checked:s.isGridEnabled,onChange:u[10]||(u[10]=f=>n("update:isGridEnabled",f.target.checked))},null,40,B8),u[26]||(u[26]=xt(" Show Grid "))]),Me("div",{class:"dropdown-input-group",onClick:u[12]||(u[12]=Ur(()=>{},["stop"]))},[u[27]||(u[27]=Me("label",{for:"grid-size-nav"},"Grid Size:",-1)),at(Yn,{id:"grid-size-nav",type:"number","model-value":s.gridSize,onInput:o,min:"10",max:"100",step:"5",class:"w-20"},null,8,["model-value"]),u[28]||(u[28]=Me("span",null,"px",-1))])]),_:1}),at(oo,null,{trigger:ft(()=>[at(Wt,{type:"ghost",size:"small"},{default:ft(()=>u[29]||(u[29]=[xt("Examples")])),_:1,__:[29]})]),content:ft(()=>[(Je(!0),ot(Yt,null,Bn(Nt(W4),f=>(Je(),ot("a",{key:f.key,href:"#",onClick:Ur(c=>n("load-example",f.key),["prevent"])},Kt(f.name),9,q8))),128))]),_:1}),at(oo,null,{trigger:ft(()=>[at(Wt,{type:"ghost",size:"small"},{default:ft(()=>u[30]||(u[30]=[xt("Help")])),_:1,__:[30]})]),content:ft(()=>[Me("a",{href:"#",onClick:u[13]||(u[13]=Ur(f=>n("open-about-modal"),["prevent"]))},"About DoodleBUGS"),u[31]||(u[31]=Me("span",{class:"dropdown-item-placeholder"},"Documentation (Coming Soon)",-1)),u[32]||(u[32]=Me("a",{href:"https://github.com/TuringLang/JuliaBUGS.jl/issues/new?template=doodlebugs.md",target:"_blank",rel:"noopener noreferrer",class:"report-issue-link"},[xt(" Report an Issue "),Me("i",{class:"fas fa-external-link-alt external-link-icon"})],-1))]),_:1})])]),Me("div",z8,[at(Wt,{onClick:u[14]||(u[14]=f=>n("validate-model")),type:"ghost",size:"small",title:"Re-run model validation"},{default:ft(()=>u[34]||(u[34]=[Me("i",{class:"fas fa-sync-alt"},null,-1),xt(" Validate ")])),_:1,__:[34]}),Me("div",{onClick:u[15]||(u[15]=f=>n("show-validation-issues")),class:jt(["validation-status",s.isModelValid?"valid":"invalid"]),title:s.isModelValid?"Model is valid":"Model has errors. Click to see details."},[Me("i",{class:jt(s.isModelValid?"fas fa-check-circle":"fas fa-exclamation-triangle")},null,2)],10,G8)]),Me("div",H8,[Me("div",U8,[Me("button",{onClick:u[16]||(u[16]=f=>n("toggle-left-sidebar")),class:jt({active:s.isLeftSidebarOpen}),title:"Toggle Left Sidebar"},u[35]||(u[35]=[Me("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[Me("path",{d:"M49.984,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"})],-1)]),2),Me("button",{onClick:u[17]||(u[17]=f=>n("toggle-right-sidebar")),class:jt({active:s.isRightSidebarOpen}),title:"Toggle Right Sidebar"},u[36]||(u[36]=[Me("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",transform:"matrix(-1, 0, 0, 1, 0, 0)"},[Me("path",{d:"M49.984,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"})],-1)]),2)]),Me("span",V8,Kt(a.value),1)])]))}}),$8=Kr(W8,[["__scopeId","data-v-c5b3d1d5"]]),Y8=Dr({__name:"AboutModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const r=e;return(n,a)=>(Je(),fa(Oi,{"is-open":n.isOpen,onClose:a[1]||(a[1]=i=>r("close"))},{header:ft(()=>a[2]||(a[2]=[Me("h3",null,"About DoodleBUGS",-1)])),body:ft(()=>a[3]||(a[3]=[Me("div",{class:"about-content"},[Me("p",null,[Me("strong",null,"DoodleBUGS"),xt(" is a graphical modeling tool designed to simplify the creation of Bayesian models for analysis with BUGS language -- "),Me("a",{href:"https://github.com/TuringLang/JuliaBUGS.jl",target:"_blank",rel:"noopener noreferrer"},"JuliaBUGS.jl"),xt(". ")]),Me("p",null," Our goal is to provide an intuitive, visual interface for statisticians, researchers, and students to build, understand, and share complex probabilistic models. "),Me("hr"),Me("p",null,[Me("strong",null,"Version:"),xt(" Alpha Phase -- We are just experimenting with things now!")])],-1)])),footer:ft(()=>[Me("button",{onClick:a[0]||(a[0]=i=>r("close")),class:"primary"},"Close")]),_:1},8,["is-open"]))}}),X8=Kr(Y8,[["__scopeId","data-v-1155d993"]]),K8={class:"export-options-form"},j8={class:"form-group"},Z8={class:"form-group checkbox-group"},Q8={class:"form-group"},J8={class:"form-group"},eY={class:"form-group"},tY={key:1,class:"form-group"},rY=Dr({__name:"ExportModal",props:{isOpen:{type:Boolean},exportType:{}},emits:["close","confirm-export"],setup(t,{emit:e}){const r=t,n=e,a=bt({bg:"#ffffff",full:!0,scale:2,quality:.92,maxWidth:"",maxHeight:""});cr(()=>r.isOpen,s=>{s&&(a.value={bg:r.exportType==="png"||r.exportType==="svg"?"transparent":"#ffffff",full:!0,scale:2,quality:.92,maxWidth:"",maxHeight:""})});const i=Ft(()=>r.exportType?`Export as ${r.exportType.toUpperCase()}`:"Export"),o=()=>{const s={bg:a.value.bg,full:a.value.full,scale:a.value.scale};r.exportType==="jpg"&&(s.quality=a.value.quality),a.value.maxWidth&&(s.maxWidth=Number(a.value.maxWidth)),a.value.maxHeight&&(s.maxHeight=Number(a.value.maxHeight)),n("confirm-export",s),n("close")};return(s,u)=>(Je(),fa(Oi,{"is-open":s.isOpen,onClose:u[7]||(u[7]=f=>s.$emit("close"))},{header:ft(()=>[Me("h3",null,Kt(i.value),1)]),body:ft(()=>[Me("div",K8,[Me("div",j8,[u[8]||(u[8]=Me("label",{for:"export-bg"},"Background Color:",-1)),at(Yn,{id:"export-bg",type:"color",modelValue:a.value.bg,"onUpdate:modelValue":u[0]||(u[0]=f=>a.value.bg=f)},null,8,["modelValue"])]),Me("div",Z8,[u[9]||(u[9]=Me("label",{for:"export-full"},"Export Full Graph:",-1)),Vn(Me("input",{id:"export-full",type:"checkbox","onUpdate:modelValue":u[1]||(u[1]=f=>a.value.full=f)},null,512),[[kP,a.value.full]]),u[10]||(u[10]=Me("small",{class:"help-text"},"(Uncheck to export current view only)",-1))]),Me("div",Q8,[u[11]||(u[11]=Me("label",{for:"export-scale"},"Scale:",-1)),at(Yn,{id:"export-scale",type:"number",modelValue:a.value.scale,"onUpdate:modelValue":u[2]||(u[2]=f=>a.value.scale=f),modelModifiers:{number:!0},min:"0.1",step:"0.1"},null,8,["modelValue"])]),s.exportType==="png"||s.exportType==="jpg"?(Je(),ot(Yt,{key:0},[Me("div",J8,[u[12]||(u[12]=Me("label",{for:"export-maxWidth"},"Max Width (optional):",-1)),at(Yn,{id:"export-maxWidth",type:"number",modelValue:a.value.maxWidth,"onUpdate:modelValue":u[3]||(u[3]=f=>a.value.maxWidth=f),placeholder:"e.g., 1920"},null,8,["modelValue"])]),Me("div",eY,[u[13]||(u[13]=Me("label",{for:"export-maxHeight"},"Max Height (optional):",-1)),at(Yn,{id:"export-maxHeight",type:"number",modelValue:a.value.maxHeight,"onUpdate:modelValue":u[4]||(u[4]=f=>a.value.maxHeight=f),placeholder:"e.g., 1080"},null,8,["modelValue"])])],64)):fr("",!0),s.exportType==="jpg"?(Je(),ot("div",tY,[u[14]||(u[14]=Me("label",{for:"export-quality"},"JPG Quality (0 to 1):",-1)),Vn(Me("input",{id:"export-quality",type:"range","onUpdate:modelValue":u[5]||(u[5]=f=>a.value.quality=f),min:"0",max:"1",step:"0.01"},null,512),[[eq,a.value.quality,void 0,{number:!0}]]),Me("span",null,Kt(a.value.quality.toFixed(2)),1)])):fr("",!0)])]),footer:ft(()=>[at(Wt,{onClick:u[6]||(u[6]=f=>s.$emit("close")),type:"secondary"},{default:ft(()=>u[15]||(u[15]=[xt("Cancel")])),_:1,__:[15]}),at(Wt,{onClick:o,type:"primary"},{default:ft(()=>u[16]||(u[16]=[xt("Export")])),_:1,__:[16]})]),_:1},8,["is-open"]))}}),nY=Kr(rY,[["__scopeId","data-v-01dc89bb"]]),aY={key:0,class:"no-issues"},iY={key:1,class:"issues-list"},oY=["onClick"],sY={class:"error-details"},lY={key:0,class:"fas fa-check"},uY={key:1},fY=Dr({__name:"ValidationIssuesModal",props:{isOpen:{type:Boolean},validationErrors:{},elements:{}},emits:["close","select-node"],setup(t,{emit:e}){const r=t,n=e,a=bt(!1),i=Ft(()=>{const f=new Map;for(const c of r.elements)c.type==="node"&&f.set(c.id,c);return f}),o=Ft(()=>{const f=[];for(const[c,h]of r.validationErrors.entries()){const g=i.value.get(c);g&&f.push({nodeId:c,nodeName:g.name,errors:h})}return f.sort((c,h)=>c.nodeName.localeCompare(h.nodeName)),f}),s=f=>{n("select-node",f),n("close")},u=()=>{const f=o.value.map(c=>{const h=c.errors.map(g=>`- ${g.message}`).join(`
`);return`Node: ${c.nodeName}
${h}`}).join(`

`);navigator.clipboard.writeText(f).then(()=>{a.value=!0,setTimeout(()=>{a.value=!1},2e3)}).catch(c=>{console.error("Failed to copy validation logs: ",c),alert("Could not copy logs to clipboard.")})};return(f,c)=>(Je(),fa(Oi,{"is-open":f.isOpen,onClose:c[1]||(c[1]=h=>n("close"))},{header:ft(()=>c[2]||(c[2]=[Me("h3",null,"Model Validation Issues",-1)])),body:ft(()=>[o.value.length===0?(Je(),ot("div",aY,c[3]||(c[3]=[Me("i",{class:"fas fa-check-circle"},null,-1),Me("p",null,"No validation issues found. The model appears to be valid!",-1)]))):(Je(),ot("div",iY,[(Je(!0),ot(Yt,null,Bn(o.value,h=>(Je(),ot("div",{key:h.nodeId,class:"issue-item"},[Me("div",{class:"issue-header",onClick:g=>s(h.nodeId),title:"Click to select node"},[Me("strong",null,"Node: "+Kt(h.nodeName),1),c[4]||(c[4]=Me("i",{class:"fas fa-crosshairs"},null,-1))],8,oY),Me("ul",sY,[(Je(!0),ot(Yt,null,Bn(h.errors,(g,y)=>(Je(),ot("li",{key:y},Kt(g.message),1))),128))])]))),128))]))]),footer:ft(()=>[o.value.length>0?(Je(),fa(Wt,{key:0,onClick:u,type:"secondary"},{default:ft(()=>[a.value?(Je(),ot("i",lY)):(Je(),ot("span",uY,"Copy Logs"))]),_:1})):fr("",!0),at(Wt,{onClick:c[0]||(c[0]=h=>n("close")),type:"primary"},{default:ft(()=>c[5]||(c[5]=[xt("Close")])),_:1,__:[5]})]),_:1},8,["is-open"]))}}),cY=Kr(fY,[["__scopeId","data-v-15f9cbdc"]]),dY=Cc("ui",()=>{const t=bt(localStorage.getItem("doodlebugs-activeRightTab")||"properties"),e=bt(localStorage.getItem("doodlebugs-isRightTabPinned")==="true"),r=bt(parseInt(localStorage.getItem("doodlebugs-leftSidebarWidth")||"330")),n=bt(parseInt(localStorage.getItem("doodlebugs-rightSidebarWidth")||"320"));return cr(t,o=>{localStorage.setItem("doodlebugs-activeRightTab",o)}),cr(e,o=>{localStorage.setItem("doodlebugs-isRightTabPinned",o.toString())}),cr(r,o=>{localStorage.setItem("doodlebugs-leftSidebarWidth",o.toString())}),cr(n,o=>{localStorage.setItem("doodlebugs-rightSidebarWidth",o.toString())}),{activeRightTab:t,isRightTabPinned:e,setActiveRightTab:o=>{t.value=o},toggleRightTabPinned:()=>{e.value=!e.value},leftSidebarWidth:r,rightSidebarWidth:n}}),hY=new Set(["sqrt","log","exp","sin","cos","tan","abs","round","trunc","step","mean","sum","prod","sd","var","min","max","inverse","logdet","logit","probit","cloglog","phi"]);function vY(t,e){const r=bt(new Map),n=()=>{const a=new Map,i=t.value.filter(c=>c.type==="node"),o=t.value.filter(c=>c.type==="edge"),s=new Map(i.map(c=>[c.id,c])),u=new Set(Object.keys(e.value.data)),f=new Set(i.map(c=>c.name));i.forEach(c=>{var y;const h=[];if(c.nodeType==="stochastic"||c.nodeType==="observed"){const p=LO(c.distribution||"");if(p&&p.paramCount!==void 0){let E=o.filter(T=>T.target===c.id).length;const v=Object.keys(c).filter(T=>T.startsWith("param")&&c[T]&&String(c[T]).trim()!=="").map(T=>c[T]),x=v.filter(T=>f.has(T)),w=v.length-x.length;E+=w,E!==p.paramCount&&h.push({field:"distribution",message:`Invalid number of inputs. ${p.label} expects ${p.paramCount}, but found ${E}.`})}}if(c.nodeType==="deterministic")if(!((y=c.equation)!=null&&y.trim()))h.push({field:"equation",message:"Deterministic node must have an equation."});else{const p=new Set;let C=c;for(;C!=null&&C.parent;){const x=s.get(C.parent);x&&x.nodeType==="plate"&&x.loopVariable&&p.add(x.loopVariable),C=x}const E=new Set(c.equation.match(/[a-zA-Z_][a-zA-Z0-9_.]*/g)||[]),v=new Set(o.filter(x=>x.target===c.id).map(x=>{var w;return(w=s.get(x.source))==null?void 0:w.name}).filter(x=>!!x));E.forEach(x=>{if(hY.has(x))return;const w=x.split("[")[0];!v.has(w)&&!p.has(w)&&h.push({field:"equation",message:`Variable '${w}' in equation is not a parent or an available loop index.`})})}c.observed&&!u.has(c.name)&&h.push({field:"name",message:`Node is marked as observed, but no data found for '${c.name}'.`});const g=c.name.split("[")[0].trim();/^[a-zA-Z][a-zA-Z0-9.]*$/.test(g)||h.push({field:"name",message:`Base name '${g}' is not a valid BUGS variable name.`}),h.length>0&&a.set(c.id,h)}),r.value=a};return cr([t,e],n,{deep:!0,immediate:!0}),{validateGraph:n,validationErrors:r}}const pY={class:"main-layout"},gY={class:"content-area"},yY={class:"vertical-tabs-container"},mY={class:"graph-editor-wrapper"},bY={class:"tabs-header"},wY={class:"tab-buttons"},xY={class:"tabs-content"},EY={class:"tab-pane"},CY={class:"tab-pane fill-height"},TY={class:"tab-pane fill-height"},SY=Dr({__name:"MainLayout",setup(t){const e=DO(),r=Ro(),n=dY(),a=od(),{parsedGraphData:i}=Pb(a),{elements:o,selectedElement:s,updateElement:u,deleteElement:f}=lw(),{getCyInstance:c}=sw(),{validateGraph:h,validationErrors:g}=vY(o,i),y=bt("project"),p=bt(!0),C=bt(!0),E=bt("select"),v=bt("stochastic"),x=bt(!0),w=bt(20),T=bt(!1),A=bt(!1),M=bt(!1),D=bt(""),_=bt(!1),k=bt(""),F=bt(!1),G=bt(!1),B=bt(!1),q=bt(null),R=Ee=>{const ue=c();if(!ue)return;const Ae={name:Ee,animate:!0,padding:50,fit:!0,...Ee==="dagre"&&{rankDir:"TB",spacingFactor:1.2},...Ee==="fcose"&&{idealEdgeLength:120,nodeSeparation:150,nodeRepulsion:4500,quality:"proof"}},Pe=ue.layout(Ae);Pe.on("layoutstop",()=>{ue.nodes().map(Ye=>{const Ve=r.currentGraphElements.find(Qe=>Qe.id===Ye.id()&&Qe.type==="node");return Ve?{...Ve,position:Ye.position()}:null}).filter(Ye=>Ye!==null).forEach(Ye=>u(Ye))}),Pe.run()};Da(()=>{var ue;e.loadProjects(),e.projects.length===0&&(e.createProject("Default Project"),e.currentProjectId&&e.addGraphToProject(e.currentProjectId,"Untitled Graph"));const Ee=localStorage.getItem("doodlebugs-currentGraphId");if(Ee){const Ae=e.currentProject;Ae&&Ae.graphs.some(Pe=>Pe.id===Ee)&&r.selectGraph(Ee)}else(ue=e.currentProject)!=null&&ue.graphs.length&&r.selectGraph(e.currentProject.graphs[0].id);h()}),cr(()=>r.currentGraphId,(Ee,ue)=>{Ee&&Ee!==ue&&Kn(()=>{setTimeout(()=>{R("dagre")},100)})},{immediate:!0});const P=Ft(()=>{var Ee;return((Ee=e.currentProject)==null?void 0:Ee.name)||null}),N=Ft(()=>{if(e.currentProject&&r.currentGraphId){const Ee=e.currentProject.graphs.find(ue=>ue.id===r.currentGraphId);return(Ee==null?void 0:Ee.name)||null}return null}),I=Ee=>{y.value===Ee&&p.value?p.value=!1:(p.value=!0,y.value=Ee)},z=()=>{p.value=!p.value},ae=()=>{C.value=!C.value},re=Ft(()=>({width:p.value?`${n.leftSidebarWidth}px`:"var(--vertical-tab-width)",transition:T.value?"none":"width 0.3s ease-in-out"})),K=Ft(()=>({width:`${n.leftSidebarWidth-50}px`,opacity:p.value?"1":"0",pointerEvents:p.value?"auto":"none"})),V=Ft(()=>({width:C.value?`${n.rightSidebarWidth}px`:"0",opacity:C.value?"1":"0",pointerEvents:C.value?"auto":"none",borderLeft:C.value?"1px solid var(--color-border)":"none",transition:A.value?"none":"width 0.3s ease-in-out, opacity 0.3s ease-in-out"})),Z=()=>{T.value=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",U),window.addEventListener("mouseup",ee)},U=Ee=>{if(T.value){const ue=Ee.clientX;n.leftSidebarWidth=Math.max(250,Math.min(ue,600))}},W=()=>{A.value=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",X),window.addEventListener("mouseup",ee)},X=Ee=>{if(A.value){const ue=window.innerWidth-Ee.clientX;n.rightSidebarWidth=Math.max(280,Math.min(ue,600))}},ee=()=>{T.value=!1,A.value=!1,document.body.style.cursor="",document.body.style.userSelect="",window.removeEventListener("mousemove",U),window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",ee)};_a(()=>{ee()});const oe=Ee=>{s.value=Ee,Ee&&!n.isRightTabPinned&&n.setActiveRightTab("properties")},te=Ee=>{const ue=o.value.find(Ae=>Ae.id===Ee);if(ue){oe(ue);const Ae=c();Ae&&(Ae.elements().unselect(),Ae.getElementById(Ee).select(),Ae.animate({center:{eles:Ae.getElementById(Ee)},zoom:1.2,duration:500}))}},ie=Ee=>{u(Ee)},se=Ee=>{f(Ee)},$=Ee=>{Ee==="add-edge"?E.value="add-edge":(E.value="add-node",v.value=Ee),p.value=!1},ne=()=>{D.value.trim()&&(e.createProject(D.value.trim()),M.value=!1,D.value="",y.value="project",p.value=!0)},le=()=>{e.currentProject&&k.value.trim()&&(e.addGraphToProject(e.currentProject.id,k.value.trim()),_.value=!1,k.value="")},Se=()=>{r.currentGraphId?r.saveGraph(r.currentGraphId,r.graphContents.get(r.currentGraphId)):console.warn("No graph currently selected to save.")},De=(Ee,ue)=>{const Ae=URL.createObjectURL(Ee),Pe=document.createElement("a");Pe.href=Ae,Pe.download=ue,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),URL.revokeObjectURL(Ae)},be=()=>{if(!r.currentGraphId){alert("Please select a graph to export.");return}const Ee=r.currentGraphElements,ue=JSON.stringify(Ee,null,2),Ae=new Blob([ue],{type:"application/json"}),Pe=`${N.value||"graph"}.json`;De(Ae,Pe)},Te=Ee=>{if(!r.currentGraphId){alert("Please select a graph to export.");return}q.value=Ee,B.value=!0},pe=Ee=>{const ue=c();if(!ue||!q.value)return;const Ae=`${N.value||"graph"}.${q.value}`;try{let Pe;if(q.value==="svg"){const Fe=ue.svg(Ee);Pe=new Blob([Fe],{type:"image/svg+xml;charset=utf-8"})}else q.value==="jpg"?Pe=ue.jpg({...Ee,output:"blob"}):Pe=ue.png({...Ee,output:"blob"});De(Pe,Ae)}catch(Pe){console.error(`Failed to export ${q.value}:`,Pe),alert("An error occurred while exporting the graph. Please check the console.")}},de=async Ee=>{if(!e.currentProjectId){alert("Please create or select a project before loading an example.");return}try{const ue="/JuliaBUGS.jl/DoodleBUGS/pr-previews/347/",Ae=`${ue}examples/${Ee}/model.json`,Pe=`${ue}examples/${Ee}/data.json`,[Fe,Ye]=await Promise.all([fetch(Ae),fetch(Pe)]);if(!Fe.ok)throw new Error(`Could not fetch example model: ${Fe.statusText}`);const Ve=await Fe.json(),Qe=e.addGraphToProject(e.currentProjectId,Ve.name);if(Qe)if(r.updateGraphElements(Qe.id,Ve.graphJSON),Ye.ok){const Xe=await Ye.json();a.currentGraphDataString=JSON.stringify(Xe,null,2)}else console.error(`Failed to load example data: ${Ye.statusText}`),alert("Failed to load the example data. See console for details.")}catch(ue){console.error("Failed to load example model:",ue),alert("Failed to load the example model. See console for details.")}},ye=Ft(()=>g.value.size===0);return(Ee,ue)=>(Je(),ot("div",pY,[at($8,{"project-name":P.value,"active-graph-name":N.value,"is-grid-enabled":x.value,"onUpdate:isGridEnabled":ue[0]||(ue[0]=Ae=>x.value=Ae),"grid-size":w.value,"onUpdate:gridSize":ue[1]||(ue[1]=Ae=>w.value=Ae),"current-mode":E.value,"onUpdate:currentMode":ue[2]||(ue[2]=Ae=>E.value=Ae),"current-node-type":v.value,"onUpdate:currentNodeType":ue[3]||(ue[3]=Ae=>v.value=Ae),"is-left-sidebar-open":p.value,"is-right-sidebar-open":C.value,onToggleLeftSidebar:z,onToggleRightSidebar:ae,onNewProject:ue[4]||(ue[4]=Ae=>M.value=!0),onNewGraph:ue[5]||(ue[5]=Ae=>_.value=!0),onSaveCurrentGraph:Se,onOpenAboutModal:ue[6]||(ue[6]=Ae=>F.value=!0),onExportJson:be,onOpenExportModal:Te,onApplyLayout:R,onLoadExample:de,onValidateModel:Nt(h),"is-model-valid":ye.value,onShowValidationIssues:ue[7]||(ue[7]=Ae=>G.value=!0)},null,8,["project-name","active-graph-name","is-grid-enabled","grid-size","current-mode","current-node-type","is-left-sidebar-open","is-right-sidebar-open","onValidateModel","is-model-valid"]),Me("div",gY,[Me("aside",{class:"left-sidebar",style:Ci(re.value)},[Me("div",yY,[Me("button",{class:jt({active:y.value==="project"}),onClick:ue[8]||(ue[8]=Ae=>I("project")),title:"Project Manager"},[ue[28]||(ue[28]=Me("i",{class:"fas fa-folder"},null,-1)),ue[29]||(ue[29]=xt()),Vn(Me("span",null,"Project",512),[[Ha,p.value]])],2),Me("button",{class:jt({active:y.value==="palette"}),onClick:ue[9]||(ue[9]=Ae=>I("palette")),title:"Node Palette"},[ue[30]||(ue[30]=Me("i",{class:"fas fa-shapes"},null,-1)),ue[31]||(ue[31]=xt()),Vn(Me("span",null,"Palette",512),[[Ha,p.value]])],2),Me("button",{class:jt({active:y.value==="data"}),onClick:ue[10]||(ue[10]=Ae=>I("data")),title:"Data Input"},[ue[32]||(ue[32]=Me("i",{class:"fas fa-database"},null,-1)),ue[33]||(ue[33]=xt()),Vn(Me("span",null,"Data",512),[[Ha,p.value]])],2)]),Me("div",{class:"left-sidebar-content",style:Ci(K.value)},[Vn(Me("div",null,[at(T9,{onNewProject:ue[11]||(ue[11]=Ae=>M.value=!0),onNewGraph:ue[12]||(ue[12]=Ae=>_.value=!0)})],512),[[Ha,y.value==="project"]]),Vn(Me("div",null,[at(O9,{onSelectPaletteItem:$})],512),[[Ha,y.value==="palette"]]),Vn(Me("div",null,[at(W9,{"is-active":y.value==="data"},null,8,["is-active"])],512),[[Ha,y.value==="data"]])],4)],4),Me("div",{class:"resizer resizer-left",onMousedown:Ur(Z,["prevent"])},null,32),Me("main",mY,[at(n9,{"is-grid-enabled":x.value,"grid-size":w.value,"current-mode":E.value,elements:Nt(o),"current-node-type":v.value,"validation-errors":Nt(g),"onUpdate:currentMode":ue[13]||(ue[13]=Ae=>E.value=Ae),"onUpdate:currentNodeType":ue[14]||(ue[14]=Ae=>v.value=Ae),onElementSelected:oe},null,8,["is-grid-enabled","grid-size","current-mode","elements","current-node-type","validation-errors"])]),Me("div",{class:"resizer resizer-right",onMousedown:Ur(W,["prevent"])},null,32),Me("aside",{class:"right-sidebar",style:Ci(V.value)},[Me("div",bY,[Me("div",wY,[Me("button",{class:jt({active:Nt(n).activeRightTab==="properties"}),onClick:ue[15]||(ue[15]=Ae=>Nt(n).setActiveRightTab("properties"))},"Properties",2),Me("button",{class:jt({active:Nt(n).activeRightTab==="code"}),onClick:ue[16]||(ue[16]=Ae=>Nt(n).setActiveRightTab("code"))},"Code",2),Me("button",{class:jt({active:Nt(n).activeRightTab==="json"}),onClick:ue[17]||(ue[17]=Ae=>Nt(n).setActiveRightTab("json"))},"JSON",2)]),Me("button",{onClick:ue[18]||(ue[18]=Ae=>Nt(n).toggleRightTabPinned()),class:jt(["pin-button",{pinned:Nt(n).isRightTabPinned}]),title:"Pin Tab"},ue[34]||(ue[34]=[Me("i",{class:"fas fa-thumbtack"},null,-1)]),2)]),Me("div",xY,[Vn(Me("div",EY,[at(h8,{"selected-element":Nt(s),"validation-errors":Nt(g),onUpdateElement:ie,onDeleteElement:se},null,8,["selected-element","validation-errors"])],512),[[Ha,Nt(n).activeRightTab==="properties"]]),Vn(Me("div",CY,[at(T8,{"is-active":Nt(n).activeRightTab==="code"},null,8,["is-active"])],512),[[Ha,Nt(n).activeRightTab==="code"]]),Vn(Me("div",TY,[at(P8,{"is-active":Nt(n).activeRightTab==="json"},null,8,["is-active"])],512),[[Ha,Nt(n).activeRightTab==="json"]])])],4)]),at(Oi,{"is-open":M.value,onClose:ue[21]||(ue[21]=Ae=>M.value=!1)},{header:ft(()=>ue[35]||(ue[35]=[Me("h3",null,"Create New Project",-1)])),body:ft(()=>[ue[36]||(ue[36]=Me("label",{for:"new-project-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"Project Name:",-1)),at(Yn,{id:"new-project-name",modelValue:D.value,"onUpdate:modelValue":ue[19]||(ue[19]=Ae=>D.value=Ae),placeholder:"Enter project name",onKeyup:_b(ne,["enter"])},null,8,["modelValue"])]),footer:ft(()=>[at(Wt,{onClick:ue[20]||(ue[20]=Ae=>M.value=!1),type:"secondary"},{default:ft(()=>ue[37]||(ue[37]=[xt("Cancel")])),_:1,__:[37]}),at(Wt,{onClick:ne,type:"primary"},{default:ft(()=>ue[38]||(ue[38]=[xt("Create")])),_:1,__:[38]})]),_:1},8,["is-open"]),at(Oi,{"is-open":_.value,onClose:ue[24]||(ue[24]=Ae=>_.value=!1)},{header:ft(()=>ue[39]||(ue[39]=[Me("h3",null,"Create New Graph",-1)])),body:ft(()=>[ue[40]||(ue[40]=Me("label",{for:"new-graph-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"Graph Name:",-1)),at(Yn,{id:"new-graph-name",modelValue:k.value,"onUpdate:modelValue":ue[22]||(ue[22]=Ae=>k.value=Ae),placeholder:"Enter graph name",onKeyup:_b(le,["enter"])},null,8,["modelValue"])]),footer:ft(()=>[at(Wt,{onClick:ue[23]||(ue[23]=Ae=>_.value=!1),type:"secondary"},{default:ft(()=>ue[41]||(ue[41]=[xt("Cancel")])),_:1,__:[41]}),at(Wt,{onClick:le,type:"primary"},{default:ft(()=>ue[42]||(ue[42]=[xt("Create")])),_:1,__:[42]})]),_:1},8,["is-open"]),at(X8,{"is-open":F.value,onClose:ue[25]||(ue[25]=Ae=>F.value=!1)},null,8,["is-open"]),at(nY,{"is-open":B.value,"export-type":q.value,onClose:ue[26]||(ue[26]=Ae=>B.value=!1),onConfirmExport:pe},null,8,["is-open","export-type"]),at(cY,{"is-open":G.value,"validation-errors":Nt(g),elements:Nt(o),onClose:ue[27]||(ue[27]=Ae=>G.value=!1),onSelectNode:te},null,8,["is-open","validation-errors","elements"])]))}}),AY=Kr(SY,[["__scopeId","data-v-a9793a47"]]),LY=Dr({__name:"App",setup(t){return(e,r)=>(Je(),fa(AY))}}),MO=sq(LY);MO.use(fq());MO.mount("#app");
