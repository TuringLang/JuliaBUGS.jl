(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();/**
* @vue/shared v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function jb(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Zt={},cs=[],Ea=()=>{},L2=()=>!1,lc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Zb=t=>t.startsWith("onUpdate:"),Yr=Object.assign,Qb=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},D2=Object.prototype.hasOwnProperty,Ht=(t,e)=>D2.call(t,e),bt=Array.isArray,ds=t=>tu(t)==="[object Map]",uc=t=>tu(t)==="[object Set]",aC=t=>tu(t)==="[object Date]",Tt=t=>typeof t=="function",Cr=t=>typeof t=="string",oa=t=>typeof t=="symbol",Jt=t=>t!==null&&typeof t=="object",gR=t=>(Jt(t)||Tt(t))&&Tt(t.then)&&Tt(t.catch),yR=Object.prototype.toString,tu=t=>yR.call(t),_2=t=>tu(t).slice(8,-1),mR=t=>tu(t)==="[object Object]",Jb=t=>Cr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ll=jb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fc=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},M2=/-(\w)/g,Si=fc(t=>t.replace(M2,(e,r)=>r?r.toUpperCase():"")),R2=/\B([A-Z])/g,ki=fc(t=>t.replace(R2,"-$1").toLowerCase()),bR=fc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Jd=fc(t=>t?`on${bR(t)}`:""),wi=(t,e)=>!Object.is(t,e),yf=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},wR=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},yb=t=>{const e=parseFloat(t);return isNaN(e)?t:e},P2=t=>{const e=Cr(t)?Number(t):NaN;return isNaN(e)?t:e};let iC;const cc=()=>iC||(iC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xi(t){if(bt(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],a=Cr(n)?I2(n):xi(n);if(a)for(const i in a)e[i]=a[i]}return e}else if(Cr(t)||Jt(t))return t}const N2=/;(?![^(]*\))/g,k2=/:([^]+)/,O2=/\/\*[^]*?\*\//g;function I2(t){const e={};return t.replace(O2,"").split(N2).forEach(r=>{if(r){const n=r.split(k2);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function cr(t){let e="";if(Cr(t))e=t;else if(bt(t))for(let r=0;r<t.length;r++){const n=cr(t[r]);n&&(e+=n+" ")}else if(Jt(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const F2="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",B2=jb(F2);function xR(t){return!!t||t===""}function q2(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=dc(t[n],e[n]);return r}function dc(t,e){if(t===e)return!0;let r=aC(t),n=aC(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=oa(t),n=oa(e),r||n)return t===e;if(r=bt(t),n=bt(e),r||n)return r&&n?q2(t,e):!1;if(r=Jt(t),n=Jt(e),r||n){if(!r||!n)return!1;const a=Object.keys(t).length,i=Object.keys(e).length;if(a!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(l&&!u||!l&&u||!dc(t[o],e[o]))return!1}}return String(t)===String(e)}function CR(t,e){return t.findIndex(r=>dc(r,e))}const ER=t=>!!(t&&t.__v_isRef===!0),Ar=t=>Cr(t)?t:t==null?"":bt(t)||Jt(t)&&(t.toString===yR||!Tt(t.toString))?ER(t)?Ar(t.value):JSON.stringify(t,TR,2):String(t),TR=(t,e)=>ER(e)?TR(t,e.value):ds(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,a],i)=>(r[eh(n,i)+" =>"]=a,r),{})}:uc(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>eh(r))}:oa(e)?eh(e):Jt(e)&&!bt(e)&&!mR(e)?String(e):e,eh=(t,e="")=>{var r;return oa(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fn;class SR{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fn,!e&&fn&&(this.index=(fn.scopes||(fn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=fn;try{return fn=this,e()}finally{fn=r}}}on(){++this._on===1&&(this.prevScope=fn,fn=this)}off(){this._on>0&&--this._on===0&&(fn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function AR(t){return new SR(t)}function LR(){return fn}function z2(t,e=!1){fn&&fn.cleanups.push(t)}let tr;const th=new WeakSet;class DR{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fn&&fn.active&&fn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,th.has(this)&&(th.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||MR(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,oC(this),RR(this);const e=tr,r=aa;tr=this,aa=!0;try{return this.fn()}finally{PR(this),tr=e,aa=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)r1(e);this.deps=this.depsTail=void 0,oC(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?th.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){mb(this)&&this.run()}get dirty(){return mb(this)}}let _R=0,Dl,_l;function MR(t,e=!1){if(t.flags|=8,e){t.next=_l,_l=t;return}t.next=Dl,Dl=t}function e1(){_R++}function t1(){if(--_R>0)return;if(_l){let e=_l;for(_l=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;Dl;){let e=Dl;for(Dl=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function RR(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function PR(t){let e,r=t.depsTail,n=r;for(;n;){const a=n.prevDep;n.version===-1?(n===r&&(r=a),r1(n),G2(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=a}t.deps=e,t.depsTail=r}function mb(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(NR(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function NR(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Fl)||(t.globalVersion=Fl,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!mb(t))))return;t.flags|=2;const e=t.dep,r=tr,n=aa;tr=t,aa=!0;try{RR(t);const a=t.fn(t._value);(e.version===0||wi(a,t._value))&&(t.flags|=128,t._value=a,e.version++)}catch(a){throw e.version++,a}finally{tr=r,aa=n,PR(t),t.flags&=-3}}function r1(t,e=!1){const{dep:r,prevSub:n,nextSub:a}=t;if(n&&(n.nextSub=a,t.prevSub=void 0),a&&(a.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)r1(i,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function G2(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let aa=!0;const kR=[];function $a(){kR.push(aa),aa=!1}function Ya(){const t=kR.pop();aa=t===void 0?!0:t}function oC(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=tr;tr=void 0;try{e()}finally{tr=r}}}let Fl=0;class H2{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class n1{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!tr||!aa||tr===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==tr)r=this.activeLink=new H2(tr,this),tr.deps?(r.prevDep=tr.depsTail,tr.depsTail.nextDep=r,tr.depsTail=r):tr.deps=tr.depsTail=r,OR(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=tr.depsTail,r.nextDep=void 0,tr.depsTail.nextDep=r,tr.depsTail=r,tr.deps===r&&(tr.deps=n)}return r}trigger(e){this.version++,Fl++,this.notify(e)}notify(e){e1();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{t1()}}}function OR(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)OR(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const Ff=new WeakMap,po=Symbol(""),bb=Symbol(""),Bl=Symbol("");function cn(t,e,r){if(aa&&tr){let n=Ff.get(t);n||Ff.set(t,n=new Map);let a=n.get(r);a||(n.set(r,a=new n1),a.map=n,a.key=r),a.track()}}function Ua(t,e,r,n,a,i){const o=Ff.get(t);if(!o){Fl++;return}const l=u=>{u&&u.trigger()};if(e1(),e==="clear")o.forEach(l);else{const u=bt(t),f=u&&Jb(r);if(u&&r==="length"){const c=Number(n);o.forEach((h,g)=>{(g==="length"||g===Bl||!oa(g)&&g>=c)&&l(h)})}else switch((r!==void 0||o.has(void 0))&&l(o.get(r)),f&&l(o.get(Bl)),e){case"add":u?f&&l(o.get("length")):(l(o.get(po)),ds(t)&&l(o.get(bb)));break;case"delete":u||(l(o.get(po)),ds(t)&&l(o.get(bb)));break;case"set":ds(t)&&l(o.get(po));break}}t1()}function U2(t,e){const r=Ff.get(t);return r&&r.get(e)}function jo(t){const e=Ot(t);return e===t?e:(cn(e,"iterate",Bl),Yn(t)?e:e.map(Qr))}function hc(t){return cn(t=Ot(t),"iterate",Bl),t}const W2={__proto__:null,[Symbol.iterator](){return rh(this,Symbol.iterator,Qr)},concat(...t){return jo(this).concat(...t.map(e=>bt(e)?jo(e):e))},entries(){return rh(this,"entries",t=>(t[1]=Qr(t[1]),t))},every(t,e){return Fa(this,"every",t,e,void 0,arguments)},filter(t,e){return Fa(this,"filter",t,e,r=>r.map(Qr),arguments)},find(t,e){return Fa(this,"find",t,e,Qr,arguments)},findIndex(t,e){return Fa(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Fa(this,"findLast",t,e,Qr,arguments)},findLastIndex(t,e){return Fa(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Fa(this,"forEach",t,e,void 0,arguments)},includes(...t){return nh(this,"includes",t)},indexOf(...t){return nh(this,"indexOf",t)},join(t){return jo(this).join(t)},lastIndexOf(...t){return nh(this,"lastIndexOf",t)},map(t,e){return Fa(this,"map",t,e,void 0,arguments)},pop(){return fl(this,"pop")},push(...t){return fl(this,"push",t)},reduce(t,...e){return sC(this,"reduce",t,e)},reduceRight(t,...e){return sC(this,"reduceRight",t,e)},shift(){return fl(this,"shift")},some(t,e){return Fa(this,"some",t,e,void 0,arguments)},splice(...t){return fl(this,"splice",t)},toReversed(){return jo(this).toReversed()},toSorted(t){return jo(this).toSorted(t)},toSpliced(...t){return jo(this).toSpliced(...t)},unshift(...t){return fl(this,"unshift",t)},values(){return rh(this,"values",Qr)}};function rh(t,e,r){const n=hc(t),a=n[e]();return n!==t&&!Yn(t)&&(a._next=a.next,a.next=()=>{const i=a._next();return i.value&&(i.value=r(i.value)),i}),a}const V2=Array.prototype;function Fa(t,e,r,n,a,i){const o=hc(t),l=o!==t&&!Yn(t),u=o[e];if(u!==V2[e]){const h=u.apply(t,i);return l?Qr(h):h}let f=r;o!==t&&(l?f=function(h,g){return r.call(this,Qr(h),g,t)}:r.length>2&&(f=function(h,g){return r.call(this,h,g,t)}));const c=u.call(o,f,n);return l&&a?a(c):c}function sC(t,e,r,n){const a=hc(t);let i=r;return a!==t&&(Yn(t)?r.length>3&&(i=function(o,l,u){return r.call(this,o,l,u,t)}):i=function(o,l,u){return r.call(this,o,Qr(l),u,t)}),a[e](i,...n)}function nh(t,e,r){const n=Ot(t);cn(n,"iterate",Bl);const a=n[e](...r);return(a===-1||a===!1)&&o1(r[0])?(r[0]=Ot(r[0]),n[e](...r)):a}function fl(t,e,r=[]){$a(),e1();const n=Ot(t)[e].apply(t,r);return t1(),Ya(),n}const $2=jb("__proto__,__v_isRef,__isVue"),IR=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(oa));function Y2(t){oa(t)||(t=String(t));const e=Ot(this);return cn(e,"has",t),e.hasOwnProperty(t)}class FR{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const a=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(a?i?nF:GR:i?zR:qR).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=bt(e);if(!a){let u;if(o&&(u=W2[r]))return u;if(r==="hasOwnProperty")return Y2}const l=Reflect.get(e,r,xr(e)?e:n);return(oa(r)?IR.has(r):$2(r))||(a||cn(e,"get",r),i)?l:xr(l)?o&&Jb(r)?l:l.value:Jt(l)?a?HR(l):vc(l):l}}class BR extends FR{constructor(e=!1){super(!1,e)}set(e,r,n,a){let i=e[r];if(!this._isShallow){const u=Ai(i);if(!Yn(n)&&!Ai(n)&&(i=Ot(i),n=Ot(n)),!bt(e)&&xr(i)&&!xr(n))return u?!1:(i.value=n,!0)}const o=bt(e)&&Jb(r)?Number(r)<e.length:Ht(e,r),l=Reflect.set(e,r,n,xr(e)?e:a);return e===Ot(a)&&(o?wi(n,i)&&Ua(e,"set",r,n):Ua(e,"add",r,n)),l}deleteProperty(e,r){const n=Ht(e,r);e[r];const a=Reflect.deleteProperty(e,r);return a&&n&&Ua(e,"delete",r,void 0),a}has(e,r){const n=Reflect.has(e,r);return(!oa(r)||!IR.has(r))&&cn(e,"has",r),n}ownKeys(e){return cn(e,"iterate",bt(e)?"length":po),Reflect.ownKeys(e)}}class X2 extends FR{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const K2=new BR,j2=new X2,Z2=new BR(!0);const wb=t=>t,Zu=t=>Reflect.getPrototypeOf(t);function Q2(t,e,r){return function(...n){const a=this.__v_raw,i=Ot(a),o=ds(i),l=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,f=a[t](...n),c=r?wb:e?Bf:Qr;return!e&&cn(i,"iterate",u?bb:po),{next(){const{value:h,done:g}=f.next();return g?{value:h,done:g}:{value:l?[c(h[0]),c(h[1])]:c(h),done:g}},[Symbol.iterator](){return this}}}}function Qu(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function J2(t,e){const r={get(a){const i=this.__v_raw,o=Ot(i),l=Ot(a);t||(wi(a,l)&&cn(o,"get",a),cn(o,"get",l));const{has:u}=Zu(o),f=e?wb:t?Bf:Qr;if(u.call(o,a))return f(i.get(a));if(u.call(o,l))return f(i.get(l));i!==o&&i.get(a)},get size(){const a=this.__v_raw;return!t&&cn(Ot(a),"iterate",po),Reflect.get(a,"size",a)},has(a){const i=this.__v_raw,o=Ot(i),l=Ot(a);return t||(wi(a,l)&&cn(o,"has",a),cn(o,"has",l)),a===l?i.has(a):i.has(a)||i.has(l)},forEach(a,i){const o=this,l=o.__v_raw,u=Ot(l),f=e?wb:t?Bf:Qr;return!t&&cn(u,"iterate",po),l.forEach((c,h)=>a.call(i,f(c),f(h),o))}};return Yr(r,t?{add:Qu("add"),set:Qu("set"),delete:Qu("delete"),clear:Qu("clear")}:{add(a){!e&&!Yn(a)&&!Ai(a)&&(a=Ot(a));const i=Ot(this);return Zu(i).has.call(i,a)||(i.add(a),Ua(i,"add",a,a)),this},set(a,i){!e&&!Yn(i)&&!Ai(i)&&(i=Ot(i));const o=Ot(this),{has:l,get:u}=Zu(o);let f=l.call(o,a);f||(a=Ot(a),f=l.call(o,a));const c=u.call(o,a);return o.set(a,i),f?wi(i,c)&&Ua(o,"set",a,i):Ua(o,"add",a,i),this},delete(a){const i=Ot(this),{has:o,get:l}=Zu(i);let u=o.call(i,a);u||(a=Ot(a),u=o.call(i,a)),l&&l.call(i,a);const f=i.delete(a);return u&&Ua(i,"delete",a,void 0),f},clear(){const a=Ot(this),i=a.size!==0,o=a.clear();return i&&Ua(a,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=Q2(a,t,e)}),r}function a1(t,e){const r=J2(t,e);return(n,a,i)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?n:Reflect.get(Ht(r,a)&&a in n?r:n,a,i)}const eF={get:a1(!1,!1)},tF={get:a1(!1,!0)},rF={get:a1(!0,!1)};const qR=new WeakMap,zR=new WeakMap,GR=new WeakMap,nF=new WeakMap;function aF(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function iF(t){return t.__v_skip||!Object.isExtensible(t)?0:aF(_2(t))}function vc(t){return Ai(t)?t:i1(t,!1,K2,eF,qR)}function oF(t){return i1(t,!1,Z2,tF,zR)}function HR(t){return i1(t,!0,j2,rF,GR)}function i1(t,e,r,n,a){if(!Jt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=iF(t);if(i===0)return t;const o=a.get(t);if(o)return o;const l=new Proxy(t,i===2?n:r);return a.set(t,l),l}function Ci(t){return Ai(t)?Ci(t.__v_raw):!!(t&&t.__v_isReactive)}function Ai(t){return!!(t&&t.__v_isReadonly)}function Yn(t){return!!(t&&t.__v_isShallow)}function o1(t){return t?!!t.__v_raw:!1}function Ot(t){const e=t&&t.__v_raw;return e?Ot(e):t}function s1(t){return!Ht(t,"__v_skip")&&Object.isExtensible(t)&&wR(t,"__v_skip",!0),t}const Qr=t=>Jt(t)?vc(t):t,Bf=t=>Jt(t)?HR(t):t;function xr(t){return t?t.__v_isRef===!0:!1}function Ct(t){return sF(t,!1)}function sF(t,e){return xr(t)?t:new lF(t,e)}class lF{constructor(e,r){this.dep=new n1,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Ot(e),this._value=r?e:Qr(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Yn(e)||Ai(e);e=n?e:Ot(e),wi(e,r)&&(this._rawValue=e,this._value=n?e:Qr(e),this.dep.trigger())}}function ir(t){return xr(t)?t.value:t}const uF={get:(t,e,r)=>e==="__v_raw"?t:ir(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const a=t[e];return xr(a)&&!xr(r)?(a.value=r,!0):Reflect.set(t,e,r,n)}};function UR(t){return Ci(t)?t:new Proxy(t,uF)}function fF(t){const e=bt(t)?new Array(t.length):{};for(const r in t)e[r]=dF(t,r);return e}class cF{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return U2(Ot(this._object),this._key)}}function dF(t,e,r){const n=t[e];return xr(n)?n:new cF(t,e,r)}class hF{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new n1(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Fl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&tr!==this)return MR(this,!0),!0}get value(){const e=this.dep.track();return NR(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function vF(t,e,r=!1){let n,a;return Tt(t)?n=t:(n=t.get,a=t.set),new hF(n,a,r)}const Ju={},qf=new WeakMap;let io;function pF(t,e=!1,r=io){if(r){let n=qf.get(r);n||qf.set(r,n=[]),n.push(t)}}function gF(t,e,r=Zt){const{immediate:n,deep:a,once:i,scheduler:o,augmentJob:l,call:u}=r,f=T=>a?T:Yn(T)||a===!1||a===0?Wa(T,1):Wa(T);let c,h,g,p,y=!1,C=!1;if(xr(t)?(h=()=>t.value,y=Yn(t)):Ci(t)?(h=()=>f(t),y=!0):bt(t)?(C=!0,y=t.some(T=>Ci(T)||Yn(T)),h=()=>t.map(T=>{if(xr(T))return T.value;if(Ci(T))return f(T);if(Tt(T))return u?u(T,2):T()})):Tt(t)?e?h=u?()=>u(t,2):t:h=()=>{if(g){$a();try{g()}finally{Ya()}}const T=io;io=c;try{return u?u(t,3,[p]):t(p)}finally{io=T}}:h=Ea,e&&a){const T=h,A=a===!0?1/0:a;h=()=>Wa(T(),A)}const E=LR(),v=()=>{c.stop(),E&&E.active&&Qb(E.effects,c)};if(i&&e){const T=e;e=(...A)=>{T(...A),v()}}let x=C?new Array(t.length).fill(Ju):Ju;const w=T=>{if(!(!(c.flags&1)||!c.dirty&&!T))if(e){const A=c.run();if(a||y||(C?A.some((_,D)=>wi(_,x[D])):wi(A,x))){g&&g();const _=io;io=c;try{const D=[A,x===Ju?void 0:C&&x[0]===Ju?[]:x,p];x=A,u?u(e,3,D):e(...D)}finally{io=_}}}else c.run()};return l&&l(w),c=new DR(h),c.scheduler=o?()=>o(w,!1):w,p=T=>pF(T,!1,c),g=c.onStop=()=>{const T=qf.get(c);if(T){if(u)u(T,4);else for(const A of T)A();qf.delete(c)}},e?n?w(!0):x=c.run():o?o(w.bind(null,!0),!0):c.run(),v.pause=c.pause.bind(c),v.resume=c.resume.bind(c),v.stop=v,v}function Wa(t,e=1/0,r){if(e<=0||!Jt(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,xr(t))Wa(t.value,e,r);else if(bt(t))for(let n=0;n<t.length;n++)Wa(t[n],e,r);else if(uc(t)||ds(t))t.forEach(n=>{Wa(n,e,r)});else if(mR(t)){for(const n in t)Wa(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Wa(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ru(t,e,r,n){try{return n?t(...n):t()}catch(a){pc(a,e,r)}}function sa(t,e,r,n){if(Tt(t)){const a=ru(t,e,r,n);return a&&gR(a)&&a.catch(i=>{pc(i,e,r)}),a}if(bt(t)){const a=[];for(let i=0;i<t.length;i++)a.push(sa(t[i],e,r,n));return a}}function pc(t,e,r,n=!0){const a=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Zt;if(e){let l=e.parent;const u=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${r}`;for(;l;){const c=l.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,u,f)===!1)return}l=l.parent}if(i){$a(),ru(i,null,10,[t,u,f]),Ya();return}}yF(t,r,a,n,o)}function yF(t,e,r,n=!0,a=!1){if(a)throw t;console.error(t)}const Sn=[];let wa=-1;const hs=[];let gi=null,os=0;const WR=Promise.resolve();let zf=null;function gc(t){const e=zf||WR;return t?e.then(this?t.bind(this):t):e}function mF(t){let e=wa+1,r=Sn.length;for(;e<r;){const n=e+r>>>1,a=Sn[n],i=ql(a);i<t||i===t&&a.flags&2?e=n+1:r=n}return e}function l1(t){if(!(t.flags&1)){const e=ql(t),r=Sn[Sn.length-1];!r||!(t.flags&2)&&e>=ql(r)?Sn.push(t):Sn.splice(mF(e),0,t),t.flags|=1,VR()}}function VR(){zf||(zf=WR.then(YR))}function bF(t){bt(t)?hs.push(...t):gi&&t.id===-1?gi.splice(os+1,0,t):t.flags&1||(hs.push(t),t.flags|=1),VR()}function lC(t,e,r=wa+1){for(;r<Sn.length;r++){const n=Sn[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Sn.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function $R(t){if(hs.length){const e=[...new Set(hs)].sort((r,n)=>ql(r)-ql(n));if(hs.length=0,gi){gi.push(...e);return}for(gi=e,os=0;os<gi.length;os++){const r=gi[os];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}gi=null,os=0}}const ql=t=>t.id==null?t.flags&2?-1:1/0:t.id;function YR(t){try{for(wa=0;wa<Sn.length;wa++){const e=Sn[wa];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ru(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;wa<Sn.length;wa++){const e=Sn[wa];e&&(e.flags&=-2)}wa=-1,Sn.length=0,$R(),zf=null,(Sn.length||hs.length)&&YR()}}let Vr=null,XR=null;function Gf(t){const e=Vr;return Vr=t,XR=t&&t.type.__scopeId||null,e}function ht(t,e=Vr,r){if(!e||t._n)return t;const n=(...a)=>{n._d&&mC(-1);const i=Gf(e);let o;try{o=t(...a)}finally{Gf(i),n._d&&mC(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Un(t,e){if(Vr===null)return t;const r=xc(Vr),n=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[i,o,l,u=Zt]=e[a];i&&(Tt(i)&&(i={mounted:i,updated:i}),i.deep&&Wa(o),n.push({dir:i,instance:r,value:o,oldValue:void 0,arg:l,modifiers:u}))}return t}function Qi(t,e,r,n){const a=t.dirs,i=e&&e.dirs;for(let o=0;o<a.length;o++){const l=a[o];i&&(l.oldValue=i[o].value);let u=l.dir[n];u&&($a(),sa(u,r,8,[t.el,l,t,e]),Ya())}}const wF=Symbol("_vte"),KR=t=>t.__isTeleport,yi=Symbol("_leaveCb"),ef=Symbol("_enterCb");function xF(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Sa(()=>{t.isMounted=!0}),nP(()=>{t.isUnmounting=!0}),t}const Gn=[Function,Array],jR={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Gn,onEnter:Gn,onAfterEnter:Gn,onEnterCancelled:Gn,onBeforeLeave:Gn,onLeave:Gn,onAfterLeave:Gn,onLeaveCancelled:Gn,onBeforeAppear:Gn,onAppear:Gn,onAfterAppear:Gn,onAppearCancelled:Gn},ZR=t=>{const e=t.subTree;return e.component?ZR(e.component):e},CF={name:"BaseTransition",props:jR,setup(t,{slots:e}){const r=mB(),n=xF();return()=>{const a=e.default&&eP(e.default(),!0);if(!a||!a.length)return;const i=QR(a),o=Ot(t),{mode:l}=o;if(n.isLeaving)return ah(i);const u=uC(i);if(!u)return ah(i);let f=xb(u,o,n,r,h=>f=h);u.type!==dn&&zl(u,f);let c=r.subTree&&uC(r.subTree);if(c&&c.type!==dn&&!uo(u,c)&&ZR(r).type!==dn){let h=xb(c,o,n,r);if(zl(c,h),l==="out-in"&&u.type!==dn)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave,c=void 0},ah(i);l==="in-out"&&u.type!==dn?h.delayLeave=(g,p,y)=>{const C=JR(n,c);C[String(c.key)]=c,g[yi]=()=>{p(),g[yi]=void 0,delete f.delayedLeave,c=void 0},f.delayedLeave=()=>{y(),delete f.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function QR(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==dn){e=r;break}}return e}const EF=CF;function JR(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function xb(t,e,r,n,a){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:g,onLeave:p,onAfterLeave:y,onLeaveCancelled:C,onBeforeAppear:E,onAppear:v,onAfterAppear:x,onAppearCancelled:w}=e,T=String(t.key),A=JR(r,t),_=(N,B)=>{N&&sa(N,n,9,B)},D=(N,B)=>{const G=B[1];_(N,B),bt(N)?N.every(F=>F.length<=1)&&G():N.length<=1&&G()},P={mode:o,persisted:l,beforeEnter(N){let B=u;if(!r.isMounted)if(i)B=E||u;else return;N[yi]&&N[yi](!0);const G=A[T];G&&uo(t,G)&&G.el[yi]&&G.el[yi](),_(B,[N])},enter(N){let B=f,G=c,F=h;if(!r.isMounted)if(i)B=v||f,G=x||c,F=w||h;else return;let z=!1;const M=N[ef]=R=>{z||(z=!0,R?_(F,[N]):_(G,[N]),P.delayedLeave&&P.delayedLeave(),N[ef]=void 0)};B?D(B,[N,M]):M()},leave(N,B){const G=String(t.key);if(N[ef]&&N[ef](!0),r.isUnmounting)return B();_(g,[N]);let F=!1;const z=N[yi]=M=>{F||(F=!0,B(),M?_(C,[N]):_(y,[N]),N[yi]=void 0,A[G]===t&&delete A[G])};A[G]=t,p?D(p,[N,z]):z()},clone(N){const B=xb(N,e,r,n,a);return a&&a(B),B}};return P}function ah(t){if(yc(t))return t=Li(t),t.children=null,t}function uC(t){if(!yc(t))return KR(t.type)&&t.children?QR(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&Tt(r.default))return r.default()}}function zl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,zl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function eP(t,e=!1,r){let n=[],a=0;for(let i=0;i<t.length;i++){let o=t[i];const l=r==null?o.key:String(r)+String(o.key!=null?o.key:i);o.type===or?(o.patchFlag&128&&a++,n=n.concat(eP(o.children,e,l))):(e||o.type!==dn)&&n.push(l!=null?Li(o,{key:l}):o)}if(a>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function qr(t,e){return Tt(t)?Yr({name:t.name},e,{setup:t}):t}function tP(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Hf(t,e,r,n,a=!1){if(bt(t)){t.forEach((y,C)=>Hf(y,e&&(bt(e)?e[C]:e),r,n,a));return}if(vs(n)&&!a){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Hf(t,e,r,n.component.subTree);return}const i=n.shapeFlag&4?xc(n.component):n.el,o=a?null:i,{i:l,r:u}=t,f=e&&e.r,c=l.refs===Zt?l.refs={}:l.refs,h=l.setupState,g=Ot(h),p=h===Zt?()=>!1:y=>Ht(g,y);if(f!=null&&f!==u&&(Cr(f)?(c[f]=null,p(f)&&(h[f]=null)):xr(f)&&(f.value=null)),Tt(u))ru(u,l,12,[o,c]);else{const y=Cr(u),C=xr(u);if(y||C){const E=()=>{if(t.f){const v=y?p(u)?h[u]:c[u]:u.value;a?bt(v)&&Qb(v,i):bt(v)?v.includes(i)||v.push(i):y?(c[u]=[i],p(u)&&(h[u]=c[u])):(u.value=[i],t.k&&(c[t.k]=u.value))}else y?(c[u]=o,p(u)&&(h[u]=o)):C&&(u.value=o,t.k&&(c[t.k]=o))};o?(E.id=-1,In(E,r)):E()}}}cc().requestIdleCallback;cc().cancelIdleCallback;const vs=t=>!!t.type.__asyncLoader,yc=t=>t.type.__isKeepAlive;function TF(t,e){rP(t,"a",e)}function SF(t,e){rP(t,"da",e)}function rP(t,e,r=Jr){const n=t.__wdc||(t.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(mc(e,n,r),r){let a=r.parent;for(;a&&a.parent;)yc(a.parent.vnode)&&AF(n,e,r,a),a=a.parent}}function AF(t,e,r,n){const a=mc(e,t,n,!0);Aa(()=>{Qb(n[e],a)},r)}function mc(t,e,r=Jr,n=!1){if(r){const a=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...o)=>{$a();const l=nu(r),u=sa(e,r,t,o);return l(),Ya(),u});return n?a.unshift(i):a.push(i),i}}const Qa=t=>(e,r=Jr)=>{(!Ul||t==="sp")&&mc(t,(...n)=>e(...n),r)},LF=Qa("bm"),Sa=Qa("m"),DF=Qa("bu"),_F=Qa("u"),nP=Qa("bum"),Aa=Qa("um"),MF=Qa("sp"),RF=Qa("rtg"),PF=Qa("rtc");function NF(t,e=Jr){mc("ec",t,e)}const kF=Symbol.for("v-ndc");function Xa(t,e,r,n){let a;const i=r,o=bt(t);if(o||Cr(t)){const l=o&&Ci(t);let u=!1,f=!1;l&&(u=!Yn(t),f=Ai(t),t=hc(t)),a=new Array(t.length);for(let c=0,h=t.length;c<h;c++)a[c]=e(u?f?Bf(Qr(t[c])):Qr(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){a=new Array(t);for(let l=0;l<t;l++)a[l]=e(l+1,l,void 0,i)}else if(Jt(t))if(t[Symbol.iterator])a=Array.from(t,(l,u)=>e(l,u,void 0,i));else{const l=Object.keys(t);a=new Array(l.length);for(let u=0,f=l.length;u<f;u++){const c=l[u];a[u]=e(t[c],c,u,i)}}else a=[];return a}function ps(t,e,r={},n,a){if(Vr.ce||Vr.parent&&vs(Vr.parent)&&Vr.parent.ce)return e!=="default"&&(r.name=e),ft(),Ka(or,null,[ot("slot",r,n)],64);let i=t[e];i&&i._c&&(i._d=!1),ft();const o=i&&aP(i(r)),l=r.key||o&&o.key,u=Ka(or,{key:(l&&!oa(l)?l:`_${e}`)+""},o||[],o&&t._===1?64:-2);return!a&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),i&&i._c&&(i._d=!0),u}function aP(t){return t.some(e=>Hl(e)?!(e.type===dn||e.type===or&&!aP(e.children)):!0)?t:null}const Cb=t=>t?TP(t)?xc(t):Cb(t.parent):null,Ml=Yr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Cb(t.parent),$root:t=>Cb(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>oP(t),$forceUpdate:t=>t.f||(t.f=()=>{l1(t.update)}),$nextTick:t=>t.n||(t.n=gc.bind(t.proxy)),$watch:t=>nB.bind(t)}),ih=(t,e)=>t!==Zt&&!t.__isScriptSetup&&Ht(t,e),OF={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:a,props:i,accessCache:o,type:l,appContext:u}=t;let f;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return a[e];case 4:return r[e];case 3:return i[e]}else{if(ih(n,e))return o[e]=1,n[e];if(a!==Zt&&Ht(a,e))return o[e]=2,a[e];if((f=t.propsOptions[0])&&Ht(f,e))return o[e]=3,i[e];if(r!==Zt&&Ht(r,e))return o[e]=4,r[e];Eb&&(o[e]=0)}}const c=Ml[e];let h,g;if(c)return e==="$attrs"&&cn(t.attrs,"get",""),c(t);if((h=l.__cssModules)&&(h=h[e]))return h;if(r!==Zt&&Ht(r,e))return o[e]=4,r[e];if(g=u.config.globalProperties,Ht(g,e))return g[e]},set({_:t},e,r){const{data:n,setupState:a,ctx:i}=t;return ih(a,e)?(a[e]=r,!0):n!==Zt&&Ht(n,e)?(n[e]=r,!0):Ht(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:a,propsOptions:i}},o){let l;return!!r[o]||t!==Zt&&Ht(t,o)||ih(e,o)||(l=i[0])&&Ht(l,o)||Ht(n,o)||Ht(Ml,o)||Ht(a.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Ht(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function fC(t){return bt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Eb=!0;function IF(t){const e=oP(t),r=t.proxy,n=t.ctx;Eb=!1,e.beforeCreate&&cC(e.beforeCreate,t,"bc");const{data:a,computed:i,methods:o,watch:l,provide:u,inject:f,created:c,beforeMount:h,mounted:g,beforeUpdate:p,updated:y,activated:C,deactivated:E,beforeDestroy:v,beforeUnmount:x,destroyed:w,unmounted:T,render:A,renderTracked:_,renderTriggered:D,errorCaptured:P,serverPrefetch:N,expose:B,inheritAttrs:G,components:F,directives:z,filters:M}=e;if(f&&FF(f,n,null),o)for(const I in o){const q=o[I];Tt(q)&&(n[I]=q.bind(r))}if(a){const I=a.call(r,r);Jt(I)&&(t.data=vc(I))}if(Eb=!0,i)for(const I in i){const q=i[I],ae=Tt(q)?q.bind(r,r):Tt(q.get)?q.get.bind(r,r):Ea,re=!Tt(q)&&Tt(q.set)?q.set.bind(r):Ea,K=sr({get:ae,set:re});Object.defineProperty(n,I,{enumerable:!0,configurable:!0,get:()=>K.value,set:W=>K.value=W})}if(l)for(const I in l)iP(l[I],n,r,I);if(u){const I=Tt(u)?u.call(r):u;Reflect.ownKeys(I).forEach(q=>{UF(q,I[q])})}c&&cC(c,t,"c");function k(I,q){bt(q)?q.forEach(ae=>I(ae.bind(r))):q&&I(q.bind(r))}if(k(LF,h),k(Sa,g),k(DF,p),k(_F,y),k(TF,C),k(SF,E),k(NF,P),k(PF,_),k(RF,D),k(nP,x),k(Aa,T),k(MF,N),bt(B))if(B.length){const I=t.exposed||(t.exposed={});B.forEach(q=>{Object.defineProperty(I,q,{get:()=>r[q],set:ae=>r[q]=ae})})}else t.exposed||(t.exposed={});A&&t.render===Ea&&(t.render=A),G!=null&&(t.inheritAttrs=G),F&&(t.components=F),z&&(t.directives=z),N&&tP(t)}function FF(t,e,r=Ea){bt(t)&&(t=Tb(t));for(const n in t){const a=t[n];let i;Jt(a)?"default"in a?i=Rl(a.from||n,a.default,!0):i=Rl(a.from||n):i=Rl(a),xr(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function cC(t,e,r){sa(bt(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function iP(t,e,r,n){let a=n.includes(".")?bP(r,n):()=>r[n];if(Cr(t)){const i=e[t];Tt(i)&&wr(a,i)}else if(Tt(t))wr(a,t.bind(r));else if(Jt(t))if(bt(t))t.forEach(i=>iP(i,e,r,n));else{const i=Tt(t.handler)?t.handler.bind(r):e[t.handler];Tt(i)&&wr(a,i,t)}}function oP(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:a,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let u;return l?u=l:!a.length&&!r&&!n?u=e:(u={},a.length&&a.forEach(f=>Uf(u,f,o,!0)),Uf(u,e,o)),Jt(e)&&i.set(e,u),u}function Uf(t,e,r,n=!1){const{mixins:a,extends:i}=e;i&&Uf(t,i,r,!0),a&&a.forEach(o=>Uf(t,o,r,!0));for(const o in e)if(!(n&&o==="expose")){const l=BF[o]||r&&r[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const BF={data:dC,props:hC,emits:hC,methods:wl,computed:wl,beforeCreate:En,created:En,beforeMount:En,mounted:En,beforeUpdate:En,updated:En,beforeDestroy:En,beforeUnmount:En,destroyed:En,unmounted:En,activated:En,deactivated:En,errorCaptured:En,serverPrefetch:En,components:wl,directives:wl,watch:zF,provide:dC,inject:qF};function dC(t,e){return e?t?function(){return Yr(Tt(t)?t.call(this,this):t,Tt(e)?e.call(this,this):e)}:e:t}function qF(t,e){return wl(Tb(t),Tb(e))}function Tb(t){if(bt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function En(t,e){return t?[...new Set([].concat(t,e))]:e}function wl(t,e){return t?Yr(Object.create(null),t,e):e}function hC(t,e){return t?bt(t)&&bt(e)?[...new Set([...t,...e])]:Yr(Object.create(null),fC(t),fC(e??{})):e}function zF(t,e){if(!t)return e;if(!e)return t;const r=Yr(Object.create(null),t);for(const n in e)r[n]=En(t[n],e[n]);return r}function sP(){return{app:null,config:{isNativeTag:L2,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let GF=0;function HF(t,e){return function(n,a=null){Tt(n)||(n=Yr({},n)),a!=null&&!Jt(a)&&(a=null);const i=sP(),o=new WeakSet,l=[];let u=!1;const f=i.app={_uid:GF++,_component:n,_props:a,_container:null,_context:i,_instance:null,version:SB,get config(){return i.config},set config(c){},use(c,...h){return o.has(c)||(c&&Tt(c.install)?(o.add(c),c.install(f,...h)):Tt(c)&&(o.add(c),c(f,...h))),f},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),f},component(c,h){return h?(i.components[c]=h,f):i.components[c]},directive(c,h){return h?(i.directives[c]=h,f):i.directives[c]},mount(c,h,g){if(!u){const p=f._ceVNode||ot(n,a);return p.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(p,c,g),u=!0,f._container=c,c.__vue_app__=f,xc(p.component)}},onUnmount(c){l.push(c)},unmount(){u&&(sa(l,f._instance,16),t(null,f._container),delete f._container.__vue_app__)},provide(c,h){return i.provides[c]=h,f},runWithContext(c){const h=go;go=f;try{return c()}finally{go=h}}};return f}}let go=null;function UF(t,e){if(Jr){let r=Jr.provides;const n=Jr.parent&&Jr.parent.provides;n===r&&(r=Jr.provides=Object.create(n)),r[t]=e}}function Rl(t,e,r=!1){const n=Jr||Vr;if(n||go){let a=go?go._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(a&&t in a)return a[t];if(arguments.length>1)return r&&Tt(e)?e.call(n&&n.proxy):e}}function WF(){return!!(Jr||Vr||go)}const lP={},uP=()=>Object.create(lP),fP=t=>Object.getPrototypeOf(t)===lP;function VF(t,e,r,n=!1){const a={},i=uP();t.propsDefaults=Object.create(null),cP(t,e,a,i);for(const o in t.propsOptions[0])o in a||(a[o]=void 0);r?t.props=n?a:oF(a):t.type.props?t.props=a:t.props=i,t.attrs=i}function $F(t,e,r,n){const{props:a,attrs:i,vnode:{patchFlag:o}}=t,l=Ot(a),[u]=t.propsOptions;let f=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let g=c[h];if(bc(t.emitsOptions,g))continue;const p=e[g];if(u)if(Ht(i,g))p!==i[g]&&(i[g]=p,f=!0);else{const y=Si(g);a[y]=Sb(u,l,y,p,t,!1)}else p!==i[g]&&(i[g]=p,f=!0)}}}else{cP(t,e,a,i)&&(f=!0);let c;for(const h in l)(!e||!Ht(e,h)&&((c=ki(h))===h||!Ht(e,c)))&&(u?r&&(r[h]!==void 0||r[c]!==void 0)&&(a[h]=Sb(u,l,h,void 0,t,!0)):delete a[h]);if(i!==l)for(const h in i)(!e||!Ht(e,h))&&(delete i[h],f=!0)}f&&Ua(t.attrs,"set","")}function cP(t,e,r,n){const[a,i]=t.propsOptions;let o=!1,l;if(e)for(let u in e){if(Ll(u))continue;const f=e[u];let c;a&&Ht(a,c=Si(u))?!i||!i.includes(c)?r[c]=f:(l||(l={}))[c]=f:bc(t.emitsOptions,u)||(!(u in n)||f!==n[u])&&(n[u]=f,o=!0)}if(i){const u=Ot(r),f=l||Zt;for(let c=0;c<i.length;c++){const h=i[c];r[h]=Sb(a,u,h,f[h],t,!Ht(f,h))}}return o}function Sb(t,e,r,n,a,i){const o=t[r];if(o!=null){const l=Ht(o,"default");if(l&&n===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Tt(u)){const{propsDefaults:f}=a;if(r in f)n=f[r];else{const c=nu(a);n=f[r]=u.call(null,e),c()}}else n=u;a.ce&&a.ce._setProp(r,n)}o[0]&&(i&&!l?n=!1:o[1]&&(n===""||n===ki(r))&&(n=!0))}return n}const YF=new WeakMap;function dP(t,e,r=!1){const n=r?YF:e.propsCache,a=n.get(t);if(a)return a;const i=t.props,o={},l=[];let u=!1;if(!Tt(t)){const c=h=>{u=!0;const[g,p]=dP(h,e,!0);Yr(o,g),p&&l.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!u)return Jt(t)&&n.set(t,cs),cs;if(bt(i))for(let c=0;c<i.length;c++){const h=Si(i[c]);vC(h)&&(o[h]=Zt)}else if(i)for(const c in i){const h=Si(c);if(vC(h)){const g=i[c],p=o[h]=bt(g)||Tt(g)?{type:g}:Yr({},g),y=p.type;let C=!1,E=!0;if(bt(y))for(let v=0;v<y.length;++v){const x=y[v],w=Tt(x)&&x.name;if(w==="Boolean"){C=!0;break}else w==="String"&&(E=!1)}else C=Tt(y)&&y.name==="Boolean";p[0]=C,p[1]=E,(C||Ht(p,"default"))&&l.push(h)}}const f=[o,l];return Jt(t)&&n.set(t,f),f}function vC(t){return t[0]!=="$"&&!Ll(t)}const u1=t=>t[0]==="_"||t==="$stable",f1=t=>bt(t)?t.map(xa):[xa(t)],XF=(t,e,r)=>{if(e._n)return e;const n=ht((...a)=>f1(e(...a)),r);return n._c=!1,n},hP=(t,e,r)=>{const n=t._ctx;for(const a in t){if(u1(a))continue;const i=t[a];if(Tt(i))e[a]=XF(a,i,n);else if(i!=null){const o=f1(i);e[a]=()=>o}}},vP=(t,e)=>{const r=f1(e);t.slots.default=()=>r},pP=(t,e,r)=>{for(const n in e)(r||!u1(n))&&(t[n]=e[n])},KF=(t,e,r)=>{const n=t.slots=uP();if(t.vnode.shapeFlag&32){const a=e._;a?(pP(n,e,r),r&&wR(n,"_",a,!0)):hP(e,n)}else e&&vP(t,e)},jF=(t,e,r)=>{const{vnode:n,slots:a}=t;let i=!0,o=Zt;if(n.shapeFlag&32){const l=e._;l?r&&l===1?i=!1:pP(a,e,r):(i=!e.$stable,hP(e,a)),o=e}else e&&(vP(t,e),o={default:1});if(i)for(const l in a)!u1(l)&&o[l]==null&&delete a[l]},In=fB;function ZF(t){return QF(t)}function QF(t,e){const r=cc();r.__VUE__=!0;const{insert:n,remove:a,patchProp:i,createElement:o,createText:l,createComment:u,setText:f,setElementText:c,parentNode:h,nextSibling:g,setScopeId:p=Ea,insertStaticContent:y}=t,C=($,ne,ie,ue=null,me=null,ge=null,Ee=void 0,he=null,de=!!ne.dynamicChildren)=>{if($===ne)return;$&&!uo($,ne)&&(ue=ee($),W($,me,ge,!0),$=null),ne.patchFlag===-2&&(de=!1,ne.dynamicChildren=null);const{type:be,ref:De,shapeFlag:Se}=ne;switch(be){case wc:E($,ne,ie,ue);break;case dn:v($,ne,ie,ue);break;case sh:$==null&&x(ne,ie,ue,Ee);break;case or:F($,ne,ie,ue,me,ge,Ee,he,de);break;default:Se&1?A($,ne,ie,ue,me,ge,Ee,he,de):Se&6?z($,ne,ie,ue,me,ge,Ee,he,de):(Se&64||Se&128)&&be.process($,ne,ie,ue,me,ge,Ee,he,de,oe)}De!=null&&me&&Hf(De,$&&$.ref,ge,ne||$,!ne)},E=($,ne,ie,ue)=>{if($==null)n(ne.el=l(ne.children),ie,ue);else{const me=ne.el=$.el;ne.children!==$.children&&f(me,ne.children)}},v=($,ne,ie,ue)=>{$==null?n(ne.el=u(ne.children||""),ie,ue):ne.el=$.el},x=($,ne,ie,ue)=>{[$.el,$.anchor]=y($.children,ne,ie,ue,$.el,$.anchor)},w=({el:$,anchor:ne},ie,ue)=>{let me;for(;$&&$!==ne;)me=g($),n($,ie,ue),$=me;n(ne,ie,ue)},T=({el:$,anchor:ne})=>{let ie;for(;$&&$!==ne;)ie=g($),a($),$=ie;a(ne)},A=($,ne,ie,ue,me,ge,Ee,he,de)=>{ne.type==="svg"?Ee="svg":ne.type==="math"&&(Ee="mathml"),$==null?_(ne,ie,ue,me,ge,Ee,he,de):N($,ne,me,ge,Ee,he,de)},_=($,ne,ie,ue,me,ge,Ee,he)=>{let de,be;const{props:De,shapeFlag:Se,transition:Re,dirs:Ie}=$;if(de=$.el=o($.type,ge,De&&De.is,De),Se&8?c(de,$.children):Se&16&&P($.children,de,null,ue,me,oh($,ge),Ee,he),Ie&&Qi($,null,ue,"created"),D(de,$,$.scopeId,Ee,ue),De){for(const Ze in De)Ze!=="value"&&!Ll(Ze)&&i(de,Ze,null,De[Ze],ge,ue);"value"in De&&i(de,"value",null,De.value,ge),(be=De.onVnodeBeforeMount)&&pa(be,ue,$)}Ie&&Qi($,null,ue,"beforeMount");const qe=JF(me,Re);qe&&Re.beforeEnter(de),n(de,ne,ie),((be=De&&De.onVnodeMounted)||qe||Ie)&&In(()=>{be&&pa(be,ue,$),qe&&Re.enter(de),Ie&&Qi($,null,ue,"mounted")},me)},D=($,ne,ie,ue,me)=>{if(ie&&p($,ie),ue)for(let ge=0;ge<ue.length;ge++)p($,ue[ge]);if(me){let ge=me.subTree;if(ne===ge||xP(ge.type)&&(ge.ssContent===ne||ge.ssFallback===ne)){const Ee=me.vnode;D($,Ee,Ee.scopeId,Ee.slotScopeIds,me.parent)}}},P=($,ne,ie,ue,me,ge,Ee,he,de=0)=>{for(let be=de;be<$.length;be++){const De=$[be]=he?mi($[be]):xa($[be]);C(null,De,ne,ie,ue,me,ge,Ee,he)}},N=($,ne,ie,ue,me,ge,Ee)=>{const he=ne.el=$.el;let{patchFlag:de,dynamicChildren:be,dirs:De}=ne;de|=$.patchFlag&16;const Se=$.props||Zt,Re=ne.props||Zt;let Ie;if(ie&&Ji(ie,!1),(Ie=Re.onVnodeBeforeUpdate)&&pa(Ie,ie,ne,$),De&&Qi(ne,$,ie,"beforeUpdate"),ie&&Ji(ie,!0),(Se.innerHTML&&Re.innerHTML==null||Se.textContent&&Re.textContent==null)&&c(he,""),be?B($.dynamicChildren,be,he,ie,ue,oh(ne,me),ge):Ee||q($,ne,he,null,ie,ue,oh(ne,me),ge,!1),de>0){if(de&16)G(he,Se,Re,ie,me);else if(de&2&&Se.class!==Re.class&&i(he,"class",null,Re.class,me),de&4&&i(he,"style",Se.style,Re.style,me),de&8){const qe=ne.dynamicProps;for(let Ze=0;Ze<qe.length;Ze++){const $e=qe[Ze],tt=Se[$e],Xe=Re[$e];(Xe!==tt||$e==="value")&&i(he,$e,tt,Xe,me,ie)}}de&1&&$.children!==ne.children&&c(he,ne.children)}else!Ee&&be==null&&G(he,Se,Re,ie,me);((Ie=Re.onVnodeUpdated)||De)&&In(()=>{Ie&&pa(Ie,ie,ne,$),De&&Qi(ne,$,ie,"updated")},ue)},B=($,ne,ie,ue,me,ge,Ee)=>{for(let he=0;he<ne.length;he++){const de=$[he],be=ne[he],De=de.el&&(de.type===or||!uo(de,be)||de.shapeFlag&198)?h(de.el):ie;C(de,be,De,null,ue,me,ge,Ee,!0)}},G=($,ne,ie,ue,me)=>{if(ne!==ie){if(ne!==Zt)for(const ge in ne)!Ll(ge)&&!(ge in ie)&&i($,ge,ne[ge],null,me,ue);for(const ge in ie){if(Ll(ge))continue;const Ee=ie[ge],he=ne[ge];Ee!==he&&ge!=="value"&&i($,ge,he,Ee,me,ue)}"value"in ie&&i($,"value",ne.value,ie.value,me)}},F=($,ne,ie,ue,me,ge,Ee,he,de)=>{const be=ne.el=$?$.el:l(""),De=ne.anchor=$?$.anchor:l("");let{patchFlag:Se,dynamicChildren:Re,slotScopeIds:Ie}=ne;Ie&&(he=he?he.concat(Ie):Ie),$==null?(n(be,ie,ue),n(De,ie,ue),P(ne.children||[],ie,De,me,ge,Ee,he,de)):Se>0&&Se&64&&Re&&$.dynamicChildren?(B($.dynamicChildren,Re,ie,me,ge,Ee,he),(ne.key!=null||me&&ne===me.subTree)&&gP($,ne,!0)):q($,ne,ie,De,me,ge,Ee,he,de)},z=($,ne,ie,ue,me,ge,Ee,he,de)=>{ne.slotScopeIds=he,$==null?ne.shapeFlag&512?me.ctx.activate(ne,ie,ue,Ee,de):M(ne,ie,ue,me,ge,Ee,de):R($,ne,de)},M=($,ne,ie,ue,me,ge,Ee)=>{const he=$.component=yB($,ue,me);if(yc($)&&(he.ctx.renderer=oe),bB(he,!1,Ee),he.asyncDep){if(me&&me.registerDep(he,k,Ee),!$.el){const de=he.subTree=ot(dn);v(null,de,ne,ie)}}else k(he,$,ne,ie,me,ge,Ee)},R=($,ne,ie)=>{const ue=ne.component=$.component;if(lB($,ne,ie))if(ue.asyncDep&&!ue.asyncResolved){I(ue,ne,ie);return}else ue.next=ne,ue.update();else ne.el=$.el,ue.vnode=ne},k=($,ne,ie,ue,me,ge,Ee)=>{const he=()=>{if($.isMounted){let{next:Se,bu:Re,u:Ie,parent:qe,vnode:Ze}=$;{const ve=yP($);if(ve){Se&&(Se.el=Ze.el,I($,Se,Ee)),ve.asyncDep.then(()=>{$.isUnmounted||he()});return}}let $e=Se,tt;Ji($,!1),Se?(Se.el=Ze.el,I($,Se,Ee)):Se=Ze,Re&&yf(Re),(tt=Se.props&&Se.props.onVnodeBeforeUpdate)&&pa(tt,qe,Se,Ze),Ji($,!0);const Xe=gC($),We=$.subTree;$.subTree=Xe,C(We,Xe,h(We.el),ee(We),$,me,ge),Se.el=Xe.el,$e===null&&uB($,Xe.el),Ie&&In(Ie,me),(tt=Se.props&&Se.props.onVnodeUpdated)&&In(()=>pa(tt,qe,Se,Ze),me)}else{let Se;const{el:Re,props:Ie}=ne,{bm:qe,m:Ze,parent:$e,root:tt,type:Xe}=$,We=vs(ne);Ji($,!1),qe&&yf(qe),!We&&(Se=Ie&&Ie.onVnodeBeforeMount)&&pa(Se,$e,ne),Ji($,!0);{tt.ce&&tt.ce._injectChildStyle(Xe);const ve=$.subTree=gC($);C(null,ve,ie,ue,$,me,ge),ne.el=ve.el}if(Ze&&In(Ze,me),!We&&(Se=Ie&&Ie.onVnodeMounted)){const ve=ne;In(()=>pa(Se,$e,ve),me)}(ne.shapeFlag&256||$e&&vs($e.vnode)&&$e.vnode.shapeFlag&256)&&$.a&&In($.a,me),$.isMounted=!0,ne=ie=ue=null}};$.scope.on();const de=$.effect=new DR(he);$.scope.off();const be=$.update=de.run.bind(de),De=$.job=de.runIfDirty.bind(de);De.i=$,De.id=$.uid,de.scheduler=()=>l1(De),Ji($,!0),be()},I=($,ne,ie)=>{ne.component=$;const ue=$.vnode.props;$.vnode=ne,$.next=null,$F($,ne.props,ue,ie),jF($,ne.children,ie),$a(),lC($),Ya()},q=($,ne,ie,ue,me,ge,Ee,he,de=!1)=>{const be=$&&$.children,De=$?$.shapeFlag:0,Se=ne.children,{patchFlag:Re,shapeFlag:Ie}=ne;if(Re>0){if(Re&128){re(be,Se,ie,ue,me,ge,Ee,he,de);return}else if(Re&256){ae(be,Se,ie,ue,me,ge,Ee,he,de);return}}Ie&8?(De&16&&X(be,me,ge),Se!==be&&c(ie,Se)):De&16?Ie&16?re(be,Se,ie,ue,me,ge,Ee,he,de):X(be,me,ge,!0):(De&8&&c(ie,""),Ie&16&&P(Se,ie,ue,me,ge,Ee,he,de))},ae=($,ne,ie,ue,me,ge,Ee,he,de)=>{$=$||cs,ne=ne||cs;const be=$.length,De=ne.length,Se=Math.min(be,De);let Re;for(Re=0;Re<Se;Re++){const Ie=ne[Re]=de?mi(ne[Re]):xa(ne[Re]);C($[Re],Ie,ie,null,me,ge,Ee,he,de)}be>De?X($,me,ge,!0,!1,Se):P(ne,ie,ue,me,ge,Ee,he,de,Se)},re=($,ne,ie,ue,me,ge,Ee,he,de)=>{let be=0;const De=ne.length;let Se=$.length-1,Re=De-1;for(;be<=Se&&be<=Re;){const Ie=$[be],qe=ne[be]=de?mi(ne[be]):xa(ne[be]);if(uo(Ie,qe))C(Ie,qe,ie,null,me,ge,Ee,he,de);else break;be++}for(;be<=Se&&be<=Re;){const Ie=$[Se],qe=ne[Re]=de?mi(ne[Re]):xa(ne[Re]);if(uo(Ie,qe))C(Ie,qe,ie,null,me,ge,Ee,he,de);else break;Se--,Re--}if(be>Se){if(be<=Re){const Ie=Re+1,qe=Ie<De?ne[Ie].el:ue;for(;be<=Re;)C(null,ne[be]=de?mi(ne[be]):xa(ne[be]),ie,qe,me,ge,Ee,he,de),be++}}else if(be>Re)for(;be<=Se;)W($[be],me,ge,!0),be++;else{const Ie=be,qe=be,Ze=new Map;for(be=qe;be<=Re;be++){const we=ne[be]=de?mi(ne[be]):xa(ne[be]);we.key!=null&&Ze.set(we.key,be)}let $e,tt=0;const Xe=Re-qe+1;let We=!1,ve=0;const j=new Array(Xe);for(be=0;be<Xe;be++)j[be]=0;for(be=Ie;be<=Se;be++){const we=$[be];if(tt>=Xe){W(we,me,ge,!0);continue}let xe;if(we.key!=null)xe=Ze.get(we.key);else for($e=qe;$e<=Re;$e++)if(j[$e-qe]===0&&uo(we,ne[$e])){xe=$e;break}xe===void 0?W(we,me,ge,!0):(j[xe-qe]=be+1,xe>=ve?ve=xe:We=!0,C(we,ne[xe],ie,null,me,ge,Ee,he,de),tt++)}const pe=We?eB(j):cs;for($e=pe.length-1,be=Xe-1;be>=0;be--){const we=qe+be,xe=ne[we],Ce=we+1<De?ne[we+1].el:ue;j[be]===0?C(null,xe,ie,Ce,me,ge,Ee,he,de):We&&($e<0||be!==pe[$e]?K(xe,ie,Ce,2):$e--)}}},K=($,ne,ie,ue,me=null)=>{const{el:ge,type:Ee,transition:he,children:de,shapeFlag:be}=$;if(be&6){K($.component.subTree,ne,ie,ue);return}if(be&128){$.suspense.move(ne,ie,ue);return}if(be&64){Ee.move($,ne,ie,oe);return}if(Ee===or){n(ge,ne,ie);for(let Se=0;Se<de.length;Se++)K(de[Se],ne,ie,ue);n($.anchor,ne,ie);return}if(Ee===sh){w($,ne,ie);return}if(ue!==2&&be&1&&he)if(ue===0)he.beforeEnter(ge),n(ge,ne,ie),In(()=>he.enter(ge),me);else{const{leave:Se,delayLeave:Re,afterLeave:Ie}=he,qe=()=>{$.ctx.isUnmounted?a(ge):n(ge,ne,ie)},Ze=()=>{Se(ge,()=>{qe(),Ie&&Ie()})};Re?Re(ge,qe,Ze):Ze()}else n(ge,ne,ie)},W=($,ne,ie,ue=!1,me=!1)=>{const{type:ge,props:Ee,ref:he,children:de,dynamicChildren:be,shapeFlag:De,patchFlag:Se,dirs:Re,cacheIndex:Ie}=$;if(Se===-2&&(me=!1),he!=null&&($a(),Hf(he,null,ie,$,!0),Ya()),Ie!=null&&(ne.renderCache[Ie]=void 0),De&256){ne.ctx.deactivate($);return}const qe=De&1&&Re,Ze=!vs($);let $e;if(Ze&&($e=Ee&&Ee.onVnodeBeforeUnmount)&&pa($e,ne,$),De&6)V($.component,ie,ue);else{if(De&128){$.suspense.unmount(ie,ue);return}qe&&Qi($,null,ne,"beforeUnmount"),De&64?$.type.remove($,ne,ie,oe,ue):be&&!be.hasOnce&&(ge!==or||Se>0&&Se&64)?X(be,ne,ie,!1,!0):(ge===or&&Se&384||!me&&De&16)&&X(de,ne,ie),ue&&Z($)}(Ze&&($e=Ee&&Ee.onVnodeUnmounted)||qe)&&In(()=>{$e&&pa($e,ne,$),qe&&Qi($,null,ne,"unmounted")},ie)},Z=$=>{const{type:ne,el:ie,anchor:ue,transition:me}=$;if(ne===or){U(ie,ue);return}if(ne===sh){T($);return}const ge=()=>{a(ie),me&&!me.persisted&&me.afterLeave&&me.afterLeave()};if($.shapeFlag&1&&me&&!me.persisted){const{leave:Ee,delayLeave:he}=me,de=()=>Ee(ie,ge);he?he($.el,ge,de):de()}else ge()},U=($,ne)=>{let ie;for(;$!==ne;)ie=g($),a($),$=ie;a(ne)},V=($,ne,ie)=>{const{bum:ue,scope:me,job:ge,subTree:Ee,um:he,m:de,a:be,parent:De,slots:{__:Se}}=$;pC(de),pC(be),ue&&yf(ue),De&&bt(Se)&&Se.forEach(Re=>{De.renderCache[Re]=void 0}),me.stop(),ge&&(ge.flags|=8,W(Ee,$,ne,ie)),he&&In(he,ne),In(()=>{$.isUnmounted=!0},ne),ne&&ne.pendingBranch&&!ne.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===ne.pendingId&&(ne.deps--,ne.deps===0&&ne.resolve())},X=($,ne,ie,ue=!1,me=!1,ge=0)=>{for(let Ee=ge;Ee<$.length;Ee++)W($[Ee],ne,ie,ue,me)},ee=$=>{if($.shapeFlag&6)return ee($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const ne=g($.anchor||$.el),ie=ne&&ne[wF];return ie?g(ie):ne};let se=!1;const te=($,ne,ie)=>{$==null?ne._vnode&&W(ne._vnode,null,null,!0):C(ne._vnode||null,$,ne,null,null,null,ie),ne._vnode=$,se||(se=!0,lC(),$R(),se=!1)},oe={p:C,um:W,m:K,r:Z,mt:M,mc:P,pc:q,pbc:B,n:ee,o:t};return{render:te,hydrate:void 0,createApp:HF(te)}}function oh({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function Ji({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function JF(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function gP(t,e,r=!1){const n=t.children,a=e.children;if(bt(n)&&bt(a))for(let i=0;i<n.length;i++){const o=n[i];let l=a[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=a[i]=mi(a[i]),l.el=o.el),!r&&l.patchFlag!==-2&&gP(o,l)),l.type===wc&&(l.el=o.el),l.type===dn&&!l.el&&(l.el=o.el)}}function eB(t){const e=t.slice(),r=[0];let n,a,i,o,l;const u=t.length;for(n=0;n<u;n++){const f=t[n];if(f!==0){if(a=r[r.length-1],t[a]<f){e[n]=a,r.push(n);continue}for(i=0,o=r.length-1;i<o;)l=i+o>>1,t[r[l]]<f?i=l+1:o=l;f<t[r[i]]&&(i>0&&(e[n]=r[i-1]),r[i]=n)}}for(i=r.length,o=r[i-1];i-- >0;)r[i]=o,o=e[o];return r}function yP(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:yP(e)}function pC(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const tB=Symbol.for("v-scx"),rB=()=>Rl(tB);function wr(t,e,r){return mP(t,e,r)}function mP(t,e,r=Zt){const{immediate:n,deep:a,flush:i,once:o}=r,l=Yr({},r),u=e&&n||!e&&i!=="post";let f;if(Ul){if(i==="sync"){const p=rB();f=p.__watcherHandles||(p.__watcherHandles=[])}else if(!u){const p=()=>{};return p.stop=Ea,p.resume=Ea,p.pause=Ea,p}}const c=Jr;l.call=(p,y,C)=>sa(p,c,y,C);let h=!1;i==="post"?l.scheduler=p=>{In(p,c&&c.suspense)}:i!=="sync"&&(h=!0,l.scheduler=(p,y)=>{y?p():l1(p)}),l.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const g=gF(t,e,l);return Ul&&(f?f.push(g):u&&g()),g}function nB(t,e,r){const n=this.proxy,a=Cr(t)?t.includes(".")?bP(n,t):()=>n[t]:t.bind(n,n);let i;Tt(e)?i=e:(i=e.handler,r=e);const o=nu(this),l=mP(a,i.bind(n),r);return o(),l}function bP(t,e){const r=e.split(".");return()=>{let n=t;for(let a=0;a<r.length&&n;a++)n=n[r[a]];return n}}const aB=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Si(e)}Modifiers`]||t[`${ki(e)}Modifiers`];function iB(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Zt;let a=r;const i=e.startsWith("update:"),o=i&&aB(n,e.slice(7));o&&(o.trim&&(a=r.map(c=>Cr(c)?c.trim():c)),o.number&&(a=r.map(yb)));let l,u=n[l=Jd(e)]||n[l=Jd(Si(e))];!u&&i&&(u=n[l=Jd(ki(e))]),u&&sa(u,t,6,a);const f=n[l+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,sa(f,t,6,a)}}function wP(t,e,r=!1){const n=e.emitsCache,a=n.get(t);if(a!==void 0)return a;const i=t.emits;let o={},l=!1;if(!Tt(t)){const u=f=>{const c=wP(f,e,!0);c&&(l=!0,Yr(o,c))};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!l?(Jt(t)&&n.set(t,null),null):(bt(i)?i.forEach(u=>o[u]=null):Yr(o,i),Jt(t)&&n.set(t,o),o)}function bc(t,e){return!t||!lc(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ht(t,e[0].toLowerCase()+e.slice(1))||Ht(t,ki(e))||Ht(t,e))}function gC(t){const{type:e,vnode:r,proxy:n,withProxy:a,propsOptions:[i],slots:o,attrs:l,emit:u,render:f,renderCache:c,props:h,data:g,setupState:p,ctx:y,inheritAttrs:C}=t,E=Gf(t);let v,x;try{if(r.shapeFlag&4){const T=a||n,A=T;v=xa(f.call(A,T,c,h,p,g,y)),x=l}else{const T=e;v=xa(T.length>1?T(h,{attrs:l,slots:o,emit:u}):T(h,null)),x=e.props?l:oB(l)}}catch(T){Pl.length=0,pc(T,t,1),v=ot(dn)}let w=v;if(x&&C!==!1){const T=Object.keys(x),{shapeFlag:A}=w;T.length&&A&7&&(i&&T.some(Zb)&&(x=sB(x,i)),w=Li(w,x,!1,!0))}return r.dirs&&(w=Li(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(r.dirs):r.dirs),r.transition&&zl(w,r.transition),v=w,Gf(E),v}const oB=t=>{let e;for(const r in t)(r==="class"||r==="style"||lc(r))&&((e||(e={}))[r]=t[r]);return e},sB=(t,e)=>{const r={};for(const n in t)(!Zb(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function lB(t,e,r){const{props:n,children:a,component:i}=t,{props:o,children:l,patchFlag:u}=e,f=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&u>=0){if(u&1024)return!0;if(u&16)return n?yC(n,o,f):!!o;if(u&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const g=c[h];if(o[g]!==n[g]&&!bc(f,g))return!0}}}else return(a||l)&&(!l||!l.$stable)?!0:n===o?!1:n?o?yC(n,o,f):!0:!!o;return!1}function yC(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let a=0;a<n.length;a++){const i=n[a];if(e[i]!==t[i]&&!bc(r,i))return!0}return!1}function uB({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const xP=t=>t.__isSuspense;function fB(t,e){e&&e.pendingBranch?bt(t)?e.effects.push(...t):e.effects.push(t):bF(t)}const or=Symbol.for("v-fgt"),wc=Symbol.for("v-txt"),dn=Symbol.for("v-cmt"),sh=Symbol.for("v-stc"),Pl=[];let Fn=null;function ft(t=!1){Pl.push(Fn=t?null:[])}function cB(){Pl.pop(),Fn=Pl[Pl.length-1]||null}let Gl=1;function mC(t,e=!1){Gl+=t,t<0&&Fn&&e&&(Fn.hasOnce=!0)}function CP(t){return t.dynamicChildren=Gl>0?Fn||cs:null,cB(),Gl>0&&Fn&&Fn.push(t),t}function gt(t,e,r,n,a,i){return CP(_e(t,e,r,n,a,i,!0))}function Ka(t,e,r,n,a){return CP(ot(t,e,r,n,a,!0))}function Hl(t){return t?t.__v_isVNode===!0:!1}function uo(t,e){return t.type===e.type&&t.key===e.key}const EP=({key:t})=>t??null,mf=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Cr(t)||xr(t)||Tt(t)?{i:Vr,r:t,k:e,f:!!r}:t:null);function _e(t,e=null,r=null,n=0,a=null,i=t===or?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&EP(e),ref:e&&mf(e),scopeId:XR,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Vr};return l?(c1(u,r),i&128&&t.normalize(u)):r&&(u.shapeFlag|=Cr(r)?8:16),Gl>0&&!o&&Fn&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Fn.push(u),u}const ot=dB;function dB(t,e=null,r=null,n=0,a=null,i=!1){if((!t||t===kF)&&(t=dn),Hl(t)){const l=Li(t,e,!0);return r&&c1(l,r),Gl>0&&!i&&Fn&&(l.shapeFlag&6?Fn[Fn.indexOf(t)]=l:Fn.push(l)),l.patchFlag=-2,l}if(EB(t)&&(t=t.__vccOpts),e){e=hB(e);let{class:l,style:u}=e;l&&!Cr(l)&&(e.class=cr(l)),Jt(u)&&(o1(u)&&!bt(u)&&(u=Yr({},u)),e.style=xi(u))}const o=Cr(t)?1:xP(t)?128:KR(t)?64:Jt(t)?4:Tt(t)?2:0;return _e(t,e,r,n,a,o,i,!0)}function hB(t){return t?o1(t)||fP(t)?Yr({},t):t:null}function Li(t,e,r=!1,n=!1){const{props:a,ref:i,patchFlag:o,children:l,transition:u}=t,f=e?vB(a||{},e):a,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&EP(f),ref:e&&e.ref?r&&i?bt(i)?i.concat(mf(e)):[i,mf(e)]:mf(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==or?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Li(t.ssContent),ssFallback:t.ssFallback&&Li(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&n&&zl(c,u.clone(c)),c}function At(t=" ",e=0){return ot(wc,null,t,e)}function Wr(t="",e=!1){return e?(ft(),Ka(dn,null,t)):ot(dn,null,t)}function xa(t){return t==null||typeof t=="boolean"?ot(dn):bt(t)?ot(or,null,t.slice()):Hl(t)?mi(t):ot(wc,null,String(t))}function mi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Li(t)}function c1(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(bt(e))r=16;else if(typeof e=="object")if(n&65){const a=e.default;a&&(a._c&&(a._d=!1),c1(t,a()),a._c&&(a._d=!0));return}else{r=32;const a=e._;!a&&!fP(e)?e._ctx=Vr:a===3&&Vr&&(Vr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Tt(e)?(e={default:e,_ctx:Vr},r=32):(e=String(e),n&64?(r=16,e=[At(e)]):r=8);t.children=e,t.shapeFlag|=r}function vB(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const a in n)if(a==="class")e.class!==n.class&&(e.class=cr([e.class,n.class]));else if(a==="style")e.style=xi([e.style,n.style]);else if(lc(a)){const i=e[a],o=n[a];o&&i!==o&&!(bt(i)&&i.includes(o))&&(e[a]=i?[].concat(i,o):o)}else a!==""&&(e[a]=n[a])}return e}function pa(t,e,r,n=null){sa(t,e,7,[r,n])}const pB=sP();let gB=0;function yB(t,e,r){const n=t.type,a=(e?e.appContext:t.appContext)||pB,i={uid:gB++,vnode:t,type:n,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new SR(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dP(n,a),emitsOptions:wP(n,a),emit:null,emitted:null,propsDefaults:Zt,inheritAttrs:n.inheritAttrs,ctx:Zt,data:Zt,props:Zt,attrs:Zt,slots:Zt,refs:Zt,setupState:Zt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=iB.bind(null,i),t.ce&&t.ce(i),i}let Jr=null;const mB=()=>Jr||Vr;let Wf,Ab;{const t=cc(),e=(r,n)=>{let a;return(a=t[r])||(a=t[r]=[]),a.push(n),i=>{a.length>1?a.forEach(o=>o(i)):a[0](i)}};Wf=e("__VUE_INSTANCE_SETTERS__",r=>Jr=r),Ab=e("__VUE_SSR_SETTERS__",r=>Ul=r)}const nu=t=>{const e=Jr;return Wf(t),t.scope.on(),()=>{t.scope.off(),Wf(e)}},bC=()=>{Jr&&Jr.scope.off(),Wf(null)};function TP(t){return t.vnode.shapeFlag&4}let Ul=!1;function bB(t,e=!1,r=!1){e&&Ab(e);const{props:n,children:a}=t.vnode,i=TP(t);VF(t,n,i,e),KF(t,a,r||e);const o=i?wB(t,e):void 0;return e&&Ab(!1),o}function wB(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,OF);const{setup:n}=r;if(n){$a();const a=t.setupContext=n.length>1?CB(t):null,i=nu(t),o=ru(n,t,0,[t.props,a]),l=gR(o);if(Ya(),i(),(l||t.sp)&&!vs(t)&&tP(t),l){if(o.then(bC,bC),e)return o.then(u=>{wC(t,u)}).catch(u=>{pc(u,t,0)});t.asyncDep=o}else wC(t,o)}else SP(t)}function wC(t,e,r){Tt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Jt(e)&&(t.setupState=UR(e)),SP(t)}function SP(t,e,r){const n=t.type;t.render||(t.render=n.render||Ea);{const a=nu(t);$a();try{IF(t)}finally{Ya(),a()}}}const xB={get(t,e){return cn(t,"get",""),t[e]}};function CB(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,xB),slots:t.slots,emit:t.emit,expose:e}}function xc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(UR(s1(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Ml)return Ml[r](t)},has(e,r){return r in e||r in Ml}})):t.proxy}function EB(t){return Tt(t)&&"__vccOpts"in t}const sr=(t,e)=>vF(t,e,Ul);function TB(t,e,r){const n=arguments.length;return n===2?Jt(e)&&!bt(e)?Hl(e)?ot(t,null,[e]):ot(t,e):ot(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Hl(r)&&(r=[r]),ot(t,e,r))}const SB="3.5.15";/**
* @vue/runtime-dom v3.5.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Lb;const xC=typeof window<"u"&&window.trustedTypes;if(xC)try{Lb=xC.createPolicy("vue",{createHTML:t=>t})}catch{}const AP=Lb?t=>Lb.createHTML(t):t=>t,AB="http://www.w3.org/2000/svg",LB="http://www.w3.org/1998/Math/MathML",Ga=typeof document<"u"?document:null,CC=Ga&&Ga.createElement("template"),DB={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const a=e==="svg"?Ga.createElementNS(AB,t):e==="mathml"?Ga.createElementNS(LB,t):r?Ga.createElement(t,{is:r}):Ga.createElement(t);return t==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:t=>Ga.createTextNode(t),createComment:t=>Ga.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ga.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,a,i){const o=r?r.previousSibling:e.lastChild;if(a&&(a===i||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),r),!(a===i||!(a=a.nextSibling)););else{CC.innerHTML=AP(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const l=CC.content;if(n==="svg"||n==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},di="transition",cl="animation",Wl=Symbol("_vtc"),LP={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},_B=Yr({},jR,LP),MB=t=>(t.displayName="Transition",t.props=_B,t),d1=MB((t,{slots:e})=>TB(EF,RB(t),e)),eo=(t,e=[])=>{bt(t)?t.forEach(r=>r(...e)):t&&t(...e)},EC=t=>t?bt(t)?t.some(e=>e.length>1):t.length>1:!1;function RB(t){const e={};for(const F in t)F in LP||(e[F]=t[F]);if(t.css===!1)return e;const{name:r="v",type:n,duration:a,enterFromClass:i=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:l=`${r}-enter-to`,appearFromClass:u=i,appearActiveClass:f=o,appearToClass:c=l,leaveFromClass:h=`${r}-leave-from`,leaveActiveClass:g=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=t,y=PB(a),C=y&&y[0],E=y&&y[1],{onBeforeEnter:v,onEnter:x,onEnterCancelled:w,onLeave:T,onLeaveCancelled:A,onBeforeAppear:_=v,onAppear:D=x,onAppearCancelled:P=w}=e,N=(F,z,M,R)=>{F._enterCancelled=R,to(F,z?c:l),to(F,z?f:o),M&&M()},B=(F,z)=>{F._isLeaving=!1,to(F,h),to(F,p),to(F,g),z&&z()},G=F=>(z,M)=>{const R=F?D:x,k=()=>N(z,F,M);eo(R,[z,k]),TC(()=>{to(z,F?u:i),Ba(z,F?c:l),EC(R)||SC(z,n,C,k)})};return Yr(e,{onBeforeEnter(F){eo(v,[F]),Ba(F,i),Ba(F,o)},onBeforeAppear(F){eo(_,[F]),Ba(F,u),Ba(F,f)},onEnter:G(!1),onAppear:G(!0),onLeave(F,z){F._isLeaving=!0;const M=()=>B(F,z);Ba(F,h),F._enterCancelled?(Ba(F,g),DC()):(DC(),Ba(F,g)),TC(()=>{F._isLeaving&&(to(F,h),Ba(F,p),EC(T)||SC(F,n,E,M))}),eo(T,[F,M])},onEnterCancelled(F){N(F,!1,void 0,!0),eo(w,[F])},onAppearCancelled(F){N(F,!0,void 0,!0),eo(P,[F])},onLeaveCancelled(F){B(F),eo(A,[F])}})}function PB(t){if(t==null)return null;if(Jt(t))return[lh(t.enter),lh(t.leave)];{const e=lh(t);return[e,e]}}function lh(t){return P2(t)}function Ba(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[Wl]||(t[Wl]=new Set)).add(e)}function to(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[Wl];r&&(r.delete(e),r.size||(t[Wl]=void 0))}function TC(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let NB=0;function SC(t,e,r,n){const a=t._endId=++NB,i=()=>{a===t._endId&&n()};if(r!=null)return setTimeout(i,r);const{type:o,timeout:l,propCount:u}=kB(t,e);if(!o)return n();const f=o+"end";let c=0;const h=()=>{t.removeEventListener(f,g),i()},g=p=>{p.target===t&&++c>=u&&h()};setTimeout(()=>{c<u&&h()},l+1),t.addEventListener(f,g)}function kB(t,e){const r=window.getComputedStyle(t),n=y=>(r[y]||"").split(", "),a=n(`${di}Delay`),i=n(`${di}Duration`),o=AC(a,i),l=n(`${cl}Delay`),u=n(`${cl}Duration`),f=AC(l,u);let c=null,h=0,g=0;e===di?o>0&&(c=di,h=o,g=i.length):e===cl?f>0&&(c=cl,h=f,g=u.length):(h=Math.max(o,f),c=h>0?o>f?di:cl:null,g=c?c===di?i.length:u.length:0);const p=c===di&&/\b(transform|all)(,|$)/.test(n(`${di}Property`).toString());return{type:c,timeout:h,propCount:g,hasTransform:p}}function AC(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>LC(r)+LC(t[n])))}function LC(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function DC(){return document.body.offsetHeight}function OB(t,e,r){const n=t[Wl];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const Vf=Symbol("_vod"),DP=Symbol("_vsh"),qa={beforeMount(t,{value:e},{transition:r}){t[Vf]=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):dl(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:n}){!e!=!r&&(n?e?(n.beforeEnter(t),dl(t,!0),n.enter(t)):n.leave(t,()=>{dl(t,!1)}):dl(t,e))},beforeUnmount(t,{value:e}){dl(t,e)}};function dl(t,e){t.style.display=e?t[Vf]:"none",t[DP]=!e}const IB=Symbol(""),FB=/(^|;)\s*display\s*:/;function BB(t,e,r){const n=t.style,a=Cr(r);let i=!1;if(r&&!a){if(e)if(Cr(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();r[l]==null&&bf(n,l,"")}else for(const o in e)r[o]==null&&bf(n,o,"");for(const o in r)o==="display"&&(i=!0),bf(n,o,r[o])}else if(a){if(e!==r){const o=n[IB];o&&(r+=";"+o),n.cssText=r,i=FB.test(r)}}else e&&t.removeAttribute("style");Vf in t&&(t[Vf]=i?n.display:"",t[DP]&&(n.display="none"))}const _C=/\s*!important$/;function bf(t,e,r){if(bt(r))r.forEach(n=>bf(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=qB(t,e);_C.test(r)?t.setProperty(ki(n),r.replace(_C,""),"important"):t[n]=r}}const MC=["Webkit","Moz","ms"],uh={};function qB(t,e){const r=uh[e];if(r)return r;let n=Si(e);if(n!=="filter"&&n in t)return uh[e]=n;n=bR(n);for(let a=0;a<MC.length;a++){const i=MC[a]+n;if(i in t)return uh[e]=i}return e}const RC="http://www.w3.org/1999/xlink";function PC(t,e,r,n,a,i=B2(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(RC,e.slice(6,e.length)):t.setAttributeNS(RC,e,r):r==null||i&&!xR(r)?t.removeAttribute(e):t.setAttribute(e,i?"":oa(r)?String(r):r)}function NC(t,e,r,n,a){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?AP(r):r);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,u=r==null?t.type==="checkbox"?"on":"":String(r);(l!==u||!("_value"in t))&&(t.value=u),r==null&&t.removeAttribute(e),t._value=r;return}let o=!1;if(r===""||r==null){const l=typeof t[e];l==="boolean"?r=xR(r):r==null&&l==="string"?(r="",o=!0):l==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(a||e)}function fo(t,e,r,n){t.addEventListener(e,r,n)}function zB(t,e,r,n){t.removeEventListener(e,r,n)}const kC=Symbol("_vei");function GB(t,e,r,n,a=null){const i=t[kC]||(t[kC]={}),o=i[e];if(n&&o)o.value=n;else{const[l,u]=HB(e);if(n){const f=i[e]=VB(n,a);fo(t,l,f,u)}else o&&(zB(t,l,o,u),i[e]=void 0)}}const OC=/(?:Once|Passive|Capture)$/;function HB(t){let e;if(OC.test(t)){e={};let n;for(;n=t.match(OC);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ki(t.slice(2)),e]}let fh=0;const UB=Promise.resolve(),WB=()=>fh||(UB.then(()=>fh=0),fh=Date.now());function VB(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;sa($B(n,r.value),e,5,[n])};return r.value=t,r.attached=WB(),r}function $B(t,e){if(bt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>a=>!a._stopped&&n&&n(a))}else return e}const IC=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,YB=(t,e,r,n,a,i)=>{const o=a==="svg";e==="class"?OB(t,n,o):e==="style"?BB(t,r,n):lc(e)?Zb(e)||GB(t,e,r,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):XB(t,e,n,o))?(NC(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&PC(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Cr(n))?NC(t,Si(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),PC(t,e,n,o))};function XB(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&IC(e)&&Tt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return IC(e)&&Cr(r)?!1:e in t}const $f=t=>{const e=t.props["onUpdate:modelValue"]||!1;return bt(e)?r=>yf(e,r):e};function KB(t){t.target.composing=!0}function FC(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const gs=Symbol("_assign"),jB={created(t,{modifiers:{lazy:e,trim:r,number:n}},a){t[gs]=$f(a);const i=n||a.props&&a.props.type==="number";fo(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;r&&(l=l.trim()),i&&(l=yb(l)),t[gs](l)}),r&&fo(t,"change",()=>{t.value=t.value.trim()}),e||(fo(t,"compositionstart",KB),fo(t,"compositionend",FC),fo(t,"change",FC))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:a,number:i}},o){if(t[gs]=$f(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?yb(t.value):t.value,u=e??"";l!==u&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||a&&t.value.trim()===u)||(t.value=u))}},_P={deep:!0,created(t,e,r){t[gs]=$f(r),fo(t,"change",()=>{const n=t._modelValue,a=ZB(t),i=t.checked,o=t[gs];if(bt(n)){const l=CR(n,a),u=l!==-1;if(i&&!u)o(n.concat(a));else if(!i&&u){const f=[...n];f.splice(l,1),o(f)}}else if(uc(n)){const l=new Set(n);i?l.add(a):l.delete(a),o(l)}else o(MP(t,i))})},mounted:BC,beforeUpdate(t,e,r){t[gs]=$f(r),BC(t,e,r)}};function BC(t,{value:e,oldValue:r},n){t._modelValue=e;let a;if(bt(e))a=CR(e,n.props.value)>-1;else if(uc(e))a=e.has(n.props.value);else{if(e===r)return;a=dc(e,MP(t,!0))}t.checked!==a&&(t.checked=a)}function ZB(t){return"_value"in t?t._value:t.value}function MP(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const QB=["ctrl","shift","alt","meta"],JB={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>QB.some(r=>t[`${r}Key`]&&!e.includes(r))},kr=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(a,...i)=>{for(let o=0;o<e.length;o++){const l=JB[e[o]];if(l&&l(a,e))return}return t(a,...i)})},eq={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qC=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=a=>{if(!("key"in a))return;const i=ki(a.key);if(e.some(o=>o===i||eq[o]===i))return t(a)})},tq=Yr({patchProp:YB},DB);let zC;function rq(){return zC||(zC=ZF(tq))}const nq=(...t)=>{const e=rq().createApp(...t),{mount:r}=e;return e.mount=n=>{const a=iq(n);if(!a)return;const i=e._component;!Tt(i)&&!i.render&&!i.template&&(i.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const o=r(a,!1,aq(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),o},e};function aq(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function iq(t){return Cr(t)?document.querySelector(t):t}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let RP;const Cc=t=>RP=t,PP=Symbol();function Db(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Nl;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Nl||(Nl={}));function oq(){const t=AR(!0),e=t.run(()=>Ct({}));let r=[],n=[];const a=s1({install(i){Cc(a),a._a=i,i.provide(PP,a),i.config.globalProperties.$pinia=a,n.forEach(o=>r.push(o)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return a}const NP=()=>{};function GC(t,e,r,n=NP){t.push(e);const a=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!r&&LR()&&z2(a),a}function Zo(t,...e){t.slice().forEach(r=>{r(...e)})}const sq=t=>t(),HC=Symbol(),ch=Symbol();function _b(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],a=t[r];Db(a)&&Db(n)&&t.hasOwnProperty(r)&&!xr(n)&&!Ci(n)?t[r]=_b(a,n):t[r]=n}return t}const lq=Symbol();function uq(t){return!Db(t)||!Object.prototype.hasOwnProperty.call(t,lq)}const{assign:pi}=Object;function fq(t){return!!(xr(t)&&t.effect)}function cq(t,e,r,n){const{state:a,actions:i,getters:o}=e,l=r.state.value[t];let u;function f(){l||(r.state.value[t]=a?a():{});const c=fF(r.state.value[t]);return pi(c,i,Object.keys(o||{}).reduce((h,g)=>(h[g]=s1(sr(()=>{Cc(r);const p=r._s.get(t);return o[g].call(p,p)})),h),{}))}return u=kP(t,f,e,r,n,!0),u}function kP(t,e,r={},n,a,i){let o;const l=pi({actions:{}},r),u={deep:!0};let f,c,h=[],g=[],p;const y=n.state.value[t];!i&&!y&&(n.state.value[t]={}),Ct({});let C;function E(P){let N;f=c=!1,typeof P=="function"?(P(n.state.value[t]),N={type:Nl.patchFunction,storeId:t,events:p}):(_b(n.state.value[t],P),N={type:Nl.patchObject,payload:P,storeId:t,events:p});const B=C=Symbol();gc().then(()=>{C===B&&(f=!0)}),c=!0,Zo(h,N,n.state.value[t])}const v=i?function(){const{state:N}=r,B=N?N():{};this.$patch(G=>{pi(G,B)})}:NP;function x(){o.stop(),h=[],g=[],n._s.delete(t)}const w=(P,N="")=>{if(HC in P)return P[ch]=N,P;const B=function(){Cc(n);const G=Array.from(arguments),F=[],z=[];function M(I){F.push(I)}function R(I){z.push(I)}Zo(g,{args:G,name:B[ch],store:A,after:M,onError:R});let k;try{k=P.apply(this&&this.$id===t?this:A,G)}catch(I){throw Zo(z,I),I}return k instanceof Promise?k.then(I=>(Zo(F,I),I)).catch(I=>(Zo(z,I),Promise.reject(I))):(Zo(F,k),k)};return B[HC]=!0,B[ch]=N,B},T={_p:n,$id:t,$onAction:GC.bind(null,g),$patch:E,$reset:v,$subscribe(P,N={}){const B=GC(h,P,N.detached,()=>G()),G=o.run(()=>wr(()=>n.state.value[t],F=>{(N.flush==="sync"?c:f)&&P({storeId:t,type:Nl.direct,events:p},F)},pi({},u,N)));return B},$dispose:x},A=vc(T);n._s.set(t,A);const D=(n._a&&n._a.runWithContext||sq)(()=>n._e.run(()=>(o=AR()).run(()=>e({action:w}))));for(const P in D){const N=D[P];if(xr(N)&&!fq(N)||Ci(N))i||(y&&uq(N)&&(xr(N)?N.value=y[P]:_b(N,y[P])),n.state.value[t][P]=N);else if(typeof N=="function"){const B=w(N,P);D[P]=B,l.actions[P]=N}}return pi(A,D),pi(Ot(A),D),Object.defineProperty(A,"$state",{get:()=>n.state.value[t],set:P=>{E(N=>{pi(N,P)})}}),n._p.forEach(P=>{pi(A,o.run(()=>P({store:A,app:n._a,pinia:n,options:l})))}),y&&i&&r.hydrate&&r.hydrate(A.$state,y),f=!0,c=!0,A}/*! #__NO_SIDE_EFFECTS__ */function Ec(t,e,r){let n;const a=typeof e=="function";n=a?r:e;function i(o,l){const u=WF();return o=o||(u?Rl(PP,null):null),o&&Cc(o),o=RP,o._s.has(t)||(a?kP(t,e,n,o):cq(t,n,o)),o._s.get(t)}return i.$id=t,i}function Mb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function dq(t){if(Array.isArray(t))return t}function hq(t){if(Array.isArray(t))return Mb(t)}function Oi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IP(n.key),n)}}function Ii(t,e,r){return e&&vq(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=h1(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return o=u.done,u},e:function(u){l=!0,i=u},f:function(){try{o||r.return==null||r.return()}finally{if(l)throw i}}}}function OP(t,e,r){return(e=IP(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pq(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gq(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],u=!0,f=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(c){f=!0,a=c}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(f)throw a}}return l}}function yq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ir(t,e){return dq(t)||gq(t,e)||h1(t,e)||yq()}function Yf(t){return hq(t)||pq(t)||h1(t)||mq()}function bq(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function IP(t){var e=bq(t,"string");return typeof e=="symbol"?e:e+""}function Br(t){"@babel/helpers - typeof";return Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(t)}function h1(t,e){if(t){if(typeof t=="string")return Mb(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mb(t,e):void 0}}var Or=typeof window>"u"?null:window,UC=Or?Or.navigator:null;Or&&Or.document;var wq=Br(""),FP=Br({}),xq=Br(function(){}),Cq=typeof HTMLElement>"u"?"undefined":Br(HTMLElement),au=function(e){return e&&e.instanceString&&pr(e.instanceString)?e.instanceString():null},mt=function(e){return e!=null&&Br(e)==wq},pr=function(e){return e!=null&&Br(e)===xq},Qt=function(e){return!Bn(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},It=function(e){return e!=null&&Br(e)===FP&&!Qt(e)&&e.constructor===Object},Eq=function(e){return e!=null&&Br(e)===FP},nt=function(e){return e!=null&&Br(e)===Br(1)&&!isNaN(e)},Tq=function(e){return nt(e)&&Math.floor(e)===e},Xf=function(e){if(Cq!=="undefined")return e!=null&&e instanceof HTMLElement},Bn=function(e){return iu(e)||BP(e)},iu=function(e){return au(e)==="collection"&&e._private.single},BP=function(e){return au(e)==="collection"&&!e._private.single},v1=function(e){return au(e)==="core"},qP=function(e){return au(e)==="stylesheet"},Sq=function(e){return au(e)==="event"},Di=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Aq=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Lq=function(e){return It(e)&&nt(e.x1)&&nt(e.x2)&&nt(e.y1)&&nt(e.y2)},Dq=function(e){return Eq(e)&&pr(e.then)},_q=function(){return UC&&UC.userAgent.match(/msie|trident|edge/i)},xs=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function(){var i=this,o=arguments,l,u=r.apply(i,o),f=n.cache;return(l=f[u])||(l=f[u]=e.apply(i,o)),l};return n.cache={},n},p1=xs(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Tc=xs(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),zP=xs(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),WC=function(e){return Di(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Fr="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Mq="rgb[a]?\\(("+Fr+"[%]?)\\s*,\\s*("+Fr+"[%]?)\\s*,\\s*("+Fr+"[%]?)(?:\\s*,\\s*("+Fr+"))?\\)",Rq="rgb[a]?\\((?:"+Fr+"[%]?)\\s*,\\s*(?:"+Fr+"[%]?)\\s*,\\s*(?:"+Fr+"[%]?)(?:\\s*,\\s*(?:"+Fr+"))?\\)",Pq="hsl[a]?\\(("+Fr+")\\s*,\\s*("+Fr+"[%])\\s*,\\s*("+Fr+"[%])(?:\\s*,\\s*("+Fr+"))?\\)",Nq="hsl[a]?\\((?:"+Fr+")\\s*,\\s*(?:"+Fr+"[%])\\s*,\\s*(?:"+Fr+"[%])(?:\\s*,\\s*(?:"+Fr+"))?\\)",kq="\\#[0-9a-fA-F]{3}",Oq="\\#[0-9a-fA-F]{6}",GP=function(e,r){return e<r?-1:e>r?1:0},Iq=function(e,r){return-1*GP(e,r)},wt=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];t[o]=n[o]}}return t},Fq=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,o=16;return r?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},Bq=function(e){var r,n,a,i,o,l,u,f;function c(y,C,E){return E<0&&(E+=1),E>1&&(E-=1),E<1/6?y+(C-y)*6*E:E<1/2?C:E<2/3?y+(C-y)*(2/3-E)*6:y}var h=new RegExp("^"+Pq+"$").exec(e);if(h){if(n=parseInt(h[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(h[2]),a<0||a>100||(a=a/100,i=parseFloat(h[3]),i<0||i>100)||(i=i/100,o=h[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)l=u=f=Math.round(i*255);else{var g=i<.5?i*(1+a):i+a-i*a,p=2*i-g;l=Math.round(255*c(p,g,n+1/3)),u=Math.round(255*c(p,g,n)),f=Math.round(255*c(p,g,n-1/3))}r=[l,u,f,o]}return r},qq=function(e){var r,n=new RegExp("^"+Mq+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;r.push(Math.floor(o))}var l=a[1]||a[2]||a[3],u=a[1]&&a[2]&&a[3];if(l&&!u)return;var f=n[4];if(f!==void 0){if(f=parseFloat(f),f<0||f>1)return;r.push(f)}}return r},zq=function(e){return Gq[e.toLowerCase()]},HP=function(e){return(Qt(e)?e:null)||zq(e)||Fq(e)||qq(e)||Bq(e)},Gq={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},UP=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(It(o))throw Error("Tried to set map with object key");i<n.length-1?(r[o]==null&&(r[o]={}),r=r[o]):r[o]=e.value}},WP=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(It(o))throw Error("Tried to get map with object key");if(r=r[o],r==null)return r}return r},tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ou(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dh,VC;function su(){if(VC)return dh;VC=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return dh=t,dh}var hh,$C;function Hq(){if($C)return hh;$C=1;var t=typeof tf=="object"&&tf&&tf.Object===Object&&tf;return hh=t,hh}var vh,YC;function Sc(){if(YC)return vh;YC=1;var t=Hq(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return vh=r,vh}var ph,XC;function Uq(){if(XC)return ph;XC=1;var t=Sc(),e=function(){return t.Date.now()};return ph=e,ph}var gh,KC;function Wq(){if(KC)return gh;KC=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return gh=e,gh}var yh,jC;function Vq(){if(jC)return yh;jC=1;var t=Wq(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return yh=r,yh}var mh,ZC;function g1(){if(ZC)return mh;ZC=1;var t=Sc(),e=t.Symbol;return mh=e,mh}var bh,QC;function $q(){if(QC)return bh;QC=1;var t=g1(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var l=r.call(o,a),u=o[a];try{o[a]=void 0;var f=!0}catch{}var c=n.call(o);return f&&(l?o[a]=u:delete o[a]),c}return bh=i,bh}var wh,JC;function Yq(){if(JC)return wh;JC=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return wh=r,wh}var xh,eE;function VP(){if(eE)return xh;eE=1;var t=g1(),e=$q(),r=Yq(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?a:n:i&&i in Object(l)?e(l):r(l)}return xh=o,xh}var Ch,tE;function Xq(){if(tE)return Ch;tE=1;function t(e){return e!=null&&typeof e=="object"}return Ch=t,Ch}var Eh,rE;function lu(){if(rE)return Eh;rE=1;var t=VP(),e=Xq(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Eh=n,Eh}var Th,nE;function Kq(){if(nE)return Th;nE=1;var t=Vq(),e=su(),r=lu(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(f){if(typeof f=="number")return f;if(r(f))return n;if(e(f)){var c=typeof f.valueOf=="function"?f.valueOf():f;f=e(c)?c+"":c}if(typeof f!="string")return f===0?f:+f;f=t(f);var h=i.test(f);return h||o.test(f)?l(f.slice(2),h?2:8):a.test(f)?n:+f}return Th=u,Th}var Sh,aE;function jq(){if(aE)return Sh;aE=1;var t=su(),e=Uq(),r=Kq(),n="Expected a function",a=Math.max,i=Math.min;function o(l,u,f){var c,h,g,p,y,C,E=0,v=!1,x=!1,w=!0;if(typeof l!="function")throw new TypeError(n);u=r(u)||0,t(f)&&(v=!!f.leading,x="maxWait"in f,g=x?a(r(f.maxWait)||0,u):g,w="trailing"in f?!!f.trailing:w);function T(z){var M=c,R=h;return c=h=void 0,E=z,p=l.apply(R,M),p}function A(z){return E=z,y=setTimeout(P,u),v?T(z):p}function _(z){var M=z-C,R=z-E,k=u-M;return x?i(k,g-R):k}function D(z){var M=z-C,R=z-E;return C===void 0||M>=u||M<0||x&&R>=g}function P(){var z=e();if(D(z))return N(z);y=setTimeout(P,_(z))}function N(z){return y=void 0,w&&c?T(z):(c=h=void 0,p)}function B(){y!==void 0&&clearTimeout(y),E=0,c=C=h=y=void 0}function G(){return y===void 0?p:N(e())}function F(){var z=e(),M=D(z);if(c=arguments,h=this,C=z,M){if(y===void 0)return A(C);if(x)return clearTimeout(y),y=setTimeout(P,u),T(C)}return y===void 0&&(y=setTimeout(P,u)),p}return F.cancel=B,F.flush=G,F}return Sh=o,Sh}var Zq=jq(),uu=ou(Zq),Ah=Or?Or.performance:null,$P=Ah&&Ah.now?function(){return Ah.now()}:function(){return Date.now()},Qq=function(){if(Or){if(Or.requestAnimationFrame)return function(t){Or.requestAnimationFrame(t)};if(Or.mozRequestAnimationFrame)return function(t){Or.mozRequestAnimationFrame(t)};if(Or.webkitRequestAnimationFrame)return function(t){Or.webkitRequestAnimationFrame(t)};if(Or.msRequestAnimationFrame)return function(t){Or.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t($P())},1e3/60)}}(),Kf=function(e){return Qq(e)},ja=$P,co=9261,YP=65599,ss=5381,XP=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:co,n=r,a;a=e.next(),!a.done;)n=n*YP+a.value|0;return n},Vl=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:co;return r*YP+e|0},$l=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ss;return(r<<5)+r+e|0},Jq=function(e,r){return e*2097152+r},hi=function(e){return e[0]*2097152+e[1]},rf=function(e,r){return[Vl(e[0],r[0]),$l(e[1],r[1])]},iE=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return XP(o,r)},yo=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return XP(o,r)},KP=function(){return ez(arguments)},ez=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=yo(a):r=yo(a,r)}return r},oE=!0,tz=console.warn!=null,rz=console.trace!=null,y1=Number.MAX_SAFE_INTEGER||9007199254740991,jP=function(){return!0},jf=function(){return!1},sE=function(){return 0},m1=function(){},vr=function(e){throw new Error(e)},ZP=function(e){if(e!==void 0)oE=!!e;else return oE},Wt=function(e){ZP()&&(tz?console.warn(e):(console.log(e),rz&&console.trace()))},nz=function(e){return wt({},e)},Ca=function(e){return e==null?e:Qt(e)?e.slice():It(e)?nz(e):e},az=function(e){return e.slice()},QP=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},iz={},JP=function(){return iz},rn=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var o=r[i],l=n==null?void 0:n[o];a[o]=l===void 0?e[o]:l}return a}},_i=function(e,r,n){for(var a=e.length-1;a>=0;a--)e[a]===r&&e.splice(a,1)},b1=function(e){e.splice(0,e.length)},oz=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},Mn=function(e,r,n){return n&&(r=zP(n,r)),e[r]},Ha=function(e,r,n,a){n&&(r=zP(n,r)),e[r]=a},sz=function(){function t(){Oi(this,t),this._obj={}}return Ii(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),Va=typeof Map<"u"?Map:sz,lz="undefined",uz=function(){function t(e){if(Oi(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return Ii(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])}(),As=(typeof Set>"u"?"undefined":Br(Set))!==lz?Set:uz,Ac=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!v1(e)){vr("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){vr("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new As,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var o=r.renderedPosition,l=e.pan(),u=e.zoom();i.position={x:(o.x-l.x)/u,y:(o.y-l.y)/u}}var f=[];Qt(r.classes)?f=r.classes:mt(r.classes)&&(f=r.classes.split(/\s+/));for(var c=0,h=f.length;c<h;c++){var g=f[c];!g||g===""||i.classes.add(g)}this.createEmitter(),(n===void 0||n)&&this.restore();var p=r.style||r.css;p&&(Wt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(p))},lE=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;It(n)&&!Bn(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!pr(a)?a:i,a=pr(a)?a:function(){};for(var l=this._private.cy,u=n=mt(n)?this.filter(n):n,f=[],c=[],h={},g={},p={},y=0,C,E=this.byGroup(),v=E.nodes,x=E.edges,w=0;w<u.length;w++){var T=u[w],A=T.id();T.isNode()&&(f.unshift(T),e.bfs&&(p[A]=!0,c.push(T)),g[A]=0)}for(var _=function(){var z=e.bfs?f.shift():f.pop(),M=z.id();if(e.dfs){if(p[M])return 0;p[M]=!0,c.push(z)}var R=g[M],k=h[M],I=k!=null?k.source():null,q=k!=null?k.target():null,ae=k==null?void 0:z.same(I)?q[0]:I[0],re;if(re=a(z,k,ae,y++,R),re===!0)return C=z,1;if(re===!1)return 1;for(var K=z.connectedEdges().filter(function(X){return(!i||X.source().same(z))&&x.has(X)}),W=0;W<K.length;W++){var Z=K[W],U=Z.connectedNodes().filter(function(X){return!X.same(z)&&v.has(X)}),V=U.id();U.length!==0&&!p[V]&&(U=U[0],f.push(U),e.bfs&&(p[V]=!0,c.push(U)),h[V]=Z,g[V]=g[M]+1)}},D;f.length!==0&&(D=_(),!(D!==0&&D===1)););for(var P=l.collection(),N=0;N<c.length;N++){var B=c[N],G=h[B.id()];G!=null&&P.push(G),P.push(B)}return{path:l.collection(P),found:l.collection(C)}}},Yl={breadthFirstSearch:lE({bfs:!0}),depthFirstSearch:lE({dfs:!0})};Yl.bfs=Yl.breadthFirstSearch;Yl.dfs=Yl.depthFirstSearch;var wf={exports:{}},fz=wf.exports,uE;function cz(){return uE||(uE=1,function(t,e){(function(){var r,n,a,i,o,l,u,f,c,h,g,p,y,C,E;a=Math.floor,h=Math.min,n=function(v,x){return v<x?-1:v>x?1:0},c=function(v,x,w,T,A){var _;if(w==null&&(w=0),A==null&&(A=n),w<0)throw new Error("lo must be non-negative");for(T==null&&(T=v.length);w<T;)_=a((w+T)/2),A(x,v[_])<0?T=_:w=_+1;return[].splice.apply(v,[w,w-w].concat(x)),x},l=function(v,x,w){return w==null&&(w=n),v.push(x),C(v,0,v.length-1,w)},o=function(v,x){var w,T;return x==null&&(x=n),w=v.pop(),v.length?(T=v[0],v[0]=w,E(v,0,x)):T=w,T},f=function(v,x,w){var T;return w==null&&(w=n),T=v[0],v[0]=x,E(v,0,w),T},u=function(v,x,w){var T;return w==null&&(w=n),v.length&&w(v[0],x)<0&&(T=[v[0],x],x=T[0],v[0]=T[1],E(v,0,w)),x},i=function(v,x){var w,T,A,_,D,P;for(x==null&&(x=n),_=(function(){P=[];for(var N=0,B=a(v.length/2);0<=B?N<B:N>B;0<=B?N++:N--)P.push(N);return P}).apply(this).reverse(),D=[],T=0,A=_.length;T<A;T++)w=_[T],D.push(E(v,w,x));return D},y=function(v,x,w){var T;if(w==null&&(w=n),T=v.indexOf(x),T!==-1)return C(v,0,T,w),E(v,T,w)},g=function(v,x,w){var T,A,_,D,P;if(w==null&&(w=n),A=v.slice(0,x),!A.length)return A;for(i(A,w),P=v.slice(x),_=0,D=P.length;_<D;_++)T=P[_],u(A,T,w);return A.sort(w).reverse()},p=function(v,x,w){var T,A,_,D,P,N,B,G,F;if(w==null&&(w=n),x*10<=v.length){if(_=v.slice(0,x).sort(w),!_.length)return _;for(A=_[_.length-1],B=v.slice(x),D=0,N=B.length;D<N;D++)T=B[D],w(T,A)<0&&(c(_,T,0,null,w),_.pop(),A=_[_.length-1]);return _}for(i(v,w),F=[],P=0,G=h(x,v.length);0<=G?P<G:P>G;0<=G?++P:--P)F.push(o(v,w));return F},C=function(v,x,w,T){var A,_,D;for(T==null&&(T=n),A=v[w];w>x;){if(D=w-1>>1,_=v[D],T(A,_)<0){v[w]=_,w=D;continue}break}return v[w]=A},E=function(v,x,w){var T,A,_,D,P;for(w==null&&(w=n),A=v.length,P=x,_=v[x],T=2*x+1;T<A;)D=T+1,D<A&&!(w(v[T],v[D])<0)&&(T=D),v[x]=v[T],x=T,T=2*x+1;return v[x]=_,C(v,P,x,w)},r=function(){v.push=l,v.pop=o,v.replace=f,v.pushpop=u,v.heapify=i,v.updateItem=y,v.nlargest=g,v.nsmallest=p;function v(x){this.cmp=x??n,this.nodes=[]}return v.prototype.push=function(x){return l(this.nodes,x,this.cmp)},v.prototype.pop=function(){return o(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(x){return this.nodes.indexOf(x)!==-1},v.prototype.replace=function(x){return f(this.nodes,x,this.cmp)},v.prototype.pushpop=function(x){return u(this.nodes,x,this.cmp)},v.prototype.heapify=function(){return i(this.nodes,this.cmp)},v.prototype.updateItem=function(x){return y(this.nodes,x,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var x;return x=new v,x.nodes=this.nodes.slice(0),x},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v}(),function(v,x){return t.exports=x()}(this,function(){return r})}).call(fz)}(wf)),wf.exports}var Lh,fE;function dz(){return fE||(fE=1,Lh=cz()),Lh}var hz=dz(),fu=ou(hz),vz=rn({root:null,weight:function(e){return 1},directed:!1}),pz={dijkstra:function(e){if(!It(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=vz(e),a=n.root,i=n.weight,o=n.directed,l=this,u=i,f=mt(a)?this.filter(a)[0]:a[0],c={},h={},g={},p=this.byGroup(),y=p.nodes,C=p.edges;C.unmergeBy(function(R){return R.isLoop()});for(var E=function(k){return c[k.id()]},v=function(k,I){c[k.id()]=I,x.updateItem(k)},x=new fu(function(R,k){return E(R)-E(k)}),w=0;w<y.length;w++){var T=y[w];c[T.id()]=T.same(f)?0:1/0,x.push(T)}for(var A=function(k,I){for(var q=(o?k.edgesTo(I):k.edgesWith(I)).intersect(C),ae=1/0,re,K=0;K<q.length;K++){var W=q[K],Z=u(W);(Z<ae||!re)&&(ae=Z,re=W)}return{edge:re,dist:ae}};x.size()>0;){var _=x.pop(),D=E(_),P=_.id();if(g[P]=D,D!==1/0)for(var N=_.neighborhood().intersect(y),B=0;B<N.length;B++){var G=N[B],F=G.id(),z=A(_,G),M=D+z.dist;M<E(G)&&(v(G,M),h[F]={node:_,edge:z.edge})}}return{distanceTo:function(k){var I=mt(k)?y.filter(k)[0]:k[0];return g[I.id()]},pathTo:function(k){var I=mt(k)?y.filter(k)[0]:k[0],q=[],ae=I,re=ae.id();if(I.length>0)for(q.unshift(I);h[re];){var K=h[re];q.unshift(K.edge),q.unshift(K.node),ae=K.node,re=ae.id()}return l.spawn(q)}}}},gz={kruskal:function(e){e=e||function(w){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,o=new Array(i),l=n,u=function(T){for(var A=0;A<o.length;A++){var _=o[A];if(_.has(T))return A}},f=0;f<i;f++)o[f]=this.spawn(n[f]);for(var c=a.sort(function(w,T){return e(w)-e(T)}),h=0;h<c.length;h++){var g=c[h],p=g.source()[0],y=g.target()[0],C=u(p),E=u(y),v=o[C],x=o[E];C!==E&&(l.merge(g),v.merge(x),o.splice(E,1))}return l}},yz=rn({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),mz={aStar:function(e){var r=this.cy(),n=yz(e),a=n.root,i=n.goal,o=n.heuristic,l=n.directed,u=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var f=a.id(),c=i.id(),h={},g={},p={},y=new fu(function(re,K){return g[re.id()]-g[K.id()]}),C=new As,E={},v={},x=function(K,W){y.push(K),C.add(W)},w,T,A=function(){w=y.pop(),T=w.id(),C.delete(T)},_=function(K){return C.has(K)};x(a,f),h[f]=0,g[f]=o(a);for(var D=0;y.size()>0;){if(A(),D++,T===c){for(var P=[],N=i,B=c,G=v[B];P.unshift(N),G!=null&&P.unshift(G),N=E[B],N!=null;)B=N.id(),G=v[B];return{found:!0,distance:h[T],path:this.spawn(P),steps:D}}p[T]=!0;for(var F=w._private.edges,z=0;z<F.length;z++){var M=F[z];if(this.hasElementWithId(M.id())&&!(l&&M.data("source")!==T)){var R=M.source(),k=M.target(),I=R.id()!==T?R:k,q=I.id();if(this.hasElementWithId(q)&&!p[q]){var ae=h[T]+u(M);if(!_(q)){h[q]=ae,g[q]=ae+o(I),x(I,q),E[q]=w,v[q]=M;continue}ae<h[q]&&(h[q]=ae,g[q]=ae+o(I),E[q]=w,v[q]=M)}}}}return{found:!1,distance:void 0,path:void 0,steps:D}}},bz=rn({weight:function(e){return 1},directed:!1}),wz={floydWarshall:function(e){for(var r=this.cy(),n=bz(e),a=n.weight,i=n.directed,o=a,l=this.byGroup(),u=l.nodes,f=l.edges,c=u.length,h=c*c,g=function(Z){return u.indexOf(Z)},p=function(Z){return u[Z]},y=new Array(h),C=0;C<h;C++){var E=C%c,v=(C-E)/c;v===E?y[C]=0:y[C]=1/0}for(var x=new Array(h),w=new Array(h),T=0;T<f.length;T++){var A=f[T],_=A.source()[0],D=A.target()[0];if(_!==D){var P=g(_),N=g(D),B=P*c+N,G=o(A);if(y[B]>G&&(y[B]=G,x[B]=N,w[B]=A),!i){var F=N*c+P;!i&&y[F]>G&&(y[F]=G,x[F]=P,w[F]=A)}}}for(var z=0;z<c;z++)for(var M=0;M<c;M++)for(var R=M*c+z,k=0;k<c;k++){var I=M*c+k,q=z*c+k;y[R]+y[q]<y[I]&&(y[I]=y[R]+y[q],x[I]=x[R])}var ae=function(Z){return(mt(Z)?r.filter(Z):Z)[0]},re=function(Z){return g(ae(Z))},K={distance:function(Z,U){var V=re(Z),X=re(U);return y[V*c+X]},path:function(Z,U){var V=re(Z),X=re(U),ee=p(V);if(V===X)return ee.collection();if(x[V*c+X]==null)return r.collection();var se=r.collection(),te=V,oe;for(se.merge(ee);V!==X;)te=V,V=x[V*c+X],oe=w[te*c+V],se.merge(oe),se.merge(p(V));return se}};return K}},xz=rn({weight:function(e){return 1},directed:!1,root:null}),Cz={bellmanFord:function(e){var r=this,n=xz(e),a=n.weight,i=n.directed,o=n.root,l=a,u=this,f=this.cy(),c=this.byGroup(),h=c.edges,g=c.nodes,p=g.length,y=new Va,C=!1,E=[];o=f.collection(o)[0],h.unmergeBy(function(ge){return ge.isLoop()});for(var v=h.length,x=function(Ee){var he=y.get(Ee.id());return he||(he={},y.set(Ee.id(),he)),he},w=function(Ee){return(mt(Ee)?f.$(Ee):Ee)[0]},T=function(Ee){return x(w(Ee)).dist},A=function(Ee){for(var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,de=w(Ee),be=[],De=de;;){if(De==null)return r.spawn();var Se=x(De),Re=Se.edge,Ie=Se.pred;if(be.unshift(De[0]),De.same(he)&&be.length>0)break;Re!=null&&be.unshift(Re),De=Ie}return u.spawn(be)},_=0;_<p;_++){var D=g[_],P=x(D);D.same(o)?P.dist=0:P.dist=1/0,P.pred=null,P.edge=null}for(var N=!1,B=function(Ee,he,de,be,De,Se){var Re=be.dist+Se;Re<De.dist&&!de.same(be.edge)&&(De.dist=Re,De.pred=Ee,De.edge=de,N=!0)},G=1;G<p;G++){N=!1;for(var F=0;F<v;F++){var z=h[F],M=z.source(),R=z.target(),k=l(z),I=x(M),q=x(R);B(M,R,z,I,q,k),i||B(R,M,z,q,I,k)}if(!N)break}if(N)for(var ae=[],re=0;re<v;re++){var K=h[re],W=K.source(),Z=K.target(),U=l(K),V=x(W).dist,X=x(Z).dist;if(V+U<X||!i&&X+U<V)if(C||(Wt("Graph contains a negative weight cycle for Bellman-Ford"),C=!0),e.findNegativeWeightCycles!==!1){var ee=[];V+U<X&&ee.push(W),!i&&X+U<V&&ee.push(Z);for(var se=ee.length,te=0;te<se;te++){var oe=ee[te],le=[oe];le.push(x(oe).edge);for(var $=x(oe).pred;le.indexOf($)===-1;)le.push($),le.push(x($).edge),$=x($).pred;le=le.slice(le.indexOf($));for(var ne=le[0].id(),ie=0,ue=2;ue<le.length;ue+=2)le[ue].id()<ne&&(ne=le[ue].id(),ie=ue);le=le.slice(ie).concat(le.slice(0,ie)),le.push(le[0]);var me=le.map(function(ge){return ge.id()}).join(",");ae.indexOf(me)===-1&&(E.push(u.spawn(le)),ae.push(me))}}else break}return{distanceTo:T,pathTo:A,hasNegativeWeightCycle:C,negativeWeightCycles:E}}},Ez=Math.sqrt(2),Tz=function(e,r,n){n.length===0&&vr("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],l=r[i],u=r[o],f=n,c=f.length-1;c>=0;c--){var h=f[c],g=h[1],p=h[2];(r[g]===l&&r[p]===u||r[g]===u&&r[p]===l)&&f.splice(c,1)}for(var y=0;y<f.length;y++){var C=f[y];C[1]===u?(f[y]=C.slice(),f[y][1]=l):C[2]===u&&(f[y]=C.slice(),f[y][2]=l)}for(var E=0;E<r.length;E++)r[E]===u&&(r[E]=l);return f},Dh=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=Tz(i,e,r),n--}return r},Sz={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(q){return q.isLoop()});var i=n.length,o=a.length,l=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/Ez);if(i<2){vr("At least 2 nodes are required for Karger-Stein algorithm");return}for(var f=[],c=0;c<o;c++){var h=a[c];f.push([c,n.indexOf(h.source()),n.indexOf(h.target())])}for(var g=1/0,p=[],y=new Array(i),C=new Array(i),E=new Array(i),v=function(ae,re){for(var K=0;K<i;K++)re[K]=ae[K]},x=0;x<=l;x++){for(var w=0;w<i;w++)C[w]=w;var T=Dh(C,f.slice(),i,u),A=T.slice();v(C,E);var _=Dh(C,T,u,2),D=Dh(E,A,u,2);_.length<=D.length&&_.length<g?(g=_.length,p=_,v(C,y)):D.length<=_.length&&D.length<g&&(g=D.length,p=D,v(E,y))}for(var P=this.spawn(p.map(function(q){return a[q[0]]})),N=this.spawn(),B=this.spawn(),G=y[0],F=0;F<y.length;F++){var z=y[F],M=n[F];z===G?N.merge(M):B.merge(M)}var R=function(ae){var re=e.spawn();return ae.forEach(function(K){re.merge(K),K.connectedEdges().forEach(function(W){e.contains(W)&&!P.contains(W)&&re.merge(W)})}),re},k=[R(N),R(B)],I={cut:P,components:k,partition1:N,partition2:B};return I}},Az=function(e){return{x:e.x,y:e.y}},Lc=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},eN=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},ls=function(e){return{x:e[0],y:e[1]}},Lz=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},Dz=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},_z=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=r;o<n;o++){var l=e[o];isFinite(l)&&(a+=l,i++)}return a/i},Mz=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var l=0,u=e.length-1;u>=0;u--){var f=e[u];o?isFinite(f)||(e[u]=-1/0,l++):e.splice(u,1)}i&&e.sort(function(g,p){return g-p});var c=e.length,h=Math.floor(c/2);return c%2!==0?e[h+1+l]:(e[h-1+l]+e[h+l])/2},Rz=function(e){return Math.PI*e/180},nf=function(e,r){return Math.atan2(r,e)-Math.PI/2},w1=Math.log2||function(t){return Math.log(t)/Math.log(2)},x1=function(e){return e>0?1:e<0?-1:0},mo=function(e,r){return Math.sqrt(oo(e,r))},oo=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},Pz=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},Ur=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},ys=function(e,r,n,a){return{x:Ur(e.x,r.x,n.x,a),y:Ur(e.y,r.y,n.y,a)}},Nz=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},o=mo(e,r),l={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+l.x*a,y:e.y+l.y*a}},Xl=function(e,r,n){return Math.max(e,Math.min(n,r))},kn=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},kz=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},Oz=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},Iz=function(e,r,n){return{x1:e.x1+r,x2:e.x2+r,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},tN=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},Fz=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},xf=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Cf=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(r.length===1)n=a=i=o=r[0];else if(r.length===2)n=i=r[0],o=a=r[1];else if(r.length===4){var l=Ir(r,4);n=l[0],a=l[1],i=l[2],o=l[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},cE=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},C1=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Cs=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},Bz=function(e,r){return Cs(e,r.x,r.y)},qz=function(e,r){return Cs(e,r.x1,r.y1)&&Cs(e,r.x2,r.y2)},rN=function(e,r,n,a,i,o,l){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",f=u==="auto"?Mi(i,o):u,c=i/2,h=o/2;f=Math.min(f,c,h);var g=f!==c,p=f!==h,y;if(g){var C=n-c+f-l,E=a-h-l,v=n+c-f+l,x=E;if(y=bi(e,r,n,a,C,E,v,x,!1),y.length>0)return y}if(p){var w=n+c+l,T=a-h+f-l,A=w,_=a+h-f+l;if(y=bi(e,r,n,a,w,T,A,_,!1),y.length>0)return y}if(g){var D=n-c+f-l,P=a+h+l,N=n+c-f+l,B=P;if(y=bi(e,r,n,a,D,P,N,B,!1),y.length>0)return y}if(p){var G=n-c-l,F=a-h+f-l,z=G,M=a+h-f+l;if(y=bi(e,r,n,a,G,F,z,M,!1),y.length>0)return y}var R;{var k=n-c+f,I=a-h+f;if(R=xl(e,r,n,a,k,I,f+l),R.length>0&&R[0]<=k&&R[1]<=I)return[R[0],R[1]]}{var q=n+c-f,ae=a-h+f;if(R=xl(e,r,n,a,q,ae,f+l),R.length>0&&R[0]>=q&&R[1]<=ae)return[R[0],R[1]]}{var re=n+c-f,K=a+h-f;if(R=xl(e,r,n,a,re,K,f+l),R.length>0&&R[0]>=re&&R[1]>=K)return[R[0],R[1]]}{var W=n-c+f,Z=a+h-f;if(R=xl(e,r,n,a,W,Z,f+l),R.length>0&&R[0]<=W&&R[1]>=Z)return[R[0],R[1]]}return[]},zz=function(e,r,n,a,i,o,l){var u=l,f=Math.min(n,i),c=Math.max(n,i),h=Math.min(a,o),g=Math.max(a,o);return f-u<=e&&e<=c+u&&h-u<=r&&r<=g+u},Gz=function(e,r,n,a,i,o,l,u,f){var c={x1:Math.min(n,l,i)-f,x2:Math.max(n,l,i)+f,y1:Math.min(a,u,o)-f,y2:Math.max(a,u,o)+f};return!(e<c.x1||e>c.x2||r<c.y1||r>c.y2)},Hz=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var o=Math.sqrt(i),l=2*e,u=(-r+o)/l,f=(-r-o)/l;return[u,f]},Uz=function(e,r,n,a,i){var o=1e-5;e===0&&(e=o),r/=e,n/=e,a/=e;var l,u,f,c,h,g,p,y;if(u=(3*n-r*r)/9,f=-(27*a)+r*(9*n-2*(r*r)),f/=54,l=u*u*u+f*f,i[1]=0,p=r/3,l>0){h=f+Math.sqrt(l),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),g=f-Math.sqrt(l),g=g<0?-Math.pow(-g,1/3):Math.pow(g,1/3),i[0]=-p+h+g,p+=(h+g)/2,i[4]=i[2]=-p,p=Math.sqrt(3)*(-g+h)/2,i[3]=p,i[5]=-p;return}if(i[5]=i[3]=0,l===0){y=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),i[0]=-p+2*y,i[4]=i[2]=-(y+p);return}u=-u,c=u*u*u,c=Math.acos(f/Math.sqrt(c)),y=2*Math.sqrt(u),i[0]=-p+y*Math.cos(c/3),i[2]=-p+y*Math.cos((c+2*Math.PI)/3),i[4]=-p+y*Math.cos((c+4*Math.PI)/3)},Wz=function(e,r,n,a,i,o,l,u){var f=1*n*n-4*n*i+2*n*l+4*i*i-4*i*l+l*l+a*a-4*a*o+2*a*u+4*o*o-4*o*u+u*u,c=1*9*n*i-3*n*n-3*n*l-6*i*i+3*i*l+9*a*o-3*a*a-3*a*u-6*o*o+3*o*u,h=1*3*n*n-6*n*i+n*l-n*e+2*i*i+2*i*e-l*e+3*a*a-6*a*o+a*u-a*r+2*o*o+2*o*r-u*r,g=1*n*i-n*n+n*e-i*e+a*o-a*a+a*r-o*r,p=[];Uz(f,c,h,g,p);for(var y=1e-7,C=[],E=0;E<6;E+=2)Math.abs(p[E+1])<y&&p[E]>=0&&p[E]<=1&&C.push(p[E]);C.push(1),C.push(0);for(var v=-1,x,w,T,A=0;A<C.length;A++)x=Math.pow(1-C[A],2)*n+2*(1-C[A])*C[A]*i+C[A]*C[A]*l,w=Math.pow(1-C[A],2)*a+2*(1-C[A])*C[A]*o+C[A]*C[A]*u,T=Math.pow(x-e,2)+Math.pow(w-r,2),v>=0?T<v&&(v=T):v=T;return v},Vz=function(e,r,n,a,i,o){var l=[e-n,r-a],u=[i-n,o-a],f=u[0]*u[0]+u[1]*u[1],c=l[0]*l[0]+l[1]*l[1],h=l[0]*u[0]+l[1]*u[1],g=h*h/f;return h<0?c:g>f?(e-i)*(e-i)+(r-o)*(r-o):c-g},Rn=function(e,r,n){for(var a,i,o,l,u,f=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],l=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],l=n[(c+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)u=(e-a)/(o-a)*(l-i)+i,u>r&&f++;else continue;return f%2!==0},Za=function(e,r,n,a,i,o,l,u,f){var c=new Array(n.length),h;u[0]!=null?(h=Math.atan(u[1]/u[0]),u[0]<0?h=h+Math.PI/2:h=-h-Math.PI/2):h=u;for(var g=Math.cos(-h),p=Math.sin(-h),y=0;y<c.length/2;y++)c[y*2]=o/2*(n[y*2]*g-n[y*2+1]*p),c[y*2+1]=l/2*(n[y*2+1]*g+n[y*2]*p),c[y*2]+=a,c[y*2+1]+=i;var C;if(f>0){var E=Qf(c,-f);C=Zf(E)}else C=c;return Rn(e,r,C)},$z=function(e,r,n,a,i,o,l,u){for(var f=new Array(n.length*2),c=0;c<u.length;c++){var h=u[c];f[c*4+0]=h.startX,f[c*4+1]=h.startY,f[c*4+2]=h.stopX,f[c*4+3]=h.stopY;var g=Math.pow(h.cx-e,2)+Math.pow(h.cy-r,2);if(g<=Math.pow(h.radius,2))return!0}return Rn(e,r,f)},Zf=function(e){for(var r=new Array(e.length/2),n,a,i,o,l,u,f,c,h=0;h<e.length/4;h++){n=e[h*4],a=e[h*4+1],i=e[h*4+2],o=e[h*4+3],h<e.length/4-1?(l=e[(h+1)*4],u=e[(h+1)*4+1],f=e[(h+1)*4+2],c=e[(h+1)*4+3]):(l=e[0],u=e[1],f=e[2],c=e[3]);var g=bi(n,a,i,o,l,u,f,c,!0);r[h*2]=g[0],r[h*2+1]=g[1]}return r},Qf=function(e,r){for(var n=new Array(e.length*2),a,i,o,l,u=0;u<e.length/2;u++){a=e[u*2],i=e[u*2+1],u<e.length/2-1?(o=e[(u+1)*2],l=e[(u+1)*2+1]):(o=e[0],l=e[1]);var f=l-i,c=-(o-a),h=Math.sqrt(f*f+c*c),g=f/h,p=c/h;n[u*4]=a+g*r,n[u*4+1]=i+p*r,n[u*4+2]=o+g*r,n[u*4+3]=l+p*r}return n},Yz=function(e,r,n,a,i,o){var l=n-e,u=a-r;l/=i,u/=o;var f=Math.sqrt(l*l+u*u),c=f-1;if(c<0)return[];var h=c/f;return[(n-e)*h+e,(a-r)*h+r]},vo=function(e,r,n,a,i,o,l){return e-=i,r-=o,e/=n/2+l,r/=a/2+l,e*e+r*r<=1},xl=function(e,r,n,a,i,o,l){var u=[n-e,a-r],f=[e-i,r-o],c=u[0]*u[0]+u[1]*u[1],h=2*(f[0]*u[0]+f[1]*u[1]),g=f[0]*f[0]+f[1]*f[1]-l*l,p=h*h-4*c*g;if(p<0)return[];var y=(-h+Math.sqrt(p))/(2*c),C=(-h-Math.sqrt(p))/(2*c),E=Math.min(y,C),v=Math.max(y,C),x=[];if(E>=0&&E<=1&&x.push(E),v>=0&&v<=1&&x.push(v),x.length===0)return[];var w=x[0]*u[0]+e,T=x[0]*u[1]+r;if(x.length>1){if(x[0]==x[1])return[w,T];var A=x[1]*u[0]+e,_=x[1]*u[1]+r;return[w,T,A,_]}else return[w,T]},_h=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},bi=function(e,r,n,a,i,o,l,u,f){var c=e-i,h=n-e,g=l-i,p=r-o,y=a-r,C=u-o,E=g*p-C*c,v=h*p-y*c,x=C*h-g*y;if(x!==0){var w=E/x,T=v/x,A=.001,_=0-A,D=1+A;return _<=w&&w<=D&&_<=T&&T<=D?[e+w*h,r+w*y]:f?[e+w*h,r+w*y]:[]}else return E===0||v===0?_h(e,n,l)===l?[l,u]:_h(e,n,i)===i?[i,o]:_h(i,l,n)===n?[n,a]:[]:[]},Kl=function(e,r,n,a,i,o,l,u){var f=[],c,h=new Array(n.length),g=!0;o==null&&(g=!1);var p;if(g){for(var y=0;y<h.length/2;y++)h[y*2]=n[y*2]*o+a,h[y*2+1]=n[y*2+1]*l+i;if(u>0){var C=Qf(h,-u);p=Zf(C)}else p=h}else p=n;for(var E,v,x,w,T=0;T<p.length/2;T++)E=p[T*2],v=p[T*2+1],T<p.length/2-1?(x=p[(T+1)*2],w=p[(T+1)*2+1]):(x=p[0],w=p[1]),c=bi(e,r,a,i,E,v,x,w),c.length!==0&&f.push(c[0],c[1]);return f},Xz=function(e,r,n,a,i,o,l,u,f){var c=[],h,g=new Array(n.length*2);f.forEach(function(x,w){w===0?(g[g.length-2]=x.startX,g[g.length-1]=x.startY):(g[w*4-2]=x.startX,g[w*4-1]=x.startY),g[w*4]=x.stopX,g[w*4+1]=x.stopY,h=xl(e,r,a,i,x.cx,x.cy,x.radius),h.length!==0&&c.push(h[0],h[1])});for(var p=0;p<g.length/4;p++)h=bi(e,r,a,i,g[p*4],g[p*4+1],g[p*4+2],g[p*4+3],!1),h.length!==0&&c.push(h[0],h[1]);if(c.length>2){for(var y=[c[0],c[1]],C=Math.pow(y[0]-e,2)+Math.pow(y[1]-r,2),E=1;E<c.length/2;E++){var v=Math.pow(c[E*2]-e,2)+Math.pow(c[E*2+1]-r,2);v<=C&&(y[0]=c[E*2],y[1]=c[E*2+1],C=v)}return y}return c},af=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[r[0]+o*a[0],r[1]+o*a[1]]},Tn=function(e,r){var n=Rb(e,r);return n=nN(n),n},nN=function(e){for(var r,n,a=e.length/2,i=1/0,o=1/0,l=-1/0,u=-1/0,f=0;f<a;f++)r=e[2*f],n=e[2*f+1],i=Math.min(i,r),l=Math.max(l,r),o=Math.min(o,n),u=Math.max(u,n);for(var c=2/(l-i),h=2/(u-o),g=0;g<a;g++)r=e[2*g]=e[2*g]*c,n=e[2*g+1]=e[2*g+1]*h,i=Math.min(i,r),l=Math.max(l,r),o=Math.min(o,n),u=Math.max(u,n);if(o<-1)for(var p=0;p<a;p++)n=e[2*p+1]=e[2*p+1]+(-1-o);return e},Rb=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),o,l=0;l<e;l++)o=l*n+a,i[2*l]=Math.cos(o),i[2*l+1]=Math.sin(-o);return i},Mi=function(e,r){return Math.min(e/4,r/4,8)},aN=function(e,r){return Math.min(e/10,r/10,8)},E1=function(){return 8},Kz=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Pb=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function jz(t,e){function r(h){for(var g=[],p=0;p<h.length;p++){var y=h[p],C=h[(p+1)%h.length],E={x:C.x-y.x,y:C.y-y.y},v={x:-E.y,y:E.x},x=Math.sqrt(v.x*v.x+v.y*v.y);g.push({x:v.x/x,y:v.y/x})}return g}function n(h,g){var p=1/0,y=-1/0,C=Pn(h),E;try{for(C.s();!(E=C.n()).done;){var v=E.value,x=v.x*g.x+v.y*g.y;p=Math.min(p,x),y=Math.max(y,x)}}catch(w){C.e(w)}finally{C.f()}return{min:p,max:y}}function a(h,g){return!(h.max<g.min||g.max<h.min)}var i=[].concat(Yf(r(t)),Yf(r(e))),o=Pn(i),l;try{for(o.s();!(l=o.n()).done;){var u=l.value,f=n(t,u),c=n(e,u);if(!a(f,c))return!1}}catch(h){o.e(h)}finally{o.f()}return!0}var Zz=rn({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Qz={pageRank:function(e){for(var r=Zz(e),n=r.dampingFactor,a=r.precision,i=r.iterations,o=r.weight,l=this._private.cy,u=this.byGroup(),f=u.nodes,c=u.edges,h=f.length,g=h*h,p=c.length,y=new Array(g),C=new Array(h),E=(1-n)/h,v=0;v<h;v++){for(var x=0;x<h;x++){var w=v*h+x;y[w]=0}C[v]=0}for(var T=0;T<p;T++){var A=c[T],_=A.data("source"),D=A.data("target");if(_!==D){var P=f.indexOfId(_),N=f.indexOfId(D),B=o(A),G=N*h+P;y[G]+=B,C[P]+=B}}for(var F=1/h+E,z=0;z<h;z++)if(C[z]===0)for(var M=0;M<h;M++){var R=M*h+z;y[R]=F}else for(var k=0;k<h;k++){var I=k*h+z;y[I]=y[I]/C[z]+E}for(var q=new Array(h),ae=new Array(h),re,K=0;K<h;K++)q[K]=1;for(var W=0;W<i;W++){for(var Z=0;Z<h;Z++)ae[Z]=0;for(var U=0;U<h;U++)for(var V=0;V<h;V++){var X=U*h+V;ae[U]+=y[X]*q[V]}Pz(ae),re=q,q=ae,ae=re;for(var ee=0,se=0;se<h;se++){var te=re[se]-q[se];ee+=te*te}if(ee<a)break}var oe={rank:function($){return $=l.collection($)[0],q[f.indexOf($)]}};return oe}},dE=rn({root:null,weight:function(e){return 1},directed:!1,alpha:0}),ms={degreeCentralityNormalized:function(e){e=dE(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},h={},g=0,p=0,y=0;y<a;y++){var C=n[y],E=C.id();e.root=C;var v=this.degreeCentrality(e);g<v.indegree&&(g=v.indegree),p<v.outdegree&&(p=v.outdegree),c[E]=v.indegree,h[E]=v.outdegree}return{indegree:function(w){return g==0?0:(mt(w)&&(w=r.filter(w)),c[w.id()]/g)},outdegree:function(w){return p===0?0:(mt(w)&&(w=r.filter(w)),h[w.id()]/p)}}}else{for(var i={},o=0,l=0;l<a;l++){var u=n[l];e.root=u;var f=this.degreeCentrality(e);o<f.degree&&(o=f.degree),i[u.id()]=f.degree}return{degree:function(w){return o===0?0:(mt(w)&&(w=r.filter(w)),i[w.id()]/o)}}}},degreeCentrality:function(e){e=dE(e);var r=this.cy(),n=this,a=e,i=a.root,o=a.weight,l=a.directed,u=a.alpha;if(i=r.collection(i)[0],l){for(var p=i.connectedEdges(),y=p.filter(function(_){return _.target().same(i)&&n.has(_)}),C=p.filter(function(_){return _.source().same(i)&&n.has(_)}),E=y.length,v=C.length,x=0,w=0,T=0;T<y.length;T++)x+=o(y[T]);for(var A=0;A<C.length;A++)w+=o(C[A]);return{indegree:Math.pow(E,1-u)*Math.pow(x,u),outdegree:Math.pow(v,1-u)*Math.pow(w,u)}}else{for(var f=i.connectedEdges().intersection(n),c=f.length,h=0,g=0;g<f.length;g++)h+=o(f[g]);return{degree:Math.pow(c,1-u)*Math.pow(h,u)}}}};ms.dc=ms.degreeCentrality;ms.dcn=ms.degreeCentralityNormalised=ms.degreeCentralityNormalized;var hE=rn({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),bs={closenessCentralityNormalized:function(e){for(var r=hE(e),n=r.harmonic,a=r.weight,i=r.directed,o=this.cy(),l={},u=0,f=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),h=0;h<f.length;h++){for(var g=0,p=f[h],y=0;y<f.length;y++)if(h!==y){var C=c.distance(p,f[y]);n?g+=1/C:g+=C}n||(g=1/g),u<g&&(u=g),l[p.id()]=g}return{closeness:function(v){return u==0?0:(mt(v)?v=o.filter(v)[0].id():v=v.id(),l[v]/u)}}},closenessCentrality:function(e){var r=hE(e),n=r.root,a=r.weight,i=r.directed,o=r.harmonic;n=this.filter(n)[0];for(var l=this.dijkstra({root:n,weight:a,directed:i}),u=0,f=this.nodes(),c=0;c<f.length;c++){var h=f[c];if(!h.same(n)){var g=l.distanceTo(h);o?u+=1/g:u+=g}}return o?u:1/u}};bs.cc=bs.closenessCentrality;bs.ccn=bs.closenessCentralityNormalised=bs.closenessCentralityNormalized;var Jz=rn({weight:null,directed:!1}),Nb={betweennessCentrality:function(e){for(var r=Jz(e),n=r.directed,a=r.weight,i=a!=null,o=this.cy(),l=this.nodes(),u={},f={},c=0,h={set:function(w,T){f[w]=T,T>c&&(c=T)},get:function(w){return f[w]}},g=0;g<l.length;g++){var p=l[g],y=p.id();n?u[y]=p.outgoers().nodes():u[y]=p.openNeighborhood().nodes(),h.set(y,0)}for(var C=function(){for(var w=l[E].id(),T=[],A={},_={},D={},P=new fu(function(U,V){return D[U]-D[V]}),N=0;N<l.length;N++){var B=l[N].id();A[B]=[],_[B]=0,D[B]=1/0}for(_[w]=1,D[w]=0,P.push(w);!P.empty();){var G=P.pop();if(T.push(G),i)for(var F=0;F<u[G].length;F++){var z=u[G][F],M=o.getElementById(G),R=void 0;M.edgesTo(z).length>0?R=M.edgesTo(z)[0]:R=z.edgesTo(M)[0];var k=a(R);z=z.id(),D[z]>D[G]+k&&(D[z]=D[G]+k,P.nodes.indexOf(z)<0?P.push(z):P.updateItem(z),_[z]=0,A[z]=[]),D[z]==D[G]+k&&(_[z]=_[z]+_[G],A[z].push(G))}else for(var I=0;I<u[G].length;I++){var q=u[G][I].id();D[q]==1/0&&(P.push(q),D[q]=D[G]+1),D[q]==D[G]+1&&(_[q]=_[q]+_[G],A[q].push(G))}}for(var ae={},re=0;re<l.length;re++)ae[l[re].id()]=0;for(;T.length>0;){for(var K=T.pop(),W=0;W<A[K].length;W++){var Z=A[K][W];ae[Z]=ae[Z]+_[Z]/_[K]*(1+ae[K])}K!=l[E].id()&&h.set(K,h.get(K)+ae[K])}},E=0;E<l.length;E++)C();var v={betweenness:function(w){var T=o.collection(w).id();return h.get(T)},betweennessNormalized:function(w){if(c==0)return 0;var T=o.collection(w).id();return h.get(T)/c}};return v.betweennessNormalised=v.betweennessNormalized,v}};Nb.bc=Nb.betweennessCentrality;var eG=rn({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),tG=function(e){return eG(e)},rG=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},nG=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},iN=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var o=0;o<r;o++)e[o*r+a]=e[o*r+a]/n}},aG=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var l=0;l<n;l++)for(var u=0;u<n;u++)a[i*n+u]+=e[i*n+l]*r[l*n+u]}return a},iG=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=aG(e,a,r);return e},oG=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return iN(a,r),a},sG=function(e,r,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),l=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==l)return!1}return!0},lG=function(e,r,n,a){for(var i=[],o=0;o<r;o++){for(var l=[],u=0;u<r;u++)Math.round(e[o*r+u]*1e3)/1e3>0&&l.push(n[u]);l.length!==0&&i.push(a.collection(l))}return i},uG=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},fG=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&uG(e[r],e[n])&&e.splice(n,1);return e},vE=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=tG(e),o={},l=0;l<r.length;l++)o[r[l].id()]=l;for(var u=r.length,f=u*u,c=new Array(f),h,g=0;g<f;g++)c[g]=0;for(var p=0;p<n.length;p++){var y=n[p],C=o[y.source().id()],E=o[y.target().id()],v=rG(y,i.attributes);c[C*u+E]+=v,c[E*u+C]+=v}nG(c,u,i.multFactor),iN(c,u);for(var x=!0,w=0;x&&w<i.maxIterations;)x=!1,h=iG(c,u,i.expandFactor),c=oG(h,u,i.inflateFactor),sG(c,h,f,4)||(x=!0),w++;var T=lG(c,u,r,a);return T=fG(T),T},cG={markovClustering:vE,mcl:vE},dG=function(e){return e},oN=function(e,r){return Math.abs(r-e)},pE=function(e,r,n){return e+oN(r,n)},gE=function(e,r,n){return e+Math.pow(n-r,2)},hG=function(e){return Math.sqrt(e)},vG=function(e,r,n){return Math.max(e,oN(r,n))},hl=function(e,r,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:dG,l=a,u,f,c=0;c<e;c++)u=r(c),f=n(c),l=i(l,u,f);return o(l)},Es={euclidean:function(e,r,n){return e>=2?hl(e,r,n,0,gE,hG):hl(e,r,n,0,pE)},squaredEuclidean:function(e,r,n){return hl(e,r,n,0,gE)},manhattan:function(e,r,n){return hl(e,r,n,0,pE)},max:function(e,r,n){return hl(e,r,n,-1/0,vG)}};Es["squared-euclidean"]=Es.squaredEuclidean;Es.squaredeuclidean=Es.squaredEuclidean;function Dc(t,e,r,n,a,i){var o;return pr(t)?o=t:o=Es[t]||Es.euclidean,e===0&&pr(t)?o(a,i):o(e,r,n,a,i)}var pG=rn({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),T1=function(e){return pG(e)},Jf=function(e,r,n,a,i){var o=i!=="kMedoids",l=o?function(h){return n[h]}:function(h){return a[h](n)},u=function(g){return a[g](r)},f=n,c=r;return Dc(e,a.length,l,u,f,c)},Mh=function(e,r,n){for(var a=n.length,i=new Array(a),o=new Array(a),l=new Array(r),u=null,f=0;f<a;f++)i[f]=e.min(n[f]).value,o[f]=e.max(n[f]).value;for(var c=0;c<r;c++){u=[];for(var h=0;h<a;h++)u[h]=Math.random()*(o[h]-i[h])+i[h];l[c]=u}return l},sN=function(e,r,n,a,i){for(var o=1/0,l=0,u=0;u<r.length;u++){var f=Jf(n,e,r[u],a,i);f<o&&(o=f,l=u)}return l},lN=function(e,r,n){for(var a=[],i=null,o=0;o<r.length;o++)i=r[o],n[i.id()]===e&&a.push(i);return a},gG=function(e,r,n){return Math.abs(r-e)<=n},yG=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-r[a][i]);if(o>n)return!1}return!0},mG=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},yE=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];mG(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<r;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},mE=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=Jf("manhattan",r[i],e,n,"kMedoids");return a},bG=function(e){var r=this.cy(),n=this.nodes(),a=null,i=T1(e),o=new Array(i.k),l={},u;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,u=Mh(n,i.k,i.attributes)):Br(i.testCentroids)==="object"?u=i.testCentroids:u=Mh(n,i.k,i.attributes):u=Mh(n,i.k,i.attributes);for(var f=!0,c=0;f&&c<i.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],l[a.id()]=sN(a,u,i.distance,i.attributes,"kMeans");f=!1;for(var g=0;g<i.k;g++){var p=lN(g,n,l);if(p.length!==0){for(var y=i.attributes.length,C=u[g],E=new Array(y),v=new Array(y),x=0;x<y;x++){v[x]=0;for(var w=0;w<p.length;w++)a=p[w],v[x]+=i.attributes[x](a);E[x]=v[x]/p.length,gG(E[x],C[x],i.sensitivityThreshold)||(f=!0)}u[g]=E,o[g]=r.collection(p)}}c++}return o},wG=function(e){var r=this.cy(),n=this.nodes(),a=null,i=T1(e),o=new Array(i.k),l,u={},f,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(Br(i.testCentroids)==="object"?l=i.testCentroids:l=yE(n,i.k)):l=yE(n,i.k);for(var h=!0,g=0;h&&g<i.maxIterations;){for(var p=0;p<n.length;p++)a=n[p],u[a.id()]=sN(a,l,i.distance,i.attributes,"kMedoids");h=!1;for(var y=0;y<l.length;y++){var C=lN(y,n,u);if(C.length!==0){c[y]=mE(l[y],C,i.attributes);for(var E=0;E<C.length;E++)f=mE(C[E],C,i.attributes),f<c[y]&&(c[y]=f,l[y]=C[E],h=!0);o[y]=r.collection(C)}}g++}return o},xG=function(e,r,n,a,i){for(var o,l,u=0;u<r.length;u++)for(var f=0;f<e.length;f++)a[u][f]=Math.pow(n[u][f],i.m);for(var c=0;c<e.length;c++)for(var h=0;h<i.attributes.length;h++){o=0,l=0;for(var g=0;g<r.length;g++)o+=a[g][c]*i.attributes[h](r[g]),l+=a[g][c];e[c][h]=o/l}},CG=function(e,r,n,a,i){for(var o=0;o<e.length;o++)r[o]=e[o].slice();for(var l,u,f,c=2/(i.m-1),h=0;h<n.length;h++)for(var g=0;g<a.length;g++){l=0;for(var p=0;p<n.length;p++)u=Jf(i.distance,a[g],n[h],i.attributes,"cmeans"),f=Jf(i.distance,a[g],n[p],i.attributes,"cmeans"),l+=Math.pow(u/f,c);e[g][h]=1/l}},EG=function(e,r,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var l,u,f=0;f<r.length;f++){l=-1/0,u=-1;for(var c=0;c<r[0].length;c++)r[f][c]>l&&(l=r[f][c],u=c);i[u].push(e[f])}for(var h=0;h<i.length;h++)i[h]=a.collection(i[h]);return i},bE=function(e){var r=this.cy(),n=this.nodes(),a=T1(e),i,o,l,u,f;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(a.k);l=new Array(n.length);for(var h=0;h<n.length;h++)l[h]=new Array(a.k);for(var g=0;g<n.length;g++){for(var p=0,y=0;y<a.k;y++)l[g][y]=Math.random(),p+=l[g][y];for(var C=0;C<a.k;C++)l[g][C]=l[g][C]/p}o=new Array(a.k);for(var E=0;E<a.k;E++)o[E]=new Array(a.attributes.length);f=new Array(n.length);for(var v=0;v<n.length;v++)f[v]=new Array(a.k);for(var x=!0,w=0;x&&w<a.maxIterations;)x=!1,xG(o,n,l,f,a),CG(l,u,o,n,a),yG(l,u,a.sensitivityThreshold)||(x=!0),w++;return i=EG(n,l,a,r),{clusters:i,degreeOfMembership:l}},TG={kMeans:bG,kMedoids:wG,fuzzyCMeans:bE,fcm:bE},SG=rn({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),AG={single:"min",complete:"max"},LG=function(e){var r=SG(e),n=AG[r.linkage];return n!=null&&(r.linkage=n),r},wE=function(e,r,n,a,i){for(var o=0,l=1/0,u,f=i.attributes,c=function(N,B){return Dc(i.distance,f.length,function(G){return f[G](N)},function(G){return f[G](B)},N,B)},h=0;h<e.length;h++){var g=e[h].key,p=n[g][a[g]];p<l&&(o=g,l=p)}if(i.mode==="threshold"&&l>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var y=r[o],C=r[a[o]],E;i.mode==="dendrogram"?E={left:y,right:C,key:y.key}:E={value:y.value.concat(C.value),key:y.key},e[y.index]=E,e.splice(C.index,1),r[y.key]=E;for(var v=0;v<e.length;v++){var x=e[v];y.key===x.key?u=1/0:i.linkage==="min"?(u=n[y.key][x.key],n[y.key][x.key]>n[C.key][x.key]&&(u=n[C.key][x.key])):i.linkage==="max"?(u=n[y.key][x.key],n[y.key][x.key]<n[C.key][x.key]&&(u=n[C.key][x.key])):i.linkage==="mean"?u=(n[y.key][x.key]*y.size+n[C.key][x.key]*C.size)/(y.size+C.size):i.mode==="dendrogram"?u=c(x.value,y.value):u=c(x.value[0],y.value[0]),n[y.key][x.key]=n[x.key][y.key]=u}for(var w=0;w<e.length;w++){var T=e[w].key;if(a[T]===y.key||a[T]===C.key){for(var A=T,_=0;_<e.length;_++){var D=e[_].key;n[T][D]<n[T][A]&&(A=D)}a[T]=A}e[w].index=w}return y.key=C.key=y.index=C.index=null,!0},us=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&us(e.left,r),e.right&&us(e.right,r)))},kb=function(e,r){if(!e)return"";if(e.left&&e.right){var n=kb(e.left,r),a=kb(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Ob=function(e,r,n){if(!e)return[];var a=[],i=[],o=[];return r===0?(e.left&&us(e.left,a),e.right&&us(e.right,i),o=a.concat(i),[n.collection(o)]):r===1?e.value?[n.collection(e.value)]:(e.left&&us(e.left,a),e.right&&us(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=Ob(e.left,r-1,n)),e.right&&(i=Ob(e.right,r-1,n)),a.concat(i))},xE=function(e){for(var r=this.cy(),n=this.nodes(),a=LG(e),i=a.attributes,o=function(w,T){return Dc(a.distance,i.length,function(A){return i[A](w)},function(A){return i[A](T)},w,T)},l=[],u=[],f=[],c=[],h=0;h<n.length;h++){var g={value:a.mode==="dendrogram"?n[h]:[n[h]],key:h,index:h};l[h]=g,c[h]=g,u[h]=[],f[h]=0}for(var p=0;p<l.length;p++)for(var y=0;y<=p;y++){var C=void 0;a.mode==="dendrogram"?C=p===y?1/0:o(l[p].value,l[y].value):C=p===y?1/0:o(l[p].value[0],l[y].value[0]),u[p][y]=C,u[y][p]=C,C<u[p][f[p]]&&(f[p]=y)}for(var E=wE(l,c,u,f,a);E;)E=wE(l,c,u,f,a);var v;return a.mode==="dendrogram"?(v=Ob(l[0],a.dendrogramDepth,r),a.addDendrogram&&kb(l[0],r)):(v=new Array(l.length),l.forEach(function(x,w){x.key=x.index=null,v[w]=r.collection(x.value)})),v},DG={hierarchicalClustering:xE,hca:xE},_G=rn({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),MG=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||vr("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||nt(n)||vr("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),_G(e)},RG=function(e,r,n,a){var i=function(l,u){return a[u](l)};return-Dc(e,a.length,function(o){return i(r,o)},function(o){return i(n,o)},r,n)},PG=function(e,r){var n=null;return r==="median"?n=Mz(e):r==="mean"?n=_z(e):r==="min"?n=Lz(e):r==="max"?n=Dz(e):n=r,n},NG=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},CE=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var o=-1,l=-1/0,u=0;u<n.length;u++){var f=n[u];r[i*e+f]>l&&(o=f,l=r[i*e+f])}o>0&&a.push(o)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},kG=function(e,r,n){for(var a=CE(e,r,n),i=0;i<n.length;i++){for(var o=[],l=0;l<a.length;l++)a[l]===n[i]&&o.push(l);for(var u=-1,f=-1/0,c=0;c<o.length;c++){for(var h=0,g=0;g<o.length;g++)h+=r[o[g]*e+o[c]];h>f&&(u=c,f=h)}n[i]=o[u]}return a=CE(e,r,n),a},EE=function(e){for(var r=this.cy(),n=this.nodes(),a=MG(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var l,u,f,c,h,g;l=n.length,u=l*l,f=new Array(u);for(var p=0;p<u;p++)f[p]=-1/0;for(var y=0;y<l;y++)for(var C=0;C<l;C++)y!==C&&(f[y*l+C]=RG(a.distance,n[y],n[C],a.attributes));c=PG(f,a.preference);for(var E=0;E<l;E++)f[E*l+E]=c;h=new Array(u);for(var v=0;v<u;v++)h[v]=0;g=new Array(u);for(var x=0;x<u;x++)g[x]=0;for(var w=new Array(l),T=new Array(l),A=new Array(l),_=0;_<l;_++)w[_]=0,T[_]=0,A[_]=0;for(var D=new Array(l*a.minIterations),P=0;P<D.length;P++)D[P]=0;var N;for(N=0;N<a.maxIterations;N++){for(var B=0;B<l;B++){for(var G=-1/0,F=-1/0,z=-1,M=0,R=0;R<l;R++)w[R]=h[B*l+R],M=g[B*l+R]+f[B*l+R],M>=G?(F=G,G=M,z=R):M>F&&(F=M);for(var k=0;k<l;k++)h[B*l+k]=(1-a.damping)*(f[B*l+k]-G)+a.damping*w[k];h[B*l+z]=(1-a.damping)*(f[B*l+z]-F)+a.damping*w[z]}for(var I=0;I<l;I++){for(var q=0,ae=0;ae<l;ae++)w[ae]=g[ae*l+I],T[ae]=Math.max(0,h[ae*l+I]),q+=T[ae];q-=T[I],T[I]=h[I*l+I],q+=T[I];for(var re=0;re<l;re++)g[re*l+I]=(1-a.damping)*Math.min(0,q-T[re])+a.damping*w[re];g[I*l+I]=(1-a.damping)*(q-T[I])+a.damping*w[I]}for(var K=0,W=0;W<l;W++){var Z=g[W*l+W]+h[W*l+W]>0?1:0;D[N%a.minIterations*l+W]=Z,K+=Z}if(K>0&&(N>=a.minIterations-1||N==a.maxIterations-1)){for(var U=0,V=0;V<l;V++){A[V]=0;for(var X=0;X<a.minIterations;X++)A[V]+=D[X*l+V];(A[V]===0||A[V]===a.minIterations)&&U++}if(U===l)break}}for(var ee=NG(l,h,g),se=kG(l,f,ee),te={},oe=0;oe<ee.length;oe++)te[ee[oe]]=[];for(var le=0;le<n.length;le++){var $=i[n[le].id()],ne=se[$];ne!=null&&te[ne].push(n[le])}for(var ie=new Array(ee.length),ue=0;ue<ee.length;ue++)ie[ue]=r.collection(te[ee[ue]]);return ie},OG={affinityPropagation:EE,ap:EE},IG=rn({root:void 0,directed:!1}),FG={hierholzer:function(e){if(!It(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=IG(e),a=n.root,i=n.directed,o=this,l=!1,u,f,c;a&&(c=mt(a)?this.filter(a)[0].id():a[0].id());var h={},g={};i?o.forEach(function(x){var w=x.id();if(x.isNode()){var T=x.indegree(!0),A=x.outdegree(!0),_=T-A,D=A-T;_==1?u?l=!0:u=w:D==1?f?l=!0:f=w:(D>1||_>1)&&(l=!0),h[w]=[],x.outgoers().forEach(function(P){P.isEdge()&&h[w].push(P.id())})}else g[w]=[void 0,x.target().id()]}):o.forEach(function(x){var w=x.id();if(x.isNode()){var T=x.degree(!0);T%2&&(u?f?l=!0:f=w:u=w),h[w]=[],x.connectedEdges().forEach(function(A){return h[w].push(A.id())})}else g[w]=[x.source().id(),x.target().id()]});var p={found:!1,trail:void 0};if(l)return p;if(f&&u)if(i){if(c&&f!=c)return p;c=f}else{if(c&&f!=c&&u!=c)return p;c||(c=f)}else c||(c=o[0].id());var y=function(w){for(var T=w,A=[w],_,D,P;h[T].length;)_=h[T].shift(),D=g[_][0],P=g[_][1],T!=P?(h[P]=h[P].filter(function(N){return N!=_}),T=P):!i&&T!=D&&(h[D]=h[D].filter(function(N){return N!=_}),T=D),A.unshift(_),A.unshift(T);return A},C=[],E=[];for(E=y(c);E.length!=1;)h[E[0]].length==0?(C.unshift(o.getElementById(E.shift())),C.unshift(o.getElementById(E.shift()))):E=y(E.shift()).concat(E);C.unshift(o.getElementById(E.shift()));for(var v in h)if(h[v].length)return p;return p.found=!0,p.trail=this.spawn(C,!0),p}},of=function(){var e=this,r={},n=0,a=0,i=[],o=[],l={},u=function(g,p){for(var y=o.length-1,C=[],E=e.spawn();o[y].x!=g||o[y].y!=p;)C.push(o.pop().edge),y--;C.push(o.pop().edge),C.forEach(function(v){var x=v.connectedNodes().intersection(e);E.merge(v),x.forEach(function(w){var T=w.id(),A=w.connectedEdges().intersection(e);E.merge(w),r[T].cutVertex?E.merge(A.filter(function(_){return _.isLoop()})):E.merge(A)})}),i.push(E)},f=function(g,p,y){g===y&&(a+=1),r[p]={id:n,low:n++,cutVertex:!1};var C=e.getElementById(p).connectedEdges().intersection(e);if(C.size()===0)i.push(e.spawn(e.getElementById(p)));else{var E,v,x,w;C.forEach(function(T){E=T.source().id(),v=T.target().id(),x=E===p?v:E,x!==y&&(w=T.id(),l[w]||(l[w]=!0,o.push({x:p,y:x,edge:T})),x in r?r[p].low=Math.min(r[p].low,r[x].id):(f(g,x,p),r[p].low=Math.min(r[p].low,r[x].low),r[p].id<=r[x].low&&(r[p].cutVertex=!0,u(p,x))))})}};e.forEach(function(h){if(h.isNode()){var g=h.id();g in r||(a=0,f(g,g),r[g].cutVertex=a>1)}});var c=Object.keys(r).filter(function(h){return r[h].cutVertex}).map(function(h){return e.getElementById(h)});return{cut:e.spawn(c),components:i}},BG={hopcroftTarjanBiconnected:of,htbc:of,htb:of,hopcroftTarjanBiconnectedComponents:of},sf=function(){var e=this,r={},n=0,a=[],i=[],o=e.spawn(e),l=function(f){i.push(f),r[f]={index:n,low:n++,explored:!1};var c=e.getElementById(f).connectedEdges().intersection(e);if(c.forEach(function(C){var E=C.target().id();E!==f&&(E in r||l(E),r[E].explored||(r[f].low=Math.min(r[f].low,r[E].low)))}),r[f].index===r[f].low){for(var h=e.spawn();;){var g=i.pop();if(h.merge(e.getElementById(g)),r[g].low=r[f].index,r[g].explored=!0,g===f)break}var p=h.edgesWith(h),y=h.merge(p);a.push(y),o=o.difference(y)}};return e.forEach(function(u){if(u.isNode()){var f=u.id();f in r||l(f)}}),{cut:o,components:a}},qG={tarjanStronglyConnected:sf,tsc:sf,tscc:sf,tarjanStronglyConnectedComponents:sf},uN={};[Yl,pz,gz,mz,wz,Cz,Sz,Qz,ms,bs,Nb,cG,TG,DG,OG,FG,BG,qG].forEach(function(t){wt(uN,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var fN=0,cN=1,dN=2,la=function(e){if(!(this instanceof la))return new la(e);this.id="Thenable/1.0.7",this.state=fN,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};la.prototype={fulfill:function(e){return TE(this,cN,"fulfillValue",e)},reject:function(e){return TE(this,dN,"rejectReason",e)},then:function(e,r){var n=this,a=new la;return n.onFulfilled.push(AE(e,a,"fulfill")),n.onRejected.push(AE(r,a,"reject")),hN(n),a.proxy}};var TE=function(e,r,n,a){return e.state===fN&&(e.state=r,e[n]=a,hN(e)),e},hN=function(e){e.state===cN?SE(e,"onFulfilled",e.fulfillValue):e.state===dN&&SE(e,"onRejected",e.rejectReason)},SE=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var l=0;l<a.length;l++)a[l](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},AE=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(o){r.reject(o);return}vN(r,i)}}},vN=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Br(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):vN(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};la.all=function(t){return new la(function(e,r){for(var n=new Array(t.length),a=0,i=function(u,f){n[u]=f,a++,a===t.length&&e(n)},o=0;o<t.length;o++)(function(l){var u=t[l],f=u!=null&&u.then!=null;if(f)u.then(function(h){i(l,h)},function(h){r(h)});else{var c=u;i(l,c)}})(o)})};la.resolve=function(t){return new la(function(e,r){e(t)})};la.reject=function(t){return new la(function(e,r){r(t)})};var Ls=typeof Promise<"u"?Promise:la,Ib=function(e,r,n){var a=v1(e),i=!a,o=this._private=wt({duration:1e3},r,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&pr(o.complete)&&o.completes.push(o.complete),i){var l=e.position();o.startPosition=o.startPosition||{x:l.x,y:l.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var u=e.pan();o.startPan={x:u.x,y:u.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},bo=Ib.prototype;wt(bo,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),Bn(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(f,c){var h=e[f];h!=null&&(e[f]=e[c],e[c]=h)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,l=e.startStyle[o];e.startStyle[o]=i,e.style[a]=l}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new Ls(function(a,i){n.push(function(){a()})})}});bo.complete=bo.completed;bo.run=bo.play;bo.running=bo.playing;var zG={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var l=a[o];l._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],l=this._private.cy||this,u=!i,f=!u;if(!l.styleEnabled())return this;var c=l.style();r=wt({},r,n);var h=Object.keys(r).length===0;if(h)return new Ib(o[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(f&&(r.style=c.getPropsList(r.style||r.css),r.css=void 0),f&&r.renderedPosition!=null){var g=r.renderedPosition,p=l.pan(),y=l.zoom();r.position=eN(g,y,p)}if(u&&r.panBy!=null){var C=r.panBy,E=l.pan();r.pan={x:E.x+C.x,y:E.y+C.y}}var v=r.center||r.centre;if(u&&v!=null){var x=l.getCenterPan(v.eles,r.zoom);x!=null&&(r.pan=x)}if(u&&r.fit!=null){var w=r.fit,T=l.getFitViewport(w.eles||w.boundingBox,w.padding);T!=null&&(r.pan=T.pan,r.zoom=T.zoom)}if(u&&It(r.zoom)){var A=l.getZoomedViewport(r.zoom);A!=null?(A.zoomed&&(r.zoom=A.zoom),A.panned&&(r.pan=A.pan)):r.zoom=null}return new Ib(o[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],l=this._private.cy||this;if(!l.styleEnabled())return this;n&&(r=wt({},r,n));for(var u=0;u<o.length;u++){var f=o[u],c=f.animated()&&(r.queue===void 0||r.queue),h=f.animation(r,c?{queue:!0}:void 0);h.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],l=this._private.cy||this;if(!l.styleEnabled())return this;for(var u=0;u<o.length;u++){for(var f=o[u],c=f._private,h=c.animation.current,g=0;g<h.length;g++){var p=h[g],y=p._private;n&&(y.duration=0)}r&&(c.animation.queue=[]),n||(c.animation.current=[])}return l.notify("draw"),this}}},Rh,LE;function _c(){if(LE)return Rh;LE=1;var t=Array.isArray;return Rh=t,Rh}var Ph,DE;function GG(){if(DE)return Ph;DE=1;var t=_c(),e=lu(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return Ph=a,Ph}var Nh,_E;function HG(){if(_E)return Nh;_E=1;var t=VP(),e=su(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!e(l))return!1;var u=t(l);return u==n||u==a||u==r||u==i}return Nh=o,Nh}var kh,ME;function UG(){if(ME)return kh;ME=1;var t=Sc(),e=t["__core-js_shared__"];return kh=e,kh}var Oh,RE;function WG(){if(RE)return Oh;RE=1;var t=UG(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return Oh=r,Oh}var Ih,PE;function VG(){if(PE)return Ih;PE=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Ih=r,Ih}var Fh,NE;function $G(){if(NE)return Fh;NE=1;var t=HG(),e=WG(),r=su(),n=VG(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,f=l.hasOwnProperty,c=RegExp("^"+u.call(f).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(g){if(!r(g)||e(g))return!1;var p=t(g)?c:i;return p.test(n(g))}return Fh=h,Fh}var Bh,kE;function YG(){if(kE)return Bh;kE=1;function t(e,r){return e==null?void 0:e[r]}return Bh=t,Bh}var qh,OE;function S1(){if(OE)return qh;OE=1;var t=$G(),e=YG();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return qh=r,qh}var zh,IE;function Mc(){if(IE)return zh;IE=1;var t=S1(),e=t(Object,"create");return zh=e,zh}var Gh,FE;function XG(){if(FE)return Gh;FE=1;var t=Mc();function e(){this.__data__=t?t(null):{},this.size=0}return Gh=e,Gh}var Hh,BE;function KG(){if(BE)return Hh;BE=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Hh=t,Hh}var Uh,qE;function jG(){if(qE)return Uh;qE=1;var t=Mc(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var l=o[i];return l===e?void 0:l}return n.call(o,i)?o[i]:void 0}return Uh=a,Uh}var Wh,zE;function ZG(){if(zE)return Wh;zE=1;var t=Mc(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Wh=n,Wh}var Vh,GE;function QG(){if(GE)return Vh;GE=1;var t=Mc(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Vh=r,Vh}var $h,HE;function JG(){if(HE)return $h;HE=1;var t=XG(),e=KG(),r=jG(),n=ZG(),a=QG();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var f=o[l];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,$h=i,$h}var Yh,UE;function e5(){if(UE)return Yh;UE=1;function t(){this.__data__=[],this.size=0}return Yh=t,Yh}var Xh,WE;function pN(){if(WE)return Xh;WE=1;function t(e,r){return e===r||e!==e&&r!==r}return Xh=t,Xh}var Kh,VE;function Rc(){if(VE)return Kh;VE=1;var t=pN();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return Kh=e,Kh}var jh,$E;function t5(){if($E)return jh;$E=1;var t=Rc(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return jh=n,jh}var Zh,YE;function r5(){if(YE)return Zh;YE=1;var t=Rc();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return Zh=e,Zh}var Qh,XE;function n5(){if(XE)return Qh;XE=1;var t=Rc();function e(r){return t(this.__data__,r)>-1}return Qh=e,Qh}var Jh,KE;function a5(){if(KE)return Jh;KE=1;var t=Rc();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return Jh=e,Jh}var ev,jE;function i5(){if(jE)return ev;jE=1;var t=e5(),e=t5(),r=r5(),n=n5(),a=a5();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var f=o[l];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,ev=i,ev}var tv,ZE;function o5(){if(ZE)return tv;ZE=1;var t=S1(),e=Sc(),r=t(e,"Map");return tv=r,tv}var rv,QE;function s5(){if(QE)return rv;QE=1;var t=JG(),e=i5(),r=o5();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return rv=n,rv}var nv,JE;function l5(){if(JE)return nv;JE=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return nv=t,nv}var av,eT;function Pc(){if(eT)return av;eT=1;var t=l5();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return av=e,av}var iv,tT;function u5(){if(tT)return iv;tT=1;var t=Pc();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return iv=e,iv}var ov,rT;function f5(){if(rT)return ov;rT=1;var t=Pc();function e(r){return t(this,r).get(r)}return ov=e,ov}var sv,nT;function c5(){if(nT)return sv;nT=1;var t=Pc();function e(r){return t(this,r).has(r)}return sv=e,sv}var lv,aT;function d5(){if(aT)return lv;aT=1;var t=Pc();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return lv=e,lv}var uv,iT;function h5(){if(iT)return uv;iT=1;var t=s5(),e=u5(),r=f5(),n=c5(),a=d5();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var f=o[l];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,uv=i,uv}var fv,oT;function v5(){if(oT)return fv;oT=1;var t=h5(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,l=a?a.apply(this,o):o[0],u=i.cache;if(u.has(l))return u.get(l);var f=n.apply(this,o);return i.cache=u.set(l,f)||u,f};return i.cache=new(r.Cache||t),i}return r.Cache=t,fv=r,fv}var cv,sT;function p5(){if(sT)return cv;sT=1;var t=v5(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return cv=r,cv}var dv,lT;function gN(){if(lT)return dv;lT=1;var t=p5(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,l,u,f){i.push(u?f.replace(r,"$1"):l||o)}),i});return dv=n,dv}var hv,uT;function yN(){if(uT)return hv;uT=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return hv=t,hv}var vv,fT;function g5(){if(fT)return vv;fT=1;var t=g1(),e=yN(),r=_c(),n=lu(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return e(l,o)+"";if(n(l))return i?i.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return vv=o,vv}var pv,cT;function mN(){if(cT)return pv;cT=1;var t=g5();function e(r){return r==null?"":t(r)}return pv=e,pv}var gv,dT;function bN(){if(dT)return gv;dT=1;var t=_c(),e=GG(),r=gN(),n=mN();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return gv=a,gv}var yv,hT;function A1(){if(hT)return yv;hT=1;var t=lu();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return yv=e,yv}var mv,vT;function y5(){if(vT)return mv;vT=1;var t=bN(),e=A1();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return mv=r,mv}var bv,pT;function m5(){if(pT)return bv;pT=1;var t=y5();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return bv=e,bv}var b5=m5(),w5=ou(b5),wv,gT;function x5(){if(gT)return wv;gT=1;var t=S1(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return wv=e,wv}var xv,yT;function C5(){if(yT)return xv;yT=1;var t=x5();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return xv=e,xv}var Cv,mT;function E5(){if(mT)return Cv;mT=1;var t=C5(),e=pN(),r=Object.prototype,n=r.hasOwnProperty;function a(i,o,l){var u=i[o];(!(n.call(i,o)&&e(u,l))||l===void 0&&!(o in i))&&t(i,o,l)}return Cv=a,Cv}var Ev,bT;function T5(){if(bT)return Ev;bT=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return Ev=r,Ev}var Tv,wT;function S5(){if(wT)return Tv;wT=1;var t=E5(),e=bN(),r=T5(),n=su(),a=A1();function i(o,l,u,f){if(!n(o))return o;l=e(l,o);for(var c=-1,h=l.length,g=h-1,p=o;p!=null&&++c<h;){var y=a(l[c]),C=u;if(y==="__proto__"||y==="constructor"||y==="prototype")return o;if(c!=g){var E=p[y];C=f?f(E,y,p):void 0,C===void 0&&(C=n(E)?E:r(l[c+1])?[]:{})}t(p,y,C),p=p[y]}return o}return Tv=i,Tv}var Sv,xT;function A5(){if(xT)return Sv;xT=1;var t=S5();function e(r,n,a){return r==null?r:t(r,n,a)}return Sv=e,Sv}var L5=A5(),D5=ou(L5),Av,CT;function _5(){if(CT)return Av;CT=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return Av=t,Av}var Lv,ET;function M5(){if(ET)return Lv;ET=1;var t=yN(),e=_5(),r=_c(),n=lu(),a=gN(),i=A1(),o=mN();function l(u){return r(u)?t(u,i):n(u)?[u]:e(a(o(u)))}return Lv=l,Lv}var R5=M5(),P5=ou(R5),N5={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=wt({},r,e),function(a,i){var o=e,l=this,u=l.length!==void 0,f=u?l:[l],c=u?l[0]:l;if(mt(a)){var h=a.indexOf(".")!==-1,g=h&&P5(a);if(o.allowGetting&&i===void 0){var p;return c&&(o.beforeGet(c),g&&c._private[o.field][a]===void 0?p=w5(c._private[o.field],g):p=c._private[o.field][a]),p}else if(o.allowSetting&&i!==void 0){var y=!o.immutableKeys[a];if(y){var C=OP({},a,i);o.beforeSet(l,C);for(var E=0,v=f.length;E<v;E++){var x=f[E];o.canSet(x)&&(g&&c._private[o.field][a]===void 0?D5(x._private[o.field],g,i):x._private[o.field][a]=i)}o.updateStyle&&l.updateStyle(),o.onSet(l),o.settingTriggersEvent&&l[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&It(a)){var w=a,T,A,_=Object.keys(w);o.beforeSet(l,w);for(var D=0;D<_.length;D++){T=_[D],A=w[T];var P=!o.immutableKeys[T];if(P)for(var N=0;N<f.length;N++){var B=f[N];o.canSet(B)&&(B._private[o.field][T]=A)}}o.updateStyle&&l.updateStyle(),o.onSet(l),o.settingTriggersEvent&&l[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&pr(a)){var G=a;l.on(o.bindingEvent,G)}else if(o.allowGetting&&a===void 0){var F;return c&&(o.beforeGet(c),F=c._private[o.field]),F}return l}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=wt({},r,e),function(a){var i=e,o=this,l=o.length!==void 0,u=l?o:[o];if(mt(a)){for(var f=a.split(/\s+/),c=f.length,h=0;h<c;h++){var g=f[h];if(!Di(g)){var p=!i.immutableKeys[g];if(p)for(var y=0,C=u.length;y<C;y++)u[y]._private[i.field][g]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var E=0,v=u.length;E<v;E++)for(var x=u[E]._private[i.field],w=Object.keys(x),T=0;T<w.length;T++){var A=w[T],_=!i.immutableKeys[A];_&&(x[A]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},k5={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new Ls(function(l,u){var f=function(p){i.off.apply(i,h),l(p)},c=o.concat([f]),h=c.concat([]);i.on.apply(i,c)})}}},Ut={};[zG,N5,k5].forEach(function(t){wt(Ut,t)});var O5={animate:Ut.animate(),animation:Ut.animation(),animated:Ut.animated(),clearQueue:Ut.clearQueue(),delay:Ut.delay(),delayAnimation:Ut.delayAnimation(),stop:Ut.stop()},Ef={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(y){return n.push(y)}),n}else Qt(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new As(e),o=0;o<r.length;o++){for(var l=r[o],u=l._private,f=u.classes,c=!1,h=0;h<e.length;h++){var g=e[h],p=f.has(g);if(!p){c=!0;break}}c||(c=f.size!==e.length),c&&(u.classes=i,a.push(l))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){Qt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],o=0,l=n.length;o<l;o++)for(var u=n[o],f=u._private.classes,c=!1,h=0;h<e.length;h++){var g=e[h],p=f.has(g),y=!1;r||a&&!p?(f.add(g),y=!0):(!r||a&&p)&&(f.delete(g),y=!0),!c&&y&&(i.push(u),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Ef.className=Ef.classNames=Ef.classes;var kt={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Fr,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};kt.variable="(?:[\\w-.]|(?:\\\\"+kt.metaChar+"))+";kt.className="(?:[\\w-]|(?:\\\\"+kt.metaChar+"))+";kt.value=kt.string+"|"+kt.number;kt.id=kt.variable;(function(){var t,e,r;for(t=kt.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],kt.comparatorOp+="|@"+e;for(t=kt.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(kt.comparatorOp+="|\\!"+e)})();var Xt=function(){return{checks:[]}},ct={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Fb=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return Iq(t.selector,e.selector)}),I5=function(){for(var t={},e,r=0;r<Fb.length;r++)e=Fb[r],t[e.selector]=e.matches;return t}(),F5=function(e,r){return I5[e](r)},B5="("+Fb.map(function(t){return t.selector}).join("|")+")",Qo=function(e){return e.replace(new RegExp("\\\\("+kt.metaChar+")","g"),function(r,n){return n})},vi=function(e,r,n){e[e.length-1]=n},Bb=[{name:"group",query:!0,regex:"("+kt.group+")",populate:function(e,r,n){var a=Ir(n,1),i=a[0];r.checks.push({type:ct.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:B5,populate:function(e,r,n){var a=Ir(n,1),i=a[0];r.checks.push({type:ct.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+kt.id+")",populate:function(e,r,n){var a=Ir(n,1),i=a[0];r.checks.push({type:ct.ID,value:Qo(i)})}},{name:"className",query:!0,regex:"\\.("+kt.className+")",populate:function(e,r,n){var a=Ir(n,1),i=a[0];r.checks.push({type:ct.CLASS,value:Qo(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+kt.variable+")\\s*\\]",populate:function(e,r,n){var a=Ir(n,1),i=a[0];r.checks.push({type:ct.DATA_EXIST,field:Qo(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+kt.variable+")\\s*("+kt.comparatorOp+")\\s*("+kt.value+")\\s*\\]",populate:function(e,r,n){var a=Ir(n,3),i=a[0],o=a[1],l=a[2],u=new RegExp("^"+kt.string+"$").exec(l)!=null;u?l=l.substring(1,l.length-1):l=parseFloat(l),r.checks.push({type:ct.DATA_COMPARE,field:Qo(i),operator:o,value:l})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+kt.boolOp+")\\s*("+kt.variable+")\\s*\\]",populate:function(e,r,n){var a=Ir(n,2),i=a[0],o=a[1];r.checks.push({type:ct.DATA_BOOL,field:Qo(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+kt.meta+")\\s*("+kt.comparatorOp+")\\s*("+kt.number+")\\s*\\]\\]",populate:function(e,r,n){var a=Ir(n,3),i=a[0],o=a[1],l=a[2];r.checks.push({type:ct.META_COMPARE,field:Qo(i),operator:o,value:parseFloat(l)})}},{name:"nextQuery",separator:!0,regex:kt.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var l=e[e.length++]=Xt();return l}},{name:"directedEdge",separator:!0,regex:kt.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Xt(),a=r,i=Xt();return n.checks.push({type:ct.DIRECTED_EDGE,source:a,target:i}),vi(e,r,n),e.edgeCount++,i}else{var o=Xt(),l=r,u=Xt();return o.checks.push({type:ct.NODE_SOURCE,source:l,target:u}),vi(e,r,o),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:kt.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Xt(),a=r,i=Xt();return n.checks.push({type:ct.UNDIRECTED_EDGE,nodes:[a,i]}),vi(e,r,n),e.edgeCount++,i}else{var o=Xt(),l=r,u=Xt();return o.checks.push({type:ct.NODE_NEIGHBOR,node:l,neighbor:u}),vi(e,r,o),u}}},{name:"child",separator:!0,regex:kt.child,populate:function(e,r){if(e.currentSubject==null){var n=Xt(),a=Xt(),i=e[e.length-1];return n.checks.push({type:ct.CHILD,parent:i,child:a}),vi(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Xt(),l=e[e.length-1],u=Xt(),f=Xt(),c=Xt(),h=Xt();return o.checks.push({type:ct.COMPOUND_SPLIT,left:l,right:u,subject:f}),f.checks=r.checks,r.checks=[{type:ct.TRUE}],h.checks.push({type:ct.TRUE}),u.checks.push({type:ct.PARENT,parent:h,child:c}),vi(e,l,o),e.currentSubject=f,e.compoundCount++,c}else{var g=Xt(),p=Xt(),y=[{type:ct.PARENT,parent:g,child:p}];return g.checks=r.checks,r.checks=y,e.compoundCount++,p}}},{name:"descendant",separator:!0,regex:kt.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Xt(),a=Xt(),i=e[e.length-1];return n.checks.push({type:ct.DESCENDANT,ancestor:i,descendant:a}),vi(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Xt(),l=e[e.length-1],u=Xt(),f=Xt(),c=Xt(),h=Xt();return o.checks.push({type:ct.COMPOUND_SPLIT,left:l,right:u,subject:f}),f.checks=r.checks,r.checks=[{type:ct.TRUE}],h.checks.push({type:ct.TRUE}),u.checks.push({type:ct.ANCESTOR,ancestor:h,descendant:c}),vi(e,l,o),e.currentSubject=f,e.compoundCount++,c}else{var g=Xt(),p=Xt(),y=[{type:ct.ANCESTOR,ancestor:g,descendant:p}];return g.checks=r.checks,r.checks=y,e.compoundCount++,p}}},{name:"subject",modifier:!0,regex:kt.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Wt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===ct.DIRECTED_EDGE?a.type=ct.NODE_TARGET:i===ct.UNDIRECTED_EDGE&&(a.type=ct.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Bb.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var q5=function(e){for(var r,n,a,i=0;i<Bb.length;i++){var o=Bb[i],l=o.name,u=e.match(o.regexObj);if(u!=null){n=u,r=o,a=l;var f=u[0];e=e.substring(f.length);break}}return{expr:r,match:n,name:a,remaining:e}},z5=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},G5=function(e){var r=this,n=r.inputText=e,a=r[0]=Xt();for(r.length=1,n=z5(n);;){var i=q5(n);if(i.expr==null)return Wt("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),l=i.expr.populate(r,a,o);if(l===!1)return!1;if(l!=null&&(a=l),n=i.remaining,n.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var f=0;f<r.length;f++){var c=r[f];if(c.compoundCount>0&&c.edgeCount>0)return Wt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Wt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Wt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},H5=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},r=function(c){return mt(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,h){var g=c.type,p=c.value;switch(g){case ct.GROUP:{var y=e(p);return y.substring(0,y.length-1)}case ct.DATA_COMPARE:{var C=c.field,E=c.operator;return"["+C+n(e(E))+r(p)+"]"}case ct.DATA_BOOL:{var v=c.operator,x=c.field;return"["+e(v)+x+"]"}case ct.DATA_EXIST:{var w=c.field;return"["+w+"]"}case ct.META_COMPARE:{var T=c.operator,A=c.field;return"[["+A+n(e(T))+r(p)+"]]"}case ct.STATE:return p;case ct.ID:return"#"+p;case ct.CLASS:return"."+p;case ct.PARENT:case ct.CHILD:return i(c.parent,h)+n(">")+i(c.child,h);case ct.ANCESTOR:case ct.DESCENDANT:return i(c.ancestor,h)+" "+i(c.descendant,h);case ct.COMPOUND_SPLIT:{var _=i(c.left,h),D=i(c.subject,h),P=i(c.right,h);return _+(_.length>0?" ":"")+D+P}case ct.TRUE:return""}},i=function(c,h){return c.checks.reduce(function(g,p,y){return g+(h===c&&y===0?"$":"")+a(p,h)},"")},o="",l=0;l<this.length;l++){var u=this[l];o+=i(u,u.subject),this.length>1&&l<this.length-1&&(o+=", ")}return this.toStringCache=o,o},U5={parse:G5,toString:H5},wN=function(e,r,n){var a,i=mt(e),o=nt(e),l=mt(n),u,f,c=!1,h=!1,g=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),h=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),c=!0),(i||l||c)&&(u=!i&&!o?"":""+e,f=""+n),c&&(e=u=u.toLowerCase(),n=f=f.toLowerCase()),r){case"*=":a=u.indexOf(f)>=0;break;case"$=":a=u.indexOf(f,u.length-f.length)>=0;break;case"^=":a=u.indexOf(f)===0;break;case"=":a=e===n;break;case">":g=!0,a=e>n;break;case">=":g=!0,a=e>=n;break;case"<":g=!0,a=e<n;break;case"<=":g=!0,a=e<=n;break;default:a=!1;break}return h&&(e!=null||!g)&&(a=!a),a},W5=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},V5=function(e){return e!==void 0},L1=function(e,r){return e.data(r)},$5=function(e,r){return e[r]()},yr=[],lr=function(e,r){return e.checks.every(function(n){return yr[n.type](n,r)})};yr[ct.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};yr[ct.STATE]=function(t,e){var r=t.value;return F5(r,e)};yr[ct.ID]=function(t,e){var r=t.value;return e.id()===r};yr[ct.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};yr[ct.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return wN($5(e,r),n,a)};yr[ct.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return wN(L1(e,r),n,a)};yr[ct.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return W5(L1(e,r),n)};yr[ct.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,V5(L1(e,r))};yr[ct.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return lr(r,a)&&lr(n,i)||lr(n,a)&&lr(r,i)};yr[ct.NODE_NEIGHBOR]=function(t,e){return lr(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&lr(t.neighbor,r)})};yr[ct.DIRECTED_EDGE]=function(t,e){return lr(t.source,e.source())&&lr(t.target,e.target())};yr[ct.NODE_SOURCE]=function(t,e){return lr(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&lr(t.target,r)})};yr[ct.NODE_TARGET]=function(t,e){return lr(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&lr(t.source,r)})};yr[ct.CHILD]=function(t,e){return lr(t.child,e)&&lr(t.parent,e.parent())};yr[ct.PARENT]=function(t,e){return lr(t.parent,e)&&e.children().some(function(r){return lr(t.child,r)})};yr[ct.DESCENDANT]=function(t,e){return lr(t.descendant,e)&&e.ancestors().some(function(r){return lr(t.ancestor,r)})};yr[ct.ANCESTOR]=function(t,e){return lr(t.ancestor,e)&&e.descendants().some(function(r){return lr(t.descendant,r)})};yr[ct.COMPOUND_SPLIT]=function(t,e){return lr(t.subject,e)&&lr(t.left,e)&&lr(t.right,e)};yr[ct.TRUE]=function(){return!0};yr[ct.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};yr[ct.FILTER]=function(t,e){var r=t.value;return r(e)};var Y5=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===ct.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var o=0;o<r.length;o++){var l=r[o];if(lr(l,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},X5=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(lr(a,e))return!0}return!1},K5={matches:X5,filter:Y5},Ri=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||mt(e)&&e.match(/^\s*$/)||(Bn(e)?this.addQuery({checks:[{type:ct.COLLECTION,value:e.collection()}]}):pr(e)?this.addQuery({checks:[{type:ct.FILTER,value:e}]}):mt(e)?this.parse(e)||(this.invalid=!0):vr("A selector must be created from a string; found "))},Pi=Ri.prototype;[U5,K5].forEach(function(t){return wt(Pi,t)});Pi.text=function(){return this.inputText};Pi.size=function(){return this.length};Pi.eq=function(t){return this[t]};Pi.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};Pi.addQuery=function(t){this[this.length++]=t};Pi.selector=Pi.toString;var Ei={allAre:function(e){var r=new Ri(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Ri(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Ei.allAreNeighbours=Ei.allAreNeighbors;Ei.has=Ei.contains;Ei.equal=Ei.equals=Ei.same;var $n=function(e,r){return function(a,i,o,l){var u=a,f=this,c;if(u==null?c="":Bn(u)&&u.length===1&&(c=u.id()),f.length===1&&c){var h=f[0]._private,g=h.traversalCache=h.traversalCache||{},p=g[r]=g[r]||[],y=yo(c),C=p[y];return C||(p[y]=e.call(f,a,i,o,l))}else return e.call(f,a,i,o,l)}},Ts={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&r.push(o)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:$n(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];r.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function D1(t,e,r,n){for(var a=[],i=new As,o=t.cy(),l=o.hasCompoundNodes(),u=0;u<t.length;u++){var f=t[u];r?a.push(f):l&&n(a,i,f)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),l&&n(a,i,c)}return t}function xN(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}Ts.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return D1(this,t,e,xN)};function CN(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}Ts.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return D1(this,t,e,CN)};function j5(t,e,r){CN(t,e,r),xN(t,e,r)}Ts.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return D1(this,t,e,j5)};Ts.ancestors=Ts.parents;var jl,EN;jl=EN={data:Ut.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ut.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ut.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ut.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ut.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ut.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};jl.attr=jl.data;jl.removeAttr=jl.removeData;var Z5=EN,Nc={};function Dv(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,o=0;o<i.length;o++){var l=i[o];!e&&l.isLoop()||(n+=t(a,l))}return n}else return}}wt(Nc,{degree:Dv(function(t,e){return e.source().same(e.target())?2:1}),indegree:Dv(function(t,e){return e.target().same(t)?1:0}),outdegree:Dv(function(t,e){return e.source().same(t)?1:0})});function Jo(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],l=o[t](r);l!==void 0&&(n===void 0||e(l,n))&&(n=l)}return n}}wt(Nc,{minDegree:Jo("degree",function(t,e){return t<e}),maxDegree:Jo("degree",function(t,e){return t>e}),minIndegree:Jo("indegree",function(t,e){return t<e}),maxIndegree:Jo("indegree",function(t,e){return t>e}),minOutdegree:Jo("outdegree",function(t,e){return t<e}),maxOutdegree:Jo("outdegree",function(t,e){return t>e})});wt(Nc,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var ia,TN,SN=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,l={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};i.isParent()&&!(l.x===0&&l.y===0)&&i.children().shift(l,n),i.dirtyBoundingBoxCache()}}},TT={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){SN(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};ia=TN={position:Ut.data(TT),silentPosition:Ut.data(wt({},TT,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){SN(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(It(e))r?this.silentPosition(e):this.position(e);else if(pr(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],l=void 0;(l=n(o,i))&&(r?o.silentPosition(l):o.position(l))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(It(e)?(a={x:nt(e.x)?e.x:0,y:nt(e.y)?e.y:0},n=r):mt(e)&&nt(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var l=this[o];if(!(i.hasCompoundNodes()&&l.isChild()&&l.ancestors().anySame(this))){var u=l.position(),f={x:u.x+a.x,y:u.y+a.y};n?l.silentPosition(f):l.position(f)}}i.endBatch()}return this},silentShift:function(e,r){return It(e)?this.shift(e,!0):mt(e)&&nt(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),l=It(e)?e:void 0,u=l!==void 0||r!==void 0&&mt(e);if(n&&n.isNode())if(u)for(var f=0;f<this.length;f++){var c=this[f];r!==void 0?c.position(e,(r-o[e])/i):l!==void 0&&c.position(eN(l,i,o))}else{var h=n.position();return l=Lc(h,i,o),e===void 0?l:l[e]}else if(!u)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=It(e)?e:void 0,o=i!==void 0||r!==void 0&&mt(e),l=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var u=0;u<this.length;u++){var f=this[u],c=l?f.parent():null,h=c&&c.length>0,g=h;h&&(c=c[0]);var p=g?c.position():{x:0,y:0};r!==void 0?f.position(e,r+p[e]):i!==void 0&&f.position({x:i.x+p.x,y:i.y+p.y})}else{var y=n.position(),C=l?n.parent():null,E=C&&C.length>0,v=E;E&&(C=C[0]);var x=v?C.position():{x:0,y:0};return i={x:y.x-x.x,y:y.y-x.y},e===void 0?i:i[e]}else if(!o)return;return this}};ia.modelPosition=ia.point=ia.position;ia.modelPositions=ia.points=ia.positions;ia.renderedPoint=ia.renderedPosition;ia.relativePoint=ia.relativePosition;var Q5=TN,ws,Fi;ws=Fi={};Fi.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,l=e.y1*n+a.y,u=e.y2*n+a.y;return{x1:i,x2:o,y1:l,y2:u,w:o-i,h:u-l}};Fi.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Fi.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(o){if(!o.isParent())return;var l=o._private,u=o.children(),f=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},h=u.boundingBox({includeLabels:f,includeOverlays:!1,useCache:!1}),g=l.position;(h.w===0||h.h===0)&&(h={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},h.x1=g.x-h.w/2,h.x2=g.x+h.w/2,h.y1=g.y-h.h/2,h.y2=g.y+h.h/2);function p(N,B,G){var F=0,z=0,M=B+G;return N>0&&M>0&&(F=B/M*N,z=G/M*N),{biasDiff:F,biasComplementDiff:z}}function y(N,B,G,F){if(G.units==="%")switch(F){case"width":return N>0?G.pfValue*N:0;case"height":return B>0?G.pfValue*B:0;case"average":return N>0&&B>0?G.pfValue*(N+B)/2:0;case"min":return N>0&&B>0?N>B?G.pfValue*B:G.pfValue*N:0;case"max":return N>0&&B>0?N>B?G.pfValue*N:G.pfValue*B:0;default:return 0}else return G.units==="px"?G.pfValue:0}var C=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(C=C*100/c.width.val);var E=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(E=E*100/c.width.val);var v=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(v=v*100/c.height.val);var x=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(x=x*100/c.height.val);var w=p(c.width.val-h.w,C,E),T=w.biasDiff,A=w.biasComplementDiff,_=p(c.height.val-h.h,v,x),D=_.biasDiff,P=_.biasComplementDiff;l.autoPadding=y(h.w,h.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),l.autoWidth=Math.max(h.w,c.width.val),g.x=(-T+h.x1+h.x2+A)/2,l.autoHeight=Math.max(h.h,c.height.val),g.y=(-D+h.y1+h.y2+P)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var Wn=function(e){return e===1/0||e===-1/0?0:e},na=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},so=function(e,r){return r==null?e:na(e,r.x1,r.y1,r.x2,r.y2)},vl=function(e,r,n){return Mn(e,r,n)},lf=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,o=i.arrowWidth/2,l=r.pstyle(n+"-arrow-shape").value,u,f;if(l!=="none"){n==="source"?(u=i.srcX,f=i.srcY):n==="target"?(u=i.tgtX,f=i.tgtY):(u=i.midX,f=i.midY);var c=a.arrowBounds=a.arrowBounds||{},h=c[n]=c[n]||{};h.x1=u-o,h.y1=f-o,h.x2=u+o,h.y2=f+o,h.w=h.x2-h.x1,h.h=h.y2-h.y1,xf(h,1),na(e,h.x1,h.y1,h.x2,h.y2)}}},_v=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,o=i.rstyle,l=r.pstyle(a+"label").strValue;if(l){var u=r.pstyle("text-halign"),f=r.pstyle("text-valign"),c=vl(o,"labelWidth",n),h=vl(o,"labelHeight",n),g=vl(o,"labelX",n),p=vl(o,"labelY",n),y=r.pstyle(a+"text-margin-x").pfValue,C=r.pstyle(a+"text-margin-y").pfValue,E=r.isEdge(),v=r.pstyle(a+"text-rotation"),x=r.pstyle("text-outline-width").pfValue,w=r.pstyle("text-border-width").pfValue,T=w/2,A=r.pstyle("text-background-padding").pfValue,_=2,D=h,P=c,N=P/2,B=D/2,G,F,z,M;if(E)G=g-N,F=g+N,z=p-B,M=p+B;else{switch(u.value){case"left":G=g-P,F=g;break;case"center":G=g-N,F=g+N;break;case"right":G=g,F=g+P;break}switch(f.value){case"top":z=p-D,M=p;break;case"center":z=p-B,M=p+B;break;case"bottom":z=p,M=p+D;break}}var R=y-Math.max(x,T)-A-_,k=y+Math.max(x,T)+A+_,I=C-Math.max(x,T)-A-_,q=C+Math.max(x,T)+A+_;G+=R,F+=k,z+=I,M+=q;var ae=n||"main",re=i.labelBounds,K=re[ae]=re[ae]||{};K.x1=G,K.y1=z,K.x2=F,K.y2=M,K.w=F-G,K.h=M-z,K.leftPad=R,K.rightPad=k,K.topPad=I,K.botPad=q;var W=E&&v.strValue==="autorotate",Z=v.pfValue!=null&&v.pfValue!==0;if(W||Z){var U=W?vl(i.rstyle,"labelAngle",n):v.pfValue,V=Math.cos(U),X=Math.sin(U),ee=(G+F)/2,se=(z+M)/2;if(!E){switch(u.value){case"left":ee=F;break;case"right":ee=G;break}switch(f.value){case"top":se=M;break;case"bottom":se=z;break}}var te=function(ge,Ee){return ge=ge-ee,Ee=Ee-se,{x:ge*V-Ee*X+ee,y:ge*X+Ee*V+se}},oe=te(G,z),le=te(G,M),$=te(F,z),ne=te(F,M);G=Math.min(oe.x,le.x,$.x,ne.x),F=Math.max(oe.x,le.x,$.x,ne.x),z=Math.min(oe.y,le.y,$.y,ne.y),M=Math.max(oe.y,le.y,$.y,ne.y)}var ie=ae+"Rot",ue=re[ie]=re[ie]||{};ue.x1=G,ue.y1=z,ue.x2=F,ue.y2=M,ue.w=F-G,ue.h=M-z,na(e,G,z,F,M),na(i.labelBounds.all,G,z,F,M)}return e}},J5=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value;if(n>0&&a>0){var i=r.pstyle("outline-offset").value,o=r.pstyle("shape").value,l=a+i,u=(e.w+l*2)/e.w,f=(e.h+l*2)/e.h,c=0,h=0;["diamond","pentagon","round-triangle"].includes(o)?(u=(e.w+l*2.4)/e.w,h=-l/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?u=(e.w+l*2.4)/e.w:o==="star"?(u=(e.w+l*2.8)/e.w,f=(e.h+l*2.6)/e.h,h=-l/3.8):o==="triangle"?(u=(e.w+l*2.8)/e.w,f=(e.h+l*2.4)/e.h,h=-l/1.4):o==="vee"&&(u=(e.w+l*4.4)/e.w,f=(e.h+l*3.8)/e.h,h=-l*.5);var g=e.h*f-e.h,p=e.w*u-e.w;if(Cf(e,[Math.ceil(g/2),Math.ceil(p/2)]),c!=0||h!==0){var y=Iz(e,c,h);tN(e,y)}}}},eH=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=kn(),l=e._private,u=e.isNode(),f=e.isEdge(),c,h,g,p,y,C,E=l.rstyle,v=u&&a?e.pstyle("bounds-expansion").pfValue:[0],x=function(me){return me.pstyle("display").value!=="none"},w=!a||x(e)&&(!f||x(e.source())&&x(e.target()));if(w){var T=0,A=0;a&&r.includeOverlays&&(T=e.pstyle("overlay-opacity").value,T!==0&&(A=e.pstyle("overlay-padding").value));var _=0,D=0;a&&r.includeUnderlays&&(_=e.pstyle("underlay-opacity").value,_!==0&&(D=e.pstyle("underlay-padding").value));var P=Math.max(A,D),N=0,B=0;if(a&&(N=e.pstyle("width").pfValue,B=N/2),u&&r.includeNodes){var G=e.position();y=G.x,C=G.y;var F=e.outerWidth(),z=F/2,M=e.outerHeight(),R=M/2;c=y-z,h=y+z,g=C-R,p=C+R,na(o,c,g,h,p),a&&r.includeOutlines&&J5(o,e)}else if(f&&r.includeEdges)if(a&&!i){var k=e.pstyle("curve-style").strValue;if(c=Math.min(E.srcX,E.midX,E.tgtX),h=Math.max(E.srcX,E.midX,E.tgtX),g=Math.min(E.srcY,E.midY,E.tgtY),p=Math.max(E.srcY,E.midY,E.tgtY),c-=B,h+=B,g-=B,p+=B,na(o,c,g,h,p),k==="haystack"){var I=E.haystackPts;if(I&&I.length===2){if(c=I[0].x,g=I[0].y,h=I[1].x,p=I[1].y,c>h){var q=c;c=h,h=q}if(g>p){var ae=g;g=p,p=ae}na(o,c-B,g-B,h+B,p+B)}}else if(k==="bezier"||k==="unbundled-bezier"||k.endsWith("segments")||k.endsWith("taxi")){var re;switch(k){case"bezier":case"unbundled-bezier":re=E.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":re=E.linePts;break}if(re!=null)for(var K=0;K<re.length;K++){var W=re[K];c=W.x-B,h=W.x+B,g=W.y-B,p=W.y+B,na(o,c,g,h,p)}}}else{var Z=e.source(),U=Z.position(),V=e.target(),X=V.position();if(c=U.x,h=X.x,g=U.y,p=X.y,c>h){var ee=c;c=h,h=ee}if(g>p){var se=g;g=p,p=se}c-=B,h+=B,g-=B,p+=B,na(o,c,g,h,p)}if(a&&r.includeEdges&&f&&(lf(o,e,"mid-source"),lf(o,e,"mid-target"),lf(o,e,"source"),lf(o,e,"target")),a){var te=e.pstyle("ghost").value==="yes";if(te){var oe=e.pstyle("ghost-offset-x").pfValue,le=e.pstyle("ghost-offset-y").pfValue;na(o,o.x1+oe,o.y1+le,o.x2+oe,o.y2+le)}}var $=l.bodyBounds=l.bodyBounds||{};cE($,o),Cf($,v),xf($,1),a&&(c=o.x1,h=o.x2,g=o.y1,p=o.y2,na(o,c-P,g-P,h+P,p+P));var ne=l.overlayBounds=l.overlayBounds||{};cE(ne,o),Cf(ne,v),xf(ne,1);var ie=l.labelBounds=l.labelBounds||{};ie.all!=null?Oz(ie.all):ie.all=kn(),a&&r.includeLabels&&(r.includeMainLabels&&_v(o,e,null),f&&(r.includeSourceLabels&&_v(o,e,"source"),r.includeTargetLabels&&_v(o,e,"target")))}return o.x1=Wn(o.x1),o.y1=Wn(o.y1),o.x2=Wn(o.x2),o.y2=Wn(o.y2),o.w=Wn(o.x2-o.x1),o.h=Wn(o.y2-o.y1),o.w>0&&o.h>0&&w&&(Cf(o,v),xf(o,1)),o},AN=function(e){var r=0,n=function(o){return(o?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},LN=function(e){var r=function(l){return Math.round(l)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return iE([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=e.position();return iE([r(i.x),r(i.y)])}},ST=function(e,r){var n=e._private,a,i=e.isEdge(),o=r==null?AT:AN(r),l=o===AT;if(n.bbCache==null?(a=eH(e,Zl),n.bbCache=a,n.bbCachePosKey=LN(e)):a=n.bbCache,!l){var u=e.isNode();a=kn(),(r.includeNodes&&u||r.includeEdges&&!u)&&(r.includeOverlays?so(a,n.overlayBounds):so(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?so(a,n.labelBounds.all):(r.includeMainLabels&&so(a,n.labelBounds.mainRot),r.includeSourceLabels&&so(a,n.labelBounds.sourceRot),r.includeTargetLabels&&so(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Zl={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},AT=AN(Zl),LT=rn(Zl);Fi.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=xs(function(c){var h=c._private;return h.bbCache==null||h.styleDirty||h.bbCachePosKey!==LN(c)},function(c){return c.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=Zl:t=LT(t),e=ST(this[0],t);else{e=kn(),t=t||Zl;var a=LT(t),i=this,o=i.cy(),l=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),l&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<i.length;u++){var f=i[u];n(f)&&f.dirtyBoundingBoxCache(),so(e,ST(f,a))}}return e.x1=Wn(e.x1),e.y1=Wn(e.y1),e.x2=Wn(e.x2),e.y2=Wn(e.y2),e.w=Wn(e.x2-e.x1),e.h=Wn(e.y2-e.y1),e};Fi.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Fi.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(f){return f.isParent()}),e=e.not(a)),It(t)){var i=t;t=function(){return i}}var o=function(c,h){return c._private.bbAtOldPos=t(c,h)},l=function(c){return c._private.bbAtOldPos};r.startBatch(),e.forEach(o).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var u=kz(this.boundingBox({useCache:!1}));return e.silentPositions(l),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),u};ws.boundingbox=ws.bb=ws.boundingBox;ws.renderedBoundingbox=ws.renderedBoundingBox;var tH=Fi,Cl,cu;Cl=cu={};var DN=function(e){e.uppercaseName=WC(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=WC(e.outerName),Cl[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var l=n.pstyle(e.name);switch(l.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return l.pfValue}}else return 1},Cl["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var l=n[e.name](),u=n.pstyle("border-position").value,f;u==="center"?f=n.pstyle("border-width").pfValue:u==="outside"?f=2*n.pstyle("border-width").pfValue:f=0;var c=2*n.padding();return l+f+c}else return 1},Cl["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},Cl["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};DN({name:"width"});DN({name:"height"});cu.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};cu.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};cu.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var rH=cu,nH=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},aH=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return Lc(r(e),n.zoom(),n.pan())}},iH=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(o){return Lc(o,i,a)})}},oH=function(e){return e.renderer().getControlPoints(e)},sH=function(e){return e.renderer().getSegmentPoints(e)},lH=function(e){return e.renderer().getSourceEndpoint(e)},uH=function(e){return e.renderer().getTargetEndpoint(e)},fH=function(e){return e.renderer().getEdgeMidpoint(e)},DT={controlPoints:{get:oH,mult:!0},segmentPoints:{get:sH,mult:!0},sourceEndpoint:{get:lH},targetEndpoint:{get:uH},midpoint:{get:fH}},cH=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},dH=Object.keys(DT).reduce(function(t,e){var r=DT[e],n=cH(e);return t[e]=function(){return nH(this,r.get)},r.mult?t[n]=function(){return iH(this,r.get)}:t[n]=function(){return aH(this,r.get)},t},{}),hH=wt({},Q5,tH,rH,dH);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var _N=function(e,r){this.recycle(e,r)};function pl(){return!1}function uf(){return!0}_N.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=pl,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?uf:pl):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=uf;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=uf;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=uf,this.stopPropagation()},isDefaultPrevented:pl,isPropagationStopped:pl,isImmediatePropagationStopped:pl};var MN=/^([^.]+)(\.(?:[^.]+))?$/,vH=".*",RN={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},_T=Object.keys(RN),pH={};function kc(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pH,e=arguments.length>1?arguments[1]:void 0,r=0;r<_T.length;r++){var n=_T[r];this[n]=t[n]||RN[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Ni=kc.prototype,PN=function(e,r,n,a,i,o,l){pr(a)&&(i=a,a=null),l&&(o==null?o=l:o=wt({},o,l));for(var u=Qt(n)?n:n.split(/\s+/),f=0;f<u.length;f++){var c=u[f];if(!Di(c)){var h=c.match(MN);if(h){var g=h[1],p=h[2]?h[2]:null,y=r(e,c,g,p,a,i,o);if(y===!1)break}}}},MT=function(e,r){return e.addEventFields(e.context,r),new _N(r.type,r)},gH=function(e,r,n){if(Sq(n)){r(e,n);return}else if(It(n)){r(e,MT(e,n));return}for(var a=Qt(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!Di(o)){var l=o.match(MN);if(l){var u=l[1],f=l[2]?l[2]:null,c=MT(e,{type:u,namespace:f,target:e.context});r(e,c)}}}};Ni.on=Ni.addListener=function(t,e,r,n,a){return PN(this,function(i,o,l,u,f,c,h){pr(c)&&i.listeners.push({event:o,callback:c,type:l,namespace:u,qualifier:f,conf:h})},t,e,r,n,a),this};Ni.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};Ni.removeListener=Ni.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=az(this.listeners));for(var i=this.listeners,o=function(f){var c=i[f];PN(a,function(h,g,p,y,C,E){if((c.type===p||t==="*")&&(!y&&c.namespace!==".*"||c.namespace===y)&&(!C||h.qualifierCompare(c.qualifier,C))&&(!E||c.callback===E))return i.splice(f,1),!1},t,e,r,n)},l=i.length-1;l>=0;l--)o(l);return this};Ni.removeAllListeners=function(){return this.removeListener("*")};Ni.emit=Ni.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,Qt(e)||(e=[e]),gH(this,function(i,o){r!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}],a=n.length);for(var l=function(){var c=n[u];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===vH)&&i.eventMatches(i.context,c,o)){var h=[o];e!=null&&oz(h,e),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(y){return y!==c}));var g=i.callbackContext(i.context,c,o),p=c.callback.apply(g,h);i.afterEmit(i.context,c,o),p===!1&&(o.stopPropagation(),o.preventDefault())}},u=0;u<a;u++)l();i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},t),this.emitting--,this};var yH={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&iu(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},ff=function(e){return mt(e)?new Ri(e):e},NN={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new kc(yH,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=ff(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=ff(r),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=ff(r),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=ff(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};Ut.eventAliasesOn(NN);var kN={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(mt(e)||Bn(e))return new Ri(e).filter(this);if(pr(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],l=r?e.apply(r,[o,i,a]):e(o,i,a);l&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){mt(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(mt(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,l=o?a:i,u=o?i:a,f=0;f<l.length;f++){var c=l[f];u.has(c)&&n.push(c)}return n},xor:function(e){var r=this._private.cy;mt(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,o=function(u,f){for(var c=0;c<u.length;c++){var h=u[c],g=h._private.data.id,p=f.hasElementWithId(g);p||n.push(h)}};return o(a,i),o(i,a),n},diff:function(e){var r=this._private.cy;mt(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,l=e,u=function(c,h,g){for(var p=0;p<c.length;p++){var y=c[p],C=y._private.data.id,E=h.hasElementWithId(C);E?i.merge(y):g.push(y)}};return u(o,l,n),u(l,o,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(mt(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],l=!this.has(o);l&&a.push(o)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&mt(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,o=0;o<e.length;o++){var l=e[o],u=l._private.data.id,f=!i.has(u);if(f){var c=this.length++;this[c]=l,i.set(u,{ele:l,index:c})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var l=this.length-1,u=this[l],f=u._private.data.id;this[l]=void 0,this[e]=u,i.set(f,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&mt(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],l=r?e.apply(r,[o,i,a]):e(o,i,a);n.push(l)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var l=i[o],u=r?e.apply(r,[l,o,i]):e(l,o,i);u>n&&(n=u,a=l)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var l=i[o],u=r?e.apply(r,[l,o,i]):e(l,o,i);u<n&&(n=u,a=l)}return{value:n,ele:a}}},qt=kN;qt.u=qt["|"]=qt["+"]=qt.union=qt.or=qt.add;qt["\\"]=qt["!"]=qt["-"]=qt.difference=qt.relativeComplement=qt.subtract=qt.not;qt.n=qt["&"]=qt["."]=qt.and=qt.intersection=qt.intersect;qt["^"]=qt["(+)"]=qt["(-)"]=qt.symmetricDifference=qt.symdiff=qt.xor;qt.fnFilter=qt.filterFn=qt.stdFilter=qt.filter;qt.complement=qt.abscomp=qt.absoluteComplement;var mH={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},ON=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var h=c.pstyle("z-compound-depth");return h.value==="auto"?a?c.zDepth():0:h.value==="bottom"?-1:h.value==="top"?y1:0}var o=i(e)-i(r);if(o!==0)return o;function l(c){var h=c.pstyle("z-index-compare");return h.value==="auto"&&c.isNode()?1:0}var u=l(e)-l(r);if(u!==0)return u;var f=e.pstyle("z-index").value-r.pstyle("z-index").value;return f!==0?f:e.poolIndex()-r.poolIndex()},ec={forEach:function(e,r){if(pr(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=r?e.apply(r,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!pr(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(ON)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:y1-1}else{var i=r.source,o=r.target,l=i.zDepth(),u=o.zDepth();return Math.max(l,u,0)}}}};ec.each=ec.forEach;var bH=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":Br(Symbol))!=e&&Br(Symbol.iterator)!=e;r&&(ec[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return OP({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};bH();var wH=rn({nodeDimensionsIncludeLabels:!1}),Tf={layoutDimensions:function(e){e=wH(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(A){return!A.isParent()}),i=this.cy(),o=r.eles,l=function(_){return _.id()},u=xs(n,l);e.emit({type:"layoutstart",layout:e}),e.animations=[];var f=function(_,D,P){var N={x:D.x1+D.w/2,y:D.y1+D.h/2},B={x:(P.x-N.x)*_,y:(P.y-N.y)*_};return{x:N.x+B.x,y:N.y+B.y}},c=r.spacingFactor&&r.spacingFactor!==1,h=function(){if(!c)return null;for(var _=kn(),D=0;D<a.length;D++){var P=a[D],N=u(P,D);Fz(_,N.x,N.y)}return _},g=h(),p=xs(function(A,_){var D=u(A,_);if(c){var P=Math.abs(r.spacingFactor);D=f(P,g,D)}return r.transform!=null&&(D=r.transform(A,D)),D},l);if(r.animate){for(var y=0;y<a.length;y++){var C=a[y],E=p(C,y),v=r.animateFilter==null||r.animateFilter(C,y);if(v){var x=C.animation({position:E,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(x)}else C.position(E)}if(r.fit){var w=i.animation({fit:{boundingBox:o.boundingBoxAt(p),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(w)}else if(r.zoom!==void 0&&r.pan!==void 0){var T=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(T)}e.animations.forEach(function(A){return A.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),Ls.all(e.animations.map(function(A){return A.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(p),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(wt({},e,{eles:this}))}};Tf.createLayout=Tf.makeLayout=Tf.layout;function IN(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function Oc(t,e){return t=yo(t),function(n){return IN(t,e,n)}}function Ic(t,e){t=yo(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return IN(t,r,a)}}var en={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(l){return l._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(It(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(mt(e))if(r===void 0){var l=this[0];return l?i.getStylePropertyValue(l,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var l=i[o];a.removeAllBypasses(l,n)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var f=i[u];a.removeBypasses(f,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var o=a.data.parent?n.parents():null;if(o)for(var l=0;l<o.length;l++){var u=o[l],f=u.pstyle("opacity").value;i=f*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Mv(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function _1(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var l=i._private;if(!e(i))return!1;if(i.isNode())return!o||Mv(i,n);var u=l.source,f=l.target;return r(u)&&(!o||Mv(u,r))&&(u===f||r(f)&&(!o||Mv(f,r)))}}}var Ds=Oc("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});en.takesUpSpace=Ic("takesUpSpace",_1({ok:Ds}));var xH=Oc("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Ds(t)}),CH=Oc("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&Ds(t)});en.interactive=Ic("interactive",_1({ok:xH,parentOk:CH,edgeOkViaNode:Ds}));en.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var EH=Oc("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Ds(t)}),TH=Ds;en.visible=Ic("visible",_1({ok:EH,edgeOkViaNode:TH}));en.hidden=function(){var t=this[0];if(t)return!t.visible()};en.isBundledBezier=Ic("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});en.bypass=en.css=en.style;en.renderedCss=en.renderedStyle;en.removeBypass=en.removeCss=en.removeStyle;en.pstyle=en.parsedStyle;var Ti={};function RT(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&pr(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&Qt(e[0])){for(var o=e.length===1?e[0]:null,l=0;l<this.length;l++){var u=this[l],f=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var h=t.overrideAble(u);if(h!==void 0&&(f=h,!h))return this}f&&(u._private[t.field]=t.value,c&&r.push(u))}var g=this.spawn(r);g.updateStyle(),g.emit(t.event),o&&g.emit(o)}return this}}function _s(t){Ti[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Ti[t.on]=RT({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Ti[t.off]=RT({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}_s({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});_s({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});_s({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});_s({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Ti.deselect=Ti.unselect;Ti.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};_s({field:"active",on:"activate",off:"unactivate"});_s({field:"pannable",on:"panify",off:"unpanify"});Ti.inactive=function(){var t=this[0];if(t)return!t._private.active};var hn={},PT=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var l=a[o];if(l.isNode()){for(var u=!1,f=l.connectedEdges(),c=0;c<f.length;c++){var h=f[c],g=h.source(),p=h.target();if(e.noIncomingEdges&&p===l&&g!==l||e.noOutgoingEdges&&g===l&&p!==l){u=!0;break}}u||i.push(l)}}return this.spawn(i,!0).filter(n)}},NT=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var l=o.connectedEdges(),u=0;u<l.length;u++){var f=l[u],c=f.source(),h=f.target();e.outgoing&&c===o?(a.push(f),a.push(h)):e.incoming&&h===o&&(a.push(f),a.push(c))}}return this.spawn(a,!0).filter(r)}},kT=function(e){return function(r){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var l=!1,u=0;u<o.length;u++){var f=o[u],c=f.id();i[c]||(i[c]=!0,a.push(f),l=!0)}if(!l)break;n=o}return this.spawn(a,!0).filter(r)}};hn.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};wt(hn,{roots:PT({noIncomingEdges:!0}),leaves:PT({noOutgoingEdges:!0}),outgoers:$n(NT({outgoing:!0}),"outgoers"),successors:kT({outgoing:!0}),incomers:$n(NT({incoming:!0}),"incomers"),predecessors:kT({})});wt(hn,{neighborhood:$n(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),o=0;o<i.length;o++){var l=i[o],u=l.source(),f=l.target(),c=a===u?f:u;c.length>0&&e.push(c[0]),e.push(l[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});hn.neighbourhood=hn.neighborhood;hn.closedNeighbourhood=hn.closedNeighborhood;hn.openNeighbourhood=hn.openNeighborhood;wt(hn,{source:$n(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:$n(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:OT({attr:"source"}),targets:OT({attr:"target"})});function OT(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[t.attr];o&&n.push(o)}return this.spawn(n,!0).filter(r)}}wt(hn,{edgesWith:$n(IT(),"edgesWith"),edgesTo:$n(IT({thisIsSrc:!0}),"edgesTo")});function IT(t){return function(r){var n=[],a=this._private.cy,i=t||{};mt(r)&&(r=a.$(r));for(var o=0;o<r.length;o++)for(var l=r[o]._private.edges,u=0;u<l.length;u++){var f=l[u],c=f._private.data,h=this.hasElementWithId(c.source)&&r.hasElementWithId(c.target),g=r.hasElementWithId(c.source)&&this.hasElementWithId(c.target),p=h||g;p&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!h||i.thisIsTgt&&!g)||n.push(f))}return this.spawn(n,!0)}}wt(hn,{connectedEdges:$n(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var l=i[o];e.push(l)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:$n(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:$n(FT(),"parallelEdges"),codirectedEdges:$n(FT({codirected:!0}),"codirectedEdges")});function FT(t){var e={codirected:!1};return t=wt({},e,t),function(n){for(var a=[],i=this.edges(),o=t,l=0;l<i.length;l++)for(var u=i[l],f=u._private,c=f.source,h=c._private.data.id,g=f.data.target,p=c._private.edges,y=0;y<p.length;y++){var C=p[y],E=C._private.data,v=E.target,x=E.source,w=v===g&&x===h,T=h===v&&g===x;(o.codirected&&w||!o.codirected&&(w||T))&&a.push(C)}return this.spawn(a,!0).filter(n)}}wt(hn,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var l=function(c,h){a.merge(c),i.unmerge(c),h.merge(c)};if(i.empty())return r.spawn();var u=function(){var c=n.collection();o.push(c);var h=i[0];l(h,c),r.bfs({directed:!1,roots:h,visit:function(p){return l(p,c)}}),c.forEach(function(g){g.connectedEdges().forEach(function(p){r.has(p)&&c.has(p.source())&&c.has(p.target())&&c.merge(p)})})};do u();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});hn.componentsOf=hn.components;var tn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){vr("A collection must have a reference to the core");return}var i=new Va,o=!1;if(!r)r=[];else if(r.length>0&&It(r[0])&&!iu(r[0])){o=!0;for(var l=[],u=new As,f=0,c=r.length;f<c;f++){var h=r[f];h.data==null&&(h.data={});var g=h.data;if(g.id==null)g.id=QP();else if(e.hasElementWithId(g.id)||u.has(g.id))continue;var p=new Ac(e,h,!1);l.push(p),u.add(g.id)}r=l}this.length=0;for(var y=0,C=r.length;y<C;y++){var E=r[y][0];if(E!=null){var v=E._private.data.id;(!n||!i.has(v))&&(n&&i.set(v,{index:this.length,ele:E}),this[this.length]=E,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(x){this.lazyMap=x},rebuildMap:function(){for(var w=this.lazyMap=new Va,T=this.eles,A=0;A<T.length;A++){var _=T[A];w.set(_.id(),{index:A,ele:_})}}},n&&(this._private.map=i),o&&!a&&this.restore()},nr=Ac.prototype=tn.prototype=Object.create(Array.prototype);nr.instanceString=function(){return"collection"};nr.spawn=function(t,e){return new tn(this.cy(),t,e)};nr.spawnSelf=function(){return this.spawn(this)};nr.cy=function(){return this._private.cy};nr.renderer=function(){return this._private.cy.renderer()};nr.element=function(){return this[0]};nr.collection=function(){return BP(this)?this:new tn(this._private.cy,[this])};nr.unique=function(){return new tn(this._private.cy,this,!0)};nr.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};nr.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new tn(e)};nr.$id=nr.getElementById;nr.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};nr.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};nr.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};nr.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(It(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,o={},l=t.data.source,u=t.data.target;l!=null&&l!=a.source&&(o.source=""+l,i=!0),u!=null&&u!=a.target&&(o.target=""+u,i=!0),i&&(e=e.move(o))}else{var f="parent"in t.data,c=t.data.parent;f&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var h=function(C,E,v){var x=t[C];x!=null&&x!==n[C]&&(x?e[E]():e[v]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var g={data:Ca(n.data),position:Ca(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};g.classes="";var p=0;return n.classes.forEach(function(y){return g.classes+=p++===0?y:" "+y}),g}}};nr.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};nr.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new Ac(t,a,!1);e.push(i)}return new tn(t,e)};nr.copy=nr.clone;nr.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],o=[],l,u=0,f=r.length;u<f;u++){var c=r[u];e&&!c.removed()||(c.isNode()?i.push(c):o.push(c))}l=i.concat(o);var h,g=function(){l.splice(h,1),h--};for(h=0;h<l.length;h++){var p=l[h],y=p._private,C=y.data;if(p.clearTraversalCache(),!(!e&&!y.removed)){if(C.id===void 0)C.id=QP();else if(nt(C.id))C.id=""+C.id;else if(Di(C.id)||!mt(C.id)){vr("Can not create element with invalid string ID `"+C.id+"`"),g();continue}else if(n.hasElementWithId(C.id)){vr("Can not create second element with ID `"+C.id+"`"),g();continue}}var E=C.id;if(p.isNode()){var v=y.position;v.x==null&&(v.x=0),v.y==null&&(v.y=0)}if(p.isEdge()){for(var x=p,w=["source","target"],T=w.length,A=!1,_=0;_<T;_++){var D=w[_],P=C[D];nt(P)&&(P=C[D]=""+C[D]),P==null||P===""?(vr("Can not create edge `"+E+"` with unspecified "+D),A=!0):n.hasElementWithId(P)||(vr("Can not create edge `"+E+"` with nonexistant "+D+" `"+P+"`"),A=!0)}if(A){g();continue}var N=n.getElementById(C.source),B=n.getElementById(C.target);N.same(B)?N._private.edges.push(x):(N._private.edges.push(x),B._private.edges.push(x)),x._private.source=N,x._private.target=B}y.map=new Va,y.map.set(E,{ele:p,index:0}),y.removed=!1,e&&n.addToPool(p)}for(var G=0;G<i.length;G++){var F=i[G],z=F._private.data;nt(z.parent)&&(z.parent=""+z.parent);var M=z.parent,R=M!=null;if(R||F._private.parent){var k=F._private.parent?n.collection().merge(F._private.parent):n.getElementById(M);if(k.empty())z.parent=void 0;else if(k[0].removed())Wt("Node added with missing parent, reference to parent removed"),z.parent=void 0,F._private.parent=null;else{for(var I=!1,q=k;!q.empty();){if(F.same(q)){I=!0,z.parent=void 0;break}q=q.parent()}I||(k[0]._private.children.push(F),F._private.parent=k[0],a.hasCompoundNodes=!0)}}}if(l.length>0){for(var ae=l.length===r.length?r:new tn(n,l),re=0;re<ae.length;re++){var K=ae[re];K.isNode()||(K.parallelEdges().clearTraversalCache(),K.source().clearTraversalCache(),K.target().clearTraversalCache())}var W;a.hasCompoundNodes?W=n.collection().merge(ae).merge(ae.connectedNodes()).merge(ae.parent()):W=ae,W.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?ae.emitAndNotify("add"):e&&ae.emit("add")}return r};nr.removed=function(){var t=this[0];return t&&t._private.removed};nr.inside=function(){var t=this[0];return t&&!t._private.removed};nr.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function o(M){for(var R=M._private.edges,k=0;k<R.length;k++)u(R[k])}function l(M){for(var R=M._private.children,k=0;k<R.length;k++)u(R[k])}function u(M){var R=a[M.id()];e&&M.removed()||R||(a[M.id()]=!0,M.isNode()?(n.push(M),o(M),l(M)):n.unshift(M))}for(var f=0,c=r.length;f<c;f++){var h=r[f];u(h)}function g(M,R){var k=M._private.edges;_i(k,R),M.clearTraversalCache()}function p(M){M.clearTraversalCache()}var y=[];y.ids={};function C(M,R){R=R[0],M=M[0];var k=M._private.children,I=M.id();_i(k,R),R._private.parent=null,y.ids[I]||(y.ids[I]=!0,y.push(M))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var E=0;E<n.length;E++){var v=n[E];if(v.isEdge()){var x=v.source()[0],w=v.target()[0];g(x,v),g(w,v);for(var T=v.parallelEdges(),A=0;A<T.length;A++){var _=T[A];p(_),_.isBundledBezier()&&_.dirtyBoundingBoxCache()}}else{var D=v.parent();D.length!==0&&C(D,v)}e&&(v._private.removed=!0)}var P=i._private.elements;i._private.hasCompoundNodes=!1;for(var N=0;N<P.length;N++){var B=P[N];if(B.isParent()){i._private.hasCompoundNodes=!0;break}}var G=new tn(this.cy(),n);G.size()>0&&(t?G.emitAndNotify("remove"):e&&G.emit("remove"));for(var F=0;F<y.length;F++){var z=y[F];(!e||!z.removed())&&z.updateStyle()}return G};nr.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(y){return y==null?y:""+y};if(t.source!==void 0||t.target!==void 0){var o=i(t.source),l=i(t.target),u=o!=null&&e.hasElementWithId(o),f=l!=null&&e.hasElementWithId(l);(u||f)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var p=0;p<r.length;p++){var y=r[p],C=y._private.data;y.isEdge()&&(u&&(C.source=o),f&&(C.target=l))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var c=i(t.parent),h=c===null||e.hasElementWithId(c);if(h){var g=c===null?void 0:c;e.batch(function(){var p=r.remove(n,a);p.emitAndNotify("moveout");for(var y=0;y<r.length;y++){var C=r[y],E=C._private.data;C.isNode()&&(E.parent=g)}p.restore(n,a)}),r.emitAndNotify("move")}}return this};[uN,O5,Ef,Ei,Ts,Z5,Nc,hH,NN,kN,mH,ec,Tf,en,Ti,hn].forEach(function(t){wt(nr,t)});var SH={add:function(e){var r,n=this;if(Bn(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],o=0;o<a.length;o++){var l=a[o];i.push(l.json())}r=new tn(n,i)}}else if(Qt(e)){var u=e;r=new tn(n,u)}else if(It(e)&&(Qt(e.nodes)||Qt(e.edges))){for(var f=e,c=[],h=["nodes","edges"],g=0,p=h.length;g<p;g++){var y=h[g],C=f[y];if(Qt(C))for(var E=0,v=C.length;E<v;E++){var x=wt({group:y},C[E]);c.push(x)}}r=new tn(n,c)}else{var w=e;r=new Ac(n,w).collection()}return r},remove:function(e){if(!Bn(e)){if(mt(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function AH(t,e,r,n){var a=4,i=.001,o=1e-7,l=10,u=11,f=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var g=c?new Float32Array(u):new Array(u);function p(B,G){return 1-3*G+3*B}function y(B,G){return 3*G-6*B}function C(B){return 3*B}function E(B,G,F){return((p(G,F)*B+y(G,F))*B+C(G))*B}function v(B,G,F){return 3*p(G,F)*B*B+2*y(G,F)*B+C(G)}function x(B,G){for(var F=0;F<a;++F){var z=v(G,t,r);if(z===0)return G;var M=E(G,t,r)-B;G-=M/z}return G}function w(){for(var B=0;B<u;++B)g[B]=E(B*f,t,r)}function T(B,G,F){var z,M,R=0;do M=G+(F-G)/2,z=E(M,t,r)-B,z>0?F=M:G=M;while(Math.abs(z)>o&&++R<l);return M}function A(B){for(var G=0,F=1,z=u-1;F!==z&&g[F]<=B;++F)G+=f;--F;var M=(B-g[F])/(g[F+1]-g[F]),R=G+M*f,k=v(R,t,r);return k>=i?x(B,R):k===0?R:T(B,G,G+f)}var _=!1;function D(){_=!0,(t!==e||r!==n)&&w()}var P=function(G){return _||D(),t===e&&r===n?G:G===0?0:G===1?1:E(A(G),e,n)};P.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var N="generateBezier("+[t,e,r,n]+")";return P.toString=function(){return N},P}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var LH=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:t(o)}}function r(n,a){var i={dx:n.v,dv:t(n)},o=e(n,a*.5,i),l=e(n,a*.5,o),u=e(n,a,l),f=1/6*(i.dx+2*(o.dx+l.dx)+u.dx),c=1/6*(i.dv+2*(o.dv+l.dv)+u.dv);return n.x=n.x+f*a,n.v=n.v+c*a,n}return function n(a,i,o){var l={x:-1,v:0,tension:null,friction:null},u=[0],f=0,c=1/1e4,h=16/1e3,g,p,y;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,l.tension=a,l.friction=i,g=o!==null,g?(f=n(a,i),p=f/o*h):p=h;y=r(y||l,p),u.push(1+y.x),f+=16,Math.abs(y.x)>c&&Math.abs(y.v)>c;);return g?function(C){return u[C*(u.length-1)|0]}:f}}(),er=function(e,r,n,a){var i=AH(e,r,n,a);return function(o,l,u){return o+(l-o)*i(u)}},Sf={linear:function(e,r,n){return e+(r-e)*n},ease:er(.25,.1,.25,1),"ease-in":er(.42,0,1,1),"ease-out":er(0,0,.58,1),"ease-in-out":er(.42,0,.58,1),"ease-in-sine":er(.47,0,.745,.715),"ease-out-sine":er(.39,.575,.565,1),"ease-in-out-sine":er(.445,.05,.55,.95),"ease-in-quad":er(.55,.085,.68,.53),"ease-out-quad":er(.25,.46,.45,.94),"ease-in-out-quad":er(.455,.03,.515,.955),"ease-in-cubic":er(.55,.055,.675,.19),"ease-out-cubic":er(.215,.61,.355,1),"ease-in-out-cubic":er(.645,.045,.355,1),"ease-in-quart":er(.895,.03,.685,.22),"ease-out-quart":er(.165,.84,.44,1),"ease-in-out-quart":er(.77,0,.175,1),"ease-in-quint":er(.755,.05,.855,.06),"ease-out-quint":er(.23,1,.32,1),"ease-in-out-quint":er(.86,0,.07,1),"ease-in-expo":er(.95,.05,.795,.035),"ease-out-expo":er(.19,1,.22,1),"ease-in-out-expo":er(1,0,0,1),"ease-in-circ":er(.6,.04,.98,.335),"ease-out-circ":er(.075,.82,.165,1),"ease-in-out-circ":er(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return Sf.linear;var a=LH(e,r,n);return function(i,o,l){return i+(o-i)*a(l)}},"cubic-bezier":er};function BT(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function qT(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function es(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var o=qT(t,a),l=qT(e,a);if(nt(o)&&nt(l))return BT(i,o,l,r,n);if(Qt(o)&&Qt(l)){for(var u=[],f=0;f<l.length;f++){var c=o[f],h=l[f];if(c!=null&&h!=null){var g=BT(i,c,h,r,n);u.push(g)}else u.push(h)}return u}}function DH(t,e,r,n){var a=!n,i=t._private,o=e._private,l=o.easing,u=o.startTime,f=n?t:t.cy(),c=f.style();if(!o.easingImpl)if(l==null)o.easingImpl=Sf.linear;else{var h;if(mt(l)){var g=c.parse("transition-timing-function",l);h=g.value}else h=l;var p,y;mt(h)?(p=h,y=[]):(p=h[1],y=h.slice(2).map(function(ae){return+ae})),y.length>0?(p==="spring"&&y.push(o.duration),o.easingImpl=Sf[p].apply(null,y)):o.easingImpl=Sf[p]}var C=o.easingImpl,E;if(o.duration===0?E=1:E=(r-u)/o.duration,o.applying&&(E=o.progress),E<0?E=0:E>1&&(E=1),o.delay==null){var v=o.startPosition,x=o.position;if(x&&a&&!t.locked()){var w={};gl(v.x,x.x)&&(w.x=es(v.x,x.x,E,C)),gl(v.y,x.y)&&(w.y=es(v.y,x.y,E,C)),t.position(w)}var T=o.startPan,A=o.pan,_=i.pan,D=A!=null&&n;D&&(gl(T.x,A.x)&&(_.x=es(T.x,A.x,E,C)),gl(T.y,A.y)&&(_.y=es(T.y,A.y,E,C)),t.emit("pan"));var P=o.startZoom,N=o.zoom,B=N!=null&&n;B&&(gl(P,N)&&(i.zoom=Xl(i.minZoom,es(P,N,E,C),i.maxZoom)),t.emit("zoom")),(D||B)&&t.emit("viewport");var G=o.style;if(G&&G.length>0&&a){for(var F=0;F<G.length;F++){var z=G[F],M=z.name,R=z,k=o.startStyle[M],I=c.properties[k.name],q=es(k,R,E,C,I);c.overrideBypass(t,M,q)}t.emit("style")}}return o.progress=E,E}function gl(t,e){return t==null||e==null?!1:nt(t)&&nt(e)?!0:!!(t&&e)}function _H(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function zT(t,e){var r=e._private.aniEles,n=[];function a(c,h){var g=c._private,p=g.animation.current,y=g.animation.queue,C=!1;if(p.length===0){var E=y.shift();E&&p.push(E)}for(var v=function(_){for(var D=_.length-1;D>=0;D--){var P=_[D];P()}_.splice(0,_.length)},x=p.length-1;x>=0;x--){var w=p[x],T=w._private;if(T.stopped){p.splice(x,1),T.hooked=!1,T.playing=!1,T.started=!1,v(T.frames);continue}!T.playing&&!T.applying||(T.playing&&T.applying&&(T.applying=!1),T.started||_H(c,w,t),DH(c,w,t,h),T.applying&&(T.applying=!1),v(T.frames),T.step!=null&&T.step(t),w.completed()&&(p.splice(x,1),T.hooked=!1,T.playing=!1,T.started=!1,v(T.completes)),C=!0)}return!h&&p.length===0&&y.length===0&&n.push(c),C}for(var i=!1,o=0;o<r.length;o++){var l=r[o],u=a(l);i=i||u}var f=a(e,!0);(i||f)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var MH={animate:Ut.animate(),animation:Ut.animation(),animated:Ut.animated(),clearQueue:Ut.clearQueue(),delay:Ut.delay(),delayAnimation:Ut.delayAnimation(),stop:Ut.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&Kf(function(i){zT(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){zT(o,e)},n.beforeRenderPriorities.animations):r()}},RH={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&iu(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},cf=function(e){return mt(e)?new Ri(e):e},FN={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new kc(RH,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,cf(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,cf(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,cf(r),n),this},once:function(e,r,n){return this.emitter().one(e,cf(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};Ut.eventAliasesOn(FN);var qb={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};qb.jpeg=qb.jpg;var Af={layout:function(e){var r=this;if(e==null){vr("Layout options must be specified to make a layout");return}if(e.name==null){vr("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){vr("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;mt(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var o=new a(wt({},e,{cy:r,eles:i}));return o}};Af.createLayout=Af.makeLayout=Af.layout;var PH={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],l=r.getElementById(i);l.data(o)}})}},NH=rn({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),zb={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){vr("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Wt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=NH(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};zb.invalidateDimensions=zb.resize;var Lf={collection:function(e,r){return mt(e)?this.$(e):Bn(e)?e.collection():Qt(e)?(r||(r={}),new tn(this,e,r.unique,r.removed)):new tn(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Lf.elements=Lf.filter=Lf.$;var Xr={},kl="t",kH="f";Xr.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var o=t[i],l=e.getContextMeta(o);if(!l.empty){var u=e.getContextStyle(l),f=e.applyContextStyle(l,u,o);o._private.appliedInitStyle?e.updateTransitions(o,f.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&a.push(o)}}return a};Xr.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var o=[],l={},u=0;u<r.length;u++){var f=r[u],c=t[u]===kl,h=e[u]===kl,g=c!==h,p=f.mappedProperties.length>0;if(g||h&&p){var y=void 0;g&&p||g?y=f.properties:p&&(y=f.mappedProperties);for(var C=0;C<y.length;C++){for(var E=y[C],v=E.name,x=!1,w=u+1;w<r.length;w++){var T=r[w],A=e[w]===kl;if(A&&(x=T.properties[E.name]!=null,x))break}!l[v]&&!x&&(l[v]=!0,o.push(v))}}}return n[a]=o,o};Xr.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],l=o.selector&&o.selector.matches(t);l?r+=kl:r+=kH}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};Xr.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var o=r[i],l=e[i]===kl;if(l)for(var u=0;u<o.properties.length;u++){var f=o.properties[u];a[f.name]=f}}return n[e]=a,a};Xr.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},o=n.types,l=0;l<a.length;l++){var u=a[l],f=e[u],c=r.pstyle(u);if(!f)if(c)c.bypass?f={name:u,deleteBypassed:!0}:f={name:u,delete:!0};else continue;if(c!==f){if(f.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===f.value){var h=c.mapping,g=h.fnValue=f.value(r);if(g===h.prevFnValue)continue}var p=i[u]={prev:c};n.applyParsedProperty(r,f),p.next=r.pstyle(u),p.next&&p.next.bypass&&(p.next=p.next.bypassed)}}return{diffProps:i}};Xr.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function($,ne,ie){return r.getPropertiesHash($,ne,ie)},o=e.styleKey;if(t.removed())return!1;var l=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var f=0;f<a.length;f++){var c=a[f];e.styleKeys[c]=[co,ss]}for(var h=function($,ne){return e.styleKeys[ne][0]=Vl($,e.styleKeys[ne][0])},g=function($,ne){return e.styleKeys[ne][1]=$l($,e.styleKeys[ne][1])},p=function($,ne){h($,ne),g($,ne)},y=function($,ne){for(var ie=0;ie<$.length;ie++){var ue=$.charCodeAt(ie);h(ue,ne),g(ue,ne)}},C=2e9,E=function($){return-128<$&&$<128&&Math.floor($)!==$?C-($*1024|0):$},v=0;v<n.length;v++){var x=n[v],w=u[x];if(w!=null){var T=this.properties[x],A=T.type,_=T.groupKey,D=void 0;T.hashOverride!=null?D=T.hashOverride(t,w):w.pfValue!=null&&(D=w.pfValue);var P=T.enums==null?w.value:null,N=D!=null,B=P!=null,G=N||B,F=w.units;if(A.number&&G&&!A.multiple){var z=N?D:P;p(E(z),_),!N&&F!=null&&y(F,_)}else y(w.strValue,_)}}for(var M=[co,ss],R=0;R<a.length;R++){var k=a[R],I=e.styleKeys[k];M[0]=Vl(I[0],M[0]),M[1]=$l(I[1],M[1])}e.styleKey=Jq(M[0],M[1]);var q=e.styleKeys;e.labelDimsKey=hi(q.labelDimensions);var ae=i(t,["label"],q.labelDimensions);if(e.labelKey=hi(ae),e.labelStyleKey=hi(rf(q.commonLabel,ae)),!l){var re=i(t,["source-label"],q.labelDimensions);e.sourceLabelKey=hi(re),e.sourceLabelStyleKey=hi(rf(q.commonLabel,re));var K=i(t,["target-label"],q.labelDimensions);e.targetLabelKey=hi(K),e.targetLabelStyleKey=hi(rf(q.commonLabel,K))}if(l){var W=e.styleKeys,Z=W.nodeBody,U=W.nodeBorder,V=W.nodeOutline,X=W.backgroundImage,ee=W.compound,se=W.pie,te=W.stripe,oe=[Z,U,V,X,ee,se,te].filter(function(le){return le!=null}).reduce(rf,[co,ss]);e.nodeKey=hi(oe),e.hasPie=se!=null&&se[0]!==co&&se[1]!==ss,e.hasStripe=te!=null&&te[0]!==co&&te[1]!==ss}return o!==e.styleKey};Xr.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};Xr.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,o=r.types,l=r.properties[n.name].type,u=n.bypass,f=a[n.name],c=f&&f.bypass,h=t._private,g="mapping",p=function(Z){return Z==null?null:Z.pfValue!=null?Z.pfValue:Z.value},y=function(){var Z=p(f),U=p(n);r.checkTriggers(t,n.name,Z,U)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return a[n.name]=void 0,y(),!0;if(n.deleteBypassed)return f?f.bypass?(f.bypassed=void 0,y(),!0):!1:(y(),!0);if(n.deleteBypass)return f?f.bypass?(a[n.name]=f.bypassed,y(),!0):!1:(y(),!0);var C=function(){Wt("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var E=n.field.split("."),v=h.data,x=0;x<E.length&&v;x++){var w=E[x];v=v[w]}if(v==null)return C(),!1;var T;if(nt(v)){var A=n.fieldMax-n.fieldMin;A===0?T=0:T=(v-n.fieldMin)/A}else return Wt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+v+"` for `"+t.id()+"` is non-numeric)"),!1;if(T<0?T=0:T>1&&(T=1),l.color){var _=n.valueMin[0],D=n.valueMax[0],P=n.valueMin[1],N=n.valueMax[1],B=n.valueMin[2],G=n.valueMax[2],F=n.valueMin[3]==null?1:n.valueMin[3],z=n.valueMax[3]==null?1:n.valueMax[3],M=[Math.round(_+(D-_)*T),Math.round(P+(N-P)*T),Math.round(B+(G-B)*T),Math.round(F+(z-F)*T)];i={bypass:n.bypass,name:n.name,value:M,strValue:"rgb("+M[0]+", "+M[1]+", "+M[2]+")"}}else if(l.number){var R=n.valueMin+(n.valueMax-n.valueMin)*T;i=this.parse(n.name,R,n.bypass,g)}else return!1;if(!i)return C(),!1;i.mapping=n,n=i;break}case o.data:{for(var k=n.field.split("."),I=h.data,q=0;q<k.length&&I;q++){var ae=k[q];I=I[ae]}if(I!=null&&(i=this.parse(n.name,I,n.bypass,g)),!i)return C(),!1;i.mapping=n,n=i;break}case o.fn:{var re=n.value,K=n.fnValue!=null?n.fnValue:re(t);if(n.prevFnValue=K,K==null)return Wt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,K,n.bypass,g),!i)return Wt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Ca(n),n=i;break}case void 0:break;default:return!1}return u?(c?n.bypassed=f.bypassed:n.bypassed=f,a[n.name]=n):c?f.bypassed=n:a[n.name]=n,y(),!0};Xr.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var l=i[o],u=a[l];u!=null&&(u.bypass?u.bypassed=null:a[l]=null)}}};Xr.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};Xr.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var l={},u=!1,f=0;f<a.length;f++){var c=a[f],h=t.pstyle(c),g=e[c];if(g){var p=g.prev,y=p,C=g.next!=null?g.next:h,E=!1,v=void 0,x=1e-6;y&&(nt(y.pfValue)&&nt(C.pfValue)?(E=C.pfValue-y.pfValue,v=y.pfValue+x*E):nt(y.value)&&nt(C.value)?(E=C.value-y.value,v=y.value+x*E):Qt(y.value)&&Qt(C.value)&&(E=y.value[0]!==C.value[0]||y.value[1]!==C.value[1]||y.value[2]!==C.value[2],v=y.strValue),E&&(l[c]=C.strValue,this.applyBypass(t,c,v),u=!0))}}if(!u)return;n.transitioning=!0,new Ls(function(w){o>0?t.delayAnimation(o).play().promise().then(w):w()}).then(function(){return t.animation({style:l,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};Xr.checkTrigger=function(t,e,r,n,a,i){var o=this.properties[e],l=a(o);t.removed()||l!=null&&l(r,n,t)&&i(o)};Xr.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};Xr.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};Xr.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Xr.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Xr.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};var du={};du.applyBypass=function(t,e,r,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var l=0;l<a.properties.length;l++){var u=a.properties[l],f=u.name,c=this.parse(f,r,!0);c&&i.push(c)}}else if(mt(e)){var h=this.parse(e,r,!0);h&&i.push(h)}else if(It(e)){var g=e;n=r;for(var p=Object.keys(g),y=0;y<p.length;y++){var C=p[y],E=g[C];if(E===void 0&&(E=g[Tc(C)]),E!==void 0){var v=this.parse(C,E,!0);v&&i.push(v)}}}else return!1;if(i.length===0)return!1;for(var x=!1,w=0;w<t.length;w++){for(var T=t[w],A={},_=void 0,D=0;D<i.length;D++){var P=i[D];if(n){var N=T.pstyle(P.name);_=A[P.name]={prev:N}}x=this.applyParsedProperty(T,Ca(P))||x,n&&(_.next=T.pstyle(P.name))}x&&this.updateStyleHints(T),n&&this.updateTransitions(T,A,o)}return x};du.overrideBypass=function(t,e,r){e=p1(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],o=this.properties[e].type,l=o.color,u=o.mutiple,f=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),l?i.strValue="rgb("+r.join(",")+")":u?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,f,r)}};du.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};du.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],o={},l=0;l<e.length;l++){var u=e[l],f=this.properties[u],c=i.pstyle(f.name);if(!(!c||!c.bypass)){var h="",g=this.parse(u,h,!0),p=o[f.name]={prev:c};this.applyParsedProperty(i,g),p.next=i.pstyle(f.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,o,n)}};var M1={};M1.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};M1.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var Ta={};Ta.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};Ta.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],o=r.getStylePropertyValue(t,i.name,e);o!=null&&(n[i.name]=o,n[Tc(i.name)]=o)}return n}};Ta.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};Ta.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=t.pstyle(a.name);if(o){var l=o.value,u=o.units,f=o.strValue;if(r&&i.number&&l!=null&&nt(l)){var c=t.cy().zoom(),h=function(E){return E*c},g=function(E,v){return h(E)+v},p=Qt(l),y=p?u.every(function(C){return C!=null}):u!=null;return y?p?l.map(function(C,E){return g(C,u[E])}).join(" "):g(l,u):p?l.map(function(C){return mt(C)?C:""+h(C)}).join(" "):""+h(l)}else if(f!=null)return f}return null}};Ta.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=t.pstyle(i);o!==void 0&&(It(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(r[i]=o)}return r};Ta.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var l=i[o],u=n[l],f=a[l]||a[p1(l)],c=this.parse(f.name,u);c&&r.push(c)}return r};Ta.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,o,l,u,f;for(u=0;u<e.length;u++)if(a=e[u],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Vl(l,n[0]),n[1]=$l(l,n[1]);else for(o=i.strValue,f=0;f<o.length;f++)l=o.charCodeAt(f),n[0]=Vl(l,n[0]),n[1]=$l(l,n[1]);return n};Ta.getPropertiesHash=Ta.getNonDefaultPropertiesHash;var Fc={};Fc.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var l=0;l<o.length;l++){var u=o[l],f=i[u];e.css(u,f)}}return e};Fc.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Fc.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},o=0;o<a.length;o++){var l=a[o];i[l.name]=l.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var R1={};R1.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function l(){n.length>a.length?n=n.substr(a.length):n=""}function u(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var f=n.match(/^\s*$/);if(f)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Wt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var h=c[1];if(h!=="core"){var g=new Ri(h);if(g.invalid){Wt("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),l();continue}}var p=c[2],y=!1;i=p;for(var C=[];;){var E=i.match(/^\s*$/);if(E)break;var v=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!v){Wt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),y=!0;break}o=v[0];var x=v[1],w=v[2],T=e.properties[x];if(!T){Wt("Skipping property: Invalid property name in: "+o),u();continue}var A=r.parse(x,w);if(!A){Wt("Skipping property: Invalid property definition in: "+o),u();continue}C.push({name:x,val:w}),u()}if(y){l();break}r.selector(h);for(var _=0;_<C.length;_++){var D=C[_];r.css(D.name,D.val)}l()}return r};R1.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var Sr={};(function(){var t=Fr,e=Rq,r=Nq,n=kq,a=Oq,i=function(le){return"^"+le+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(le){var $=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+le+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+$+")\\s*\\,\\s*("+$+")\\)$"},l=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Sr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:l,singleRegexMatchValue:!0},urls:{regexes:l,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(le,$){switch(le.length){case 2:return $[0]!=="deg"&&$[0]!=="rad"&&$[1]!=="deg"&&$[1]!=="rad";case 1:return mt(le[0])||$[0]==="deg"||$[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(le){var $=le.length;return $===1||$===2||$===4}}};var u={zeroNonZero:function(le,$){return(le==null||$==null)&&le!==$||le==0&&$!=0?!0:le!=0&&$==0},any:function(le,$){return le!=$},emptyNonEmpty:function(le,$){var ne=Di(le),ie=Di($);return ne&&!ie||!ne&&ie}},f=Sr.types,c=[{name:"label",type:f.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:f.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:f.bidirectionalSize,triggersBounds:u.any}],h=[{name:"source-label",type:f.text,triggersBounds:u.any},{name:"source-text-rotation",type:f.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:f.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:f.size,triggersBounds:u.any}],g=[{name:"target-label",type:f.text,triggersBounds:u.any},{name:"target-text-rotation",type:f.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:f.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:f.size,triggersBounds:u.any}],p=[{name:"font-family",type:f.fontFamily,triggersBounds:u.any},{name:"font-style",type:f.fontStyle,triggersBounds:u.any},{name:"font-weight",type:f.fontWeight,triggersBounds:u.any},{name:"font-size",type:f.size,triggersBounds:u.any},{name:"text-transform",type:f.textTransform,triggersBounds:u.any},{name:"text-wrap",type:f.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:f.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:f.size,triggersBounds:u.any},{name:"text-outline-width",type:f.size,triggersBounds:u.any},{name:"line-height",type:f.positiveNumber,triggersBounds:u.any}],y=[{name:"text-valign",type:f.valign,triggersBounds:u.any},{name:"text-halign",type:f.halign,triggersBounds:u.any},{name:"color",type:f.color},{name:"text-outline-color",type:f.color},{name:"text-outline-opacity",type:f.zeroOneNumber},{name:"text-background-color",type:f.color},{name:"text-background-opacity",type:f.zeroOneNumber},{name:"text-background-padding",type:f.size,triggersBounds:u.any},{name:"text-border-opacity",type:f.zeroOneNumber},{name:"text-border-color",type:f.color},{name:"text-border-width",type:f.size,triggersBounds:u.any},{name:"text-border-style",type:f.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:f.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:f.justification},{name:"box-select-labels",type:f.bool,triggersBounds:u.any}],C=[{name:"events",type:f.bool,triggersZOrder:u.any},{name:"text-events",type:f.bool,triggersZOrder:u.any}],E=[{name:"display",type:f.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(le,$,ne){return le===$?!1:ne.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:f.visibility,triggersZOrder:u.any},{name:"opacity",type:f.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:f.zeroOneNumber},{name:"min-zoomed-font-size",type:f.size},{name:"z-compound-depth",type:f.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:f.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:f.number,triggersZOrder:u.any}],v=[{name:"overlay-padding",type:f.size,triggersBounds:u.any},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:f.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:f.cornerRadius}],x=[{name:"underlay-padding",type:f.size,triggersBounds:u.any},{name:"underlay-color",type:f.color},{name:"underlay-opacity",type:f.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:f.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:f.cornerRadius}],w=[{name:"transition-property",type:f.propList},{name:"transition-duration",type:f.time},{name:"transition-delay",type:f.time},{name:"transition-timing-function",type:f.easing}],T=function(le,$){return $.value==="label"?-le.poolIndex():$.pfValue},A=[{name:"height",type:f.nodeSize,triggersBounds:u.any,hashOverride:T},{name:"width",type:f.nodeSize,triggersBounds:u.any,hashOverride:T},{name:"shape",type:f.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:f.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:f.cornerRadius},{name:"background-color",type:f.color},{name:"background-fill",type:f.fill},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-blacken",type:f.nOneOneNumber},{name:"background-gradient-stop-colors",type:f.colors},{name:"background-gradient-stop-positions",type:f.percentages},{name:"background-gradient-direction",type:f.gradientDirection},{name:"padding",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:f.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:f.boundsExpansion,triggersBounds:u.any}],_=[{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size,triggersBounds:u.any},{name:"border-style",type:f.borderStyle},{name:"border-cap",type:f.lineCap},{name:"border-join",type:f.lineJoin},{name:"border-dash-pattern",type:f.numbers},{name:"border-dash-offset",type:f.number},{name:"border-position",type:f.linePosition}],D=[{name:"outline-color",type:f.color},{name:"outline-opacity",type:f.zeroOneNumber},{name:"outline-width",type:f.size,triggersBounds:u.any},{name:"outline-style",type:f.borderStyle},{name:"outline-offset",type:f.size,triggersBounds:u.any}],P=[{name:"background-image",type:f.urls},{name:"background-image-crossorigin",type:f.bgCrossOrigin},{name:"background-image-opacity",type:f.zeroOneNumbers},{name:"background-image-containment",type:f.bgContainment},{name:"background-image-smoothing",type:f.bools},{name:"background-position-x",type:f.bgPos},{name:"background-position-y",type:f.bgPos},{name:"background-width-relative-to",type:f.bgRelativeTo},{name:"background-height-relative-to",type:f.bgRelativeTo},{name:"background-repeat",type:f.bgRepeat},{name:"background-fit",type:f.bgFit},{name:"background-clip",type:f.bgClip},{name:"background-width",type:f.bgWH},{name:"background-height",type:f.bgWH},{name:"background-offset-x",type:f.bgPos},{name:"background-offset-y",type:f.bgPos}],N=[{name:"position",type:f.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:f.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:f.size,triggersBounds:u.any},{name:"min-width-bias-left",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:f.size,triggersBounds:u.any},{name:"min-height-bias-top",type:f.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:f.sizeMaybePercent,triggersBounds:u.any}],B=[{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"line-fill",type:f.fill},{name:"line-cap",type:f.lineCap},{name:"line-opacity",type:f.zeroOneNumber},{name:"line-dash-pattern",type:f.numbers},{name:"line-dash-offset",type:f.number},{name:"line-outline-width",type:f.size},{name:"line-outline-color",type:f.color},{name:"line-gradient-stop-colors",type:f.colors},{name:"line-gradient-stop-positions",type:f.percentages},{name:"curve-style",type:f.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(le,$){return le===$?!1:le==="bezier"||$==="bezier"}},{name:"haystack-radius",type:f.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:f.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:f.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:f.size,triggersBounds:u.any},{name:"control-point-distances",type:f.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:f.numbers,triggersBounds:u.any},{name:"segment-distances",type:f.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:f.numbers,triggersBounds:u.any},{name:"segment-radii",type:f.numbers,triggersBounds:u.any},{name:"radius-type",type:f.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:f.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:f.size,triggersBounds:u.any},{name:"taxi-direction",type:f.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:f.number,triggersBounds:u.any},{name:"edge-distances",type:f.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:f.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:f.angle,triggersBounds:u.any},{name:"loop-sweep",type:f.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:f.size,triggersBounds:u.any},{name:"target-distance-from-node",type:f.size,triggersBounds:u.any}],G=[{name:"ghost",type:f.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:f.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:f.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:f.zeroOneNumber}],F=[{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size},{name:"outside-texture-bg-color",type:f.color},{name:"outside-texture-bg-opacity",type:f.zeroOneNumber}],z=[];Sr.pieBackgroundN=16,z.push({name:"pie-size",type:f.sizeMaybePercent}),z.push({name:"pie-hole",type:f.sizeMaybePercent}),z.push({name:"pie-start-angle",type:f.angle});for(var M=1;M<=Sr.pieBackgroundN;M++)z.push({name:"pie-"+M+"-background-color",type:f.color}),z.push({name:"pie-"+M+"-background-size",type:f.percent}),z.push({name:"pie-"+M+"-background-opacity",type:f.zeroOneNumber});var R=[];Sr.stripeBackgroundN=16,R.push({name:"stripe-size",type:f.sizeMaybePercent}),R.push({name:"stripe-direction",type:f.axisDirectionPrimary});for(var k=1;k<=Sr.stripeBackgroundN;k++)R.push({name:"stripe-"+k+"-background-color",type:f.color}),R.push({name:"stripe-"+k+"-background-size",type:f.percent}),R.push({name:"stripe-"+k+"-background-opacity",type:f.zeroOneNumber});var I=[],q=Sr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:f.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:f.color},{name:"arrow-fill",type:f.arrowFill},{name:"arrow-width",type:f.arrowWidth}].forEach(function(oe){q.forEach(function(le){var $=le+"-"+oe.name,ne=oe.type,ie=oe.triggersBounds;I.push({name:$,type:ne,triggersBounds:ie})})},{});var ae=Sr.properties=[].concat(C,w,E,v,x,G,y,p,c,h,g,A,_,D,P,z,R,N,B,I,F),re=Sr.propertyGroups={behavior:C,transition:w,visibility:E,overlay:v,underlay:x,ghost:G,commonLabel:y,labelDimensions:p,mainLabel:c,sourceLabel:h,targetLabel:g,nodeBody:A,nodeBorder:_,nodeOutline:D,backgroundImage:P,pie:z,stripe:R,compound:N,edgeLine:B,edgeArrow:I,core:F},K=Sr.propertyGroupNames={},W=Sr.propertyGroupKeys=Object.keys(re);W.forEach(function(oe){K[oe]=re[oe].map(function(le){return le.name}),re[oe].forEach(function(le){return le.groupKey=oe})});var Z=Sr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Sr.propertyNames=ae.map(function(oe){return oe.name});for(var U=0;U<ae.length;U++){var V=ae[U];ae[V.name]=V}for(var X=0;X<Z.length;X++){var ee=Z[X],se=ae[ee.pointsTo],te={name:ee.name,alias:!0,pointsTo:se};ae.push(te),ae[ee.name]=te}})();Sr.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};Sr.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=wt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,f){for(var c=1;c<=Sr.pieBackgroundN;c++){var h=f.name.replace("{{i}}",c),g=f.value;u[h]=g}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,f){for(var c=1;c<=Sr.stripeBackgroundN;c++){var h=f.name.replace("{{i}}",c),g=f.value;u[h]=g}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,f){return Sr.arrowPrefixes.forEach(function(c){var h=c+"-"+f.name,g=f.value;u[h]=g}),u},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],l=this.parse(i,o);r[i]=l}}return t.defaultProperties=r,t.defaultProperties};Sr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Bc={};Bc.parse=function(t,e,r,n){var a=this;if(pr(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=r?"t":"f",l=""+e,u=KP(t,l,o,i),f=a.propCache=a.propCache||[],c;return(c=f[u])||(c=f[u]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(c=Ca(c),c&&(c.value=Ca(c.value))),c};Bc.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Wt("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Wt("The style value of `label` is deprecated for `"+a.name+"`"),a};Bc.parseImpl=function(t,e,r,n){var a=this;t=p1(t);var i=a.properties[t],o=e,l=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var u=mt(e);u&&(e=e.trim());var f=i.type;if(!f)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(pr(e))return{name:t,value:e,strValue:"fn",mapped:l.fn,bypass:r};var c,h;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(l.data.regex).exec(e))){if(r)return!1;var g=l.data;return{name:t,value:c,strValue:""+e,mapped:g,field:c[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(h=new RegExp(l.mapData.regex).exec(e))){if(r||f.multiple)return!1;var p=l.mapData;if(!(f.color||f.number))return!1;var y=this.parse(t,h[4]);if(!y||y.mapped)return!1;var C=this.parse(t,h[5]);if(!C||C.mapped)return!1;if(y.pfValue===C.pfValue||y.strValue===C.strValue)return Wt("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+y.strValue+"`"),this.parse(t,y.strValue);if(f.color){var E=y.value,v=C.value,x=E[0]===v[0]&&E[1]===v[1]&&E[2]===v[2]&&(E[3]===v[3]||(E[3]==null||E[3]===1)&&(v[3]==null||v[3]===1));if(x)return!1}return{name:t,value:h,strValue:""+e,mapped:p,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:y.value,valueMax:C.value,bypass:r}}}if(f.multiple&&n!=="multiple"){var w;if(u?w=e.split(/\s+/):Qt(e)?w=e:w=[e],f.evenMultiple&&w.length%2!==0)return null;for(var T=[],A=[],_=[],D="",P=!1,N=0;N<w.length;N++){var B=a.parse(t,w[N],r,"multiple");P=P||mt(B.value),T.push(B.value),_.push(B.pfValue!=null?B.pfValue:B.value),A.push(B.units),D+=(N>0?" ":"")+B.strValue}return f.validate&&!f.validate(T,A)?null:f.singleEnum&&P?T.length===1&&mt(T[0])?{name:t,value:T[0],strValue:T[0],bypass:r}:null:{name:t,value:T,pfValue:_,strValue:D,bypass:r,units:A}}var G=function(){for(var te=0;te<f.enums.length;te++){var oe=f.enums[te];if(oe===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(f.number){var F,z="px";if(f.units&&(F=f.units),f.implicitUnits&&(z=f.implicitUnits),!f.unitless)if(u){var M="px|em"+(f.allowPercent?"|\\%":"");F&&(M=F);var R=e.match("^("+Fr+")("+M+")?$");R&&(e=R[1],F=R[2]||z)}else(!F||f.implicitUnits)&&(F=z);if(e=parseFloat(e),isNaN(e)&&f.enums===void 0)return null;if(isNaN(e)&&f.enums!==void 0)return e=o,G();if(f.integer&&!Tq(e)||f.min!==void 0&&(e<f.min||f.strictMin&&e===f.min)||f.max!==void 0&&(e>f.max||f.strictMax&&e===f.max))return null;var k={name:t,value:e,strValue:""+e+(F||""),units:F,bypass:r};return f.unitless||F!=="px"&&F!=="em"?k.pfValue=e:k.pfValue=F==="px"||!F?e:this.getEmSizeInPixels()*e,(F==="ms"||F==="s")&&(k.pfValue=F==="ms"?e:1e3*e),(F==="deg"||F==="rad")&&(k.pfValue=F==="rad"?e:Rz(e)),F==="%"&&(k.pfValue=e/100),k}else if(f.propList){var I=[],q=""+e;if(q!=="none"){for(var ae=q.split(/\s*,\s*|\s+/),re=0;re<ae.length;re++){var K=ae[re].trim();a.properties[K]?I.push(K):Wt("`"+K+"` is not a valid property name")}if(I.length===0)return null}return{name:t,value:I,strValue:I.length===0?"none":I.join(" "),bypass:r}}else if(f.color){var W=HP(e);return W?{name:t,value:W,pfValue:W,strValue:"rgb("+W[0]+","+W[1]+","+W[2]+")",bypass:r}:null}else if(f.regex||f.regexes){if(f.enums){var Z=G();if(Z)return Z}for(var U=f.regexes?f.regexes:[f.regex],V=0;V<U.length;V++){var X=new RegExp(U[V]),ee=X.exec(e);if(ee)return{name:t,value:f.singleRegexMatchValue?ee[1]:ee,strValue:""+e,bypass:r}}return null}else return f.string?{name:t,value:""+e,strValue:""+e,bypass:r}:f.enums?G():null};var $r=function(e){if(!(this instanceof $r))return new $r(e);if(!v1(e)){vr("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},vn=$r.prototype;vn.instanceString=function(){return"style"};vn.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};vn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};vn.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};vn.selector=function(t){var e=t==="core"?null:new Ri(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};vn.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[Tc(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};vn.style=vn.css;vn.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};vn.append=function(t){return qP(t)?t.appendToStyle(this):Qt(t)?this.appendFromJson(t):mt(t)&&this.appendFromString(t),this};$r.fromJson=function(t,e){var r=new $r(t);return r.fromJson(e),r};$r.fromString=function(t,e){return new $r(t).fromString(e)};[Xr,du,M1,Ta,Fc,R1,Sr,Bc].forEach(function(t){wt(vn,t)});$r.types=vn.types;$r.properties=vn.properties;$r.propertyGroups=vn.propertyGroups;$r.propertyGroupNames=vn.propertyGroupNames;$r.propertyGroupKeys=vn.propertyGroupKeys;var OH={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return qP(e)?r.style=e.generateStyle(this):Qt(e)?r.style=$r.fromJson(this,e):mt(e)?r.style=$r.fromString(this,e):r.style=$r(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},IH="single",wo={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=IH),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,o,l;switch(e.length){case 0:return r;case 1:if(mt(e[0]))return n=e[0],r[n];if(It(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,l=i.y,nt(o)&&(r.x=o),nt(l)&&(r.y=l),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&nt(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,o,l,u,f;if(!this._private.panningEnabled)return this;switch(n.length){case 1:It(e)&&(l=n[0],u=l.x,f=l.y,nt(u)&&(a.x+=u),nt(f)&&(a.y+=f),this.emit("pan viewport"));break;case 2:i=e,o=r,(i==="x"||i==="y")&&nt(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(nt(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(mt(e)){var a=e;e=this.$(a)}else if(Lq(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Bn(e)||(e=this.mutableElements());if(!(Bn(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),l=this.height(),u;if(r=nt(r)?r:0,!isNaN(o)&&!isNaN(l)&&o>0&&l>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((o-2*r)/n.w,(l-2*r)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var f={x:(o-u*(n.x1+n.x2))/2,y:(l-u*(n.y1+n.y2))/2};return{zoom:u,pan:f}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return nt(e)&&nt(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):nt(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:nt(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,o,l=!1;if(r.zoomingEnabled||(l=!0),nt(e)?o=e:It(e)&&(o=e.level,e.position!=null?i=Lc(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(l=!0)),o=o>r.maxZoom?r.maxZoom:o,o=o<r.minZoom?r.minZoom:o,l||!nt(o)||o===a||i!=null&&(!nt(i.x)||!nt(i.y)))return null;if(i!=null){var u=n,f=a,c=o,h={x:-c/f*(i.x-u.x)+i.x,y:-c/f*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:h}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],o=!1,l=!1;if(!e)return this;if(nt(e.zoom)||(n=!1),It(e.pan)||(a=!1),!n&&!a)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=u,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&r.panningEnabled){var f=e.pan;nt(f.x)&&(r.pan.x=f.x,l=!1),nt(f.y)&&(r.pan.y=f.y,l=!1),l||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(mt(e)){var n=e;e=this.mutableElements().filter(n)}else Bn(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();r=r===void 0?this._private.zoom:r;var l={x:(i-r*(a.x1+a.x2))/2,y:(o-r*(a.y1+a.y2))/2};return l}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),i=function(l){return parseFloat(a.getPropertyValue(l))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};wo.centre=wo.center;wo.autolockNodes=wo.autolock;wo.autoungrabifyNodes=wo.autoungrabify;var Ql={data:Ut.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ut.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ut.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ut.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Ql.attr=Ql.data;Ql.removeAttr=Ql.removeData;var Jl=function(e){var r=this;e=wt({},e);var n=e.container;n&&!Xf(n)&&Xf(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var o=Or!==void 0&&n!==void 0&&!e.headless,l=e;l.layout=wt({name:o?"grid":"null"},l.layout),l.renderer=wt({name:o?"canvas":"null"},l.renderer);var u=function(y,C,E){return C!==void 0?C:E!==void 0?E:y},f=this._private={container:n,ready:!1,options:l,elements:new tn(this),listeners:[],aniEles:new tn(this),data:l.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,l.zoomingEnabled),userZoomingEnabled:u(!0,l.userZoomingEnabled),panningEnabled:u(!0,l.panningEnabled),userPanningEnabled:u(!0,l.userPanningEnabled),boxSelectionEnabled:u(!0,l.boxSelectionEnabled),autolock:u(!1,l.autolock,l.autolockNodes),autoungrabify:u(!1,l.autoungrabify,l.autoungrabifyNodes),autounselectify:u(!1,l.autounselectify),styleEnabled:l.styleEnabled===void 0?o:l.styleEnabled,zoom:nt(l.zoom)?l.zoom:1,pan:{x:It(l.pan)&&nt(l.pan.x)?l.pan.x:0,y:It(l.pan)&&nt(l.pan.y)?l.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,l.multiClickDebounceTime)};this.createEmitter(),this.selectionType(l.selectionType),this.zoomRange({min:l.minZoom,max:l.maxZoom});var c=function(y,C){var E=y.some(Dq);if(E)return Ls.all(y).then(C);C(y)};f.styleEnabled&&r.setStyle([]);var h=wt({},l,l.renderer);r.initRenderer(h);var g=function(y,C,E){r.notifications(!1);var v=r.mutableElements();v.length>0&&v.remove(),y!=null&&(It(y)||Qt(y))&&r.add(y),r.one("layoutready",function(w){r.notifications(!0),r.emit(w),r.one("load",C),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",E),r.emit("done")});var x=wt({},r._private.options.layout);x.eles=r.elements(),r.layout(x).run()};c([l.style,l.elements],function(p){var y=p[0],C=p[1];f.styleEnabled&&r.style().append(y),g(C,function(){r.startAnimationLoop(),f.ready=!0,pr(l.ready)&&r.on("ready",l.ready);for(var E=0;E<i.length;E++){var v=i[E];r.on("ready",v)}a&&(a.readies=[]),r.emit("ready")},l.done)})},tc=Jl.prototype;wt(tc,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Or;var r=this._private.container.ownerDocument;return r===void 0||r==null?Or:r.defaultView||Or},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!Xf(e)&&Xf(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(wt({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Ca(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(T){return r.getElementById(T.id())};if(It(e)){if(r.startBatch(),e.elements){var o={},l=function(T,A){for(var _=[],D=[],P=0;P<T.length;P++){var N=T[P];if(!N.data.id){Wt("cy.json() cannot handle elements without an ID attribute");continue}var B=""+N.data.id,G=r.getElementById(B);o[B]=!0,G.length!==0?D.push({ele:G,json:N}):(A&&(N.group=A),_.push(N))}r.add(_);for(var F=0;F<D.length;F++){var z=D[F],M=z.ele,R=z.json;M.json(R)}};if(Qt(e.elements))l(e.elements);else for(var u=["nodes","edges"],f=0;f<u.length;f++){var c=u[f],h=e.elements[c];Qt(h)&&l(h,c)}var g=r.collection();a.filter(function(w){return!o[w.id()]}).forEach(function(w){w.isParent()?g.merge(w):w.remove()}),g.forEach(function(w){return w.children().move({parent:null})}),g.forEach(function(w){return i(w).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var p=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],y=0;y<p.length;y++){var C=p[y];e[C]!=null&&r[C](e[C])}return r.endBatch(),this}else{var E=!!e,v={};E?v.elements=this.elements().map(function(w){return w.json()}):(v.elements={},a.forEach(function(w){var T=w.group();v.elements[T]||(v.elements[T]=[]),v.elements[T].push(w.json())})),this._private.styleEnabled&&(v.style=r.style().json()),v.data=Ca(r.data());var x=n.options;return v.zoomingEnabled=n.zoomingEnabled,v.userZoomingEnabled=n.userZoomingEnabled,v.zoom=n.zoom,v.minZoom=n.minZoom,v.maxZoom=n.maxZoom,v.panningEnabled=n.panningEnabled,v.userPanningEnabled=n.userPanningEnabled,v.pan=Ca(n.pan),v.boxSelectionEnabled=n.boxSelectionEnabled,v.renderer=Ca(x.renderer),v.hideEdgesOnViewport=x.hideEdgesOnViewport,v.textureOnViewport=x.textureOnViewport,v.wheelSensitivity=x.wheelSensitivity,v.motionBlur=x.motionBlur,v.multiClickDebounceTime=x.multiClickDebounceTime,v}}});tc.$id=tc.getElementById;[SH,MH,FN,qb,Af,PH,zb,Lf,OH,wo,Ql].forEach(function(t){wt(tc,t)});var FH={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},BH={maximal:!1,acyclic:!1},ts=function(e){return e.scratch("breadthfirst")},GT=function(e,r){return e.scratch("breadthfirst",r)};function BN(t){this.options=wt({},FH,BH,t)}BN.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(Ee){return Ee.isChildless()}),a=r,i=t.directed,o=t.acyclic||t.maximal||t.maximalAdjustments>0,l=!!t.boundingBox,u=e.extent(),f=kn(l?t.boundingBox:{x1:u.x1,y1:u.y1,w:u.w,h:u.h}),c;if(Bn(t.roots))c=t.roots;else if(Qt(t.roots)){for(var h=[],g=0;g<t.roots.length;g++){var p=t.roots[g],y=e.getElementById(p);h.push(y)}c=e.collection(h)}else if(mt(t.roots))c=e.$(t.roots);else if(i)c=n.roots();else{var C=r.components();c=e.collection();for(var E=function(){var he=C[v],de=he.maxDegree(!1),be=he.filter(function(De){return De.degree(!1)===de});c=c.add(be)},v=0;v<C.length;v++)E()}var x=[],w={},T=function(he,de){x[de]==null&&(x[de]=[]);var be=x[de].length;x[de].push(he),GT(he,{index:be,depth:de})},A=function(he,de){var be=ts(he),De=be.depth,Se=be.index;x[De][Se]=null,he.isChildless()&&T(he,de)};a.bfs({roots:c,directed:t.directed,visit:function(he,de,be,De,Se){var Re=he[0],Ie=Re.id();Re.isChildless()&&T(Re,Se),w[Ie]=!0}});for(var _=[],D=0;D<n.length;D++){var P=n[D];w[P.id()]||_.push(P)}var N=function(he){for(var de=x[he],be=0;be<de.length;be++){var De=de[be];if(De==null){de.splice(be,1),be--;continue}GT(De,{depth:he,index:be})}},B=function(he,de){for(var be=ts(he),De=he.incomers().filter(function(tt){return tt.isNode()&&r.has(tt)}),Se=-1,Re=he.id(),Ie=0;Ie<De.length;Ie++){var qe=De[Ie],Ze=ts(qe);Se=Math.max(Se,Ze.depth)}if(be.depth<=Se){if(!t.acyclic&&de[Re])return null;var $e=Se+1;return A(he,$e),de[Re]=$e,!0}return!1};if(i&&o){var G=[],F={},z=function(he){return G.push(he)},M=function(){return G.shift()};for(n.forEach(function(Ee){return G.push(Ee)});G.length>0;){var R=M(),k=B(R,F);if(k)R.outgoers().filter(function(Ee){return Ee.isNode()&&r.has(Ee)}).forEach(z);else if(k===null){Wt("Detected double maximal shift for node `"+R.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var I=0;if(t.avoidOverlap)for(var q=0;q<n.length;q++){var ae=n[q],re=ae.layoutDimensions(t),K=re.w,W=re.h;I=Math.max(I,K,W)}var Z={},U=function(he){if(Z[he.id()])return Z[he.id()];for(var de=ts(he).depth,be=he.neighborhood(),De=0,Se=0,Re=0;Re<be.length;Re++){var Ie=be[Re];if(!(Ie.isEdge()||Ie.isParent()||!n.has(Ie))){var qe=ts(Ie);if(qe!=null){var Ze=qe.index,$e=qe.depth;if(!(Ze==null||$e==null)){var tt=x[$e].length;$e<de&&(De+=Ze/tt,Se++)}}}}return Se=Math.max(1,Se),De=De/Se,Se===0&&(De=0),Z[he.id()]=De,De},V=function(he,de){var be=U(he),De=U(de),Se=be-De;return Se===0?GP(he.id(),de.id()):Se};t.depthSort!==void 0&&(V=t.depthSort);for(var X=x.length,ee=0;ee<X;ee++)x[ee].sort(V),N(ee);for(var se=[],te=0;te<_.length;te++)se.push(_[te]);var oe=function(){for(var he=0;he<X;he++)N(he)};se.length&&(x.unshift(se),X=x.length,oe());for(var le=0,$=0;$<X;$++)le=Math.max(x[$].length,le);var ne={x:f.x1+f.w/2,y:f.y1+f.h/2},ie=n.reduce(function(Ee,he){return function(de){return{w:Ee.w===-1?de.w:(Ee.w+de.w)/2,h:Ee.h===-1?de.h:(Ee.h+de.h)/2}}(he.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),ue=Math.max(X===1?0:l?(f.h-t.padding*2-ie.h)/(X-1):(f.h-t.padding*2-ie.h)/(X+1),I),me=x.reduce(function(Ee,he){return Math.max(Ee,he.length)},0),ge=function(he){var de=ts(he),be=de.depth,De=de.index;if(t.circle){var Se=Math.min(f.w/2/X,f.h/2/X);Se=Math.max(Se,I);var Re=Se*be+Se-(X>0&&x[0].length<=3?Se/2:0),Ie=2*Math.PI/x[be].length*De;return be===0&&x[0].length===1&&(Re=1),{x:ne.x+Re*Math.cos(Ie),y:ne.y+Re*Math.sin(Ie)}}else{var qe=x[be].length,Ze=Math.max(qe===1?0:l?(f.w-t.padding*2-ie.w)/((t.grid?me:qe)-1):(f.w-t.padding*2-ie.w)/((t.grid?me:qe)+1),I),$e={x:ne.x+(De+1-(qe+1)/2)*Ze,y:ne.y+(be+1-(X+1)/2)*ue};return $e}};return r.nodes().layoutPositions(this,t,ge),this};var qH={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function qN(t){this.options=wt({},qH,t)}qN.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=kn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l={x:o.x1+o.w/2,y:o.y1+o.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,f=u/Math.max(1,i.length-1),c,h=0,g=0;g<i.length;g++){var p=i[g],y=p.layoutDimensions(e),C=y.w,E=y.h;h=Math.max(h,C,E)}if(nt(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(o.h,o.w)/2-h,i.length>1&&e.avoidOverlap){h*=1.75;var v=Math.cos(f)-Math.cos(0),x=Math.sin(f)-Math.sin(0),w=Math.sqrt(h*h/(v*v+x*x));c=Math.max(w,c)}var T=function(_,D){var P=e.startAngle+D*f*(a?1:-1),N=c*Math.cos(P),B=c*Math.sin(P),G={x:l.x+N,y:l.y+B};return G};return n.nodes().layoutPositions(this,e,T),this};var zH={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function zN(t){this.options=wt({},zH,t)}zN.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),o=kn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],f=0,c=0;c<i.length;c++){var h=i[c],g=void 0;g=e.concentric(h),u.push({value:g,node:h}),h._private.scratch.concentric=g}i.updateStyle();for(var p=0;p<i.length;p++){var y=i[p],C=y.layoutDimensions(e);f=Math.max(f,C.w,C.h)}u.sort(function(ie,ue){return ue.value-ie.value});for(var E=e.levelWidth(i),v=[[]],x=v[0],w=0;w<u.length;w++){var T=u[w];if(x.length>0){var A=Math.abs(x[0].value-T.value);A>=E&&(x=[],v.push(x))}x.push(T)}var _=f+e.minNodeSpacing;if(!e.avoidOverlap){var D=v.length>0&&v[0].length>1,P=Math.min(o.w,o.h)/2-_,N=P/(v.length+D?1:0);_=Math.min(_,N)}for(var B=0,G=0;G<v.length;G++){var F=v[G],z=e.sweep===void 0?2*Math.PI-2*Math.PI/F.length:e.sweep,M=F.dTheta=z/Math.max(1,F.length-1);if(F.length>1&&e.avoidOverlap){var R=Math.cos(M)-Math.cos(0),k=Math.sin(M)-Math.sin(0),I=Math.sqrt(_*_/(R*R+k*k));B=Math.max(I,B)}F.r=B,B+=_}if(e.equidistant){for(var q=0,ae=0,re=0;re<v.length;re++){var K=v[re],W=K.r-ae;q=Math.max(q,W)}ae=0;for(var Z=0;Z<v.length;Z++){var U=v[Z];Z===0&&(ae=U.r),U.r=ae,ae+=q}}for(var V={},X=0;X<v.length;X++)for(var ee=v[X],se=ee.dTheta,te=ee.r,oe=0;oe<ee.length;oe++){var le=ee[oe],$=e.startAngle+(r?1:-1)*se*oe,ne={x:l.x+te*Math.cos($),y:l.y+te*Math.sin($)};V[le.node.id()]=ne}return a.nodes().layoutPositions(this,e,function(ie){var ue=ie.id();return V[ue]}),this};var Rv,GH={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function qc(t){this.options=wt({},GH,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),l=e.some(function(f){return f.data("id")===i}),u=e.some(function(f){return f.data("id")===o});return!l||!u});this.options.eles=this.options.eles.not(n)}qc.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Rv=!0:Rv=!1;var n=HH(e,r,t);Rv&&WH(n),t.randomize&&VH(n);var a=ja(),i=function(){$H(n,e,t),t.fit===!0&&e.fit(t.padding)},o=function(g){return!(r.stopped||g>=t.numIter||(YH(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},l=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var g=t.eles.nodes(),p=HN(n,t,g);g.layoutPositions(r,t,p)}},u=0,f=!0;if(t.animate===!0){var c=function(){for(var g=0;f&&g<t.refresh;)f=o(u),u++,g++;if(!f)UT(n,t),l();else{var p=ja();p-a>=t.animationThreshold&&i(),Kf(c)}};c()}else{for(;f;)f=o(u),u++;UT(n,t),l()}return this};qc.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};qc.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var HH=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=kn(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),l={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},u=n.eles.components(),f={},c=0;c<u.length;c++)for(var h=u[c],g=0;g<h.length;g++){var p=h[g];f[p.id()]=c}for(var c=0;c<l.nodeSize;c++){var y=i[c],C=y.layoutDimensions(n),E={};E.isLocked=y.locked(),E.id=y.data("id"),E.parentId=y.data("parent"),E.cmptId=f[y.id()],E.children=[],E.positionX=y.position("x"),E.positionY=y.position("y"),E.offsetX=0,E.offsetY=0,E.height=C.w,E.width=C.h,E.maxX=E.positionX+E.width/2,E.minX=E.positionX-E.width/2,E.maxY=E.positionY+E.height/2,E.minY=E.positionY-E.height/2,E.padLeft=parseFloat(y.style("padding")),E.padRight=parseFloat(y.style("padding")),E.padTop=parseFloat(y.style("padding")),E.padBottom=parseFloat(y.style("padding")),E.nodeRepulsion=pr(n.nodeRepulsion)?n.nodeRepulsion(y):n.nodeRepulsion,l.layoutNodes.push(E),l.idToIndex[E.id]=c}for(var v=[],x=0,w=-1,T=[],c=0;c<l.nodeSize;c++){var y=l.layoutNodes[c],A=y.parentId;A!=null?l.layoutNodes[l.idToIndex[A]].children.push(y.id):(v[++w]=y.id,T.push(y.id))}for(l.graphSet.push(T);x<=w;){var _=v[x++],D=l.idToIndex[_],p=l.layoutNodes[D],P=p.children;if(P.length>0){l.graphSet.push(P);for(var c=0;c<P.length;c++)v[++w]=P[c]}}for(var c=0;c<l.graphSet.length;c++)for(var N=l.graphSet[c],g=0;g<N.length;g++){var B=l.idToIndex[N[g]];l.indexToGraph[B]=c}for(var c=0;c<l.edgeSize;c++){var G=a[c],F={};F.id=G.data("id"),F.sourceId=G.data("source"),F.targetId=G.data("target");var z=pr(n.idealEdgeLength)?n.idealEdgeLength(G):n.idealEdgeLength,M=pr(n.edgeElasticity)?n.edgeElasticity(G):n.edgeElasticity,R=l.idToIndex[F.sourceId],k=l.idToIndex[F.targetId],I=l.indexToGraph[R],q=l.indexToGraph[k];if(I!=q){for(var ae=UH(F.sourceId,F.targetId,l),re=l.graphSet[ae],K=0,E=l.layoutNodes[R];re.indexOf(E.id)===-1;)E=l.layoutNodes[l.idToIndex[E.parentId]],K++;for(E=l.layoutNodes[k];re.indexOf(E.id)===-1;)E=l.layoutNodes[l.idToIndex[E.parentId]],K++;z*=K*n.nestingFactor}F.idealLength=z,F.elasticity=M,l.layoutEdges.push(F)}return l},UH=function(e,r,n){var a=GN(e,r,0,n);return 2>a.count?0:a.graph},GN=function(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var o=0,l=0;l<i.length;l++){var u=i[l],f=a.idToIndex[u],c=a.layoutNodes[f].children;if(c.length!==0){var h=a.indexToGraph[a.idToIndex[c[0]]],g=GN(e,r,h,a);if(g.count!==0)if(g.count===1){if(o++,o===2)break}else return g}}return{count:o,graph:n}},WH,VH=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},HN=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(o){var l=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,l.positionX),i.x2=Math.max(i.x2,l.positionX),i.y1=Math.min(i.y1,l.positionY),i.y2=Math.max(i.y2,l.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,l){var u=e.layoutNodes[e.idToIndex[o.data("id")]];if(r.boundingBox){var f=(u.positionX-i.x1)/i.w,c=(u.positionY-i.y1)/i.h;return{x:a.x1+f*a.w,y:a.y1+c*a.h}}else return{x:u.positionX,y:u.positionY}}},$H=function(e,r,n){var a=n.layout,i=n.eles.nodes(),o=HN(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},YH=function(e,r,n){XH(e,r),ZH(e),QH(e,r),JH(e),eU(e)},XH=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var l=e.layoutNodes[e.idToIndex[a[o]]],u=o+1;u<i;u++){var f=e.layoutNodes[e.idToIndex[a[u]]];KH(l,f,e,r)}},HT=function(e){return-1+2*e*Math.random()},KH=function(e,r,n,a){var i=e.cmptId,o=r.cmptId;if(!(i!==o&&!n.isCompound)){var l=r.positionX-e.positionX,u=r.positionY-e.positionY,f=1;l===0&&u===0&&(l=HT(f),u=HT(f));var c=jH(e,r,l,u);if(c>0)var h=a.nodeOverlap*c,g=Math.sqrt(l*l+u*u),p=h*l/g,y=h*u/g;else var C=rc(e,l,u),E=rc(r,-1*l,-1*u),v=E.x-C.x,x=E.y-C.y,w=v*v+x*x,g=Math.sqrt(w),h=(e.nodeRepulsion+r.nodeRepulsion)/w,p=h*v/g,y=h*x/g;e.isLocked||(e.offsetX-=p,e.offsetY-=y),r.isLocked||(r.offsetX+=p,r.offsetY+=y)}},jH=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var o=e.maxY-r.minY;else var o=r.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},rc=function(e,r,n){var a=e.positionX,i=e.positionY,o=e.height||1,l=e.width||1,u=n/r,f=o/l,c={};return r===0&&0<n||r===0&&0>n?(c.x=a,c.y=i+o/2,c):0<r&&-1*f<=u&&u<=f?(c.x=a+l/2,c.y=i+l*n/2/r,c):0>r&&-1*f<=u&&u<=f?(c.x=a-l/2,c.y=i-l*n/2/r,c):0<n&&(u<=-1*f||u>=f)?(c.x=a+o*r/2/n,c.y=i+o/2,c):(0>n&&(u<=-1*f||u>=f)&&(c.x=a-o*r/2/n,c.y=i-o/2),c)},ZH=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],l=e.idToIndex[a.targetId],u=e.layoutNodes[l],f=u.positionX-o.positionX,c=u.positionY-o.positionY;if(!(f===0&&c===0)){var h=rc(o,f,c),g=rc(u,-1*f,-1*c),p=g.x-h.x,y=g.y-h.y,C=Math.sqrt(p*p+y*y),E=Math.pow(a.idealLength-C,2)/a.elasticity;if(C!==0)var v=E*p/C,x=E*y/C;else var v=0,x=0;o.isLocked||(o.offsetX+=v,o.offsetY+=x),u.isLocked||(u.offsetX-=v,u.offsetY-=x)}}},QH=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var l=e.clientHeight/2,u=e.clientWidth/2;else var f=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[f.parentId]],l=c.positionX,u=c.positionY;for(var h=0;h<o;h++){var g=e.layoutNodes[e.idToIndex[i[h]]];if(!g.isLocked){var p=l-g.positionX,y=u-g.positionY,C=Math.sqrt(p*p+y*y);if(C>n){var E=r.gravity*p/C,v=r.gravity*y/C;g.offsetX+=E,g.offsetY+=v}}}}},JH=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],l=e.idToIndex[o],u=e.layoutNodes[l],f=u.children;if(0<f.length&&!u.isLocked){for(var c=u.offsetX,h=u.offsetY,g=0;g<f.length;g++){var p=e.layoutNodes[e.idToIndex[f[g]]];p.offsetX+=c,p.offsetY+=h,n[++i]=f[g]}u.offsetX=0,u.offsetY=0}}},eU=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=tU(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,UN(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},tU=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},UN=function(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return UN(a,r)}},UT=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],l=o.cmptId,u=a[l]=a[l]||[];u.push(o)}for(var f=0,i=0;i<a.length;i++){var c=a[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var h=0;h<c.length;h++){var g=c[h];c.x1=Math.min(c.x1,g.positionX-g.width/2),c.x2=Math.max(c.x2,g.positionX+g.width/2),c.y1=Math.min(c.y1,g.positionY-g.height/2),c.y2=Math.max(c.y2,g.positionY+g.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,f+=c.w*c.h}}a.sort(function(x,w){return w.w*w.h-x.w*x.h});for(var p=0,y=0,C=0,E=0,v=Math.sqrt(f)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(c){for(var h=0;h<c.length;h++){var g=c[h];g.isLocked||(g.positionX+=p-c.x1,g.positionY+=y-c.y1)}p+=c.w+r.componentSpacing,C+=c.w+r.componentSpacing,E=Math.max(E,c.h),C>v&&(y+=E+r.componentSpacing,p=0,C=0,E=0)}}},rU={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function WN(t){this.options=wt({},rU,t)}WN.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=kn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(Z){return{x:i.x1,y:i.y1}});else{var o=a.size(),l=Math.sqrt(o*i.h/i.w),u=Math.round(l),f=Math.round(i.w/i.h*l),c=function(U){if(U==null)return Math.min(u,f);var V=Math.min(u,f);V==u?u=U:f=U},h=function(U){if(U==null)return Math.max(u,f);var V=Math.max(u,f);V==u?u=U:f=U},g=e.rows,p=e.cols!=null?e.cols:e.columns;if(g!=null&&p!=null)u=g,f=p;else if(g!=null&&p==null)u=g,f=Math.ceil(o/u);else if(g==null&&p!=null)f=p,u=Math.ceil(o/f);else if(f*u>o){var y=c(),C=h();(y-1)*C>=o?c(y-1):(C-1)*y>=o&&h(C-1)}else for(;f*u<o;){var E=c(),v=h();(v+1)*E>=o?h(v+1):c(E+1)}var x=i.w/f,w=i.h/u;if(e.condense&&(x=0,w=0),e.avoidOverlap)for(var T=0;T<a.length;T++){var A=a[T],_=A._private.position;(_.x==null||_.y==null)&&(_.x=0,_.y=0);var D=A.layoutDimensions(e),P=e.avoidOverlapPadding,N=D.w+P,B=D.h+P;x=Math.max(x,N),w=Math.max(w,B)}for(var G={},F=function(U,V){return!!G["c-"+U+"-"+V]},z=function(U,V){G["c-"+U+"-"+V]=!0},M=0,R=0,k=function(){R++,R>=f&&(R=0,M++)},I={},q=0;q<a.length;q++){var ae=a[q],re=e.position(ae);if(re&&(re.row!==void 0||re.col!==void 0)){var K={row:re.row,col:re.col};if(K.col===void 0)for(K.col=0;F(K.row,K.col);)K.col++;else if(K.row===void 0)for(K.row=0;F(K.row,K.col);)K.row++;I[ae.id()]=K,z(K.row,K.col)}}var W=function(U,V){var X,ee;if(U.locked()||U.isParent())return!1;var se=I[U.id()];if(se)X=se.col*x+x/2+i.x1,ee=se.row*w+w/2+i.y1;else{for(;F(M,R);)k();X=R*x+x/2+i.x1,ee=M*w+w/2+i.y1,z(M,R),k()}return{x:X,y:ee}};a.layoutPositions(this,e,W)}return this};var nU={ready:function(){},stop:function(){}};function P1(t){this.options=wt({},nU,t)}P1.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};P1.prototype.stop=function(){return this};var aU={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function VN(t){this.options=wt({},aU,t)}VN.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=pr(t.positions);function a(i){if(t.positions==null)return Az(i.position());if(n)return t.positions(i);var o=t.positions[i._private.data.id];return o??null}return r.layoutPositions(this,t,function(i,o){var l=a(i);return i.locked()||l==null?!1:l}),this};var iU={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function $N(t){this.options=wt({},iU,t)}$N.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=kn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,l){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var oU=[{name:"breadthfirst",impl:BN},{name:"circle",impl:qN},{name:"concentric",impl:zN},{name:"cose",impl:qc},{name:"grid",impl:WN},{name:"null",impl:P1},{name:"preset",impl:VN},{name:"random",impl:$N}];function YN(t){this.options=t,this.notifications=0}var WT=function(){},VT=function(){throw new Error("A headless instance can not render images")};YN.prototype={recalculateRenderedStyle:WT,notify:function(){this.notifications++},init:WT,isHeadless:function(){return!0},png:VT,jpg:VT};var N1={};N1.arrowShapeWidth=.3;N1.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(f,c,h,g,p,y,C){var E=p.x-h/2-C,v=p.x+h/2+C,x=p.y-h/2-C,w=p.y+h/2+C,T=E<=f&&f<=v&&x<=c&&c<=w;return T},n=function(f,c,h,g,p){var y=f*Math.cos(g)-c*Math.sin(g),C=f*Math.sin(g)+c*Math.cos(g),E=y*h,v=C*h,x=E+p.x,w=v+p.y;return{x,y:w}},a=function(f,c,h,g){for(var p=[],y=0;y<f.length;y+=2){var C=f[y],E=f[y+1];p.push(n(C,E,c,h,g))}return p},i=function(f){for(var c=[],h=0;h<f.length;h++){var g=f[h];c.push(g.x,g.y)}return c},o=function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").pfValue*2},l=function(f,c){mt(c)&&(c=t[c]),t[f]=wt({name:f,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(g,p,y,C,E,v){var x=i(a(this.points,y+2*v,C,E)),w=Rn(g,p,x);return w},roughCollide:r,draw:function(g,p,y,C){var E=a(this.points,p,y,C);e.arrowShapeImpl("polygon")(g,E)},spacing:function(g){return 0},gap:o},c)};l("none",{collide:jf,roughCollide:jf,draw:m1,spacing:sE,gap:sE}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(f,c,h,g,p){var y=a(this.points,c,h,g),C=this.controlPoint,E=n(C[0],C[1],c,h,g);e.arrowShapeImpl(this.name)(f,y,E)},gap:function(f){return o(f)*.8}}),l("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(f,c,h,g,p,y,C){var E=i(a(this.points,h+2*C,g,p)),v=i(a(this.pointsTee,h+2*C,g,p)),x=Rn(f,c,E)||Rn(f,c,v);return x},draw:function(f,c,h,g,p){var y=a(this.points,c,h,g),C=a(this.pointsTee,c,h,g);e.arrowShapeImpl(this.name)(f,y,C)}}),l("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(f,c,h,g,p,y,C){var E=p,v=Math.pow(E.x-f,2)+Math.pow(E.y-c,2)<=Math.pow((h+2*C)*this.radius,2),x=i(a(this.points,h+2*C,g,p));return Rn(f,c,x)||v},draw:function(f,c,h,g,p){var y=a(this.pointsTr,c,h,g);e.arrowShapeImpl(this.name)(f,y,g.x,g.y,this.radius*c)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),l("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(f,c){var h=this.baseCrossLinePts.slice(),g=c/f,p=3,y=5;return h[p]=h[p]-g,h[y]=h[y]-g,h},collide:function(f,c,h,g,p,y,C){var E=i(a(this.points,h+2*C,g,p)),v=i(a(this.crossLinePts(h,y),h+2*C,g,p)),x=Rn(f,c,E)||Rn(f,c,v);return x},draw:function(f,c,h,g,p){var y=a(this.points,c,h,g),C=a(this.crossLinePts(c,p),c,h,g);e.arrowShapeImpl(this.name)(f,y,C)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(f){return o(f)*.525}}),l("circle",{radius:.15,collide:function(f,c,h,g,p,y,C){var E=p,v=Math.pow(E.x-f,2)+Math.pow(E.y-c,2)<=Math.pow((h+2*C)*this.radius,2);return v},draw:function(f,c,h,g,p){e.arrowShapeImpl(this.name)(f,g.x,g.y,this.radius*c)},spacing:function(f){return e.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.radius}}),l("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(f){return 1},gap:function(f){return 1}}),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(f){return f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}}),l("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(f){return .95*f.pstyle("width").pfValue*f.pstyle("arrow-scale").value}})};var Co={};Co.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],l=r.pan(),u=r.zoom(),f=((t-a)/o-l.x)/u,c=((e-i)/o-l.y)/u;return[f,c]};Co.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(v){return parseFloat(r.getPropertyValue(v))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=t.clientWidth,l=t.clientHeight,u=a.left+a.right,f=a.top+a.bottom,c=i.left+i.right,h=e.width/(o+c),g=o-u,p=l-f,y=e.left+a.left+i.left,C=e.top+a.top+i.top;return this.containerBB=[y,C,g,p,h]};Co.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Co.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};Co.findNearestElements=function(t,e,r,n){var a=this,i=this,o=i.getCachedZSortedEles(),l=[],u=i.cy.zoom(),f=i.cy.hasCompoundNodes(),c=(n?24:8)/u,h=(n?8:2)/u,g=(n?8:2)/u,p=1/0,y,C;r&&(o=o.interactive);function E(D,P){if(D.isNode()){if(C)return;C=D,l.push(D)}if(D.isEdge()&&(P==null||P<p))if(y){if(y.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value&&y.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value){for(var N=0;N<l.length;N++)if(l[N].isEdge()){l[N]=D,y=D,p=P??p;break}}}else l.push(D),y=D,p=P??p}function v(D){var P=D.outerWidth()+2*h,N=D.outerHeight()+2*h,B=P/2,G=N/2,F=D.position(),z=D.pstyle("corner-radius").value==="auto"?"auto":D.pstyle("corner-radius").pfValue,M=D._private.rscratch;if(F.x-B<=t&&t<=F.x+B&&F.y-G<=e&&e<=F.y+G){var R=i.nodeShapes[a.getNodeShape(D)];if(R.checkPoint(t,e,0,P,N,F.x,F.y,z,M))return E(D,0),!0}}function x(D){var P=D._private,N=P.rscratch,B=D.pstyle("width").pfValue,G=D.pstyle("arrow-scale").value,F=B/2+c,z=F*F,M=F*2,q=P.source,ae=P.target,R;if(N.edgeType==="segments"||N.edgeType==="straight"||N.edgeType==="haystack"){for(var k=N.allpts,I=0;I+3<k.length;I+=2)if(zz(t,e,k[I],k[I+1],k[I+2],k[I+3],M)&&z>(R=Vz(t,e,k[I],k[I+1],k[I+2],k[I+3])))return E(D,R),!0}else if(N.edgeType==="bezier"||N.edgeType==="multibezier"||N.edgeType==="self"||N.edgeType==="compound"){for(var k=N.allpts,I=0;I+5<N.allpts.length;I+=4)if(Gz(t,e,k[I],k[I+1],k[I+2],k[I+3],k[I+4],k[I+5],M)&&z>(R=Wz(t,e,k[I],k[I+1],k[I+2],k[I+3],k[I+4],k[I+5])))return E(D,R),!0}for(var q=q||P.source,ae=ae||P.target,re=a.getArrowWidth(B,G),K=[{name:"source",x:N.arrowStartX,y:N.arrowStartY,angle:N.srcArrowAngle},{name:"target",x:N.arrowEndX,y:N.arrowEndY,angle:N.tgtArrowAngle},{name:"mid-source",x:N.midX,y:N.midY,angle:N.midsrcArrowAngle},{name:"mid-target",x:N.midX,y:N.midY,angle:N.midtgtArrowAngle}],I=0;I<K.length;I++){var W=K[I],Z=i.arrowShapes[D.pstyle(W.name+"-arrow-shape").value],U=D.pstyle("width").pfValue;if(Z.roughCollide(t,e,re,W.angle,{x:W.x,y:W.y},U,c)&&Z.collide(t,e,re,W.angle,{x:W.x,y:W.y},U,c))return E(D),!0}f&&l.length>0&&(v(q),v(ae))}function w(D,P,N){return Mn(D,P,N)}function T(D,P){var N=D._private,B=g,G;P?G=P+"-":G="",D.boundingBox();var F=N.labelBounds[P||"main"],z=D.pstyle(G+"label").value,M=D.pstyle("text-events").strValue==="yes";if(!(!M||!z)){var R=w(N.rscratch,"labelX",P),k=w(N.rscratch,"labelY",P),I=w(N.rscratch,"labelAngle",P),q=D.pstyle(G+"text-margin-x").pfValue,ae=D.pstyle(G+"text-margin-y").pfValue,re=F.x1-B-q,K=F.x2+B-q,W=F.y1-B-ae,Z=F.y2+B-ae;if(I){var U=Math.cos(I),V=Math.sin(I),X=function(ne,ie){return ne=ne-R,ie=ie-k,{x:ne*U-ie*V+R,y:ne*V+ie*U+k}},ee=X(re,W),se=X(re,Z),te=X(K,W),oe=X(K,Z),le=[ee.x+q,ee.y+ae,te.x+q,te.y+ae,oe.x+q,oe.y+ae,se.x+q,se.y+ae];if(Rn(t,e,le))return E(D),!0}else if(Cs(F,t,e))return E(D),!0}}for(var A=o.length-1;A>=0;A--){var _=o[A];_.isNode()?v(_)||T(_):x(_)||T(_)||T(_,"source")||T(_,"target")}return l};Co.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),o=2/i,l=[],u=Math.min(t,r),f=Math.max(t,r),c=Math.min(e,n),h=Math.max(e,n);t=u,r=f,e=c,n=h;var g=kn({x1:t,y1:e,x2:r,y2:n});function p(z,M,R){return Mn(z,M,R)}function y(z,M){var R=z._private,k=o,I="";z.boundingBox();var q=R.labelBounds.main,ae=p(R.rscratch,"labelX",M),re=p(R.rscratch,"labelY",M),K=p(R.rscratch,"labelAngle",M),W=z.pstyle(I+"text-margin-x").pfValue,Z=z.pstyle(I+"text-margin-y").pfValue,U=q.x1-k-W,V=q.x2+k-W,X=q.y1-k-Z,ee=q.y2+k-Z;if(K){var se=Math.cos(K),te=Math.sin(K),oe=function($,ne){return $=$-ae,ne=ne-re,{x:$*se-ne*te+ae,y:$*te+ne*se+re}};return[oe(U,X),oe(V,X),oe(V,ee),oe(U,ee)]}else return[{x:U,y:X},{x:V,y:X},{x:V,y:ee},{x:U,y:ee}]}for(var C=0;C<a.length;C++){var E=a[C];if(E.isNode()){var v=E,x=v.pstyle("text-events").strValue==="yes",w=v.pstyle("box-select-labels").strValue==="yes",T=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:w&&x});if(C1(g,T)){var A=y(v),_=[{x:g.x1,y:g.y1},{x:g.x2,y:g.y1},{x:g.x2,y:g.y2},{x:g.x1,y:g.y2}];jz(A,_)&&l.push(v)}}else{var D=E,P=D._private,N=P.rscratch;if(N.startX!=null&&N.startY!=null&&!Cs(g,N.startX,N.startY)||N.endX!=null&&N.endY!=null&&!Cs(g,N.endX,N.endY))continue;if(N.edgeType==="bezier"||N.edgeType==="multibezier"||N.edgeType==="self"||N.edgeType==="compound"||N.edgeType==="segments"||N.edgeType==="haystack"){for(var B=P.rstyle.bezierPts||P.rstyle.linePts||P.rstyle.haystackPts,G=!0,F=0;F<B.length;F++)if(!Bz(g,B[F])){G=!1;break}G&&l.push(D)}else(N.edgeType==="haystack"||N.edgeType==="straight")&&l.push(D)}}return l};var nc={};nc.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",l=e.edgeType==="self",u,f,c,h,g,p,v,x;if(r?(c=e.haystackPts[0],h=e.haystackPts[1],g=e.haystackPts[2],p=e.haystackPts[3]):(c=e.arrowStartX,h=e.arrowStartY,g=e.arrowEndX,p=e.arrowEndY),v=e.midX,x=e.midY,i)u=c-e.segpts[0],f=h-e.segpts[1];else if(a||o||l||n){var y=e.allpts,C=Ur(y[0],y[2],y[4],.1),E=Ur(y[1],y[3],y[5],.1);u=c-C,f=h-E}else u=c-v,f=h-x;e.srcArrowAngle=nf(u,f);var v=e.midX,x=e.midY;if(r&&(v=(c+g)/2,x=(h+p)/2),u=g-c,f=p-h,i){var y=e.allpts;if(y.length/2%2===0){var w=y.length/2,T=w-2;u=y[w]-y[T],f=y[w+1]-y[T+1]}else if(e.isRound)u=e.midVector[1],f=-e.midVector[0];else{var w=y.length/2-1,T=w-2;u=y[w]-y[T],f=y[w+1]-y[T+1]}}else if(a||o||l){var y=e.allpts,A=e.ctrlpts,_,D,P,N;if(A.length/2%2===0){var B=y.length/2-1,G=B+2,F=G+2;_=Ur(y[B],y[G],y[F],0),D=Ur(y[B+1],y[G+1],y[F+1],0),P=Ur(y[B],y[G],y[F],1e-4),N=Ur(y[B+1],y[G+1],y[F+1],1e-4)}else{var G=y.length/2-1,B=G-2,F=G+2;_=Ur(y[B],y[G],y[F],.4999),D=Ur(y[B+1],y[G+1],y[F+1],.4999),P=Ur(y[B],y[G],y[F],.5),N=Ur(y[B+1],y[G+1],y[F+1],.5)}u=P-_,f=N-D}if(e.midtgtArrowAngle=nf(u,f),e.midDispX=u,e.midDispY=f,u*=-1,f*=-1,i){var y=e.allpts;if(y.length/2%2!==0){if(!e.isRound){var w=y.length/2-1,z=w+2;u=-(y[z]-y[w]),f=-(y[z+1]-y[w+1])}}}if(e.midsrcArrowAngle=nf(u,f),i)u=g-e.segpts[e.segpts.length-2],f=p-e.segpts[e.segpts.length-1];else if(a||o||l||n){var y=e.allpts,M=y.length,C=Ur(y[M-6],y[M-4],y[M-2],.9),E=Ur(y[M-5],y[M-3],y[M-1],.9);u=g-C,f=p-E}else u=g-v,f=p-x;e.tgtArrowAngle=nf(u,f)};nc.getArrowWidth=nc.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var Gb,Hb,ba={},Hn={},$T,YT,ho,Df,za,ro,lo,ga,rs,df,XN,KN,Ub,Wb,XT,KT=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},sU=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},lU=function(e,r,n,a,i){if(e!==XT?KT(r,e,ba):sU(Hn,ba),KT(r,n,Hn),$T=ba.nx*Hn.ny-ba.ny*Hn.nx,YT=ba.nx*Hn.nx-ba.ny*-Hn.ny,za=Math.asin(Math.max(-1,Math.min(1,$T))),Math.abs(za)<1e-6){Gb=r.x,Hb=r.y,lo=rs=0;return}ho=1,Df=!1,YT<0?za<0?za=Math.PI+za:(za=Math.PI-za,ho=-1,Df=!0):za>0&&(ho=-1,Df=!0),r.radius!==void 0?rs=r.radius:rs=a,ro=za/2,df=Math.min(ba.len/2,Hn.len/2),i?(ga=Math.abs(Math.cos(ro)*rs/Math.sin(ro)),ga>df?(ga=df,lo=Math.abs(ga*Math.sin(ro)/Math.cos(ro))):lo=rs):(ga=Math.min(df,rs),lo=Math.abs(ga*Math.sin(ro)/Math.cos(ro))),Ub=r.x+Hn.nx*ga,Wb=r.y+Hn.ny*ga,Gb=Ub-Hn.ny*lo*ho,Hb=Wb+Hn.nx*lo*ho,XN=r.x+ba.nx*ga,KN=r.y+ba.ny*ga,XT=r};function jN(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function k1(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(lU(t,e,r,n,a),{cx:Gb,cy:Hb,radius:lo,startX:XN,startY:KN,stopX:Ub,stopY:Wb,startAngle:ba.ang+Math.PI/2*ho,endAngle:Hn.ang-Math.PI/2*ho,counterClockwise:Df})}var eu=.01,uU=Math.sqrt(2*eu),pn={};pn.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,o=t.pstyle("source-endpoint"),l=t.pstyle("target-endpoint"),u=o.units!=null&&l.units!=null,f=function(A,_,D,P){var N=P-_,B=D-A,G=Math.sqrt(B*B+N*N);return{x:-N/G,y:B/G}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(u){var h=this.manualEndptToPx(t.source()[0],o),g=Ir(h,2),p=g[0],y=g[1],C=this.manualEndptToPx(t.target()[0],l),E=Ir(C,2),v=E[0],x=E[1],w={x1:p,y1:y,x2:v,y2:x};a=f(p,y,v,x),i=w}else Wt("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};pn.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,l=n.target,u=o.position(),f=l.position(),c=o.width(),h=l.width(),g=o.height(),p=l.height(),y=r.pstyle("haystack-radius").value,C=y/2;a.haystackPts=a.allpts=[a.source.x*c*C+u.x,a.source.y*g*C+u.y,a.target.x*h*C+f.x,a.target.y*p*C+f.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};pn.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),o=t.pstyle("radius-type"),l=Math.min(n.pfValue.length,a.pfValue.length),u=i.pfValue[i.pfValue.length-1],f=o.pfValue[o.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<l;c++){var h=n.pfValue[c],g=a.pfValue[c],p=1-h,y=h,C=this.findMidptPtsEtc(t,e),E=C.midptPts,v=C.vectorNormInverse,x={x:E.x1*p+E.x2*y,y:E.y1*p+E.y2*y};r.segpts.push(x.x+v.x*g,x.y+v.y*g),r.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:u),r.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:f)==="arc-radius")}};pn.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,o=e.srcPos,l=t.pstyle("control-point-distances"),u=l?l.pfValue[0]:void 0,f=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,h=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var g=r,p=h;n&&(g=0,p=u);var y=f-Math.PI/2,C=y-c/2,E=y+c/2,v=f+"_"+c;g=i[v]===void 0?i[v]=0:++i[v],a.ctrlpts=[o.x+Math.cos(C)*1.4*p*(g/3+1),o.y+Math.sin(C)*1.4*p*(g/3+1),o.x+Math.cos(E)*1.4*p*(g/3+1),o.y+Math.sin(E)*1.4*p*(g/3+1)]};pn.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,l=e.srcW,u=e.srcH,f=e.tgtW,c=e.tgtH,h=t.pstyle("control-point-step-size").pfValue,g=t.pstyle("control-point-distances"),p=g?g.pfValue[0]:void 0,y=r,C=h;n&&(y=0,C=p);var E=50,v={x:i.x-l/2,y:i.y-u/2},x={x:o.x-f/2,y:o.y-c/2},w={x:Math.min(v.x,x.x),y:Math.min(v.y,x.y)},T=.5,A=Math.max(T,Math.log(l*eu)),_=Math.max(T,Math.log(f*eu));a.ctrlpts=[w.x,w.y-(1+Math.pow(E,1.12)/100)*C*(y/3+1)*A,w.x-(1+Math.pow(E,1.12)/100)*C*(y/3+1)*_,w.y]};pn.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};pn.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,o=t.pstyle("control-point-step-size").pfValue,l=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),f=l&&u?Math.min(l.value.length,u.value.length):1,c=l?l.pfValue[0]:void 0,h=u.value[0],g=n;i.edgeType=g?"multibezier":"bezier",i.ctrlpts=[];for(var p=0;p<f;p++){var y=(.5-e.eles.length/2+r)*o*(a?-1:1),C=void 0,E=x1(y);g&&(c=l?l.pfValue[p]:o,h=u.value[p]),n?C=c:C=c!==void 0?E*c:void 0;var v=C!==void 0?C:y,x=1-h,w=h,T=this.findMidptPtsEtc(t,e),A=T.midptPts,_=T.vectorNormInverse,D={x:A.x1*x+A.x2*w,y:A.y1*x+A.y2*w};i.ctrlpts.push(D.x+_.x*v,D.y+_.y*v)}};pn.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",l="downward",u="upward",f="auto",c=e.posPts,h=e.srcW,g=e.srcH,p=e.tgtW,y=e.tgtH,C=t.pstyle("edge-distances").value,E=C!=="node-position",v=t.pstyle("taxi-direction").value,x=v,w=t.pstyle("taxi-turn"),T=w.units==="%",A=w.pfValue,_=A<0,D=t.pstyle("taxi-turn-min-distance").pfValue,P=E?(h+p)/2:0,N=E?(g+y)/2:0,B=c.x2-c.x1,G=c.y2-c.y1,F=function(j,pe){return j>0?Math.max(j-pe,0):Math.min(j+pe,0)},z=F(B,P),M=F(G,N),R=!1;x===f?v=Math.abs(z)>Math.abs(M)?a:n:x===u||x===l?(v=n,R=!0):(x===i||x===o)&&(v=a,R=!0);var k=v===n,I=k?M:z,q=k?G:B,ae=x1(q),re=!1;!(R&&(T||_))&&(x===l&&q<0||x===u&&q>0||x===i&&q>0||x===o&&q<0)&&(ae*=-1,I=ae*Math.abs(I),re=!0);var K;if(T){var W=A<0?1+A:A;K=W*I}else{var Z=A<0?I:0;K=Z+A*ae}var U=function(j){return Math.abs(j)<D||Math.abs(j)>=Math.abs(I)},V=U(K),X=U(Math.abs(I)-Math.abs(K)),ee=V||X;if(ee&&!re)if(k){var se=Math.abs(q)<=g/2,te=Math.abs(B)<=p/2;if(se){var oe=(c.x1+c.x2)/2,le=c.y1,$=c.y2;r.segpts=[oe,le,oe,$]}else if(te){var ne=(c.y1+c.y2)/2,ie=c.x1,ue=c.x2;r.segpts=[ie,ne,ue,ne]}else r.segpts=[c.x1,c.y2]}else{var me=Math.abs(q)<=h/2,ge=Math.abs(G)<=y/2;if(me){var Ee=(c.y1+c.y2)/2,he=c.x1,de=c.x2;r.segpts=[he,Ee,de,Ee]}else if(ge){var be=(c.x1+c.x2)/2,De=c.y1,Se=c.y2;r.segpts=[be,De,be,Se]}else r.segpts=[c.x2,c.y1]}else if(k){var Re=c.y1+K+(E?g/2*ae:0),Ie=c.x1,qe=c.x2;r.segpts=[Ie,Re,qe,Re]}else{var Ze=c.x1+K+(E?h/2*ae:0),$e=c.y1,tt=c.y2;r.segpts=[Ze,$e,Ze,tt]}if(r.isRound){var Xe=t.pstyle("taxi-radius").value,We=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Xe),r.isArcRadius=new Array(r.segpts.length/2).fill(We)}};pn.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,l=e.tgtW,u=e.tgtH,f=e.srcShape,c=e.tgtShape,h=e.srcCornerRadius,g=e.tgtCornerRadius,p=e.srcRs,y=e.tgtRs,C=!nt(r.startX)||!nt(r.startY),E=!nt(r.arrowStartX)||!nt(r.arrowStartY),v=!nt(r.endX)||!nt(r.endY),x=!nt(r.arrowEndX)||!nt(r.arrowEndY),w=3,T=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,A=w*T,_=mo({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),D=_<A,P=mo({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),N=P<A,B=!1;if(C||E||D){B=!0;var G={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},F=Math.sqrt(G.x*G.x+G.y*G.y),z={x:G.x/F,y:G.y/F},M=Math.max(i,o),R={x:r.ctrlpts[0]+z.x*2*M,y:r.ctrlpts[1]+z.y*2*M},k=f.intersectLine(n.x,n.y,i,o,R.x,R.y,0,h,p);D?(r.ctrlpts[0]=r.ctrlpts[0]+z.x*(A-_),r.ctrlpts[1]=r.ctrlpts[1]+z.y*(A-_)):(r.ctrlpts[0]=k[0]+z.x*A,r.ctrlpts[1]=k[1]+z.y*A)}if(v||x||N){B=!0;var I={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},q=Math.sqrt(I.x*I.x+I.y*I.y),ae={x:I.x/q,y:I.y/q},re=Math.max(i,o),K={x:r.ctrlpts[0]+ae.x*2*re,y:r.ctrlpts[1]+ae.y*2*re},W=c.intersectLine(a.x,a.y,l,u,K.x,K.y,0,g,y);N?(r.ctrlpts[0]=r.ctrlpts[0]+ae.x*(A-P),r.ctrlpts[1]=r.ctrlpts[1]+ae.y*(A-P)):(r.ctrlpts[0]=W[0]+ae.x*A,r.ctrlpts[1]=W[1]+ae.y*A)}B&&this.findEndpoints(t)}};pn.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=Ur(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=Ur(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],l=e.isArcRadius[i/2-1];e.roundCorners.push(k1({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,l))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,f=u-2;e.midX=(e.segpts[f]+e.segpts[u])/2,e.midY=(e.segpts[f+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var h={x:e.segpts[c],y:e.segpts[c+1]},g=e.roundCorners[c/2];if(g.radius===0){var p={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=h.x,e.midY=h.y,e.midVector=[h.y-p.y,p.x-h.x]}else{var y=[h.x-g.cx,h.y-g.cy],C=g.radius/Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2));y=y.map(function(E){return E*C}),e.midX=g.cx+y[0],e.midY=g.cy+y[1],e.midVector=y}}}}};pn.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||nt(e.startX)&&nt(e.startY)&&nt(e.endX)&&nt(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Wt("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};pn.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i=new Va,o=function(N,B){return[].concat(Yf(N),[B?1:0]).join("-")},l=[],u=[],f=0;f<t.length;f++){var c=t[f],h=c._private,g=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(g==="haystack"){u.push(c);continue}var p=g==="unbundled-bezier"||g.endsWith("segments")||g==="straight"||g==="straight-triangle"||g.endsWith("taxi"),y=g==="unbundled-bezier"||g==="bezier",C=h.source,E=h.target,v=C.poolIndex(),x=E.poolIndex(),w=[v,x].sort(),T=o(w,p),A=i.get(T);A==null&&(A={eles:[]},l.push({pairId:w,edgeIsUnbundled:p}),i.set(T,A)),A.eles.push(c),p&&(A.hasUnbundled=!0),y&&(A.hasBezier=!0)}}for(var _=function(){var N=l[D],B=N.pairId,G=N.edgeIsUnbundled,F=o(B,G),z=i.get(F),M;if(!z.hasUnbundled){var R=z.eles[0].parallelEdges().filter(function(We){return We.isBundledBezier()});b1(z.eles),R.forEach(function(We){return z.eles.push(We)}),z.eles.sort(function(We,ve){return We.poolIndex()-ve.poolIndex()})}var k=z.eles[0],I=k.source(),q=k.target();if(I.poolIndex()>q.poolIndex()){var ae=I;I=q,q=ae}var re=z.srcPos=I.position(),K=z.tgtPos=q.position(),W=z.srcW=I.outerWidth(),Z=z.srcH=I.outerHeight(),U=z.tgtW=q.outerWidth(),V=z.tgtH=q.outerHeight(),X=z.srcShape=r.nodeShapes[e.getNodeShape(I)],ee=z.tgtShape=r.nodeShapes[e.getNodeShape(q)],se=z.srcCornerRadius=I.pstyle("corner-radius").value==="auto"?"auto":I.pstyle("corner-radius").pfValue,te=z.tgtCornerRadius=q.pstyle("corner-radius").value==="auto"?"auto":q.pstyle("corner-radius").pfValue,oe=z.tgtRs=q._private.rscratch,le=z.srcRs=I._private.rscratch;z.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var $=0;$<z.eles.length;$++){var ne=z.eles[$],ie=ne[0]._private.rscratch,ue=ne.pstyle("curve-style").value,me=ue==="unbundled-bezier"||ue.endsWith("segments")||ue.endsWith("taxi"),ge=!I.same(ne.source());if(!z.calculatedIntersection&&I!==q&&(z.hasBezier||z.hasUnbundled)){z.calculatedIntersection=!0;var Ee=X.intersectLine(re.x,re.y,W,Z,K.x,K.y,0,se,le),he=z.srcIntn=Ee,de=ee.intersectLine(K.x,K.y,U,V,re.x,re.y,0,te,oe),be=z.tgtIntn=de,De=z.intersectionPts={x1:Ee[0],x2:de[0],y1:Ee[1],y2:de[1]},Se=z.posPts={x1:re.x,x2:K.x,y1:re.y,y2:K.y},Re=de[1]-Ee[1],Ie=de[0]-Ee[0],qe=Math.sqrt(Ie*Ie+Re*Re);nt(qe)&&qe>=uU||(qe=Math.sqrt(Math.max(Ie*Ie,eu)+Math.max(Re*Re,eu)));var Ze=z.vector={x:Ie,y:Re},$e=z.vectorNorm={x:Ze.x/qe,y:Ze.y/qe},tt={x:-$e.y,y:$e.x};z.nodesOverlap=!nt(qe)||ee.checkPoint(Ee[0],Ee[1],0,U,V,K.x,K.y,te,oe)||X.checkPoint(de[0],de[1],0,W,Z,re.x,re.y,se,le),z.vectorNormInverse=tt,M={nodesOverlap:z.nodesOverlap,dirCounts:z.dirCounts,calculatedIntersection:!0,hasBezier:z.hasBezier,hasUnbundled:z.hasUnbundled,eles:z.eles,srcPos:K,srcRs:oe,tgtPos:re,tgtRs:le,srcW:U,srcH:V,tgtW:W,tgtH:Z,srcIntn:be,tgtIntn:he,srcShape:ee,tgtShape:X,posPts:{x1:Se.x2,y1:Se.y2,x2:Se.x1,y2:Se.y1},intersectionPts:{x1:De.x2,y1:De.y2,x2:De.x1,y2:De.y1},vector:{x:-Ze.x,y:-Ze.y},vectorNorm:{x:-$e.x,y:-$e.y},vectorNormInverse:{x:-tt.x,y:-tt.y}}}var Xe=ge?M:z;ie.nodesOverlap=Xe.nodesOverlap,ie.srcIntn=Xe.srcIntn,ie.tgtIntn=Xe.tgtIntn,ie.isRound=ue.startsWith("round"),a&&(I.isParent()||I.isChild()||q.isParent()||q.isChild())&&(I.parents().anySame(q)||q.parents().anySame(I)||I.same(q)&&I.isParent())?e.findCompoundLoopPoints(ne,Xe,$,me):I===q?e.findLoopPoints(ne,Xe,$,me):ue.endsWith("segments")?e.findSegmentsPoints(ne,Xe):ue.endsWith("taxi")?e.findTaxiPoints(ne,Xe):ue==="straight"||!me&&z.eles.length%2===1&&$===Math.floor(z.eles.length/2)?e.findStraightEdgePoints(ne):e.findBezierPoints(ne,Xe,$,me,ge),e.findEndpoints(ne),e.tryToCorrectInvalidPoints(ne,Xe),e.checkForInvalidEdgeWarning(ne),e.storeAllpts(ne),e.storeEdgeProjections(ne),e.calculateArrowAngles(ne),e.recalculateEdgeLabelProjections(ne),e.calculateLabelAngles(ne)}},D=0;D<l.length;D++)_();this.findHaystackPoints(u)}};function ZN(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}pn.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return ZN(e.segpts)};pn.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return ZN(e.ctrlpts)};pn.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var hu={};hu.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),o=t._private.rscratch;if(e.value.length===2){var l=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(l[0]=l[0]*a),e.units[1]==="%"&&(l[1]=l[1]*i),l[0]+=n.x,l[1]+=n.y,l}else{var u=e.pfValue[0];u=-Math.PI/2+u;var f=2*Math.max(a,i),c=[n.x+Math.cos(u)*f,n.y+Math.sin(u)*f];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,o)}};hu.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],i=n.position(),o=a.position(),l=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,f=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,h=n._private.rscratch,g=a._private.rscratch,p=t.pstyle("curve-style").value,y=t._private.rscratch,C=y.edgeType,E=p==="taxi",v=C==="self"||C==="compound",x=C==="bezier"||C==="multibezier"||v,w=C!=="bezier",T=C==="straight"||C==="segments",A=C==="segments",_=x||w||T,D=v||E,P=t.pstyle("source-endpoint"),N=D?"outside-to-node":P.value,B=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,G=t.pstyle("target-endpoint"),F=D?"outside-to-node":G.value,z=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;y.srcManEndpt=P,y.tgtManEndpt=G;var M,R,k,I;if(x){var q=[y.ctrlpts[0],y.ctrlpts[1]],ae=w?[y.ctrlpts[y.ctrlpts.length-2],y.ctrlpts[y.ctrlpts.length-1]]:q;M=ae,R=q}else if(T){var re=A?y.segpts.slice(0,2):[o.x,o.y],K=A?y.segpts.slice(y.segpts.length-2):[i.x,i.y];M=K,R=re}if(F==="inside-to-node")r=[o.x,o.y];else if(G.units)r=this.manualEndptToPx(a,G);else if(F==="outside-to-line")r=y.tgtIntn;else if(F==="outside-to-node"||F==="outside-to-node-or-label"?k=M:(F==="outside-to-line"||F==="outside-to-line-or-label")&&(k=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),k[0],k[1],0,z,g),F==="outside-to-node-or-label"||F==="outside-to-line-or-label"){var W=a._private.rscratch,Z=W.labelWidth,U=W.labelHeight,V=W.labelX,X=W.labelY,ee=Z/2,se=U/2,te=a.pstyle("text-valign").value;te==="top"?X-=se:te==="bottom"&&(X+=se);var oe=a.pstyle("text-halign").value;oe==="left"?V-=ee:oe==="right"&&(V+=ee);var le=Kl(k[0],k[1],[V-ee,X-se,V+ee,X-se,V+ee,X+se,V-ee,X+se],o.x,o.y);if(le.length>0){var $=i,ne=oo($,ls(r)),ie=oo($,ls(le)),ue=ne;if(ie<ne&&(r=le,ue=ie),le.length>2){var me=oo($,{x:le[2],y:le[3]});me<ue&&(r=[le[2],le[3]])}}}var ge=af(r,M,e.arrowShapes[l].spacing(t)+f),Ee=af(r,M,e.arrowShapes[l].gap(t)+f);if(y.endX=Ee[0],y.endY=Ee[1],y.arrowEndX=ge[0],y.arrowEndY=ge[1],N==="inside-to-node")r=[i.x,i.y];else if(P.units)r=this.manualEndptToPx(n,P);else if(N==="outside-to-line")r=y.srcIntn;else if(N==="outside-to-node"||N==="outside-to-node-or-label"?I=R:(N==="outside-to-line"||N==="outside-to-line-or-label")&&(I=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),I[0],I[1],0,B,h),N==="outside-to-node-or-label"||N==="outside-to-line-or-label"){var he=n._private.rscratch,de=he.labelWidth,be=he.labelHeight,De=he.labelX,Se=he.labelY,Re=de/2,Ie=be/2,qe=n.pstyle("text-valign").value;qe==="top"?Se-=Ie:qe==="bottom"&&(Se+=Ie);var Ze=n.pstyle("text-halign").value;Ze==="left"?De-=Re:Ze==="right"&&(De+=Re);var $e=Kl(I[0],I[1],[De-Re,Se-Ie,De+Re,Se-Ie,De+Re,Se+Ie,De-Re,Se+Ie],i.x,i.y);if($e.length>0){var tt=o,Xe=oo(tt,ls(r)),We=oo(tt,ls($e)),ve=Xe;if(We<Xe&&(r=[$e[0],$e[1]],ve=We),$e.length>2){var j=oo(tt,{x:$e[2],y:$e[3]});j<ve&&(r=[$e[2],$e[3]])}}}var pe=af(r,R,e.arrowShapes[u].spacing(t)+c),we=af(r,R,e.arrowShapes[u].gap(t)+c);y.startX=we[0],y.startY=we[1],y.arrowStartX=pe[0],y.arrowStartY=pe[1],_&&(!nt(y.startX)||!nt(y.startY)||!nt(y.endX)||!nt(y.endY)?y.badLine=!0:y.badLine=!1)};hu.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};hu.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var O1={};function fU(t,e,r){for(var n=function(f,c,h,g){return Ur(f,c,h,g)},a=e._private,i=a.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var l=t.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],l),y:n(r[1],r[3],r[5],l)})}}O1.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)fU(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var o=r.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};O1.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var La={};La.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!Di(e)){var r,n,a=t._private,i=t.width(),o=t.height(),l=t.padding(),u=t.position(),f=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,h=a.rscratch,g=a.rstyle;switch(f){case"left":r=u.x-i/2-l;break;case"right":r=u.x+i/2+l;break;default:r=u.x}switch(c){case"top":n=u.y-o/2-l;break;case"bottom":n=u.y+o/2+l;break;default:n=u.y}h.labelX=r,h.labelY=n,g.labelX=r,g.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var QN=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},JN=function(e,r){var n=r.x-e.x,a=r.y-e.y;return QN(n,a)},cU=function(e,r,n,a){var i=Xl(0,a-.001,1),o=Xl(0,a+.001,1),l=ys(e,r,n,i),u=ys(e,r,n,o);return JN(l,u)};La.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var o=function(h,g,p){Ha(r.rscratch,h,g,p),Ha(r.rstyle,h,g,p)};o("labelX",null,e.x),o("labelY",null,e.y);var l=QN(n.midDispX,n.midDispY);o("labelAutoAngle",null,l);var u=function(){if(u.cache)return u.cache;for(var h=[],g=0;g+5<n.allpts.length;g+=4){var p={x:n.allpts[g],y:n.allpts[g+1]},y={x:n.allpts[g+2],y:n.allpts[g+3]},C={x:n.allpts[g+4],y:n.allpts[g+5]};h.push({p0:p,p1:y,p2:C,startDist:0,length:0,segments:[]})}var E=r.rstyle.bezierPts,v=a.bezierProjPcts.length;function x(D,P,N,B,G){var F=mo(P,N),z=D.segments[D.segments.length-1],M={p0:P,p1:N,t0:B,t1:G,startDist:z?z.startDist+z.length:0,length:F};D.segments.push(M),D.length+=F}for(var w=0;w<h.length;w++){var T=h[w],A=h[w-1];A&&(T.startDist=A.startDist+A.length),x(T,T.p0,E[w*v],0,a.bezierProjPcts[0]);for(var _=0;_<v-1;_++)x(T,E[w*v+_],E[w*v+_+1],a.bezierProjPcts[_],a.bezierProjPcts[_+1]);x(T,E[w*v+v-1],T.p2,a.bezierProjPcts[v-1],1)}return u.cache=h},f=function(h){var g,p=h==="source";if(i[h]){var y=t.pstyle(h+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var C=u(),E,v=0,x=0,w=0;w<C.length;w++){for(var T=C[p?w:C.length-1-w],A=0;A<T.segments.length;A++){var _=T.segments[p?A:T.segments.length-1-A],D=w===C.length-1&&A===T.segments.length-1;if(v=x,x+=_.length,x>=y||D){E={cp:T,segment:_};break}}if(E)break}var P=E.cp,N=E.segment,B=(y-v)/N.length,G=N.t1-N.t0,F=p?N.t0+G*B:N.t1-G*B;F=Xl(0,F,1),e=ys(P.p0,P.p1,P.p2,F),g=cU(P.p0,P.p1,P.p2,F);break}case"straight":case"segments":case"haystack":{for(var z=0,M,R,k,I,q=n.allpts.length,ae=0;ae+3<q&&(p?(k={x:n.allpts[ae],y:n.allpts[ae+1]},I={x:n.allpts[ae+2],y:n.allpts[ae+3]}):(k={x:n.allpts[q-2-ae],y:n.allpts[q-1-ae]},I={x:n.allpts[q-4-ae],y:n.allpts[q-3-ae]}),M=mo(k,I),R=z,z+=M,!(z>=y));ae+=2);var re=y-R,K=re/M;K=Xl(0,K,1),e=Nz(k,I,K),g=JN(k,I);break}}o("labelX",h,e.x),o("labelY",h,e.y),o("labelAutoAngle",h,g)}};f("source"),f("target"),this.applyLabelDimensions(t)}};La.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};La.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=yo(n,t._private.labelDimsKey);if(Mn(r.rscratch,"prefixedLabelDimsKey",e)!==a){Ha(r.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(t,n),o=t.pstyle("line-height").pfValue,l=t.pstyle("text-wrap").strValue,u=Mn(r.rscratch,"labelWrapCachedLines",e)||[],f=l!=="wrap"?1:Math.max(u.length,1),c=i.height/f,h=c*o,g=i.width,p=i.height+(f-1)*(o-1)*c;Ha(r.rstyle,"labelWidth",e,g),Ha(r.rscratch,"labelWidth",e,g),Ha(r.rstyle,"labelHeight",e,p),Ha(r.rscratch,"labelHeight",e,p),Ha(r.rscratch,"labelLineHeight",e,h)}};La.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,o=function(Z,U){return U?(Ha(r.rscratch,Z,e,U),U):Mn(r.rscratch,Z,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var l=t.pstyle("text-wrap").value;if(l==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var f="​",c=a.split(`
`),h=t.pstyle("text-max-width").pfValue,g=t.pstyle("text-overflow-wrap").value,p=g==="anywhere",y=[],C=/[\s\u200b]+|$/g,E=0;E<c.length;E++){var v=c[E],x=this.calculateLabelDimensions(t,v),w=x.width;if(p){var T=v.split("").join(f);v=T}if(w>h){var A=v.matchAll(C),_="",D=0,P=Pn(A),N;try{for(P.s();!(N=P.n()).done;){var B=N.value,G=B[0],F=v.substring(D,B.index);D=B.index+G.length;var z=_.length===0?F:_+F+G,M=this.calculateLabelDimensions(t,z),R=M.width;R<=h?_+=F+G:(_&&y.push(_),_=F+G)}}catch(W){P.e(W)}finally{P.f()}_.match(/^[\s\u200b]+$/)||y.push(_)}else y.push(v)}o("labelWrapCachedLines",y),a=o("labelWrapCachedText",y.join(`
`)),o("labelWrapKey",u)}else if(l==="ellipsis"){var k=t.pstyle("text-max-width").pfValue,I="",q="…",ae=!1;if(this.calculateLabelDimensions(t,a).width<k)return a;for(var re=0;re<a.length;re++){var K=this.calculateLabelDimensions(t,I+a[re]+q).width;if(K>k)break;I+=a[re],re===a.length-1&&(ae=!0)}return ae||(I+=q),I}return a};La.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};La.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=0,o=t.pstyle("font-style").strValue,l=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,f=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=a.createElement("canvas"),h=this.labelCalcCanvasContext=c.getContext("2d");var g=c.style;g.position="absolute",g.left="-9999px",g.top="-9999px",g.zIndex="-1",g.visibility="hidden",g.pointerEvents="none"}h.font="".concat(o," ").concat(f," ").concat(l,"px ").concat(u);for(var p=0,y=0,C=e.split(`
`),E=0;E<C.length;E++){var v=C[E],x=h.measureText(v),w=Math.ceil(x.width),T=l;p=Math.max(w,p),y+=T}return p+=i,y+=i,{width:p,height:y}};La.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),l=o.strValue;return l==="none"?0:a&&l==="autorotate"?n.labelAutoAngle:l==="autorotate"?0:o.pfValue};La.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var ek={},jT=28,ZT=!1;ek.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<jT||t.height()<jT))return ZT||(Wt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),ZT=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var zc={};zc.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),l)for(var u=0;u<o.length;u++){var f=o[u],c=f._private,h=c.rstyle;h.clean=!1,h.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(o){var l=o.target;n(l)}).on("style.* background.*",function(o){var l=o.target;n(l,!1)});var a=function(o){if(o){var l=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var f=e[u],c=f._private.rstyle;f.isNode()&&!c.cleanConnected&&(n(f.connectedEdges()),c.cleanConnected=!0)}if(l)for(var h=0;h<l.length;h++){var g=l[h];g(o,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};zc.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};zc.recalculateRenderedStyle=function(t,e){var r=function(T){return T._private.rstyle.cleanConnected};if(t.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],l=o._private,u=l.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(u.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(w){return!w._private.rstyle.clean&&w.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||o.removed())&&o.pstyle("display").value!=="none"&&(l.group==="nodes"?a.push(o):n.push(o),u.clean=!0)}for(var f=0;f<a.length;f++){var c=a[f],h=c._private,g=h.rstyle,p=c.position();this.recalculateNodeLabelProjection(c),g.nodeX=p.x,g.nodeY=p.y,g.nodeW=c.pstyle("width").pfValue,g.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var y=0;y<n.length;y++){var C=n[y],E=C._private,v=E.rstyle,x=E.rscratch;v.srcX=x.arrowStartX,v.srcY=x.arrowStartY,v.tgtX=x.arrowEndX,v.tgtY=x.arrowEndY,v.midX=x.midX,v.midY=x.midY,v.labelAngle=x.labelAngle,v.sourceLabelAngle=x.sourceLabelAngle,v.targetLabelAngle=x.targetLabelAngle}}}};var Gc={};Gc.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Gc.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Gc.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(ON),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var tk={};[Co,nc,pn,hu,O1,La,ek,zc,Gc].forEach(function(t){wt(tk,t)});var rk={};rk.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var o=i.image=new Image;o.addEventListener("load",r),o.addEventListener("error",function(){o.error=!0});var l="data:",u=t.substring(0,l.length).toLowerCase()===l;return u||(e=e==="null"?null:e,o.crossOrigin=e),o.src=t,o};var Ms={};Ms.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],o=0;o<t.length;o++){var l=t[o];if(l!==void 0){var u=this.binder(l);i.push(u.on.apply(u,a))}}return i}var u=this.binder(t);return u.on.apply(u,a)};Ms.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||Aq(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var o=function(u,f,c){var h=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(h[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:h}),(t.addEventListener||t.on).apply(t,h),this};return{on:o,addEventListener:o,addListener:o,bind:o}};Ms.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};Ms.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};Ms.load=function(){var t=this,e=t.cy.window(),r=function(j){return j.selected()},n=function(j){var pe=j.getRootNode();if(pe&&pe.nodeType===11&&pe.host!==void 0)return pe},a=function(j,pe,we,xe){j==null&&(j=t.cy);for(var Ce=0;Ce<pe.length;Ce++){var Be=pe[Ce];j.emit({originalEvent:we,type:Be,position:xe})}},i=function(j){return j.shiftKey||j.metaKey||j.ctrlKey},o=function(j,pe){var we=!0;if(t.cy.hasCompoundNodes()&&j&&j.pannable())for(var xe=0;pe&&xe<pe.length;xe++){var j=pe[xe];if(j.isNode()&&j.isParent()&&!j.pannable()){we=!1;break}}else we=!0;return we},l=function(j){j[0]._private.grabbed=!0},u=function(j){j[0]._private.grabbed=!1},f=function(j){j[0]._private.rscratch.inDragLayer=!0},c=function(j){j[0]._private.rscratch.inDragLayer=!1},h=function(j){j[0]._private.rscratch.isGrabTarget=!0},g=function(j){j[0]._private.rscratch.isGrabTarget=!1},p=function(j,pe){var we=pe.addToList,xe=we.has(j);!xe&&j.grabbable()&&!j.locked()&&(we.merge(j),l(j))},y=function(j,pe){if(j.cy().hasCompoundNodes()&&!(pe.inDragLayer==null&&pe.addToList==null)){var we=j.descendants();pe.inDragLayer&&(we.forEach(f),we.connectedEdges().forEach(f)),pe.addToList&&p(we,pe)}},C=function(j,pe){pe=pe||{};var we=j.cy().hasCompoundNodes();pe.inDragLayer&&(j.forEach(f),j.neighborhood().stdFilter(function(xe){return!we||xe.isEdge()}).forEach(f)),pe.addToList&&j.forEach(function(xe){p(xe,pe)}),y(j,pe),x(j,{inDragLayer:pe.inDragLayer}),t.updateCachedGrabbedEles()},E=C,v=function(j){j&&(t.getCachedZSortedEles().forEach(function(pe){u(pe),c(pe),g(pe)}),t.updateCachedGrabbedEles())},x=function(j,pe){if(!(pe.inDragLayer==null&&pe.addToList==null)&&j.cy().hasCompoundNodes()){var we=j.ancestors().orphans();if(!we.same(j)){var xe=we.descendants().spawnSelf().merge(we).unmerge(j).unmerge(j.descendants()),Ce=xe.connectedEdges();pe.inDragLayer&&(Ce.forEach(f),xe.forEach(f)),pe.addToList&&xe.forEach(function(Be){p(Be,pe)})}}},w=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},T=typeof MutationObserver<"u",A=typeof ResizeObserver<"u";T?(t.removeObserver=new MutationObserver(function(ve){for(var j=0;j<ve.length;j++){var pe=ve[j],we=pe.removedNodes;if(we)for(var xe=0;xe<we.length;xe++){var Ce=we[xe];if(Ce===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(ve){t.destroy()});var _=uu(function(){t.cy.resize()},100);T&&(t.styleObserver=new MutationObserver(_),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",_),A&&(t.resizeObserver=new ResizeObserver(_),t.resizeObserver.observe(t.container));var D=function(j,pe){for(;j!=null;)pe(j),j=j.parentNode},P=function(){t.invalidateContainerClientCoordsCache()};D(t.container,function(ve){t.registerBinding(ve,"transitionend",P),t.registerBinding(ve,"animationend",P),t.registerBinding(ve,"scroll",P)}),t.registerBinding(t.container,"contextmenu",function(ve){ve.preventDefault()});var N=function(){return t.selection[4]!==0},B=function(j){for(var pe=t.findContainerClientCoords(),we=pe[0],xe=pe[1],Ce=pe[2],Be=pe[3],Te=j.touches?j.touches:[j],ke=!1,Oe=0;Oe<Te.length;Oe++){var He=Te[Oe];if(we<=He.clientX&&He.clientX<=we+Ce&&xe<=He.clientY&&He.clientY<=xe+Be){ke=!0;break}}if(!ke)return!1;for(var Ue=t.container,Ke=j.target,Qe=Ke.parentNode,Ge=!1;Qe;){if(Qe===Ue){Ge=!0;break}Qe=Qe.parentNode}return!!Ge};t.registerBinding(t.container,"mousedown",function(j){if(B(j)&&!(t.hoverData.which===1&&j.which!==1)){j.preventDefault(),w(),t.hoverData.capture=!0,t.hoverData.which=j.which;var pe=t.cy,we=[j.clientX,j.clientY],xe=t.projectIntoViewport(we[0],we[1]),Ce=t.selection,Be=t.findNearestElements(xe[0],xe[1],!0,!1),Te=Be[0],ke=t.dragData.possibleDragElements;t.hoverData.mdownPos=xe,t.hoverData.mdownGPos=we;var Oe=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Ve=t.hoverData.down;Ve?Ve.emit({originalEvent:j,type:"taphold",position:{x:xe[0],y:xe[1]}}):pe.emit({originalEvent:j,type:"taphold",position:{x:xe[0],y:xe[1]}})}},t.tapholdDuration)};if(j.which==3){t.hoverData.cxtStarted=!0;var He={originalEvent:j,type:"cxttapstart",position:{x:xe[0],y:xe[1]}};Te?(Te.activate(),Te.emit(He),t.hoverData.down=Te):pe.emit(He),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(j.which==1){Te&&Te.activate();{if(Te!=null&&t.nodeIsGrabbable(Te)){var Ue=function(Ve){return{originalEvent:j,type:Ve,position:{x:xe[0],y:xe[1]}}},Ke=function(Ve){Ve.emit(Ue("grab"))};if(h(Te),!Te.selected())ke=t.dragData.possibleDragElements=pe.collection(),E(Te,{addToList:ke}),Te.emit(Ue("grabon")).emit(Ue("grab"));else{ke=t.dragData.possibleDragElements=pe.collection();var Qe=pe.$(function(Ge){return Ge.isNode()&&Ge.selected()&&t.nodeIsGrabbable(Ge)});C(Qe,{addToList:ke}),Te.emit(Ue("grabon")),Qe.forEach(Ke)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=Te,t.hoverData.downs=Be,t.hoverData.downTime=new Date().getTime()}a(Te,["mousedown","tapstart","vmousedown"],j,{x:xe[0],y:xe[1]}),Te==null?(Ce[4]=1,t.data.bgActivePosistion={x:xe[0],y:xe[1]},t.redrawHint("select",!0),t.redraw()):Te.pannable()&&(Ce[4]=1),Oe()}Ce[0]=Ce[2]=xe[0],Ce[1]=Ce[3]=xe[1]}},!1);var G=n(t.container);t.registerBinding([e,G],"mousemove",function(j){var pe=t.hoverData.capture;if(!(!pe&&!B(j))){var we=!1,xe=t.cy,Ce=xe.zoom(),Be=[j.clientX,j.clientY],Te=t.projectIntoViewport(Be[0],Be[1]),ke=t.hoverData.mdownPos,Oe=t.hoverData.mdownGPos,He=t.selection,Ue=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(Ue=t.findNearestElement(Te[0],Te[1],!0,!1));var Ke=t.hoverData.last,Qe=t.hoverData.down,Ge=[Te[0]-He[2],Te[1]-He[3]],Ve=t.dragData.possibleDragElements,dt;if(Oe){var rt=Be[0]-Oe[0],at=rt*rt,Et=Be[1]-Oe[1],ut=Et*Et,pt=at+ut;t.hoverData.isOverThresholdDrag=dt=pt>=t.desktopTapThreshold2}var _t=i(j);dt&&(t.hoverData.tapholdCancelled=!0);var Mt=function(){var jt=t.hoverData.dragDelta=t.hoverData.dragDelta||[];jt.length===0?(jt.push(Ge[0]),jt.push(Ge[1])):(jt[0]+=Ge[0],jt[1]+=Ge[1])};we=!0,a(Ue,["mousemove","vmousemove","tapdrag"],j,{x:Te[0],y:Te[1]});var Vt=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||xe.emit({originalEvent:j,type:"boxstart",position:{x:Te[0],y:Te[1]}}),He[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(dt){var Lt={originalEvent:j,type:"cxtdrag",position:{x:Te[0],y:Te[1]}};Qe?Qe.emit(Lt):xe.emit(Lt),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||Ue!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:j,type:"cxtdragout",position:{x:Te[0],y:Te[1]}}),t.hoverData.cxtOver=Ue,Ue&&Ue.emit({originalEvent:j,type:"cxtdragover",position:{x:Te[0],y:Te[1]}}))}}else if(t.hoverData.dragging){if(we=!0,xe.panningEnabled()&&xe.userPanningEnabled()){var zt;if(t.hoverData.justStartedPan){var Er=t.hoverData.mdownPos;zt={x:(Te[0]-Er[0])*Ce,y:(Te[1]-Er[1])*Ce},t.hoverData.justStartedPan=!1}else zt={x:Ge[0]*Ce,y:Ge[1]*Ce};xe.panBy(zt),xe.emit("dragpan"),t.hoverData.dragged=!0}Te=t.projectIntoViewport(j.clientX,j.clientY)}else if(He[4]==1&&(Qe==null||Qe.pannable())){if(dt){if(!t.hoverData.dragging&&xe.boxSelectionEnabled()&&(_t||!xe.panningEnabled()||!xe.userPanningEnabled()))Vt();else if(!t.hoverData.selecting&&xe.panningEnabled()&&xe.userPanningEnabled()){var on=o(Qe,t.hoverData.downs);on&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,He[4]=0,t.data.bgActivePosistion=ls(ke),t.redrawHint("select",!0),t.redraw())}Qe&&Qe.pannable()&&Qe.active()&&Qe.unactivate()}}else{if(Qe&&Qe.pannable()&&Qe.active()&&Qe.unactivate(),(!Qe||!Qe.grabbed())&&Ue!=Ke&&(Ke&&a(Ke,["mouseout","tapdragout"],j,{x:Te[0],y:Te[1]}),Ue&&a(Ue,["mouseover","tapdragover"],j,{x:Te[0],y:Te[1]}),t.hoverData.last=Ue),Qe)if(dt){if(xe.boxSelectionEnabled()&&_t)Qe&&Qe.grabbed()&&(v(Ve),Qe.emit("freeon"),Ve.emit("free"),t.dragData.didDrag&&(Qe.emit("dragfreeon"),Ve.emit("dragfree"))),Vt();else if(Qe&&Qe.grabbed()&&t.nodeIsDraggable(Qe)){var Rt=!t.dragData.didDrag;Rt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||C(Ve,{inDragLayer:!0});var Kt={x:0,y:0};if(nt(Ge[0])&&nt(Ge[1])&&(Kt.x+=Ge[0],Kt.y+=Ge[1],Rt)){var $t=t.hoverData.dragDelta;$t&&nt($t[0])&&nt($t[1])&&(Kt.x+=$t[0],Kt.y+=$t[1])}t.hoverData.draggingEles=!0,Ve.silentShift(Kt).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else Mt();we=!0}if(He[2]=Te[0],He[3]=Te[1],we)return j.stopPropagation&&j.stopPropagation(),j.preventDefault&&j.preventDefault(),!1}},!1);var F,z,M;t.registerBinding(e,"mouseup",function(j){if(!(t.hoverData.which===1&&j.which!==1&&t.hoverData.capture)){var pe=t.hoverData.capture;if(pe){t.hoverData.capture=!1;var we=t.cy,xe=t.projectIntoViewport(j.clientX,j.clientY),Ce=t.selection,Be=t.findNearestElement(xe[0],xe[1],!0,!1),Te=t.dragData.possibleDragElements,ke=t.hoverData.down,Oe=i(j);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ke&&ke.unactivate(),t.hoverData.which===3){var He={originalEvent:j,type:"cxttapend",position:{x:xe[0],y:xe[1]}};if(ke?ke.emit(He):we.emit(He),!t.hoverData.cxtDragged){var Ue={originalEvent:j,type:"cxttap",position:{x:xe[0],y:xe[1]}};ke?ke.emit(Ue):we.emit(Ue)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(a(Be,["mouseup","tapend","vmouseup"],j,{x:xe[0],y:xe[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(a(ke,["click","tap","vclick"],j,{x:xe[0],y:xe[1]}),z=!1,j.timeStamp-M<=we.multiClickDebounceTime()?(F&&clearTimeout(F),z=!0,M=null,a(ke,["dblclick","dbltap","vdblclick"],j,{x:xe[0],y:xe[1]})):(F=setTimeout(function(){z||a(ke,["oneclick","onetap","voneclick"],j,{x:xe[0],y:xe[1]})},we.multiClickDebounceTime()),M=j.timeStamp)),ke==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(j)&&(we.$(r).unselect(["tapunselect"]),Te.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=Te=we.collection()),Be==ke&&!t.dragData.didDrag&&!t.hoverData.selecting&&Be!=null&&Be._private.selectable&&(t.hoverData.dragging||(we.selectionType()==="additive"||Oe?Be.selected()?Be.unselect(["tapunselect"]):Be.select(["tapselect"]):Oe||(we.$(r).unmerge(Be).unselect(["tapunselect"]),Be.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var Ke=we.collection(t.getAllInBox(Ce[0],Ce[1],Ce[2],Ce[3]));t.redrawHint("select",!0),Ke.length>0&&t.redrawHint("eles",!0),we.emit({type:"boxend",originalEvent:j,position:{x:xe[0],y:xe[1]}});var Qe=function(dt){return dt.selectable()&&!dt.selected()};we.selectionType()==="additive"||Oe||we.$(r).unmerge(Ke).unselect(),Ke.emit("box").stdFilter(Qe).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!Ce[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Ge=ke&&ke.grabbed();v(Te),Ge&&(ke.emit("freeon"),Te.emit("free"),t.dragData.didDrag&&(ke.emit("dragfreeon"),Te.emit("dragfree")))}}Ce[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var R=[],k=4,I,q=1e5,ae=function(j,pe){for(var we=0;we<j.length;we++)if(j[we]%pe!==0)return!1;return!0},re=function(j){for(var pe=Math.abs(j[0]),we=1;we<j.length;we++)if(Math.abs(j[we])!==pe)return!1;return!0},K=function(j){var pe=!1,we=j.deltaY;if(we==null&&(j.wheelDeltaY!=null?we=j.wheelDeltaY/4:j.wheelDelta!=null&&(we=j.wheelDelta/4)),I==null)if(R.length>=k){var xe=R;if(I=ae(xe,5),!I){var Ce=Math.abs(xe[0]);I=re(xe)&&Ce>5}if(I)for(var Be=0;Be<xe.length;Be++)q=Math.min(Math.abs(xe[Be]),q)}else R.push(we),pe=!0;else I&&(q=Math.min(Math.abs(we),q));if(!t.scrollingPage){var Te=t.cy,ke=Te.zoom(),Oe=Te.pan(),He=t.projectIntoViewport(j.clientX,j.clientY),Ue=[He[0]*ke+Oe.x,He[1]*ke+Oe.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||N()){j.preventDefault();return}if(Te.panningEnabled()&&Te.userPanningEnabled()&&Te.zoomingEnabled()&&Te.userZoomingEnabled()){j.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Ke;pe&&Math.abs(we)>5&&(we=x1(we)*5),Ke=we/-250,I&&(Ke/=q,Ke*=3),Ke=Ke*t.wheelSensitivity;var Qe=j.deltaMode===1;Qe&&(Ke*=33);var Ge=Te.zoom()*Math.pow(10,Ke);j.type==="gesturechange"&&(Ge=t.gestureStartZoom*j.scale),Te.zoom({level:Ge,renderedPosition:{x:Ue[0],y:Ue[1]}}),Te.emit(j.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",K,!0),t.registerBinding(e,"scroll",function(j){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(j){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||j.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(ve){t.hasTouchStarted||K(ve)},!0),t.registerBinding(t.container,"mouseout",function(j){var pe=t.projectIntoViewport(j.clientX,j.clientY);t.cy.emit({originalEvent:j,type:"mouseout",position:{x:pe[0],y:pe[1]}})},!1),t.registerBinding(t.container,"mouseover",function(j){var pe=t.projectIntoViewport(j.clientX,j.clientY);t.cy.emit({originalEvent:j,type:"mouseover",position:{x:pe[0],y:pe[1]}})},!1);var W,Z,U,V,X,ee,se,te,oe,le,$,ne,ie,ue=function(j,pe,we,xe){return Math.sqrt((we-j)*(we-j)+(xe-pe)*(xe-pe))},me=function(j,pe,we,xe){return(we-j)*(we-j)+(xe-pe)*(xe-pe)},ge;t.registerBinding(t.container,"touchstart",ge=function(j){if(t.hasTouchStarted=!0,!!B(j)){w(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var pe=t.cy,we=t.touchData.now,xe=t.touchData.earlier;if(j.touches[0]){var Ce=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);we[0]=Ce[0],we[1]=Ce[1]}if(j.touches[1]){var Ce=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);we[2]=Ce[0],we[3]=Ce[1]}if(j.touches[2]){var Ce=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);we[4]=Ce[0],we[5]=Ce[1]}if(j.touches[1]){t.touchData.singleTouchMoved=!0,v(t.dragData.touchDragEles);var Be=t.findContainerClientCoords();oe=Be[0],le=Be[1],$=Be[2],ne=Be[3],W=j.touches[0].clientX-oe,Z=j.touches[0].clientY-le,U=j.touches[1].clientX-oe,V=j.touches[1].clientY-le,ie=0<=W&&W<=$&&0<=U&&U<=$&&0<=Z&&Z<=ne&&0<=V&&V<=ne;var Te=pe.pan(),ke=pe.zoom();X=ue(W,Z,U,V),ee=me(W,Z,U,V),se=[(W+U)/2,(Z+V)/2],te=[(se[0]-Te.x)/ke,(se[1]-Te.y)/ke];var Oe=200,He=Oe*Oe;if(ee<He&&!j.touches[2]){var Ue=t.findNearestElement(we[0],we[1],!0,!0),Ke=t.findNearestElement(we[2],we[3],!0,!0);Ue&&Ue.isNode()?(Ue.activate().emit({originalEvent:j,type:"cxttapstart",position:{x:we[0],y:we[1]}}),t.touchData.start=Ue):Ke&&Ke.isNode()?(Ke.activate().emit({originalEvent:j,type:"cxttapstart",position:{x:we[0],y:we[1]}}),t.touchData.start=Ke):pe.emit({originalEvent:j,type:"cxttapstart",position:{x:we[0],y:we[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(j.touches[2])pe.boxSelectionEnabled()&&j.preventDefault();else if(!j.touches[1]){if(j.touches[0]){var Qe=t.findNearestElements(we[0],we[1],!0,!0),Ge=Qe[0];if(Ge!=null&&(Ge.activate(),t.touchData.start=Ge,t.touchData.starts=Qe,t.nodeIsGrabbable(Ge))){var Ve=t.dragData.touchDragEles=pe.collection(),dt=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Ge.selected()?(dt=pe.$(function(pt){return pt.selected()&&t.nodeIsGrabbable(pt)}),C(dt,{addToList:Ve})):E(Ge,{addToList:Ve}),h(Ge);var rt=function(_t){return{originalEvent:j,type:_t,position:{x:we[0],y:we[1]}}};Ge.emit(rt("grabon")),dt?dt.forEach(function(pt){pt.emit(rt("grab"))}):Ge.emit(rt("grab"))}a(Ge,["touchstart","tapstart","vmousedown"],j,{x:we[0],y:we[1]}),Ge==null&&(t.data.bgActivePosistion={x:Ce[0],y:Ce[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&a(t.touchData.start,["taphold"],j,{x:we[0],y:we[1]})},t.tapholdDuration)}}if(j.touches.length>=1){for(var at=t.touchData.startPosition=[null,null,null,null,null,null],Et=0;Et<we.length;Et++)at[Et]=xe[Et]=we[Et];var ut=j.touches[0];t.touchData.startGPosition=[ut.clientX,ut.clientY]}}},!1);var Ee;t.registerBinding(e,"touchmove",Ee=function(j){var pe=t.touchData.capture;if(!(!pe&&!B(j))){var we=t.selection,xe=t.cy,Ce=t.touchData.now,Be=t.touchData.earlier,Te=xe.zoom();if(j.touches[0]){var ke=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);Ce[0]=ke[0],Ce[1]=ke[1]}if(j.touches[1]){var ke=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);Ce[2]=ke[0],Ce[3]=ke[1]}if(j.touches[2]){var ke=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);Ce[4]=ke[0],Ce[5]=ke[1]}var Oe=t.touchData.startGPosition,He;if(pe&&j.touches[0]&&Oe){for(var Ue=[],Ke=0;Ke<Ce.length;Ke++)Ue[Ke]=Ce[Ke]-Be[Ke];var Qe=j.touches[0].clientX-Oe[0],Ge=Qe*Qe,Ve=j.touches[0].clientY-Oe[1],dt=Ve*Ve,rt=Ge+dt;He=rt>=t.touchTapThreshold2}if(pe&&t.touchData.cxt){j.preventDefault();var at=j.touches[0].clientX-oe,Et=j.touches[0].clientY-le,ut=j.touches[1].clientX-oe,pt=j.touches[1].clientY-le,_t=me(at,Et,ut,pt),Mt=_t/ee,Vt=150,Lt=Vt*Vt,zt=1.5,Er=zt*zt;if(Mt>=Er||_t>=Lt){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var on={originalEvent:j,type:"cxttapend",position:{x:Ce[0],y:Ce[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(on),t.touchData.start=null):xe.emit(on)}}if(pe&&t.touchData.cxt){var on={originalEvent:j,type:"cxtdrag",position:{x:Ce[0],y:Ce[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(on):xe.emit(on),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Rt=t.findNearestElement(Ce[0],Ce[1],!0,!0);(!t.touchData.cxtOver||Rt!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:j,type:"cxtdragout",position:{x:Ce[0],y:Ce[1]}}),t.touchData.cxtOver=Rt,Rt&&Rt.emit({originalEvent:j,type:"cxtdragover",position:{x:Ce[0],y:Ce[1]}}))}else if(pe&&j.touches[2]&&xe.boxSelectionEnabled())j.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||xe.emit({originalEvent:j,type:"boxstart",position:{x:Ce[0],y:Ce[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,we[4]=1,!we||we.length===0||we[0]===void 0?(we[0]=(Ce[0]+Ce[2]+Ce[4])/3,we[1]=(Ce[1]+Ce[3]+Ce[5])/3,we[2]=(Ce[0]+Ce[2]+Ce[4])/3+1,we[3]=(Ce[1]+Ce[3]+Ce[5])/3+1):(we[2]=(Ce[0]+Ce[2]+Ce[4])/3,we[3]=(Ce[1]+Ce[3]+Ce[5])/3),t.redrawHint("select",!0),t.redraw();else if(pe&&j.touches[1]&&!t.touchData.didSelect&&xe.zoomingEnabled()&&xe.panningEnabled()&&xe.userZoomingEnabled()&&xe.userPanningEnabled()){j.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Kt=t.dragData.touchDragEles;if(Kt){t.redrawHint("drag",!0);for(var $t=0;$t<Kt.length;$t++){var ur=Kt[$t]._private;ur.grabbed=!1,ur.rscratch.inDragLayer=!1}}var jt=t.touchData.start,at=j.touches[0].clientX-oe,Et=j.touches[0].clientY-le,ut=j.touches[1].clientX-oe,pt=j.touches[1].clientY-le,Kr=ue(at,Et,ut,pt),gn=Kr/X;if(ie){var jn=at-W,Ln=Et-Z,Zn=ut-U,sn=pt-V,Ma=(jn+Zn)/2,zn=(Ln+sn)/2,Ft=xe.zoom(),lt=Ft*gn,Gr=xe.pan(),Qn=te[0]*Ft+Gr.x,Pt=te[1]*Ft+Gr.y,Q={x:-lt/Ft*(Qn-Gr.x-Ma)+Qn,y:-lt/Ft*(Pt-Gr.y-zn)+Pt};if(jt&&jt.active()){var Kt=t.dragData.touchDragEles;v(Kt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),jt.unactivate().emit("freeon"),Kt.emit("free"),t.dragData.didDrag&&(jt.emit("dragfreeon"),Kt.emit("dragfree"))}xe.viewport({zoom:lt,pan:Q,cancelOnFailedZoom:!0}),xe.emit("pinchzoom"),X=Kr,W=at,Z=Et,U=ut,V=pt,t.pinching=!0}if(j.touches[0]){var ke=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);Ce[0]=ke[0],Ce[1]=ke[1]}if(j.touches[1]){var ke=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);Ce[2]=ke[0],Ce[3]=ke[1]}if(j.touches[2]){var ke=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);Ce[4]=ke[0],Ce[5]=ke[1]}}else if(j.touches[0]&&!t.touchData.didSelect){var fe=t.touchData.start,Pe=t.touchData.last,Rt;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Rt=t.findNearestElement(Ce[0],Ce[1],!0,!0)),pe&&fe!=null&&j.preventDefault(),pe&&fe!=null&&t.nodeIsDraggable(fe))if(He){var Kt=t.dragData.touchDragEles,ze=!t.dragData.didDrag;ze&&C(Kt,{inDragLayer:!0}),t.dragData.didDrag=!0;var Me={x:0,y:0};if(nt(Ue[0])&&nt(Ue[1])&&(Me.x+=Ue[0],Me.y+=Ue[1],ze)){t.redrawHint("eles",!0);var je=t.touchData.dragDelta;je&&nt(je[0])&&nt(je[1])&&(Me.x+=je[0],Me.y+=je[1])}t.hoverData.draggingEles=!0,Kt.silentShift(Me).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==Be[0]&&t.touchData.startPosition[1]==Be[1]&&t.redrawHint("eles",!0),t.redraw()}else{var je=t.touchData.dragDelta=t.touchData.dragDelta||[];je.length===0?(je.push(Ue[0]),je.push(Ue[1])):(je[0]+=Ue[0],je[1]+=Ue[1])}if(a(fe||Rt,["touchmove","tapdrag","vmousemove"],j,{x:Ce[0],y:Ce[1]}),(!fe||!fe.grabbed())&&Rt!=Pe&&(Pe&&Pe.emit({originalEvent:j,type:"tapdragout",position:{x:Ce[0],y:Ce[1]}}),Rt&&Rt.emit({originalEvent:j,type:"tapdragover",position:{x:Ce[0],y:Ce[1]}})),t.touchData.last=Rt,pe)for(var $t=0;$t<Ce.length;$t++)Ce[$t]&&t.touchData.startPosition[$t]&&He&&(t.touchData.singleTouchMoved=!0);if(pe&&(fe==null||fe.pannable())&&xe.panningEnabled()&&xe.userPanningEnabled()){var Nt=o(fe,t.touchData.starts);Nt&&(j.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=ls(t.touchData.startPosition)),t.swipePanning?(xe.panBy({x:Ue[0]*Te,y:Ue[1]*Te}),xe.emit("dragpan")):He&&(t.swipePanning=!0,xe.panBy({x:Qe*Te,y:Ve*Te}),xe.emit("dragpan"),fe&&(fe.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ke=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);Ce[0]=ke[0],Ce[1]=ke[1]}}for(var Ke=0;Ke<Ce.length;Ke++)Be[Ke]=Ce[Ke];pe&&j.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var he;t.registerBinding(e,"touchcancel",he=function(j){var pe=t.touchData.start;t.touchData.capture=!1,pe&&pe.unactivate()});var de,be,De,Se;if(t.registerBinding(e,"touchend",de=function(j){var pe=t.touchData.start,we=t.touchData.capture;if(we)j.touches.length===0&&(t.touchData.capture=!1),j.preventDefault();else return;var xe=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var Ce=t.cy,Be=Ce.zoom(),Te=t.touchData.now,ke=t.touchData.earlier;if(j.touches[0]){var Oe=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);Te[0]=Oe[0],Te[1]=Oe[1]}if(j.touches[1]){var Oe=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY);Te[2]=Oe[0],Te[3]=Oe[1]}if(j.touches[2]){var Oe=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY);Te[4]=Oe[0],Te[5]=Oe[1]}pe&&pe.unactivate();var He;if(t.touchData.cxt){if(He={originalEvent:j,type:"cxttapend",position:{x:Te[0],y:Te[1]}},pe?pe.emit(He):Ce.emit(He),!t.touchData.cxtDragged){var Ue={originalEvent:j,type:"cxttap",position:{x:Te[0],y:Te[1]}};pe?pe.emit(Ue):Ce.emit(Ue)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!j.touches[2]&&Ce.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var Ke=Ce.collection(t.getAllInBox(xe[0],xe[1],xe[2],xe[3]));xe[0]=void 0,xe[1]=void 0,xe[2]=void 0,xe[3]=void 0,xe[4]=0,t.redrawHint("select",!0),Ce.emit({type:"boxend",originalEvent:j,position:{x:Te[0],y:Te[1]}});var Qe=function(Lt){return Lt.selectable()&&!Lt.selected()};Ke.emit("box").stdFilter(Qe).select().emit("boxselect"),Ke.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(pe!=null&&pe.unactivate(),j.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!j.touches[1]){if(!j.touches[0]){if(!j.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ge=t.dragData.touchDragEles;if(pe!=null){var Ve=pe._private.grabbed;v(Ge),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Ve&&(pe.emit("freeon"),Ge.emit("free"),t.dragData.didDrag&&(pe.emit("dragfreeon"),Ge.emit("dragfree"))),a(pe,["touchend","tapend","vmouseup","tapdragout"],j,{x:Te[0],y:Te[1]}),pe.unactivate(),t.touchData.start=null}else{var dt=t.findNearestElement(Te[0],Te[1],!0,!0);a(dt,["touchend","tapend","vmouseup","tapdragout"],j,{x:Te[0],y:Te[1]})}var rt=t.touchData.startPosition[0]-Te[0],at=rt*rt,Et=t.touchData.startPosition[1]-Te[1],ut=Et*Et,pt=at+ut,_t=pt*Be*Be;t.touchData.singleTouchMoved||(pe||Ce.$(":selected").unselect(["tapunselect"]),a(pe,["tap","vclick"],j,{x:Te[0],y:Te[1]}),be=!1,j.timeStamp-Se<=Ce.multiClickDebounceTime()?(De&&clearTimeout(De),be=!0,Se=null,a(pe,["dbltap","vdblclick"],j,{x:Te[0],y:Te[1]})):(De=setTimeout(function(){be||a(pe,["onetap","voneclick"],j,{x:Te[0],y:Te[1]})},Ce.multiClickDebounceTime()),Se=j.timeStamp)),pe!=null&&!t.dragData.didDrag&&pe._private.selectable&&_t<t.touchTapThreshold2&&!t.pinching&&(Ce.selectionType()==="single"?(Ce.$(r).unmerge(pe).unselect(["tapunselect"]),pe.select(["tapselect"])):pe.selected()?pe.unselect(["tapunselect"]):pe.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Mt=0;Mt<Te.length;Mt++)ke[Mt]=Te[Mt];t.dragData.didDrag=!1,j.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),j.touches.length<2&&(j.touches.length===1&&(t.touchData.startGPosition=[j.touches[0].clientX,j.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var Re=[],Ie=function(j){return{clientX:j.clientX,clientY:j.clientY,force:1,identifier:j.pointerId,pageX:j.pageX,pageY:j.pageY,radiusX:j.width/2,radiusY:j.height/2,screenX:j.screenX,screenY:j.screenY,target:j.target}},qe=function(j){return{event:j,touch:Ie(j)}},Ze=function(j){Re.push(qe(j))},$e=function(j){for(var pe=0;pe<Re.length;pe++){var we=Re[pe];if(we.event.pointerId===j.pointerId){Re.splice(pe,1);return}}},tt=function(j){var pe=Re.filter(function(we){return we.event.pointerId===j.pointerId})[0];pe.event=j,pe.touch=Ie(j)},Xe=function(j){j.touches=Re.map(function(pe){return pe.touch})},We=function(j){return j.pointerType==="mouse"||j.pointerType===4};t.registerBinding(t.container,"pointerdown",function(ve){We(ve)||(ve.preventDefault(),Ze(ve),Xe(ve),ge(ve))}),t.registerBinding(t.container,"pointerup",function(ve){We(ve)||($e(ve),Xe(ve),de(ve))}),t.registerBinding(t.container,"pointercancel",function(ve){We(ve)||($e(ve),Xe(ve),he(ve))}),t.registerBinding(t.container,"pointermove",function(ve){We(ve)||(ve.preventDefault(),tt(ve),Xe(ve),Ee(ve))})}};var Ja={};Ja.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,o,l,u){this.renderer.nodeShapeImpl("polygon",n,a,i,o,l,this.points)},intersectLine:function(n,a,i,o,l,u,f,c){return Kl(l,u,this.points,n,a,i/2,o/2,f)},checkPoint:function(n,a,i,o,l,u,f,c){return Za(n,a,this.points,u,f,o,l,[0,-1],i)}}};Ja.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,l,u){return Yz(i,o,e,r,n/2+l,a/2+l)},checkPoint:function(e,r,n,a,i,o,l,u){return vo(e,r,a,i,o,l,n)}}};Ja.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,o,l,u,f){if(u[f]!==void 0&&u[f+"-cx"]===n&&u[f+"-cy"]===a)return u[f];u[f]=new Array(e.length/2),u[f+"-cx"]=n,u[f+"-cy"]=a;var c=i/2,h=o/2;l=l==="auto"?aN(i,o):l;for(var g=new Array(e.length/2),p=0;p<e.length/2;p++)g[p]={x:n+c*e[p*2],y:a+h*e[p*2+1]};var y,C,E,v,x=g.length;for(C=g[x-1],y=0;y<x;y++)E=g[y%x],v=g[(y+1)%x],u[f][y]=k1(C,E,v,l),C=E,E=v;return u[f]},draw:function(n,a,i,o,l,u,f){this.renderer.nodeShapeImpl("round-polygon",n,a,i,o,l,this.points,this.getOrCreateCorners(a,i,o,l,u,f,"drawCorners"))},intersectLine:function(n,a,i,o,l,u,f,c,h){return Xz(l,u,this.points,n,a,i,o,f,this.getOrCreateCorners(n,a,i,o,c,h,"corners"))},checkPoint:function(n,a,i,o,l,u,f,c,h){return $z(n,a,this.points,u,f,o,l,this.getOrCreateCorners(u,f,o,l,c,h,"corners"))}}};Ja.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,o)},intersectLine:function(e,r,n,a,i,o,l,u){return rN(i,o,e,r,n,a,l,u)},checkPoint:function(e,r,n,a,i,o,l,u){var f=a/2,c=i/2;u=u==="auto"?Mi(a,i):u,u=Math.min(f,c,u);var h=u*2;return!!(Za(e,r,this.points,o,l,a,i-h,[0,-1],n)||Za(e,r,this.points,o,l,a-h,i,[0,-1],n)||vo(e,r,h,h,o-f+u,l-c+u,n)||vo(e,r,h,h,o+f-u,l-c+u,n)||vo(e,r,h,h,o+f-u,l+c-u,n)||vo(e,r,h,h,o-f+u,l+c-u,n))}}};Ja.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:E1(),points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,o)},generateCutTrianglePts:function(e,r,n,a,i){var o=i==="auto"?this.cornerLength:i,l=r/2,u=e/2,f=n-u,c=n+u,h=a-l,g=a+l;return{topLeft:[f,h+o,f+o,h,f+o,h+o],topRight:[c-o,h,c,h+o,c-o,h+o],bottomRight:[c,g-o,c-o,g,c-o,g-o],bottomLeft:[f+o,g,f,g-o,f+o,g-o]}},intersectLine:function(e,r,n,a,i,o,l,u){var f=this.generateCutTrianglePts(n+2*l,a+2*l,e,r,u),c=[].concat.apply([],[f.topLeft.splice(0,4),f.topRight.splice(0,4),f.bottomRight.splice(0,4),f.bottomLeft.splice(0,4)]);return Kl(i,o,c,e,r)},checkPoint:function(e,r,n,a,i,o,l,u){var f=u==="auto"?this.cornerLength:u;if(Za(e,r,this.points,o,l,a,i-2*f,[0,-1],n)||Za(e,r,this.points,o,l,a-2*f,i,[0,-1],n))return!0;var c=this.generateCutTrianglePts(a,i,o,l);return Rn(e,r,c.topLeft)||Rn(e,r,c.topRight)||Rn(e,r,c.bottomRight)||Rn(e,r,c.bottomLeft)}}};Ja.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,l,u){var f=.15,c=.5,h=.85,g=this.generateBarrelBezierPts(n+2*l,a+2*l,e,r),p=function(E){var v=ys({x:E[0],y:E[1]},{x:E[2],y:E[3]},{x:E[4],y:E[5]},f),x=ys({x:E[0],y:E[1]},{x:E[2],y:E[3]},{x:E[4],y:E[5]},c),w=ys({x:E[0],y:E[1]},{x:E[2],y:E[3]},{x:E[4],y:E[5]},h);return[E[0],E[1],v.x,v.y,x.x,x.y,w.x,w.y,E[4],E[5]]},y=[].concat(p(g.topLeft),p(g.topRight),p(g.bottomRight),p(g.bottomLeft));return Kl(i,o,y,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,o=e/2,l=n-o,u=n+o,f=a-i,c=a+i,h=Pb(e,r),g=h.heightOffset,p=h.widthOffset,y=h.ctrlPtOffsetPct*e,C={topLeft:[l,f+g,l+y,f,l+p,f],topRight:[u-p,f,u-y,f,u,f+g],bottomRight:[u,c-g,u-y,c,u-p,c],bottomLeft:[l+p,c,l+y,c,l,c-g]};return C.topLeft.isTop=!0,C.topRight.isTop=!0,C.bottomLeft.isBottom=!0,C.bottomRight.isBottom=!0,C},checkPoint:function(e,r,n,a,i,o,l,u){var f=Pb(a,i),c=f.heightOffset,h=f.widthOffset;if(Za(e,r,this.points,o,l,a,i-2*c,[0,-1],n)||Za(e,r,this.points,o,l,a-2*h,i,[0,-1],n))return!0;for(var g=this.generateBarrelBezierPts(a,i,o,l),p=function(P,N,B){var G=B[4],F=B[2],z=B[0],M=B[5],R=B[1],k=Math.min(G,z),I=Math.max(G,z),q=Math.min(M,R),ae=Math.max(M,R);if(k<=P&&P<=I&&q<=N&&N<=ae){var re=Kz(G,F,z),K=Hz(re[0],re[1],re[2],P),W=K.filter(function(Z){return 0<=Z&&Z<=1});if(W.length>0)return W[0]}return null},y=Object.keys(g),C=0;C<y.length;C++){var E=y[C],v=g[E],x=p(e,r,v);if(x!=null){var w=v[5],T=v[3],A=v[1],_=Ur(w,T,A,x);if(v.isTop&&_<=r||v.isBottom&&r<=_)return!0}}return!1}}};Ja.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Tn(4,0),draw:function(e,r,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,o)},intersectLine:function(e,r,n,a,i,o,l,u){var f=e-(n/2+l),c=r-(a/2+l),h=c,g=e+(n/2+l),p=bi(i,o,e,r,f,c,g,h,!1);return p.length>0?p:rN(i,o,e,r,n,a,l,u)},checkPoint:function(e,r,n,a,i,o,l,u){u=u==="auto"?Mi(a,i):u;var f=2*u;if(Za(e,r,this.points,o,l,a,i-f,[0,-1],n)||Za(e,r,this.points,o,l,a-f,i,[0,-1],n))return!0;var c=a/2+2*n,h=i/2+2*n,g=[o-c,l-h,o-c,l,o+c,l,o+c,l-h];return!!(Rn(e,r,g)||vo(e,r,f,f,o+a/2-u,l+i/2-u,n)||vo(e,r,f,f,o-a/2+u,l+i/2-u,n))}}};Ja.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Tn(3,0)),this.generateRoundPolygon("round-triangle",Tn(3,0)),this.generatePolygon("rectangle",Tn(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Tn(5,0)),this.generateRoundPolygon("round-pentagon",Tn(5,0)),this.generatePolygon("hexagon",Tn(6,0)),this.generateRoundPolygon("round-hexagon",Tn(6,0)),this.generatePolygon("heptagon",Tn(7,0)),this.generateRoundPolygon("round-heptagon",Tn(7,0)),this.generatePolygon("octagon",Tn(8,0)),this.generateRoundPolygon("round-octagon",Tn(8,0));var n=new Array(20);{var a=Rb(5,0),i=Rb(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var l=0;l<i.length/2;l++)i[l*2]*=o,i[l*2+1]*=o;for(var l=0;l<20/4;l++)n[l*4]=a[l*2],n[l*4+1]=a[l*2+1],n[l*4+2]=i[l*2],n[l*4+3]=i[l*2+1]}n=nN(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(f){var c=f.join("$"),h="polygon-"+c,g;return(g=this[h])?g:e.generatePolygon(h,f)}};var vu={};vu.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};vu.redraw=function(t){t=t||JP();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};vu.beforeRender=function(t,e){if(!this.destroyed){e==null&&vr("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var QT=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};vu.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){QT(t,!0,a);var i=ja();t.render(t.renderOptions);var o=t.lastDrawTime=ja();t.averageRedrawTime===void 0&&(t.averageRedrawTime=o-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var l=o-i;t.redrawTotalTime+=l,t.lastRedrawTime=l,t.averageRedrawTime=t.averageRedrawTime/2+l/2,t.requestedFrame=!1}else QT(t,!1,a);t.skipFrame=!1,Kf(r)}};Kf(r)}};var dU=function(e){this.init(e)},nk=dU,Rs=nk.prototype;Rs.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Rs.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,o="__________cytoscape_stylesheet",l="__________cytoscape_container",u=a.getElementById(o)!=null;if(r.className.indexOf(l)<0&&(r.className=(r.className||"")+" "+l),!u){var f=a.createElement("style");f.id=o,f.textContent="."+l+" { position: relative; }",i.insertBefore(f,i.children[0])}var c=n.getComputedStyle(r),h=c.getPropertyValue("position");h==="static"&&Wt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=nt(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Rs.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Rs.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};Rs.isHeadless=function(){return!1};[N1,tk,rk,Ms,Ja,vu].forEach(function(t){wt(Rs,t)});var Pv=1e3/60,ak={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=uu(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(f,c){var h=ja(),g=a.averageRedrawTime,p=a.lastRedrawTime,y=[],C=a.cy.extent(),E=a.getPixelRatio();for(f||a.flushRenderedStyleQueue();;){var v=ja(),x=v-h,w=v-c;if(p<Pv){var T=Pv-(f?g:0);if(w>=e.deqFastCost*T)break}else if(f){if(x>=e.deqCost*p||x>=e.deqAvgCost*g)break}else if(w>=e.deqNoDrawCost*Pv)break;var A=e.deq(n,E,C);if(A.length>0)for(var _=0;_<A.length;_++)y.push(A[_]);else break}y.length>0&&(e.onDeqd(n,y),!f&&e.shouldRedraw(n,y,E,C)&&i())},l=e.priority||m1;a.beforeRender(o,l(n))}}}},hU=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jf;Oi(this,t),this.idsByKey=new Va,this.keyForId=new Va,this.cachesByLvl=new Va,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Ii(t,[{key:"getIdsFor",value:function(r){r==null&&vr("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new As,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new Va,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])}(),JT=25,hf=50,_f=-4,Vb=3,ik=7.99,vU=8,pU=1024,gU=1024,yU=1024,mU=.2,bU=.8,wU=10,xU=.15,CU=.1,EU=.9,TU=.9,SU=100,AU=1,fs={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},LU=rn({getKey:null,doesEleInvalidateKey:jf,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:jP,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),El=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=LU(r);wt(n,a),n.lookup=new hU(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},zr=El.prototype;zr.reasons=fs;zr.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};zr.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};zr.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new fu(function(r,n){return n.reqs-r.reqs});return e};zr.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};zr.getElement=function(t,e,r,n,a){var i=this,o=this.renderer,l=o.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(w1(l*r))),n<_f)n=_f;else if(l>=ik||n>Vb)return null;var f=Math.pow(2,n),c=e.h*f,h=e.w*f,g=o.eleTextBiggerThanMin(t,f);if(!this.isVisible(t,g))return null;var p=u.get(t,n);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;var y;if(c<=JT?y=JT:c<=hf?y=hf:y=Math.ceil(c/hf)*hf,c>yU||h>gU)return null;var C=i.getTextureQueue(y),E=C[C.length-2],v=function(){return i.recycleTexture(y,h)||i.addTexture(y,h)};E||(E=C[C.length-1]),E||(E=v()),E.width-E.usedWidth<h&&(E=v());for(var x=function(k){return k&&k.scaledLabelShown===g},w=a&&a===fs.dequeue,T=a&&a===fs.highQuality,A=a&&a===fs.downscale,_,D=n+1;D<=Vb;D++){var P=u.get(t,D);if(P){_=P;break}}var N=_&&_.level===n+1?_:null,B=function(){E.context.drawImage(N.texture.canvas,N.x,0,N.width,N.height,E.usedWidth,0,h,c)};if(E.context.setTransform(1,0,0,1,0,0),E.context.clearRect(E.usedWidth,0,h,y),x(N))B();else if(x(_))if(T){for(var G=_.level;G>n;G--)N=i.getElement(t,e,r,G,fs.downscale);B()}else return i.queueElement(t,_.level-1),_;else{var F;if(!w&&!T&&!A)for(var z=n-1;z>=_f;z--){var M=u.get(t,z);if(M){F=M;break}}if(x(F))return i.queueElement(t,n),F;E.context.translate(E.usedWidth,0),E.context.scale(f,f),this.drawElement(E.context,t,e,g,!1),E.context.scale(1/f,1/f),E.context.translate(-E.usedWidth,0)}return p={x:E.usedWidth,texture:E,level:n,scale:f,width:h,height:c,scaledLabelShown:g},E.usedWidth+=Math.ceil(h+vU),E.eleCaches.push(p),u.set(t,n,p),i.checkTextureFullness(E),p};zr.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};zr.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=_f;i<=Vb;i++){var o=r.getForCachedKey(t,i);o&&n.push(o)}var l=r.invalidate(t);if(l)for(var u=0;u<n.length;u++){var f=n[u],c=f.texture;c.invalidatedWidth+=f.width,f.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};zr.checkTextureUtility=function(t){t.invalidatedWidth>=mU*t.width&&this.retireTexture(t)};zr.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>bU&&t.fullnessChecks>=wU?_i(r,t):t.fullnessChecks++};zr.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;_i(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var l=i[o];a.deleteCache(l.key,l.level)}b1(i);var u=e.getRetiredTextureQueue(r);u.push(t)};zr.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(pU,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};zr.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,b1(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),_i(a,o),n.push(o),o}};zr.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var l={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(l),a[i]=l}};zr.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<AU&&r.size()>0;o++){var l=r.pop(),u=l.key,f=l.eles[0],c=i.hasCache(f,l.level);if(n[u]=null,c)continue;a.push(l);var h=e.getBoundingBox(f);e.getElement(f,h,t,l.level,fs.dequeue)}return a};zr.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=y1,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};zr.onDequeue=function(t){this.onDequeues.push(t)};zr.offDequeue=function(t){_i(this.onDequeues,t)};zr.setupDequeueing=ak.setupDequeueing({deqRedrawThreshold:SU,deqCost:xU,deqAvgCost:CU,deqNoDrawCost:EU,deqFastCost:TU,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var o=r[i].eles,l=0;l<o.length;l++){var u=o[l].boundingBox();if(C1(u,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var DU=1,Ol=-4,ac=2,_U=3.99,MU=50,RU=50,PU=.15,NU=.1,kU=.9,OU=.9,IU=1,eS=250,FU=4e3*4e3,tS=32767,BU=!0,ok=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=ja()-2*eS,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=uu(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},RU),n.beforeRender(function(o,l){l-r.lastInvalidationTime<=eS?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(l,u){return u.reqs-l.reqs};r.layersQueue=new fu(i),r.setupDequeueing()},nn=ok.prototype,rS=0,qU=Math.pow(2,53)-1;nn.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),o={id:rS=++rS%qU,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},l=o.context,u=-o.bb.x1,f=-o.bb.y1;return l.scale(r,r),l.translate(u,f),o};nn.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),l=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(w1(o*e)),r<Ol)r=Ol;else if(o>=_U||r>ac)return null}n.validateLayersElesOrdering(r,t);var u=n.layersByLevel,f=Math.pow(2,r),c=u[r]=u[r]||[],h,g=n.levelIsComplete(r,t),p,y=function(){var B=function(R){if(n.validateLayersElesOrdering(R,t),n.levelIsComplete(R,t))return p=u[R],!0},G=function(R){if(!p)for(var k=r+R;Ol<=k&&k<=ac&&!B(k);k+=R);};G(1),G(-1);for(var F=c.length-1;F>=0;F--){var z=c[F];z.invalid&&_i(c,z)}};if(!g)y();else return c;var C=function(){if(!h){h=kn();for(var B=0;B<t.length;B++)tN(h,t[B].boundingBox())}return h},E=function(B){B=B||{};var G=B.after;C();var F=Math.ceil(h.w*f),z=Math.ceil(h.h*f);if(F>tS||z>tS)return null;var M=F*z;if(M>FU)return null;var R=n.makeLayer(h,r);if(G!=null){var k=c.indexOf(G)+1;c.splice(k,0,R)}else(B.insert===void 0||B.insert)&&c.unshift(R);return R};if(n.skipping&&!l)return null;for(var v=null,x=t.length/DU,w=!l,T=0;T<t.length;T++){var A=t[T],_=A._private.rscratch,D=_.imgLayerCaches=_.imgLayerCaches||{},P=D[r];if(P){v=P;continue}if((!v||v.eles.length>=x||!qz(v.bb,A.boundingBox()))&&(v=E({insert:!0,after:v}),!v))return null;p||w?n.queueLayer(v,A):n.drawEleInLayer(v,A,r,e),v.eles.push(A),D[r]=v}return p||(w?null:c)};nn.getEleLevelForLayerLevel=function(t,e){return t};nn.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,o=t.context,l=e.boundingBox();l.w===0||l.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,r,BU),i.setImgSmoothing(o,!0))};nn.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};nn.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var l=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[l+o]){this.invalidateLayer(a);break}}};nn.updateElementsInLayers=function(t,e){for(var r=this,n=iu(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],o=n?t[a]:t[a].ele,l=o._private.rscratch,u=l.imgLayerCaches=l.imgLayerCaches||{},f=Ol;f<=ac;f++){var c=u[f];c&&(i&&r.getEleLevelForLayerLevel(c.level)!==i.level||e(c,o,i))}};nn.haveLayers=function(){for(var t=this,e=!1,r=Ol;r<=ac;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};nn.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=ja(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};nn.invalidateLayer=function(t){if(this.lastInvalidationTime=ja(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];_i(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};nn.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var l=0;l<o.eles.length;l++)e.queueLayer(o,o.eles[l])})};nn.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};nn.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};nn.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<IU&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};nn.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,l=o.imgLayerCaches=o.imgLayerCaches||{};l&&(l[t.level]=t)}e.requestRedraw()}};nn.requestRedraw=uu(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);nn.setupDequeueing=ak.setupDequeueing({deqRedrawThreshold:MU,deqCost:PU,deqAvgCost:NU,deqNoDrawCost:kU,deqFastCost:OU,deq:function(e,r){return e.dequeue(r)},onDeqd:m1,shouldRedraw:jP,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var sk={},nS;function zU(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function GU(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function aS(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var o=r,l=r[0];t.moveTo(l.x,l.y);for(var a=1;a<o.length;a++){var i=o[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function HU(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,o=i[0];t.moveTo(o.x,o.y);for(var l=0;l<i.length;l++){var u=i[l];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function UU(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}sk.arrowShapeImpl=function(t){return(nS||(nS={polygon:zU,"triangle-backcurve":GU,"triangle-tee":aS,"circle-triangle":HU,"triangle-cross":aS,circle:UU}))[t]};var Da={};Da.drawElement=function(t,e,r,n,a,i){var o=this;e.isNode()?o.drawNode(t,e,r,n,a,i):o.drawEdge(t,e,r,n,a,i)};Da.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};Da.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};Da.drawCachedElementPortion=function(t,e,r,n,a,i,o,l){var u=this,f=r.getBoundingBox(e);if(!(f.w===0||f.h===0)){var c=r.getElement(e,f,n,a,i);if(c!=null){var h=l(u,e);if(h===0)return;var g=o(u,e),p=f.x1,y=f.y1,C=f.w,E=f.h,v,x,w,T,A;if(g!==0){var _=r.getRotationPoint(e);w=_.x,T=_.y,t.translate(w,T),t.rotate(g),A=u.getImgSmoothing(t),A||u.setImgSmoothing(t,!0);var D=r.getRotationOffset(e);v=D.x,x=D.y}else v=p,x=y;var P;h!==1&&(P=t.globalAlpha,t.globalAlpha=P*h),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,v,x,C,E),h!==1&&(t.globalAlpha=P),g!==0&&(t.rotate(-g),t.translate(-w,-T),A||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var WU=function(){return 0},VU=function(e,r){return e.getTextAngle(r,null)},$U=function(e,r){return e.getTextAngle(r,"source")},YU=function(e,r){return e.getTextAngle(r,"target")},XU=function(e,r){return r.effectiveOpacity()},Nv=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Da.drawCachedElement=function(t,e,r,n,a,i){var o=this,l=o.data,u=l.eleTxrCache,f=l.lblTxrCache,c=l.slbTxrCache,h=l.tlbTxrCache,g=e.boundingBox(),p=i===!0?u.reasons.highQuality:null;if(!(g.w===0||g.h===0||!e.visible())&&(!n||C1(g,n))){var y=e.isEdge(),C=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,u,r,a,p,WU,XU),(!y||!C)&&o.drawCachedElementPortion(t,e,f,r,a,p,VU,Nv),y&&!C&&(o.drawCachedElementPortion(t,e,c,r,a,p,$U,Nv),o.drawCachedElementPortion(t,e,h,r,a,p,YU,Nv)),o.drawElementOverlay(t,e)}};Da.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};Da.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(t,o,r,n)}};Da.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&a.drawCachedElement(t,o,r,n)}};Da.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var o=0;o<i.length;o++){var l=i[o],u=l.bb;u.w===0||u.h===0||t.drawImage(l.canvas,u.x1,u.y1,u.w,u.h)}else a.drawCachedElements(t,e,r,n)};var ei={};ei.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,l=e._private.rscratch;if(!(i&&!e.visible())&&!(l.badLine||l.allpts==null||isNaN(l.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var f=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,h=e.pstyle("curve-style").value,g=e.pstyle("line-style").value,p=e.pstyle("width").pfValue,y=e.pstyle("line-cap").value,C=e.pstyle("line-outline-width").value,E=e.pstyle("line-outline-color").value,v=f*c,x=f*c,w=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;h==="straight-triangle"?(o.eleStrokeStyle(t,e,R),o.drawEdgeTrianglePath(e,t,l.allpts)):(t.lineWidth=p,t.lineCap=y,o.eleStrokeStyle(t,e,R),o.drawEdgePath(e,t,l.allpts,g),t.lineCap="butt")},T=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;if(t.lineWidth=p+C,t.lineCap=y,C>0)o.colorStrokeStyle(t,E[0],E[1],E[2],R);else{t.lineCap="butt";return}h==="straight-triangle"?o.drawEdgeTrianglePath(e,t,l.allpts):(o.drawEdgePath(e,t,l.allpts,g),t.lineCap="butt")},A=function(){a&&o.drawEdgeOverlay(t,e)},_=function(){a&&o.drawEdgeUnderlay(t,e)},D=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x;o.drawArrowheads(t,e,R)},P=function(){o.drawElementText(t,e,null,n)};t.lineJoin="round";var N=e.pstyle("ghost").value==="yes";if(N){var B=e.pstyle("ghost-offset-x").pfValue,G=e.pstyle("ghost-offset-y").pfValue,F=e.pstyle("ghost-opacity").value,z=v*F;t.translate(B,G),w(z),D(z),t.translate(-B,-G)}else T();_(),w(),D(),A(),P(),r&&t.translate(u.x1,u.y1)}};var lk=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),l=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,f=2*u,c=n.pstyle("".concat(e,"-color")).value;r.lineWidth=f,l.edgeType==="self"&&!o?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,c[0],c[1],c[2],a),i.drawEdgePath(n,r,l.allpts,"solid")}}}};ei.drawEdgeOverlay=lk("overlay");ei.drawEdgeUnderlay=lk("underlay");ei.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,o,l=!1,u=this.usePaths(),f=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var h=r.join("$"),g=a.pathCacheKey&&a.pathCacheKey===h;g?(o=e=a.pathCache,l=!0):(o=e=new Path2D,a.pathCacheKey=h,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(f),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!l&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var p=2;p+3<r.length;p+=4)e.quadraticCurveTo(r[p],r[p+1],r[p+2],r[p+3]);break;case"straight":case"haystack":for(var y=2;y+1<r.length;y+=2)e.lineTo(r[y],r[y+1]);break;case"segments":if(a.isRound){var C=Pn(a.roundCorners),E;try{for(C.s();!(E=C.n()).done;){var v=E.value;jN(e,v)}}catch(w){C.e(w)}finally{C.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var x=2;x+1<r.length;x+=2)e.lineTo(r[x],r[x+1]);break}e=i,u?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};ei.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),l=[i[1]/o,-i[0]/o],u=[l[0]*n/2,l[1]*n/2];e.beginPath(),e.moveTo(r[a]-u[0],r[a+1]-u[1]),e.lineTo(r[a]+u[0],r[a+1]+u[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};ei.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};ei.drawArrowhead=function(t,e,r,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var l=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var f=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(r+"-arrow-fill").value,h=e.pstyle("width").pfValue,g=e.pstyle(r+"-arrow-width"),p=g.value==="match-line"?h:g.pfValue;g.units==="%"&&(p*=h);var y=e.pstyle("opacity").value;o===void 0&&(o=y);var C=t.globalCompositeOperation;(o!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",l.colorFillStyle(t,255,255,255,1),l.colorStrokeStyle(t,255,255,255,1),l.drawArrowShape(e,t,f,h,u,p,n,a,i),t.globalCompositeOperation=C);var E=e.pstyle(r+"-arrow-color").value;l.colorFillStyle(t,E[0],E[1],E[2],o),l.colorStrokeStyle(t,E[0],E[1],E[2],o),l.drawArrowShape(e,t,c,h,u,p,n,a,i)}}};ei.drawArrowShape=function(t,e,r,n,a,i,o,l,u){var f=this,c=this.usePaths()&&a!=="triangle-cross",h=!1,g,p=e,y={x:o,y:l},C=t.pstyle("arrow-scale").value,E=this.getArrowWidth(n,C),v=f.arrowShapes[a];if(c){var x=f.arrowPathCache=f.arrowPathCache||[],w=yo(a),T=x[w];T!=null?(g=e=T,h=!0):(g=e=new Path2D,x[w]=g)}h||(e.beginPath&&e.beginPath(),c?v.draw(e,1,0,{x:0,y:0},1):v.draw(e,E,u,y,n),e.closePath&&e.closePath()),e=p,c&&(e.translate(o,l),e.rotate(u),e.scale(E,E)),(r==="filled"||r==="both")&&(c?e.fill(g):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(c?E:1),e.lineJoin="miter",c?e.stroke(g):e.stroke()),c&&(e.scale(1/E,1/E),e.rotate(-u),e.translate(-o,-l))};var I1={};I1.safeDrawImage=function(t,e,r,n,a,i,o,l,u,f){if(!(a<=0||i<=0||u<=0||f<=0))try{t.drawImage(e,r,n,a,i,o,l,u,f)}catch(c){Wt(c)}};I1.drawInscribedImage=function(t,e,r,n,a){var i=this,o=r.position(),l=o.x,u=o.y,f=r.cy().style(),c=f.getIndexedStyle.bind(f),h=c(r,"background-fit","value",n),g=c(r,"background-repeat","value",n),p=r.width(),y=r.height(),C=r.padding()*2,E=p+(c(r,"background-width-relative-to","value",n)==="inner"?0:C),v=y+(c(r,"background-height-relative-to","value",n)==="inner"?0:C),x=r._private.rscratch,w=c(r,"background-clip","value",n),T=w==="node",A=c(r,"background-image-opacity","value",n)*a,_=c(r,"background-image-smoothing","value",n),D=r.pstyle("corner-radius").value;D!=="auto"&&(D=r.pstyle("corner-radius").pfValue);var P=e.width||e.cachedW,N=e.height||e.cachedH;(P==null||N==null)&&(document.body.appendChild(e),P=e.cachedW=e.width||e.offsetWidth,N=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var B=P,G=N;if(c(r,"background-width","value",n)!=="auto"&&(c(r,"background-width","units",n)==="%"?B=c(r,"background-width","pfValue",n)*E:B=c(r,"background-width","pfValue",n)),c(r,"background-height","value",n)!=="auto"&&(c(r,"background-height","units",n)==="%"?G=c(r,"background-height","pfValue",n)*v:G=c(r,"background-height","pfValue",n)),!(B===0||G===0)){if(h==="contain"){var F=Math.min(E/B,v/G);B*=F,G*=F}else if(h==="cover"){var F=Math.max(E/B,v/G);B*=F,G*=F}var z=l-E/2,M=c(r,"background-position-x","units",n),R=c(r,"background-position-x","pfValue",n);M==="%"?z+=(E-B)*R:z+=R;var k=c(r,"background-offset-x","units",n),I=c(r,"background-offset-x","pfValue",n);k==="%"?z+=(E-B)*I:z+=I;var q=u-v/2,ae=c(r,"background-position-y","units",n),re=c(r,"background-position-y","pfValue",n);ae==="%"?q+=(v-G)*re:q+=re;var K=c(r,"background-offset-y","units",n),W=c(r,"background-offset-y","pfValue",n);K==="%"?q+=(v-G)*W:q+=W,x.pathCache&&(z-=l,q-=u,l=0,u=0);var Z=t.globalAlpha;t.globalAlpha=A;var U=i.getImgSmoothing(t),V=!1;if(_==="no"&&U?(i.setImgSmoothing(t,!1),V=!0):_==="yes"&&!U&&(i.setImgSmoothing(t,!0),V=!0),g==="no-repeat")T&&(t.save(),x.pathCache?t.clip(x.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,l,u,E,v,D,x),t.clip())),i.safeDrawImage(t,e,0,0,P,N,z,q,B,G),T&&t.restore();else{var X=t.createPattern(e,g);t.fillStyle=X,i.nodeShapes[i.getNodeShape(r)].draw(t,l,u,E,v,D,x),t.translate(z,q),t.fill(),t.translate(-z,-q)}t.globalAlpha=Z,V&&i.setImgSmoothing(t,U)}};var Eo={};Eo.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(w1(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,o=t.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};Eo.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var l=e.pstyle("label");if(!l||!l.value)return;var u=o.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var f=e.element()._private.rscratch.badLine,c=e.pstyle("label"),h=e.pstyle("source-label"),g=e.pstyle("target-label");if(f||(!c||!c.value)&&(!h||!h.value)&&(!g||!g.value))return;t.textAlign="center",t.textBaseline="bottom"}var p=!r,y;r&&(y=r,t.translate(-y.x1,-y.y1)),a==null?(o.drawText(t,e,null,p,i),e.isEdge()&&(o.drawText(t,e,"source",p,i),o.drawText(t,e,"target",p,i))):o.drawText(t,e,a,p,i),r&&t.translate(y.x1,y.y1)};Eo.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};Eo.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,l=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*l,f=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=n+" "+o+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,f[0],f[1],f[2],l),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function kv(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+a-i),t.quadraticCurveTo(e+n,r+a,e+n-i,r+a),t.lineTo(e+i,r+a),t.quadraticCurveTo(e,r+a,e,r+a-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),o?t.stroke():t.fill()}Eo.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",o=t.pstyle(i+"text-rotation");if(o.strValue==="autorotate"){var l=Mn(a,"labelAngle",e);r=t.isEdge()?l:0}else o.strValue==="none"?r=0:r=o.pfValue;return r};Eo.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,l=a?e.effectiveOpacity():1;if(!(a&&(l===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Mn(o,"labelX",r),f=Mn(o,"labelY",r),c,h,g=this.getLabelText(e,r);if(g!=null&&g!==""&&!isNaN(u)&&!isNaN(f)){this.setupTextStyle(t,e,a);var p=r?r+"-":"",y=Mn(o,"labelWidth",r),C=Mn(o,"labelHeight",r),E=e.pstyle(p+"text-margin-x").pfValue,v=e.pstyle(p+"text-margin-y").pfValue,x=e.isEdge(),w=e.pstyle("text-halign").value,T=e.pstyle("text-valign").value;x&&(w="center",T="center"),u+=E,f+=v;var A;switch(n?A=this.getTextAngle(e,r):A=0,A!==0&&(c=u,h=f,t.translate(c,h),t.rotate(A),u=0,f=0),T){case"top":break;case"center":f+=C/2;break;case"bottom":f+=C;break}var _=e.pstyle("text-background-opacity").value,D=e.pstyle("text-border-opacity").value,P=e.pstyle("text-border-width").pfValue,N=e.pstyle("text-background-padding").pfValue,B=e.pstyle("text-background-shape").strValue,G=B.indexOf("round")===0,F=2;if(_>0||P>0&&D>0){var z=u-N;switch(w){case"left":z-=y;break;case"center":z-=y/2;break}var M=f-C-N,R=y+2*N,k=C+2*N;if(_>0){var I=t.fillStyle,q=e.pstyle("text-background-color").value;t.fillStyle="rgba("+q[0]+","+q[1]+","+q[2]+","+_*l+")",G?kv(t,z,M,R,k,F):t.fillRect(z,M,R,k),t.fillStyle=I}if(P>0&&D>0){var ae=t.strokeStyle,re=t.lineWidth,K=e.pstyle("text-border-color").value,W=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+K[0]+","+K[1]+","+K[2]+","+D*l+")",t.lineWidth=P,t.setLineDash)switch(W){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=P/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(G?kv(t,z,M,R,k,F,"stroke"):t.strokeRect(z,M,R,k),W==="double"){var Z=P/2;G?kv(t,z+Z,M+Z,R-Z*2,k-Z*2,F,"stroke"):t.strokeRect(z+Z,M+Z,R-Z*2,k-Z*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=re,t.strokeStyle=ae}}var U=2*e.pstyle("text-outline-width").pfValue;if(U>0&&(t.lineWidth=U),e.pstyle("text-wrap").value==="wrap"){var V=Mn(o,"labelWrapCachedLines",r),X=Mn(o,"labelLineHeight",r),ee=y/2,se=this.getLabelJustification(e);switch(se==="auto"||(w==="left"?se==="left"?u+=-y:se==="center"&&(u+=-ee):w==="center"?se==="left"?u+=-ee:se==="right"&&(u+=ee):w==="right"&&(se==="center"?u+=ee:se==="right"&&(u+=y))),T){case"top":f-=(V.length-1)*X;break;case"center":case"bottom":f-=(V.length-1)*X;break}for(var te=0;te<V.length;te++)U>0&&t.strokeText(V[te],u,f),t.fillText(V[te],u,f),f+=X}else U>0&&t.strokeText(g,u,f),t.fillText(g,u,f);A!==0&&(t.rotate(-A),t.translate(-c,-h))}}};var Bi={};Bi.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,l,u,f=e._private,c=f.rscratch,h=e.position();if(!(!nt(h.x)||!nt(h.y))&&!(i&&!e.visible())){var g=i?e.effectiveOpacity():1,p=o.usePaths(),y,C=!1,E=e.padding();l=e.width()+2*E,u=e.height()+2*E;var v;r&&(v=r,t.translate(-v.x1,-v.y1));for(var x=e.pstyle("background-image"),w=x.value,T=new Array(w.length),A=new Array(w.length),_=0,D=0;D<w.length;D++){var P=w[D],N=T[D]=P!=null&&P!=="none";if(N){var B=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",D);_++,A[D]=o.getCachedImage(P,B,function(){f.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var G=e.pstyle("background-blacken").value,F=e.pstyle("border-width").pfValue,z=e.pstyle("background-opacity").value*g,M=e.pstyle("border-color").value,R=e.pstyle("border-style").value,k=e.pstyle("border-join").value,I=e.pstyle("border-cap").value,q=e.pstyle("border-position").value,ae=e.pstyle("border-dash-pattern").pfValue,re=e.pstyle("border-dash-offset").pfValue,K=e.pstyle("border-opacity").value*g,W=e.pstyle("outline-width").pfValue,Z=e.pstyle("outline-color").value,U=e.pstyle("outline-style").value,V=e.pstyle("outline-opacity").value*g,X=e.pstyle("outline-offset").value,ee=e.pstyle("corner-radius").value;ee!=="auto"&&(ee=e.pstyle("corner-radius").pfValue);var se=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z;o.eleFillStyle(t,e,We)},te=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K;o.colorStrokeStyle(t,M[0],M[1],M[2],We)},oe=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V;o.colorStrokeStyle(t,Z[0],Z[1],Z[2],We)},le=function(We,ve,j,pe){var we=o.nodePathCache=o.nodePathCache||[],xe=KP(j==="polygon"?j+","+pe.join(","):j,""+ve,""+We,""+ee),Ce=we[xe],Be,Te=!1;return Ce!=null?(Be=Ce,Te=!0,c.pathCache=Be):(Be=new Path2D,we[xe]=c.pathCache=Be),{path:Be,cacheHit:Te}},$=e.pstyle("shape").strValue,ne=e.pstyle("shape-polygon-points").pfValue;if(p){t.translate(h.x,h.y);var ie=le(l,u,$,ne);y=ie.path,C=ie.cacheHit}var ue=function(){if(!C){var We=h;p&&(We={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(y||t,We.x,We.y,l,u,ee,c)}p?t.fill(y):t.fill()},me=function(){for(var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,j=f.backgrounding,pe=0,we=0;we<A.length;we++){var xe=e.cy().style().getIndexedStyle(e,"background-image-containment","value",we);if(ve&&xe==="over"||!ve&&xe==="inside"){pe++;continue}T[we]&&A[we].complete&&!A[we].error&&(pe++,o.drawInscribedImage(t,A[we],e,we,We))}f.backgrounding=pe!==_,j!==f.backgrounding&&e.updateStyle(!1)},ge=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;o.hasPie(e)&&(o.drawPie(t,e,ve),We&&(p||o.nodeShapes[o.getNodeShape(e)].draw(t,h.x,h.y,l,u,ee,c)))},Ee=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;o.hasStripe(e)&&(t.save(),p?t.clip(c.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(t,h.x,h.y,l,u,ee,c),t.clip()),o.drawStripe(t,e,ve),t.restore(),We&&(p||o.nodeShapes[o.getNodeShape(e)].draw(t,h.x,h.y,l,u,ee,c)))},he=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,ve=(G>0?G:-G)*We,j=G>0?0:255;G!==0&&(o.colorFillStyle(t,j,j,j,ve),p?t.fill(y):t.fill())},de=function(){if(F>0){if(t.lineWidth=F,t.lineCap=I,t.lineJoin=k,t.setLineDash)switch(R){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(ae),t.lineDashOffset=re;break;case"solid":case"double":t.setLineDash([]);break}if(q!=="center"){if(t.save(),t.lineWidth*=2,q==="inside")p?t.clip(y):t.clip();else{var We=new Path2D;We.rect(-l/2-F,-u/2-F,l+2*F,u+2*F),We.addPath(y),t.clip(We,"evenodd")}p?t.stroke(y):t.stroke(),t.restore()}else p?t.stroke(y):t.stroke();if(R==="double"){t.lineWidth=F/3;var ve=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",p?t.stroke(y):t.stroke(),t.globalCompositeOperation=ve}t.setLineDash&&t.setLineDash([])}},be=function(){if(W>0){if(t.lineWidth=W,t.lineCap="butt",t.setLineDash)switch(U){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var We=h;p&&(We={x:0,y:0});var ve=o.getNodeShape(e),j=F;q==="inside"&&(j=0),q==="outside"&&(j*=2);var pe=(l+j+(W+X))/l,we=(u+j+(W+X))/u,xe=l*pe,Ce=u*we,Be=o.nodeShapes[ve].points,Te;if(p){var ke=le(xe,Ce,ve,Be);Te=ke.path}if(ve==="ellipse")o.drawEllipsePath(Te||t,We.x,We.y,xe,Ce);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ve)){var Oe=0,He=0,Ue=0;ve==="round-diamond"?Oe=(j+X+W)*1.4:ve==="round-heptagon"?(Oe=(j+X+W)*1.075,Ue=-(j/2+X+W)/35):ve==="round-hexagon"?Oe=(j+X+W)*1.12:ve==="round-pentagon"?(Oe=(j+X+W)*1.13,Ue=-(j/2+X+W)/15):ve==="round-tag"?(Oe=(j+X+W)*1.12,He=(j/2+W+X)*.07):ve==="round-triangle"&&(Oe=(j+X+W)*(Math.PI/2),Ue=-(j+X/2+W)/Math.PI),Oe!==0&&(pe=(l+Oe)/l,xe=l*pe,["round-hexagon","round-tag"].includes(ve)||(we=(u+Oe)/u,Ce=u*we)),ee=ee==="auto"?aN(xe,Ce):ee;for(var Ke=xe/2,Qe=Ce/2,Ge=ee+(j+W+X)/2,Ve=new Array(Be.length/2),dt=new Array(Be.length/2),rt=0;rt<Be.length/2;rt++)Ve[rt]={x:We.x+He+Ke*Be[rt*2],y:We.y+Ue+Qe*Be[rt*2+1]};var at,Et,ut,pt,_t=Ve.length;for(Et=Ve[_t-1],at=0;at<_t;at++)ut=Ve[at%_t],pt=Ve[(at+1)%_t],dt[at]=k1(Et,ut,pt,Ge),Et=ut,ut=pt;o.drawRoundPolygonPath(Te||t,We.x+He,We.y+Ue,l*pe,u*we,Be,dt)}else if(["roundrectangle","round-rectangle"].includes(ve))ee=ee==="auto"?Mi(xe,Ce):ee,o.drawRoundRectanglePath(Te||t,We.x,We.y,xe,Ce,ee+(j+W+X)/2);else if(["cutrectangle","cut-rectangle"].includes(ve))ee=ee==="auto"?E1():ee,o.drawCutRectanglePath(Te||t,We.x,We.y,xe,Ce,null,ee+(j+W+X)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ve))ee=ee==="auto"?Mi(xe,Ce):ee,o.drawBottomRoundRectanglePath(Te||t,We.x,We.y,xe,Ce,ee+(j+W+X)/2);else if(ve==="barrel")o.drawBarrelPath(Te||t,We.x,We.y,xe,Ce);else if(ve.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ve)){var Mt=(j+W+X)/l;Be=Zf(Qf(Be,Mt)),o.drawPolygonPath(Te||t,We.x,We.y,l,u,Be)}else{var Vt=(j+W+X)/l;Be=Zf(Qf(Be,-Vt)),o.drawPolygonPath(Te||t,We.x,We.y,l,u,Be)}if(p?t.stroke(Te):t.stroke(),U==="double"){t.lineWidth=j/3;var Lt=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",p?t.stroke(Te):t.stroke(),t.globalCompositeOperation=Lt}t.setLineDash&&t.setLineDash([])}},De=function(){a&&o.drawNodeOverlay(t,e,h,l,u)},Se=function(){a&&o.drawNodeUnderlay(t,e,h,l,u)},Re=function(){o.drawElementText(t,e,null,n)},Ie=e.pstyle("ghost").value==="yes";if(Ie){var qe=e.pstyle("ghost-offset-x").pfValue,Ze=e.pstyle("ghost-offset-y").pfValue,$e=e.pstyle("ghost-opacity").value,tt=$e*g;t.translate(qe,Ze),oe(),be(),se($e*z),ue(),me(tt,!0),te($e*K),de(),ge(G!==0||F!==0),Ee(G!==0||F!==0),me(tt,!1),he(tt),t.translate(-qe,-Ze)}p&&t.translate(-h.x,-h.y),Se(),p&&t.translate(h.x,h.y),oe(),be(),se(),ue(),me(g,!0),te(),de(),ge(G!==0||F!==0),Ee(G!==0||F!==0),me(g,!1),he(),p&&t.translate(-h.x,-h.y),Re(),De(),r&&t.translate(v.x1,v.y1)}};var uk=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,o){var l=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,f=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,h=n.pstyle("".concat(e,"-shape")).value,g=n.pstyle("".concat(e,"-corner-radius")).value;if(f>0){if(a=a||n.position(),i==null||o==null){var p=n.padding();i=n.width()+2*p,o=n.height()+2*p}l.colorFillStyle(r,c[0],c[1],c[2],f),l.nodeShapes[h].draw(r,a.x,a.y,i+u*2,o+u*2,g),r.fill()}}}};Bi.drawNodeOverlay=uk("overlay");Bi.drawNodeUnderlay=uk("underlay");Bi.hasPie=function(t){return t=t[0],t._private.hasPie};Bi.hasStripe=function(t){return t=t[0],t._private.hasStripe};Bi.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),l=e.pstyle("pie-start-angle").pfValue,u=n.x,f=n.y,c=e.width(),h=e.height(),g=Math.min(c,h)/2,p,y=0,C=this.usePaths();if(C&&(u=0,f=0),i.units==="%"?g=g*i.pfValue:i.pfValue!==void 0&&(g=i.pfValue/2),o.units==="%"?p=g*o.pfValue:o.pfValue!==void 0&&(p=o.pfValue/2),!(p>=g))for(var E=1;E<=a.pieBackgroundN;E++){var v=e.pstyle("pie-"+E+"-background-size").value,x=e.pstyle("pie-"+E+"-background-color").value,w=e.pstyle("pie-"+E+"-background-opacity").value*r,T=v/100;T+y>1&&(T=1-y);var A=1.5*Math.PI+2*Math.PI*y;A+=l;var _=2*Math.PI*T,D=A+_;v===0||y>=1||y+T>1||(p===0?(t.beginPath(),t.moveTo(u,f),t.arc(u,f,g,A,D),t.closePath()):(t.beginPath(),t.arc(u,f,g,A,D),t.arc(u,f,p,D,A,!0),t.closePath()),this.colorFillStyle(t,x[0],x[1],x[2],w),t.fill(),y+=T)}};Bi.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,o=n.y,l=e.width(),u=e.height(),f=0,c=this.usePaths();t.save();var h=e.pstyle("stripe-direction").value,g=e.pstyle("stripe-size");switch(h){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var p=l,y=u;g.units==="%"?(p=p*g.pfValue,y=y*g.pfValue):g.pfValue!==void 0&&(p=g.pfValue,y=g.pfValue),c&&(i=0,o=0),o-=p/2,i-=y/2;for(var C=1;C<=a.stripeBackgroundN;C++){var E=e.pstyle("stripe-"+C+"-background-size").value,v=e.pstyle("stripe-"+C+"-background-color").value,x=e.pstyle("stripe-"+C+"-background-opacity").value*r,w=E/100;w+f>1&&(w=1-f),!(E===0||f>=1||f+w>1)&&(t.beginPath(),t.rect(i,o+y*f,p,y*w),t.closePath(),this.colorFillStyle(t,v[0],v[1],v[2],x),t.fill(),f+=w)}t.restore()};var An={},KU=100;An.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};An.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};An.createGradientStyleFor=function(t,e,r,n,a){var i,o=this.usePaths(),l=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var f=r.sourceEndpoint(),c=r.targetEndpoint(),h=r.midpoint(),g=mo(f,h),p=mo(c,h);i=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(g,p))}else{var y=o?{x:0,y:0}:r.position(),C=r.paddedWidth(),E=r.paddedHeight();i=t.createRadialGradient(y.x,y.y,0,y.x,y.y,Math.max(C,E))}else if(r.isEdge()){var v=r.sourceEndpoint(),x=r.targetEndpoint();i=t.createLinearGradient(v.x,v.y,x.x,x.y)}else{var w=o?{x:0,y:0}:r.position(),T=r.paddedWidth(),A=r.paddedHeight(),_=T/2,D=A/2,P=r.pstyle("background-gradient-direction").value;switch(P){case"to-bottom":i=t.createLinearGradient(w.x,w.y-D,w.x,w.y+D);break;case"to-top":i=t.createLinearGradient(w.x,w.y+D,w.x,w.y-D);break;case"to-left":i=t.createLinearGradient(w.x+_,w.y,w.x-_,w.y);break;case"to-right":i=t.createLinearGradient(w.x-_,w.y,w.x+_,w.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(w.x-_,w.y-D,w.x+_,w.y+D);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(w.x-_,w.y+D,w.x+_,w.y-D);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(w.x+_,w.y-D,w.x-_,w.y+D);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(w.x+_,w.y+D,w.x-_,w.y-D);break}}if(!i)return null;for(var N=u.length===l.length,B=l.length,G=0;G<B;G++)i.addColorStop(N?u[G]:G/(B-1),"rgba("+l[G][0]+","+l[G][1]+","+l[G][2]+","+a+")");return i};An.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};An.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};An.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};An.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};An.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};An.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};An.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),l=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=l);var u=a*o,f=i*o,c;if(!(u===e.canvasWidth&&f===e.canvasHeight)){e.fontCaches=null;var h=r.canvasContainer;h.style.width=a+"px",h.style.height=i+"px";for(var g=0;g<e.CANVAS_LAYERS;g++)c=r.canvases[g],c.width=u,c.height=f,c.style.width=a+"px",c.style.height=i+"px";for(var g=0;g<e.BUFFER_COUNT;g++)c=r.bufferCanvases[g],c.width=u,c.height=f,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,o<=1&&(c=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=f*e.textureMult),e.canvasWidth=u,e.canvasHeight=f,e.pixelRatio=o}};An.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};An.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};An.render=function(t){var e=this;t=t||JP();var r=e.cy,n=t.forcedContext,a=t.drawAllLayers,i=t.drawOnlyNodeLayer,o=t.forcedZoom,l=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,f=e.data,c=f.canvasNeedsRedraw,h=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),g=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,p=e.motionBlurPxRatio,y=r.hasCompoundNodes(),C=e.hoverData.draggingEles,E=!!(e.hoverData.selecting||e.touchData.selecting);g=g&&!n&&e.motionBlurEnabled&&!E;var v=g;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),g&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(v=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!h&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var x=r.style(),w=r.zoom(),T=o!==void 0?o:w,A=r.pan(),_={x:A.x,y:A.y},D={zoom:w,pan:{x:A.x,y:A.y}},P=e.prevViewport,N=P===void 0||D.zoom!==P.zoom||D.pan.x!==P.pan.x||D.pan.y!==P.pan.y;!N&&!(C&&!y)&&(e.motionBlurPxRatio=1),l&&(_=l),T*=u,_.x*=u,_.y*=u;var B=e.getCachedZSortedEles();function G(te,oe,le,$,ne){var ie=te.globalCompositeOperation;te.globalCompositeOperation="destination-out",e.colorFillStyle(te,255,255,255,e.motionBlurTransparency),te.fillRect(oe,le,$,ne),te.globalCompositeOperation=ie}function F(te,oe){var le,$,ne,ie;!e.clearingMotionBlur&&(te===f.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||te===f.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(le={x:A.x*p,y:A.y*p},$=w*p,ne=e.canvasWidth*p,ie=e.canvasHeight*p):(le=_,$=T,ne=e.canvasWidth,ie=e.canvasHeight),te.setTransform(1,0,0,1,0,0),oe==="motionBlur"?G(te,0,0,ne,ie):!n&&(oe===void 0||oe)&&te.clearRect(0,0,ne,ie),a||(te.translate(le.x,le.y),te.scale($,$)),l&&te.translate(l.x,l.y),o&&te.scale(o,o)}if(h||(e.textureDrawLastFrame=!1),h){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var z=e.data.bufferContexts[e.TEXTURE_BUFFER];z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:z,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var D=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};D.mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var M=f.contexts[e.NODE],R=e.textureCache.texture,D=e.textureCache.viewport;M.setTransform(1,0,0,1,0,0),g?G(M,0,0,D.width,D.height):M.clearRect(0,0,D.width,D.height);var k=x.core("outside-texture-bg-color").value,I=x.core("outside-texture-bg-opacity").value;e.colorFillStyle(M,k[0],k[1],k[2],I),M.fillRect(0,0,D.width,D.height);var w=r.zoom();F(M,!1),M.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/u,D.height/D.zoom/u),M.drawImage(R,D.mpan.x,D.mpan.y,D.width/D.zoom/u,D.height/D.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var q=r.extent(),ae=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),re=e.hideEdgesOnViewport&&ae,K=[];if(K[e.NODE]=!c[e.NODE]&&g&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,K[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),K[e.DRAG]=!c[e.DRAG]&&g&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,K[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||a||i||K[e.NODE]){var W=g&&!K[e.NODE]&&p!==1,M=n||(W?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:f.contexts[e.NODE]),Z=g&&!W?"motionBlur":void 0;F(M,Z),re?e.drawCachedNodes(M,B.nondrag,u,q):e.drawLayeredElements(M,B.nondrag,u,q),e.debug&&e.drawDebugPoints(M,B.nondrag),!a&&!g&&(c[e.NODE]=!1)}if(!i&&(c[e.DRAG]||a||K[e.DRAG])){var W=g&&!K[e.DRAG]&&p!==1,M=n||(W?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:f.contexts[e.DRAG]);F(M,g&&!W?"motionBlur":void 0),re?e.drawCachedNodes(M,B.drag,u,q):e.drawCachedElements(M,B.drag,u,q),e.debug&&e.drawDebugPoints(M,B.drag),!a&&!g&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,F),g&&p!==1){var U=f.contexts[e.NODE],V=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],X=f.contexts[e.DRAG],ee=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],se=function(oe,le,$){oe.setTransform(1,0,0,1,0,0),$||!v?oe.clearRect(0,0,e.canvasWidth,e.canvasHeight):G(oe,0,0,e.canvasWidth,e.canvasHeight);var ne=p;oe.drawImage(le,0,0,e.canvasWidth*ne,e.canvasHeight*ne,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||K[e.NODE])&&(se(U,V,K[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||K[e.DRAG])&&(se(X,ee,K[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=D,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),g&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!h,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},KU)),n||r.emit("render")};var yl;An.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,a=r.data,i=n.style(),o=t.drawOnlyNodeLayer,l=t.drawAllLayers,u=a.canvasNeedsRedraw,f=t.forcedContext;if(r.showFps||!o&&u[r.SELECT_BOX]&&!l){var c=f||a.contexts[r.SELECT_BOX];if(e(c),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var h=r.cy.zoom(),g=i.core("selection-box-border-width").value/h;c.lineWidth=g,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),g>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(a.bgActivePosistion&&!r.hoverData.selecting){var h=r.cy.zoom(),p=a.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(p.x,p.y,i.core("active-bg-size").pfValue/h,0,2*Math.PI),c.fill()}var y=r.lastRedrawTime;if(r.showFps&&y){y=Math.round(y);var C=Math.round(1e3/y),E="1 frame = "+y+" ms = "+C+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!yl){var v=c.measureText(E);yl=v.actualBoundingBoxAscent}c.fillText(E,0,yl);var x=60;c.strokeRect(0,yl+10,250,20),c.fillRect(0,yl+10,250*Math.min(C/x,1),20)}l||(u[r.SELECT_BOX]=!1)}};function iS(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function jU(t,e,r){var n=iS(t,t.VERTEX_SHADER,e),a=iS(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function ZU(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function F1(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function QU(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function JU(t,e,r,n,a){var i=n*r+e.x,o=a*r+e.y;return o=Math.round(t.canvasHeight-o),[i,o]}function eW(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function tW(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function no(t,e,r){var n=t[0]/255,a=t[1]/255,i=t[2]/255,o=e,l=r||new Array(4);return l[0]=n*o,l[1]=a*o,l[2]=i*o,l[3]=o,l}function ns(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function rW(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function nW(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function fk(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function ck(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function aW(t,e,r,n,a,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*n,a);case t.INT:return new Int32Array(r.buffer,i*n,a)}}function iW(t,e,r,n){var a=fk(t,e),i=Ir(a,2),o=i[0],l=i[1],u=ck(t,l,n),f=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),l===t.FLOAT?t.vertexAttribPointer(r,o,l,!1,0,0):l===t.INT&&t.vertexAttribIPointer(r,o,l,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),f}function ya(t,e,r,n){var a=fk(t,r),i=Ir(a,3),o=i[0],l=i[1],u=i[2],f=ck(t,l,e*o),c=o*u,h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),l===t.FLOAT?t.vertexAttribPointer(n,o,l,!1,c,0):l===t.INT&&t.vertexAttribIPointer(n,o,l,c,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var g=new Array(e),p=0;p<e;p++)g[p]=aW(t,l,f,c,o,p);return h.dataArray=f,h.stride=c,h.size=o,h.getView=function(y){return g[y]},h.setPoint=function(y,C,E){var v=g[y];v[0]=C,v[1]=E},h.bufferSubData=function(y){t.bindBuffer(t.ARRAY_BUFFER,h),y?t.bufferSubData(t.ARRAY_BUFFER,0,f,0,y*o):t.bufferSubData(t.ARRAY_BUFFER,0,f)},h}function oW(t,e,r){for(var n=9,a=new Float32Array(e*n),i=new Array(e),o=0;o<e;o++){var l=o*n*4;i[o]=new Float32Array(a.buffer,l,n)}var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,a.byteLength,t.DYNAMIC_DRAW);for(var f=0;f<3;f++){var c=r+f;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,3*12,f*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),u.getMatrixView=function(h){return i[h]},u.setData=function(h,g){i[g].set(h,0)},u.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferSubData(t.ARRAY_BUFFER,0,a)},u}function sW(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var oS=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Ov(){var t=new oS(9);return oS!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function sS(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function lW(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],l=e[4],u=e[5],f=e[6],c=e[7],h=e[8],g=r[0],p=r[1],y=r[2],C=r[3],E=r[4],v=r[5],x=r[6],w=r[7],T=r[8];return t[0]=g*n+p*o+y*f,t[1]=g*a+p*l+y*c,t[2]=g*i+p*u+y*h,t[3]=C*n+E*o+v*f,t[4]=C*a+E*l+v*c,t[5]=C*i+E*u+v*h,t[6]=x*n+w*o+T*f,t[7]=x*a+w*l+T*c,t[8]=x*i+w*u+T*h,t}function Mf(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],l=e[4],u=e[5],f=e[6],c=e[7],h=e[8],g=r[0],p=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=l,t[5]=u,t[6]=g*n+p*o+f,t[7]=g*a+p*l+c,t[8]=g*i+p*u+h,t}function lS(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],l=e[4],u=e[5],f=e[6],c=e[7],h=e[8],g=Math.sin(r),p=Math.cos(r);return t[0]=p*n+g*o,t[1]=p*a+g*l,t[2]=p*i+g*u,t[3]=p*o-g*n,t[4]=p*l-g*a,t[5]=p*u-g*i,t[6]=f,t[7]=c,t[8]=h,t}function $b(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function uW(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var fW=function(){function t(e,r,n,a){Oi(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,r,r),this.scratch=a(e,r,this.texHeight,"scratch")}return Ii(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,a=r.h,i=this.texHeight,o=this.texSize,l=i/a,u=n*l,f=a*l;return u>o&&(l=o/n,u=n*l,f=a*l),{scale:l,texW:u,texH:f}}},{key:"draw",value:function(r,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,l=this.texRows,u=this.texHeight,f=this.getScale(n),c=f.scale,h=f.texW,g=f.texH,p=function(w,T){if(a&&T){var A=T.context,_=w.x,D=w.row,P=_,N=u*D;A.save(),A.translate(P,N),A.scale(c,c),a(A,n),A.restore()}},y=[null,null],C=function(){p(i.freePointer,i.canvas),y[0]={x:i.freePointer.x,y:i.freePointer.row*u,w:h,h:g},y[1]={x:i.freePointer.x+h,y:i.freePointer.row*u,w:0,h:g},i.freePointer.x+=h,i.freePointer.x==o&&(i.freePointer.x=0,i.freePointer.row++)},E=function(){var w=i.scratch,T=i.canvas;w.clear(),p({x:0,row:0},w);var A=o-i.freePointer.x,_=h-A,D=u;{var P=i.freePointer.x,N=i.freePointer.row*u,B=A;T.context.drawImage(w,0,0,B,D,P,N,B,D),y[0]={x:P,y:N,w:B,h:g}}{var G=A,F=(i.freePointer.row+1)*u,z=_;T&&T.context.drawImage(w,G,0,z,D,0,F,z,D),y[1]={x:0,y:F,w:z,h:g}}i.freePointer.x=_,i.freePointer.row++},v=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+h<=o)C();else{if(this.freePointer.row>=l-1)return!1;this.freePointer.x===o?(v(),C()):this.enableWrapping?E():(v(),C())}return this.keyToLocation.set(r,y),this.needsBuffer=!0,y}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(r),o=i.texW;return this.freePointer.x+o>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=nW(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),cW=function(){function t(e,r,n,a){Oi(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Ii(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new fW(r,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,o=Math.floor(n/a);this.scratch=i(r,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,a){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,n,a),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,o=null,l=Pn(this.atlases),u;try{var f=function(){var h=u.value,g=h.getKeys(),p=dW(n,g);if(p.size===0)return a.push(h),g.forEach(function(A){return i.set(A,h)}),1;o||(o=r._createAtlas(),a.push(o));var y=Pn(g),C;try{for(y.s();!(C=y.n()).done;){var E=C.value;if(!p.has(E)){var v=h.getOffsets(E),x=Ir(v,2),w=x[0],T=x[1];o.canFit({w:w.w+T.w,h:w.h})||(o.lock(),o=r._createAtlas(),a.push(o)),h.canvas&&(r._copyTextureToNewAtlas(E,h,o),i.set(E,o))}}}catch(A){y.e(A)}finally{y.f()}h.dispose()};for(l.s();!(u=l.n()).done;)f()}catch(c){l.e(c)}finally{l.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,a){var i=n.getOffsets(r),o=Ir(i,2),l=o[0],u=o[1];if(u.w===0)a.draw(r,l,function(g){g.drawImage(n.canvas,l.x,l.y,l.w,l.h,0,0,l.w,l.h)});else{var f=this._getScratchCanvas();f.clear(),f.context.drawImage(n.canvas,l.x,l.y,l.w,l.h,0,0,l.w,l.h),f.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,l.w,0,u.w,u.h);var c=l.w+u.w,h=l.h;a.draw(r,{w:c,h},function(g){g.drawImage(f,0,0,c,h,0,0,c,h)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function dW(t,e){return t.intersection?t.intersection(e):new Set(Yf(t).filter(function(r){return e.has(r)}))}var hW=function(){function t(e,r){Oi(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Ii(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var a=this.globalOptions,i=a.webglTexSize,o=a.createTextureCanvas,l=n.texRows,u=this._cacheScratchCanvas(o),f=new cW(this.r,i,l,u);this.collections.set(r,f)}},{key:"addRenderType",value:function(r,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),o=wt({type:r,atlasCollection:i},n);this.renderTypes.set(r,o)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,a=-1,i=null;return function(o,l,u,f){return f?((!i||l!=n||u!=a)&&(n=l,a=u,i=r(o,l,u)),i):r(o,l,u)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,o=i===void 0?!1:i,l=a.filterEle,u=l===void 0?function(){return!0}:l,f=a.filterType,c=f===void 0?function(){return!0}:f,h=!1,g=!1,p=Pn(r),y;try{for(p.s();!(y=p.n()).done;){var C=y.value;if(u(C)){var E=Pn(this.renderTypes.values()),v;try{var x=function(){var T=v.value,A=T.type;if(c(A)){var _=n.collections.get(T.collection),D=T.getKey(C),P=Array.isArray(D)?D:[D];if(o)P.forEach(function(F){return _.markKeyForGC(F)}),g=!0;else{var N=T.getID?T.getID(C):C.id(),B=n._key(A,N),G=n.typeAndIdToKey.get(B);G!==void 0&&!tW(P,G)&&(h=!0,n.typeAndIdToKey.delete(B),G.forEach(function(F){return _.markKeyForGC(F)}))}}};for(E.s();!(v=E.n()).done;)x()}catch(w){E.e(w)}finally{E.f()}}}}catch(w){p.e(w)}finally{p.f()}return g&&(this.gc(),h=!1),h}},{key:"gc",value:function(){var r=Pn(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;a.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,a,i){var o=this.renderTypes.get(n),l=this.collections.get(o.collection),u=!1,f=l.draw(i,a,function(g){o.drawClipped?(g.save(),g.beginPath(),g.rect(0,0,a.w,a.h),g.clip(),o.drawElement(g,r,a,!0,!0),g.restore()):o.drawElement(g,r,a,!0,!0),u=!0});if(u){var c=o.getID?o.getID(r):r.id(),h=this._key(n,c);this.typeAndIdToKey.has(h)?this.typeAndIdToKey.get(h).push(i):this.typeAndIdToKey.set(h,[i])}return f}},{key:"getAtlasInfo",value:function(r,n){var a=this,i=this.renderTypes.get(n),o=i.getKey(r),l=Array.isArray(o)?o:[o];return l.map(function(u){var f=i.getBoundingBox(r,u),c=a.getOrCreateAtlas(r,n,f,u),h=c.getOffsets(u),g=Ir(h,2),p=g[0],y=g[1];return{atlas:c,tex:p,tex1:p,tex2:y,bb:f}})}},{key:"getDebugInfo",value:function(){var r=[],n=Pn(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=Ir(a.value,2),o=i[0],l=i[1],u=l.getCounts(),f=u.keyCount,c=u.atlasCount;r.push({type:o,keyCount:f,atlasCount:c})}}catch(h){n.e(h)}finally{n.f()}return r}}])}(),vW=function(){function t(e){Oi(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Ii(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])}(),pW=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,gW=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,yW=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,mW=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Il={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},ic={IGNORE:1,USE_BB:2},Iv=0,uS=1,fS=2,Fv=3,as=4,vf=5,ml=6,bl=7,bW=function(){function t(e,r,n){Oi(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=ZU,this.atlasManager=new hW(e,n),this.batchManager=new vW(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Il.SCREEN),this.pickingProgram=this._createShaderProgram(Il.PICKING),this.vao=this._createVAO()}return Ii(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(r,{filterType:function(l){return l===a},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Iv,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(as," || aVertType == ").concat(bl,` 
             || aVertType == `).concat(vf," || aVertType == ").concat(ml,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(uS,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(fS,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(Fv,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(f){return"uniform sampler2D uTexture".concat(f,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(pW,`
      `).concat(gW,`
      `).concat(yW,`
      `).concat(mW,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Iv,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(f){return"if(vAtlasId == ".concat(f,") outColor = texture(uTexture").concat(f,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(Fv,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(as,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(as," || vVertType == ").concat(bl,` 
          || vVertType == `).concat(vf," || vVertType == ").concat(ml,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(as,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(bl,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(bl,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),l=jU(n,a,o);l.aPosition=n.getAttribLocation(l,"aPosition"),l.aIndex=n.getAttribLocation(l,"aIndex"),l.aVertType=n.getAttribLocation(l,"aVertType"),l.aTransform=n.getAttribLocation(l,"aTransform"),l.aAtlasId=n.getAttribLocation(l,"aAtlasId"),l.aTex=n.getAttribLocation(l,"aTex"),l.aPointAPointB=n.getAttribLocation(l,"aPointAPointB"),l.aPointCPointD=n.getAttribLocation(l,"aPointCPointD"),l.aLineWidth=n.getAttribLocation(l,"aLineWidth"),l.aColor=n.getAttribLocation(l,"aColor"),l.aCornerRadius=n.getAttribLocation(l,"aCornerRadius"),l.aBorderColor=n.getAttribLocation(l,"aBorderColor"),l.uPanZoomMatrix=n.getUniformLocation(l,"uPanZoomMatrix"),l.uAtlasSize=n.getUniformLocation(l,"uAtlasSize"),l.uBGColor=n.getUniformLocation(l,"uBGColor"),l.uZoom=n.getUniformLocation(l,"uZoom"),l.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)l.uTextures.push(n.getUniformLocation(l,"uTexture".concat(u)));return l}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,a=this.gl,i=this.program,o=a.createVertexArray();return a.bindVertexArray(o),iW(a,"vec2",i.aPosition,r),this.transformBuffer=oW(a,n,i.aTransform),this.indexBuffer=ya(a,n,"vec4",i.aIndex),this.vertTypeBuffer=ya(a,n,"int",i.aVertType),this.atlasIdBuffer=ya(a,n,"int",i.aAtlasId),this.texBuffer=ya(a,n,"vec4",i.aTex),this.pointAPointBBuffer=ya(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=ya(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=ya(a,n,"vec2",i.aLineWidth),this.colorBuffer=ya(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=ya(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=ya(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),o}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Il.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,a){var i=this.atlasManager,o=this.batchManager,l=i.getRenderTypeOpts(a);if(this._isVisible(r,l)){if(this.renderTarget.picking&&l.getTexPickingMode){var u=l.getTexPickingMode(r);if(u===ic.IGNORE)return;if(u==ic.USE_BB){this.drawPickingRectangle(r,n,a);return}}var f=i.getAtlasInfo(r,a),c=Pn(f),h;try{for(c.s();!(h=c.n()).done;){var g=h.value,p=g.atlas,y=g.tex1,C=g.tex2;o.canAddToCurrentBatch(p)||this.endBatch();for(var E=o.getAtlasIndexForBatch(p),v=0,x=[[y,!0],[C,!1]];v<x.length;v++){var w=Ir(x[v],2),T=w[0],A=w[1];if(T.w!=0){var _=this.instanceCount;this.vertTypeBuffer.getView(_)[0]=Iv;var D=this.indexBuffer.getView(_);ns(n,D);var P=this.atlasIdBuffer.getView(_);P[0]=E;var N=this.texBuffer.getView(_);N[0]=T.x,N[1]=T.y,N[2]=T.w,N[3]=T.h;var B=this.transformBuffer.getMatrixView(_);this.setTransformMatrix(r,B,l,g,A),this.instanceCount++,A||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(G){c.e(G)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(r,n,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=0;if(a.shapeProps&&a.shapeProps.padding&&(l=r.pstyle(a.shapeProps.padding).pfValue),i){var u=i.bb,f=i.tex1,c=i.tex2,h=f.w/(f.w+c.w);o||(h=1-h);var g=this._getAdjustedBB(u,l,o,h);this._applyTransformMatrix(n,g,a,r)}else{var p=a.getBoundingBox(r),y=this._getAdjustedBB(p,l,!0,1);this._applyTransformMatrix(n,y,a,r)}}},{key:"_applyTransformMatrix",value:function(r,n,a,i){var o,l;sS(r);var u=a.getRotation?a.getRotation(i):0;if(u!==0){var f=a.getRotationPoint(i),c=f.x,h=f.y;Mf(r,r,[c,h]),lS(r,r,u);var g=a.getRotationOffset(i);o=g.x+(n.xOffset||0),l=g.y+(n.yOffset||0)}else o=n.x1,l=n.y1;Mf(r,r,[o,l]),$b(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,a,i){var o=r.x1,l=r.y1,u=r.w,f=r.h,c=r.yOffset;n&&(o-=n,l-=n,u+=2*n,f+=2*n);var h=0,g=u*i;return a&&i<1?u=g:!a&&i<1&&(h=u-g,o+=h,u=g),{x1:o,y1:l,w:u,h:f,xOffset:h,yOffset:c}}},{key:"drawPickingRectangle",value:function(r,n,a){var i=this.atlasManager.getRenderTypeOpts(a),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=as;var l=this.indexBuffer.getView(o);ns(n,l);var u=this.colorBuffer.getView(o);no([0,0,0],1,u);var f=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(r,f,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(r,i)){var o=i.shapeProps,l=this._getVertTypeForShape(r,o.shape);if(l===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,n,a);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=l,l===vf||l===ml){var f=i.getBoundingBox(r),c=this._getCornerRadius(r,o.radius,f),h=this.cornerRadiusBuffer.getView(u);h[0]=c,h[1]=c,h[2]=c,h[3]=c,l===ml&&(h[0]=0,h[2]=0)}var g=this.indexBuffer.getView(u);ns(n,g);var p=r.pstyle(o.color).value,y=r.pstyle(o.opacity).value,C=this.colorBuffer.getView(u);no(p,y,C);var E=this.lineWidthBuffer.getView(u);if(E[0]=0,E[1]=0,o.border){var v=r.pstyle("border-width").value;if(v>0){var x=r.pstyle("border-color").value,w=r.pstyle("border-opacity").value,T=this.borderColorBuffer.getView(u);no(x,w,T);var A=r.pstyle("border-position").value;if(A==="inside")E[0]=0,E[1]=-v;else if(A==="outside")E[0]=v,E[1]=0;else{var _=v/2;E[0]=_,E[1]=-_}}}var D=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,D,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var a=r.pstyle(n).value;switch(a){case"rectangle":return as;case"ellipse":return bl;case"roundrectangle":case"round-rectangle":return vf;case"bottom-round-rectangle":return ml;default:return}}},{key:"_getCornerRadius",value:function(r,n,a){var i=a.w,o=a.h;if(r.pstyle(n).value==="auto")return Mi(i,o);var l=r.pstyle(n).pfValue,u=i/2,f=o/2;return Math.min(l,f,u)}},{key:"drawEdgeArrow",value:function(r,n,a){if(r.visible()){var i=r._private.rscratch,o,l,u;if(a==="source"?(o=i.arrowStartX,l=i.arrowStartY,u=i.srcArrowAngle):(o=i.arrowEndX,l=i.arrowEndY,u=i.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(l)||l==null||isNaN(u)||u==null)){var f=r.pstyle(a+"-arrow-shape").value;if(f!=="none"){var c=r.pstyle(a+"-arrow-color").value,h=r.pstyle("opacity").value,g=r.pstyle("line-opacity").value,p=h*g,y=r.pstyle("width").pfValue,C=r.pstyle("arrow-scale").value,E=this.r.getArrowWidth(y,C),v=this.instanceCount,x=this.transformBuffer.getMatrixView(v);sS(x),Mf(x,x,[o,l]),$b(x,x,[E,E]),lS(x,x,u),this.vertTypeBuffer.getView(v)[0]=Fv;var w=this.indexBuffer.getView(v);ns(n,w);var T=this.colorBuffer.getView(v);no(c,p,T),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var a=this._getEdgePoints(r);if(a){var i=r.pstyle("opacity").value,o=r.pstyle("line-opacity").value,l=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,f=i*o;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=uS;var h=this.indexBuffer.getView(c);ns(n,h);var g=this.colorBuffer.getView(c);no(u,f,g);var p=this.lineWidthBuffer.getView(c);p[0]=l;var y=this.pointAPointBBuffer.getView(c);y[0]=a[0],y[1]=a[1],y[2]=a[2],y[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var C=0;C<a.length-2;C+=2){var E=this.instanceCount;this.vertTypeBuffer.getView(E)[0]=fS;var v=this.indexBuffer.getView(E);ns(n,v);var x=this.colorBuffer.getView(E);no(u,f,x);var w=this.lineWidthBuffer.getView(E);w[0]=l;var T=a[C-2],A=a[C-1],_=a[C],D=a[C+1],P=a[C+2],N=a[C+3],B=a[C+4],G=a[C+5];C==0&&(T=2*_-P+.001,A=2*D-N+.001),C==a.length-4&&(B=2*P-_+.001,G=2*N-D+.001);var F=this.pointAPointBBuffer.getView(E);F[0]=T,F[1]=A,F[2]=_,F[3]=D;var z=this.pointCPointDBuffer.getView(E);z[0]=P,z[1]=N,z[2]=B,z[3]=G,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=r[0],a[1]=r[1];else if(i==n)a[i*2]=r[r.length-2],a[i*2+1]=r[r.length-1];else{var o=i/n;this._setCurvePoint(r,o,a,i*2)}return a}},{key:"_setCurvePoint",value:function(r,n,a,i){if(r.length<=2)a[i]=r[0],a[i+1]=r[1];else{for(var o=Array(r.length-2),l=0;l<o.length;l+=2){var u=(1-n)*r[l]+n*r[l+2],f=(1-n)*r[l+1]+n*r[l+3];o[l]=u,o[l+1]=f}return this._setCurvePoint(o,n,a,i)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(o),r.bindVertexArray(n);var l=Pn(this.buffers),u;try{for(l.s();!(u=l.n()).done;){var f=u.value;f.bufferSubData(i)}}catch(y){l.e(y)}finally{l.f()}for(var c=this.batchManager.getAtlases(),h=0;h<c.length;h++)c[h].bufferIfNeeded(r);for(var g=0;g<c.length;g++)r.activeTexture(r.TEXTURE0+g),r.bindTexture(r.TEXTURE_2D,c[g].texture),r.uniform1i(o.uTextures[g],g);r.uniform1f(o.uZoom,QU(this.r)),r.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var p=no(this.bgColor,1);r.uniform4fv(o.uBGColor,p),r.drawArraysInstanced(r.TRIANGLES,0,a,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(o,l){return o+l.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(o,l){return o+l.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])}(),dk={};dk.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=wW(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=sW(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new bW(r,n,t);var a=function(h){return function(g){return r.getTextAngle(g,h)}},i=function(h){return function(g){var p=g.pstyle(h);return p&&p.value}},o=function(h){return function(g){return g.pstyle("".concat(h,"-opacity")).value>0}},l=function(h){var g=h.pstyle("text-events").strValue==="yes";return g?ic.USE_BB:ic.IGNORE},u=function(h){var g=h.position(),p=g.x,y=g.y,C=h.outerWidth(),E=h.outerHeight();return{w:C,h:E,x1:p-C/2,y1:y-E/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:eW,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:l,getKey:Bv(e.getLabelKey,null),getBoundingBox:qv(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:l,getKey:Bv(e.getSourceLabelKey,"source"),getBoundingBox:qv(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:l,getKey:Bv(e.getTargetLabelKey,"target"),getBoundingBox:qv(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var f=uu(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(c,h){var g=!1;h&&h.length>0&&(g|=r.drawing.invalidate(h)),g&&f()}),xW(r)};function wW(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return HP(r)}function hk(t,e){var r=t._private.rscratch;return Mn(r,"labelWrapCachedLines",e)||[]}var Bv=function(e,r){return function(n){var a=e(n),i=hk(n,r);return i.length>1?i.map(function(o,l){return"".concat(a,"_").concat(l)}):a}},qv=function(e,r){return function(n,a){var i=e(n);if(typeof a=="string"){var o=a.indexOf("_");if(o>0){var l=Number(a.substring(o+1)),u=hk(n,r),f=i.h/u.length,c=f*l,h=i.y1+c;return{x1:i.x1,w:i.w,y1:h,h:f,yOffset:c}}}return i}};function xW(t){{var e=t.render;t.render=function(i){i=i||{};var o=t.cy;t.webgl&&(o.zoom()>ik?(CW(t),e.call(t,i)):(EW(t),pk(t,i,Il.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,o,l,u){return _W(t,i,o)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var a=t.notify;t.notify=function(i,o){a.call(t,i,o),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(o,{type:"node-body"})}}}function CW(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function EW(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function TW(t){var e=t.canvasWidth,r=t.canvasHeight,n=F1(t),a=n.pan,i=n.zoom,o=Ov();Mf(o,o,[a.x,a.y]),$b(o,o,[i,i]);var l=Ov();uW(l,e,r);var u=Ov();return lW(u,l,o),u}function vk(t,e){var r=t.canvasWidth,n=t.canvasHeight,a=F1(t),i=a.pan,o=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(i.x,i.y),e.scale(o,o)}function SW(t,e){t.drawSelectionRectangle(e,function(r){return vk(t,r)})}function AW(t){var e=t.data.contexts[t.NODE];e.save(),vk(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function LW(t){var e=function(a,i,o){for(var l=a.atlasManager.getAtlasCollection(i),u=t.data.contexts[t.NODE],f=l.atlases,c=0;c<f.length;c++){var h=f[c],g=h.canvas;if(g){var p=g.width,y=g.height,C=p*c,E=g.height*o,v=.4;u.save(),u.scale(v,v),u.drawImage(g,C,E),u.strokeStyle="black",u.rect(C,E,p,y),u.stroke(),u.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function DW(t,e,r,n,a){var i,o,l,u,f=F1(t),c=f.pan,h=f.zoom;{var g=JU(t,c,h,e,r),p=Ir(g,2),y=p[0],C=p[1],E=6;i=y-E/2,o=C-E/2,l=E,u=E}if(l===0||u===0)return[];var v=t.data.contexts[t.WEBGL];v.bindFramebuffer(v.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(v.viewport(0,0,v.canvas.width,v.canvas.height),pk(t,null,Il.PICKING),t.pickingFrameBuffer.needsDraw=!1);var x=l*u,w=new Uint8Array(x*4);v.readPixels(i,o,l,u,v.RGBA,v.UNSIGNED_BYTE,w),v.bindFramebuffer(v.FRAMEBUFFER,null);for(var T=new Set,A=0;A<x;A++){var _=w.slice(A*4,A*4+4),D=rW(_)-1;D>=0&&T.add(D)}return T}function _W(t,e,r){var n=DW(t,e,r),a=t.getCachedZSortedEles(),i,o,l=Pn(n),u;try{for(l.s();!(u=l.n()).done;){var f=u.value,c=a[f];if(!i&&c.isNode()&&(i=c),!o&&c.isEdge()&&(o=c),i&&o)break}}catch(h){l.e(h)}finally{l.f()}return[i,o].filter(Boolean)}function zv(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function pk(t,e,r){var n;t.webglDebug&&(n=performance.now());var a=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&SW(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var o=t.data.contexts[t.WEBGL];r.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var l=TW(t),u=t.getCachedZSortedEles();if(i=u.length,a.startFrame(l,r),r.screen){for(var f=0;f<u.nondrag.length;f++)zv(t,f,u.nondrag[f]);for(var c=0;c<u.drag.length;c++)zv(t,c,u.drag[c])}else if(r.picking)for(var h=0;h<u.length;h++)zv(t,h,u[h]);a.endFrame(),r.screen&&t.webglDebugShowAtlases&&(AW(t),LW(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var g=performance.now(),p=!1,y=Math.ceil(g-n),C=a.getDebugInfo(),E=["".concat(i," elements"),"".concat(C.totalInstances," instances"),"".concat(C.batchCount," batches"),"".concat(C.totalAtlases," atlases"),"".concat(C.wrappedCount," wrapped textures"),"".concat(C.simpleCount," simple shapes")].join(", ");if(p)console.log("WebGL (".concat(r.name,") - time ").concat(y,"ms, ").concat(E));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(y,"ms")),console.log("Totals:"),console.log("  ".concat(E)),console.log("Texture Atlases Used:");var v=C.atlasInfo,x=Pn(v),w;try{for(x.s();!(w=x.n()).done;){var T=w.value;console.log("  ".concat(T.type,": ").concat(T.keyCount," keys, ").concat(T.atlasCount," atlases"))}}catch(A){x.e(A)}finally{x.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc())}var qi={};qi.drawPolygonPath=function(t,e,r,n,a,i){var o=n/2,l=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*i[0],r+l*i[1]);for(var u=1;u<i.length/2;u++)t.lineTo(e+o*i[u*2],r+l*i[u*2+1]);t.closePath()};qi.drawRoundPolygonPath=function(t,e,r,n,a,i,o){o.forEach(function(l){return jN(t,l)}),t.closePath()};qi.drawRoundRectanglePath=function(t,e,r,n,a,i){var o=n/2,l=a/2,u=i==="auto"?Mi(n,a):Math.min(i,l,o);t.beginPath&&t.beginPath(),t.moveTo(e,r-l),t.arcTo(e+o,r-l,e+o,r,u),t.arcTo(e+o,r+l,e,r+l,u),t.arcTo(e-o,r+l,e-o,r,u),t.arcTo(e-o,r-l,e,r-l,u),t.lineTo(e,r-l),t.closePath()};qi.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var o=n/2,l=a/2,u=i==="auto"?Mi(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-l),t.lineTo(e+o,r-l),t.lineTo(e+o,r),t.arcTo(e+o,r+l,e,r+l,u),t.arcTo(e-o,r+l,e-o,r,u),t.lineTo(e-o,r-l),t.lineTo(e,r-l),t.closePath()};qi.drawCutRectanglePath=function(t,e,r,n,a,i,o){var l=n/2,u=a/2,f=o==="auto"?E1():o;t.beginPath&&t.beginPath(),t.moveTo(e-l+f,r-u),t.lineTo(e+l-f,r-u),t.lineTo(e+l,r-u+f),t.lineTo(e+l,r+u-f),t.lineTo(e+l-f,r+u),t.lineTo(e-l+f,r+u),t.lineTo(e-l,r+u-f),t.lineTo(e-l,r-u+f),t.closePath()};qi.drawBarrelPath=function(t,e,r,n,a){var i=n/2,o=a/2,l=e-i,u=e+i,f=r-o,c=r+o,h=Pb(n,a),g=h.widthOffset,p=h.heightOffset,y=h.ctrlPtOffsetPct*g;t.beginPath&&t.beginPath(),t.moveTo(l,f+p),t.lineTo(l,c-p),t.quadraticCurveTo(l+y,c,l+g,c),t.lineTo(u-g,c),t.quadraticCurveTo(u-y,c,u,c-p),t.lineTo(u,f+p),t.quadraticCurveTo(u-y,f,u-g,f),t.lineTo(l+g,f),t.quadraticCurveTo(l+y,f,l,f+p),t.closePath()};var cS=Math.sin(0),dS=Math.cos(0),Yb={},Xb={},gk=Math.PI/40;for(var is=0*Math.PI;is<2*Math.PI;is+=gk)Yb[is]=Math.sin(is),Xb[is]=Math.cos(is);qi.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,o,l=n/2,u=a/2,f=0*Math.PI;f<2*Math.PI;f+=gk)i=e-l*Yb[f]*cS+l*Xb[f]*dS,o=r+u*Xb[f]*cS+u*Yb[f]*dS,f===0?t.moveTo(i,o):t.lineTo(i,o);t.closePath()};var pu={};pu.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};pu.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],o=t.full?Math.ceil(n.h):a[3],l=nt(t.maxWidth)||nt(t.maxHeight),u=this.getPixelRatio(),f=1;if(t.scale!==void 0)i*=t.scale,o*=t.scale,f=t.scale;else if(l){var c=1/0,h=1/0;nt(t.maxWidth)&&(c=f*t.maxWidth/i),nt(t.maxHeight)&&(h=f*t.maxHeight/o),f=Math.min(c,h),i*=f,o*=f}l||(i*=u,o*=u,f*=u);var g=document.createElement("canvas");g.width=i,g.height=o,g.style.width=i+"px",g.style.height=o+"px";var p=g.getContext("2d");if(i>0&&o>0){p.clearRect(0,0,i,o),p.globalCompositeOperation="source-over";var y=this.getCachedZSortedEles();if(t.full)p.translate(-n.x1*f,-n.y1*f),p.scale(f,f),this.drawElements(p,y),p.scale(1/f,1/f),p.translate(n.x1*f,n.y1*f);else{var C=e.pan(),E={x:C.x*f,y:C.y*f};f*=e.zoom(),p.translate(E.x,E.y),p.scale(f,f),this.drawElements(p,y),p.scale(1/f,1/f),p.translate(-E.x,-E.y)}t.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=t.bg,p.rect(0,0,i,o),p.fill())}return g};function MW(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function hS(t){var e=t.indexOf(",");return t.substr(e+1)}function yk(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new Ls(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(o){i(o)}});case"blob":return MW(hS(n()),r);case"base64":return hS(n());case"base64uri":default:return n()}}pu.png=function(t){return yk(t,this.bufferCanvasImage(t),"image/png")};pu.jpg=function(t){return yk(t,this.bufferCanvasImage(t),"image/jpeg")};var mk={};mk.nodeShapeImpl=function(t,e,r,n,a,i,o,l){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,o,l);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,l);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,o,l);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,l);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var RW=bk,Dt=bk.prototype;Dt.CANVAS_LAYERS=3;Dt.SELECT_BOX=0;Dt.DRAG=1;Dt.NODE=2;Dt.WEBGL=3;Dt.CANVAS_TYPES=["2d","2d","2d","webgl2"];Dt.BUFFER_COUNT=3;Dt.TEXTURE_BUFFER=0;Dt.MOTIONBLUR_BUFFER_NODE=1;Dt.MOTIONBLUR_BUFFER_DRAG=2;function bk(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(Dt.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Dt.CANVAS_LAYERS),contexts:new Array(Dt.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Dt.CANVAS_LAYERS),bufferCanvases:new Array(Dt.BUFFER_COUNT),bufferContexts:new Array(Dt.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,o.position="relative",o.zIndex="0",o.overflow="hidden";var l=t.cy.container();l.appendChild(e.data.canvasContainer),l.style[a]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};_q()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var f=0;f<Dt.CANVAS_LAYERS;f++){var c=e.data.canvases[f]=n.createElement("canvas"),h=Dt.CANVAS_TYPES[f];e.data.contexts[f]=c.getContext(h),e.data.contexts[f]||vr("Could not create canvas of type "+h),Object.keys(u).forEach(function(te){c.style[te]=u[te]}),c.style.position="absolute",c.setAttribute("data-id","layer"+f),c.style.zIndex=String(Dt.CANVAS_LAYERS-f),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[f]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Dt.NODE].setAttribute("data-id","layer"+Dt.NODE+"-node"),e.data.canvases[Dt.SELECT_BOX].setAttribute("data-id","layer"+Dt.SELECT_BOX+"-selectbox"),e.data.canvases[Dt.DRAG].setAttribute("data-id","layer"+Dt.DRAG+"-drag"),e.data.canvases[Dt.WEBGL]&&e.data.canvases[Dt.WEBGL].setAttribute("data-id","layer"+Dt.WEBGL+"-webgl");for(var f=0;f<Dt.BUFFER_COUNT;f++)e.data.bufferCanvases[f]=n.createElement("canvas"),e.data.bufferContexts[f]=e.data.bufferCanvases[f].getContext("2d"),e.data.bufferCanvases[f].style.position="absolute",e.data.bufferCanvases[f].setAttribute("data-id","buffer"+f),e.data.bufferCanvases[f].style.zIndex=String(-f-1),e.data.bufferCanvases[f].style.visibility="hidden";e.pathsEnabled=!0;var g=kn(),p=function(oe){return{x:(oe.x1+oe.x2)/2,y:(oe.y1+oe.y2)/2}},y=function(oe){return{x:-oe.w/2,y:-oe.h/2}},C=function(oe){var le=oe[0]._private,$=le.oldBackgroundTimestamp===le.backgroundTimestamp;return!$},E=function(oe){return oe[0]._private.nodeKey},v=function(oe){return oe[0]._private.labelStyleKey},x=function(oe){return oe[0]._private.sourceLabelStyleKey},w=function(oe){return oe[0]._private.targetLabelStyleKey},T=function(oe,le,$,ne,ie){return e.drawElement(oe,le,$,!1,!1,ie)},A=function(oe,le,$,ne,ie){return e.drawElementText(oe,le,$,ne,"main",ie)},_=function(oe,le,$,ne,ie){return e.drawElementText(oe,le,$,ne,"source",ie)},D=function(oe,le,$,ne,ie){return e.drawElementText(oe,le,$,ne,"target",ie)},P=function(oe){return oe.boundingBox(),oe[0]._private.bodyBounds},N=function(oe){return oe.boundingBox(),oe[0]._private.labelBounds.main||g},B=function(oe){return oe.boundingBox(),oe[0]._private.labelBounds.source||g},G=function(oe){return oe.boundingBox(),oe[0]._private.labelBounds.target||g},F=function(oe,le){return le},z=function(oe){return p(P(oe))},M=function(oe,le,$){var ne=oe?oe+"-":"";return{x:le.x+$.pstyle(ne+"text-margin-x").pfValue,y:le.y+$.pstyle(ne+"text-margin-y").pfValue}},R=function(oe,le,$){var ne=oe[0]._private.rscratch;return{x:ne[le],y:ne[$]}},k=function(oe){return M("",R(oe,"labelX","labelY"),oe)},I=function(oe){return M("source",R(oe,"sourceLabelX","sourceLabelY"),oe)},q=function(oe){return M("target",R(oe,"targetLabelX","targetLabelY"),oe)},ae=function(oe){return y(P(oe))},re=function(oe){return y(B(oe))},K=function(oe){return y(G(oe))},W=function(oe){var le=N(oe),$=y(N(oe));if(oe.isNode()){switch(oe.pstyle("text-halign").value){case"left":$.x=-le.w-(le.leftPad||0);break;case"right":$.x=-(le.rightPad||0);break}switch(oe.pstyle("text-valign").value){case"top":$.y=-le.h-(le.topPad||0);break;case"bottom":$.y=-(le.botPad||0);break}}return $},Z=e.data.eleTxrCache=new El(e,{getKey:E,doesEleInvalidateKey:C,drawElement:T,getBoundingBox:P,getRotationPoint:z,getRotationOffset:ae,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),U=e.data.lblTxrCache=new El(e,{getKey:v,drawElement:A,getBoundingBox:N,getRotationPoint:k,getRotationOffset:W,isVisible:F}),V=e.data.slbTxrCache=new El(e,{getKey:x,drawElement:_,getBoundingBox:B,getRotationPoint:I,getRotationOffset:re,isVisible:F}),X=e.data.tlbTxrCache=new El(e,{getKey:w,drawElement:D,getBoundingBox:G,getRotationPoint:q,getRotationOffset:K,isVisible:F}),ee=e.data.lyrTxrCache=new ok(e);e.onUpdateEleCalcs(function(oe,le){Z.invalidateElements(le),U.invalidateElements(le),V.invalidateElements(le),X.invalidateElements(le),ee.invalidateElements(le);for(var $=0;$<le.length;$++){var ne=le[$]._private;ne.oldBackgroundTimestamp=ne.backgroundTimestamp}});var se=function(oe){for(var le=0;le<oe.length;le++)ee.enqueueElementRefinement(oe[le].ele)};Z.onDequeue(se),U.onDequeue(se),V.onDequeue(se),X.onDequeue(se),t.webgl&&e.initWebgl(t,{getStyleKey:E,getLabelKey:v,getSourceLabelKey:x,getTargetLabelKey:w,drawElement:T,drawLabel:A,drawSourceLabel:_,drawTargetLabel:D,getElementBox:P,getLabelBox:N,getSourceLabelBox:B,getTargetLabelBox:G,getElementRotationPoint:z,getElementRotationOffset:ae,getLabelRotationPoint:k,getSourceLabelRotationPoint:I,getTargetLabelRotationPoint:q,getLabelRotationOffset:W,getSourceLabelRotationOffset:re,getTargetLabelRotationOffset:K})}Dt.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Dt.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Dt.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Dt.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var PW=typeof Path2D<"u";Dt.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Dt.usePaths=function(){return PW&&this.pathsEnabled};Dt.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Dt.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Dt.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":Br(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[sk,Da,ei,I1,Eo,Bi,An,dk,qi,pu,mk].forEach(function(t){wt(Dt,t)});var NW=[{name:"null",impl:YN},{name:"base",impl:nk},{name:"canvas",impl:RW}],kW=[{type:"layout",extensions:oU},{type:"renderer",extensions:NW}],wk={},xk={};function Ck(t,e,r){var n=r,a=function(P){Wt("Can not register `"+e+"` for `"+t+"` since `"+P+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Jl.prototype[e])return a(e);Jl.prototype[e]=r}else if(t==="collection"){if(tn.prototype[e])return a(e);tn.prototype[e]=r}else if(t==="layout"){for(var i=function(P){this.options=P,r.call(this,P),It(this._private)||(this._private={}),this._private.cy=P.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(r.prototype),l=[],u=0;u<l.length;u++){var f=l[u];o[f]=o[f]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=r.prototype.stop;o.stop=function(){var D=this.options;if(D&&D.animate){var P=this.animations;if(P)for(var N=0;N<P.length;N++)P[N].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var h=function(P){return P._private.cy},g={addEventFields:function(P,N){N.layout=P,N.cy=h(P),N.target=P},bubble:function(){return!0},parent:function(P){return h(P)}};wt(o,{createEmitter:function(){return this._private.emitter=new kc(g,this),this},emitter:function(){return this._private.emitter},on:function(P,N){return this.emitter().on(P,N),this},one:function(P,N){return this.emitter().one(P,N),this},once:function(P,N){return this.emitter().one(P,N),this},removeListener:function(P,N){return this.emitter().removeListener(P,N),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(P,N){return this.emitter().emit(P,N),this}}),Ut.eventAliasesOn(o),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var p=Ek("renderer","base"),y=p.prototype,C=r,E=r.prototype,v=function(){p.apply(this,arguments),C.apply(this,arguments)},x=v.prototype;for(var w in y){var T=y[w],A=E[w]!=null;if(A)return a(w);x[w]=T}for(var _ in E)x[_]=E[_];y.clientFunctions.forEach(function(D){x[D]=x[D]||function(){vr("Renderer does not implement `renderer."+D+"()` on its prototype")}}),n=v}else if(t==="__proto__"||t==="constructor"||t==="prototype")return vr(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return UP({map:wk,keys:[t,e],value:n})}function Ek(t,e){return WP({map:wk,keys:[t,e]})}function OW(t,e,r,n,a){return UP({map:xk,keys:[t,e,r,n],value:a})}function IW(t,e,r,n){return WP({map:xk,keys:[t,e,r,n]})}var Kb=function(){if(arguments.length===2)return Ek.apply(null,arguments);if(arguments.length===3)return Ck.apply(null,arguments);if(arguments.length===4)return IW.apply(null,arguments);if(arguments.length===5)return OW.apply(null,arguments);vr("Invalid extension access syntax")};Jl.prototype.extension=Kb;kW.forEach(function(t){t.extensions.forEach(function(e){Ck(t.type,e.name,e.impl)})});var oc=function(){if(!(this instanceof oc))return new oc;this.length=0},xo=oc.prototype;xo.instanceString=function(){return"stylesheet"};xo.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};xo.css=function(t,e){var r=this.length-1;if(mt(t))this[r].properties.push({name:t,value:e});else if(It(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],l=n[o];if(l!=null){var u=$r.properties[o]||$r.properties[Tc(o)];if(u!=null){var f=u.name,c=l;this[r].properties.push({name:f,value:c})}}}return this};xo.style=xo.css;xo.generateStyle=function(t){var e=new $r(t);return this.appendToStyle(e)};xo.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var o=a[i];t.css(o.name,o.value)}}return t};var FW="3.32.0",qn=function(e){if(e===void 0&&(e={}),It(e))return new Jl(e);if(mt(e))return Kb.apply(Kb,arguments)};qn.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(qn),t.apply(null,e),this};qn.warnings=function(t){return ZP(t)};qn.version=FW;qn.stylesheet=qn.Stylesheet=oc;var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function To(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gv={exports:{}},vS={},pS;function BW(){return pS||(pS=1,Object.extend=function(t){t=t||{};for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var n in r)r.hasOwnProperty(n)&&(Array.isArray(r[n])?t[n]=r[n].slice():typeof r[n]=="object"?t[n]=Object.extend(t[n],r[n]):t[n]=r[n])}return t}),vS}var Hv,gS;function qW(){return gS||(gS=1,Hv=function(t,e,r){var n={};n.changeOptions=function(i){e=i.gridSpacing,r=i.snapToGridCenter?.5:0};var a=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};return n.snapPos=function(i){var o=r?Math.floor(i.x/e):Math.round(i.x/e),l=r?Math.floor(i.y/e):Math.round(i.y/e),u={x:(o+r)*e,y:(l+r)*e};return u},n.snapNode=function(i){var o=i.position(),l=n.snapPos(o);i.position(l)},n.snapNodesTopDown=function(i){t.startBatch(),i.union(i.descendants()).filter(":childless").positions(function(o,l){typeof o=="number"&&(o=l);var u=o.position();return n.snapPos(u)}),t.endBatch()},n.onFreeNode=function(i){var o,l=i.target||i.cyTarget;l.selected()?o=i.cy.$(":selected"):o=l,n.snapNodesTopDown(o)},n.recoverSnapNode=function(i){var o=a(i).snap;o&&i.position(o.oldPos)},n}),Hv}var Uv,yS;function zW(){return yS||(yS=1,Uv=function(t,e){var r={},n,a,i,o;r.onTapStartNode=function(c){if(!(c.originalEvent.altKey||c.originalEvent.ctrlKey||c.originalEvent.metaKey||c.originalEvent.shiftKey)){var h=c.target||c.cyTarget;h.selected()?a=c.cy.$(":selected"):a=h,i=c.position||c.cyPosition,h.grabbable()&&!h.locked()&&(n=h,n.lock(),t.on("tapdrag",f),t.on("tapend",l))}};var l=function(c){t.off("tapdrag",f),t.off("tapend",l),n.unlock(),c.preventDefault()},u=function(){return{x:o.x-i.x,y:o.y-i.y}},f=function(c){n.position(),o=c.position||c.cyPosition,o=e.snapPos(o);var h=u();if(h.x!=0||h.y!=0){n.unlock();var g=a.union(a.descendants());g.filter(":childless").positions(function(p,y){typeof p=="number"&&(p=y);var C=p.position();return e.snapPos({x:C.x+h.x,y:C.y+h.y})}),i=o,n.lock(),n.trigger("drag")}};return r}),Uv}var Wv,mS;function GW(){return mS||(mS=1,Wv=function(t,e,r){var n=t,a=function(p){n=p},i=function(p){var y=p.getBoundingClientRect();return{top:y.top+document.documentElement.scrollTop,left:y.left+document.documentElement.scrollLeft}},o=document.createElement("canvas"),l=e.container(),u=o.getContext("2d");l.appendChild(o);var f=function(){o.height=0,o.width=0,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder};f();var c=function(){var p=e.zoom(),y=e.width(),C=e.height(),E=n.gridSpacing*p,v=e.pan(),x=v.x%E,w=v.y%E;u.strokeStyle=n.gridColor,u.lineWidth=n.lineWidth;var T='	<svg width="'+y+'" height="'+C+`" xmlns="http://www.w3.org/2000/svg">
	            <defs>
	                <pattern id="horizontalLines" width="`+E+'" height="'+E+`" patternUnits="userSpaceOnUse">
	                    <path d="M `+E+' 0 L 0 0 0 0" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	                <pattern id="verticalLines" width="`+E+'" height="'+E+`" patternUnits="userSpaceOnUse">
	                    <path d="M 0 0 L 0 0 0 `+E+'" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	            </defs>
	            <rect width="100%" height="100%" fill="url(#horizontalLines)" transform="translate(0, `+w+`)" />
	            <rect width="100%" height="100%" fill="url(#verticalLines)" transform="translate(`+x+`, 0)" />
	        </svg>
`,A=new Image;T=encodeURIComponent(T),A.onload=function(){h(),u.drawImage(A,0,0)},A.src="data:image/svg+xml,"+T},h=function(){var p=e.width(),y=e.height();u.clearRect(0,0,p,y)},g=r(function(){o.height=e.height(),o.width=e.width(),o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder,setTimeout(function(){o.height=e.height(),o.width=e.width();var p=i(o),y=i(l);o.style.top=-(p.top-y.top),o.style.left=-(p.left-y.left),c()},0)},250);return{initCanvas:g,resizeCanvas:g,resetCanvas:f,clearCanvas:h,drawGrid:c,changeOptions:a,sizeCanvas:c}}),Wv}var Vv,bS;function HW(){return bS||(bS=1,Vv=function(t){var e=function(i){t=Number(i.gridSpacing)},r=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};function n(i){var o=i.width(),l=i.height(),u=Math.round((o-t)/(t*2))*(t*2),f=Math.round((l-t)/(t*2))*(t*2);u=u>0?u+t:t,f=f>0?f+t:t,(o!=u||l!=f)&&(i.style({width:u,height:f}),r(i).resize={oldWidth:o,oldHeight:l})}function a(i){var o=r(i).resize;o&&i.style({width:o.oldWidth,height:o.oldHeight})}return{resizeNode:n,recoverNodeDimensions:a,changeOptions:e}}),Vv}var $v,wS;function UW(){return wS||(wS=1,$v=function(t,e,r,n,a,i,o,l){var u=function(U){return function(V){U(V)}},f={snapToGridDuringDrag:new u(y),resize:new u(v),snapToGridOnRelease:new u(A),drawGrid:new u(P),guidelines:new u(k),parentPadding:new u(ae)};function c(U,V){return function(X){var ee=X.target||X.cyTarget;(!ee.is(":parent")||V)&&U(ee)}}function h(U){return function(){t.nodes().not(":parent").each(function(V,X){typeof V=="number"&&(V=X),U(V)})}}function g(U){return function(){t.nodes().each(function(V,X){typeof V=="number"&&(V=X),U(V)})}}function p(U){return U?"on":"off"}function y(U){t[p(U)]("tapstart","node",n.onTapStartNode)}var C=h(r.resizeNode);c(r.resizeNode);var E=h(r.recoverNodeDimensions);function v(U){t[p(U)]("ready",C),U?C():E()}var x=g(e.snapNodesTopDown),w=g(e.recoverSnapNode),T=c(e.snapNode,!0);function A(U){t[p(U)]("add","node",T),t[p(U)]("ready",x),t[p(U)]("free","node",e.onFreeNode),U?x():w()}var _=function(){K.zoomDash&&a.drawGrid()},D=function(){K.panGrid&&a.drawGrid()};function P(U){t[p(U)]("zoom",_),t[p(U)]("pan",D),U?(a.initCanvas(),t.on("resize",a.resizeCanvas)):(a.clearCanvas(),a.resetCanvas(),t.off("resize",a.resizeCanvas))}var N=null,B=function(U){var V=U.target||U.cyTarget,X=V.selected()?U.cy.$(":selected"):V;N=i.getTopMostNodes(X.nodes()),i.lines.init(N)},G=function(U){this.id()==N.id()&&(i.lines.update(N),K.snapToAlignmentLocationDuringDrag&&i.lines.snapToAlignmentLocation(N))},F=function(U){K.snapToAlignmentLocationOnRelease&&i.lines.snapToAlignmentLocation(N),i.lines.destroy(),N=null},z=function(U){i.lines.resize()},M=function(U){i.getMousePos(U)},R=function(U){N&&(i.setMousePos(t.pan()),i.lines.init(N))};function k(U){U?(i.resizeCanvas(),t.on("tapstart","node",M),t.on("grab",B),t.on("pan",R),t.on("drag","node",G),t.on("free",F),window.addEventListener("resize",z)):(t.off("tapstart","node",M),t.off("grab",B),t.off("pan",R),t.off("drag","node",G),t.off("free",F),i.resetCanvas(),window.removeEventListener("resize",z))}var I=function(U){o.setPaddingOfParent(t.nodes(":parent"),U)},q=function(U){o.setPaddingOfParent(U,!0)};function ae(U){I(U),t[p(U)]("ready",I),t[p(U)]("add","node:parent",c(q,!0))}var re={},K,W={drawGrid:["gridSpacing","zoomDash","panGrid","gridStackOrder","gridColor","lineWidth","lineDash"],guidelines:["gridSpacing","guidelinesStackOrder","guidelinesTolerance","guidelinesStyle","distributionGuidelines","range","minDistRange","geometricGuidelineRange"],resize:["gridSpacing"],parentPadding:["gridSpacing","parentSpacing"],snapToGridOnRelease:["gridSpacing","snapToGridCenter"]};function Z(U){K=Object.extend({},U),U.guidelines=U.initPosAlignment||U.distributionGuidelines||U.geometricGuideline;for(var V in U)if(re[V]!=U[V])if(f.hasOwnProperty(V))f[V](U[V]);else for(var X in W){var ee=W[X];ee.indexOf(V)>=0&&(X=="drawGrid"&&(a.changeOptions(U),U.drawGrid&&a.resizeCanvas()),X=="snapToGridOnRelease"&&(e.changeOptions(U),U.snapToGridOnRelease&&x()),X=="guidelines"&&i.changeOptions(U),X=="resize"&&(r.changeOptions(U),U.resize&&C()),X=="parentPadding"&&o.changeOptions(U))}re=Object.extend({},re,U)}return{init:Z,syncWithOptions:Z}}),$v}var Yv,xS;function WW(){if(xS)return Yv;xS=1,Yv=E;var t=0,e=1;function r(v,x,w,T,A,_){this._color=v,this.key=x,this.value=w,this.left=T,this.right=A,this._count=_}function n(v){return new r(v._color,v.key,v.value,v.left,v.right,v._count)}function a(v,x){return new r(v,x.key,x.value,x.left,x.right,x._count)}function i(v){v._count=1+(v.left?v.left._count:0)+(v.right?v.right._count:0)}function o(v,x){this._compare=v,this.root=x}var l=o.prototype;Object.defineProperty(l,"keys",{get:function(){var v=[];return this.forEach(function(x,w){v.push(x)}),v}}),Object.defineProperty(l,"values",{get:function(){var v=[];return this.forEach(function(x,w){v.push(w)}),v}}),Object.defineProperty(l,"length",{get:function(){return this.root?this.root._count:0}}),l.insert=function(v,x){for(var w=this._compare,T=this.root,A=[],_=[];T;){var D=w(v,T.key);A.push(T),_.push(D),D<=0?T=T.left:T=T.right}A.push(new r(t,v,x,null,null,1));for(var P=A.length-2;P>=0;--P){var T=A[P];_[P]<=0?A[P]=new r(T._color,T.key,T.value,A[P+1],T.right,T._count+1):A[P]=new r(T._color,T.key,T.value,T.left,A[P+1],T._count+1)}for(var P=A.length-1;P>1;--P){var N=A[P-1],T=A[P];if(N._color===e||T._color===e)break;var B=A[P-2];if(B.left===N)if(N.left===T){var G=B.right;if(G&&G._color===t)N._color=e,B.right=a(e,G),B._color=t,P-=1;else{if(B._color=t,B.left=N.right,N._color=e,N.right=B,A[P-2]=N,A[P-1]=T,i(B),i(N),P>=3){var F=A[P-3];F.left===B?F.left=N:F.right=N}break}}else{var G=B.right;if(G&&G._color===t)N._color=e,B.right=a(e,G),B._color=t,P-=1;else{if(N.right=T.left,B._color=t,B.left=T.right,T._color=e,T.left=N,T.right=B,A[P-2]=T,A[P-1]=N,i(B),i(N),i(T),P>=3){var F=A[P-3];F.left===B?F.left=T:F.right=T}break}}else if(N.right===T){var G=B.left;if(G&&G._color===t)N._color=e,B.left=a(e,G),B._color=t,P-=1;else{if(B._color=t,B.right=N.left,N._color=e,N.left=B,A[P-2]=N,A[P-1]=T,i(B),i(N),P>=3){var F=A[P-3];F.right===B?F.right=N:F.left=N}break}}else{var G=B.left;if(G&&G._color===t)N._color=e,B.left=a(e,G),B._color=t,P-=1;else{if(N.left=T.right,B._color=t,B.right=T.left,T._color=e,T.right=N,T.left=B,A[P-2]=T,A[P-1]=N,i(B),i(N),i(T),P>=3){var F=A[P-3];F.right===B?F.right=T:F.left=T}break}}}return A[0]._color=e,new o(w,A[0])};function u(v,x){if(x.left){var w=u(v,x.left);if(w)return w}var w=v(x.key,x.value);if(w)return w;if(x.right)return u(v,x.right)}function f(v,x,w,T){var A=x(v,T.key);if(A<=0){if(T.left){var _=f(v,x,w,T.left);if(_)return _}var _=w(T.key,T.value);if(_)return _}if(T.right)return f(v,x,w,T.right)}function c(v,x,w,T,A){var _=w(v,A.key),D=w(x,A.key),P;if(_<=0&&(A.left&&(P=c(v,x,w,T,A.left),P)||D>0&&(P=T(A.key,A.value),P)))return P;if(D>0&&A.right)return c(v,x,w,T,A.right)}l.forEach=function(x,w,T){if(this.root)switch(arguments.length){case 1:return u(x,this.root);case 2:return f(w,this._compare,x,this.root);case 3:return this._compare(w,T)>=0?void 0:c(w,T,this._compare,x,this.root)}},Object.defineProperty(l,"begin",{get:function(){for(var v=[],x=this.root;x;)v.push(x),x=x.left;return new h(this,v)}}),Object.defineProperty(l,"end",{get:function(){for(var v=[],x=this.root;x;)v.push(x),x=x.right;return new h(this,v)}}),l.at=function(v){if(v<0)return new h(this,[]);for(var x=this.root,w=[];;){if(w.push(x),x.left){if(v<x.left._count){x=x.left;continue}v-=x.left._count}if(!v)return new h(this,w);if(v-=1,x.right){if(v>=x.right._count)break;x=x.right}else break}return new h(this,[])},l.ge=function(v){for(var x=this._compare,w=this.root,T=[],A=0;w;){var _=x(v,w.key);T.push(w),_<=0&&(A=T.length),_<=0?w=w.left:w=w.right}return T.length=A,new h(this,T)},l.gt=function(v){for(var x=this._compare,w=this.root,T=[],A=0;w;){var _=x(v,w.key);T.push(w),_<0&&(A=T.length),_<0?w=w.left:w=w.right}return T.length=A,new h(this,T)},l.lt=function(v){for(var x=this._compare,w=this.root,T=[],A=0;w;){var _=x(v,w.key);T.push(w),_>0&&(A=T.length),_<=0?w=w.left:w=w.right}return T.length=A,new h(this,T)},l.le=function(v){for(var x=this._compare,w=this.root,T=[],A=0;w;){var _=x(v,w.key);T.push(w),_>=0&&(A=T.length),_<0?w=w.left:w=w.right}return T.length=A,new h(this,T)},l.find=function(v){for(var x=this._compare,w=this.root,T=[];w;){var A=x(v,w.key);if(T.push(w),A===0)return new h(this,T);A<=0?w=w.left:w=w.right}return new h(this,[])},l.remove=function(v){var x=this.find(v);return x?x.remove():this},l.get=function(v){for(var x=this._compare,w=this.root;w;){var T=x(v,w.key);if(T===0)return w.value;T<=0?w=w.left:w=w.right}};function h(v,x){this.tree=v,this._stack=x}var g=h.prototype;Object.defineProperty(g,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(g,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),g.clone=function(){return new h(this.tree,this._stack.slice())};function p(v,x){v.key=x.key,v.value=x.value,v.left=x.left,v.right=x.right,v._color=x._color,v._count=x._count}function y(v){for(var x,w,T,A,_=v.length-1;_>=0;--_){if(x=v[_],_===0){x._color=e;return}if(w=v[_-1],w.left===x){if(T=w.right,T.right&&T.right._color===t){if(T=w.right=n(T),A=T.right=n(T.right),w.right=T.left,T.left=w,T.right=A,T._color=w._color,x._color=e,w._color=e,A._color=e,i(w),i(T),_>1){var D=v[_-2];D.left===w?D.left=T:D.right=T}v[_-1]=T;return}else if(T.left&&T.left._color===t){if(T=w.right=n(T),A=T.left=n(T.left),w.right=A.left,T.left=A.right,A.left=w,A.right=T,A._color=w._color,w._color=e,T._color=e,x._color=e,i(w),i(T),i(A),_>1){var D=v[_-2];D.left===w?D.left=A:D.right=A}v[_-1]=A;return}if(T._color===e)if(w._color===t){w._color=e,w.right=a(t,T);return}else{w.right=a(t,T);continue}else{if(T=n(T),w.right=T.left,T.left=w,T._color=w._color,w._color=t,i(w),i(T),_>1){var D=v[_-2];D.left===w?D.left=T:D.right=T}v[_-1]=T,v[_]=w,_+1<v.length?v[_+1]=x:v.push(x),_=_+2}}else{if(T=w.left,T.left&&T.left._color===t){if(T=w.left=n(T),A=T.left=n(T.left),w.left=T.right,T.right=w,T.left=A,T._color=w._color,x._color=e,w._color=e,A._color=e,i(w),i(T),_>1){var D=v[_-2];D.right===w?D.right=T:D.left=T}v[_-1]=T;return}else if(T.right&&T.right._color===t){if(T=w.left=n(T),A=T.right=n(T.right),w.left=A.right,T.right=A.left,A.right=w,A.left=T,A._color=w._color,w._color=e,T._color=e,x._color=e,i(w),i(T),i(A),_>1){var D=v[_-2];D.right===w?D.right=A:D.left=A}v[_-1]=A;return}if(T._color===e)if(w._color===t){w._color=e,w.left=a(t,T);return}else{w.left=a(t,T);continue}else{if(T=n(T),w.left=T.right,T.right=w,T._color=w._color,w._color=t,i(w),i(T),_>1){var D=v[_-2];D.right===w?D.right=T:D.left=T}v[_-1]=T,v[_]=w,_+1<v.length?v[_+1]=x:v.push(x),_=_+2}}}}g.remove=function(){var v=this._stack;if(v.length===0)return this.tree;var x=new Array(v.length),w=v[v.length-1];x[x.length-1]=new r(w._color,w.key,w.value,w.left,w.right,w._count);for(var T=v.length-2;T>=0;--T){var w=v[T];w.left===v[T+1]?x[T]=new r(w._color,w.key,w.value,x[T+1],w.right,w._count):x[T]=new r(w._color,w.key,w.value,w.left,x[T+1],w._count)}if(w=x[x.length-1],w.left&&w.right){var A=x.length;for(w=w.left;w.right;)x.push(w),w=w.right;var _=x[A-1];x.push(new r(w._color,_.key,_.value,w.left,w.right,w._count)),x[A-1].key=w.key,x[A-1].value=w.value;for(var T=x.length-2;T>=A;--T)w=x[T],x[T]=new r(w._color,w.key,w.value,w.left,x[T+1],w._count);x[A-1].left=x[A]}if(w=x[x.length-1],w._color===t){var D=x[x.length-2];D.left===w?D.left=null:D.right===w&&(D.right=null),x.pop();for(var T=0;T<x.length;++T)x[T]._count--;return new o(this.tree._compare,x[0])}else if(w.left||w.right){w.left?p(w,w.left):w.right&&p(w,w.right),w._color=e;for(var T=0;T<x.length-1;++T)x[T]._count--;return new o(this.tree._compare,x[0])}else{if(x.length===1)return new o(this.tree._compare,null);for(var T=0;T<x.length;++T)x[T]._count--;var P=x[x.length-2];y(x),P.left===w?P.left=null:P.right=null}return new o(this.tree._compare,x[0])},Object.defineProperty(g,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(g,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(g,"index",{get:function(){var v=0,x=this._stack;if(x.length===0){var w=this.tree.root;return w?w._count:0}else x[x.length-1].left&&(v=x[x.length-1].left._count);for(var T=x.length-2;T>=0;--T)x[T+1]===x[T].right&&(++v,x[T].left&&(v+=x[T].left._count));return v},enumerable:!0}),g.next=function(){var v=this._stack;if(v.length!==0){var x=v[v.length-1];if(x.right)for(x=x.right;x;)v.push(x),x=x.left;else for(v.pop();v.length>0&&v[v.length-1].right===x;)x=v[v.length-1],v.pop()}},Object.defineProperty(g,"hasNext",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].right)return!0;for(var x=v.length-1;x>0;--x)if(v[x-1].left===v[x])return!0;return!1}}),g.update=function(v){var x=this._stack;if(x.length===0)throw new Error("Can't update empty node!");var w=new Array(x.length),T=x[x.length-1];w[w.length-1]=new r(T._color,T.key,v,T.left,T.right,T._count);for(var A=x.length-2;A>=0;--A)T=x[A],T.left===x[A+1]?w[A]=new r(T._color,T.key,T.value,w[A+1],T.right,T._count):w[A]=new r(T._color,T.key,T.value,T.left,w[A+1],T._count);return new o(this.tree._compare,w[0])},g.prev=function(){var v=this._stack;if(v.length!==0){var x=v[v.length-1];if(x.left)for(x=x.left;x;)v.push(x),x=x.right;else for(v.pop();v.length>0&&v[v.length-1].left===x;)x=v[v.length-1],v.pop()}},Object.defineProperty(g,"hasPrev",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].left)return!0;for(var x=v.length-1;x>0;--x)if(v[x-1].right===v[x])return!0;return!1}});function C(v,x){return v<x?-1:v>x?1:0}function E(v){return new o(v||C,null)}return Yv}var Xv,CS;function VW(){return CS||(CS=1,Xv=function(t,e,r){var n=WW(),a=t,i=function(k){a=k,a.guidelinesTolerance==0&&(a.guidelinesTolerance=.001)},o=function(k){var I=k.getBoundingClientRect();return{top:I.top+document.documentElement.scrollTop,left:I.left+document.documentElement.scrollLeft}},l=r(function(){u(),f.height=e.height(),f.width=e.width(),f.style.position="absolute",f.style.top=0,f.style.left=0,f.style.zIndex=a.guidelinesStackOrder,setTimeout(function(){f.height=e.height(),f.width=e.width();var k=o(f),I=o(c);f.style.top=-(k.top-I.top),f.style.left=-(k.left-I.left)},0)},250),u=function(){var k=e.width(),I=e.height();h.clearRect(0,0,k,I)},f=document.createElement("canvas"),c=e.container(),h=f.getContext("2d");c.appendChild(f);var g=function(){f.height=0,f.width=0,f.style.position="absolute",f.style.top=0,f.style.left=0,f.style.zIndex=a.guidelinesStackOrder};g();var p=null,y=null,C,E,v={},x={},w={h:null,v:null};v.getDims=function(k){var I=k.renderedPosition(),q=k.renderedWidth(),ae=k.renderedHeight(),re={left:Number(k.renderedStyle("padding-left").replace("px","")),right:Number(k.renderedStyle("padding-right").replace("px","")),top:Number(k.renderedStyle("padding-top").replace("px","")),bottom:Number(k.renderedStyle("padding-bottom").replace("px",""))};return{horizontal:{center:I.x,left:Math.round(I.x-(re.left+q/2)),right:Math.round(I.x+(re.right+q/2))},vertical:{center:I.y,top:Math.round(I.y-(re.top+ae/2)),bottom:Math.round(I.y+(re.bottom+ae/2))}}},v.init=function(k){p=n(),y=n(),C||(x.x=e.pan("x"),x.y=e.pan("y"),C=k.renderedPosition());var I=e.nodes(":visible");E=k.union(k.ancestors()),E=E.union(k.descendants()),I.not(E).each(function(q,ae){typeof q=="number"&&(q=ae);var re=v.getDims(q);["left","center","right"].forEach(function(K){var W=re.horizontal[K];y.get(W)?y.get(W).push(q):y=y.insert(W,[q])}),["top","center","bottom"].forEach(function(K){var W=re.vertical[K];p.get(W)?p.get(W).push(q):p=p.insert(W,[q])})}),h.lineWidth=a.lineWidth,v.update(k)},v.destroy=function(){v.clear(),p=null,y=null,C=null,_={},w={h:null,v:null},R&&(R.unlock(),R=void 0)},v.clear=u,v.drawLine=function(k,I,q,ae){h.setLineDash(ae),h.beginPath(),h.moveTo(k.x,k.y),h.lineTo(I.x,I.y),h.strokeStyle=q,h.stroke()},v.drawArrow=function(k,I){I=="right"?(h.setLineDash([]),h.beginPath(),h.moveTo(k.x-5,k.y-5),h.lineTo(k.x,k.y),h.lineTo(k.x-5,k.y+5),h.stroke()):I=="left"?(h.setLineDash([]),h.beginPath(),h.moveTo(k.x+5,k.y-5),h.lineTo(k.x,k.y),h.lineTo(k.x+5,k.y+5),h.stroke()):I=="top"?(h.setLineDash([]),h.beginPath(),h.moveTo(k.x-5,k.y+5),h.lineTo(k.x,k.y),h.lineTo(k.x+5,k.y+5),h.stroke()):I=="bottom"&&(h.setLineDash([]),h.beginPath(),h.moveTo(k.x-5,k.y-5),h.lineTo(k.x,k.y),h.lineTo(k.x+5,k.y-5),h.stroke())},v.drawCross=function(k){h.setLineDash([]),h.beginPath(),h.moveTo(k.x-5,k.y+5),h.lineTo(k.x+5,k.y-5),h.moveTo(k.x-5,k.y-5),h.lineTo(k.x+5,k.y+5),h.stroke()};var T=function(k,I){for(var q=k[0],ae=v.getDims(q)[I].center,re=k[0],K=v.getDims(re)[I].center,W=0;W<k.length;W++){var Z=k[W];v.getDims(Z)[I].center<ae&&(ae=v.getDims(Z)[I].center,q=Z),v.getDims(Z)[I].center>K&&(K=v.getDims(Z)[I].center,re=Z)}if(I=="horizontal")var U=(ae+K)/2<v.getDims(k[1])[I].center?K+(.5*re.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():ae-(.5*q.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();else var U=(ae+K)/2<v.getDims(k[1])[I].center?K+(.5*re.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():ae-(.5*q.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();return U};v.horizontalDistribution=function(k){var I=null,q=null,ae=v.getDims(k),re=ae.horizontal.center,K=ae.vertical.center;if(y.forEach(function(U,V){for(var X=0;X<V.length;X++){var ee=V[X],se=v.getDims(ee);if(Math.abs(se.vertical.center-ae.vertical.center)<a.guidelinesStyle.range*e.zoom()&&se.horizontal.right==U&&ae.horizontal.left-se.horizontal.right>a.guidelinesStyle.minDistRange){var te=Math.round(2*re)-U;y.forEach(function(oe,le){for(var $=0;$<le.length;$++){var ne=le[$];Math.abs(v.getDims(ne).vertical.center-K)<a.guidelinesStyle.range*e.zoom()&&Math.abs(te-v.getDims(ne).horizontal.left)<2*a.guidelinesTolerance&&(I=ee,q=ne)}},te-a.guidelinesTolerance,te+a.guidelinesTolerance)}}},re-a.guidelinesStyle.range*e.zoom(),re),I){w.hd=re-(v.getDims(q).horizontal.left+v.getDims(I).horizontal.right)/2,(!a.geometricGuideline||w.h==null||Math.abs(w.h)>Math.abs(w.hd))&&(w.h=w.hd);var W=T([I,k,q],"vertical");v.drawLine({x:v.getDims(I).horizontal.right,y:W},{x:ae.horizontal.left,y:W},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(q).horizontal.left,y:W},{x:ae.horizontal.right,y:W},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(I).horizontal.right,y:W},{x:v.getDims(I).horizontal.right,y:v.getDims(I).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(q).horizontal.left,y:W},{x:v.getDims(q).horizontal.left,y:v.getDims(q).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:ae.horizontal.left,y:W},{x:ae.horizontal.left,y:K},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:ae.horizontal.right,y:W},{x:ae.horizontal.right,y:K},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(I).horizontal.right,y:W},"left"),v.drawArrow({x:ae.horizontal.left,y:W},"right"),v.drawArrow({x:ae.horizontal.right,y:W},"left"),v.drawArrow({x:v.getDims(q).horizontal.left,y:W},"right")}else{var Z=v.horizontalDistributionNext(k,"left");Z||v.horizontalDistributionNext(k,"right")}},v.verticalDistribution=function(k){var I=null,q=null,ae=v.getDims(k),re=ae.horizontal.center,K=ae.vertical.center;if(p.forEach(function(U,V){for(var X=0;X<V.length;X++){var ee=V[X],se=v.getDims(ee);if(Math.abs(se.horizontal.center-ae.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&se.vertical.bottom==U&&ae.vertical.top-se.vertical.bottom>a.guidelinesStyle.minDistRange){var te=Math.round(2*K-U);p.forEach(function(oe,le){for(var $=0;$<le.length;$++){var ne=le[$];Math.abs(v.getDims(ne).horizontal.center-re)<a.guidelinesStyle.range*e.zoom()&&Math.abs(te-v.getDims(ne).vertical.top)<2*a.guidelinesTolerance&&(I=ee,q=ne)}},te-a.guidelinesTolerance,te+a.guidelinesTolerance)}}},K-a.guidelinesStyle.range*e.zoom(),K),I){w.vd=K-(v.getDims(I).vertical.bottom+v.getDims(q).vertical.top)/2,(!a.geometricGuideline||w.v==null||Math.abs(w.v)>Math.abs(w.vd))&&(w.v=w.vd);var W=T([I,k,q],"horizontal");v.drawLine({y:v.getDims(I).vertical.bottom,x:W},{y:ae.vertical.top,x:W},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(q).vertical.top,x:W},{y:ae.vertical.bottom,x:W},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(I).vertical.bottom,x:W},{y:v.getDims(I).vertical.bottom,x:v.getDims(I).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(q).vertical.top,x:W},{y:v.getDims(q).vertical.top,x:v.getDims(q).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:ae.vertical.bottom,x:W},{y:ae.vertical.bottom,x:re},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({y:ae.vertical.top,x:W},{y:ae.vertical.top,x:re},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawArrow({x:W,y:v.getDims(I).vertical.bottom},"top"),v.drawArrow({x:W,y:ae.vertical.top},"bottom"),v.drawArrow({x:W,y:v.getDims(q).vertical.top},"bottom"),v.drawArrow({x:W,y:ae.vertical.bottom},"top")}else{var Z=v.verticalDistributionNext(k,"below");Z||v.verticalDistributionNext(k,"above")}},v.searchForLine=function(k,I){var q,ae,re,K,W,Z,U,V=v.getDims(I)[k],X=Number.MAX_SAFE_INTEGER;k=="horizontal"?(Z=y,K="y",W="x",w.h=null):(Z=p,K="x",W="y",w.v=null),re=I.renderedPosition(K);for(var ee in V)if(q=V[ee],Z.forEach(function(se,te){for(var oe=0;oe<te.length;oe++){var le=te[oe];if(a.centerToEdgeAlignment||ee!="center"&&le.renderedPosition(W)!=se||ee=="center"&&le.renderedPosition(W)==se){var $=Math.abs(re-le.renderedPosition(K));$<X&&$<a.guidelinesStyle.geometricGuidelineRange*e.zoom()&&(ae=le,X=$,U=se)}}},q-Number(a.guidelinesTolerance),q+Number(a.guidelinesTolerance)),ae){X=v.getDims(I)[k][ee],k=="horizontal"?(w.h=X-U,v.drawLine({x:X,y:I.renderedPosition("y")},{x:X,y:ae.renderedPosition("y")},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash)):(w.v=X-U,v.drawLine({x:I.renderedPosition("x"),y:X},{x:ae.renderedPosition("x"),y:X},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash));break}},v.horizontalDistributionNext=function(k,I){var q=null,ae=null,re=v.getDims(k),K=re.horizontal.center,W=re.vertical.center,Z="right",U="left",V=K;if(I=="left"){Z="left",U="right";var V=K-a.guidelinesStyle.range*e.zoom()}var X={left:function(ee,se){return se-ee>a.guidelinesStyle.minDistRange},right:function(ee,se){return ee-se>a.guidelinesStyle.minDistRange}};return y.forEach(function(ee,se){for(var te=0;te<se.length;te++){var oe=se[te],le=v.getDims(oe);if(Math.abs(le.vertical.center-re.vertical.center)<a.guidelinesStyle.range*e.zoom()&&le.horizontal[U]==ee&&X[I](le.horizontal[U],re.horizontal[Z])){var $=le.horizontal[Z]-(re.horizontal[Z]-ee);y.forEach(function(ne,ie){for(var ue=0;ue<ie.length;ue++){var me=ie[ue];Math.abs(v.getDims(me).vertical.center-W)<a.guidelinesStyle.range*e.zoom()&&Math.abs($-v.getDims(me).horizontal[U])<2*a.guidelinesTolerance&&(q=oe,ae=me)}},$-a.guidelinesTolerance,$+a.guidelinesTolerance)}}},V,V+a.guidelinesStyle.range*e.zoom()),q?(w.hd=v.getDims(k).horizontal[Z]-v.getDims(q).horizontal[U]-(v.getDims(q).horizontal[Z]-v.getDims(ae).horizontal[U]),(!a.geometricGuideline||w.h==null||Math.abs(w.h)>Math.abs(w.hd))&&(w.h=w.hd),v.drawDH(k,q,ae,I),!0):(a.geometricGuideline||(w.h=null),!1)},v.drawDH=function(k,I,q,ae){var re=v.getDims(k).vertical.center,K="right",W="left";ae=="left"&&(K="left",W="right");var Z=T([I,k,q],"vertical");v.drawLine({x:v.getDims(I).horizontal[W],y:Z},{x:v.getDims(k).horizontal[K],y:Z},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(k).horizontal[K],y:Z},{x:v.getDims(k).horizontal[K],y:re},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(q).horizontal[W],y:Z},{x:v.getDims(I).horizontal[K],y:Z},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(q).horizontal[W],y:Z},{x:v.getDims(q).horizontal[W],y:v.getDims(q).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(I).horizontal[W],y:Z},{x:v.getDims(I).horizontal[W],y:v.getDims(I).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(I).horizontal[K],y:Z},{x:v.getDims(I).horizontal[K],y:v.getDims(I).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(k).horizontal[K],y:Z},W),v.drawArrow({x:v.getDims(I).horizontal[W],y:Z},K),v.drawArrow({x:v.getDims(I).horizontal[K],y:Z},W),v.drawArrow({x:v.getDims(q).horizontal[W],y:Z},K)},v.verticalDistributionNext=function(k,I){var q=null,ae=null,re=v.getDims(k),K=re.horizontal.center,W=re.vertical.center,Z="top",U="bottom",V=W-a.guidelinesStyle.range*e.zoom();I=="above"&&(Z="bottom",U="top",V=W);var X={below:function(ee,se){return se-ee>a.guidelinesStyle.minDistRange},above:function(ee,se){return ee-se>a.guidelinesStyle.minDistRange}};return p.forEach(function(ee,se){for(var te=0;te<se.length;te++){var oe=se[te],le=v.getDims(oe);if(Math.abs(le.horizontal.center-re.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&le.vertical[U]==ee&&X[I](le.vertical[U],re.vertical[Z])){var $=le.vertical[Z]-(re.vertical[Z]-ee);p.forEach(function(ne,ie){for(var ue=0;ue<ie.length;ue++){var me=ie[ue];Math.abs(v.getDims(me).horizontal.center-K)<a.guidelinesStyle.range*e.zoom()&&Math.abs($-v.getDims(me).vertical[U])<2*a.guidelinesTolerance&&(q=oe,ae=me)}},$-a.guidelinesTolerance,$+a.guidelinesTolerance)}}},V,V+a.guidelinesStyle.range*e.zoom()),q?(w.vd=v.getDims(k).vertical[Z]-v.getDims(q).vertical[U]-(v.getDims(q).vertical[Z]-v.getDims(ae).vertical[U]),(!a.geometricGuideline||w.v==null||Math.abs(w.v)>Math.abs(w.vd))&&(w.v=w.vd),v.drawDV(k,q,ae,I),!0):(a.geometricGuideline||(w.v=null),!1)},v.drawDV=function(k,I,q,ae){var re=v.getDims(k),K=re.horizontal.center,W="top",Z="bottom";ae=="above"&&(W="bottom",Z="top");var U=T([I,k,q],"horizontal");v.drawLine({x:U,y:re.vertical[W]},{x:U,y:v.getDims(I).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:U,y:v.getDims(I).vertical[W]},{x:U,y:v.getDims(q).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:K,y:re.vertical[W]},{x:U,y:re.vertical[W]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(I).horizontal.center,y:v.getDims(I).vertical[Z]},{x:U,y:v.getDims(I).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(I).horizontal.center,y:v.getDims(I).vertical[W]},{x:U,y:v.getDims(I).vertical[W]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawLine({x:U,y:v.getDims(q).vertical[Z]},{x:v.getDims(q).horizontal.center,y:v.getDims(q).vertical[Z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),v.drawArrow({x:U,y:re.vertical[W]},Z),v.drawArrow({x:U,y:v.getDims(I).vertical[Z]},W),v.drawArrow({x:U,y:v.getDims(I).vertical[W]},Z),v.drawArrow({x:U,y:v.getDims(q).vertical[Z]},W)},v.update=function(k){v.clear(),a.initPosAlignment&&B(k),k.each(function(I,q){typeof I=="number"&&(I=q),a.geometricGuideline&&(v.searchForLine("horizontal",I),v.searchForLine("vertical",I)),a.distributionGuidelines&&(v.horizontalDistribution(I),v.verticalDistribution(I))})},v.resize=function(){l()};function A(k){for(var I={},q=0;q<k.length;q++)I[k[q].id()]=!0;var ae=k.filter(function(re,K){typeof re=="number"&&(re=K);for(var W=re.parent()[0];W!=null;){if(I[W.id()])return!1;W=W.parent()[0]}return!0});return ae}var _={},D={},P=function(k){_=k.renderedPosition||k.cyRenderedPosition,D.x=_.x,D.y=_.y},N=function(k){D.x+=k.x-x.x,D.y+=k.y-x.y,x.x=k.x,x.y=k.y},B=function(k){var I=k.renderedPosition();Math.abs(C.y-I.y)<a.guidelinesTolerance?(v.drawLine({x:D.x,y:_.y},{x:I.x,y:_.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),_.y==D.y?v.drawCross(D):v.drawCross(_)):Math.abs(C.x-I.x)<a.guidelinesTolerance&&(v.drawLine({x:_.x,y:D.y},{x:_.x,y:I.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),_.x==D.x?v.drawCross(D):v.drawCross(_))};function G(k,I){var q=A(I),ae=q.union(q.descendants());ae.filter(":childless").forEach(function(re,K){typeof re=="number"&&(re=K);var W={x:k.x+re.renderedPosition("x"),y:k.y+re.renderedPosition("y")};re.renderedPosition(W)})}var F;e.on("tapstart","node",function(){F=this});var z,M={x:0,y:0};e.on("mousemove",function(k){z=k.renderedPosition||k.cyRenderedPosition,R&&R.each(function(I,q){if(typeof I=="number"&&(I=q),I.locked()&&(Math.abs(z.x-M.x)>2*a.guidelinesTolerance||Math.abs(z.y-M.y)>2*a.guidelinesTolerance)){I.unlock();var ae={};ae.x=z.x-F.renderedPosition("x"),ae.y=z.y-F.renderedPosition("y"),G(ae,I)}})});var R;return v.snapToAlignmentLocation=function(k){R=k,k.each(function(I,q){typeof I=="number"&&(I=q);var ae=I.renderedPosition();w.h&&(M=z,ae.x-=w.h,I.renderedPosition(ae)),w.v&&(M=z,ae.y-=w.v,I.renderedPosition(ae)),(w.v||w.h)&&(w.h=null,w.v=null,R.lock())}),v.update(k)},{changeOptions:i,lines:v,getTopMostNodes:A,getMousePos:P,setMousePos:N,resizeCanvas:l,resetCanvas:g}}),Xv}var Kv,ES;function $W(){return ES||(ES=1,Kv=function(t,e){var r=t,n="_gridParentPadding",a;function i(){e.style().selector("."+n).style("compound-sizing-wrt-labels","exclude").style("padding-left",a).style("padding-right",a).style("padding-top",a).style("padding-bottom",a).update()}function o(u){r=u,a=r.parentSpacing<0?r.gridSpacing:r.parentSpacing,i()}function l(u,f){f?u.addClass(n):u.removeClass(n)}return{changeOptions:o,setPaddingOfParent:l}}),Kv}var jv,TS;function YW(){return TS||(TS=1,jv=function(t,e,r){function n(u,f,c){var h=u.union(u.descendants());h.filter(":childless").positions(function(g,p){typeof g=="number"&&(g=p);var y=g.position();return{x:y.x+f,y:y.y+c}})}function a(u){for(var f={},c=0;c<u.length;c++)f[u[c].id()]=!0;var h=u.filter(function(g,p){typeof g=="number"&&(g=p);for(var y=g.parent()[0];y!=null;){if(f[y.id()])return!1;y=y.parent()[0]}return!0});return h}if(r||t("collection","align",function(u,f,c){var h=a(this.nodes(":visible")),g=c||h[0];h=h.not(g),u=u||"none",f=f||"none";var p=0,y=0;f=="left"?p=-1:f=="right"&&(p=1),u=="top"?y=-1:u=="bottom"&&(y=1);for(var C=0;C<h.length;C++){var E=h[C],v=Object.assign({},E.position()),x=Object.assign({},E.position());f!="none"&&(x.x=g.position("x")+p*(g.outerWidth()-E.outerWidth())/2),u!="none"&&(x.y=g.position("y")+y*(g.outerHeight()-E.outerHeight())/2),n(E,x.x-v.x,x.y-v.y)}return this}),e.undoRedo){let u=function(){for(var c={},h=e.nodes(),g=0;g<h.length;g++){var p=h[g];c[p.id()]={x:p.position("x"),y:p.position("y")}}return c},f=function(c){var h={};return e.nodes().not(":parent").positions(function(g,p){typeof g=="number"&&(g=p),h[g.id()]={x:g.position("x"),y:g.position("y")};var y=c[g.id()];return{x:y.x,y:y.y}}),h};var o=u,l=f,i=e.undoRedo(null,!0);i.action("align",function(c){var h;return c.firstTime?(h=u(),c.nodes.align(c.horizontal,c.vertical,c.alignTo)):h=f(c),h},function(c){return f(c)})}}),jv}var Zv,SS;function XW(){if(SS)return Zv;SS=1;var t=function(){var e="Expected a function",r=Math.max,n=Date.now,a=n||function(){return new Date().getTime()};function i(l,u,f){var c,h,g,p,y,C,E,v=0,x=!1,w=!0;if(typeof l!="function")throw new TypeError(e);if(u=u<0?0:+u||0,f===!0){var T=!0;w=!1}else o(f)&&(T=!!f.leading,x="maxWait"in f&&r(+f.maxWait||0,u),w="trailing"in f?!!f.trailing:w);function A(){C&&clearTimeout(C),h&&clearTimeout(h),v=0,h=C=E=void 0}function _(B,G){G&&clearTimeout(G),h=C=E=void 0,B&&(v=a(),g=l.apply(y,c),!C&&!h&&(c=y=void 0))}function D(){var B=u-(a()-p);B<=0||B>u?_(E,h):C=setTimeout(D,B)}function P(){_(w,C)}function N(){if(c=arguments,p=a(),y=this,E=w&&(C||!T),x===!1)var B=T&&!C;else{!h&&!T&&(v=p);var G=x-(p-v),F=G<=0||G>x;F?(h&&(h=clearTimeout(h)),v=p,g=l.apply(y,c)):h||(h=setTimeout(P,G))}return F&&C?C=clearTimeout(C):!C&&u!==x&&(C=setTimeout(D,u)),B&&(F=!0,g=l.apply(y,c)),F&&!C&&!h&&(c=y=void 0),g}return N.cancel=A,N}function o(l){var u=typeof l;return!!l&&(u=="object"||u=="function")}return i}();return Zv=t,Zv}var AS;function KW(){return AS||(AS=1,function(t){(function(){var e=function(r){if(!r)return;BW();var n=!1,a={snapToGridOnRelease:!0,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!1,geometricGuideline:!1,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:20,snapToGridCenter:!0,zoomDash:!0,panGrid:!1,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1},i=qW(),o=zW(),l=GW(),u=HW(),f=UW(),c=VW(),h=$W(),g=YW(),p=XW();function y(C){return C.scratch("_gridGuide")||C.scratch("_gridGuide",{}),C.scratch("_gridGuide")}r("core","gridGuide",function(C){var E=this,v=y(E),x=Object.extend({},v.options||a,C);if(v.options=x,v.initialized){var D=v.eventsController;D.syncWithOptions(x)}else{var w,T,A,_,D,P,N;w=i(E,x.gridSpacing,x.snapToGridCenter),T=u(x.gridSpacing),A=o(E,w),_=l(x,E,p),P=c(x,E,p),N=h(x,E),D=f(E,w,T,A,_,P,N,x),g(r,E,n),n=!0,D.init(x),v.initialized=!0,v.eventsController=D}return this})};t.exports&&(t.exports=e),typeof cytoscape<"u"&&e(cytoscape)})()}(Gv)),Gv.exports}var jW=KW();const ZW=To(jW);var Rf={exports:{}},QW=Rf.exports,LS;function JW(){return LS||(LS=1,function(t,e){(function(r,n){t.exports=n()})(QW,function(){return(()=>{var r={621:(i,o,l)=>{function u(W,Z){(Z==null||Z>W.length)&&(Z=W.length);for(var U=0,V=new Array(Z);U<Z;U++)V[U]=W[U];return V}function f(W,Z){var U={};for(var V in W)U[V]=W[V];for(var X in Z)U[X]instanceof Array?U[X]=U[X].concat(Z[X]):U[X]=Z[X];return U}function c(W){for(var Z="",U=0;U<W.length;U++)Z+=W[U],U!==W.length-1&&(Z+=" ");return Z}function h(W,Z,U){U?W.setAttribute(Z,""):W.removeAttribute(Z)}function g(W,Z,U){customElements.get(W)===void 0&&customElements.define(W,Z,{extends:U})}l.r(o),l.d(o,{contextMenus:()=>K});var p="cy-context-menus-divider",y={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function C(W){return(C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z})(W)}function E(W,Z){var U;if(typeof Symbol>"u"||W[Symbol.iterator]==null){if(Array.isArray(W)||(U=function(oe,le){if(oe){if(typeof oe=="string")return v(oe,le);var $=Object.prototype.toString.call(oe).slice(8,-1);return $==="Object"&&oe.constructor&&($=oe.constructor.name),$==="Map"||$==="Set"?Array.from(oe):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?v(oe,le):void 0}}(W))||Z){U&&(W=U);var V=0,X=function(){};return{s:X,n:function(){return V>=W.length?{done:!0}:{done:!1,value:W[V++]}},e:function(oe){throw oe},f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ee,se=!0,te=!1;return{s:function(){U=W[Symbol.iterator]()},n:function(){var oe=U.next();return se=oe.done,oe},e:function(oe){te=!0,ee=oe},f:function(){try{se||U.return==null||U.return()}finally{if(te)throw ee}}}}function v(W,Z){(Z==null||Z>W.length)&&(Z=W.length);for(var U=0,V=new Array(Z);U<Z;U++)V[U]=W[U];return V}function x(W,Z){if(!(W instanceof Z))throw new TypeError("Cannot call a class as a function")}function w(W,Z){for(var U=0;U<Z.length;U++){var V=Z[U];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(W,V.key,V)}}function T(W,Z,U){return Z&&w(W.prototype,Z),U&&w(W,U),W}function A(W,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(Z&&Z.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),Z&&z(W,Z)}function _(W){var Z=F();return function(){var U,V=M(W);if(Z){var X=M(this).constructor;U=Reflect.construct(V,arguments,X)}else U=V.apply(this,arguments);return D(this,U)}}function D(W,Z){return!Z||C(Z)!=="object"&&typeof Z!="function"?P(W):Z}function P(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}function N(W,Z,U){return(N=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(V,X,ee){var se=function(oe,le){for(;!Object.prototype.hasOwnProperty.call(oe,le)&&(oe=M(oe))!==null;);return oe}(V,X);if(se){var te=Object.getOwnPropertyDescriptor(se,X);return te.get?te.get.call(ee):te.value}})(W,Z,U||W)}function B(W){var Z=typeof Map=="function"?new Map:void 0;return(B=function(U){if(U===null||(V=U,Function.toString.call(V).indexOf("[native code]")===-1))return U;var V;if(typeof U!="function")throw new TypeError("Super expression must either be null or a function");if(Z!==void 0){if(Z.has(U))return Z.get(U);Z.set(U,X)}function X(){return G(U,arguments,M(this).constructor)}return X.prototype=Object.create(U.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),z(X,U)})(W)}function G(W,Z,U){return(G=F()?Reflect.construct:function(V,X,ee){var se=[null];se.push.apply(se,X);var te=new(Function.bind.apply(V,se));return ee&&z(te,ee.prototype),te}).apply(null,arguments)}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function z(W,Z){return(z=Object.setPrototypeOf||function(U,V){return U.__proto__=V,U})(W,Z)}function M(W){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(Z){return Z.__proto__||Object.getPrototypeOf(Z)})(W)}function R(W){W.preventDefault(),W.stopPropagation()}var k=function(W){A(U,W);var Z=_(U);function U(V,X,ee){var se,te,oe,le,$,ne,ie,ue,me,ge;x(this,U),N((te=P(ge=Z.call(this)),M(U.prototype)),"setAttribute",te).call(te,"id",V.id);var Ee=ge._getMenuItemClassStr(ee.cxtMenuItemClasses,V.hasTrailingDivider);if(N((oe=P(ge),M(U.prototype)),"setAttribute",oe).call(oe,"class",Ee),N((le=P(ge),M(U.prototype)),"setAttribute",le).call(le,"title",(se=V.tooltipText)!==null&&se!==void 0?se:""),V.disabled&&h(P(ge),"disabled",!0),V.image){var he=document.createElement("img");he.src=V.image.src,he.width=V.image.width,he.height=V.image.height,he.style.position="absolute",he.style.top=V.image.y+"px",he.style.left=V.image.x+"px",N(($=P(ge),M(U.prototype)),"appendChild",$).call($,he)}if(ge.innerHTML+=V.content,ge.onMenuItemClick=X,ge.data={},ge.clickFns=[],ge.selector=V.selector,ge.hasTrailingDivider=V.hasTrailingDivider,ge.show=V.show===void 0||V.show,ge.coreAsWell=V.coreAsWell||!1,ge.scratchpad=ee,V.onClickFunction===void 0&&V.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return ge.onClickFunction=V.onClickFunction,V.submenu instanceof Array&&ge._createSubmenu(V.submenu),N((ne=P(ge),M(U.prototype)),"addEventListener",ne).call(ne,"mousedown",R),N((ie=P(ge),M(U.prototype)),"addEventListener",ie).call(ie,"mouseup",R),N((ue=P(ge),M(U.prototype)),"addEventListener",ue).call(ue,"touchstart",R),N((me=P(ge),M(U.prototype)),"addEventListener",me).call(me,"touchend",R),ge}return T(U,[{key:"bindOnClickFunction",value:function(V){this.clickFns.push(V),N(M(U.prototype),"addEventListener",this).call(this,"click",V)}},{key:"unbindOnClickFunctions",value:function(){var V,X=E(this.clickFns);try{for(X.s();!(V=X.n()).done;){var ee=V.value;N(M(U.prototype),"removeEventListener",this).call(this,"click",ee)}}catch(se){X.e(se)}finally{X.f()}this.clickFns=[]}},{key:"enable",value:function(){h(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){h(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(V){this.hasTrailingDivider=V}},{key:"hasSubmenu",value:function(){return this.submenu instanceof I}},{key:"appendSubmenuItem",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(V,X)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(V){var X=this.getBoundingClientRect(),ee=function($){$.style.opacity="0",$.style.display="block";var ne=$.getBoundingClientRect();return $.style.opacity="1",$.style.display="none",ne}(this.submenu),se=X.right+ee.width>window.innerWidth,te=X.top+ee.height>window.innerHeight;se||te?se&&!te?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):se&&te?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var oe=Array.from(this.submenu.children).filter(function($){if($ instanceof U)return $.isVisible()}),le=oe.length;oe.forEach(function($,ne){$ instanceof U&&(ne<le-1&&$.getHasTrailingDivider()?$.classList.add(p):$.getHasTrailingDivider()&&$.classList.remove(p))})}},{key:"_onMouseLeave",value:function(V){var X,ee,se,te,oe;X={x:V.clientX,y:V.clientY},ee=this.submenu,te=X.y,(se=X.x)>=(oe=ee.getBoundingClientRect()).left&&se<=oe.right&&te>=oe.top&&te<=oe.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new I(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var X,ee=E(V);try{for(ee.s();!(X=ee.n()).done;){var se=X.value,te=new U(se,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(te)}}catch(oe){ee.e(oe)}finally{ee.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(V,X){return X?V+" "+p:V}}],[{key:"define",value:function(){g("ctx-menu-item",U,"button")}}]),U}(B(HTMLButtonElement)),I=function(W){A(U,W);var Z=_(U);function U(V,X){var ee,se;return x(this,U),N((ee=P(se=Z.call(this)),M(U.prototype)),"setAttribute",ee).call(ee,"class",X.cxtMenuClasses),se.style.position="absolute",se.onMenuItemClick=V,se.scratchpad=X,se}return T(U,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var V,X=E(this.children);try{for(X.s();!(V=X.n()).done;){var ee=V.value;ee instanceof HTMLElement?ee.style.display="none":console.warn("".concat(ee," is not a HTMLElement"))}}catch(se){X.e(se)}finally{X.f()}}},{key:"hideSubmenus",value:function(){var V,X=E(this.children);try{for(X.s();!(V=X.n()).done;){var ee=V.value;ee instanceof k&&ee.submenu&&ee.submenu.hide()}}catch(se){X.e(se)}finally{X.f()}}},{key:"appendMenuItem",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(X!==void 0){if(X.parentNode!==this)throw new Error("The item with id='".concat(X.id,"' is not a child of the context menu"));this.insertBefore(V,X)}else this.appendChild(V);V.isClickable()&&this._performBindings(V)}},{key:"moveBefore",value:function(V,X){if(V.parentNode!==this)throw new Error("The item with id='".concat(V.id,"' is not a child of context menu"));if(X.parentNode!==this)throw new Error("The item with id='".concat(X.id,"' is not a child of context menu"));this.removeChild(V),this.insertBefore(V,X)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var V=this.lastChild;V instanceof k?this._removeImmediateMenuItem(V):(console.warn("Found non menu item in the context menu: ",V),this.removeChild(V))}}},{key:"_removeImmediateMenuItem",value:function(V){if(!this._detachImmediateMenuItem(V))throw new Error("menu item(id=".concat(V.id,") is not in the context menu"));V.detachSubmenu(),V.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(V){if(V.parentNode===this){if(this.removeChild(V),this.children.length<=0){var X=this.parentNode;X instanceof k&&X.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(V){var X=this._bindOnClick(V.onClickFunction);V.bindOnClickFunction(X),V.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(V){var X=this;return function(){var ee=X.scratchpad.currentCyEvent;V(ee)}}}],[{key:"define",value:function(){g("menu-item-list",U,"div")}}]),U}(B(HTMLDivElement)),q=function(W){A(U,W);var Z=_(U);function U(V,X){var ee;return x(this,U),(ee=Z.call(this,V,X)).onMenuItemClick=function(se){R(se),ee.hide(),V()},ee}return T(U,[{key:"removeMenuItem",value:function(V){var X=V.parentElement;X instanceof I&&this.contains(X)&&X._removeImmediateMenuItem(V)}},{key:"appendMenuItem",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(V.id),N(M(U.prototype),"appendMenuItem",this).call(this,V,X)}},{key:"insertMenuItem",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=X.before,se=X.parent;if(this.ensureDoesntContain(V.id),ee!==void 0){if(!this.contains(ee))throw new Error("before(id=".concat(ee.id,") is not in the context menu"));var te=ee.parentNode;if(!(te instanceof I))throw new Error("Parent of before(id=".concat(ee.id,") is not a submenu"));te.appendMenuItem(V,ee)}else if(se!==void 0){if(!this.contains(se))throw new Error("parent(id=".concat(se.id,") is not a descendant of the context menu"));se.appendSubmenuItem(V)}else this.appendMenuItem(V)}},{key:"moveBefore",value:function(V,X){var ee=V.parentElement;if(!this.contains(ee))throw new Error("parent(id=".concat(ee.id,") is not in the contex menu"));if(!this.contains(X))throw new Error("before(id=".concat(X.id,") is not in the context menu"));ee.removeChild(V),this.insertMenuItem(V,{before:X})}},{key:"moveToSubmenu",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,se=V.parentElement;if(!(se instanceof I))throw new Error("current parent(id=".concat(se.id,") is not a submenu"));if(!this.contains(se))throw new Error("parent of the menu item(id=".concat(se.id,") is not in the context menu"));if(X!==null){if(!this.contains(X))throw new Error("parent(id=".concat(X.id,") is not in the context menu"));se._detachImmediateMenuItem(V),X.appendSubmenuItem(V)}else ee!==null&&(V.selector=ee.selector,V.coreAsWell=ee.coreAsWell),se._detachImmediateMenuItem(V),this.appendMenuItem(V)}},{key:"ensureDoesntContain",value:function(V){var X=document.getElementById(V);if(X!==void 0&&this.contains(X))throw new Error("There is already an element with id=".concat(V," in the context menu"))}},{key:"ensureContains",value:function(V){var X=document.getElementById(V);if(X==null||X==null||!this.contains(X))throw new Error("An element with id '".concat(V,"' does not exist!"))}}],[{key:"define",value:function(){g("ctx-menu",U,"div")}}]),U}(I);function ae(W,Z){var U;if(typeof Symbol>"u"||W[Symbol.iterator]==null){if(Array.isArray(W)||(U=function(oe,le){if(oe){if(typeof oe=="string")return re(oe,le);var $=Object.prototype.toString.call(oe).slice(8,-1);return $==="Object"&&oe.constructor&&($=oe.constructor.name),$==="Map"||$==="Set"?Array.from(oe):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?re(oe,le):void 0}}(W))||Z){U&&(W=U);var V=0,X=function(){};return{s:X,n:function(){return V>=W.length?{done:!0}:{done:!1,value:W[V++]}},e:function(oe){throw oe},f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ee,se=!0,te=!1;return{s:function(){U=W[Symbol.iterator]()},n:function(){var oe=U.next();return se=oe.done,oe},e:function(oe){te=!0,ee=oe},f:function(){try{se||U.return==null||U.return()}finally{if(te)throw ee}}}}function re(W,Z){(Z==null||Z>W.length)&&(Z=W.length);for(var U=0,V=new Array(Z);U<Z;U++)V[U]=W[U];return V}function K(W){var Z=this;Z.scratch("cycontextmenus")||Z.scratch("cycontextmenus",{});var U,V,X=function(he){return Z.scratch("cycontextmenus")[he]},ee=function(he,de){return Z.scratch("cycontextmenus")[he]=de},se=X("options"),te=X("cxtMenu"),oe=function(he){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,be=$(he);if(de!==void 0){var De=ie(de);te.insertMenuItem(be,{parent:De})}else te.insertMenuItem(be)},le=function(he){for(var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,be=0;be<he.length;be++)oe(he[be],de)},$=function(he){var de=Z.scratch("cycontextmenus");return new k(he,te.onMenuItemClick,de)},ne=function(){X("active")&&(te.removeAllMenuItems(),Z.off("tapstart",X("eventCyTapStart")),Z.off(se.evtType,X("onCxttap")),Z.off("viewport",X("onViewport")),document.removeEventListener("mouseup",X("hideOnNonCyClick")),te.parentNode.removeChild(te),te=void 0,ee("cxtMenu",void 0),ee("active",!1),ee("anyVisibleChild",!1),ee("onCxttap",void 0),ee("onViewport",void 0),ee("hideOnNonCyClick",void 0))},ie=function(he){var de=document.getElementById(he);if(de instanceof k)return de;throw new Error("The item with id=".concat(he," is not a menu item"))},ue=function(){var he,de=!1,be=ae(te.children);try{for(be.s();!(he=be.n()).done;){var De=he.value;if(De instanceof k&&De.show&&De.style.display!="none"){de=!0;break}}}catch(Se){be.e(Se)}finally{be.f()}de?te.display():te.hide()};if(W!=="get"){k.define(),I.define(),q.define(),se=f(y,W),ee("options",se),X("active")&&ne(),ee("active",!0),ee("submenuIndicatorGen",(function(he){var de=document.createElement("img");return de.src=he.src,de.width=he.width,de.height=he.height,de.classList.add("cy-context-menus-submenu-indicator"),de}).bind(void 0,se.submenuIndicator));var me=c(se.contextMenuClasses);ee("cxtMenuClasses",me);var ge=Z.scratch("cycontextmenus");te=new q(function(){return ee("cxtMenuPosition",void 0)},ge),ee("cxtMenu",te),Z.container().appendChild(te),ee("cxtMenuItemClasses",c(se.menuItemClasses));var Ee=se.menuItems;le(Ee),V=function(he){ee("currentCyEvent",he),function(qe){var Ze,$e=Z.container(),tt=X("cxtMenuPosition"),Xe=qe.position||qe.cyPosition;if(tt!=Xe){te.hideMenuItems(),ee("anyVisibleChild",!1),ee("cxtMenuPosition",Xe);var We={top:(Ze=$e.getBoundingClientRect()).top,left:Ze.left},ve=qe.renderedPosition||qe.cyRenderedPosition,j=getComputedStyle($e)["border-width"],pe=parseInt(j.replace("px",""))||0;pe>0&&(We.top+=pe,We.left+=pe);var we=$e.clientHeight,xe=$e.clientWidth,Ce=we/2,Be=xe/2;ve.y>Ce&&ve.x<=Be?(te.style.left=ve.x+"px",te.style.bottom=we-ve.y+"px",te.style.right="auto",te.style.top="auto"):ve.y>Ce&&ve.x>Be?(te.style.right=xe-ve.x+"px",te.style.bottom=we-ve.y+"px",te.style.left="auto",te.style.top="auto"):ve.y<=Ce&&ve.x<=Be?(te.style.left=ve.x+"px",te.style.top=ve.y+"px",te.style.right="auto",te.style.bottom="auto"):(te.style.right=xe-ve.x+"px",te.style.top=ve.y+"px",te.style.left="auto",te.style.bottom="auto")}}(he);var de,be=he.target||he.cyTarget,De=ae(te.children);try{for(De.s();!(de=De.n()).done;){var Se=de.value;Se instanceof k&&(be===Z?Se.coreAsWell:be.is(Se.selector))&&Se.show&&(te.display(),ee("anyVisibleChild",!0),Se.display())}}catch(qe){De.e(qe)}finally{De.f()}var Re=Array.from(te.children).filter(function(qe){if(qe instanceof k)return qe.isVisible()}),Ie=Re.length;Re.forEach(function(qe,Ze){qe instanceof k&&(Ze<Ie-1&&qe.getHasTrailingDivider()?qe.classList.add(p):qe.getHasTrailingDivider()&&qe.classList.remove(p))}),!X("anyVisibleChild")&&!function(qe){return qe.offsetWidth<=0&&qe.offsetHeight<=0||qe.style&&qe.style.display||getComputedStyle(qe).display}(te)&&te.hide()},Z.on(se.evtType,V),ee("onCxttap",V),function(){var he=function(be){if(te.contains(be.originalEvent.target))return!1;te.hide(),ee("cxtMenuPosition",void 0),ee("currentCyEvent",void 0)};Z.on("tapstart",he),ee("eventCyTapStart",he);var de=function(){te.hide()};Z.on("viewport",de),ee("onViewport",de)}(),U=function(he){Z.container().contains(he.target)||te.contains(he.target)||(te.hide(),ee("cxtMenuPosition",void 0))},document.addEventListener("mouseup",U),ee("hideOnNonCyClick",U),function(){var he,de=function(be,De){var Se;if(typeof Symbol>"u"||be[Symbol.iterator]==null){if(Array.isArray(be)||(Se=function(tt,Xe){if(tt){if(typeof tt=="string")return u(tt,Xe);var We=Object.prototype.toString.call(tt).slice(8,-1);return We==="Object"&&tt.constructor&&(We=tt.constructor.name),We==="Map"||We==="Set"?Array.from(tt):We==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(We)?u(tt,Xe):void 0}}(be))||De){Se&&(be=Se);var Re=0,Ie=function(){};return{s:Ie,n:function(){return Re>=be.length?{done:!0}:{done:!1,value:be[Re++]}},e:function(tt){throw tt},f:Ie}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qe,Ze=!0,$e=!1;return{s:function(){Se=be[Symbol.iterator]()},n:function(){var tt=Se.next();return Ze=tt.done,tt},e:function(tt){$e=!0,qe=tt},f:function(){try{Ze||Se.return==null||Se.return()}finally{if($e)throw qe}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(de.s();!(he=de.n()).done;)he.value.addEventListener("contextmenu",function(be){return be.preventDefault()})}catch(be){de.e(be)}finally{de.f()}}()}return function(he){return{isActive:function(){return X("active")},appendMenuItem:function(de){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return oe(de,be),he},appendMenuItems:function(de){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return le(de,be),he},removeMenuItem:function(de){var be=ie(de);return te.removeMenuItem(be),he},setTrailingDivider:function(de,be){var De=ie(de);return De.setHasTrailingDivider(be),be?De.classList.add(p):De.classList.remove(p),he},insertBeforeMenuItem:function(de,be){var De=$(de),Se=ie(be);return te.insertMenuItem(De,{before:Se}),he},moveToSubmenu:function(de){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,De=ie(de);if(be===null)te.moveToSubmenu(De);else if(typeof be=="string"){var Se=ie(be.toString());te.moveToSubmenu(De,Se)}else be.coreAsWell!==void 0||be.selector!==void 0?te.moveToSubmenu(De,null,be):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return he},moveBeforeOtherMenuItem:function(de,be){var De=ie(de),Se=ie(be);return te.moveBefore(De,Se),he},disableMenuItem:function(de){return ie(de).disable(),he},enableMenuItem:function(de){return ie(de).enable(),he},hideMenuItem:function(de){return ie(de).hide(),ue(),he},showMenuItem:function(de){return ie(de).display(),ue(),he},destroy:function(){return ne(),he},getOptions:function(){return f(y,se)},swapItems:function(de,be){te.ensureContains(de),te.ensureContains(be);var De=document.getElementById(de),Se=document.getElementById(be),Re=De.nextSibling,Ie=Se.nextSibling,qe=De.parentNode,Ze=Se.parentNode;if(!qe.isSameNode(Ze))throw new Error("To swap, the items should have the same parent!");Re&&Re.isSameNode(Se)?qe.insertBefore(Se,De):Ie&&Ie.isSameNode(De)?qe.insertBefore(De,Se):(qe.insertBefore(Se,De),qe.insertBefore(De,Ie))}}}(this)}},579:(i,o,l)=>{var u=l(621).contextMenus,f=function(c){c&&c("core","contextMenus",u)};typeof cytoscape<"u"&&f(cytoscape),i.exports=f}},n={};function a(i){var o=n[i];if(o!==void 0)return o.exports;var l=n[i]={exports:{}};return r[i](l,l.exports,a),l.exports}return a.d=(i,o)=>{for(var l in o)a.o(o,l)&&!a.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:o[l]})},a.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a(579)})()})}(Rf)),Rf.exports}var eV=JW();const tV=To(eV);var Pf={exports:{}};function B1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qv,DS;function rV(){if(DS)return Qv;DS=1;function t(){this.__data__=[],this.size=0}return Qv=t,Qv}var Jv,_S;function Ps(){if(_S)return Jv;_S=1;function t(e,r){return e===r||e!==e&&r!==r}return Jv=t,Jv}var ep,MS;function Hc(){if(MS)return ep;MS=1;var t=Ps();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return ep=e,ep}var tp,RS;function nV(){if(RS)return tp;RS=1;var t=Hc(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return tp=n,tp}var rp,PS;function aV(){if(PS)return rp;PS=1;var t=Hc();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return rp=e,rp}var np,NS;function iV(){if(NS)return np;NS=1;var t=Hc();function e(r){return t(this.__data__,r)>-1}return np=e,np}var ap,kS;function oV(){if(kS)return ap;kS=1;var t=Hc();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return ap=e,ap}var ip,OS;function Uc(){if(OS)return ip;OS=1;var t=rV(),e=nV(),r=aV(),n=iV(),a=oV();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var f=o[l];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,ip=i,ip}var op,IS;function sV(){if(IS)return op;IS=1;var t=Uc();function e(){this.__data__=new t,this.size=0}return op=e,op}var sp,FS;function lV(){if(FS)return sp;FS=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return sp=t,sp}var lp,BS;function uV(){if(BS)return lp;BS=1;function t(e){return this.__data__.get(e)}return lp=t,lp}var up,qS;function fV(){if(qS)return up;qS=1;function t(e){return this.__data__.has(e)}return up=t,up}var fp,zS;function Tk(){if(zS)return fp;zS=1;var t=typeof pf=="object"&&pf&&pf.Object===Object&&pf;return fp=t,fp}var cp,GS;function fa(){if(GS)return cp;GS=1;var t=Tk(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return cp=r,cp}var dp,HS;function Ns(){if(HS)return dp;HS=1;var t=fa(),e=t.Symbol;return dp=e,dp}var hp,US;function cV(){if(US)return hp;US=1;var t=Ns(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var l=r.call(o,a),u=o[a];try{o[a]=void 0;var f=!0}catch{}var c=n.call(o);return f&&(l?o[a]=u:delete o[a]),c}return hp=i,hp}var vp,WS;function dV(){if(WS)return vp;WS=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return vp=r,vp}var pp,VS;function So(){if(VS)return pp;VS=1;var t=Ns(),e=cV(),r=dV(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?a:n:i&&i in Object(l)?e(l):r(l)}return pp=o,pp}var gp,$S;function Xn(){if($S)return gp;$S=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return gp=t,gp}var yp,YS;function gu(){if(YS)return yp;YS=1;var t=So(),e=Xn(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!e(l))return!1;var u=t(l);return u==n||u==a||u==r||u==i}return yp=o,yp}var mp,XS;function hV(){if(XS)return mp;XS=1;var t=fa(),e=t["__core-js_shared__"];return mp=e,mp}var bp,KS;function vV(){if(KS)return bp;KS=1;var t=hV(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return bp=r,bp}var wp,jS;function Sk(){if(jS)return wp;jS=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return wp=r,wp}var xp,ZS;function pV(){if(ZS)return xp;ZS=1;var t=gu(),e=vV(),r=Xn(),n=Sk(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,f=l.hasOwnProperty,c=RegExp("^"+u.call(f).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(g){if(!r(g)||e(g))return!1;var p=t(g)?c:i;return p.test(n(g))}return xp=h,xp}var Cp,QS;function gV(){if(QS)return Cp;QS=1;function t(e,r){return e==null?void 0:e[r]}return Cp=t,Cp}var Ep,JS;function Ao(){if(JS)return Ep;JS=1;var t=pV(),e=gV();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Ep=r,Ep}var Tp,eA;function q1(){if(eA)return Tp;eA=1;var t=Ao(),e=fa(),r=t(e,"Map");return Tp=r,Tp}var Sp,tA;function Wc(){if(tA)return Sp;tA=1;var t=Ao(),e=t(Object,"create");return Sp=e,Sp}var Ap,rA;function yV(){if(rA)return Ap;rA=1;var t=Wc();function e(){this.__data__=t?t(null):{},this.size=0}return Ap=e,Ap}var Lp,nA;function mV(){if(nA)return Lp;nA=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Lp=t,Lp}var Dp,aA;function bV(){if(aA)return Dp;aA=1;var t=Wc(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var l=o[i];return l===e?void 0:l}return n.call(o,i)?o[i]:void 0}return Dp=a,Dp}var _p,iA;function wV(){if(iA)return _p;iA=1;var t=Wc(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return _p=n,_p}var Mp,oA;function xV(){if(oA)return Mp;oA=1;var t=Wc(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Mp=r,Mp}var Rp,sA;function CV(){if(sA)return Rp;sA=1;var t=yV(),e=mV(),r=bV(),n=wV(),a=xV();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var f=o[l];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Rp=i,Rp}var Pp,lA;function EV(){if(lA)return Pp;lA=1;var t=CV(),e=Uc(),r=q1();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return Pp=n,Pp}var Np,uA;function TV(){if(uA)return Np;uA=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Np=t,Np}var kp,fA;function Vc(){if(fA)return kp;fA=1;var t=TV();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return kp=e,kp}var Op,cA;function SV(){if(cA)return Op;cA=1;var t=Vc();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Op=e,Op}var Ip,dA;function AV(){if(dA)return Ip;dA=1;var t=Vc();function e(r){return t(this,r).get(r)}return Ip=e,Ip}var Fp,hA;function LV(){if(hA)return Fp;hA=1;var t=Vc();function e(r){return t(this,r).has(r)}return Fp=e,Fp}var Bp,vA;function DV(){if(vA)return Bp;vA=1;var t=Vc();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return Bp=e,Bp}var qp,pA;function z1(){if(pA)return qp;pA=1;var t=EV(),e=SV(),r=AV(),n=LV(),a=DV();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var f=o[l];this.set(f[0],f[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,qp=i,qp}var zp,gA;function _V(){if(gA)return zp;gA=1;var t=Uc(),e=q1(),r=z1(),n=200;function a(i,o){var l=this.__data__;if(l instanceof t){var u=l.__data__;if(!e||u.length<n-1)return u.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(u)}return l.set(i,o),this.size=l.size,this}return zp=a,zp}var Gp,yA;function $c(){if(yA)return Gp;yA=1;var t=Uc(),e=sV(),r=lV(),n=uV(),a=fV(),i=_V();function o(l){var u=this.__data__=new t(l);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,Gp=o,Gp}var Hp,mA;function G1(){if(mA)return Hp;mA=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a&&r(e[n],n,e)!==!1;);return e}return Hp=t,Hp}var Up,bA;function Ak(){if(bA)return Up;bA=1;var t=Ao(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Up=e,Up}var Wp,wA;function Yc(){if(wA)return Wp;wA=1;var t=Ak();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return Wp=e,Wp}var Vp,xA;function Xc(){if(xA)return Vp;xA=1;var t=Yc(),e=Ps(),r=Object.prototype,n=r.hasOwnProperty;function a(i,o,l){var u=i[o];(!(n.call(i,o)&&e(u,l))||l===void 0&&!(o in i))&&t(i,o,l)}return Vp=a,Vp}var $p,CA;function yu(){if(CA)return $p;CA=1;var t=Xc(),e=Yc();function r(n,a,i,o){var l=!i;i||(i={});for(var u=-1,f=a.length;++u<f;){var c=a[u],h=o?o(i[c],n[c],c,i,n):void 0;h===void 0&&(h=n[c]),l?e(i,c,h):t(i,c,h)}return i}return $p=r,$p}var Yp,EA;function MV(){if(EA)return Yp;EA=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return Yp=t,Yp}var Xp,TA;function _a(){if(TA)return Xp;TA=1;function t(e){return e!=null&&typeof e=="object"}return Xp=t,Xp}var Kp,SA;function RV(){if(SA)return Kp;SA=1;var t=So(),e=_a(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return Kp=n,Kp}var jp,AA;function mu(){if(AA)return jp;AA=1;var t=RV(),e=_a(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t(function(){return arguments}())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return jp=i,jp}var Zp,LA;function Lr(){if(LA)return Zp;LA=1;var t=Array.isArray;return Zp=t,Zp}var Tl={exports:{}},Qp,DA;function PV(){if(DA)return Qp;DA=1;function t(){return!1}return Qp=t,Qp}Tl.exports;var _A;function ks(){return _A||(_A=1,function(t,e){var r=fa(),n=PV(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,l=o?r.Buffer:void 0,u=l?l.isBuffer:void 0,f=u||n;t.exports=f}(Tl,Tl.exports)),Tl.exports}var Jp,MA;function Kc(){if(MA)return Jp;MA=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return Jp=r,Jp}var eg,RA;function H1(){if(RA)return eg;RA=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return eg=e,eg}var tg,PA;function NV(){if(PA)return tg;PA=1;var t=So(),e=H1(),r=_a(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",f="[object Map]",c="[object Number]",h="[object Object]",g="[object RegExp]",p="[object Set]",y="[object String]",C="[object WeakMap]",E="[object ArrayBuffer]",v="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",T="[object Int8Array]",A="[object Int16Array]",_="[object Int32Array]",D="[object Uint8Array]",P="[object Uint8ClampedArray]",N="[object Uint16Array]",B="[object Uint32Array]",G={};G[x]=G[w]=G[T]=G[A]=G[_]=G[D]=G[P]=G[N]=G[B]=!0,G[n]=G[a]=G[E]=G[i]=G[v]=G[o]=G[l]=G[u]=G[f]=G[c]=G[h]=G[g]=G[p]=G[y]=G[C]=!1;function F(z){return r(z)&&e(z.length)&&!!G[t(z)]}return tg=F,tg}var rg,NA;function jc(){if(NA)return rg;NA=1;function t(e){return function(r){return e(r)}}return rg=t,rg}var Sl={exports:{}};Sl.exports;var kA;function U1(){return kA||(kA=1,function(t,e){var r=Tk(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var u=a&&a.require&&a.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(Sl,Sl.exports)),Sl.exports}var ng,OA;function bu(){if(OA)return ng;OA=1;var t=NV(),e=jc(),r=U1(),n=r&&r.isTypedArray,a=n?e(n):t;return ng=a,ng}var ag,IA;function Lk(){if(IA)return ag;IA=1;var t=MV(),e=mu(),r=Lr(),n=ks(),a=Kc(),i=bu(),o=Object.prototype,l=o.hasOwnProperty;function u(f,c){var h=r(f),g=!h&&e(f),p=!h&&!g&&n(f),y=!h&&!g&&!p&&i(f),C=h||g||p||y,E=C?t(f.length,String):[],v=E.length;for(var x in f)(c||l.call(f,x))&&!(C&&(x=="length"||p&&(x=="offset"||x=="parent")||y&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||a(x,v)))&&E.push(x);return E}return ag=u,ag}var ig,FA;function Zc(){if(FA)return ig;FA=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return ig=e,ig}var og,BA;function Dk(){if(BA)return og;BA=1;function t(e,r){return function(n){return e(r(n))}}return og=t,og}var sg,qA;function kV(){if(qA)return sg;qA=1;var t=Dk(),e=t(Object.keys,Object);return sg=e,sg}var lg,zA;function W1(){if(zA)return lg;zA=1;var t=Zc(),e=kV(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&o.push(l);return o}return lg=a,lg}var ug,GA;function ti(){if(GA)return ug;GA=1;var t=gu(),e=H1();function r(n){return n!=null&&e(n.length)&&!t(n)}return ug=r,ug}var fg,HA;function zi(){if(HA)return fg;HA=1;var t=Lk(),e=W1(),r=ti();function n(a){return r(a)?t(a):e(a)}return fg=n,fg}var cg,UA;function OV(){if(UA)return cg;UA=1;var t=yu(),e=zi();function r(n,a){return n&&t(a,e(a),n)}return cg=r,cg}var dg,WA;function IV(){if(WA)return dg;WA=1;function t(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}return dg=t,dg}var hg,VA;function FV(){if(VA)return hg;VA=1;var t=Xn(),e=Zc(),r=IV(),n=Object.prototype,a=n.hasOwnProperty;function i(o){if(!t(o))return r(o);var l=e(o),u=[];for(var f in o)f=="constructor"&&(l||!a.call(o,f))||u.push(f);return u}return hg=i,hg}var vg,$A;function Lo(){if($A)return vg;$A=1;var t=Lk(),e=FV(),r=ti();function n(a){return r(a)?t(a,!0):e(a)}return vg=n,vg}var pg,YA;function BV(){if(YA)return pg;YA=1;var t=yu(),e=Lo();function r(n,a){return n&&t(a,e(a),n)}return pg=r,pg}var Al={exports:{}};Al.exports;var XA;function _k(){return XA||(XA=1,function(t,e){var r=fa(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(f,c){if(c)return f.slice();var h=f.length,g=l?l(h):new f.constructor(h);return f.copy(g),g}t.exports=u}(Al,Al.exports)),Al.exports}var gg,KA;function Mk(){if(KA)return gg;KA=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return gg=t,gg}var yg,jA;function Rk(){if(jA)return yg;jA=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var l=e[n];r(l,n,e)&&(o[i++]=l)}return o}return yg=t,yg}var mg,ZA;function Pk(){if(ZA)return mg;ZA=1;function t(){return[]}return mg=t,mg}var bg,QA;function V1(){if(QA)return bg;QA=1;var t=Rk(),e=Pk(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(l){return n.call(o,l)}))}:e;return bg=i,bg}var wg,JA;function qV(){if(JA)return wg;JA=1;var t=yu(),e=V1();function r(n,a){return t(n,e(n),a)}return wg=r,wg}var xg,eL;function $1(){if(eL)return xg;eL=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return xg=t,xg}var Cg,tL;function Qc(){if(tL)return Cg;tL=1;var t=Dk(),e=t(Object.getPrototypeOf,Object);return Cg=e,Cg}var Eg,rL;function Nk(){if(rL)return Eg;rL=1;var t=$1(),e=Qc(),r=V1(),n=Pk(),a=Object.getOwnPropertySymbols,i=a?function(o){for(var l=[];o;)t(l,r(o)),o=e(o);return l}:n;return Eg=i,Eg}var Tg,nL;function zV(){if(nL)return Tg;nL=1;var t=yu(),e=Nk();function r(n,a){return t(n,e(n),a)}return Tg=r,Tg}var Sg,aL;function kk(){if(aL)return Sg;aL=1;var t=$1(),e=Lr();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return Sg=r,Sg}var Ag,iL;function Ok(){if(iL)return Ag;iL=1;var t=kk(),e=V1(),r=zi();function n(a){return t(a,r,e)}return Ag=n,Ag}var Lg,oL;function GV(){if(oL)return Lg;oL=1;var t=kk(),e=Nk(),r=Lo();function n(a){return t(a,r,e)}return Lg=n,Lg}var Dg,sL;function HV(){if(sL)return Dg;sL=1;var t=Ao(),e=fa(),r=t(e,"DataView");return Dg=r,Dg}var _g,lL;function UV(){if(lL)return _g;lL=1;var t=Ao(),e=fa(),r=t(e,"Promise");return _g=r,_g}var Mg,uL;function Ik(){if(uL)return Mg;uL=1;var t=Ao(),e=fa(),r=t(e,"Set");return Mg=r,Mg}var Rg,fL;function WV(){if(fL)return Rg;fL=1;var t=Ao(),e=fa(),r=t(e,"WeakMap");return Rg=r,Rg}var Pg,cL;function Os(){if(cL)return Pg;cL=1;var t=HV(),e=q1(),r=UV(),n=Ik(),a=WV(),i=So(),o=Sk(),l="[object Map]",u="[object Object]",f="[object Promise]",c="[object Set]",h="[object WeakMap]",g="[object DataView]",p=o(t),y=o(e),C=o(r),E=o(n),v=o(a),x=i;return(t&&x(new t(new ArrayBuffer(1)))!=g||e&&x(new e)!=l||r&&x(r.resolve())!=f||n&&x(new n)!=c||a&&x(new a)!=h)&&(x=function(w){var T=i(w),A=T==u?w.constructor:void 0,_=A?o(A):"";if(_)switch(_){case p:return g;case y:return l;case C:return f;case E:return c;case v:return h}return T}),Pg=x,Pg}var Ng,dL;function VV(){if(dL)return Ng;dL=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n){var a=n.length,i=new n.constructor(a);return a&&typeof n[0]=="string"&&e.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return Ng=r,Ng}var kg,hL;function Fk(){if(hL)return kg;hL=1;var t=fa(),e=t.Uint8Array;return kg=e,kg}var Og,vL;function Y1(){if(vL)return Og;vL=1;var t=Fk();function e(r){var n=new r.constructor(r.byteLength);return new t(n).set(new t(r)),n}return Og=e,Og}var Ig,pL;function $V(){if(pL)return Ig;pL=1;var t=Y1();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}return Ig=e,Ig}var Fg,gL;function YV(){if(gL)return Fg;gL=1;var t=/\w*$/;function e(r){var n=new r.constructor(r.source,t.exec(r));return n.lastIndex=r.lastIndex,n}return Fg=e,Fg}var Bg,yL;function XV(){if(yL)return Bg;yL=1;var t=Ns(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function n(a){return r?Object(r.call(a)):{}}return Bg=n,Bg}var qg,mL;function Bk(){if(mL)return qg;mL=1;var t=Y1();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}return qg=e,qg}var zg,bL;function KV(){if(bL)return zg;bL=1;var t=Y1(),e=$V(),r=YV(),n=XV(),a=Bk(),i="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",f="[object RegExp]",c="[object Set]",h="[object String]",g="[object Symbol]",p="[object ArrayBuffer]",y="[object DataView]",C="[object Float32Array]",E="[object Float64Array]",v="[object Int8Array]",x="[object Int16Array]",w="[object Int32Array]",T="[object Uint8Array]",A="[object Uint8ClampedArray]",_="[object Uint16Array]",D="[object Uint32Array]";function P(N,B,G){var F=N.constructor;switch(B){case p:return t(N);case i:case o:return new F(+N);case y:return e(N,G);case C:case E:case v:case x:case w:case T:case A:case _:case D:return a(N,G);case l:return new F;case u:case h:return new F(N);case f:return r(N);case c:return new F;case g:return n(N)}}return zg=P,zg}var Gg,wL;function qk(){if(wL)return Gg;wL=1;var t=Xn(),e=Object.create,r=function(){function n(){}return function(a){if(!t(a))return{};if(e)return e(a);n.prototype=a;var i=new n;return n.prototype=void 0,i}}();return Gg=r,Gg}var Hg,xL;function zk(){if(xL)return Hg;xL=1;var t=qk(),e=Qc(),r=Zc();function n(a){return typeof a.constructor=="function"&&!r(a)?t(e(a)):{}}return Hg=n,Hg}var Ug,CL;function jV(){if(CL)return Ug;CL=1;var t=Os(),e=_a(),r="[object Map]";function n(a){return e(a)&&t(a)==r}return Ug=n,Ug}var Wg,EL;function ZV(){if(EL)return Wg;EL=1;var t=jV(),e=jc(),r=U1(),n=r&&r.isMap,a=n?e(n):t;return Wg=a,Wg}var Vg,TL;function QV(){if(TL)return Vg;TL=1;var t=Os(),e=_a(),r="[object Set]";function n(a){return e(a)&&t(a)==r}return Vg=n,Vg}var $g,SL;function JV(){if(SL)return $g;SL=1;var t=QV(),e=jc(),r=U1(),n=r&&r.isSet,a=n?e(n):t;return $g=a,$g}var Yg,AL;function Gk(){if(AL)return Yg;AL=1;var t=$c(),e=G1(),r=Xc(),n=OV(),a=BV(),i=_k(),o=Mk(),l=qV(),u=zV(),f=Ok(),c=GV(),h=Os(),g=VV(),p=KV(),y=zk(),C=Lr(),E=ks(),v=ZV(),x=Xn(),w=JV(),T=zi(),A=Lo(),_=1,D=2,P=4,N="[object Arguments]",B="[object Array]",G="[object Boolean]",F="[object Date]",z="[object Error]",M="[object Function]",R="[object GeneratorFunction]",k="[object Map]",I="[object Number]",q="[object Object]",ae="[object RegExp]",re="[object Set]",K="[object String]",W="[object Symbol]",Z="[object WeakMap]",U="[object ArrayBuffer]",V="[object DataView]",X="[object Float32Array]",ee="[object Float64Array]",se="[object Int8Array]",te="[object Int16Array]",oe="[object Int32Array]",le="[object Uint8Array]",$="[object Uint8ClampedArray]",ne="[object Uint16Array]",ie="[object Uint32Array]",ue={};ue[N]=ue[B]=ue[U]=ue[V]=ue[G]=ue[F]=ue[X]=ue[ee]=ue[se]=ue[te]=ue[oe]=ue[k]=ue[I]=ue[q]=ue[ae]=ue[re]=ue[K]=ue[W]=ue[le]=ue[$]=ue[ne]=ue[ie]=!0,ue[z]=ue[M]=ue[Z]=!1;function me(ge,Ee,he,de,be,De){var Se,Re=Ee&_,Ie=Ee&D,qe=Ee&P;if(he&&(Se=be?he(ge,de,be,De):he(ge)),Se!==void 0)return Se;if(!x(ge))return ge;var Ze=C(ge);if(Ze){if(Se=g(ge),!Re)return o(ge,Se)}else{var $e=h(ge),tt=$e==M||$e==R;if(E(ge))return i(ge,Re);if($e==q||$e==N||tt&&!be){if(Se=Ie||tt?{}:y(ge),!Re)return Ie?u(ge,a(Se,ge)):l(ge,n(Se,ge))}else{if(!ue[$e])return be?ge:{};Se=p(ge,$e,Re)}}De||(De=new t);var Xe=De.get(ge);if(Xe)return Xe;De.set(ge,Se),w(ge)?ge.forEach(function(j){Se.add(me(j,Ee,he,j,ge,De))}):v(ge)&&ge.forEach(function(j,pe){Se.set(pe,me(j,Ee,he,pe,ge,De))});var We=qe?Ie?c:f:Ie?A:T,ve=Ze?void 0:We(ge);return e(ve||ge,function(j,pe){ve&&(pe=j,j=ge[pe]),r(Se,pe,me(j,Ee,he,pe,ge,De))}),Se}return Yg=me,Yg}var Xg,LL;function e3(){if(LL)return Xg;LL=1;var t=Gk(),e=4;function r(n){return t(n,e)}return Xg=r,Xg}var Kg,DL;function X1(){if(DL)return Kg;DL=1;function t(e){return function(){return e}}return Kg=t,Kg}var jg,_L;function t3(){if(_L)return jg;_L=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),l=a(r),u=l.length;u--;){var f=l[e?u:++i];if(n(o[f],f,o)===!1)break}return r}}return jg=t,jg}var Zg,ML;function K1(){if(ML)return Zg;ML=1;var t=t3(),e=t();return Zg=e,Zg}var Qg,RL;function j1(){if(RL)return Qg;RL=1;var t=K1(),e=zi();function r(n,a){return n&&t(n,a,e)}return Qg=r,Qg}var Jg,PL;function r3(){if(PL)return Jg;PL=1;var t=ti();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,l=n?o:-1,u=Object(a);(n?l--:++l<o)&&i(u[l],l,u)!==!1;);return a}}return Jg=e,Jg}var ey,NL;function Jc(){if(NL)return ey;NL=1;var t=j1(),e=r3(),r=e(t);return ey=r,ey}var ty,kL;function Do(){if(kL)return ty;kL=1;function t(e){return e}return ty=t,ty}var ry,OL;function Hk(){if(OL)return ry;OL=1;var t=Do();function e(r){return typeof r=="function"?r:t}return ry=e,ry}var ny,IL;function Uk(){if(IL)return ny;IL=1;var t=G1(),e=Jc(),r=Hk(),n=Lr();function a(i,o){var l=n(i)?t:e;return l(i,r(o))}return ny=a,ny}var ay,FL;function Wk(){return FL||(FL=1,ay=Uk()),ay}var iy,BL;function n3(){if(BL)return iy;BL=1;var t=Jc();function e(r,n){var a=[];return t(r,function(i,o,l){n(i,o,l)&&a.push(i)}),a}return iy=e,iy}var oy,qL;function a3(){if(qL)return oy;qL=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return oy=e,oy}var sy,zL;function i3(){if(zL)return sy;zL=1;function t(e){return this.__data__.has(e)}return sy=t,sy}var ly,GL;function Vk(){if(GL)return ly;GL=1;var t=z1(),e=a3(),r=i3();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,ly=n,ly}var uy,HL;function o3(){if(HL)return uy;HL=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return uy=t,uy}var fy,UL;function $k(){if(UL)return fy;UL=1;function t(e,r){return e.has(r)}return fy=t,fy}var cy,WL;function Yk(){if(WL)return cy;WL=1;var t=Vk(),e=o3(),r=$k(),n=1,a=2;function i(o,l,u,f,c,h){var g=u&n,p=o.length,y=l.length;if(p!=y&&!(g&&y>p))return!1;var C=h.get(o),E=h.get(l);if(C&&E)return C==l&&E==o;var v=-1,x=!0,w=u&a?new t:void 0;for(h.set(o,l),h.set(l,o);++v<p;){var T=o[v],A=l[v];if(f)var _=g?f(A,T,v,l,o,h):f(T,A,v,o,l,h);if(_!==void 0){if(_)continue;x=!1;break}if(w){if(!e(l,function(D,P){if(!r(w,P)&&(T===D||c(T,D,u,f,h)))return w.push(P)})){x=!1;break}}else if(!(T===A||c(T,A,u,f,h))){x=!1;break}}return h.delete(o),h.delete(l),x}return cy=i,cy}var dy,VL;function s3(){if(VL)return dy;VL=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return dy=t,dy}var hy,$L;function Z1(){if($L)return hy;$L=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return hy=t,hy}var vy,YL;function l3(){if(YL)return vy;YL=1;var t=Ns(),e=Fk(),r=Ps(),n=Yk(),a=s3(),i=Z1(),o=1,l=2,u="[object Boolean]",f="[object Date]",c="[object Error]",h="[object Map]",g="[object Number]",p="[object RegExp]",y="[object Set]",C="[object String]",E="[object Symbol]",v="[object ArrayBuffer]",x="[object DataView]",w=t?t.prototype:void 0,T=w?w.valueOf:void 0;function A(_,D,P,N,B,G,F){switch(P){case x:if(_.byteLength!=D.byteLength||_.byteOffset!=D.byteOffset)return!1;_=_.buffer,D=D.buffer;case v:return!(_.byteLength!=D.byteLength||!G(new e(_),new e(D)));case u:case f:case g:return r(+_,+D);case c:return _.name==D.name&&_.message==D.message;case p:case C:return _==D+"";case h:var z=a;case y:var M=N&o;if(z||(z=i),_.size!=D.size&&!M)return!1;var R=F.get(_);if(R)return R==D;N|=l,F.set(_,D);var k=n(z(_),z(D),N,B,G,F);return F.delete(_),k;case E:if(T)return T.call(_)==T.call(D)}return!1}return vy=A,vy}var py,XL;function u3(){if(XL)return py;XL=1;var t=Ok(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,l,u,f,c){var h=l&e,g=t(i),p=g.length,y=t(o),C=y.length;if(p!=C&&!h)return!1;for(var E=p;E--;){var v=g[E];if(!(h?v in o:n.call(o,v)))return!1}var x=c.get(i),w=c.get(o);if(x&&w)return x==o&&w==i;var T=!0;c.set(i,o),c.set(o,i);for(var A=h;++E<p;){v=g[E];var _=i[v],D=o[v];if(u)var P=h?u(D,_,v,o,i,c):u(_,D,v,i,o,c);if(!(P===void 0?_===D||f(_,D,l,u,c):P)){T=!1;break}A||(A=v=="constructor")}if(T&&!A){var N=i.constructor,B=o.constructor;N!=B&&"constructor"in i&&"constructor"in o&&!(typeof N=="function"&&N instanceof N&&typeof B=="function"&&B instanceof B)&&(T=!1)}return c.delete(i),c.delete(o),T}return py=a,py}var gy,KL;function f3(){if(KL)return gy;KL=1;var t=$c(),e=Yk(),r=l3(),n=u3(),a=Os(),i=Lr(),o=ks(),l=bu(),u=1,f="[object Arguments]",c="[object Array]",h="[object Object]",g=Object.prototype,p=g.hasOwnProperty;function y(C,E,v,x,w,T){var A=i(C),_=i(E),D=A?c:a(C),P=_?c:a(E);D=D==f?h:D,P=P==f?h:P;var N=D==h,B=P==h,G=D==P;if(G&&o(C)){if(!o(E))return!1;A=!0,N=!1}if(G&&!N)return T||(T=new t),A||l(C)?e(C,E,v,x,w,T):r(C,E,D,v,x,w,T);if(!(v&u)){var F=N&&p.call(C,"__wrapped__"),z=B&&p.call(E,"__wrapped__");if(F||z){var M=F?C.value():C,R=z?E.value():E;return T||(T=new t),w(M,R,v,x,T)}}return G?(T||(T=new t),n(C,E,v,x,w,T)):!1}return gy=y,gy}var yy,jL;function Xk(){if(jL)return yy;jL=1;var t=f3(),e=_a();function r(n,a,i,o,l){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,l)}return yy=r,yy}var my,ZL;function c3(){if(ZL)return my;ZL=1;var t=$c(),e=Xk(),r=1,n=2;function a(i,o,l,u){var f=l.length,c=f,h=!u;if(i==null)return!c;for(i=Object(i);f--;){var g=l[f];if(h&&g[2]?g[1]!==i[g[0]]:!(g[0]in i))return!1}for(;++f<c;){g=l[f];var p=g[0],y=i[p],C=g[1];if(h&&g[2]){if(y===void 0&&!(p in i))return!1}else{var E=new t;if(u)var v=u(y,C,p,i,o,E);if(!(v===void 0?e(C,y,r|n,u,E):v))return!1}}return!0}return my=a,my}var by,QL;function Kk(){if(QL)return by;QL=1;var t=Xn();function e(r){return r===r&&!t(r)}return by=e,by}var wy,JL;function d3(){if(JL)return wy;JL=1;var t=Kk(),e=zi();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],l=n[o];a[i]=[o,l,t(l)]}return a}return wy=r,wy}var xy,eD;function jk(){if(eD)return xy;eD=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return xy=t,xy}var Cy,tD;function h3(){if(tD)return Cy;tD=1;var t=c3(),e=d3(),r=jk();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return Cy=n,Cy}var Ey,rD;function Is(){if(rD)return Ey;rD=1;var t=So(),e=_a(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Ey=n,Ey}var Ty,nD;function Q1(){if(nD)return Ty;nD=1;var t=Lr(),e=Is(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return Ty=a,Ty}var Sy,aD;function v3(){if(aD)return Sy;aD=1;var t=z1(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,l=a?a.apply(this,o):o[0],u=i.cache;if(u.has(l))return u.get(l);var f=n.apply(this,o);return i.cache=u.set(l,f)||u,f};return i.cache=new(r.Cache||t),i}return r.Cache=t,Sy=r,Sy}var Ay,iD;function p3(){if(iD)return Ay;iD=1;var t=v3(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return Ay=r,Ay}var Ly,oD;function g3(){if(oD)return Ly;oD=1;var t=p3(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,l,u,f){i.push(u?f.replace(r,"$1"):l||o)}),i});return Ly=n,Ly}var Dy,sD;function ed(){if(sD)return Dy;sD=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return Dy=t,Dy}var _y,lD;function y3(){if(lD)return _y;lD=1;var t=Ns(),e=ed(),r=Lr(),n=Is(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return e(l,o)+"";if(n(l))return i?i.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return _y=o,_y}var My,uD;function Zk(){if(uD)return My;uD=1;var t=y3();function e(r){return r==null?"":t(r)}return My=e,My}var Ry,fD;function td(){if(fD)return Ry;fD=1;var t=Lr(),e=Q1(),r=g3(),n=Zk();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return Ry=a,Ry}var Py,cD;function wu(){if(cD)return Py;cD=1;var t=Is();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Py=e,Py}var Ny,dD;function rd(){if(dD)return Ny;dD=1;var t=td(),e=wu();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return Ny=r,Ny}var ky,hD;function m3(){if(hD)return ky;hD=1;var t=rd();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return ky=e,ky}var Oy,vD;function b3(){if(vD)return Oy;vD=1;function t(e,r){return e!=null&&r in Object(e)}return Oy=t,Oy}var Iy,pD;function Qk(){if(pD)return Iy;pD=1;var t=td(),e=mu(),r=Lr(),n=Kc(),a=H1(),i=wu();function o(l,u,f){u=t(u,l);for(var c=-1,h=u.length,g=!1;++c<h;){var p=i(u[c]);if(!(g=l!=null&&f(l,p)))break;l=l[p]}return g||++c!=h?g:(h=l==null?0:l.length,!!h&&a(h)&&n(p,h)&&(r(l)||e(l)))}return Iy=o,Iy}var Fy,gD;function Jk(){if(gD)return Fy;gD=1;var t=b3(),e=Qk();function r(n,a){return n!=null&&e(n,a,t)}return Fy=r,Fy}var By,yD;function w3(){if(yD)return By;yD=1;var t=Xk(),e=m3(),r=Jk(),n=Q1(),a=Kk(),i=jk(),o=wu(),l=1,u=2;function f(c,h){return n(c)&&a(h)?i(o(c),h):function(g){var p=e(g,c);return p===void 0&&p===h?r(g,c):t(h,p,l|u)}}return By=f,By}var qy,mD;function eO(){if(mD)return qy;mD=1;function t(e){return function(r){return r==null?void 0:r[e]}}return qy=t,qy}var zy,bD;function x3(){if(bD)return zy;bD=1;var t=rd();function e(r){return function(n){return t(n,r)}}return zy=e,zy}var Gy,wD;function C3(){if(wD)return Gy;wD=1;var t=eO(),e=x3(),r=Q1(),n=wu();function a(i){return r(i)?t(n(i)):e(i)}return Gy=a,Gy}var Hy,xD;function ri(){if(xD)return Hy;xD=1;var t=h3(),e=w3(),r=Do(),n=Lr(),a=C3();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return Hy=i,Hy}var Uy,CD;function tO(){if(CD)return Uy;CD=1;var t=Rk(),e=n3(),r=ri(),n=Lr();function a(i,o){var l=n(i)?t:e;return l(i,r(o,3))}return Uy=a,Uy}var Wy,ED;function E3(){if(ED)return Wy;ED=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n,a){return n!=null&&e.call(n,a)}return Wy=r,Wy}var Vy,TD;function rO(){if(TD)return Vy;TD=1;var t=E3(),e=Qk();function r(n,a){return n!=null&&e(n,a,t)}return Vy=r,Vy}var $y,SD;function T3(){if(SD)return $y;SD=1;var t=W1(),e=Os(),r=mu(),n=Lr(),a=ti(),i=ks(),o=Zc(),l=bu(),u="[object Map]",f="[object Set]",c=Object.prototype,h=c.hasOwnProperty;function g(p){if(p==null)return!0;if(a(p)&&(n(p)||typeof p=="string"||typeof p.splice=="function"||i(p)||l(p)||r(p)))return!p.length;var y=e(p);if(y==u||y==f)return!p.size;if(o(p))return!t(p).length;for(var C in p)if(h.call(p,C))return!1;return!0}return $y=g,$y}var Yy,AD;function nO(){if(AD)return Yy;AD=1;function t(e){return e===void 0}return Yy=t,Yy}var Xy,LD;function aO(){if(LD)return Xy;LD=1;var t=Jc(),e=ti();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(l,u,f){o[++i]=a(l,u,f)}),o}return Xy=r,Xy}var Ky,DD;function iO(){if(DD)return Ky;DD=1;var t=ed(),e=ri(),r=aO(),n=Lr();function a(i,o){var l=n(i)?t:r;return l(i,e(o,3))}return Ky=a,Ky}var jy,_D;function S3(){if(_D)return jy;_D=1;function t(e,r,n,a){var i=-1,o=e==null?0:e.length;for(a&&o&&(n=e[++i]);++i<o;)n=r(n,e[i],i,e);return n}return jy=t,jy}var Zy,MD;function A3(){if(MD)return Zy;MD=1;function t(e,r,n,a,i){return i(e,function(o,l,u){n=a?(a=!1,o):r(n,o,l,u)}),n}return Zy=t,Zy}var Qy,RD;function oO(){if(RD)return Qy;RD=1;var t=S3(),e=Jc(),r=ri(),n=A3(),a=Lr();function i(o,l,u){var f=a(o)?t:n,c=arguments.length<3;return f(o,r(l,4),u,c,e)}return Qy=i,Qy}var Jy,PD;function L3(){if(PD)return Jy;PD=1;var t=So(),e=Lr(),r=_a(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return Jy=a,Jy}var em,ND;function D3(){if(ND)return em;ND=1;var t=eO(),e=t("length");return em=e,em}var tm,kD;function _3(){if(kD)return tm;kD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+a+i+"]");function u(f){return l.test(f)}return tm=u,tm}var rm,OD;function M3(){if(OD)return rm;OD=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="["+t+"]",l="["+a+"]",u="\\ud83c[\\udffb-\\udfff]",f="(?:"+l+"|"+u+")",c="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",y=f+"?",C="["+i+"]?",E="(?:"+p+"(?:"+[c,h,g].join("|")+")"+C+y+")*",v=C+y+E,x="(?:"+[c+l+"?",l,h,g,o].join("|")+")",w=RegExp(u+"(?="+u+")|"+x+v,"g");function T(A){for(var _=w.lastIndex=0;w.test(A);)++_;return _}return rm=T,rm}var nm,ID;function R3(){if(ID)return nm;ID=1;var t=D3(),e=_3(),r=M3();function n(a){return e(a)?r(a):t(a)}return nm=n,nm}var am,FD;function P3(){if(FD)return am;FD=1;var t=W1(),e=Os(),r=ti(),n=L3(),a=R3(),i="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(r(u))return n(u)?a(u):u.length;var f=e(u);return f==i||f==o?u.size:t(u).length}return am=l,am}var im,BD;function N3(){if(BD)return im;BD=1;var t=G1(),e=qk(),r=j1(),n=ri(),a=Qc(),i=Lr(),o=ks(),l=gu(),u=Xn(),f=bu();function c(h,g,p){var y=i(h),C=y||o(h)||f(h);if(g=n(g,4),p==null){var E=h&&h.constructor;C?p=y?new E:[]:u(h)?p=l(E)?e(a(h)):{}:p={}}return(C?t:r)(h,function(v,x,w){return g(p,v,x,w)}),p}return im=c,im}var om,qD;function k3(){if(qD)return om;qD=1;var t=Ns(),e=mu(),r=Lr(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return om=a,om}var sm,zD;function J1(){if(zD)return sm;zD=1;var t=$1(),e=k3();function r(n,a,i,o,l){var u=-1,f=n.length;for(i||(i=e),l||(l=[]);++u<f;){var c=n[u];a>0&&i(c)?a>1?r(c,a-1,i,o,l):t(l,c):o||(l[l.length]=c)}return l}return sm=r,sm}var lm,GD;function O3(){if(GD)return lm;GD=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return lm=t,lm}var um,HD;function sO(){if(HD)return um;HD=1;var t=O3(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,l=-1,u=e(o.length-a,0),f=Array(u);++l<u;)f[l]=o[a+l];l=-1;for(var c=Array(a+1);++l<a;)c[l]=o[l];return c[a]=i(f),t(n,this,c)}}return um=r,um}var fm,UD;function I3(){if(UD)return fm;UD=1;var t=X1(),e=Ak(),r=Do(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return fm=n,fm}var cm,WD;function F3(){if(WD)return cm;WD=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var l=r(),u=e-(l-o);if(o=l,u>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return cm=n,cm}var dm,VD;function lO(){if(VD)return dm;VD=1;var t=I3(),e=F3(),r=e(t);return dm=r,dm}var hm,$D;function nd(){if($D)return hm;$D=1;var t=Do(),e=sO(),r=lO();function n(a,i){return r(e(a,i,t),a+"")}return hm=n,hm}var vm,YD;function uO(){if(YD)return vm;YD=1;function t(e,r,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return vm=t,vm}var pm,XD;function B3(){if(XD)return pm;XD=1;function t(e){return e!==e}return pm=t,pm}var gm,KD;function q3(){if(KD)return gm;KD=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return gm=t,gm}var ym,jD;function z3(){if(jD)return ym;jD=1;var t=uO(),e=B3(),r=q3();function n(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return ym=n,ym}var mm,ZD;function G3(){if(ZD)return mm;ZD=1;var t=z3();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return mm=e,mm}var bm,QD;function H3(){if(QD)return bm;QD=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return bm=t,bm}var wm,JD;function U3(){if(JD)return wm;JD=1;function t(){}return wm=t,wm}var xm,e_;function W3(){if(e_)return xm;e_=1;var t=Ik(),e=U3(),r=Z1(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return xm=a,xm}var Cm,t_;function V3(){if(t_)return Cm;t_=1;var t=Vk(),e=G3(),r=H3(),n=$k(),a=W3(),i=Z1(),o=200;function l(u,f,c){var h=-1,g=e,p=u.length,y=!0,C=[],E=C;if(c)y=!1,g=r;else if(p>=o){var v=f?null:a(u);if(v)return i(v);y=!1,g=n,E=new t}else E=f?[]:C;e:for(;++h<p;){var x=u[h],w=f?f(x):x;if(x=c||x!==0?x:0,y&&w===w){for(var T=E.length;T--;)if(E[T]===w)continue e;f&&E.push(w),C.push(x)}else g(E,w,c)||(E!==C&&E.push(w),C.push(x))}return C}return Cm=l,Cm}var Em,r_;function fO(){if(r_)return Em;r_=1;var t=ti(),e=_a();function r(n){return e(n)&&t(n)}return Em=r,Em}var Tm,n_;function $3(){if(n_)return Tm;n_=1;var t=J1(),e=nd(),r=V3(),n=fO(),a=e(function(i){return r(t(i,1,n,!0))});return Tm=a,Tm}var Sm,a_;function Y3(){if(a_)return Sm;a_=1;var t=ed();function e(r,n){return t(n,function(a){return r[a]})}return Sm=e,Sm}var Am,i_;function cO(){if(i_)return Am;i_=1;var t=Y3(),e=zi();function r(n){return n==null?[]:t(n,e(n))}return Am=r,Am}var Lm,o_;function Kn(){if(o_)return Lm;o_=1;var t;if(typeof B1=="function")try{t={clone:e3(),constant:X1(),each:Wk(),filter:tO(),has:rO(),isArray:Lr(),isEmpty:T3(),isFunction:gu(),isUndefined:nO(),keys:zi(),map:iO(),reduce:oO(),size:P3(),transform:N3(),union:$3(),values:cO()}}catch{}return t||(t=window._),Lm=t,Lm}var Dm,s_;function ew(){if(s_)return Dm;s_=1;var t=Kn();Dm=a;var e="\0",r="\0",n="";function a(c){this._isDirected=t.has(c,"directed")?c.directed:!0,this._isMultigraph=t.has(c,"multigraph")?c.multigraph:!1,this._isCompound=t.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(c){return this._label=c,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultNodeLabelFn=c,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return t.keys(this._nodes)},a.prototype.sources=function(){var c=this;return t.filter(this.nodes(),function(h){return t.isEmpty(c._in[h])})},a.prototype.sinks=function(){var c=this;return t.filter(this.nodes(),function(h){return t.isEmpty(c._out[h])})},a.prototype.setNodes=function(c,h){var g=arguments,p=this;return t.each(c,function(y){g.length>1?p.setNode(y,h):p.setNode(y)}),this},a.prototype.setNode=function(c,h){return t.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=h),this):(this._nodes[c]=arguments.length>1?h:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=r,this._children[c]={},this._children[r][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},a.prototype.node=function(c){return this._nodes[c]},a.prototype.hasNode=function(c){return t.has(this._nodes,c)},a.prototype.removeNode=function(c){var h=this;if(t.has(this._nodes,c)){var g=function(p){h.removeEdge(h._edgeObjs[p])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],t.each(this.children(c),function(p){h.setParent(p)}),delete this._children[c]),t.each(t.keys(this._in[c]),g),delete this._in[c],delete this._preds[c],t.each(t.keys(this._out[c]),g),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},a.prototype.setParent=function(c,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(h))h=r;else{h+="";for(var g=h;!t.isUndefined(g);g=this.parent(g))if(g===c)throw new Error("Setting "+h+" as parent of "+c+" would create a cycle");this.setNode(h)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=h,this._children[h][c]=!0,this},a.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},a.prototype.parent=function(c){if(this._isCompound){var h=this._parent[c];if(h!==r)return h}},a.prototype.children=function(c){if(t.isUndefined(c)&&(c=r),this._isCompound){var h=this._children[c];if(h)return t.keys(h)}else{if(c===r)return this.nodes();if(this.hasNode(c))return[]}},a.prototype.predecessors=function(c){var h=this._preds[c];if(h)return t.keys(h)},a.prototype.successors=function(c){var h=this._sucs[c];if(h)return t.keys(h)},a.prototype.neighbors=function(c){var h=this.predecessors(c);if(h)return t.union(h,this.successors(c))},a.prototype.isLeaf=function(c){var h;return this.isDirected()?h=this.successors(c):h=this.neighbors(c),h.length===0},a.prototype.filterNodes=function(c){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var g=this;t.each(this._nodes,function(C,E){c(E)&&h.setNode(E,C)}),t.each(this._edgeObjs,function(C){h.hasNode(C.v)&&h.hasNode(C.w)&&h.setEdge(C,g.edge(C))});var p={};function y(C){var E=g.parent(C);return E===void 0||h.hasNode(E)?(p[C]=E,E):E in p?p[E]:y(E)}return this._isCompound&&t.each(h.nodes(),function(C){h.setParent(C,y(C))}),h},a.prototype.setDefaultEdgeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultEdgeLabelFn=c,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return t.values(this._edgeObjs)},a.prototype.setPath=function(c,h){var g=this,p=arguments;return t.reduce(c,function(y,C){return p.length>1?g.setEdge(y,C,h):g.setEdge(y,C),C}),this},a.prototype.setEdge=function(){var c,h,g,p,y=!1,C=arguments[0];typeof C=="object"&&C!==null&&"v"in C?(c=C.v,h=C.w,g=C.name,arguments.length===2&&(p=arguments[1],y=!0)):(c=C,h=arguments[1],g=arguments[3],arguments.length>2&&(p=arguments[2],y=!0)),c=""+c,h=""+h,t.isUndefined(g)||(g=""+g);var E=l(this._isDirected,c,h,g);if(t.has(this._edgeLabels,E))return y&&(this._edgeLabels[E]=p),this;if(!t.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(h),this._edgeLabels[E]=y?p:this._defaultEdgeLabelFn(c,h,g);var v=u(this._isDirected,c,h,g);return c=v.v,h=v.w,Object.freeze(v),this._edgeObjs[E]=v,i(this._preds[h],c),i(this._sucs[c],h),this._in[h][E]=v,this._out[c][E]=v,this._edgeCount++,this},a.prototype.edge=function(c,h,g){var p=arguments.length===1?f(this._isDirected,arguments[0]):l(this._isDirected,c,h,g);return this._edgeLabels[p]},a.prototype.hasEdge=function(c,h,g){var p=arguments.length===1?f(this._isDirected,arguments[0]):l(this._isDirected,c,h,g);return t.has(this._edgeLabels,p)},a.prototype.removeEdge=function(c,h,g){var p=arguments.length===1?f(this._isDirected,arguments[0]):l(this._isDirected,c,h,g),y=this._edgeObjs[p];return y&&(c=y.v,h=y.w,delete this._edgeLabels[p],delete this._edgeObjs[p],o(this._preds[h],c),o(this._sucs[c],h),delete this._in[h][p],delete this._out[c][p],this._edgeCount--),this},a.prototype.inEdges=function(c,h){var g=this._in[c];if(g){var p=t.values(g);return h?t.filter(p,function(y){return y.v===h}):p}},a.prototype.outEdges=function(c,h){var g=this._out[c];if(g){var p=t.values(g);return h?t.filter(p,function(y){return y.w===h}):p}},a.prototype.nodeEdges=function(c,h){var g=this.inEdges(c,h);if(g)return g.concat(this.outEdges(c,h))};function i(c,h){c[h]?c[h]++:c[h]=1}function o(c,h){--c[h]||delete c[h]}function l(c,h,g,p){var y=""+h,C=""+g;if(!c&&y>C){var E=y;y=C,C=E}return y+n+C+n+(t.isUndefined(p)?e:p)}function u(c,h,g,p){var y=""+h,C=""+g;if(!c&&y>C){var E=y;y=C,C=E}var v={v:y,w:C};return p&&(v.name=p),v}function f(c,h){return l(c,h.v,h.w,h.name)}return Dm}var _m,l_;function X3(){return l_||(l_=1,_m="2.1.8"),_m}var Mm,u_;function K3(){return u_||(u_=1,Mm={Graph:ew(),version:X3()}),Mm}var Rm,f_;function j3(){if(f_)return Rm;f_=1;var t=Kn(),e=ew();Rm={write:r,read:i};function r(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:a(o)};return t.isUndefined(o.graph())||(l.value=t.clone(o.graph())),l}function n(o){return t.map(o.nodes(),function(l){var u=o.node(l),f=o.parent(l),c={v:l};return t.isUndefined(u)||(c.value=u),t.isUndefined(f)||(c.parent=f),c})}function a(o){return t.map(o.edges(),function(l){var u=o.edge(l),f={v:l.v,w:l.w};return t.isUndefined(l.name)||(f.name=l.name),t.isUndefined(u)||(f.value=u),f})}function i(o){var l=new e(o.options).setGraph(o.value);return t.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),t.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return Rm}var Pm,c_;function Z3(){if(c_)return Pm;c_=1;var t=Kn();Pm=e;function e(r){var n={},a=[],i;function o(l){t.has(n,l)||(n[l]=!0,i.push(l),t.each(r.successors(l),o),t.each(r.predecessors(l),o))}return t.each(r.nodes(),function(l){i=[],o(l),i.length&&a.push(i)}),a}return Pm}var Nm,d_;function dO(){if(d_)return Nm;d_=1;var t=Kn();Nm=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(r){return r.key})},e.prototype.has=function(r){return t.has(this._keyIndices,r)},e.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(r,n){var a=this._keyIndices;if(r=String(r),!t.has(a,r)){var i=this._arr,o=i.length;return a[r]=o,i.push({key:r,priority:n}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},e.prototype.decrease=function(r,n){var a=this._keyIndices[r];if(n>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[a].priority+" New: "+n);this._arr[a].priority=n,this._decrease(a)},e.prototype._heapify=function(r){var n=this._arr,a=2*r,i=a+1,o=r;a<n.length&&(o=n[a].priority<n[o].priority?a:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==r&&(this._swap(r,o),this._heapify(o)))},e.prototype._decrease=function(r){for(var n=this._arr,a=n[r].priority,i;r!==0&&(i=r>>1,!(n[i].priority<a));)this._swap(r,i),r=i},e.prototype._swap=function(r,n){var a=this._arr,i=this._keyIndices,o=a[r],l=a[n];a[r]=l,a[n]=o,i[l.key]=r,i[o.key]=n},Nm}var km,h_;function hO(){if(h_)return km;h_=1;var t=Kn(),e=dO();km=n;var r=t.constant(1);function n(i,o,l,u){return a(i,String(o),l||r,u||function(f){return i.outEdges(f)})}function a(i,o,l,u){var f={},c=new e,h,g,p=function(y){var C=y.v!==h?y.v:y.w,E=f[C],v=l(y),x=g.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+y+" Weight: "+v);x<E.distance&&(E.distance=x,E.predecessor=h,c.decrease(C,x))};for(i.nodes().forEach(function(y){var C=y===o?0:Number.POSITIVE_INFINITY;f[y]={distance:C},c.add(y,C)});c.size()>0&&(h=c.removeMin(),g=f[h],g.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(p);return f}return km}var Om,v_;function Q3(){if(v_)return Om;v_=1;var t=hO(),e=Kn();Om=r;function r(n,a,i){return e.transform(n.nodes(),function(o,l){o[l]=t(n,l,a,i)},{})}return Om}var Im,p_;function vO(){if(p_)return Im;p_=1;var t=Kn();Im=e;function e(r){var n=0,a=[],i={},o=[];function l(u){var f=i[u]={onStack:!0,lowlink:n,index:n++};if(a.push(u),r.successors(u).forEach(function(g){t.has(i,g)?i[g].onStack&&(f.lowlink=Math.min(f.lowlink,i[g].index)):(l(g),f.lowlink=Math.min(f.lowlink,i[g].lowlink))}),f.lowlink===f.index){var c=[],h;do h=a.pop(),i[h].onStack=!1,c.push(h);while(u!==h);o.push(c)}}return r.nodes().forEach(function(u){t.has(i,u)||l(u)}),o}return Im}var Fm,g_;function J3(){if(g_)return Fm;g_=1;var t=Kn(),e=vO();Fm=r;function r(n){return t.filter(e(n),function(a){return a.length>1||a.length===1&&n.hasEdge(a[0],a[0])})}return Fm}var Bm,y_;function e4(){if(y_)return Bm;y_=1;var t=Kn();Bm=r;var e=t.constant(1);function r(a,i,o){return n(a,i||e,o||function(l){return a.outEdges(l)})}function n(a,i,o){var l={},u=a.nodes();return u.forEach(function(f){l[f]={},l[f][f]={distance:0},u.forEach(function(c){f!==c&&(l[f][c]={distance:Number.POSITIVE_INFINITY})}),o(f).forEach(function(c){var h=c.v===f?c.w:c.v,g=i(c);l[f][h]={distance:g,predecessor:f}})}),u.forEach(function(f){var c=l[f];u.forEach(function(h){var g=l[h];u.forEach(function(p){var y=g[f],C=c[p],E=g[p],v=y.distance+C.distance;v<E.distance&&(E.distance=v,E.predecessor=C.predecessor)})})}),l}return Bm}var qm,m_;function pO(){if(m_)return qm;m_=1;var t=Kn();qm=e,e.CycleException=r;function e(n){var a={},i={},o=[];function l(u){if(t.has(i,u))throw new r;t.has(a,u)||(i[u]=!0,a[u]=!0,t.each(n.predecessors(u),l),delete i[u],o.push(u))}if(t.each(n.sinks(),l),t.size(a)!==n.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,qm}var zm,b_;function t4(){if(b_)return zm;b_=1;var t=pO();zm=e;function e(r){try{t(r)}catch(n){if(n instanceof t.CycleException)return!1;throw n}return!0}return zm}var Gm,w_;function gO(){if(w_)return Gm;w_=1;var t=Kn();Gm=e;function e(n,a,i){t.isArray(a)||(a=[a]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),l=[],u={};return t.each(a,function(f){if(!n.hasNode(f))throw new Error("Graph does not have node: "+f);r(n,f,i==="post",u,o,l)}),l}function r(n,a,i,o,l,u){t.has(o,a)||(o[a]=!0,i||u.push(a),t.each(l(a),function(f){r(n,f,i,o,l,u)}),i&&u.push(a))}return Gm}var Hm,x_;function r4(){if(x_)return Hm;x_=1;var t=gO();Hm=e;function e(r,n){return t(r,n,"post")}return Hm}var Um,C_;function n4(){if(C_)return Um;C_=1;var t=gO();Um=e;function e(r,n){return t(r,n,"pre")}return Um}var Wm,E_;function a4(){if(E_)return Wm;E_=1;var t=Kn(),e=ew(),r=dO();Wm=n;function n(a,i){var o=new e,l={},u=new r,f;function c(g){var p=g.v===f?g.w:g.v,y=u.priority(p);if(y!==void 0){var C=i(g);C<y&&(l[p]=f,u.decrease(p,C))}}if(a.nodeCount()===0)return o;t.each(a.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),o.setNode(g)}),u.decrease(a.nodes()[0],0);for(var h=!1;u.size()>0;){if(f=u.removeMin(),t.has(l,f))o.setEdge(f,l[f]);else{if(h)throw new Error("Input graph is not connected: "+a);h=!0}a.nodeEdges(f).forEach(c)}return o}return Wm}var Vm,T_;function i4(){return T_||(T_=1,Vm={components:Z3(),dijkstra:hO(),dijkstraAll:Q3(),findCycles:J3(),floydWarshall:e4(),isAcyclic:t4(),postorder:r4(),preorder:n4(),prim:a4(),tarjan:vO(),topsort:pO()}),Vm}var $m,S_;function o4(){if(S_)return $m;S_=1;var t=K3();return $m={Graph:t.Graph,json:j3(),alg:i4(),version:t.version},$m}var Ym,A_;function ua(){if(A_)return Ym;A_=1;var t;if(typeof B1=="function")try{t=o4()}catch{}return t||(t=window.graphlib),Ym=t,Ym}var Xm,L_;function s4(){if(L_)return Xm;L_=1;var t=Gk(),e=1,r=4;function n(a){return t(a,e|r)}return Xm=n,Xm}var Km,D_;function ad(){if(D_)return Km;D_=1;var t=Ps(),e=ti(),r=Kc(),n=Xn();function a(i,o,l){if(!n(l))return!1;var u=typeof o;return(u=="number"?e(l)&&r(o,l.length):u=="string"&&o in l)?t(l[o],i):!1}return Km=a,Km}var jm,__;function l4(){if(__)return jm;__=1;var t=nd(),e=Ps(),r=ad(),n=Lo(),a=Object.prototype,i=a.hasOwnProperty,o=t(function(l,u){l=Object(l);var f=-1,c=u.length,h=c>2?u[2]:void 0;for(h&&r(u[0],u[1],h)&&(c=1);++f<c;)for(var g=u[f],p=n(g),y=-1,C=p.length;++y<C;){var E=p[y],v=l[E];(v===void 0||e(v,a[E])&&!i.call(l,E))&&(l[E]=g[E])}return l});return jm=o,jm}var Zm,M_;function u4(){if(M_)return Zm;M_=1;var t=ri(),e=ti(),r=zi();function n(a){return function(i,o,l){var u=Object(i);if(!e(i)){var f=t(o,3);i=r(i),o=function(h){return f(u[h],h,u)}}var c=a(i,o,l);return c>-1?u[f?i[c]:c]:void 0}}return Zm=n,Zm}var Qm,R_;function f4(){if(R_)return Qm;R_=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return Qm=e,Qm}var Jm,P_;function c4(){if(P_)return Jm;P_=1;var t=f4(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return Jm=r,Jm}var e0,N_;function d4(){if(N_)return e0;N_=1;var t=c4(),e=Xn(),r=Is(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(f){if(typeof f=="number")return f;if(r(f))return n;if(e(f)){var c=typeof f.valueOf=="function"?f.valueOf():f;f=e(c)?c+"":c}if(typeof f!="string")return f===0?f:+f;f=t(f);var h=i.test(f);return h||o.test(f)?l(f.slice(2),h?2:8):a.test(f)?n:+f}return e0=u,e0}var t0,k_;function yO(){if(k_)return t0;k_=1;var t=d4(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-1/0){var i=a<0?-1:1;return i*r}return a===a?a:0}return t0=n,t0}var r0,O_;function h4(){if(O_)return r0;O_=1;var t=yO();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return r0=e,r0}var n0,I_;function v4(){if(I_)return n0;I_=1;var t=uO(),e=ri(),r=h4(),n=Math.max;function a(i,o,l){var u=i==null?0:i.length;if(!u)return-1;var f=l==null?0:r(l);return f<0&&(f=n(u+f,0)),t(i,e(o,3),f)}return n0=a,n0}var a0,F_;function p4(){if(F_)return a0;F_=1;var t=u4(),e=v4(),r=t(e);return a0=r,a0}var i0,B_;function mO(){if(B_)return i0;B_=1;var t=J1();function e(r){var n=r==null?0:r.length;return n?t(r,1):[]}return i0=e,i0}var o0,q_;function g4(){if(q_)return o0;q_=1;var t=K1(),e=Hk(),r=Lo();function n(a,i){return a==null?a:t(a,e(i),r)}return o0=n,o0}var s0,z_;function y4(){if(z_)return s0;z_=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return s0=t,s0}var l0,G_;function m4(){if(G_)return l0;G_=1;var t=Yc(),e=j1(),r=ri();function n(a,i){var o={};return i=r(i,3),e(a,function(l,u,f){t(o,u,i(l,u,f))}),o}return l0=n,l0}var u0,H_;function tw(){if(H_)return u0;H_=1;var t=Is();function e(r,n,a){for(var i=-1,o=r.length;++i<o;){var l=r[i],u=n(l);if(u!=null&&(f===void 0?u===u&&!t(u):a(u,f)))var f=u,c=l}return c}return u0=e,u0}var f0,U_;function b4(){if(U_)return f0;U_=1;function t(e,r){return e>r}return f0=t,f0}var c0,W_;function w4(){if(W_)return c0;W_=1;var t=tw(),e=b4(),r=Do();function n(a){return a&&a.length?t(a,r,e):void 0}return c0=n,c0}var d0,V_;function bO(){if(V_)return d0;V_=1;var t=Yc(),e=Ps();function r(n,a,i){(i!==void 0&&!e(n[a],i)||i===void 0&&!(a in n))&&t(n,a,i)}return d0=r,d0}var h0,$_;function x4(){if($_)return h0;$_=1;var t=So(),e=Qc(),r=_a(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,l=i.hasOwnProperty,u=o.call(Object);function f(c){if(!r(c)||t(c)!=n)return!1;var h=e(c);if(h===null)return!0;var g=l.call(h,"constructor")&&h.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==u}return h0=f,h0}var v0,Y_;function wO(){if(Y_)return v0;Y_=1;function t(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return v0=t,v0}var p0,X_;function C4(){if(X_)return p0;X_=1;var t=yu(),e=Lo();function r(n){return t(n,e(n))}return p0=r,p0}var g0,K_;function E4(){if(K_)return g0;K_=1;var t=bO(),e=_k(),r=Bk(),n=Mk(),a=zk(),i=mu(),o=Lr(),l=fO(),u=ks(),f=gu(),c=Xn(),h=x4(),g=bu(),p=wO(),y=C4();function C(E,v,x,w,T,A,_){var D=p(E,x),P=p(v,x),N=_.get(P);if(N){t(E,x,N);return}var B=A?A(D,P,x+"",E,v,_):void 0,G=B===void 0;if(G){var F=o(P),z=!F&&u(P),M=!F&&!z&&g(P);B=P,F||z||M?o(D)?B=D:l(D)?B=n(D):z?(G=!1,B=e(P,!0)):M?(G=!1,B=r(P,!0)):B=[]:h(P)||i(P)?(B=D,i(D)?B=y(D):(!c(D)||f(D))&&(B=a(P))):G=!1}G&&(_.set(P,B),T(B,P,w,A,_),_.delete(P)),t(E,x,B)}return g0=C,g0}var y0,j_;function T4(){if(j_)return y0;j_=1;var t=$c(),e=bO(),r=K1(),n=E4(),a=Xn(),i=Lo(),o=wO();function l(u,f,c,h,g){u!==f&&r(f,function(p,y){if(g||(g=new t),a(p))n(u,f,y,c,l,h,g);else{var C=h?h(o(u,y),p,y+"",u,f,g):void 0;C===void 0&&(C=p),e(u,y,C)}},i)}return y0=l,y0}var m0,Z_;function S4(){if(Z_)return m0;Z_=1;var t=nd(),e=ad();function r(n){return t(function(a,i){var o=-1,l=i.length,u=l>1?i[l-1]:void 0,f=l>2?i[2]:void 0;for(u=n.length>3&&typeof u=="function"?(l--,u):void 0,f&&e(i[0],i[1],f)&&(u=l<3?void 0:u,l=1),a=Object(a);++o<l;){var c=i[o];c&&n(a,c,o,u)}return a})}return m0=r,m0}var b0,Q_;function A4(){if(Q_)return b0;Q_=1;var t=T4(),e=S4(),r=e(function(n,a,i){t(n,a,i)});return b0=r,b0}var w0,J_;function xO(){if(J_)return w0;J_=1;function t(e,r){return e<r}return w0=t,w0}var x0,eM;function L4(){if(eM)return x0;eM=1;var t=tw(),e=xO(),r=Do();function n(a){return a&&a.length?t(a,r,e):void 0}return x0=n,x0}var C0,tM;function D4(){if(tM)return C0;tM=1;var t=tw(),e=ri(),r=xO();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return C0=n,C0}var E0,rM;function _4(){if(rM)return E0;rM=1;var t=fa(),e=function(){return t.Date.now()};return E0=e,E0}var T0,nM;function M4(){if(nM)return T0;nM=1;var t=Xc(),e=td(),r=Kc(),n=Xn(),a=wu();function i(o,l,u,f){if(!n(o))return o;l=e(l,o);for(var c=-1,h=l.length,g=h-1,p=o;p!=null&&++c<h;){var y=a(l[c]),C=u;if(y==="__proto__"||y==="constructor"||y==="prototype")return o;if(c!=g){var E=p[y];C=f?f(E,y,p):void 0,C===void 0&&(C=n(E)?E:r(l[c+1])?[]:{})}t(p,y,C),p=p[y]}return o}return T0=i,T0}var S0,aM;function R4(){if(aM)return S0;aM=1;var t=rd(),e=M4(),r=td();function n(a,i,o){for(var l=-1,u=i.length,f={};++l<u;){var c=i[l],h=t(a,c);o(h,c)&&e(f,r(c,a),h)}return f}return S0=n,S0}var A0,iM;function P4(){if(iM)return A0;iM=1;var t=R4(),e=Jk();function r(n,a){return t(n,a,function(i,o){return e(n,o)})}return A0=r,A0}var L0,oM;function N4(){if(oM)return L0;oM=1;var t=mO(),e=sO(),r=lO();function n(a){return r(e(a,void 0,t),a+"")}return L0=n,L0}var D0,sM;function k4(){if(sM)return D0;sM=1;var t=P4(),e=N4(),r=e(function(n,a){return n==null?{}:t(n,a)});return D0=r,D0}var _0,lM;function O4(){if(lM)return _0;lM=1;var t=Math.ceil,e=Math.max;function r(n,a,i,o){for(var l=-1,u=e(t((a-n)/(i||1)),0),f=Array(u);u--;)f[o?u:++l]=n,n+=i;return f}return _0=r,_0}var M0,uM;function I4(){if(uM)return M0;uM=1;var t=O4(),e=ad(),r=yO();function n(a){return function(i,o,l){return l&&typeof l!="number"&&e(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),t(i,o,l,a)}}return M0=n,M0}var R0,fM;function F4(){if(fM)return R0;fM=1;var t=I4(),e=t();return R0=e,R0}var P0,cM;function B4(){if(cM)return P0;cM=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return P0=t,P0}var N0,dM;function q4(){if(dM)return N0;dM=1;var t=Is();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,l=t(r),u=n!==void 0,f=n===null,c=n===n,h=t(n);if(!f&&!h&&!l&&r>n||l&&u&&c&&!f&&!h||i&&u&&c||!a&&c||!o)return 1;if(!i&&!l&&!h&&r<n||h&&a&&o&&!i&&!l||f&&a&&o||!u&&o||!c)return-1}return 0}return N0=e,N0}var k0,hM;function z4(){if(hM)return k0;hM=1;var t=q4();function e(r,n,a){for(var i=-1,o=r.criteria,l=n.criteria,u=o.length,f=a.length;++i<u;){var c=t(o[i],l[i]);if(c){if(i>=f)return c;var h=a[i];return c*(h=="desc"?-1:1)}}return r.index-n.index}return k0=e,k0}var O0,vM;function G4(){if(vM)return O0;vM=1;var t=ed(),e=rd(),r=ri(),n=aO(),a=B4(),i=jc(),o=z4(),l=Do(),u=Lr();function f(c,h,g){h.length?h=t(h,function(C){return u(C)?function(E){return e(E,C.length===1?C[0]:C)}:C}):h=[l];var p=-1;h=t(h,i(r));var y=n(c,function(C,E,v){var x=t(h,function(w){return w(C)});return{criteria:x,index:++p,value:C}});return a(y,function(C,E){return o(C,E,g)})}return O0=f,O0}var I0,pM;function H4(){if(pM)return I0;pM=1;var t=J1(),e=G4(),r=nd(),n=ad(),a=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&n(i,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return I0=a,I0}var F0,gM;function U4(){if(gM)return F0;gM=1;var t=Zk(),e=0;function r(n){var a=++e;return t(n)+a}return F0=r,F0}var B0,yM;function W4(){if(yM)return B0;yM=1;function t(e,r,n){for(var a=-1,i=e.length,o=r.length,l={};++a<i;){var u=a<o?r[a]:void 0;n(l,e[a],u)}return l}return B0=t,B0}var q0,mM;function V4(){if(mM)return q0;mM=1;var t=Xc(),e=W4();function r(n,a){return e(n||[],a||[],t)}return q0=r,q0}var z0,bM;function dr(){if(bM)return z0;bM=1;var t;if(typeof B1=="function")try{t={cloneDeep:s4(),constant:X1(),defaults:l4(),each:Wk(),filter:tO(),find:p4(),flatten:mO(),forEach:Uk(),forIn:g4(),has:rO(),isUndefined:nO(),last:y4(),map:iO(),mapValues:m4(),max:w4(),merge:A4(),min:L4(),minBy:D4(),now:_4(),pick:k4(),range:F4(),reduce:oO(),sortBy:H4(),uniqueId:U4(),values:cO(),zipObject:V4()}}catch{}return t||(t=window._),z0=t,z0}var G0,wM;function $4(){if(wM)return G0;wM=1,G0=t;function t(){var n={};n._next=n._prev=n,this._sentinel=n}t.prototype.dequeue=function(){var n=this._sentinel,a=n._prev;if(a!==n)return e(a),a},t.prototype.enqueue=function(n){var a=this._sentinel;n._prev&&n._next&&e(n),n._next=a._next,a._next._prev=n,a._next=n,n._prev=a},t.prototype.toString=function(){for(var n=[],a=this._sentinel,i=a._prev;i!==a;)n.push(JSON.stringify(i,r)),i=i._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,a){if(n!=="_next"&&n!=="_prev")return a}return G0}var H0,xM;function Y4(){if(xM)return H0;xM=1;var t=dr(),e=ua().Graph,r=$4();H0=a;var n=t.constant(1);function a(f,c){if(f.nodeCount()<=1)return[];var h=l(f,c||n),g=i(h.graph,h.buckets,h.zeroIdx);return t.flatten(t.map(g,function(p){return f.outEdges(p.v,p.w)}),!0)}function i(f,c,h){for(var g=[],p=c[c.length-1],y=c[0],C;f.nodeCount();){for(;C=y.dequeue();)o(f,c,h,C);for(;C=p.dequeue();)o(f,c,h,C);if(f.nodeCount()){for(var E=c.length-2;E>0;--E)if(C=c[E].dequeue(),C){g=g.concat(o(f,c,h,C,!0));break}}}return g}function o(f,c,h,g,p){var y=p?[]:void 0;return t.forEach(f.inEdges(g.v),function(C){var E=f.edge(C),v=f.node(C.v);p&&y.push({v:C.v,w:C.w}),v.out-=E,u(c,h,v)}),t.forEach(f.outEdges(g.v),function(C){var E=f.edge(C),v=C.w,x=f.node(v);x.in-=E,u(c,h,x)}),f.removeNode(g.v),y}function l(f,c){var h=new e,g=0,p=0;t.forEach(f.nodes(),function(E){h.setNode(E,{v:E,in:0,out:0})}),t.forEach(f.edges(),function(E){var v=h.edge(E.v,E.w)||0,x=c(E),w=v+x;h.setEdge(E.v,E.w,w),p=Math.max(p,h.node(E.v).out+=x),g=Math.max(g,h.node(E.w).in+=x)});var y=t.range(p+g+3).map(function(){return new r}),C=g+1;return t.forEach(h.nodes(),function(E){u(y,C,h.node(E))}),{graph:h,buckets:y,zeroIdx:C}}function u(f,c,h){h.out?h.in?f[h.out-h.in+c].enqueue(h):f[f.length-1].enqueue(h):f[0].enqueue(h)}return H0}var U0,CM;function X4(){if(CM)return U0;CM=1;var t=dr(),e=Y4();U0={run:r,undo:a};function r(i){var o=i.graph().acyclicer==="greedy"?e(i,l(i)):n(i);t.forEach(o,function(u){var f=i.edge(u);i.removeEdge(u),f.forwardName=u.name,f.reversed=!0,i.setEdge(u.w,u.v,f,t.uniqueId("rev"))});function l(u){return function(f){return u.edge(f).weight}}}function n(i){var o=[],l={},u={};function f(c){t.has(u,c)||(u[c]=!0,l[c]=!0,t.forEach(i.outEdges(c),function(h){t.has(l,h.w)?o.push(h):f(h.w)}),delete l[c])}return t.forEach(i.nodes(),f),o}function a(i){t.forEach(i.edges(),function(o){var l=i.edge(o);if(l.reversed){i.removeEdge(o);var u=l.forwardName;delete l.reversed,delete l.forwardName,i.setEdge(o.w,o.v,l,u)}})}return U0}var W0,EM;function Nn(){if(EM)return W0;EM=1;var t=dr(),e=ua().Graph;W0={addDummyNode:r,simplify:n,asNonCompoundGraph:a,successorWeights:i,predecessorWeights:o,intersectRect:l,buildLayerMatrix:u,normalizeRanks:f,removeEmptyRanks:c,addBorderNode:h,maxRank:g,partition:p,time:y,notime:C};function r(E,v,x,w){var T;do T=t.uniqueId(w);while(E.hasNode(T));return x.dummy=v,E.setNode(T,x),T}function n(E){var v=new e().setGraph(E.graph());return t.forEach(E.nodes(),function(x){v.setNode(x,E.node(x))}),t.forEach(E.edges(),function(x){var w=v.edge(x.v,x.w)||{weight:0,minlen:1},T=E.edge(x);v.setEdge(x.v,x.w,{weight:w.weight+T.weight,minlen:Math.max(w.minlen,T.minlen)})}),v}function a(E){var v=new e({multigraph:E.isMultigraph()}).setGraph(E.graph());return t.forEach(E.nodes(),function(x){E.children(x).length||v.setNode(x,E.node(x))}),t.forEach(E.edges(),function(x){v.setEdge(x,E.edge(x))}),v}function i(E){var v=t.map(E.nodes(),function(x){var w={};return t.forEach(E.outEdges(x),function(T){w[T.w]=(w[T.w]||0)+E.edge(T).weight}),w});return t.zipObject(E.nodes(),v)}function o(E){var v=t.map(E.nodes(),function(x){var w={};return t.forEach(E.inEdges(x),function(T){w[T.v]=(w[T.v]||0)+E.edge(T).weight}),w});return t.zipObject(E.nodes(),v)}function l(E,v){var x=E.x,w=E.y,T=v.x-x,A=v.y-w,_=E.width/2,D=E.height/2;if(!T&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var P,N;return Math.abs(A)*_>Math.abs(T)*D?(A<0&&(D=-D),P=D*T/A,N=D):(T<0&&(_=-_),P=_,N=_*A/T),{x:x+P,y:w+N}}function u(E){var v=t.map(t.range(g(E)+1),function(){return[]});return t.forEach(E.nodes(),function(x){var w=E.node(x),T=w.rank;t.isUndefined(T)||(v[T][w.order]=x)}),v}function f(E){var v=t.min(t.map(E.nodes(),function(x){return E.node(x).rank}));t.forEach(E.nodes(),function(x){var w=E.node(x);t.has(w,"rank")&&(w.rank-=v)})}function c(E){var v=t.min(t.map(E.nodes(),function(A){return E.node(A).rank})),x=[];t.forEach(E.nodes(),function(A){var _=E.node(A).rank-v;x[_]||(x[_]=[]),x[_].push(A)});var w=0,T=E.graph().nodeRankFactor;t.forEach(x,function(A,_){t.isUndefined(A)&&_%T!==0?--w:w&&t.forEach(A,function(D){E.node(D).rank+=w})})}function h(E,v,x,w){var T={width:0,height:0};return arguments.length>=4&&(T.rank=x,T.order=w),r(E,"border",T,v)}function g(E){return t.max(t.map(E.nodes(),function(v){var x=E.node(v).rank;if(!t.isUndefined(x))return x}))}function p(E,v){var x={lhs:[],rhs:[]};return t.forEach(E,function(w){v(w)?x.lhs.push(w):x.rhs.push(w)}),x}function y(E,v){var x=t.now();try{return v()}finally{console.log(E+" time: "+(t.now()-x)+"ms")}}function C(E,v){return v()}return W0}var V0,TM;function K4(){if(TM)return V0;TM=1;var t=dr(),e=Nn();V0={run:r,undo:a};function r(i){i.graph().dummyChains=[],t.forEach(i.edges(),function(o){n(i,o)})}function n(i,o){var l=o.v,u=i.node(l).rank,f=o.w,c=i.node(f).rank,h=o.name,g=i.edge(o),p=g.labelRank;if(c!==u+1){i.removeEdge(o);var y,C,E;for(E=0,++u;u<c;++E,++u)g.points=[],C={width:0,height:0,edgeLabel:g,edgeObj:o,rank:u},y=e.addDummyNode(i,"edge",C,"_d"),u===p&&(C.width=g.width,C.height=g.height,C.dummy="edge-label",C.labelpos=g.labelpos),i.setEdge(l,y,{weight:g.weight},h),E===0&&i.graph().dummyChains.push(y),l=y;i.setEdge(l,f,{weight:g.weight},h)}}function a(i){t.forEach(i.graph().dummyChains,function(o){var l=i.node(o),u=l.edgeLabel,f;for(i.setEdge(l.edgeObj,u);l.dummy;)f=i.successors(o)[0],i.removeNode(o),u.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height),o=f,l=i.node(o)})}return V0}var $0,SM;function sc(){if(SM)return $0;SM=1;var t=dr();$0={longestPath:e,slack:r};function e(n){var a={};function i(o){var l=n.node(o);if(t.has(a,o))return l.rank;a[o]=!0;var u=t.min(t.map(n.outEdges(o),function(f){return i(f.w)-n.edge(f).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),l.rank=u}t.forEach(n.sources(),i)}function r(n,a){return n.node(a.w).rank-n.node(a.v).rank-n.edge(a).minlen}return $0}var Y0,AM;function CO(){if(AM)return Y0;AM=1;var t=dr(),e=ua().Graph,r=sc().slack;Y0=n;function n(l){var u=new e({directed:!1}),f=l.nodes()[0],c=l.nodeCount();u.setNode(f,{});for(var h,g;a(u,l)<c;)h=i(u,l),g=u.hasNode(h.v)?r(l,h):-r(l,h),o(u,l,g);return u}function a(l,u){function f(c){t.forEach(u.nodeEdges(c),function(h){var g=h.v,p=c===g?h.w:g;!l.hasNode(p)&&!r(u,h)&&(l.setNode(p,{}),l.setEdge(c,p,{}),f(p))})}return t.forEach(l.nodes(),f),l.nodeCount()}function i(l,u){return t.minBy(u.edges(),function(f){if(l.hasNode(f.v)!==l.hasNode(f.w))return r(u,f)})}function o(l,u,f){t.forEach(l.nodes(),function(c){u.node(c).rank+=f})}return Y0}var X0,LM;function j4(){if(LM)return X0;LM=1;var t=dr(),e=CO(),r=sc().slack,n=sc().longestPath,a=ua().alg.preorder,i=ua().alg.postorder,o=Nn().simplify;X0=l,l.initLowLimValues=h,l.initCutValues=u,l.calcCutValue=c,l.leaveEdge=p,l.enterEdge=y,l.exchangeEdges=C;function l(w){w=o(w),n(w);var T=e(w);h(T),u(T,w);for(var A,_;A=p(T);)_=y(T,w,A),C(T,w,A,_)}function u(w,T){var A=i(w,w.nodes());A=A.slice(0,A.length-1),t.forEach(A,function(_){f(w,T,_)})}function f(w,T,A){var _=w.node(A),D=_.parent;w.edge(A,D).cutvalue=c(w,T,A)}function c(w,T,A){var _=w.node(A),D=_.parent,P=!0,N=T.edge(A,D),B=0;return N||(P=!1,N=T.edge(D,A)),B=N.weight,t.forEach(T.nodeEdges(A),function(G){var F=G.v===A,z=F?G.w:G.v;if(z!==D){var M=F===P,R=T.edge(G).weight;if(B+=M?R:-R,v(w,A,z)){var k=w.edge(A,z).cutvalue;B+=M?-k:k}}}),B}function h(w,T){arguments.length<2&&(T=w.nodes()[0]),g(w,{},1,T)}function g(w,T,A,_,D){var P=A,N=w.node(_);return T[_]=!0,t.forEach(w.neighbors(_),function(B){t.has(T,B)||(A=g(w,T,A,B,_))}),N.low=P,N.lim=A++,D?N.parent=D:delete N.parent,A}function p(w){return t.find(w.edges(),function(T){return w.edge(T).cutvalue<0})}function y(w,T,A){var _=A.v,D=A.w;T.hasEdge(_,D)||(_=A.w,D=A.v);var P=w.node(_),N=w.node(D),B=P,G=!1;P.lim>N.lim&&(B=N,G=!0);var F=t.filter(T.edges(),function(z){return G===x(w,w.node(z.v),B)&&G!==x(w,w.node(z.w),B)});return t.minBy(F,function(z){return r(T,z)})}function C(w,T,A,_){var D=A.v,P=A.w;w.removeEdge(D,P),w.setEdge(_.v,_.w,{}),h(w),u(w,T),E(w,T)}function E(w,T){var A=t.find(w.nodes(),function(D){return!T.node(D).parent}),_=a(w,A);_=_.slice(1),t.forEach(_,function(D){var P=w.node(D).parent,N=T.edge(D,P),B=!1;N||(N=T.edge(P,D),B=!0),T.node(D).rank=T.node(P).rank+(B?N.minlen:-N.minlen)})}function v(w,T,A){return w.hasEdge(T,A)}function x(w,T,A){return A.low<=T.lim&&T.lim<=A.lim}return X0}var K0,DM;function Z4(){if(DM)return K0;DM=1;var t=sc(),e=t.longestPath,r=CO(),n=j4();K0=a;function a(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":i(u);break;default:l(u)}}var i=e;function o(u){e(u),r(u)}function l(u){n(u)}return K0}var j0,_M;function Q4(){if(_M)return j0;_M=1;var t=dr();j0=e;function e(a){var i=n(a);t.forEach(a.graph().dummyChains,function(o){for(var l=a.node(o),u=l.edgeObj,f=r(a,i,u.v,u.w),c=f.path,h=f.lca,g=0,p=c[g],y=!0;o!==u.w;){if(l=a.node(o),y){for(;(p=c[g])!==h&&a.node(p).maxRank<l.rank;)g++;p===h&&(y=!1)}if(!y){for(;g<c.length-1&&a.node(p=c[g+1]).minRank<=l.rank;)g++;p=c[g]}a.setParent(o,p),o=a.successors(o)[0]}})}function r(a,i,o,l){var u=[],f=[],c=Math.min(i[o].low,i[l].low),h=Math.max(i[o].lim,i[l].lim),g,p;g=o;do g=a.parent(g),u.push(g);while(g&&(i[g].low>c||h>i[g].lim));for(p=g,g=l;(g=a.parent(g))!==p;)f.push(g);return{path:u.concat(f.reverse()),lca:p}}function n(a){var i={},o=0;function l(u){var f=o;t.forEach(a.children(u),l),i[u]={low:f,lim:o++}}return t.forEach(a.children(),l),i}return j0}var Z0,MM;function J4(){if(MM)return Z0;MM=1;var t=dr(),e=Nn();Z0={run:r,cleanup:o};function r(l){var u=e.addDummyNode(l,"root",{},"_root"),f=a(l),c=t.max(t.values(f))-1,h=2*c+1;l.graph().nestingRoot=u,t.forEach(l.edges(),function(p){l.edge(p).minlen*=h});var g=i(l)+1;t.forEach(l.children(),function(p){n(l,u,h,g,c,f,p)}),l.graph().nodeRankFactor=h}function n(l,u,f,c,h,g,p){var y=l.children(p);if(!y.length){p!==u&&l.setEdge(u,p,{weight:0,minlen:f});return}var C=e.addBorderNode(l,"_bt"),E=e.addBorderNode(l,"_bb"),v=l.node(p);l.setParent(C,p),v.borderTop=C,l.setParent(E,p),v.borderBottom=E,t.forEach(y,function(x){n(l,u,f,c,h,g,x);var w=l.node(x),T=w.borderTop?w.borderTop:x,A=w.borderBottom?w.borderBottom:x,_=w.borderTop?c:2*c,D=T!==A?1:h-g[p]+1;l.setEdge(C,T,{weight:_,minlen:D,nestingEdge:!0}),l.setEdge(A,E,{weight:_,minlen:D,nestingEdge:!0})}),l.parent(p)||l.setEdge(u,C,{weight:0,minlen:h+g[p]})}function a(l){var u={};function f(c,h){var g=l.children(c);g&&g.length&&t.forEach(g,function(p){f(p,h+1)}),u[c]=h}return t.forEach(l.children(),function(c){f(c,1)}),u}function i(l){return t.reduce(l.edges(),function(u,f){return u+l.edge(f).weight},0)}function o(l){var u=l.graph();l.removeNode(u.nestingRoot),delete u.nestingRoot,t.forEach(l.edges(),function(f){var c=l.edge(f);c.nestingEdge&&l.removeEdge(f)})}return Z0}var Q0,RM;function e$(){if(RM)return Q0;RM=1;var t=dr(),e=Nn();Q0=r;function r(a){function i(o){var l=a.children(o),u=a.node(o);if(l.length&&t.forEach(l,i),t.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var f=u.minRank,c=u.maxRank+1;f<c;++f)n(a,"borderLeft","_bl",o,u,f),n(a,"borderRight","_br",o,u,f)}}t.forEach(a.children(),i)}function n(a,i,o,l,u,f){var c={width:0,height:0,rank:f,borderType:i},h=u[i][f-1],g=e.addDummyNode(a,"border",c,o);u[i][f]=g,a.setParent(g,l),h&&a.setEdge(h,g,{weight:1})}return Q0}var J0,PM;function t$(){if(PM)return J0;PM=1;var t=dr();J0={adjust:e,undo:r};function e(f){var c=f.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(f)}function r(f){var c=f.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&i(f),(c==="lr"||c==="rl")&&(l(f),n(f))}function n(f){t.forEach(f.nodes(),function(c){a(f.node(c))}),t.forEach(f.edges(),function(c){a(f.edge(c))})}function a(f){var c=f.width;f.width=f.height,f.height=c}function i(f){t.forEach(f.nodes(),function(c){o(f.node(c))}),t.forEach(f.edges(),function(c){var h=f.edge(c);t.forEach(h.points,o),t.has(h,"y")&&o(h)})}function o(f){f.y=-f.y}function l(f){t.forEach(f.nodes(),function(c){u(f.node(c))}),t.forEach(f.edges(),function(c){var h=f.edge(c);t.forEach(h.points,u),t.has(h,"x")&&u(h)})}function u(f){var c=f.x;f.x=f.y,f.y=c}return J0}var eb,NM;function r$(){if(NM)return eb;NM=1;var t=dr();eb=e;function e(r){var n={},a=t.filter(r.nodes(),function(f){return!r.children(f).length}),i=t.max(t.map(a,function(f){return r.node(f).rank})),o=t.map(t.range(i+1),function(){return[]});function l(f){if(!t.has(n,f)){n[f]=!0;var c=r.node(f);o[c.rank].push(f),t.forEach(r.successors(f),l)}}var u=t.sortBy(a,function(f){return r.node(f).rank});return t.forEach(u,l),o}return eb}var tb,kM;function n$(){if(kM)return tb;kM=1;var t=dr();tb=e;function e(n,a){for(var i=0,o=1;o<a.length;++o)i+=r(n,a[o-1],a[o]);return i}function r(n,a,i){for(var o=t.zipObject(i,t.map(i,function(g,p){return p})),l=t.flatten(t.map(a,function(g){return t.sortBy(t.map(n.outEdges(g),function(p){return{pos:o[p.w],weight:n.edge(p).weight}}),"pos")}),!0),u=1;u<i.length;)u<<=1;var f=2*u-1;u-=1;var c=t.map(new Array(f),function(){return 0}),h=0;return t.forEach(l.forEach(function(g){var p=g.pos+u;c[p]+=g.weight;for(var y=0;p>0;)p%2&&(y+=c[p+1]),p=p-1>>1,c[p]+=g.weight;h+=g.weight*y})),h}return tb}var rb,OM;function a$(){if(OM)return rb;OM=1;var t=dr();rb=e;function e(r,n){return t.map(n,function(a){var i=r.inEdges(a);if(i.length){var o=t.reduce(i,function(l,u){var f=r.edge(u),c=r.node(u.v);return{sum:l.sum+f.weight*c.order,weight:l.weight+f.weight}},{sum:0,weight:0});return{v:a,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:a}})}return rb}var nb,IM;function i$(){if(IM)return nb;IM=1;var t=dr();nb=e;function e(a,i){var o={};t.forEach(a,function(u,f){var c=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:f};t.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),t.forEach(i.edges(),function(u){var f=o[u.v],c=o[u.w];!t.isUndefined(f)&&!t.isUndefined(c)&&(c.indegree++,f.out.push(o[u.w]))});var l=t.filter(o,function(u){return!u.indegree});return r(l)}function r(a){var i=[];function o(f){return function(c){c.merged||(t.isUndefined(c.barycenter)||t.isUndefined(f.barycenter)||c.barycenter>=f.barycenter)&&n(f,c)}}function l(f){return function(c){c.in.push(f),--c.indegree===0&&a.push(c)}}for(;a.length;){var u=a.pop();i.push(u),t.forEach(u.in.reverse(),o(u)),t.forEach(u.out,l(u))}return t.map(t.filter(i,function(f){return!f.merged}),function(f){return t.pick(f,["vs","i","barycenter","weight"])})}function n(a,i){var o=0,l=0;a.weight&&(o+=a.barycenter*a.weight,l+=a.weight),i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),a.vs=i.vs.concat(a.vs),a.barycenter=o/l,a.weight=l,a.i=Math.min(i.i,a.i),i.merged=!0}return nb}var ab,FM;function o$(){if(FM)return ab;FM=1;var t=dr(),e=Nn();ab=r;function r(i,o){var l=e.partition(i,function(C){return t.has(C,"barycenter")}),u=l.lhs,f=t.sortBy(l.rhs,function(C){return-C.i}),c=[],h=0,g=0,p=0;u.sort(a(!!o)),p=n(c,f,p),t.forEach(u,function(C){p+=C.vs.length,c.push(C.vs),h+=C.barycenter*C.weight,g+=C.weight,p=n(c,f,p)});var y={vs:t.flatten(c,!0)};return g&&(y.barycenter=h/g,y.weight=g),y}function n(i,o,l){for(var u;o.length&&(u=t.last(o)).i<=l;)o.pop(),i.push(u.vs),l++;return l}function a(i){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:i?l.i-o.i:o.i-l.i}}return ab}var ib,BM;function s$(){if(BM)return ib;BM=1;var t=dr(),e=a$(),r=i$(),n=o$();ib=a;function a(l,u,f,c){var h=l.children(u),g=l.node(u),p=g?g.borderLeft:void 0,y=g?g.borderRight:void 0,C={};p&&(h=t.filter(h,function(A){return A!==p&&A!==y}));var E=e(l,h);t.forEach(E,function(A){if(l.children(A.v).length){var _=a(l,A.v,f,c);C[A.v]=_,t.has(_,"barycenter")&&o(A,_)}});var v=r(E,f);i(v,C);var x=n(v,c);if(p&&(x.vs=t.flatten([p,x.vs,y],!0),l.predecessors(p).length)){var w=l.node(l.predecessors(p)[0]),T=l.node(l.predecessors(y)[0]);t.has(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+w.order+T.order)/(x.weight+2),x.weight+=2}return x}function i(l,u){t.forEach(l,function(f){f.vs=t.flatten(f.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function o(l,u){t.isUndefined(l.barycenter)?(l.barycenter=u.barycenter,l.weight=u.weight):(l.barycenter=(l.barycenter*l.weight+u.barycenter*u.weight)/(l.weight+u.weight),l.weight+=u.weight)}return ib}var ob,qM;function l$(){if(qM)return ob;qM=1;var t=dr(),e=ua().Graph;ob=r;function r(a,i,o){var l=n(a),u=new e({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(f){return a.node(f)});return t.forEach(a.nodes(),function(f){var c=a.node(f),h=a.parent(f);(c.rank===i||c.minRank<=i&&i<=c.maxRank)&&(u.setNode(f),u.setParent(f,h||l),t.forEach(a[o](f),function(g){var p=g.v===f?g.w:g.v,y=u.edge(p,f),C=t.isUndefined(y)?0:y.weight;u.setEdge(p,f,{weight:a.edge(g).weight+C})}),t.has(c,"minRank")&&u.setNode(f,{borderLeft:c.borderLeft[i],borderRight:c.borderRight[i]}))}),u}function n(a){for(var i;a.hasNode(i=t.uniqueId("_root")););return i}return ob}var sb,zM;function u$(){if(zM)return sb;zM=1;var t=dr();sb=e;function e(r,n,a){var i={},o;t.forEach(a,function(l){for(var u=r.parent(l),f,c;u;){if(f=r.parent(u),f?(c=i[f],i[f]=u):(c=o,o=u),c&&c!==u){n.setEdge(c,u);return}u=f}})}return sb}var lb,GM;function f$(){if(GM)return lb;GM=1;var t=dr(),e=r$(),r=n$(),n=s$(),a=l$(),i=u$(),o=ua().Graph,l=Nn();lb=u;function u(g){var p=l.maxRank(g),y=f(g,t.range(1,p+1),"inEdges"),C=f(g,t.range(p-1,-1,-1),"outEdges"),E=e(g);h(g,E);for(var v=Number.POSITIVE_INFINITY,x,w=0,T=0;T<4;++w,++T){c(w%2?y:C,w%4>=2),E=l.buildLayerMatrix(g);var A=r(g,E);A<v&&(T=0,x=t.cloneDeep(E),v=A)}h(g,x)}function f(g,p,y){return t.map(p,function(C){return a(g,C,y)})}function c(g,p){var y=new o;t.forEach(g,function(C){var E=C.graph().root,v=n(C,E,y,p);t.forEach(v.vs,function(x,w){C.node(x).order=w}),i(C,y,v.vs)})}function h(g,p){t.forEach(p,function(y){t.forEach(y,function(C,E){g.node(C).order=E})})}return lb}var ub,HM;function c$(){if(HM)return ub;HM=1;var t=dr(),e=ua().Graph,r=Nn();ub={positionX:y,findType1Conflicts:n,findType2Conflicts:a,addConflict:o,hasConflict:l,verticalAlignment:u,horizontalCompaction:f,alignCoordinates:g,findSmallestWidthAlignment:h,balance:p};function n(v,x){var w={};function T(A,_){var D=0,P=0,N=A.length,B=t.last(_);return t.forEach(_,function(G,F){var z=i(v,G),M=z?v.node(z).order:N;(z||G===B)&&(t.forEach(_.slice(P,F+1),function(R){t.forEach(v.predecessors(R),function(k){var I=v.node(k),q=I.order;(q<D||M<q)&&!(I.dummy&&v.node(R).dummy)&&o(w,k,R)})}),P=F+1,D=M)}),_}return t.reduce(x,T),w}function a(v,x){var w={};function T(_,D,P,N,B){var G;t.forEach(t.range(D,P),function(F){G=_[F],v.node(G).dummy&&t.forEach(v.predecessors(G),function(z){var M=v.node(z);M.dummy&&(M.order<N||M.order>B)&&o(w,z,G)})})}function A(_,D){var P=-1,N,B=0;return t.forEach(D,function(G,F){if(v.node(G).dummy==="border"){var z=v.predecessors(G);z.length&&(N=v.node(z[0]).order,T(D,B,F,P,N),B=F,P=N)}T(D,B,D.length,N,_.length)}),D}return t.reduce(x,A),w}function i(v,x){if(v.node(x).dummy)return t.find(v.predecessors(x),function(w){return v.node(w).dummy})}function o(v,x,w){if(x>w){var T=x;x=w,w=T}var A=v[x];A||(v[x]=A={}),A[w]=!0}function l(v,x,w){if(x>w){var T=x;x=w,w=T}return t.has(v[x],w)}function u(v,x,w,T){var A={},_={},D={};return t.forEach(x,function(P){t.forEach(P,function(N,B){A[N]=N,_[N]=N,D[N]=B})}),t.forEach(x,function(P){var N=-1;t.forEach(P,function(B){var G=T(B);if(G.length){G=t.sortBy(G,function(k){return D[k]});for(var F=(G.length-1)/2,z=Math.floor(F),M=Math.ceil(F);z<=M;++z){var R=G[z];_[B]===B&&N<D[R]&&!l(w,B,R)&&(_[R]=B,_[B]=A[B]=A[R],N=D[R])}}})}),{root:A,align:_}}function f(v,x,w,T,A){var _={},D=c(v,x,w,A),P=A?"borderLeft":"borderRight";function N(F,z){for(var M=D.nodes(),R=M.pop(),k={};R;)k[R]?F(R):(k[R]=!0,M.push(R),M=M.concat(z(R))),R=M.pop()}function B(F){_[F]=D.inEdges(F).reduce(function(z,M){return Math.max(z,_[M.v]+D.edge(M))},0)}function G(F){var z=D.outEdges(F).reduce(function(R,k){return Math.min(R,_[k.w]-D.edge(k))},Number.POSITIVE_INFINITY),M=v.node(F);z!==Number.POSITIVE_INFINITY&&M.borderType!==P&&(_[F]=Math.max(_[F],z))}return N(B,D.predecessors.bind(D)),N(G,D.successors.bind(D)),t.forEach(T,function(F){_[F]=_[w[F]]}),_}function c(v,x,w,T){var A=new e,_=v.graph(),D=C(_.nodesep,_.edgesep,T);return t.forEach(x,function(P){var N;t.forEach(P,function(B){var G=w[B];if(A.setNode(G),N){var F=w[N],z=A.edge(F,G);A.setEdge(F,G,Math.max(D(v,B,N),z||0))}N=B})}),A}function h(v,x){return t.minBy(t.values(x),function(w){var T=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return t.forIn(w,function(_,D){var P=E(v,D)/2;T=Math.max(_+P,T),A=Math.min(_-P,A)}),T-A})}function g(v,x){var w=t.values(x),T=t.min(w),A=t.max(w);t.forEach(["u","d"],function(_){t.forEach(["l","r"],function(D){var P=_+D,N=v[P],B;if(N!==x){var G=t.values(N);B=D==="l"?T-t.min(G):A-t.max(G),B&&(v[P]=t.mapValues(N,function(F){return F+B}))}})})}function p(v,x){return t.mapValues(v.ul,function(w,T){if(x)return v[x.toLowerCase()][T];var A=t.sortBy(t.map(v,T));return(A[1]+A[2])/2})}function y(v){var x=r.buildLayerMatrix(v),w=t.merge(n(v,x),a(v,x)),T={},A;t.forEach(["u","d"],function(D){A=D==="u"?x:t.values(x).reverse(),t.forEach(["l","r"],function(P){P==="r"&&(A=t.map(A,function(F){return t.values(F).reverse()}));var N=(D==="u"?v.predecessors:v.successors).bind(v),B=u(v,A,w,N),G=f(v,A,B.root,B.align,P==="r");P==="r"&&(G=t.mapValues(G,function(F){return-F})),T[D+P]=G})});var _=h(v,T);return g(T,_),p(T,v.graph().align)}function C(v,x,w){return function(T,A,_){var D=T.node(A),P=T.node(_),N=0,B;if(N+=D.width/2,t.has(D,"labelpos"))switch(D.labelpos.toLowerCase()){case"l":B=-D.width/2;break;case"r":B=D.width/2;break}if(B&&(N+=w?B:-B),B=0,N+=(D.dummy?x:v)/2,N+=(P.dummy?x:v)/2,N+=P.width/2,t.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":B=P.width/2;break;case"r":B=-P.width/2;break}return B&&(N+=w?B:-B),B=0,N}}function E(v,x){return v.node(x).width}return ub}var fb,UM;function d$(){if(UM)return fb;UM=1;var t=dr(),e=Nn(),r=c$().positionX;fb=n;function n(i){i=e.asNonCompoundGraph(i),a(i),t.forEach(r(i),function(o,l){i.node(l).x=o})}function a(i){var o=e.buildLayerMatrix(i),l=i.graph().ranksep,u=0;t.forEach(o,function(f){var c=t.max(t.map(f,function(h){return i.node(h).height}));t.forEach(f,function(h){i.node(h).y=u+c/2}),u+=c+l})}return fb}var cb,WM;function h$(){if(WM)return cb;WM=1;var t=dr(),e=X4(),r=K4(),n=Z4(),a=Nn().normalizeRanks,i=Q4(),o=Nn().removeEmptyRanks,l=J4(),u=e$(),f=t$(),c=f$(),h=d$(),g=Nn(),p=ua().Graph;cb=y;function y(U,V){var X=V&&V.debugTiming?g.time:g.notime;X("layout",function(){var ee=X("  buildLayoutGraph",function(){return N(U)});X("  runLayout",function(){C(ee,X)}),X("  updateInputGraph",function(){E(U,ee)})})}function C(U,V){V("    makeSpaceForEdgeLabels",function(){B(U)}),V("    removeSelfEdges",function(){ae(U)}),V("    acyclic",function(){e.run(U)}),V("    nestingGraph.run",function(){l.run(U)}),V("    rank",function(){n(g.asNonCompoundGraph(U))}),V("    injectEdgeLabelProxies",function(){G(U)}),V("    removeEmptyRanks",function(){o(U)}),V("    nestingGraph.cleanup",function(){l.cleanup(U)}),V("    normalizeRanks",function(){a(U)}),V("    assignRankMinMax",function(){F(U)}),V("    removeEdgeLabelProxies",function(){z(U)}),V("    normalize.run",function(){r.run(U)}),V("    parentDummyChains",function(){i(U)}),V("    addBorderSegments",function(){u(U)}),V("    order",function(){c(U)}),V("    insertSelfEdges",function(){re(U)}),V("    adjustCoordinateSystem",function(){f.adjust(U)}),V("    position",function(){h(U)}),V("    positionSelfEdges",function(){K(U)}),V("    removeBorderNodes",function(){q(U)}),V("    normalize.undo",function(){r.undo(U)}),V("    fixupEdgeLabelCoords",function(){k(U)}),V("    undoCoordinateSystem",function(){f.undo(U)}),V("    translateGraph",function(){M(U)}),V("    assignNodeIntersects",function(){R(U)}),V("    reversePoints",function(){I(U)}),V("    acyclic.undo",function(){e.undo(U)})}function E(U,V){t.forEach(U.nodes(),function(X){var ee=U.node(X),se=V.node(X);ee&&(ee.x=se.x,ee.y=se.y,V.children(X).length&&(ee.width=se.width,ee.height=se.height))}),t.forEach(U.edges(),function(X){var ee=U.edge(X),se=V.edge(X);ee.points=se.points,t.has(se,"x")&&(ee.x=se.x,ee.y=se.y)}),U.graph().width=V.graph().width,U.graph().height=V.graph().height}var v=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},w=["acyclicer","ranker","rankdir","align"],T=["width","height"],A={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],D={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},P=["labelpos"];function N(U){var V=new p({multigraph:!0,compound:!0}),X=Z(U.graph());return V.setGraph(t.merge({},x,W(X,v),t.pick(X,w))),t.forEach(U.nodes(),function(ee){var se=Z(U.node(ee));V.setNode(ee,t.defaults(W(se,T),A)),V.setParent(ee,U.parent(ee))}),t.forEach(U.edges(),function(ee){var se=Z(U.edge(ee));V.setEdge(ee,t.merge({},D,W(se,_),t.pick(se,P)))}),V}function B(U){var V=U.graph();V.ranksep/=2,t.forEach(U.edges(),function(X){var ee=U.edge(X);ee.minlen*=2,ee.labelpos.toLowerCase()!=="c"&&(V.rankdir==="TB"||V.rankdir==="BT"?ee.width+=ee.labeloffset:ee.height+=ee.labeloffset)})}function G(U){t.forEach(U.edges(),function(V){var X=U.edge(V);if(X.width&&X.height){var ee=U.node(V.v),se=U.node(V.w),te={rank:(se.rank-ee.rank)/2+ee.rank,e:V};g.addDummyNode(U,"edge-proxy",te,"_ep")}})}function F(U){var V=0;t.forEach(U.nodes(),function(X){var ee=U.node(X);ee.borderTop&&(ee.minRank=U.node(ee.borderTop).rank,ee.maxRank=U.node(ee.borderBottom).rank,V=t.max(V,ee.maxRank))}),U.graph().maxRank=V}function z(U){t.forEach(U.nodes(),function(V){var X=U.node(V);X.dummy==="edge-proxy"&&(U.edge(X.e).labelRank=X.rank,U.removeNode(V))})}function M(U){var V=Number.POSITIVE_INFINITY,X=0,ee=Number.POSITIVE_INFINITY,se=0,te=U.graph(),oe=te.marginx||0,le=te.marginy||0;function $(ne){var ie=ne.x,ue=ne.y,me=ne.width,ge=ne.height;V=Math.min(V,ie-me/2),X=Math.max(X,ie+me/2),ee=Math.min(ee,ue-ge/2),se=Math.max(se,ue+ge/2)}t.forEach(U.nodes(),function(ne){$(U.node(ne))}),t.forEach(U.edges(),function(ne){var ie=U.edge(ne);t.has(ie,"x")&&$(ie)}),V-=oe,ee-=le,t.forEach(U.nodes(),function(ne){var ie=U.node(ne);ie.x-=V,ie.y-=ee}),t.forEach(U.edges(),function(ne){var ie=U.edge(ne);t.forEach(ie.points,function(ue){ue.x-=V,ue.y-=ee}),t.has(ie,"x")&&(ie.x-=V),t.has(ie,"y")&&(ie.y-=ee)}),te.width=X-V+oe,te.height=se-ee+le}function R(U){t.forEach(U.edges(),function(V){var X=U.edge(V),ee=U.node(V.v),se=U.node(V.w),te,oe;X.points?(te=X.points[0],oe=X.points[X.points.length-1]):(X.points=[],te=se,oe=ee),X.points.unshift(g.intersectRect(ee,te)),X.points.push(g.intersectRect(se,oe))})}function k(U){t.forEach(U.edges(),function(V){var X=U.edge(V);if(t.has(X,"x"))switch((X.labelpos==="l"||X.labelpos==="r")&&(X.width-=X.labeloffset),X.labelpos){case"l":X.x-=X.width/2+X.labeloffset;break;case"r":X.x+=X.width/2+X.labeloffset;break}})}function I(U){t.forEach(U.edges(),function(V){var X=U.edge(V);X.reversed&&X.points.reverse()})}function q(U){t.forEach(U.nodes(),function(V){if(U.children(V).length){var X=U.node(V),ee=U.node(X.borderTop),se=U.node(X.borderBottom),te=U.node(t.last(X.borderLeft)),oe=U.node(t.last(X.borderRight));X.width=Math.abs(oe.x-te.x),X.height=Math.abs(se.y-ee.y),X.x=te.x+X.width/2,X.y=ee.y+X.height/2}}),t.forEach(U.nodes(),function(V){U.node(V).dummy==="border"&&U.removeNode(V)})}function ae(U){t.forEach(U.edges(),function(V){if(V.v===V.w){var X=U.node(V.v);X.selfEdges||(X.selfEdges=[]),X.selfEdges.push({e:V,label:U.edge(V)}),U.removeEdge(V)}})}function re(U){var V=g.buildLayerMatrix(U);t.forEach(V,function(X){var ee=0;t.forEach(X,function(se,te){var oe=U.node(se);oe.order=te+ee,t.forEach(oe.selfEdges,function(le){g.addDummyNode(U,"selfedge",{width:le.label.width,height:le.label.height,rank:oe.rank,order:te+ ++ee,e:le.e,label:le.label},"_se")}),delete oe.selfEdges})})}function K(U){t.forEach(U.nodes(),function(V){var X=U.node(V);if(X.dummy==="selfedge"){var ee=U.node(X.e.v),se=ee.x+ee.width/2,te=ee.y,oe=X.x-se,le=ee.height/2;U.setEdge(X.e,X.label),U.removeNode(V),X.label.points=[{x:se+2*oe/3,y:te-le},{x:se+5*oe/6,y:te-le},{x:se+oe,y:te},{x:se+5*oe/6,y:te+le},{x:se+2*oe/3,y:te+le}],X.label.x=X.x,X.label.y=X.y}})}function W(U,V){return t.mapValues(t.pick(U,V),Number)}function Z(U){var V={};return t.forEach(U,function(X,ee){V[ee.toLowerCase()]=X}),V}return cb}var db,VM;function v$(){if(VM)return db;VM=1;var t=dr(),e=Nn(),r=ua().Graph;db={debugOrdering:n};function n(a){var i=e.buildLayerMatrix(a),o=new r({compound:!0,multigraph:!0}).setGraph({});return t.forEach(a.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+a.node(l).rank)}),t.forEach(a.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),t.forEach(i,function(l,u){var f="layer"+u;o.setNode(f,{rank:"same"}),t.reduce(l,function(c,h){return o.setEdge(c,h,{style:"invis"}),h})}),o}return db}var hb,$M;function p$(){return $M||($M=1,hb="0.8.5"),hb}var vb,YM;function g$(){return YM||(YM=1,vb={graphlib:ua(),layout:h$(),debug:v$(),util:{time:Nn().time,notime:Nn().notime},version:p$()}),vb}var y$=Pf.exports,XM;function m$(){return XM||(XM=1,function(t,e){(function(n,a){t.exports=a(g$())})(y$,function(r){return function(n){var a={};function i(o){if(a[o])return a[o].exports;var l=a[o]={i:o,l:!1,exports:{}};return n[o].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=n,i.c=a,i.d=function(o,l,u){i.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:u})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,l){if(l&1&&(o=i(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(i.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var f in o)i.d(u,f,(function(c){return o[c]}).bind(null,f));return u},i.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(l,"a",l),l},i.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},i.p="",i(i.s=0)}([function(n,a,i){var o=i(1),l=function(f){f&&f("layout","dagre",o)};typeof cytoscape<"u"&&l(cytoscape),n.exports=l},function(n,a,i){function o(g){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(y){return typeof y}:o=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},o(g)}var l=function(p){return typeof p=="function"},u=i(2),f=i(3),c=i(4);function h(g){this.options=f({},u,g)}h.prototype.run=function(){var g=this.options,p=this,y=g.cy,C=g.eles,E=function(K,W){return l(W)?W.apply(K,[K]):W},v=g.boundingBox||{x1:0,y1:0,w:y.width(),h:y.height()};v.x2===void 0&&(v.x2=v.x1+v.w),v.w===void 0&&(v.w=v.x2-v.x1),v.y2===void 0&&(v.y2=v.y1+v.h),v.h===void 0&&(v.h=v.y2-v.y1);var x=new c.graphlib.Graph({multigraph:!0,compound:!0}),w={},T=function(K,W){W!=null&&(w[K]=W)};T("nodesep",g.nodeSep),T("edgesep",g.edgeSep),T("ranksep",g.rankSep),T("rankdir",g.rankDir),T("align",g.align),T("ranker",g.ranker),T("acyclicer",g.acyclicer),x.setGraph(w),x.setDefaultEdgeLabel(function(){return{}}),x.setDefaultNodeLabel(function(){return{}});var A=C.nodes();l(g.sort)&&(A=A.sort(g.sort));for(var _=0;_<A.length;_++){var D=A[_],P=D.layoutDimensions(g);x.setNode(D.id(),{width:P.w,height:P.h,name:D.id()})}for(var N=0;N<A.length;N++){var B=A[N];B.isChild()&&x.setParent(B.id(),B.parent().id())}var G=C.edges().stdFilter(function(re){return!re.source().isParent()&&!re.target().isParent()});l(g.sort)&&(G=G.sort(g.sort));for(var F=0;F<G.length;F++){var z=G[F];x.setEdge(z.source().id(),z.target().id(),{minlen:E(z,g.minLen),weight:E(z,g.edgeWeight),name:z.id()},z.id())}c.layout(x);for(var M=x.nodes(),R=0;R<M.length;R++){var k=M[R],I=x.node(k);y.getElementById(k).scratch().dagre=I}var q;g.boundingBox?(q={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},A.forEach(function(re){var K=re.scratch().dagre;q.x1=Math.min(q.x1,K.x),q.x2=Math.max(q.x2,K.x),q.y1=Math.min(q.y1,K.y),q.y2=Math.max(q.y2,K.y)}),q.w=q.x2-q.x1,q.h=q.y2-q.y1):q=v;var ae=function(K){if(g.boundingBox){var W=q.w===0?0:(K.x-q.x1)/q.w,Z=q.h===0?0:(K.y-q.y1)/q.h;return{x:v.x1+W*v.w,y:v.y1+Z*v.h}}else return K};return A.layoutPositions(p,g,function(re){re=o(re)==="object"?re:this;var K=re.scratch().dagre;return ae({x:K.x,y:K.y})}),this},n.exports=h},function(n,a){var i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(l){return 1},edgeWeight:function(l){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(l,u){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(l,u){return u},ready:function(){},sort:void 0,stop:function(){}};n.exports=i},function(n,a){n.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];return l.forEach(function(f){Object.keys(f).forEach(function(c){return i[c]=f[c]})}),i}},function(n,a){n.exports=r}])})}(Pf)),Pf.exports}var b$=m$();const w$=To(b$);var Nf={exports:{}},kf={exports:{}},Of={exports:{}},x$=Of.exports,KM;function C$(){return KM||(KM=1,function(t,e){(function(n,a){t.exports=a()})(x$,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.i=function(i){return i},a.d=function(i,o,l){a.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=28)}([function(r,n,a){function i(){}i.QUALITY=1,i.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,i.DEFAULT_INCREMENTAL=!1,i.DEFAULT_ANIMATION_ON_LAYOUT=!0,i.DEFAULT_ANIMATION_DURING_LAYOUT=!1,i.DEFAULT_ANIMATION_PERIOD=50,i.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,i.DEFAULT_GRAPH_MARGIN=15,i.NODE_DIMENSIONS_INCLUDE_LABELS=!1,i.SIMPLE_NODE_SIZE=40,i.SIMPLE_NODE_HALF_SIZE=i.SIMPLE_NODE_SIZE/2,i.EMPTY_COMPOUND_NODE_SIZE=40,i.MIN_EDGE_LENGTH=1,i.WORLD_BOUNDARY=1e6,i.INITIAL_WORLD_BOUNDARY=i.WORLD_BOUNDARY/1e3,i.WORLD_CENTER_X=1200,i.WORLD_CENTER_Y=900,r.exports=i},function(r,n,a){var i=a(2),o=a(8),l=a(9);function u(c,h,g){i.call(this,g),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=g,this.bendpoints=[],this.source=c,this.target=h}u.prototype=Object.create(i.prototype);for(var f in i)u[f]=i[f];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(c){if(this.source===c)return this.target;if(this.target===c)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(c,h){for(var g=this.getOtherEnd(c),p=h.getGraphManager().getRoot();;){if(g.getOwner()==h)return g;if(g.getOwner()==p)break;g=g.getOwner().getParent()}return null},u.prototype.updateLength=function(){var c=new Array(4);this.isOverlapingSourceAndTarget=o.getIntersection(this.target.getRect(),this.source.getRect(),c),this.isOverlapingSourceAndTarget||(this.lengthX=c[0]-c[2],this.lengthY=c[1]-c[3],Math.abs(this.lengthX)<1&&(this.lengthX=l.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=l.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=l.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=l.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=u},function(r,n,a){function i(o){this.vGraphObject=o}r.exports=i},function(r,n,a){var i=a(2),o=a(10),l=a(13),u=a(0),f=a(16),c=a(5);function h(p,y,C,E){C==null&&E==null&&(E=y),i.call(this,E),p.graphManager!=null&&(p=p.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=E,this.edges=[],this.graphManager=p,C!=null&&y!=null?this.rect=new l(y.x,y.y,C.width,C.height):this.rect=new l}h.prototype=Object.create(i.prototype);for(var g in i)h[g]=i[g];h.prototype.getEdges=function(){return this.edges},h.prototype.getChild=function(){return this.child},h.prototype.getOwner=function(){return this.owner},h.prototype.getWidth=function(){return this.rect.width},h.prototype.setWidth=function(p){this.rect.width=p},h.prototype.getHeight=function(){return this.rect.height},h.prototype.setHeight=function(p){this.rect.height=p},h.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},h.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},h.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},h.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},h.prototype.getRect=function(){return this.rect},h.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},h.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},h.prototype.setRect=function(p,y){this.rect.x=p.x,this.rect.y=p.y,this.rect.width=y.width,this.rect.height=y.height},h.prototype.setCenter=function(p,y){this.rect.x=p-this.rect.width/2,this.rect.y=y-this.rect.height/2},h.prototype.setLocation=function(p,y){this.rect.x=p,this.rect.y=y},h.prototype.moveBy=function(p,y){this.rect.x+=p,this.rect.y+=y},h.prototype.getEdgeListToNode=function(p){var y=[],C=this;return C.edges.forEach(function(E){if(E.target==p){if(E.source!=C)throw"Incorrect edge source!";y.push(E)}}),y},h.prototype.getEdgesBetween=function(p){var y=[],C=this;return C.edges.forEach(function(E){if(!(E.source==C||E.target==C))throw"Incorrect edge source and/or target";(E.target==p||E.source==p)&&y.push(E)}),y},h.prototype.getNeighborsList=function(){var p=new Set,y=this;return y.edges.forEach(function(C){if(C.source==y)p.add(C.target);else{if(C.target!=y)throw"Incorrect incidency!";p.add(C.source)}}),p},h.prototype.withChildren=function(){var p=new Set,y,C;if(p.add(this),this.child!=null)for(var E=this.child.getNodes(),v=0;v<E.length;v++)y=E[v],C=y.withChildren(),C.forEach(function(x){p.add(x)});return p},h.prototype.getNoOfChildren=function(){var p=0,y;if(this.child==null)p=1;else for(var C=this.child.getNodes(),E=0;E<C.length;E++)y=C[E],p+=y.getNoOfChildren();return p==0&&(p=1),p},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},h.prototype.scatter=function(){var p,y,C=-u.INITIAL_WORLD_BOUNDARY,E=u.INITIAL_WORLD_BOUNDARY;p=u.WORLD_CENTER_X+f.nextDouble()*(E-C)+C;var v=-u.INITIAL_WORLD_BOUNDARY,x=u.INITIAL_WORLD_BOUNDARY;y=u.WORLD_CENTER_Y+f.nextDouble()*(x-v)+v,this.rect.x=p,this.rect.y=y},h.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var p=this.getChild();if(p.updateBounds(!0),this.rect.x=p.getLeft(),this.rect.y=p.getTop(),this.setWidth(p.getRight()-p.getLeft()),this.setHeight(p.getBottom()-p.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var y=p.getRight()-p.getLeft(),C=p.getBottom()-p.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(y+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>y?(this.rect.x-=(this.labelWidth-y)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(y+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(C+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>C?(this.rect.y-=(this.labelHeight-C)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(C+this.labelHeight))}}},h.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},h.prototype.transform=function(p){var y=this.rect.x;y>u.WORLD_BOUNDARY?y=u.WORLD_BOUNDARY:y<-u.WORLD_BOUNDARY&&(y=-u.WORLD_BOUNDARY);var C=this.rect.y;C>u.WORLD_BOUNDARY?C=u.WORLD_BOUNDARY:C<-u.WORLD_BOUNDARY&&(C=-u.WORLD_BOUNDARY);var E=new c(y,C),v=p.inverseTransformPoint(E);this.setLocation(v.x,v.y)},h.prototype.getLeft=function(){return this.rect.x},h.prototype.getRight=function(){return this.rect.x+this.rect.width},h.prototype.getTop=function(){return this.rect.y},h.prototype.getBottom=function(){return this.rect.y+this.rect.height},h.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=h},function(r,n,a){var i=a(0);function o(){}for(var l in i)o[l]=i[l];o.MAX_ITERATIONS=2500,o.DEFAULT_EDGE_LENGTH=50,o.DEFAULT_SPRING_STRENGTH=.45,o.DEFAULT_REPULSION_STRENGTH=4500,o.DEFAULT_GRAVITY_STRENGTH=.4,o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,o.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,o.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,o.COOLING_ADAPTATION_FACTOR=.33,o.ADAPTATION_LOWER_NODE_LIMIT=1e3,o.ADAPTATION_UPPER_NODE_LIMIT=5e3,o.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,o.MAX_NODE_DISPLACEMENT=o.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,o.MIN_REPULSION_DIST=o.DEFAULT_EDGE_LENGTH/10,o.CONVERGENCE_CHECK_PERIOD=100,o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,o.MIN_EDGE_LENGTH=1,o.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=o},function(r,n,a){function i(o,l){o==null&&l==null?(this.x=0,this.y=0):(this.x=o,this.y=l)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.setX=function(o){this.x=o},i.prototype.setY=function(o){this.y=o},i.prototype.getDifference=function(o){return new DimensionD(this.x-o.x,this.y-o.y)},i.prototype.getCopy=function(){return new i(this.x,this.y)},i.prototype.translate=function(o){return this.x+=o.width,this.y+=o.height,this},r.exports=i},function(r,n,a){var i=a(2),o=a(10),l=a(0),u=a(7),f=a(3),c=a(1),h=a(13),g=a(12),p=a(11);function y(E,v,x){i.call(this,x),this.estimatedSize=o.MIN_VALUE,this.margin=l.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=E,v!=null&&v instanceof u?this.graphManager=v:v!=null&&v instanceof Layout&&(this.graphManager=v.graphManager)}y.prototype=Object.create(i.prototype);for(var C in i)y[C]=i[C];y.prototype.getNodes=function(){return this.nodes},y.prototype.getEdges=function(){return this.edges},y.prototype.getGraphManager=function(){return this.graphManager},y.prototype.getParent=function(){return this.parent},y.prototype.getLeft=function(){return this.left},y.prototype.getRight=function(){return this.right},y.prototype.getTop=function(){return this.top},y.prototype.getBottom=function(){return this.bottom},y.prototype.isConnected=function(){return this.isConnected},y.prototype.add=function(E,v,x){if(v==null&&x==null){var w=E;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(w)>-1)throw"Node already in graph!";return w.owner=this,this.getNodes().push(w),w}else{var T=E;if(!(this.getNodes().indexOf(v)>-1&&this.getNodes().indexOf(x)>-1))throw"Source or target not in graph!";if(!(v.owner==x.owner&&v.owner==this))throw"Both owners must be this graph!";return v.owner!=x.owner?null:(T.source=v,T.target=x,T.isInterGraph=!1,this.getEdges().push(T),v.edges.push(T),x!=v&&x.edges.push(T),T)}},y.prototype.remove=function(E){var v=E;if(E instanceof f){if(v==null)throw"Node is null!";if(!(v.owner!=null&&v.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var x=v.edges.slice(),w,T=x.length,A=0;A<T;A++)w=x[A],w.isInterGraph?this.graphManager.remove(w):w.source.owner.remove(w);var _=this.nodes.indexOf(v);if(_==-1)throw"Node not in owner node list!";this.nodes.splice(_,1)}else if(E instanceof c){var w=E;if(w==null)throw"Edge is null!";if(!(w.source!=null&&w.target!=null))throw"Source and/or target is null!";if(!(w.source.owner!=null&&w.target.owner!=null&&w.source.owner==this&&w.target.owner==this))throw"Source and/or target owner is invalid!";var D=w.source.edges.indexOf(w),P=w.target.edges.indexOf(w);if(!(D>-1&&P>-1))throw"Source and/or target doesn't know this edge!";w.source.edges.splice(D,1),w.target!=w.source&&w.target.edges.splice(P,1);var _=w.source.owner.getEdges().indexOf(w);if(_==-1)throw"Not in owner's edge list!";w.source.owner.getEdges().splice(_,1)}},y.prototype.updateLeftTop=function(){for(var E=o.MAX_VALUE,v=o.MAX_VALUE,x,w,T,A=this.getNodes(),_=A.length,D=0;D<_;D++){var P=A[D];x=P.getTop(),w=P.getLeft(),E>x&&(E=x),v>w&&(v=w)}return E==o.MAX_VALUE?null:(A[0].getParent().paddingLeft!=null?T=A[0].getParent().paddingLeft:T=this.margin,this.left=v-T,this.top=E-T,new g(this.left,this.top))},y.prototype.updateBounds=function(E){for(var v=o.MAX_VALUE,x=-o.MAX_VALUE,w=o.MAX_VALUE,T=-o.MAX_VALUE,A,_,D,P,N,B=this.nodes,G=B.length,F=0;F<G;F++){var z=B[F];E&&z.child!=null&&z.updateBounds(),A=z.getLeft(),_=z.getRight(),D=z.getTop(),P=z.getBottom(),v>A&&(v=A),x<_&&(x=_),w>D&&(w=D),T<P&&(T=P)}var M=new h(v,w,x-v,T-w);v==o.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),B[0].getParent().paddingLeft!=null?N=B[0].getParent().paddingLeft:N=this.margin,this.left=M.x-N,this.right=M.x+M.width+N,this.top=M.y-N,this.bottom=M.y+M.height+N},y.calculateBounds=function(E){for(var v=o.MAX_VALUE,x=-o.MAX_VALUE,w=o.MAX_VALUE,T=-o.MAX_VALUE,A,_,D,P,N=E.length,B=0;B<N;B++){var G=E[B];A=G.getLeft(),_=G.getRight(),D=G.getTop(),P=G.getBottom(),v>A&&(v=A),x<_&&(x=_),w>D&&(w=D),T<P&&(T=P)}var F=new h(v,w,x-v,T-w);return F},y.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},y.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},y.prototype.calcEstimatedSize=function(){for(var E=0,v=this.nodes,x=v.length,w=0;w<x;w++){var T=v[w];E+=T.calcEstimatedSize()}return E==0?this.estimatedSize=l.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=E/Math.sqrt(this.nodes.length),this.estimatedSize},y.prototype.updateConnected=function(){var E=this;if(this.nodes.length==0){this.isConnected=!0;return}var v=new p,x=new Set,w=this.nodes[0],T,A,_=w.withChildren();for(_.forEach(function(F){v.push(F),x.add(F)});v.length!==0;){w=v.shift(),T=w.getEdges();for(var D=T.length,P=0;P<D;P++){var N=T[P];if(A=N.getOtherEndInGraph(w,this),A!=null&&!x.has(A)){var B=A.withChildren();B.forEach(function(F){v.push(F),x.add(F)})}}}if(this.isConnected=!1,x.size>=this.nodes.length){var G=0;x.forEach(function(F){F.owner==E&&G++}),G==this.nodes.length&&(this.isConnected=!0)}},r.exports=y},function(r,n,a){var i,o=a(1);function l(u){i=a(6),this.layout=u,this.graphs=[],this.edges=[]}l.prototype.addRoot=function(){var u=this.layout.newGraph(),f=this.layout.newNode(null),c=this.add(u,f);return this.setRootGraph(c),this.rootGraph},l.prototype.add=function(u,f,c,h,g){if(c==null&&h==null&&g==null){if(u==null)throw"Graph is null!";if(f==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(f.child!=null)throw"Already has a child!";return u.parent=f,f.child=u,u}else{g=c,h=f,c=u;var p=h.getOwner(),y=g.getOwner();if(!(p!=null&&p.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(y!=null&&y.getGraphManager()==this))throw"Target not in this graph mgr!";if(p==y)return c.isInterGraph=!1,p.add(c,h,g);if(c.isInterGraph=!0,c.source=h,c.target=g,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),!(c.source!=null&&c.target!=null))throw"Edge source and/or target is null!";if(!(c.source.edges.indexOf(c)==-1&&c.target.edges.indexOf(c)==-1))throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c}},l.prototype.remove=function(u){if(u instanceof i){var f=u;if(f.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(f==this.rootGraph||f.parent!=null&&f.parent.graphManager==this))throw"Invalid parent node!";var c=[];c=c.concat(f.getEdges());for(var h,g=c.length,p=0;p<g;p++)h=c[p],f.remove(h);var y=[];y=y.concat(f.getNodes());var C;g=y.length;for(var p=0;p<g;p++)C=y[p],f.remove(C);f==this.rootGraph&&this.setRootGraph(null);var E=this.graphs.indexOf(f);this.graphs.splice(E,1),f.parent=null}else if(u instanceof o){if(h=u,h==null)throw"Edge is null!";if(!h.isInterGraph)throw"Not an inter-graph edge!";if(!(h.source!=null&&h.target!=null))throw"Source and/or target is null!";if(!(h.source.edges.indexOf(h)!=-1&&h.target.edges.indexOf(h)!=-1))throw"Source and/or target doesn't know this edge!";var E=h.source.edges.indexOf(h);if(h.source.edges.splice(E,1),E=h.target.edges.indexOf(h),h.target.edges.splice(E,1),!(h.source.owner!=null&&h.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(h.source.owner.getGraphManager().edges.indexOf(h)==-1)throw"Not in owner graph manager's edge list!";var E=h.source.owner.getGraphManager().edges.indexOf(h);h.source.owner.getGraphManager().edges.splice(E,1)}},l.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},l.prototype.getGraphs=function(){return this.graphs},l.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],f=this.getGraphs(),c=f.length,h=0;h<c;h++)u=u.concat(f[h].getNodes());this.allNodes=u}return this.allNodes},l.prototype.resetAllNodes=function(){this.allNodes=null},l.prototype.resetAllEdges=function(){this.allEdges=null},l.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},l.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],f=this.getGraphs();f.length;for(var c=0;c<f.length;c++)u=u.concat(f[c].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},l.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},l.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},l.prototype.getRoot=function(){return this.rootGraph},l.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},l.prototype.getLayout=function(){return this.layout},l.prototype.isOneAncestorOfOther=function(u,f){if(!(u!=null&&f!=null))throw"assert failed";if(u==f)return!0;var c=u.getOwner(),h;do{if(h=c.getParent(),h==null)break;if(h==f)return!0;if(c=h.getOwner(),c==null)break}while(!0);c=f.getOwner();do{if(h=c.getParent(),h==null)break;if(h==u)return!0;if(c=h.getOwner(),c==null)break}while(!0);return!1},l.prototype.calcLowestCommonAncestors=function(){for(var u,f,c,h,g,p=this.getAllEdges(),y=p.length,C=0;C<y;C++){if(u=p[C],f=u.source,c=u.target,u.lca=null,u.sourceInLca=f,u.targetInLca=c,f==c){u.lca=f.getOwner();continue}for(h=f.getOwner();u.lca==null;){for(u.targetInLca=c,g=c.getOwner();u.lca==null;){if(g==h){u.lca=g;break}if(g==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=g.getParent(),g=u.targetInLca.getOwner()}if(h==this.rootGraph)break;u.lca==null&&(u.sourceInLca=h.getParent(),h=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},l.prototype.calcLowestCommonAncestor=function(u,f){if(u==f)return u.getOwner();var c=u.getOwner();do{if(c==null)break;var h=f.getOwner();do{if(h==null)break;if(h==c)return h;h=h.getParent().getOwner()}while(!0);c=c.getParent().getOwner()}while(!0);return c},l.prototype.calcInclusionTreeDepths=function(u,f){u==null&&f==null&&(u=this.rootGraph,f=1);for(var c,h=u.getNodes(),g=h.length,p=0;p<g;p++)c=h[p],c.inclusionTreeDepth=f,c.child!=null&&this.calcInclusionTreeDepths(c.child,f+1)},l.prototype.includesInvalidEdge=function(){for(var u,f=[],c=this.edges.length,h=0;h<c;h++)u=this.edges[h],this.isOneAncestorOfOther(u.source,u.target)&&f.push(u);for(var h=0;h<f.length;h++)this.remove(f[h]);return!1},r.exports=l},function(r,n,a){var i=a(12);function o(){}o.calcSeparationAmount=function(l,u,f,c){if(!l.intersects(u))throw"assert failed";var h=new Array(2);this.decideDirectionsForOverlappingNodes(l,u,h),f[0]=Math.min(l.getRight(),u.getRight())-Math.max(l.x,u.x),f[1]=Math.min(l.getBottom(),u.getBottom())-Math.max(l.y,u.y),l.getX()<=u.getX()&&l.getRight()>=u.getRight()?f[0]+=Math.min(u.getX()-l.getX(),l.getRight()-u.getRight()):u.getX()<=l.getX()&&u.getRight()>=l.getRight()&&(f[0]+=Math.min(l.getX()-u.getX(),u.getRight()-l.getRight())),l.getY()<=u.getY()&&l.getBottom()>=u.getBottom()?f[1]+=Math.min(u.getY()-l.getY(),l.getBottom()-u.getBottom()):u.getY()<=l.getY()&&u.getBottom()>=l.getBottom()&&(f[1]+=Math.min(l.getY()-u.getY(),u.getBottom()-l.getBottom()));var g=Math.abs((u.getCenterY()-l.getCenterY())/(u.getCenterX()-l.getCenterX()));u.getCenterY()===l.getCenterY()&&u.getCenterX()===l.getCenterX()&&(g=1);var p=g*f[0],y=f[1]/g;f[0]<y?y=f[0]:p=f[1],f[0]=-1*h[0]*(y/2+c),f[1]=-1*h[1]*(p/2+c)},o.decideDirectionsForOverlappingNodes=function(l,u,f){l.getCenterX()<u.getCenterX()?f[0]=-1:f[0]=1,l.getCenterY()<u.getCenterY()?f[1]=-1:f[1]=1},o.getIntersection2=function(l,u,f){var c=l.getCenterX(),h=l.getCenterY(),g=u.getCenterX(),p=u.getCenterY();if(l.intersects(u))return f[0]=c,f[1]=h,f[2]=g,f[3]=p,!0;var y=l.getX(),C=l.getY(),E=l.getRight(),v=l.getX(),x=l.getBottom(),w=l.getRight(),T=l.getWidthHalf(),A=l.getHeightHalf(),_=u.getX(),D=u.getY(),P=u.getRight(),N=u.getX(),B=u.getBottom(),G=u.getRight(),F=u.getWidthHalf(),z=u.getHeightHalf(),M=!1,R=!1;if(c===g){if(h>p)return f[0]=c,f[1]=C,f[2]=g,f[3]=B,!1;if(h<p)return f[0]=c,f[1]=x,f[2]=g,f[3]=D,!1}else if(h===p){if(c>g)return f[0]=y,f[1]=h,f[2]=P,f[3]=p,!1;if(c<g)return f[0]=E,f[1]=h,f[2]=_,f[3]=p,!1}else{var k=l.height/l.width,I=u.height/u.width,q=(p-h)/(g-c),ae=void 0,re=void 0,K=void 0,W=void 0,Z=void 0,U=void 0;if(-k===q?c>g?(f[0]=v,f[1]=x,M=!0):(f[0]=E,f[1]=C,M=!0):k===q&&(c>g?(f[0]=y,f[1]=C,M=!0):(f[0]=w,f[1]=x,M=!0)),-I===q?g>c?(f[2]=N,f[3]=B,R=!0):(f[2]=P,f[3]=D,R=!0):I===q&&(g>c?(f[2]=_,f[3]=D,R=!0):(f[2]=G,f[3]=B,R=!0)),M&&R)return!1;if(c>g?h>p?(ae=this.getCardinalDirection(k,q,4),re=this.getCardinalDirection(I,q,2)):(ae=this.getCardinalDirection(-k,q,3),re=this.getCardinalDirection(-I,q,1)):h>p?(ae=this.getCardinalDirection(-k,q,1),re=this.getCardinalDirection(-I,q,3)):(ae=this.getCardinalDirection(k,q,2),re=this.getCardinalDirection(I,q,4)),!M)switch(ae){case 1:W=C,K=c+-A/q,f[0]=K,f[1]=W;break;case 2:K=w,W=h+T*q,f[0]=K,f[1]=W;break;case 3:W=x,K=c+A/q,f[0]=K,f[1]=W;break;case 4:K=v,W=h+-T*q,f[0]=K,f[1]=W;break}if(!R)switch(re){case 1:U=D,Z=g+-z/q,f[2]=Z,f[3]=U;break;case 2:Z=G,U=p+F*q,f[2]=Z,f[3]=U;break;case 3:U=B,Z=g+z/q,f[2]=Z,f[3]=U;break;case 4:Z=N,U=p+-F*q,f[2]=Z,f[3]=U;break}}return!1},o.getCardinalDirection=function(l,u,f){return l>u?f:1+f%4},o.getIntersection=function(l,u,f,c){if(c==null)return this.getIntersection2(l,u,f);var h=l.x,g=l.y,p=u.x,y=u.y,C=f.x,E=f.y,v=c.x,x=c.y,w=void 0,T=void 0,A=void 0,_=void 0,D=void 0,P=void 0,N=void 0,B=void 0,G=void 0;return A=y-g,D=h-p,N=p*g-h*y,_=x-E,P=C-v,B=v*E-C*x,G=A*P-_*D,G===0?null:(w=(D*B-P*N)/G,T=(_*N-A*B)/G,new i(w,T))},o.angleOfVector=function(l,u,f,c){var h=void 0;return l!==f?(h=Math.atan((c-u)/(f-l)),f<l?h+=Math.PI:c<u&&(h+=this.TWO_PI)):c<u?h=this.ONE_AND_HALF_PI:h=this.HALF_PI,h},o.doIntersect=function(l,u,f,c){var h=l.x,g=l.y,p=u.x,y=u.y,C=f.x,E=f.y,v=c.x,x=c.y,w=(p-h)*(x-E)-(v-C)*(y-g);if(w===0)return!1;var T=((x-E)*(v-h)+(C-v)*(x-g))/w,A=((g-y)*(v-h)+(p-h)*(x-g))/w;return 0<T&&T<1&&0<A&&A<1},o.findCircleLineIntersections=function(l,u,f,c,h,g,p){var y=(f-l)*(f-l)+(c-u)*(c-u),C=2*((l-h)*(f-l)+(u-g)*(c-u)),E=(l-h)*(l-h)+(u-g)*(u-g)-p*p,v=C*C-4*y*E;if(v>=0){var x=(-C+Math.sqrt(C*C-4*y*E))/(2*y),w=(-C-Math.sqrt(C*C-4*y*E))/(2*y),T=null;return x>=0&&x<=1?[x]:w>=0&&w<=1?[w]:T}else return null},o.HALF_PI=.5*Math.PI,o.ONE_AND_HALF_PI=1.5*Math.PI,o.TWO_PI=2*Math.PI,o.THREE_PI=3*Math.PI,r.exports=o},function(r,n,a){function i(){}i.sign=function(o){return o>0?1:o<0?-1:0},i.floor=function(o){return o<0?Math.ceil(o):Math.floor(o)},i.ceil=function(o){return o<0?Math.floor(o):Math.ceil(o)},r.exports=i},function(r,n,a){function i(){}i.MAX_VALUE=2147483647,i.MIN_VALUE=-2147483648,r.exports=i},function(r,n,a){var i=function(){function h(g,p){for(var y=0;y<p.length;y++){var C=p[y];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(g,C.key,C)}}return function(g,p,y){return p&&h(g.prototype,p),y&&h(g,y),g}}();function o(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}var l=function(g){return{value:g,next:null,prev:null}},u=function(g,p,y,C){return g!==null?g.next=p:C.head=p,y!==null?y.prev=p:C.tail=p,p.prev=g,p.next=y,C.length++,p},f=function(g,p){var y=g.prev,C=g.next;return y!==null?y.next=C:p.head=C,C!==null?C.prev=y:p.tail=y,g.prev=g.next=null,p.length--,g},c=function(){function h(g){var p=this;o(this,h),this.length=0,this.head=null,this.tail=null,g!=null&&g.forEach(function(y){return p.push(y)})}return i(h,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(p,y){return u(y.prev,l(p),y,this)}},{key:"insertAfter",value:function(p,y){return u(y,l(p),y.next,this)}},{key:"insertNodeBefore",value:function(p,y){return u(y.prev,p,y,this)}},{key:"insertNodeAfter",value:function(p,y){return u(y,p,y.next,this)}},{key:"push",value:function(p){return u(this.tail,l(p),null,this)}},{key:"unshift",value:function(p){return u(null,l(p),this.head,this)}},{key:"remove",value:function(p){return f(p,this)}},{key:"pop",value:function(){return f(this.tail,this).value}},{key:"popNode",value:function(){return f(this.tail,this)}},{key:"shift",value:function(){return f(this.head,this).value}},{key:"shiftNode",value:function(){return f(this.head,this)}},{key:"get_object_at",value:function(p){if(p<=this.length()){for(var y=1,C=this.head;y<p;)C=C.next,y++;return C.value}}},{key:"set_object_at",value:function(p,y){if(p<=this.length()){for(var C=1,E=this.head;C<p;)E=E.next,C++;E.value=y}}}]),h}();r.exports=c},function(r,n,a){function i(o,l,u){this.x=null,this.y=null,o==null&&l==null&&u==null?(this.x=0,this.y=0):typeof o=="number"&&typeof l=="number"&&u==null?(this.x=o,this.y=l):o.constructor.name=="Point"&&l==null&&u==null&&(u=o,this.x=u.x,this.y=u.y)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.getLocation=function(){return new i(this.x,this.y)},i.prototype.setLocation=function(o,l,u){o.constructor.name=="Point"&&l==null&&u==null?(u=o,this.setLocation(u.x,u.y)):typeof o=="number"&&typeof l=="number"&&u==null&&(parseInt(o)==o&&parseInt(l)==l?this.move(o,l):(this.x=Math.floor(o+.5),this.y=Math.floor(l+.5)))},i.prototype.move=function(o,l){this.x=o,this.y=l},i.prototype.translate=function(o,l){this.x+=o,this.y+=l},i.prototype.equals=function(o){if(o.constructor.name=="Point"){var l=o;return this.x==l.x&&this.y==l.y}return this==o},i.prototype.toString=function(){return new i().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=i},function(r,n,a){function i(o,l,u,f){this.x=0,this.y=0,this.width=0,this.height=0,o!=null&&l!=null&&u!=null&&f!=null&&(this.x=o,this.y=l,this.width=u,this.height=f)}i.prototype.getX=function(){return this.x},i.prototype.setX=function(o){this.x=o},i.prototype.getY=function(){return this.y},i.prototype.setY=function(o){this.y=o},i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(o){this.width=o},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(o){this.height=o},i.prototype.getRight=function(){return this.x+this.width},i.prototype.getBottom=function(){return this.y+this.height},i.prototype.intersects=function(o){return!(this.getRight()<o.x||this.getBottom()<o.y||o.getRight()<this.x||o.getBottom()<this.y)},i.prototype.getCenterX=function(){return this.x+this.width/2},i.prototype.getMinX=function(){return this.getX()},i.prototype.getMaxX=function(){return this.getX()+this.width},i.prototype.getCenterY=function(){return this.y+this.height/2},i.prototype.getMinY=function(){return this.getY()},i.prototype.getMaxY=function(){return this.getY()+this.height},i.prototype.getWidthHalf=function(){return this.width/2},i.prototype.getHeightHalf=function(){return this.height/2},r.exports=i},function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l};function o(){}o.lastID=0,o.createID=function(l){return o.isPrimitive(l)?l:(l.uniqueID!=null||(l.uniqueID=o.getString(),o.lastID++),l.uniqueID)},o.getString=function(l){return l==null&&(l=o.lastID),"Object#"+l},o.isPrimitive=function(l){var u=typeof l>"u"?"undefined":i(l);return l==null||u!="object"&&u!="function"},r.exports=o},function(r,n,a){function i(C){if(Array.isArray(C)){for(var E=0,v=Array(C.length);E<C.length;E++)v[E]=C[E];return v}else return Array.from(C)}var o=a(0),l=a(7),u=a(3),f=a(1),c=a(6),h=a(5),g=a(17),p=a(29);function y(C){p.call(this),this.layoutQuality=o.QUALITY,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=o.DEFAULT_INCREMENTAL,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new l(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,C!=null&&(this.isRemoteUse=C)}y.RANDOM_SEED=1,y.prototype=Object.create(p.prototype),y.prototype.getGraphManager=function(){return this.graphManager},y.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},y.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},y.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},y.prototype.newGraphManager=function(){var C=new l(this);return this.graphManager=C,C},y.prototype.newGraph=function(C){return new c(null,this.graphManager,C)},y.prototype.newNode=function(C){return new u(this.graphManager,C)},y.prototype.newEdge=function(C){return new f(null,null,C)},y.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},y.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var C;return this.checkLayoutSuccess()?C=!1:C=this.layout(),o.ANIMATE==="during"?!1:(C&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,C)},y.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},y.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var C=this.graphManager.getAllEdges(),E=0;E<C.length;E++)C[E];for(var v=this.graphManager.getRoot().getNodes(),E=0;E<v.length;E++)v[E];this.update(this.graphManager.getRoot())}},y.prototype.update=function(C){if(C==null)this.update2();else if(C instanceof u){var E=C;if(E.getChild()!=null)for(var v=E.getChild().getNodes(),x=0;x<v.length;x++)update(v[x]);if(E.vGraphObject!=null){var w=E.vGraphObject;w.update(E)}}else if(C instanceof f){var T=C;if(T.vGraphObject!=null){var A=T.vGraphObject;A.update(T)}}else if(C instanceof c){var _=C;if(_.vGraphObject!=null){var D=_.vGraphObject;D.update(_)}}},y.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=o.QUALITY,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=o.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},y.prototype.transform=function(C){if(C==null)this.transform(new h(0,0));else{var E=new g,v=this.graphManager.getRoot().updateLeftTop();if(v!=null){E.setWorldOrgX(C.x),E.setWorldOrgY(C.y),E.setDeviceOrgX(v.x),E.setDeviceOrgY(v.y);for(var x=this.getAllNodes(),w,T=0;T<x.length;T++)w=x[T],w.transform(E)}}},y.prototype.positionNodesRandomly=function(C){if(C==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var E,v,x=C.getNodes(),w=0;w<x.length;w++)E=x[w],v=E.getChild(),v==null||v.getNodes().length==0?E.scatter():(this.positionNodesRandomly(v),E.updateBounds())},y.prototype.getFlatForest=function(){for(var C=[],E=!0,v=this.graphManager.getRoot().getNodes(),x=!0,w=0;w<v.length;w++)v[w].getChild()!=null&&(x=!1);if(!x)return C;var T=new Set,A=[],_=new Map,D=[];for(D=D.concat(v);D.length>0&&E;){for(A.push(D[0]);A.length>0&&E;){var P=A[0];A.splice(0,1),T.add(P);for(var N=P.getEdges(),w=0;w<N.length;w++){var B=N[w].getOtherEnd(P);if(_.get(P)!=B)if(!T.has(B))A.push(B),_.set(B,P);else{E=!1;break}}}if(!E)C=[];else{var G=[].concat(i(T));C.push(G);for(var w=0;w<G.length;w++){var F=G[w],z=D.indexOf(F);z>-1&&D.splice(z,1)}T=new Set,_=new Map}}return C},y.prototype.createDummyNodesForBendpoints=function(C){for(var E=[],v=C.source,x=this.graphManager.calcLowestCommonAncestor(C.source,C.target),w=0;w<C.bendpoints.length;w++){var T=this.newNode(null);T.setRect(new Point(0,0),new Dimension(1,1)),x.add(T);var A=this.newEdge(null);this.graphManager.add(A,v,T),E.add(T),v=T}var A=this.newEdge(null);return this.graphManager.add(A,v,C.target),this.edgeToDummyNodes.set(C,E),C.isInterGraph()?this.graphManager.remove(C):x.remove(C),E},y.prototype.createBendpointsFromDummyNodes=function(){var C=[];C=C.concat(this.graphManager.getAllEdges()),C=[].concat(i(this.edgeToDummyNodes.keys())).concat(C);for(var E=0;E<C.length;E++){var v=C[E];if(v.bendpoints.length>0){for(var x=this.edgeToDummyNodes.get(v),w=0;w<x.length;w++){var T=x[w],A=new h(T.getCenterX(),T.getCenterY()),_=v.bendpoints.get(w);_.x=A.x,_.y=A.y,T.getOwner().remove(T)}this.graphManager.add(v,v.source,v.target)}}},y.transform=function(C,E,v,x){if(v!=null&&x!=null){var w=E;if(C<=50){var T=E/v;w-=(E-T)/50*(50-C)}else{var A=E*x;w+=(A-E)/50*(C-50)}return w}else{var _,D;return C<=50?(_=9*E/500,D=E/10):(_=9*E/50,D=-8*E),_*C+D}},y.findCenterOfTree=function(C){var E=[];E=E.concat(C);var v=[],x=new Map,w=!1,T=null;(E.length==1||E.length==2)&&(w=!0,T=E[0]);for(var A=0;A<E.length;A++){var _=E[A],D=_.getNeighborsList().size;x.set(_,_.getNeighborsList().size),D==1&&v.push(_)}var P=[];for(P=P.concat(v);!w;){var N=[];N=N.concat(P),P=[];for(var A=0;A<E.length;A++){var _=E[A],B=E.indexOf(_);B>=0&&E.splice(B,1);var G=_.getNeighborsList();G.forEach(function(M){if(v.indexOf(M)<0){var R=x.get(M),k=R-1;k==1&&P.push(M),x.set(M,k)}})}v=v.concat(P),(E.length==1||E.length==2)&&(w=!0,T=E[0])}return T},y.prototype.setGraphManager=function(C){this.graphManager=C},r.exports=y},function(r,n,a){function i(){}i.seed=1,i.x=0,i.nextDouble=function(){return i.x=Math.sin(i.seed++)*1e4,i.x-Math.floor(i.x)},r.exports=i},function(r,n,a){var i=a(5);function o(l,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}o.prototype.getWorldOrgX=function(){return this.lworldOrgX},o.prototype.setWorldOrgX=function(l){this.lworldOrgX=l},o.prototype.getWorldOrgY=function(){return this.lworldOrgY},o.prototype.setWorldOrgY=function(l){this.lworldOrgY=l},o.prototype.getWorldExtX=function(){return this.lworldExtX},o.prototype.setWorldExtX=function(l){this.lworldExtX=l},o.prototype.getWorldExtY=function(){return this.lworldExtY},o.prototype.setWorldExtY=function(l){this.lworldExtY=l},o.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},o.prototype.setDeviceOrgX=function(l){this.ldeviceOrgX=l},o.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},o.prototype.setDeviceOrgY=function(l){this.ldeviceOrgY=l},o.prototype.getDeviceExtX=function(){return this.ldeviceExtX},o.prototype.setDeviceExtX=function(l){this.ldeviceExtX=l},o.prototype.getDeviceExtY=function(){return this.ldeviceExtY},o.prototype.setDeviceExtY=function(l){this.ldeviceExtY=l},o.prototype.transformX=function(l){var u=0,f=this.lworldExtX;return f!=0&&(u=this.ldeviceOrgX+(l-this.lworldOrgX)*this.ldeviceExtX/f),u},o.prototype.transformY=function(l){var u=0,f=this.lworldExtY;return f!=0&&(u=this.ldeviceOrgY+(l-this.lworldOrgY)*this.ldeviceExtY/f),u},o.prototype.inverseTransformX=function(l){var u=0,f=this.ldeviceExtX;return f!=0&&(u=this.lworldOrgX+(l-this.ldeviceOrgX)*this.lworldExtX/f),u},o.prototype.inverseTransformY=function(l){var u=0,f=this.ldeviceExtY;return f!=0&&(u=this.lworldOrgY+(l-this.ldeviceOrgY)*this.lworldExtY/f),u},o.prototype.inverseTransformPoint=function(l){var u=new i(this.inverseTransformX(l.x),this.inverseTransformY(l.y));return u},r.exports=o},function(r,n,a){function i(p){if(Array.isArray(p)){for(var y=0,C=Array(p.length);y<p.length;y++)C[y]=p[y];return C}else return Array.from(p)}var o=a(15),l=a(4),u=a(0),f=a(8),c=a(9);function h(){o.call(this),this.useSmartIdealEdgeLengthCalculation=l.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=l.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=l.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=l.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*l.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=l.MAX_ITERATIONS}h.prototype=Object.create(o.prototype);for(var g in o)h[g]=o[g];h.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=l.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},h.prototype.calcIdealEdgeLengths=function(){for(var p,y,C,E,v,x,w,T=this.getGraphManager().getAllEdges(),A=0;A<T.length;A++)p=T[A],y=p.idealLength,p.isInterGraph&&(E=p.getSource(),v=p.getTarget(),x=p.getSourceInLca().getEstimatedSize(),w=p.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(p.idealLength+=x+w-2*u.SIMPLE_NODE_SIZE),C=p.getLca().getInclusionTreeDepth(),p.idealLength+=y*l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(E.getInclusionTreeDepth()+v.getInclusionTreeDepth()-2*C))},h.prototype.initSpringEmbedder=function(){var p=this.getAllNodes().length;this.incremental?(p>l.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*l.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(p-l.ADAPTATION_LOWER_NODE_LIMIT)/(l.ADAPTATION_UPPER_NODE_LIMIT-l.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-l.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=l.MAX_NODE_DISPLACEMENT_INCREMENTAL):(p>l.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(l.COOLING_ADAPTATION_FACTOR,1-(p-l.ADAPTATION_LOWER_NODE_LIMIT)/(l.ADAPTATION_UPPER_NODE_LIMIT-l.ADAPTATION_LOWER_NODE_LIMIT)*(1-l.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=l.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*l.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},h.prototype.calcSpringForces=function(){for(var p=this.getAllEdges(),y,C=0;C<p.length;C++)y=p[C],this.calcSpringForce(y,y.idealLength)},h.prototype.calcRepulsionForces=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C,E,v,x,w=this.getAllNodes(),T;if(this.useFRGridVariant)for(this.totalIterations%l.GRID_CALCULATION_CHECK_PERIOD==1&&p&&this.updateGrid(),T=new Set,C=0;C<w.length;C++)v=w[C],this.calculateRepulsionForceOfANode(v,T,p,y),T.add(v);else for(C=0;C<w.length;C++)for(v=w[C],E=C+1;E<w.length;E++)x=w[E],v.getOwner()==x.getOwner()&&this.calcRepulsionForce(v,x)},h.prototype.calcGravitationalForces=function(){for(var p,y=this.getAllNodesToApplyGravitation(),C=0;C<y.length;C++)p=y[C],this.calcGravitationalForce(p)},h.prototype.moveNodes=function(){for(var p=this.getAllNodes(),y,C=0;C<p.length;C++)y=p[C],y.move()},h.prototype.calcSpringForce=function(p,y){var C=p.getSource(),E=p.getTarget(),v,x,w,T;if(this.uniformLeafNodeSizes&&C.getChild()==null&&E.getChild()==null)p.updateLengthSimple();else if(p.updateLength(),p.isOverlapingSourceAndTarget)return;v=p.getLength(),v!=0&&(x=p.edgeElasticity*(v-y),w=x*(p.lengthX/v),T=x*(p.lengthY/v),C.springForceX+=w,C.springForceY+=T,E.springForceX-=w,E.springForceY-=T)},h.prototype.calcRepulsionForce=function(p,y){var C=p.getRect(),E=y.getRect(),v=new Array(2),x=new Array(4),w,T,A,_,D,P,N;if(C.intersects(E)){f.calcSeparationAmount(C,E,v,l.DEFAULT_EDGE_LENGTH/2),P=2*v[0],N=2*v[1];var B=p.noOfChildren*y.noOfChildren/(p.noOfChildren+y.noOfChildren);p.repulsionForceX-=B*P,p.repulsionForceY-=B*N,y.repulsionForceX+=B*P,y.repulsionForceY+=B*N}else this.uniformLeafNodeSizes&&p.getChild()==null&&y.getChild()==null?(w=E.getCenterX()-C.getCenterX(),T=E.getCenterY()-C.getCenterY()):(f.getIntersection(C,E,x),w=x[2]-x[0],T=x[3]-x[1]),Math.abs(w)<l.MIN_REPULSION_DIST&&(w=c.sign(w)*l.MIN_REPULSION_DIST),Math.abs(T)<l.MIN_REPULSION_DIST&&(T=c.sign(T)*l.MIN_REPULSION_DIST),A=w*w+T*T,_=Math.sqrt(A),D=(p.nodeRepulsion/2+y.nodeRepulsion/2)*p.noOfChildren*y.noOfChildren/A,P=D*w/_,N=D*T/_,p.repulsionForceX-=P,p.repulsionForceY-=N,y.repulsionForceX+=P,y.repulsionForceY+=N},h.prototype.calcGravitationalForce=function(p){var y,C,E,v,x,w,T,A;y=p.getOwner(),C=(y.getRight()+y.getLeft())/2,E=(y.getTop()+y.getBottom())/2,v=p.getCenterX()-C,x=p.getCenterY()-E,w=Math.abs(v)+p.getWidth()/2,T=Math.abs(x)+p.getHeight()/2,p.getOwner()==this.graphManager.getRoot()?(A=y.getEstimatedSize()*this.gravityRangeFactor,(w>A||T>A)&&(p.gravitationForceX=-this.gravityConstant*v,p.gravitationForceY=-this.gravityConstant*x)):(A=y.getEstimatedSize()*this.compoundGravityRangeFactor,(w>A||T>A)&&(p.gravitationForceX=-this.gravityConstant*v*this.compoundGravityConstant,p.gravitationForceY=-this.gravityConstant*x*this.compoundGravityConstant))},h.prototype.isConverged=function(){var p,y=!1;return this.totalIterations>this.maxIterations/3&&(y=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),p=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,p||y},h.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},h.prototype.calcNoOfChildrenForAllNodes=function(){for(var p,y=this.graphManager.getAllNodes(),C=0;C<y.length;C++)p=y[C],p.noOfChildren=p.getNoOfChildren()},h.prototype.calcGrid=function(p){var y=0,C=0;y=parseInt(Math.ceil((p.getRight()-p.getLeft())/this.repulsionRange)),C=parseInt(Math.ceil((p.getBottom()-p.getTop())/this.repulsionRange));for(var E=new Array(y),v=0;v<y;v++)E[v]=new Array(C);for(var v=0;v<y;v++)for(var x=0;x<C;x++)E[v][x]=new Array;return E},h.prototype.addNodeToGrid=function(p,y,C){var E=0,v=0,x=0,w=0;E=parseInt(Math.floor((p.getRect().x-y)/this.repulsionRange)),v=parseInt(Math.floor((p.getRect().width+p.getRect().x-y)/this.repulsionRange)),x=parseInt(Math.floor((p.getRect().y-C)/this.repulsionRange)),w=parseInt(Math.floor((p.getRect().height+p.getRect().y-C)/this.repulsionRange));for(var T=E;T<=v;T++)for(var A=x;A<=w;A++)this.grid[T][A].push(p),p.setGridCoordinates(E,v,x,w)},h.prototype.updateGrid=function(){var p,y,C=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),p=0;p<C.length;p++)y=C[p],this.addNodeToGrid(y,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},h.prototype.calculateRepulsionForceOfANode=function(p,y,C,E){if(this.totalIterations%l.GRID_CALCULATION_CHECK_PERIOD==1&&C||E){var v=new Set;p.surrounding=new Array;for(var x,w=this.grid,T=p.startX-1;T<p.finishX+2;T++)for(var A=p.startY-1;A<p.finishY+2;A++)if(!(T<0||A<0||T>=w.length||A>=w[0].length)){for(var _=0;_<w[T][A].length;_++)if(x=w[T][A][_],!(p.getOwner()!=x.getOwner()||p==x)&&!y.has(x)&&!v.has(x)){var D=Math.abs(p.getCenterX()-x.getCenterX())-(p.getWidth()/2+x.getWidth()/2),P=Math.abs(p.getCenterY()-x.getCenterY())-(p.getHeight()/2+x.getHeight()/2);D<=this.repulsionRange&&P<=this.repulsionRange&&v.add(x)}}p.surrounding=[].concat(i(v))}for(T=0;T<p.surrounding.length;T++)this.calcRepulsionForce(p,p.surrounding[T])},h.prototype.calcRepulsionRange=function(){return 0},r.exports=h},function(r,n,a){var i=a(1),o=a(4);function l(f,c,h){i.call(this,f,c,h),this.idealLength=o.DEFAULT_EDGE_LENGTH,this.edgeElasticity=o.DEFAULT_SPRING_STRENGTH}l.prototype=Object.create(i.prototype);for(var u in i)l[u]=i[u];r.exports=l},function(r,n,a){var i=a(3),o=a(4);function l(f,c,h,g){i.call(this,f,c,h,g),this.nodeRepulsion=o.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}l.prototype=Object.create(i.prototype);for(var u in i)l[u]=i[u];l.prototype.setGridCoordinates=function(f,c,h,g){this.startX=f,this.finishX=c,this.startY=h,this.finishY=g},r.exports=l},function(r,n,a){function i(o,l){this.width=0,this.height=0,o!==null&&l!==null&&(this.height=l,this.width=o)}i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(o){this.width=o},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(o){this.height=o},r.exports=i},function(r,n,a){var i=a(14);function o(){this.map={},this.keys=[]}o.prototype.put=function(l,u){var f=i.createID(l);this.contains(f)||(this.map[f]=u,this.keys.push(l))},o.prototype.contains=function(l){return i.createID(l),this.map[l]!=null},o.prototype.get=function(l){var u=i.createID(l);return this.map[u]},o.prototype.keySet=function(){return this.keys},r.exports=o},function(r,n,a){var i=a(14);function o(){this.set={}}o.prototype.add=function(l){var u=i.createID(l);this.contains(u)||(this.set[u]=l)},o.prototype.remove=function(l){delete this.set[i.createID(l)]},o.prototype.clear=function(){this.set={}},o.prototype.contains=function(l){return this.set[i.createID(l)]==l},o.prototype.isEmpty=function(){return this.size()===0},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAllTo=function(l){for(var u=Object.keys(this.set),f=u.length,c=0;c<f;c++)l.push(this.set[u[c]])},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAll=function(l){for(var u=l.length,f=0;f<u;f++){var c=l[f];this.add(c)}},r.exports=o},function(r,n,a){function i(){}i.multMat=function(o,l){for(var u=[],f=0;f<o.length;f++){u[f]=[];for(var c=0;c<l[0].length;c++){u[f][c]=0;for(var h=0;h<o[0].length;h++)u[f][c]+=o[f][h]*l[h][c]}}return u},i.transpose=function(o){for(var l=[],u=0;u<o[0].length;u++){l[u]=[];for(var f=0;f<o.length;f++)l[u][f]=o[f][u]}return l},i.multCons=function(o,l){for(var u=[],f=0;f<o.length;f++)u[f]=o[f]*l;return u},i.minusOp=function(o,l){for(var u=[],f=0;f<o.length;f++)u[f]=o[f]-l[f];return u},i.dotProduct=function(o,l){for(var u=0,f=0;f<o.length;f++)u+=o[f]*l[f];return u},i.mag=function(o){return Math.sqrt(this.dotProduct(o,o))},i.normalize=function(o){for(var l=[],u=this.mag(o),f=0;f<o.length;f++)l[f]=o[f]/u;return l},i.multGamma=function(o){for(var l=[],u=0,f=0;f<o.length;f++)u+=o[f];u*=-1/o.length;for(var c=0;c<o.length;c++)l[c]=u+o[c];return l},i.multL=function(o,l,u){for(var f=[],c=[],h=[],g=0;g<l[0].length;g++){for(var p=0,y=0;y<l.length;y++)p+=-.5*l[y][g]*o[y];c[g]=p}for(var C=0;C<u.length;C++){for(var E=0,v=0;v<u.length;v++)E+=u[C][v]*c[v];h[C]=E}for(var x=0;x<l.length;x++){for(var w=0,T=0;T<l[0].length;T++)w+=l[x][T]*h[T];f[x]=w}return f},r.exports=i},function(r,n,a){var i=function(){function f(c,h){for(var g=0;g<h.length;g++){var p=h[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}return function(c,h,g){return h&&f(c.prototype,h),g&&f(c,g),c}}();function o(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}var l=a(11),u=function(){function f(c,h){o(this,f),(h!==null||h!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var g=void 0;c instanceof l?g=c.size():g=c.length,this._quicksort(c,0,g-1)}return i(f,[{key:"_quicksort",value:function(h,g,p){if(g<p){var y=this._partition(h,g,p);this._quicksort(h,g,y),this._quicksort(h,y+1,p)}}},{key:"_partition",value:function(h,g,p){for(var y=this._get(h,g),C=g,E=p;;){for(;this.compareFunction(y,this._get(h,E));)E--;for(;this.compareFunction(this._get(h,C),y);)C++;if(C<E)this._swap(h,C,E),C++,E--;else return E}}},{key:"_get",value:function(h,g){return h instanceof l?h.get_object_at(g):h[g]}},{key:"_set",value:function(h,g,p){h instanceof l?h.set_object_at(g,p):h[g]=p}},{key:"_swap",value:function(h,g,p){var y=this._get(h,g);this._set(h,g,this._get(h,p)),this._set(h,p,y)}},{key:"_defaultCompareFunction",value:function(h,g){return g>h}}]),f}();r.exports=u},function(r,n,a){function i(){}i.svd=function(o){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=o.length,this.n=o[0].length;var l=Math.min(this.m,this.n);this.s=function(ut){for(var pt=[];ut-- >0;)pt.push(0);return pt}(Math.min(this.m+1,this.n)),this.U=function(ut){var pt=function _t(Mt){if(Mt.length==0)return 0;for(var Vt=[],Lt=0;Lt<Mt[0];Lt++)Vt.push(_t(Mt.slice(1)));return Vt};return pt(ut)}([this.m,l]),this.V=function(ut){var pt=function _t(Mt){if(Mt.length==0)return 0;for(var Vt=[],Lt=0;Lt<Mt[0];Lt++)Vt.push(_t(Mt.slice(1)));return Vt};return pt(ut)}([this.n,this.n]);for(var u=function(ut){for(var pt=[];ut-- >0;)pt.push(0);return pt}(this.n),f=function(ut){for(var pt=[];ut-- >0;)pt.push(0);return pt}(this.m),c=!0,h=Math.min(this.m-1,this.n),g=Math.max(0,Math.min(this.n-2,this.m)),p=0;p<Math.max(h,g);p++){if(p<h){this.s[p]=0;for(var y=p;y<this.m;y++)this.s[p]=i.hypot(this.s[p],o[y][p]);if(this.s[p]!==0){o[p][p]<0&&(this.s[p]=-this.s[p]);for(var C=p;C<this.m;C++)o[C][p]/=this.s[p];o[p][p]+=1}this.s[p]=-this.s[p]}for(var E=p+1;E<this.n;E++){if(function(ut,pt){return ut&&pt}(p<h,this.s[p]!==0)){for(var v=0,x=p;x<this.m;x++)v+=o[x][p]*o[x][E];v=-v/o[p][p];for(var w=p;w<this.m;w++)o[w][E]+=v*o[w][p]}u[E]=o[p][E]}if(function(ut,pt){return pt}(c,p<h))for(var T=p;T<this.m;T++)this.U[T][p]=o[T][p];if(p<g){u[p]=0;for(var A=p+1;A<this.n;A++)u[p]=i.hypot(u[p],u[A]);if(u[p]!==0){u[p+1]<0&&(u[p]=-u[p]);for(var _=p+1;_<this.n;_++)u[_]/=u[p];u[p+1]+=1}if(u[p]=-u[p],function(ut,pt){return ut&&pt}(p+1<this.m,u[p]!==0)){for(var D=p+1;D<this.m;D++)f[D]=0;for(var P=p+1;P<this.n;P++)for(var N=p+1;N<this.m;N++)f[N]+=u[P]*o[N][P];for(var B=p+1;B<this.n;B++)for(var G=-u[B]/u[p+1],F=p+1;F<this.m;F++)o[F][B]+=G*f[F]}for(var z=p+1;z<this.n;z++)this.V[z][p]=u[z]}}var M=Math.min(this.n,this.m+1);h<this.n&&(this.s[h]=o[h][h]),this.m<M&&(this.s[M-1]=0),g+1<M&&(u[g]=o[g][M-1]),u[M-1]=0;{for(var R=h;R<l;R++){for(var k=0;k<this.m;k++)this.U[k][R]=0;this.U[R][R]=1}for(var I=h-1;I>=0;I--)if(this.s[I]!==0){for(var q=I+1;q<l;q++){for(var ae=0,re=I;re<this.m;re++)ae+=this.U[re][I]*this.U[re][q];ae=-ae/this.U[I][I];for(var K=I;K<this.m;K++)this.U[K][q]+=ae*this.U[K][I]}for(var W=I;W<this.m;W++)this.U[W][I]=-this.U[W][I];this.U[I][I]=1+this.U[I][I];for(var Z=0;Z<I-1;Z++)this.U[Z][I]=0}else{for(var U=0;U<this.m;U++)this.U[U][I]=0;this.U[I][I]=1}}for(var V=this.n-1;V>=0;V--){if(function(ut,pt){return ut&&pt}(V<g,u[V]!==0))for(var X=V+1;X<l;X++){for(var ee=0,se=V+1;se<this.n;se++)ee+=this.V[se][V]*this.V[se][X];ee=-ee/this.V[V+1][V];for(var te=V+1;te<this.n;te++)this.V[te][X]+=ee*this.V[te][V]}for(var oe=0;oe<this.n;oe++)this.V[oe][V]=0;this.V[V][V]=1}for(var le=M-1,$=Math.pow(2,-52),ne=Math.pow(2,-966);M>0;){var ie=void 0,ue=void 0;for(ie=M-2;ie>=-1&&ie!==-1;ie--)if(Math.abs(u[ie])<=ne+$*(Math.abs(this.s[ie])+Math.abs(this.s[ie+1]))){u[ie]=0;break}if(ie===M-2)ue=4;else{var me=void 0;for(me=M-1;me>=ie&&me!==ie;me--){var ge=(me!==M?Math.abs(u[me]):0)+(me!==ie+1?Math.abs(u[me-1]):0);if(Math.abs(this.s[me])<=ne+$*ge){this.s[me]=0;break}}me===ie?ue=3:me===M-1?ue=1:(ue=2,ie=me)}switch(ie++,ue){case 1:{var Ee=u[M-2];u[M-2]=0;for(var he=M-2;he>=ie;he--){var de=i.hypot(this.s[he],Ee),be=this.s[he]/de,De=Ee/de;this.s[he]=de,he!==ie&&(Ee=-De*u[he-1],u[he-1]=be*u[he-1]);for(var Se=0;Se<this.n;Se++)de=be*this.V[Se][he]+De*this.V[Se][M-1],this.V[Se][M-1]=-De*this.V[Se][he]+be*this.V[Se][M-1],this.V[Se][he]=de}}break;case 2:{var Re=u[ie-1];u[ie-1]=0;for(var Ie=ie;Ie<M;Ie++){var qe=i.hypot(this.s[Ie],Re),Ze=this.s[Ie]/qe,$e=Re/qe;this.s[Ie]=qe,Re=-$e*u[Ie],u[Ie]=Ze*u[Ie];for(var tt=0;tt<this.m;tt++)qe=Ze*this.U[tt][Ie]+$e*this.U[tt][ie-1],this.U[tt][ie-1]=-$e*this.U[tt][Ie]+Ze*this.U[tt][ie-1],this.U[tt][Ie]=qe}}break;case 3:{var Xe=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[M-1]),Math.abs(this.s[M-2])),Math.abs(u[M-2])),Math.abs(this.s[ie])),Math.abs(u[ie])),We=this.s[M-1]/Xe,ve=this.s[M-2]/Xe,j=u[M-2]/Xe,pe=this.s[ie]/Xe,we=u[ie]/Xe,xe=((ve+We)*(ve-We)+j*j)/2,Ce=We*j*(We*j),Be=0;(function(ut,pt){return ut||pt})(xe!==0,Ce!==0)&&(Be=Math.sqrt(xe*xe+Ce),xe<0&&(Be=-Be),Be=Ce/(xe+Be));for(var Te=(pe+We)*(pe-We)+Be,ke=pe*we,Oe=ie;Oe<M-1;Oe++){var He=i.hypot(Te,ke),Ue=Te/He,Ke=ke/He;Oe!==ie&&(u[Oe-1]=He),Te=Ue*this.s[Oe]+Ke*u[Oe],u[Oe]=Ue*u[Oe]-Ke*this.s[Oe],ke=Ke*this.s[Oe+1],this.s[Oe+1]=Ue*this.s[Oe+1];for(var Qe=0;Qe<this.n;Qe++)He=Ue*this.V[Qe][Oe]+Ke*this.V[Qe][Oe+1],this.V[Qe][Oe+1]=-Ke*this.V[Qe][Oe]+Ue*this.V[Qe][Oe+1],this.V[Qe][Oe]=He;if(He=i.hypot(Te,ke),Ue=Te/He,Ke=ke/He,this.s[Oe]=He,Te=Ue*u[Oe]+Ke*this.s[Oe+1],this.s[Oe+1]=-Ke*u[Oe]+Ue*this.s[Oe+1],ke=Ke*u[Oe+1],u[Oe+1]=Ue*u[Oe+1],Oe<this.m-1)for(var Ge=0;Ge<this.m;Ge++)He=Ue*this.U[Ge][Oe]+Ke*this.U[Ge][Oe+1],this.U[Ge][Oe+1]=-Ke*this.U[Ge][Oe]+Ue*this.U[Ge][Oe+1],this.U[Ge][Oe]=He}u[M-2]=Te}break;case 4:{if(this.s[ie]<=0){this.s[ie]=this.s[ie]<0?-this.s[ie]:0;for(var Ve=0;Ve<=le;Ve++)this.V[Ve][ie]=-this.V[Ve][ie]}for(;ie<le&&!(this.s[ie]>=this.s[ie+1]);){var dt=this.s[ie];if(this.s[ie]=this.s[ie+1],this.s[ie+1]=dt,ie<this.n-1)for(var rt=0;rt<this.n;rt++)dt=this.V[rt][ie+1],this.V[rt][ie+1]=this.V[rt][ie],this.V[rt][ie]=dt;if(ie<this.m-1)for(var at=0;at<this.m;at++)dt=this.U[at][ie+1],this.U[at][ie+1]=this.U[at][ie],this.U[at][ie]=dt;ie++}M--}break}}var Et={U:this.U,V:this.V,S:this.s};return Et},i.hypot=function(o,l){var u=void 0;return Math.abs(o)>Math.abs(l)?(u=l/o,u=Math.abs(o)*Math.sqrt(1+u*u)):l!=0?(u=o/l,u=Math.abs(l)*Math.sqrt(1+u*u)):u=0,u},r.exports=i},function(r,n,a){var i=function(){function u(f,c){for(var h=0;h<c.length;h++){var g=c[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}return function(f,c,h){return c&&u(f.prototype,c),h&&u(f,h),f}}();function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var l=function(){function u(f,c){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;o(this,u),this.sequence1=f,this.sequence2=c,this.match_score=h,this.mismatch_penalty=g,this.gap_penalty=p,this.iMax=f.length+1,this.jMax=c.length+1,this.grid=new Array(this.iMax);for(var y=0;y<this.iMax;y++){this.grid[y]=new Array(this.jMax);for(var C=0;C<this.jMax;C++)this.grid[y][C]=0}this.tracebackGrid=new Array(this.iMax);for(var E=0;E<this.iMax;E++){this.tracebackGrid[E]=new Array(this.jMax);for(var v=0;v<this.jMax;v++)this.tracebackGrid[E][v]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return i(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var c=1;c<this.jMax;c++)this.grid[0][c]=this.grid[0][c-1]+this.gap_penalty,this.tracebackGrid[0][c]=[!1,!1,!0];for(var h=1;h<this.iMax;h++)this.grid[h][0]=this.grid[h-1][0]+this.gap_penalty,this.tracebackGrid[h][0]=[!1,!0,!1];for(var g=1;g<this.iMax;g++)for(var p=1;p<this.jMax;p++){var y=void 0;this.sequence1[g-1]===this.sequence2[p-1]?y=this.grid[g-1][p-1]+this.match_score:y=this.grid[g-1][p-1]+this.mismatch_penalty;var C=this.grid[g-1][p]+this.gap_penalty,E=this.grid[g][p-1]+this.gap_penalty,v=[y,C,E],x=this.arrayAllMaxIndexes(v);this.grid[g][p]=v[x[0]],this.tracebackGrid[g][p]=[x.includes(0),x.includes(1),x.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var c=[];for(c.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});c[0];){var h=c[0],g=this.tracebackGrid[h.pos[0]][h.pos[1]];g[0]&&c.push({pos:[h.pos[0]-1,h.pos[1]-1],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),g[1]&&c.push({pos:[h.pos[0]-1,h.pos[1]],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:"-"+h.seq2}),g[2]&&c.push({pos:[h.pos[0],h.pos[1]-1],seq1:"-"+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),h.pos[0]===0&&h.pos[1]===0&&this.alignments.push({sequence1:h.seq1,sequence2:h.seq2}),c.shift()}return this.alignments}},{key:"getAllIndexes",value:function(c,h){for(var g=[],p=-1;(p=c.indexOf(h,p+1))!==-1;)g.push(p);return g}},{key:"arrayAllMaxIndexes",value:function(c){return this.getAllIndexes(c,Math.max.apply(null,c))}}]),u}();r.exports=l},function(r,n,a){var i=function(){};i.FDLayout=a(18),i.FDLayoutConstants=a(4),i.FDLayoutEdge=a(19),i.FDLayoutNode=a(20),i.DimensionD=a(21),i.HashMap=a(22),i.HashSet=a(23),i.IGeometry=a(8),i.IMath=a(9),i.Integer=a(10),i.Point=a(12),i.PointD=a(5),i.RandomSeed=a(16),i.RectangleD=a(13),i.Transform=a(17),i.UniqueIDGeneretor=a(14),i.Quicksort=a(25),i.LinkedList=a(11),i.LGraphObject=a(2),i.LGraph=a(6),i.LEdge=a(1),i.LGraphManager=a(7),i.LNode=a(3),i.Layout=a(15),i.LayoutConstants=a(0),i.NeedlemanWunsch=a(27),i.Matrix=a(24),i.SVD=a(26),r.exports=i},function(r,n,a){function i(){this.listeners=[]}var o=i.prototype;o.addListener=function(l,u){this.listeners.push({event:l,callback:u})},o.removeListener=function(l,u){for(var f=this.listeners.length;f>=0;f--){var c=this.listeners[f];c.event===l&&c.callback===u&&this.listeners.splice(f,1)}},o.emit=function(l,u){for(var f=0;f<this.listeners.length;f++){var c=this.listeners[f];l===c.event&&c.callback(u)}},r.exports=i}])})}(Of)),Of.exports}var E$=kf.exports,jM;function T$(){return jM||(jM=1,function(t,e){(function(n,a){t.exports=a(C$())})(E$,function(r){return(()=>{var n={45:(l,u,f)=>{var c={};c.layoutBase=f(551),c.CoSEConstants=f(806),c.CoSEEdge=f(767),c.CoSEGraph=f(880),c.CoSEGraphManager=f(578),c.CoSELayout=f(765),c.CoSENode=f(991),c.ConstraintHandler=f(902),l.exports=c},806:(l,u,f)=>{var c=f(551).FDLayoutConstants;function h(){}for(var g in c)h[g]=c[g];h.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,h.DEFAULT_RADIAL_SEPARATION=c.DEFAULT_EDGE_LENGTH,h.DEFAULT_COMPONENT_SEPERATION=60,h.TILE=!0,h.TILING_PADDING_VERTICAL=10,h.TILING_PADDING_HORIZONTAL=10,h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!0,h.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,h.TREE_REDUCTION_ON_INCREMENTAL=!0,h.PURE_INCREMENTAL=h.DEFAULT_INCREMENTAL,l.exports=h},767:(l,u,f)=>{var c=f(551).FDLayoutEdge;function h(p,y,C){c.call(this,p,y,C)}h.prototype=Object.create(c.prototype);for(var g in c)h[g]=c[g];l.exports=h},880:(l,u,f)=>{var c=f(551).LGraph;function h(p,y,C){c.call(this,p,y,C)}h.prototype=Object.create(c.prototype);for(var g in c)h[g]=c[g];l.exports=h},578:(l,u,f)=>{var c=f(551).LGraphManager;function h(p){c.call(this,p)}h.prototype=Object.create(c.prototype);for(var g in c)h[g]=c[g];l.exports=h},765:(l,u,f)=>{var c=f(551).FDLayout,h=f(578),g=f(880),p=f(991),y=f(767),C=f(806),E=f(902),v=f(551).FDLayoutConstants,x=f(551).LayoutConstants,w=f(551).Point,T=f(551).PointD,A=f(551).DimensionD,_=f(551).Layout,D=f(551).Integer,P=f(551).IGeometry,N=f(551).LGraph,B=f(551).Transform,G=f(551).LinkedList;function F(){c.call(this),this.toBeTiled={},this.constraints={}}F.prototype=Object.create(c.prototype);for(var z in c)F[z]=c[z];F.prototype.newGraphManager=function(){var M=new h(this);return this.graphManager=M,M},F.prototype.newGraph=function(M){return new g(null,this.graphManager,M)},F.prototype.newNode=function(M){return new p(this.graphManager,M)},F.prototype.newEdge=function(M){return new y(null,null,M)},F.prototype.initParameters=function(){c.prototype.initParameters.call(this,arguments),this.isSubLayout||(C.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=C.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=C.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=v.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=v.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=v.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},F.prototype.initSpringEmbedder=function(){c.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/v.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},F.prototype.layout=function(){var M=x.DEFAULT_CREATE_BENDS_AS_NEEDED;return M&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},F.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(C.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var R=new Set(this.getAllNodes()),k=this.nodesWithGravity.filter(function(ae){return R.has(ae)});this.graphManager.setAllNodesToApplyGravitation(k)}}else{var M=this.getFlatForest();if(M.length>0)this.positionNodesRadially(M);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var R=new Set(this.getAllNodes()),k=this.nodesWithGravity.filter(function(I){return R.has(I)});this.graphManager.setAllNodesToApplyGravitation(k),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(E.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),C.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},F.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%v.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var M=new Set(this.getAllNodes()),R=this.nodesWithGravity.filter(function(q){return M.has(q)});this.graphManager.setAllNodesToApplyGravitation(R),this.graphManager.updateBounds(),this.updateGrid(),C.PURE_INCREMENTAL?this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),C.PURE_INCREMENTAL?this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var k=!this.isTreeGrowing&&!this.isGrowthFinished,I=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(k,I),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},F.prototype.getPositionsData=function(){for(var M=this.graphManager.getAllNodes(),R={},k=0;k<M.length;k++){var I=M[k].rect,q=M[k].id;R[q]={id:q,x:I.getCenterX(),y:I.getCenterY(),w:I.width,h:I.height}}return R},F.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var M=!1;if(v.ANIMATE==="during")this.emit("layoutstarted");else{for(;!M;)M=this.tick();this.graphManager.updateBounds()}},F.prototype.moveNodes=function(){for(var M=this.getAllNodes(),R,k=0;k<M.length;k++)R=M[k],R.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var k=0;k<M.length;k++)R=M[k],R.move()},F.prototype.initConstraintVariables=function(){var M=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var R=this.graphManager.getAllNodes(),k=0;k<R.length;k++){var I=R[k];this.idToNodeMap.set(I.id,I)}var q=function te(oe){for(var le=oe.getChild().getNodes(),$,ne=0,ie=0;ie<le.length;ie++)$=le[ie],$.getChild()==null?M.fixedNodeSet.has($.id)&&(ne+=100):ne+=te($);return ne};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(le){M.fixedNodeSet.add(le.nodeId)});for(var R=this.graphManager.getAllNodes(),I,k=0;k<R.length;k++)if(I=R[k],I.getChild()!=null){var ae=q(I);ae>0&&(I.fixedNodeWeight=ae)}}if(this.constraints.relativePlacementConstraint){var re=new Map,K=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(te){M.fixedNodesOnHorizontal.add(te),M.fixedNodesOnVertical.add(te)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var W=this.constraints.alignmentConstraint.vertical,k=0;k<W.length;k++)this.dummyToNodeForVerticalAlignment.set("dummy"+k,[]),W[k].forEach(function(oe){re.set(oe,"dummy"+k),M.dummyToNodeForVerticalAlignment.get("dummy"+k).push(oe),M.fixedNodeSet.has(oe)&&M.fixedNodesOnHorizontal.add("dummy"+k)});if(this.constraints.alignmentConstraint.horizontal)for(var Z=this.constraints.alignmentConstraint.horizontal,k=0;k<Z.length;k++)this.dummyToNodeForHorizontalAlignment.set("dummy"+k,[]),Z[k].forEach(function(oe){K.set(oe,"dummy"+k),M.dummyToNodeForHorizontalAlignment.get("dummy"+k).push(oe),M.fixedNodeSet.has(oe)&&M.fixedNodesOnVertical.add("dummy"+k)})}if(C.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(te){var oe,le,$;for($=te.length-1;$>=2*te.length/3;$--)oe=Math.floor(Math.random()*($+1)),le=te[$],te[$]=te[oe],te[oe]=le;return te},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(te){if(te.left){var oe=re.has(te.left)?re.get(te.left):te.left,le=re.has(te.right)?re.get(te.right):te.right;M.nodesInRelativeHorizontal.includes(oe)||(M.nodesInRelativeHorizontal.push(oe),M.nodeToRelativeConstraintMapHorizontal.set(oe,[]),M.dummyToNodeForVerticalAlignment.has(oe)?M.nodeToTempPositionMapHorizontal.set(oe,M.idToNodeMap.get(M.dummyToNodeForVerticalAlignment.get(oe)[0]).getCenterX()):M.nodeToTempPositionMapHorizontal.set(oe,M.idToNodeMap.get(oe).getCenterX())),M.nodesInRelativeHorizontal.includes(le)||(M.nodesInRelativeHorizontal.push(le),M.nodeToRelativeConstraintMapHorizontal.set(le,[]),M.dummyToNodeForVerticalAlignment.has(le)?M.nodeToTempPositionMapHorizontal.set(le,M.idToNodeMap.get(M.dummyToNodeForVerticalAlignment.get(le)[0]).getCenterX()):M.nodeToTempPositionMapHorizontal.set(le,M.idToNodeMap.get(le).getCenterX())),M.nodeToRelativeConstraintMapHorizontal.get(oe).push({right:le,gap:te.gap}),M.nodeToRelativeConstraintMapHorizontal.get(le).push({left:oe,gap:te.gap})}else{var $=K.has(te.top)?K.get(te.top):te.top,ne=K.has(te.bottom)?K.get(te.bottom):te.bottom;M.nodesInRelativeVertical.includes($)||(M.nodesInRelativeVertical.push($),M.nodeToRelativeConstraintMapVertical.set($,[]),M.dummyToNodeForHorizontalAlignment.has($)?M.nodeToTempPositionMapVertical.set($,M.idToNodeMap.get(M.dummyToNodeForHorizontalAlignment.get($)[0]).getCenterY()):M.nodeToTempPositionMapVertical.set($,M.idToNodeMap.get($).getCenterY())),M.nodesInRelativeVertical.includes(ne)||(M.nodesInRelativeVertical.push(ne),M.nodeToRelativeConstraintMapVertical.set(ne,[]),M.dummyToNodeForHorizontalAlignment.has(ne)?M.nodeToTempPositionMapVertical.set(ne,M.idToNodeMap.get(M.dummyToNodeForHorizontalAlignment.get(ne)[0]).getCenterY()):M.nodeToTempPositionMapVertical.set(ne,M.idToNodeMap.get(ne).getCenterY())),M.nodeToRelativeConstraintMapVertical.get($).push({bottom:ne,gap:te.gap}),M.nodeToRelativeConstraintMapVertical.get(ne).push({top:$,gap:te.gap})}});else{var U=new Map,V=new Map;this.constraints.relativePlacementConstraint.forEach(function(te){if(te.left){var oe=re.has(te.left)?re.get(te.left):te.left,le=re.has(te.right)?re.get(te.right):te.right;U.has(oe)?U.get(oe).push(le):U.set(oe,[le]),U.has(le)?U.get(le).push(oe):U.set(le,[oe])}else{var $=K.has(te.top)?K.get(te.top):te.top,ne=K.has(te.bottom)?K.get(te.bottom):te.bottom;V.has($)?V.get($).push(ne):V.set($,[ne]),V.has(ne)?V.get(ne).push($):V.set(ne,[$])}});var X=function(oe,le){var $=[],ne=[],ie=new G,ue=new Set,me=0;return oe.forEach(function(ge,Ee){if(!ue.has(Ee)){$[me]=[],ne[me]=!1;var he=Ee;for(ie.push(he),ue.add(he),$[me].push(he);ie.length!=0;){he=ie.shift(),le.has(he)&&(ne[me]=!0);var de=oe.get(he);de.forEach(function(be){ue.has(be)||(ie.push(be),ue.add(be),$[me].push(be))})}me++}}),{components:$,isFixed:ne}},ee=X(U,M.fixedNodesOnHorizontal);this.componentsOnHorizontal=ee.components,this.fixedComponentsOnHorizontal=ee.isFixed;var se=X(V,M.fixedNodesOnVertical);this.componentsOnVertical=se.components,this.fixedComponentsOnVertical=se.isFixed}}},F.prototype.updateDisplacements=function(){var M=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(se){var te=M.idToNodeMap.get(se.nodeId);te.displacementX=0,te.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var R=this.constraints.alignmentConstraint.vertical,k=0;k<R.length;k++){for(var I=0,q=0;q<R[k].length;q++){if(this.fixedNodeSet.has(R[k][q])){I=0;break}I+=this.idToNodeMap.get(R[k][q]).displacementX}for(var ae=I/R[k].length,q=0;q<R[k].length;q++)this.idToNodeMap.get(R[k][q]).displacementX=ae}if(this.constraints.alignmentConstraint.horizontal)for(var re=this.constraints.alignmentConstraint.horizontal,k=0;k<re.length;k++){for(var K=0,q=0;q<re[k].length;q++){if(this.fixedNodeSet.has(re[k][q])){K=0;break}K+=this.idToNodeMap.get(re[k][q]).displacementY}for(var W=K/re[k].length,q=0;q<re[k].length;q++)this.idToNodeMap.get(re[k][q]).displacementY=W}}if(this.constraints.relativePlacementConstraint)if(C.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(se){if(!M.fixedNodesOnHorizontal.has(se)){var te=0;M.dummyToNodeForVerticalAlignment.has(se)?te=M.idToNodeMap.get(M.dummyToNodeForVerticalAlignment.get(se)[0]).displacementX:te=M.idToNodeMap.get(se).displacementX,M.nodeToRelativeConstraintMapHorizontal.get(se).forEach(function(oe){if(oe.right){var le=M.nodeToTempPositionMapHorizontal.get(oe.right)-M.nodeToTempPositionMapHorizontal.get(se)-te;le<oe.gap&&(te-=oe.gap-le)}else{var le=M.nodeToTempPositionMapHorizontal.get(se)-M.nodeToTempPositionMapHorizontal.get(oe.left)+te;le<oe.gap&&(te+=oe.gap-le)}}),M.nodeToTempPositionMapHorizontal.set(se,M.nodeToTempPositionMapHorizontal.get(se)+te),M.dummyToNodeForVerticalAlignment.has(se)?M.dummyToNodeForVerticalAlignment.get(se).forEach(function(oe){M.idToNodeMap.get(oe).displacementX=te}):M.idToNodeMap.get(se).displacementX=te}}),this.nodesInRelativeVertical.forEach(function(se){if(!M.fixedNodesOnHorizontal.has(se)){var te=0;M.dummyToNodeForHorizontalAlignment.has(se)?te=M.idToNodeMap.get(M.dummyToNodeForHorizontalAlignment.get(se)[0]).displacementY:te=M.idToNodeMap.get(se).displacementY,M.nodeToRelativeConstraintMapVertical.get(se).forEach(function(oe){if(oe.bottom){var le=M.nodeToTempPositionMapVertical.get(oe.bottom)-M.nodeToTempPositionMapVertical.get(se)-te;le<oe.gap&&(te-=oe.gap-le)}else{var le=M.nodeToTempPositionMapVertical.get(se)-M.nodeToTempPositionMapVertical.get(oe.top)+te;le<oe.gap&&(te+=oe.gap-le)}}),M.nodeToTempPositionMapVertical.set(se,M.nodeToTempPositionMapVertical.get(se)+te),M.dummyToNodeForHorizontalAlignment.has(se)?M.dummyToNodeForHorizontalAlignment.get(se).forEach(function(oe){M.idToNodeMap.get(oe).displacementY=te}):M.idToNodeMap.get(se).displacementY=te}});else{for(var k=0;k<this.componentsOnHorizontal.length;k++){var Z=this.componentsOnHorizontal[k];if(this.fixedComponentsOnHorizontal[k])for(var q=0;q<Z.length;q++)this.dummyToNodeForVerticalAlignment.has(Z[q])?this.dummyToNodeForVerticalAlignment.get(Z[q]).forEach(function(oe){M.idToNodeMap.get(oe).displacementX=0}):this.idToNodeMap.get(Z[q]).displacementX=0;else{for(var U=0,V=0,q=0;q<Z.length;q++)if(this.dummyToNodeForVerticalAlignment.has(Z[q])){var X=this.dummyToNodeForVerticalAlignment.get(Z[q]);U+=X.length*this.idToNodeMap.get(X[0]).displacementX,V+=X.length}else U+=this.idToNodeMap.get(Z[q]).displacementX,V++;for(var ee=U/V,q=0;q<Z.length;q++)this.dummyToNodeForVerticalAlignment.has(Z[q])?this.dummyToNodeForVerticalAlignment.get(Z[q]).forEach(function(oe){M.idToNodeMap.get(oe).displacementX=ee}):this.idToNodeMap.get(Z[q]).displacementX=ee}}for(var k=0;k<this.componentsOnVertical.length;k++){var Z=this.componentsOnVertical[k];if(this.fixedComponentsOnVertical[k])for(var q=0;q<Z.length;q++)this.dummyToNodeForHorizontalAlignment.has(Z[q])?this.dummyToNodeForHorizontalAlignment.get(Z[q]).forEach(function(le){M.idToNodeMap.get(le).displacementY=0}):this.idToNodeMap.get(Z[q]).displacementY=0;else{for(var U=0,V=0,q=0;q<Z.length;q++)if(this.dummyToNodeForHorizontalAlignment.has(Z[q])){var X=this.dummyToNodeForHorizontalAlignment.get(Z[q]);U+=X.length*this.idToNodeMap.get(X[0]).displacementY,V+=X.length}else U+=this.idToNodeMap.get(Z[q]).displacementY,V++;for(var ee=U/V,q=0;q<Z.length;q++)this.dummyToNodeForHorizontalAlignment.has(Z[q])?this.dummyToNodeForHorizontalAlignment.get(Z[q]).forEach(function(ie){M.idToNodeMap.get(ie).displacementY=ee}):this.idToNodeMap.get(Z[q]).displacementY=ee}}}},F.prototype.calculateNodesToApplyGravitationTo=function(){var M=[],R,k=this.graphManager.getGraphs(),I=k.length,q;for(q=0;q<I;q++)R=k[q],R.updateConnected(),R.isConnected||(M=M.concat(R.getNodes()));return M},F.prototype.createBendpoints=function(){var M=[];M=M.concat(this.graphManager.getAllEdges());var R=new Set,k;for(k=0;k<M.length;k++){var I=M[k];if(!R.has(I)){var q=I.getSource(),ae=I.getTarget();if(q==ae)I.getBendpoints().push(new T),I.getBendpoints().push(new T),this.createDummyNodesForBendpoints(I),R.add(I);else{var re=[];if(re=re.concat(q.getEdgeListToNode(ae)),re=re.concat(ae.getEdgeListToNode(q)),!R.has(re[0])){if(re.length>1){var K;for(K=0;K<re.length;K++){var W=re[K];W.getBendpoints().push(new T),this.createDummyNodesForBendpoints(W)}}re.forEach(function(Z){R.add(Z)})}}}if(R.size==M.length)break}},F.prototype.positionNodesRadially=function(M){for(var R=new w(0,0),k=Math.ceil(Math.sqrt(M.length)),I=0,q=0,ae=0,re=new T(0,0),K=0;K<M.length;K++){K%k==0&&(ae=0,q=I,K!=0&&(q+=C.DEFAULT_COMPONENT_SEPERATION),I=0);var W=M[K],Z=_.findCenterOfTree(W);R.x=ae,R.y=q,re=F.radialLayout(W,Z,R),re.y>I&&(I=Math.floor(re.y)),ae=Math.floor(re.x+C.DEFAULT_COMPONENT_SEPERATION)}this.transform(new T(x.WORLD_CENTER_X-re.x/2,x.WORLD_CENTER_Y-re.y/2))},F.radialLayout=function(M,R,k){var I=Math.max(this.maxDiagonalInTree(M),C.DEFAULT_RADIAL_SEPARATION);F.branchRadialLayout(R,null,0,359,0,I);var q=N.calculateBounds(M),ae=new B;ae.setDeviceOrgX(q.getMinX()),ae.setDeviceOrgY(q.getMinY()),ae.setWorldOrgX(k.x),ae.setWorldOrgY(k.y);for(var re=0;re<M.length;re++){var K=M[re];K.transform(ae)}var W=new T(q.getMaxX(),q.getMaxY());return ae.inverseTransformPoint(W)},F.branchRadialLayout=function(M,R,k,I,q,ae){var re=(I-k+1)/2;re<0&&(re+=180);var K=(re+k)%360,W=K*P.TWO_PI/360,Z=q*Math.cos(W),U=q*Math.sin(W);M.setCenter(Z,U);var V=[];V=V.concat(M.getEdges());var X=V.length;R!=null&&X--;for(var ee=0,se=V.length,te,oe=M.getEdgesBetween(R);oe.length>1;){var le=oe[0];oe.splice(0,1);var $=V.indexOf(le);$>=0&&V.splice($,1),se--,X--}R!=null?te=(V.indexOf(oe[0])+1)%se:te=0;for(var ne=Math.abs(I-k)/X,ie=te;ee!=X;ie=++ie%se){var ue=V[ie].getOtherEnd(M);if(ue!=R){var me=(k+ee*ne)%360,ge=(me+ne)%360;F.branchRadialLayout(ue,M,me,ge,q+ae,ae),ee++}}},F.maxDiagonalInTree=function(M){for(var R=D.MIN_VALUE,k=0;k<M.length;k++){var I=M[k],q=I.getDiagonal();q>R&&(R=q)}return R},F.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},F.prototype.groupZeroDegreeMembers=function(){var M=this,R={};this.memberGroups={},this.idToDummyNode={};for(var k=[],I=this.graphManager.getAllNodes(),q=0;q<I.length;q++){var ae=I[q],re=ae.getParent();this.getNodeDegreeWithChildren(ae)===0&&(re.id==null||!this.getToBeTiled(re))&&k.push(ae)}for(var q=0;q<k.length;q++){var ae=k[q],K=ae.getParent().id;typeof R[K]>"u"&&(R[K]=[]),R[K]=R[K].concat(ae)}Object.keys(R).forEach(function(W){if(R[W].length>1){var Z="DummyCompound_"+W;M.memberGroups[Z]=R[W];var U=R[W][0].getParent(),V=new p(M.graphManager);V.id=Z,V.paddingLeft=U.paddingLeft||0,V.paddingRight=U.paddingRight||0,V.paddingBottom=U.paddingBottom||0,V.paddingTop=U.paddingTop||0,M.idToDummyNode[Z]=V;var X=M.getGraphManager().add(M.newGraph(),V),ee=U.getChild();ee.add(V);for(var se=0;se<R[W].length;se++){var te=R[W][se];ee.remove(te),X.add(te)}}})},F.prototype.clearCompounds=function(){var M={},R={};this.performDFSOnCompounds();for(var k=0;k<this.compoundOrder.length;k++)R[this.compoundOrder[k].id]=this.compoundOrder[k],M[this.compoundOrder[k].id]=[].concat(this.compoundOrder[k].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[k].getChild()),this.compoundOrder[k].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(M,R)},F.prototype.clearZeroDegreeMembers=function(){var M=this,R=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(k){var I=M.idToDummyNode[k];if(R[k]=M.tileNodes(M.memberGroups[k],I.paddingLeft+I.paddingRight),I.rect.width=R[k].width,I.rect.height=R[k].height,I.setCenter(R[k].centerX,R[k].centerY),I.labelMarginLeft=0,I.labelMarginTop=0,C.NODE_DIMENSIONS_INCLUDE_LABELS){var q=I.rect.width,ae=I.rect.height;I.labelWidth&&(I.labelPosHorizontal=="left"?(I.rect.x-=I.labelWidth,I.setWidth(q+I.labelWidth),I.labelMarginLeft=I.labelWidth):I.labelPosHorizontal=="center"&&I.labelWidth>q?(I.rect.x-=(I.labelWidth-q)/2,I.setWidth(I.labelWidth),I.labelMarginLeft=(I.labelWidth-q)/2):I.labelPosHorizontal=="right"&&I.setWidth(q+I.labelWidth)),I.labelHeight&&(I.labelPosVertical=="top"?(I.rect.y-=I.labelHeight,I.setHeight(ae+I.labelHeight),I.labelMarginTop=I.labelHeight):I.labelPosVertical=="center"&&I.labelHeight>ae?(I.rect.y-=(I.labelHeight-ae)/2,I.setHeight(I.labelHeight),I.labelMarginTop=(I.labelHeight-ae)/2):I.labelPosVertical=="bottom"&&I.setHeight(ae+I.labelHeight))}})},F.prototype.repopulateCompounds=function(){for(var M=this.compoundOrder.length-1;M>=0;M--){var R=this.compoundOrder[M],k=R.id,I=R.paddingLeft,q=R.paddingTop,ae=R.labelMarginLeft,re=R.labelMarginTop;this.adjustLocations(this.tiledMemberPack[k],R.rect.x,R.rect.y,I,q,ae,re)}},F.prototype.repopulateZeroDegreeMembers=function(){var M=this,R=this.tiledZeroDegreePack;Object.keys(R).forEach(function(k){var I=M.idToDummyNode[k],q=I.paddingLeft,ae=I.paddingTop,re=I.labelMarginLeft,K=I.labelMarginTop;M.adjustLocations(R[k],I.rect.x,I.rect.y,q,ae,re,K)})},F.prototype.getToBeTiled=function(M){var R=M.id;if(this.toBeTiled[R]!=null)return this.toBeTiled[R];var k=M.getChild();if(k==null)return this.toBeTiled[R]=!1,!1;for(var I=k.getNodes(),q=0;q<I.length;q++){var ae=I[q];if(this.getNodeDegree(ae)>0)return this.toBeTiled[R]=!1,!1;if(ae.getChild()==null){this.toBeTiled[ae.id]=!1;continue}if(!this.getToBeTiled(ae))return this.toBeTiled[R]=!1,!1}return this.toBeTiled[R]=!0,!0},F.prototype.getNodeDegree=function(M){M.id;for(var R=M.getEdges(),k=0,I=0;I<R.length;I++){var q=R[I];q.getSource().id!==q.getTarget().id&&(k=k+1)}return k},F.prototype.getNodeDegreeWithChildren=function(M){var R=this.getNodeDegree(M);if(M.getChild()==null)return R;for(var k=M.getChild().getNodes(),I=0;I<k.length;I++){var q=k[I];R+=this.getNodeDegreeWithChildren(q)}return R},F.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},F.prototype.fillCompexOrderByDFS=function(M){for(var R=0;R<M.length;R++){var k=M[R];k.getChild()!=null&&this.fillCompexOrderByDFS(k.getChild().getNodes()),this.getToBeTiled(k)&&this.compoundOrder.push(k)}},F.prototype.adjustLocations=function(M,R,k,I,q,ae,re){R+=I+ae,k+=q+re;for(var K=R,W=0;W<M.rows.length;W++){var Z=M.rows[W];R=K;for(var U=0,V=0;V<Z.length;V++){var X=Z[V];X.rect.x=R,X.rect.y=k,R+=X.rect.width+M.horizontalPadding,X.rect.height>U&&(U=X.rect.height)}k+=U+M.verticalPadding}},F.prototype.tileCompoundMembers=function(M,R){var k=this;this.tiledMemberPack=[],Object.keys(M).forEach(function(I){var q=R[I];if(k.tiledMemberPack[I]=k.tileNodes(M[I],q.paddingLeft+q.paddingRight),q.rect.width=k.tiledMemberPack[I].width,q.rect.height=k.tiledMemberPack[I].height,q.setCenter(k.tiledMemberPack[I].centerX,k.tiledMemberPack[I].centerY),q.labelMarginLeft=0,q.labelMarginTop=0,C.NODE_DIMENSIONS_INCLUDE_LABELS){var ae=q.rect.width,re=q.rect.height;q.labelWidth&&(q.labelPosHorizontal=="left"?(q.rect.x-=q.labelWidth,q.setWidth(ae+q.labelWidth),q.labelMarginLeft=q.labelWidth):q.labelPosHorizontal=="center"&&q.labelWidth>ae?(q.rect.x-=(q.labelWidth-ae)/2,q.setWidth(q.labelWidth),q.labelMarginLeft=(q.labelWidth-ae)/2):q.labelPosHorizontal=="right"&&q.setWidth(ae+q.labelWidth)),q.labelHeight&&(q.labelPosVertical=="top"?(q.rect.y-=q.labelHeight,q.setHeight(re+q.labelHeight),q.labelMarginTop=q.labelHeight):q.labelPosVertical=="center"&&q.labelHeight>re?(q.rect.y-=(q.labelHeight-re)/2,q.setHeight(q.labelHeight),q.labelMarginTop=(q.labelHeight-re)/2):q.labelPosVertical=="bottom"&&q.setHeight(re+q.labelHeight))}})},F.prototype.tileNodes=function(M,R){var k=this.tileNodesByFavoringDim(M,R,!0),I=this.tileNodesByFavoringDim(M,R,!1),q=this.getOrgRatio(k),ae=this.getOrgRatio(I),re;return ae<q?re=I:re=k,re},F.prototype.getOrgRatio=function(M){var R=M.width,k=M.height,I=R/k;return I<1&&(I=1/I),I},F.prototype.calcIdealRowWidth=function(M,R){var k=C.TILING_PADDING_VERTICAL,I=C.TILING_PADDING_HORIZONTAL,q=M.length,ae=0,re=0,K=0;M.forEach(function(se){ae+=se.getWidth(),re+=se.getHeight(),se.getWidth()>K&&(K=se.getWidth())});var W=ae/q,Z=re/q,U=Math.pow(k-I,2)+4*(W+I)*(Z+k)*q,V=(I-k+Math.sqrt(U))/(2*(W+I)),X;R?(X=Math.ceil(V),X==V&&X++):X=Math.floor(V);var ee=X*(W+I)-I;return K>ee&&(ee=K),ee+=I*2,ee},F.prototype.tileNodesByFavoringDim=function(M,R,k){var I=C.TILING_PADDING_VERTICAL,q=C.TILING_PADDING_HORIZONTAL,ae=C.TILING_COMPARE_BY,re={rows:[],rowWidth:[],rowHeight:[],width:0,height:R,verticalPadding:I,horizontalPadding:q,centerX:0,centerY:0};ae&&(re.idealRowWidth=this.calcIdealRowWidth(M,k));var K=function(te){return te.rect.width*te.rect.height},W=function(te,oe){return K(oe)-K(te)};M.sort(function(se,te){var oe=W;return re.idealRowWidth?(oe=ae,oe(se.id,te.id)):oe(se,te)});for(var Z=0,U=0,V=0;V<M.length;V++){var X=M[V];Z+=X.getCenterX(),U+=X.getCenterY()}re.centerX=Z/M.length,re.centerY=U/M.length;for(var V=0;V<M.length;V++){var X=M[V];if(re.rows.length==0)this.insertNodeToRow(re,X,0,R);else if(this.canAddHorizontal(re,X.rect.width,X.rect.height)){var ee=re.rows.length-1;re.idealRowWidth||(ee=this.getShortestRowIndex(re)),this.insertNodeToRow(re,X,ee,R)}else this.insertNodeToRow(re,X,re.rows.length,R);this.shiftToLastRow(re)}return re},F.prototype.insertNodeToRow=function(M,R,k,I){var q=I;if(k==M.rows.length){var ae=[];M.rows.push(ae),M.rowWidth.push(q),M.rowHeight.push(0)}var re=M.rowWidth[k]+R.rect.width;M.rows[k].length>0&&(re+=M.horizontalPadding),M.rowWidth[k]=re,M.width<re&&(M.width=re);var K=R.rect.height;k>0&&(K+=M.verticalPadding);var W=0;K>M.rowHeight[k]&&(W=M.rowHeight[k],M.rowHeight[k]=K,W=M.rowHeight[k]-W),M.height+=W,M.rows[k].push(R)},F.prototype.getShortestRowIndex=function(M){for(var R=-1,k=Number.MAX_VALUE,I=0;I<M.rows.length;I++)M.rowWidth[I]<k&&(R=I,k=M.rowWidth[I]);return R},F.prototype.getLongestRowIndex=function(M){for(var R=-1,k=Number.MIN_VALUE,I=0;I<M.rows.length;I++)M.rowWidth[I]>k&&(R=I,k=M.rowWidth[I]);return R},F.prototype.canAddHorizontal=function(M,R,k){if(M.idealRowWidth){var I=M.rows.length-1,q=M.rowWidth[I];return q+R+M.horizontalPadding<=M.idealRowWidth}var ae=this.getShortestRowIndex(M);if(ae<0)return!0;var re=M.rowWidth[ae];if(re+M.horizontalPadding+R<=M.width)return!0;var K=0;M.rowHeight[ae]<k&&ae>0&&(K=k+M.verticalPadding-M.rowHeight[ae]);var W;M.width-re>=R+M.horizontalPadding?W=(M.height+K)/(re+R+M.horizontalPadding):W=(M.height+K)/M.width,K=k+M.verticalPadding;var Z;return M.width<R?Z=(M.height+K)/R:Z=(M.height+K)/M.width,Z<1&&(Z=1/Z),W<1&&(W=1/W),W<Z},F.prototype.shiftToLastRow=function(M){var R=this.getLongestRowIndex(M),k=M.rowWidth.length-1,I=M.rows[R],q=I[I.length-1],ae=q.width+M.horizontalPadding;if(M.width-M.rowWidth[k]>ae&&R!=k){I.splice(-1,1),M.rows[k].push(q),M.rowWidth[R]=M.rowWidth[R]-ae,M.rowWidth[k]=M.rowWidth[k]+ae,M.width=M.rowWidth[instance.getLongestRowIndex(M)];for(var re=Number.MIN_VALUE,K=0;K<I.length;K++)I[K].height>re&&(re=I[K].height);R>0&&(re+=M.verticalPadding);var W=M.rowHeight[R]+M.rowHeight[k];M.rowHeight[R]=re,M.rowHeight[k]<q.height+M.verticalPadding&&(M.rowHeight[k]=q.height+M.verticalPadding);var Z=M.rowHeight[R]+M.rowHeight[k];M.height+=Z-W,this.shiftToLastRow(M)}},F.prototype.tilingPreLayout=function(){C.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},F.prototype.tilingPostLayout=function(){C.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},F.prototype.reduceTrees=function(){for(var M=[],R=!0,k;R;){var I=this.graphManager.getAllNodes(),q=[];R=!1;for(var ae=0;ae<I.length;ae++)if(k=I[ae],k.getEdges().length==1&&!k.getEdges()[0].isInterGraph&&k.getChild()==null){if(C.PURE_INCREMENTAL){var re=k.getEdges()[0].getOtherEnd(k),K=new A(k.getCenterX()-re.getCenterX(),k.getCenterY()-re.getCenterY());q.push([k,k.getEdges()[0],k.getOwner(),K])}else q.push([k,k.getEdges()[0],k.getOwner()]);R=!0}if(R==!0){for(var W=[],Z=0;Z<q.length;Z++)q[Z][0].getEdges().length==1&&(W.push(q[Z]),q[Z][0].getOwner().remove(q[Z][0]));M.push(W),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=M},F.prototype.growTree=function(M){for(var R=M.length,k=M[R-1],I,q=0;q<k.length;q++)I=k[q],this.findPlaceforPrunedNode(I),I[2].add(I[0]),I[2].add(I[1],I[1].source,I[1].target);M.splice(M.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},F.prototype.findPlaceforPrunedNode=function(M){var R,k,I=M[0];if(I==M[1].source?k=M[1].target:k=M[1].source,C.PURE_INCREMENTAL)I.setCenter(k.getCenterX()+M[3].getWidth(),k.getCenterY()+M[3].getHeight());else{var q=k.startX,ae=k.finishX,re=k.startY,K=k.finishY,W=0,Z=0,U=0,V=0,X=[W,U,Z,V];if(re>0)for(var ee=q;ee<=ae;ee++)X[0]+=this.grid[ee][re-1].length+this.grid[ee][re].length-1;if(ae<this.grid.length-1)for(var ee=re;ee<=K;ee++)X[1]+=this.grid[ae+1][ee].length+this.grid[ae][ee].length-1;if(K<this.grid[0].length-1)for(var ee=q;ee<=ae;ee++)X[2]+=this.grid[ee][K+1].length+this.grid[ee][K].length-1;if(q>0)for(var ee=re;ee<=K;ee++)X[3]+=this.grid[q-1][ee].length+this.grid[q][ee].length-1;for(var se=D.MAX_VALUE,te,oe,le=0;le<X.length;le++)X[le]<se?(se=X[le],te=1,oe=le):X[le]==se&&te++;if(te==3&&se==0)X[0]==0&&X[1]==0&&X[2]==0?R=1:X[0]==0&&X[1]==0&&X[3]==0?R=0:X[0]==0&&X[2]==0&&X[3]==0?R=3:X[1]==0&&X[2]==0&&X[3]==0&&(R=2);else if(te==2&&se==0){var $=Math.floor(Math.random()*2);X[0]==0&&X[1]==0?$==0?R=0:R=1:X[0]==0&&X[2]==0?$==0?R=0:R=2:X[0]==0&&X[3]==0?$==0?R=0:R=3:X[1]==0&&X[2]==0?$==0?R=1:R=2:X[1]==0&&X[3]==0?$==0?R=1:R=3:$==0?R=2:R=3}else if(te==4&&se==0){var $=Math.floor(Math.random()*4);R=$}else R=oe;R==0?I.setCenter(k.getCenterX(),k.getCenterY()-k.getHeight()/2-v.DEFAULT_EDGE_LENGTH-I.getHeight()/2):R==1?I.setCenter(k.getCenterX()+k.getWidth()/2+v.DEFAULT_EDGE_LENGTH+I.getWidth()/2,k.getCenterY()):R==2?I.setCenter(k.getCenterX(),k.getCenterY()+k.getHeight()/2+v.DEFAULT_EDGE_LENGTH+I.getHeight()/2):I.setCenter(k.getCenterX()-k.getWidth()/2-v.DEFAULT_EDGE_LENGTH-I.getWidth()/2,k.getCenterY())}},l.exports=F},991:(l,u,f)=>{var c=f(551).FDLayoutNode,h=f(551).IMath;function g(y,C,E,v){c.call(this,y,C,E,v)}g.prototype=Object.create(c.prototype);for(var p in c)g[p]=c[p];g.prototype.calculateDisplacement=function(){var y=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=y.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=y.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=y.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=y.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>y.coolingFactor*y.maxNodeDisplacement&&(this.displacementX=y.coolingFactor*y.maxNodeDisplacement*h.sign(this.displacementX)),Math.abs(this.displacementY)>y.coolingFactor*y.maxNodeDisplacement&&(this.displacementY=y.coolingFactor*y.maxNodeDisplacement*h.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},g.prototype.propogateDisplacementToChildren=function(y,C){for(var E=this.getChild().getNodes(),v,x=0;x<E.length;x++)v=E[x],v.getChild()==null?(v.displacementX+=y,v.displacementY+=C):v.propogateDisplacementToChildren(y,C)},g.prototype.move=function(){var y=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),y.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},g.prototype.setPred1=function(y){this.pred1=y},g.prototype.getPred1=function(){return pred1},g.prototype.getPred2=function(){return pred2},g.prototype.setNext=function(y){this.next=y},g.prototype.getNext=function(){return next},g.prototype.setProcessed=function(y){this.processed=y},g.prototype.isProcessed=function(){return processed},l.exports=g},902:(l,u,f)=>{function c(E){if(Array.isArray(E)){for(var v=0,x=Array(E.length);v<E.length;v++)x[v]=E[v];return x}else return Array.from(E)}var h=f(806),g=f(551).LinkedList,p=f(551).Matrix,y=f(551).SVD;function C(){}C.handleConstraints=function(E){var v={};v.fixedNodeConstraint=E.constraints.fixedNodeConstraint,v.alignmentConstraint=E.constraints.alignmentConstraint,v.relativePlacementConstraint=E.constraints.relativePlacementConstraint;for(var x=new Map,w=new Map,T=[],A=[],_=E.getAllNodes(),D=0,P=0;P<_.length;P++){var N=_[P];N.getChild()==null&&(w.set(N.id,D++),T.push(N.getCenterX()),A.push(N.getCenterY()),x.set(N.id,N))}v.relativePlacementConstraint&&v.relativePlacementConstraint.forEach(function(ve){!ve.gap&&ve.gap!=0&&(ve.left?ve.gap=h.DEFAULT_EDGE_LENGTH+x.get(ve.left).getWidth()/2+x.get(ve.right).getWidth()/2:ve.gap=h.DEFAULT_EDGE_LENGTH+x.get(ve.top).getHeight()/2+x.get(ve.bottom).getHeight()/2)});var B=function(j,pe){return{x:j.x-pe.x,y:j.y-pe.y}},G=function(j){var pe=0,we=0;return j.forEach(function(xe){pe+=T[w.get(xe)],we+=A[w.get(xe)]}),{x:pe/j.size,y:we/j.size}},F=function(j,pe,we,xe,Ce){function Be(Ge,Ve){var dt=new Set(Ge),rt=!0,at=!1,Et=void 0;try{for(var ut=Ve[Symbol.iterator](),pt;!(rt=(pt=ut.next()).done);rt=!0){var _t=pt.value;dt.add(_t)}}catch(Mt){at=!0,Et=Mt}finally{try{!rt&&ut.return&&ut.return()}finally{if(at)throw Et}}return dt}var Te=new Map;j.forEach(function(Ge,Ve){Te.set(Ve,0)}),j.forEach(function(Ge,Ve){Ge.forEach(function(dt){Te.set(dt.id,Te.get(dt.id)+1)})});var ke=new Map,Oe=new Map,He=new g;Te.forEach(function(Ge,Ve){Ge==0?(He.push(Ve),we||(pe=="horizontal"?ke.set(Ve,w.has(Ve)?T[w.get(Ve)]:xe.get(Ve)):ke.set(Ve,w.has(Ve)?A[w.get(Ve)]:xe.get(Ve)))):ke.set(Ve,Number.NEGATIVE_INFINITY),we&&Oe.set(Ve,new Set([Ve]))}),we&&Ce.forEach(function(Ge){var Ve=[];if(Ge.forEach(function(at){we.has(at)&&Ve.push(at)}),Ve.length>0){var dt=0;Ve.forEach(function(at){pe=="horizontal"?(ke.set(at,w.has(at)?T[w.get(at)]:xe.get(at)),dt+=ke.get(at)):(ke.set(at,w.has(at)?A[w.get(at)]:xe.get(at)),dt+=ke.get(at))}),dt=dt/Ve.length,Ge.forEach(function(at){we.has(at)||ke.set(at,dt)})}else{var rt=0;Ge.forEach(function(at){pe=="horizontal"?rt+=w.has(at)?T[w.get(at)]:xe.get(at):rt+=w.has(at)?A[w.get(at)]:xe.get(at)}),rt=rt/Ge.length,Ge.forEach(function(at){ke.set(at,rt)})}});for(var Ue=function(){var Ve=He.shift(),dt=j.get(Ve);dt.forEach(function(rt){if(ke.get(rt.id)<ke.get(Ve)+rt.gap)if(we&&we.has(rt.id)){var at=void 0;if(pe=="horizontal"?at=w.has(rt.id)?T[w.get(rt.id)]:xe.get(rt.id):at=w.has(rt.id)?A[w.get(rt.id)]:xe.get(rt.id),ke.set(rt.id,at),at<ke.get(Ve)+rt.gap){var Et=ke.get(Ve)+rt.gap-at;Oe.get(Ve).forEach(function(ut){ke.set(ut,ke.get(ut)-Et)})}}else ke.set(rt.id,ke.get(Ve)+rt.gap);Te.set(rt.id,Te.get(rt.id)-1),Te.get(rt.id)==0&&He.push(rt.id),we&&Oe.set(rt.id,Be(Oe.get(Ve),Oe.get(rt.id)))})};He.length!=0;)Ue();if(we){var Ke=new Set;j.forEach(function(Ge,Ve){Ge.length==0&&Ke.add(Ve)});var Qe=[];Oe.forEach(function(Ge,Ve){if(Ke.has(Ve)){var dt=!1,rt=!0,at=!1,Et=void 0;try{for(var ut=Ge[Symbol.iterator](),pt;!(rt=(pt=ut.next()).done);rt=!0){var _t=pt.value;we.has(_t)&&(dt=!0)}}catch(Lt){at=!0,Et=Lt}finally{try{!rt&&ut.return&&ut.return()}finally{if(at)throw Et}}if(!dt){var Mt=!1,Vt=void 0;Qe.forEach(function(Lt,zt){Lt.has([].concat(c(Ge))[0])&&(Mt=!0,Vt=zt)}),Mt?Ge.forEach(function(Lt){Qe[Vt].add(Lt)}):Qe.push(new Set(Ge))}}}),Qe.forEach(function(Ge,Ve){var dt=Number.POSITIVE_INFINITY,rt=Number.POSITIVE_INFINITY,at=Number.NEGATIVE_INFINITY,Et=Number.NEGATIVE_INFINITY,ut=!0,pt=!1,_t=void 0;try{for(var Mt=Ge[Symbol.iterator](),Vt;!(ut=(Vt=Mt.next()).done);ut=!0){var Lt=Vt.value,zt=void 0;pe=="horizontal"?zt=w.has(Lt)?T[w.get(Lt)]:xe.get(Lt):zt=w.has(Lt)?A[w.get(Lt)]:xe.get(Lt);var Er=ke.get(Lt);zt<dt&&(dt=zt),zt>at&&(at=zt),Er<rt&&(rt=Er),Er>Et&&(Et=Er)}}catch(gn){pt=!0,_t=gn}finally{try{!ut&&Mt.return&&Mt.return()}finally{if(pt)throw _t}}var on=(dt+at)/2-(rt+Et)/2,Rt=!0,Kt=!1,$t=void 0;try{for(var ur=Ge[Symbol.iterator](),jt;!(Rt=(jt=ur.next()).done);Rt=!0){var Kr=jt.value;ke.set(Kr,ke.get(Kr)+on)}}catch(gn){Kt=!0,$t=gn}finally{try{!Rt&&ur.return&&ur.return()}finally{if(Kt)throw $t}}})}return ke},z=function(j){var pe=0,we=0,xe=0,Ce=0;if(j.forEach(function(Oe){Oe.left?T[w.get(Oe.left)]-T[w.get(Oe.right)]>=0?pe++:we++:A[w.get(Oe.top)]-A[w.get(Oe.bottom)]>=0?xe++:Ce++}),pe>we&&xe>Ce)for(var Be=0;Be<w.size;Be++)T[Be]=-1*T[Be],A[Be]=-1*A[Be];else if(pe>we)for(var Te=0;Te<w.size;Te++)T[Te]=-1*T[Te];else if(xe>Ce)for(var ke=0;ke<w.size;ke++)A[ke]=-1*A[ke]},M=function(j){var pe=[],we=new g,xe=new Set,Ce=0;return j.forEach(function(Be,Te){if(!xe.has(Te)){pe[Ce]=[];var ke=Te;for(we.push(ke),xe.add(ke),pe[Ce].push(ke);we.length!=0;){ke=we.shift();var Oe=j.get(ke);Oe.forEach(function(He){xe.has(He.id)||(we.push(He.id),xe.add(He.id),pe[Ce].push(He.id))})}Ce++}}),pe},R=function(j){var pe=new Map;return j.forEach(function(we,xe){pe.set(xe,[])}),j.forEach(function(we,xe){we.forEach(function(Ce){pe.get(xe).push(Ce),pe.get(Ce.id).push({id:xe,gap:Ce.gap,direction:Ce.direction})})}),pe},k=function(j){var pe=new Map;return j.forEach(function(we,xe){pe.set(xe,[])}),j.forEach(function(we,xe){we.forEach(function(Ce){pe.get(Ce.id).push({id:xe,gap:Ce.gap,direction:Ce.direction})})}),pe},I=[],q=[],ae=!1,re=!1,K=new Set,W=new Map,Z=new Map,U=[];if(v.fixedNodeConstraint&&v.fixedNodeConstraint.forEach(function(ve){K.add(ve.nodeId)}),v.relativePlacementConstraint&&(v.relativePlacementConstraint.forEach(function(ve){ve.left?(W.has(ve.left)?W.get(ve.left).push({id:ve.right,gap:ve.gap,direction:"horizontal"}):W.set(ve.left,[{id:ve.right,gap:ve.gap,direction:"horizontal"}]),W.has(ve.right)||W.set(ve.right,[])):(W.has(ve.top)?W.get(ve.top).push({id:ve.bottom,gap:ve.gap,direction:"vertical"}):W.set(ve.top,[{id:ve.bottom,gap:ve.gap,direction:"vertical"}]),W.has(ve.bottom)||W.set(ve.bottom,[]))}),Z=R(W),U=M(Z)),h.TRANSFORM_ON_CONSTRAINT_HANDLING){if(v.fixedNodeConstraint&&v.fixedNodeConstraint.length>1)v.fixedNodeConstraint.forEach(function(ve,j){I[j]=[ve.position.x,ve.position.y],q[j]=[T[w.get(ve.nodeId)],A[w.get(ve.nodeId)]]}),ae=!0;else if(v.alignmentConstraint)(function(){var ve=0;if(v.alignmentConstraint.vertical){for(var j=v.alignmentConstraint.vertical,pe=function(ke){var Oe=new Set;j[ke].forEach(function(Ke){Oe.add(Ke)});var He=new Set([].concat(c(Oe)).filter(function(Ke){return K.has(Ke)})),Ue=void 0;He.size>0?Ue=T[w.get(He.values().next().value)]:Ue=G(Oe).x,j[ke].forEach(function(Ke){I[ve]=[Ue,A[w.get(Ke)]],q[ve]=[T[w.get(Ke)],A[w.get(Ke)]],ve++})},we=0;we<j.length;we++)pe(we);ae=!0}if(v.alignmentConstraint.horizontal){for(var xe=v.alignmentConstraint.horizontal,Ce=function(ke){var Oe=new Set;xe[ke].forEach(function(Ke){Oe.add(Ke)});var He=new Set([].concat(c(Oe)).filter(function(Ke){return K.has(Ke)})),Ue=void 0;He.size>0?Ue=T[w.get(He.values().next().value)]:Ue=G(Oe).y,xe[ke].forEach(function(Ke){I[ve]=[T[w.get(Ke)],Ue],q[ve]=[T[w.get(Ke)],A[w.get(Ke)]],ve++})},Be=0;Be<xe.length;Be++)Ce(Be);ae=!0}v.relativePlacementConstraint&&(re=!0)})();else if(v.relativePlacementConstraint){for(var V=0,X=0,ee=0;ee<U.length;ee++)U[ee].length>V&&(V=U[ee].length,X=ee);if(V<Z.size/2)z(v.relativePlacementConstraint),ae=!1,re=!1;else{var se=new Map,te=new Map,oe=[];U[X].forEach(function(ve){W.get(ve).forEach(function(j){j.direction=="horizontal"?(se.has(ve)?se.get(ve).push(j):se.set(ve,[j]),se.has(j.id)||se.set(j.id,[]),oe.push({left:ve,right:j.id})):(te.has(ve)?te.get(ve).push(j):te.set(ve,[j]),te.has(j.id)||te.set(j.id,[]),oe.push({top:ve,bottom:j.id}))})}),z(oe),re=!1;var le=F(se,"horizontal"),$=F(te,"vertical");U[X].forEach(function(ve,j){q[j]=[T[w.get(ve)],A[w.get(ve)]],I[j]=[],le.has(ve)?I[j][0]=le.get(ve):I[j][0]=T[w.get(ve)],$.has(ve)?I[j][1]=$.get(ve):I[j][1]=A[w.get(ve)]}),ae=!0}}if(ae){for(var ne=void 0,ie=p.transpose(I),ue=p.transpose(q),me=0;me<ie.length;me++)ie[me]=p.multGamma(ie[me]),ue[me]=p.multGamma(ue[me]);var ge=p.multMat(ie,p.transpose(ue)),Ee=y.svd(ge);ne=p.multMat(Ee.V,p.transpose(Ee.U));for(var he=0;he<w.size;he++){var de=[T[he],A[he]],be=[ne[0][0],ne[1][0]],De=[ne[0][1],ne[1][1]];T[he]=p.dotProduct(de,be),A[he]=p.dotProduct(de,De)}re&&z(v.relativePlacementConstraint)}}if(h.ENFORCE_CONSTRAINTS){if(v.fixedNodeConstraint&&v.fixedNodeConstraint.length>0){var Se={x:0,y:0};v.fixedNodeConstraint.forEach(function(ve,j){var pe={x:T[w.get(ve.nodeId)],y:A[w.get(ve.nodeId)]},we=ve.position,xe=B(we,pe);Se.x+=xe.x,Se.y+=xe.y}),Se.x/=v.fixedNodeConstraint.length,Se.y/=v.fixedNodeConstraint.length,T.forEach(function(ve,j){T[j]+=Se.x}),A.forEach(function(ve,j){A[j]+=Se.y}),v.fixedNodeConstraint.forEach(function(ve){T[w.get(ve.nodeId)]=ve.position.x,A[w.get(ve.nodeId)]=ve.position.y})}if(v.alignmentConstraint){if(v.alignmentConstraint.vertical)for(var Re=v.alignmentConstraint.vertical,Ie=function(j){var pe=new Set;Re[j].forEach(function(Ce){pe.add(Ce)});var we=new Set([].concat(c(pe)).filter(function(Ce){return K.has(Ce)})),xe=void 0;we.size>0?xe=T[w.get(we.values().next().value)]:xe=G(pe).x,pe.forEach(function(Ce){K.has(Ce)||(T[w.get(Ce)]=xe)})},qe=0;qe<Re.length;qe++)Ie(qe);if(v.alignmentConstraint.horizontal)for(var Ze=v.alignmentConstraint.horizontal,$e=function(j){var pe=new Set;Ze[j].forEach(function(Ce){pe.add(Ce)});var we=new Set([].concat(c(pe)).filter(function(Ce){return K.has(Ce)})),xe=void 0;we.size>0?xe=A[w.get(we.values().next().value)]:xe=G(pe).y,pe.forEach(function(Ce){K.has(Ce)||(A[w.get(Ce)]=xe)})},tt=0;tt<Ze.length;tt++)$e(tt)}v.relativePlacementConstraint&&function(){var ve=new Map,j=new Map,pe=new Map,we=new Map,xe=new Map,Ce=new Map,Be=new Set,Te=new Set;if(K.forEach(function(Pt){Be.add(Pt),Te.add(Pt)}),v.alignmentConstraint){if(v.alignmentConstraint.vertical)for(var ke=v.alignmentConstraint.vertical,Oe=function(Q){pe.set("dummy"+Q,[]),ke[Q].forEach(function(fe){ve.set(fe,"dummy"+Q),pe.get("dummy"+Q).push(fe),K.has(fe)&&Be.add("dummy"+Q)}),xe.set("dummy"+Q,T[w.get(ke[Q][0])])},He=0;He<ke.length;He++)Oe(He);if(v.alignmentConstraint.horizontal)for(var Ue=v.alignmentConstraint.horizontal,Ke=function(Q){we.set("dummy"+Q,[]),Ue[Q].forEach(function(fe){j.set(fe,"dummy"+Q),we.get("dummy"+Q).push(fe),K.has(fe)&&Te.add("dummy"+Q)}),Ce.set("dummy"+Q,A[w.get(Ue[Q][0])])},Qe=0;Qe<Ue.length;Qe++)Ke(Qe)}var Ge=new Map,Ve=new Map,dt=function(Q){W.get(Q).forEach(function(fe){var Pe=void 0,ze=void 0;fe.direction=="horizontal"?(Pe=ve.get(Q)?ve.get(Q):Q,ve.get(fe.id)?ze={id:ve.get(fe.id),gap:fe.gap,direction:fe.direction}:ze=fe,Ge.has(Pe)?Ge.get(Pe).push(ze):Ge.set(Pe,[ze]),Ge.has(ze.id)||Ge.set(ze.id,[])):(Pe=j.get(Q)?j.get(Q):Q,j.get(fe.id)?ze={id:j.get(fe.id),gap:fe.gap,direction:fe.direction}:ze=fe,Ve.has(Pe)?Ve.get(Pe).push(ze):Ve.set(Pe,[ze]),Ve.has(ze.id)||Ve.set(ze.id,[]))})},rt=!0,at=!1,Et=void 0;try{for(var ut=W.keys()[Symbol.iterator](),pt;!(rt=(pt=ut.next()).done);rt=!0){var _t=pt.value;dt(_t)}}catch(Pt){at=!0,Et=Pt}finally{try{!rt&&ut.return&&ut.return()}finally{if(at)throw Et}}var Mt=R(Ge),Vt=R(Ve),Lt=M(Mt),zt=M(Vt),Er=k(Ge),on=k(Ve),Rt=[],Kt=[];Lt.forEach(function(Pt,Q){Rt[Q]=[],Pt.forEach(function(fe){Er.get(fe).length==0&&Rt[Q].push(fe)})}),zt.forEach(function(Pt,Q){Kt[Q]=[],Pt.forEach(function(fe){on.get(fe).length==0&&Kt[Q].push(fe)})});var $t=F(Ge,"horizontal",Be,xe,Rt),ur=F(Ve,"vertical",Te,Ce,Kt),jt=function(Q){pe.get(Q)?pe.get(Q).forEach(function(fe){T[w.get(fe)]=$t.get(Q)}):T[w.get(Q)]=$t.get(Q)},Kr=!0,gn=!1,jn=void 0;try{for(var Ln=$t.keys()[Symbol.iterator](),Zn;!(Kr=(Zn=Ln.next()).done);Kr=!0){var sn=Zn.value;jt(sn)}}catch(Pt){gn=!0,jn=Pt}finally{try{!Kr&&Ln.return&&Ln.return()}finally{if(gn)throw jn}}var Ma=function(Q){we.get(Q)?we.get(Q).forEach(function(fe){A[w.get(fe)]=ur.get(Q)}):A[w.get(Q)]=ur.get(Q)},zn=!0,Ft=!1,lt=void 0;try{for(var Gr=ur.keys()[Symbol.iterator](),Qn;!(zn=(Qn=Gr.next()).done);zn=!0){var sn=Qn.value;Ma(sn)}}catch(Pt){Ft=!0,lt=Pt}finally{try{!zn&&Gr.return&&Gr.return()}finally{if(Ft)throw lt}}}()}for(var Xe=0;Xe<_.length;Xe++){var We=_[Xe];We.getChild()==null&&We.setCenter(T[w.get(We.id)],A[w.get(We.id)])}},l.exports=C},551:l=>{l.exports=r}},a={};function i(l){var u=a[l];if(u!==void 0)return u.exports;var f=a[l]={exports:{}};return n[l](f,f.exports,i),f.exports}var o=i(45);return o})()})}(kf)),kf.exports}var S$=Nf.exports,ZM;function A$(){return ZM||(ZM=1,function(t,e){(function(n,a){t.exports=a(T$())})(S$,function(r){return(()=>{var n={658:l=>{l.exports=Object.assign!=null?Object.assign.bind(Object):function(u){for(var f=arguments.length,c=Array(f>1?f-1:0),h=1;h<f;h++)c[h-1]=arguments[h];return c.forEach(function(g){Object.keys(g).forEach(function(p){return u[p]=g[p]})}),u}},548:(l,u,f)=>{var c=function(){function p(y,C){var E=[],v=!0,x=!1,w=void 0;try{for(var T=y[Symbol.iterator](),A;!(v=(A=T.next()).done)&&(E.push(A.value),!(C&&E.length===C));v=!0);}catch(_){x=!0,w=_}finally{try{!v&&T.return&&T.return()}finally{if(x)throw w}}return E}return function(y,C){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return p(y,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=f(140).layoutBase.LinkedList,g={};g.getTopMostNodes=function(p){for(var y={},C=0;C<p.length;C++)y[p[C].id()]=!0;var E=p.filter(function(v,x){typeof v=="number"&&(v=x);for(var w=v.parent()[0];w!=null;){if(y[w.id()])return!1;w=w.parent()[0]}return!0});return E},g.connectComponents=function(p,y,C,E){var v=new h,x=new Set,w=[],T=void 0,A=void 0,_=void 0,D=!1,P=1,N=[],B=[],G=function(){var z=p.collection();B.push(z);var M=C[0],R=p.collection();R.merge(M).merge(M.descendants().intersection(y)),w.push(M),R.forEach(function(q){v.push(q),x.add(q),z.merge(q)});for(var k=function(){M=v.shift();var ae=p.collection();M.neighborhood().nodes().forEach(function(Z){y.intersection(M.edgesWith(Z)).length>0&&ae.merge(Z)});for(var re=0;re<ae.length;re++){var K=ae[re];if(T=C.intersection(K.union(K.ancestors())),T!=null&&!x.has(T[0])){var W=T.union(T.descendants());W.forEach(function(Z){v.push(Z),x.add(Z),z.merge(Z),C.has(Z)&&w.push(Z)})}}};v.length!=0;)k();if(z.forEach(function(q){y.intersection(q.connectedEdges()).forEach(function(ae){z.has(ae.source())&&z.has(ae.target())&&z.merge(ae)})}),w.length==C.length&&(D=!0),!D||D&&P>1){A=w[0],_=A.connectedEdges().length,w.forEach(function(q){q.connectedEdges().length<_&&(_=q.connectedEdges().length,A=q)}),N.push(A.id());var I=p.collection();I.merge(w[0]),w.forEach(function(q){I.merge(q)}),w=[],C=C.difference(I),P++}};do G();while(!D);return E&&N.length>0&&E.set("dummy"+(E.size+1),N),B},g.relocateComponent=function(p,y,C){if(!C.fixedNodeConstraint){var E=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,x=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY;if(C.quality=="draft"){var T=!0,A=!1,_=void 0;try{for(var D=y.nodeIndexes[Symbol.iterator](),P;!(T=(P=D.next()).done);T=!0){var N=P.value,B=c(N,2),G=B[0],F=B[1],z=C.cy.getElementById(G);if(z){var M=z.boundingBox(),R=y.xCoords[F]-M.w/2,k=y.xCoords[F]+M.w/2,I=y.yCoords[F]-M.h/2,q=y.yCoords[F]+M.h/2;R<E&&(E=R),k>v&&(v=k),I<x&&(x=I),q>w&&(w=q)}}}catch(Z){A=!0,_=Z}finally{try{!T&&D.return&&D.return()}finally{if(A)throw _}}var ae=p.x-(v+E)/2,re=p.y-(w+x)/2;y.xCoords=y.xCoords.map(function(Z){return Z+ae}),y.yCoords=y.yCoords.map(function(Z){return Z+re})}else{Object.keys(y).forEach(function(Z){var U=y[Z],V=U.getRect().x,X=U.getRect().x+U.getRect().width,ee=U.getRect().y,se=U.getRect().y+U.getRect().height;V<E&&(E=V),X>v&&(v=X),ee<x&&(x=ee),se>w&&(w=se)});var K=p.x-(v+E)/2,W=p.y-(w+x)/2;Object.keys(y).forEach(function(Z){var U=y[Z];U.setCenter(U.getCenterX()+K,U.getCenterY()+W)})}}},g.calcBoundingBox=function(p,y,C,E){for(var v=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER,w=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER,A=void 0,_=void 0,D=void 0,P=void 0,N=p.descendants().not(":parent"),B=N.length,G=0;G<B;G++){var F=N[G];A=y[E.get(F.id())]-F.width()/2,_=y[E.get(F.id())]+F.width()/2,D=C[E.get(F.id())]-F.height()/2,P=C[E.get(F.id())]+F.height()/2,v>A&&(v=A),x<_&&(x=_),w>D&&(w=D),T<P&&(T=P)}var z={};return z.topLeftX=v,z.topLeftY=w,z.width=x-v,z.height=T-w,z},g.calcParentsWithoutChildren=function(p,y){var C=p.collection();return y.nodes(":parent").forEach(function(E){var v=!1;E.children().forEach(function(x){x.css("display")!="none"&&(v=!0)}),v||C.merge(E)}),C},l.exports=g},816:(l,u,f)=>{var c=f(548),h=f(140).CoSELayout,g=f(140).CoSENode,p=f(140).layoutBase.PointD,y=f(140).layoutBase.DimensionD,C=f(140).layoutBase.LayoutConstants,E=f(140).layoutBase.FDLayoutConstants,v=f(140).CoSEConstants,x=function(T,A){var _=T.cy,D=T.eles,P=D.nodes(),N=D.edges(),B=void 0,G=void 0,F=void 0,z={};T.randomize&&(B=A.nodeIndexes,G=A.xCoords,F=A.yCoords);var M=function(Z){return typeof Z=="function"},R=function(Z,U){return M(Z)?Z(U):Z},k=c.calcParentsWithoutChildren(_,D),I=function W(Z,U,V,X){for(var ee=U.length,se=0;se<ee;se++){var te=U[se],oe=null;te.intersection(k).length==0&&(oe=te.children());var le=void 0,$=te.layoutDimensions({nodeDimensionsIncludeLabels:X.nodeDimensionsIncludeLabels});if(te.outerWidth()!=null&&te.outerHeight()!=null)if(X.randomize)if(!te.isParent())le=Z.add(new g(V.graphManager,new p(G[B.get(te.id())]-$.w/2,F[B.get(te.id())]-$.h/2),new y(parseFloat($.w),parseFloat($.h))));else{var ne=c.calcBoundingBox(te,G,F,B);te.intersection(k).length==0?le=Z.add(new g(V.graphManager,new p(ne.topLeftX,ne.topLeftY),new y(ne.width,ne.height))):le=Z.add(new g(V.graphManager,new p(ne.topLeftX,ne.topLeftY),new y(parseFloat($.w),parseFloat($.h))))}else le=Z.add(new g(V.graphManager,new p(te.position("x")-$.w/2,te.position("y")-$.h/2),new y(parseFloat($.w),parseFloat($.h))));else le=Z.add(new g(this.graphManager));if(le.id=te.data("id"),le.nodeRepulsion=R(X.nodeRepulsion,te),le.paddingLeft=parseInt(te.css("padding")),le.paddingTop=parseInt(te.css("padding")),le.paddingRight=parseInt(te.css("padding")),le.paddingBottom=parseInt(te.css("padding")),X.nodeDimensionsIncludeLabels&&(le.labelWidth=te.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,le.labelHeight=te.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,le.labelPosVertical=te.css("text-valign"),le.labelPosHorizontal=te.css("text-halign")),z[te.data("id")]=le,isNaN(le.rect.x)&&(le.rect.x=0),isNaN(le.rect.y)&&(le.rect.y=0),oe!=null&&oe.length>0){var ie=void 0;ie=V.getGraphManager().add(V.newGraph(),le),W(ie,oe,V,X)}}},q=function(Z,U,V){for(var X=0,ee=0,se=0;se<V.length;se++){var te=V[se],oe=z[te.data("source")],le=z[te.data("target")];if(oe&&le&&oe!==le&&oe.getEdgesBetween(le).length==0){var $=U.add(Z.newEdge(),oe,le);$.id=te.id(),$.idealLength=R(T.idealEdgeLength,te),$.edgeElasticity=R(T.edgeElasticity,te),X+=$.idealLength,ee++}}T.idealEdgeLength!=null&&(ee>0?v.DEFAULT_EDGE_LENGTH=E.DEFAULT_EDGE_LENGTH=X/ee:M(T.idealEdgeLength)?v.DEFAULT_EDGE_LENGTH=E.DEFAULT_EDGE_LENGTH=50:v.DEFAULT_EDGE_LENGTH=E.DEFAULT_EDGE_LENGTH=T.idealEdgeLength,v.MIN_REPULSION_DIST=E.MIN_REPULSION_DIST=E.DEFAULT_EDGE_LENGTH/10,v.DEFAULT_RADIAL_SEPARATION=E.DEFAULT_EDGE_LENGTH)},ae=function(Z,U){U.fixedNodeConstraint&&(Z.constraints.fixedNodeConstraint=U.fixedNodeConstraint),U.alignmentConstraint&&(Z.constraints.alignmentConstraint=U.alignmentConstraint),U.relativePlacementConstraint&&(Z.constraints.relativePlacementConstraint=U.relativePlacementConstraint)};T.nestingFactor!=null&&(v.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=E.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=T.nestingFactor),T.gravity!=null&&(v.DEFAULT_GRAVITY_STRENGTH=E.DEFAULT_GRAVITY_STRENGTH=T.gravity),T.numIter!=null&&(v.MAX_ITERATIONS=E.MAX_ITERATIONS=T.numIter),T.gravityRange!=null&&(v.DEFAULT_GRAVITY_RANGE_FACTOR=E.DEFAULT_GRAVITY_RANGE_FACTOR=T.gravityRange),T.gravityCompound!=null&&(v.DEFAULT_COMPOUND_GRAVITY_STRENGTH=E.DEFAULT_COMPOUND_GRAVITY_STRENGTH=T.gravityCompound),T.gravityRangeCompound!=null&&(v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=E.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=T.gravityRangeCompound),T.initialEnergyOnIncremental!=null&&(v.DEFAULT_COOLING_FACTOR_INCREMENTAL=E.DEFAULT_COOLING_FACTOR_INCREMENTAL=T.initialEnergyOnIncremental),T.tilingCompareBy!=null&&(v.TILING_COMPARE_BY=T.tilingCompareBy),T.quality=="proof"?C.QUALITY=2:C.QUALITY=0,v.NODE_DIMENSIONS_INCLUDE_LABELS=E.NODE_DIMENSIONS_INCLUDE_LABELS=C.NODE_DIMENSIONS_INCLUDE_LABELS=T.nodeDimensionsIncludeLabels,v.DEFAULT_INCREMENTAL=E.DEFAULT_INCREMENTAL=C.DEFAULT_INCREMENTAL=!T.randomize,v.ANIMATE=E.ANIMATE=C.ANIMATE=T.animate,v.TILE=T.tile,v.TILING_PADDING_VERTICAL=typeof T.tilingPaddingVertical=="function"?T.tilingPaddingVertical.call():T.tilingPaddingVertical,v.TILING_PADDING_HORIZONTAL=typeof T.tilingPaddingHorizontal=="function"?T.tilingPaddingHorizontal.call():T.tilingPaddingHorizontal,v.DEFAULT_INCREMENTAL=E.DEFAULT_INCREMENTAL=C.DEFAULT_INCREMENTAL=!0,v.PURE_INCREMENTAL=!T.randomize,C.DEFAULT_UNIFORM_LEAF_NODE_SIZES=T.uniformNodeDimensions,T.step=="transformed"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,v.ENFORCE_CONSTRAINTS=!1,v.APPLY_LAYOUT=!1),T.step=="enforced"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!0,v.APPLY_LAYOUT=!1),T.step=="cose"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!1,v.APPLY_LAYOUT=!0),T.step=="all"&&(T.randomize?v.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!0,v.APPLY_LAYOUT=!0),T.fixedNodeConstraint||T.alignmentConstraint||T.relativePlacementConstraint?v.TREE_REDUCTION_ON_INCREMENTAL=!1:v.TREE_REDUCTION_ON_INCREMENTAL=!0;var re=new h,K=re.newGraphManager();return I(K.addRoot(),c.getTopMostNodes(P),re,T),q(re,K,N),ae(re,T),re.runLayout(),z};l.exports={coseLayout:x}},212:(l,u,f)=>{var c=function(){function T(A,_){for(var D=0;D<_.length;D++){var P=_[D];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(A,P.key,P)}}return function(A,_,D){return _&&T(A.prototype,_),D&&T(A,D),A}}();function h(T,A){if(!(T instanceof A))throw new TypeError("Cannot call a class as a function")}var g=f(658),p=f(548),y=f(657),C=y.spectralLayout,E=f(816),v=E.coseLayout,x=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(A){return 4500},idealEdgeLength:function(A){return 50},edgeElasticity:function(A){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),w=function(){function T(A){h(this,T),this.options=g({},x,A)}return c(T,[{key:"run",value:function(){var _=this,D=this.options,P=D.cy,N=D.eles,B=[],G=[],F=void 0,z=[];D.fixedNodeConstraint&&(!Array.isArray(D.fixedNodeConstraint)||D.fixedNodeConstraint.length==0)&&(D.fixedNodeConstraint=void 0),D.alignmentConstraint&&(D.alignmentConstraint.vertical&&(!Array.isArray(D.alignmentConstraint.vertical)||D.alignmentConstraint.vertical.length==0)&&(D.alignmentConstraint.vertical=void 0),D.alignmentConstraint.horizontal&&(!Array.isArray(D.alignmentConstraint.horizontal)||D.alignmentConstraint.horizontal.length==0)&&(D.alignmentConstraint.horizontal=void 0)),D.relativePlacementConstraint&&(!Array.isArray(D.relativePlacementConstraint)||D.relativePlacementConstraint.length==0)&&(D.relativePlacementConstraint=void 0);var M=D.fixedNodeConstraint||D.alignmentConstraint||D.relativePlacementConstraint;M&&(D.tile=!1,D.packComponents=!1);var R=void 0,k=!1;if(P.layoutUtilities&&D.packComponents&&(R=P.layoutUtilities("get"),R||(R=P.layoutUtilities()),k=!0),N.nodes().length>0)if(k){var ae=p.getTopMostNodes(D.eles.nodes());if(F=p.connectComponents(P,D.eles,ae),F.forEach(function(ge){var Ee=ge.boundingBox();z.push({x:Ee.x1+Ee.w/2,y:Ee.y1+Ee.h/2})}),D.randomize&&F.forEach(function(ge){D.eles=ge,B.push(C(D))}),D.quality=="default"||D.quality=="proof"){var re=P.collection();if(D.tile){var K=new Map,W=[],Z=[],U=0,V={nodeIndexes:K,xCoords:W,yCoords:Z},X=[];if(F.forEach(function(ge,Ee){ge.edges().length==0&&(ge.nodes().forEach(function(he,de){re.merge(ge.nodes()[de]),he.isParent()||(V.nodeIndexes.set(ge.nodes()[de].id(),U++),V.xCoords.push(ge.nodes()[0].position().x),V.yCoords.push(ge.nodes()[0].position().y))}),X.push(Ee))}),re.length>1){var ee=re.boundingBox();z.push({x:ee.x1+ee.w/2,y:ee.y1+ee.h/2}),F.push(re),B.push(V);for(var se=X.length-1;se>=0;se--)F.splice(X[se],1),B.splice(X[se],1),z.splice(X[se],1)}}F.forEach(function(ge,Ee){D.eles=ge,G.push(v(D,B[Ee])),p.relocateComponent(z[Ee],G[Ee],D)})}else F.forEach(function(ge,Ee){p.relocateComponent(z[Ee],B[Ee],D)});var te=new Set;if(F.length>1){var oe=[],le=N.filter(function(ge){return ge.css("display")=="none"});F.forEach(function(ge,Ee){var he=void 0;if(D.quality=="draft"&&(he=B[Ee].nodeIndexes),ge.nodes().not(le).length>0){var de={};de.edges=[],de.nodes=[];var be=void 0;ge.nodes().not(le).forEach(function(De){if(D.quality=="draft")if(!De.isParent())be=he.get(De.id()),de.nodes.push({x:B[Ee].xCoords[be]-De.boundingbox().w/2,y:B[Ee].yCoords[be]-De.boundingbox().h/2,width:De.boundingbox().w,height:De.boundingbox().h});else{var Se=p.calcBoundingBox(De,B[Ee].xCoords,B[Ee].yCoords,he);de.nodes.push({x:Se.topLeftX,y:Se.topLeftY,width:Se.width,height:Se.height})}else G[Ee][De.id()]&&de.nodes.push({x:G[Ee][De.id()].getLeft(),y:G[Ee][De.id()].getTop(),width:G[Ee][De.id()].getWidth(),height:G[Ee][De.id()].getHeight()})}),ge.edges().forEach(function(De){var Se=De.source(),Re=De.target();if(Se.css("display")!="none"&&Re.css("display")!="none")if(D.quality=="draft"){var Ie=he.get(Se.id()),qe=he.get(Re.id()),Ze=[],$e=[];if(Se.isParent()){var tt=p.calcBoundingBox(Se,B[Ee].xCoords,B[Ee].yCoords,he);Ze.push(tt.topLeftX+tt.width/2),Ze.push(tt.topLeftY+tt.height/2)}else Ze.push(B[Ee].xCoords[Ie]),Ze.push(B[Ee].yCoords[Ie]);if(Re.isParent()){var Xe=p.calcBoundingBox(Re,B[Ee].xCoords,B[Ee].yCoords,he);$e.push(Xe.topLeftX+Xe.width/2),$e.push(Xe.topLeftY+Xe.height/2)}else $e.push(B[Ee].xCoords[qe]),$e.push(B[Ee].yCoords[qe]);de.edges.push({startX:Ze[0],startY:Ze[1],endX:$e[0],endY:$e[1]})}else G[Ee][Se.id()]&&G[Ee][Re.id()]&&de.edges.push({startX:G[Ee][Se.id()].getCenterX(),startY:G[Ee][Se.id()].getCenterY(),endX:G[Ee][Re.id()].getCenterX(),endY:G[Ee][Re.id()].getCenterY()})}),de.nodes.length>0&&(oe.push(de),te.add(Ee))}});var $=R.packComponents(oe,D.randomize).shifts;if(D.quality=="draft")B.forEach(function(ge,Ee){var he=ge.xCoords.map(function(be){return be+$[Ee].dx}),de=ge.yCoords.map(function(be){return be+$[Ee].dy});ge.xCoords=he,ge.yCoords=de});else{var ne=0;te.forEach(function(ge){Object.keys(G[ge]).forEach(function(Ee){var he=G[ge][Ee];he.setCenter(he.getCenterX()+$[ne].dx,he.getCenterY()+$[ne].dy)}),ne++})}}}else{var I=D.eles.boundingBox();if(z.push({x:I.x1+I.w/2,y:I.y1+I.h/2}),D.randomize){var q=C(D);B.push(q)}D.quality=="default"||D.quality=="proof"?(G.push(v(D,B[0])),p.relocateComponent(z[0],G[0],D)):p.relocateComponent(z[0],B[0],D)}var ie=function(Ee,he){if(D.quality=="default"||D.quality=="proof"){typeof Ee=="number"&&(Ee=he);var de=void 0,be=void 0,De=Ee.data("id");return G.forEach(function(Re){De in Re&&(de={x:Re[De].getRect().getCenterX(),y:Re[De].getRect().getCenterY()},be=Re[De])}),D.nodeDimensionsIncludeLabels&&(be.labelWidth&&(be.labelPosHorizontal=="left"?de.x+=be.labelWidth/2:be.labelPosHorizontal=="right"&&(de.x-=be.labelWidth/2)),be.labelHeight&&(be.labelPosVertical=="top"?de.y+=be.labelHeight/2:be.labelPosVertical=="bottom"&&(de.y-=be.labelHeight/2))),de==null&&(de={x:Ee.position("x"),y:Ee.position("y")}),{x:de.x,y:de.y}}else{var Se=void 0;return B.forEach(function(Re){var Ie=Re.nodeIndexes.get(Ee.id());Ie!=null&&(Se={x:Re.xCoords[Ie],y:Re.yCoords[Ie]})}),Se==null&&(Se={x:Ee.position("x"),y:Ee.position("y")}),{x:Se.x,y:Se.y}}};if(D.quality=="default"||D.quality=="proof"||D.randomize){var ue=p.calcParentsWithoutChildren(P,N),me=N.filter(function(ge){return ge.css("display")=="none"});D.eles=N.not(me),N.nodes().not(":parent").not(me).layoutPositions(_,D,ie),ue.length>0&&ue.forEach(function(ge){ge.position(ie(ge))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),T}();l.exports=w},657:(l,u,f)=>{var c=f(548),h=f(140).layoutBase.Matrix,g=f(140).layoutBase.SVD,p=function(C){var E=C.cy,v=C.eles,x=v.nodes(),w=v.nodes(":parent"),T=new Map,A=new Map,_=new Map,D=[],P=[],N=[],B=[],G=[],F=[],z=[],M=[],R=void 0,k=1e8,I=1e-9,q=C.piTol,ae=C.samplingType,re=C.nodeSeparation,K=void 0,W=function(){for(var j=0,pe=0,we=!1;pe<K;){j=Math.floor(Math.random()*R),we=!1;for(var xe=0;xe<pe;xe++)if(B[xe]==j){we=!0;break}if(!we)B[pe]=j,pe++;else continue}},Z=function(j,pe,we){for(var xe=[],Ce=0,Be=0,Te=0,ke=void 0,Oe=[],He=0,Ue=1,Ke=0;Ke<R;Ke++)Oe[Ke]=k;for(xe[Be]=j,Oe[j]=0;Be>=Ce;){Te=xe[Ce++];for(var Qe=D[Te],Ge=0;Ge<Qe.length;Ge++)ke=A.get(Qe[Ge]),Oe[ke]==k&&(Oe[ke]=Oe[Te]+1,xe[++Be]=ke);F[Te][pe]=Oe[Te]*re}if(we){for(var Ve=0;Ve<R;Ve++)F[Ve][pe]<G[Ve]&&(G[Ve]=F[Ve][pe]);for(var dt=0;dt<R;dt++)G[dt]>He&&(He=G[dt],Ue=dt)}return Ue},U=function(j){var pe=void 0;if(j){pe=Math.floor(Math.random()*R);for(var xe=0;xe<R;xe++)G[xe]=k;for(var Ce=0;Ce<K;Ce++)B[Ce]=pe,pe=Z(pe,Ce,j)}else{W();for(var we=0;we<K;we++)Z(B[we],we,j)}for(var Be=0;Be<R;Be++)for(var Te=0;Te<K;Te++)F[Be][Te]*=F[Be][Te];for(var ke=0;ke<K;ke++)z[ke]=[];for(var Oe=0;Oe<K;Oe++)for(var He=0;He<K;He++)z[Oe][He]=F[B[He]][Oe]},V=function(){for(var j=g.svd(z),pe=j.S,we=j.U,xe=j.V,Ce=pe[0]*pe[0]*pe[0],Be=[],Te=0;Te<K;Te++){Be[Te]=[];for(var ke=0;ke<K;ke++)Be[Te][ke]=0,Te==ke&&(Be[Te][ke]=pe[Te]/(pe[Te]*pe[Te]+Ce/(pe[Te]*pe[Te])))}M=h.multMat(h.multMat(xe,Be),h.transpose(we))},X=function(){for(var j=void 0,pe=void 0,we=[],xe=[],Ce=[],Be=[],Te=0;Te<R;Te++)we[Te]=Math.random(),xe[Te]=Math.random();we=h.normalize(we),xe=h.normalize(xe);for(var ke=I,Oe=I,He=void 0;;){for(var Ue=0;Ue<R;Ue++)Ce[Ue]=we[Ue];if(we=h.multGamma(h.multL(h.multGamma(Ce),F,M)),j=h.dotProduct(Ce,we),we=h.normalize(we),ke=h.dotProduct(Ce,we),He=Math.abs(ke/Oe),He<=1+q&&He>=1)break;Oe=ke}for(var Ke=0;Ke<R;Ke++)Ce[Ke]=we[Ke];for(Oe=I;;){for(var Qe=0;Qe<R;Qe++)Be[Qe]=xe[Qe];if(Be=h.minusOp(Be,h.multCons(Ce,h.dotProduct(Ce,Be))),xe=h.multGamma(h.multL(h.multGamma(Be),F,M)),pe=h.dotProduct(Be,xe),xe=h.normalize(xe),ke=h.dotProduct(Be,xe),He=Math.abs(ke/Oe),He<=1+q&&He>=1)break;Oe=ke}for(var Ge=0;Ge<R;Ge++)Be[Ge]=xe[Ge];P=h.multCons(Ce,Math.sqrt(Math.abs(j))),N=h.multCons(Be,Math.sqrt(Math.abs(pe)))};c.connectComponents(E,v,c.getTopMostNodes(x),T),w.forEach(function(ve){c.connectComponents(E,v,c.getTopMostNodes(ve.descendants().intersection(v)),T)});for(var ee=0,se=0;se<x.length;se++)x[se].isParent()||A.set(x[se].id(),ee++);var te=!0,oe=!1,le=void 0;try{for(var $=T.keys()[Symbol.iterator](),ne;!(te=(ne=$.next()).done);te=!0){var ie=ne.value;A.set(ie,ee++)}}catch(ve){oe=!0,le=ve}finally{try{!te&&$.return&&$.return()}finally{if(oe)throw le}}for(var ue=0;ue<A.size;ue++)D[ue]=[];w.forEach(function(ve){for(var j=ve.children().intersection(v);j.nodes(":childless").length==0;)j=j.nodes()[0].children().intersection(v);var pe=0,we=j.nodes(":childless")[0].connectedEdges().length;j.nodes(":childless").forEach(function(xe,Ce){xe.connectedEdges().length<we&&(we=xe.connectedEdges().length,pe=Ce)}),_.set(ve.id(),j.nodes(":childless")[pe].id())}),x.forEach(function(ve){var j=void 0;ve.isParent()?j=A.get(_.get(ve.id())):j=A.get(ve.id()),ve.neighborhood().nodes().forEach(function(pe){v.intersection(ve.edgesWith(pe)).length>0&&(pe.isParent()?D[j].push(_.get(pe.id())):D[j].push(pe.id()))})});var me=function(j){var pe=A.get(j),we=void 0;T.get(j).forEach(function(xe){E.getElementById(xe).isParent()?we=_.get(xe):we=xe,D[pe].push(we),D[A.get(we)].push(j)})},ge=!0,Ee=!1,he=void 0;try{for(var de=T.keys()[Symbol.iterator](),be;!(ge=(be=de.next()).done);ge=!0){var De=be.value;me(De)}}catch(ve){Ee=!0,he=ve}finally{try{!ge&&de.return&&de.return()}finally{if(Ee)throw he}}R=A.size;var Se=void 0;if(R>2){K=R<C.sampleSize?R:C.sampleSize;for(var Re=0;Re<R;Re++)F[Re]=[];for(var Ie=0;Ie<K;Ie++)M[Ie]=[];return C.quality=="draft"||C.step=="all"?(U(ae),V(),X(),Se={nodeIndexes:A,xCoords:P,yCoords:N}):(A.forEach(function(ve,j){P.push(E.getElementById(j).position("x")),N.push(E.getElementById(j).position("y"))}),Se={nodeIndexes:A,xCoords:P,yCoords:N}),Se}else{var qe=A.keys(),Ze=E.getElementById(qe.next().value),$e=Ze.position(),tt=Ze.outerWidth();if(P.push($e.x),N.push($e.y),R==2){var Xe=E.getElementById(qe.next().value),We=Xe.outerWidth();P.push($e.x+tt/2+We/2+C.idealEdgeLength),N.push($e.y)}return Se={nodeIndexes:A,xCoords:P,yCoords:N},Se}};l.exports={spectralLayout:p}},579:(l,u,f)=>{var c=f(212),h=function(p){p&&p("layout","fcose",c)};typeof cytoscape<"u"&&h(cytoscape),l.exports=h},140:l=>{l.exports=r}},a={};function i(l){var u=a[l];if(u!==void 0)return u.exports;var f=a[l]={exports:{}};return n[l](f,f.exports,i),f.exports}var o=i(579);return o})()})}(Nf)),Nf.exports}var L$=A$();const D$=To(L$);var pb={exports:{}},QM;function _$(){return QM||(QM=1,function(t,e){(function(n,a){t.exports=a()})(self,function(){return(()=>{var r={658:o=>{o.exports=Object.assign!=null?Object.assign.bind(Object):function(l){for(var u=arguments.length,f=new Array(u>1?u-1:0),c=1;c<u;c++)f[c-1]=arguments[c];return f.filter(function(h){return h!=null}).forEach(function(h){Object.keys(h).forEach(function(g){return l[g]=h[g]})}),l}},738:o=>{o.exports={grabbedNode:function(u){return!0},dropTarget:function(u,f){return!0},dropSibling:function(u,f){return!0},newParentNode:function(u,f){return{}},boundingBoxOptions:{includeOverlays:!1,includeLabels:!0},overThreshold:10,outThreshold:10}},904:(o,l,u)=>{var f=u(658),c=u(738),h=u(43),g=u(444),p=function(E,v){this.cy=E,this.options=f({},c,v),this.listeners=[],this.enabled=!0,this.addListeners()},y=function(){this.removeListeners()};[h,g,{destroy:y}].forEach(function(C){f(p.prototype,C)}),o.exports=function(C){var E=this;return new p(E,C)}},444:(o,l,u)=>{var f=u(235),c=f.isParent,h=f.isChild,g=f.isOnlyChild,p=f.getBounds,y=f.getBoundsTuple,C=f.boundsOverlap,E=f.expandBounds,v=f.getBoundsCopy,x=f.setParent,w=f.removeParent,T=function(P,N,B){this.listeners.push({event:P,selector:N,callback:B}),N==null?this.cy.on(P,B):this.cy.on(P,N,B)},A=function(){var P=this,N=this.options,B=this.cy,G=function(K){return K.selected()&&B.elements("node:selected").length>1},F=function(K){return!c(K)&&!G(K)&&N.grabbedNode(K)},z=function(K){return!h(K)&&!K.same(P.grabbedNode)&&N.dropTarget(K,P.grabbedNode)},M=function(K){return h(K)&&!K.same(P.grabbedNode)&&N.dropSibling(K,P.grabbedNode)},R=function(K){return h(K)},k=function(K){return y(K,N.boundingBoxOptions)},I=function(K){return(z(K)||M(K))&&!K.same(P.dropTarget)},q=function(){return P.boundsTuples=B.nodes(I).map(k)},ae=function(){P.grabbedNode.removeClass("cdnd-grabbed-node"),P.dropTarget.removeClass("cdnd-drop-target"),P.dropSibling.removeClass("cdnd-drop-sibling"),P.grabbedNode=B.collection(),P.dropTarget=B.collection(),P.dropSibling=B.collection(),P.dropTargetBounds=null,P.boundsTuples=[],P.inGesture=!1};this.addListener("grab","node",function(re){var K=re.target;!P.enabled||!F(K)||(P.inGesture=!0,P.grabbedNode=K,P.dropTarget=B.collection(),P.dropSibling=B.collection(),R(K)&&(P.dropTarget=K.parent(),P.dropTargetBounds=v(P.dropTarget,N.boundingBoxOptions)),q(),P.grabbedNode.addClass("cdnd-grabbed-node"),P.dropTarget.addClass("cdnd-drop-target"),K.emit("cdndgrab"))}),this.addListener("add","node",function(re){if(!(!P.inGesture||!P.enabled)){var K=re.target;I(K)&&P.boundsTuples.push(y(K,N.boundingBoxOptions))}}),this.addListener("remove","node",function(re){if(!(!P.inGesture||!P.enabled)){var K=re.target,W=K.same(P.dropTarget),Z=K.same(P.dropSibling),U=K.same(P.grabbedNode);(W||Z||U)&&(U?ae():(P.dropTarget=B.collection(),P.dropSibling=B.collection(),q()))}}),this.addListener("drag","node",function(){if(!(!P.inGesture||!P.enabled))if(P.dropTarget.nonempty()){var re=E(p(P.grabbedNode,N.boundingBoxOptions),N.outThreshold),K=P.dropTarget,W=P.dropSibling,Z=!C(P.dropTargetBounds,re),U=g(P.grabbedNode);if(Z){w(P.grabbedNode),w(P.dropSibling),P.dropTarget.removeClass("cdnd-drop-target"),P.dropSibling.removeClass("cdnd-drop-sibling");var V=P.dropTarget&&P.dropTarget.hasClass("cdnd-new-parent");(P.dropSibling.nonempty()||U)&&V&&P.dropTarget.remove(),P.dropTarget=B.collection(),P.dropSibling=B.collection(),P.dropTargetBounds=null,V&&q(),P.grabbedNode.emit("cdndout",[K,W])}}else{var X=E(p(P.grabbedNode,N.boundingBoxOptions),N.overThreshold),ee=function(ne){return!ne.node.removed()&&C(X,ne.bb)},se=P.boundsTuples.filter(ee).map(function($){return $.node});if(se.length>0){var te=se.filter(c),oe,le;te.length>0?(le=B.collection(),oe=te[0]):(le=se[0],oe=B.add(N.newParentNode(P.grabbedNode,le))),oe.addClass("cdnd-drop-target"),oe!==le&&oe.addClass("cdnd-new-parent"),le.addClass("cdnd-drop-sibling"),x(le,oe),P.dropTargetBounds=v(oe,N.boundingBoxOptions),x(P.grabbedNode,oe),P.dropTarget=oe,P.dropSibling=le,P.grabbedNode.emit("cdndover",[oe,le])}}}),this.addListener("free","node",function(){if(!(!P.inGesture||!P.enabled)){var re=P.grabbedNode,K=P.dropTarget,W=P.dropSibling;ae(),re.emit("cdnddrop",[K,W])}})},_=function(){var P=this.cy;this.listeners.forEach(function(N){var B=N.event,G=N.selector,F=N.callback;G==null?P.removeListener(B,F):P.removeListener(B,G,F)}),this.listeners=[]};o.exports={addListener:T,addListeners:A,removeListeners:_}},43:o=>{function l(){this.enabled=!0}function u(){this.enabled=!1}o.exports={enable:l,disable:u}},235:o=>{var l=function(w){return w.isParent()},u=function(w){return w.isChild()},f=function(w){return u(w)&&w.parent().children().length===1},c=function(w,T){return w.boundingBox(T)},h=function(w,T){return{node:w,bb:g(c(w,T))}},g=function(w){return{x1:w.x1,x2:w.x2,y1:w.y1,y2:w.y2,w:w.w,h:w.h}},p=function(w,T){return g(c(w,T))},y=function(w){return w.move({parent:null})},C=function(w,T){return w.move({parent:T.id()})},E=function(w,T){return!(w.x1>T.x2||T.x1>w.x2||w.x2<T.x1||T.x2<w.x1||w.y2<T.y1||T.y2<w.y1||w.y1>T.y2||T.y1>w.y2)},v=function(w,T){return{x1:w.x1-T,x2:w.x2+T,w:w.w+2*T,y1:w.y1-T,y2:w.y2+T,h:w.h+2*T}};o.exports={isParent:l,isChild:u,isOnlyChild:f,getBoundsTuple:h,boundsOverlap:E,getBounds:c,expandBounds:v,copyBounds:g,getBoundsCopy:p,removeParent:y,setParent:C}},579:(o,l,u)=>{var f=u(904),c=function(g){g&&g("core","compoundDragAndDrop",f)};typeof cytoscape<"u"&&c(cytoscape),o.exports=c}},n={};function a(o){var l=n[o];if(l!==void 0)return l.exports;var u=n[o]={exports:{}};return r[o](u,u.exports,a),u.exports}var i=a(579);return i})()})}(pb)),pb.exports}var M$=_$();const R$=To(M$);var gb={exports:{}},JM;function P$(){return JM||(JM=1,function(t,e){(function(r,n){t.exports=n()})(window,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=n,a.d=function(i,o,l){a.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:l})},a.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a.t=function(i,o){if(1&o&&(i=a(i)),8&o||4&o&&typeof i=="object"&&i&&i.__esModule)return i;var l=Object.create(null);if(a.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:i}),2&o&&typeof i!="string")for(var u in i)a.d(l,u,(function(f){return i[f]}).bind(null,u));return l},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=0)}([function(r,n,a){var i=a(1),o=function(l){l&&l("core","svg",i.svg)};typeof cytoscape<"u"&&o(cytoscape),r.exports=o},function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},o=a(2),l={},u={};u.number=function(f){return f!=null&&(f===void 0?"undefined":i(f))===i(1)&&!isNaN(f)},l.bufferCanvasImage=function(f,c){var h=c.renderer().usePaths;c.renderer().usePaths=function(){return!1},c.elements().forEach(function(G){G._private.rscratch.pathCacheKey=null,G._private.rscratch.pathCache=null});var g=c.renderer(),p=c.mutableElements().boundingBox(),y=g.findContainerClientCoords(),C=f.full?Math.ceil(p.w):y[2],E=f.full?Math.ceil(p.h):y[3],v=u.number(f.maxWidth)||u.number(f.maxHeight),x=g.getPixelRatio(),w=1;if(f.scale!==void 0)C*=f.scale,E*=f.scale,w=f.scale;else if(v){var T=1/0,A=1/0;u.number(f.maxWidth)&&(T=w*f.maxWidth/C),u.number(f.maxHeight)&&(A=w*f.maxHeight/E),C*=w=Math.min(T,A),E*=w}v||(C*=x,E*=x,w*=x);var _=null,D=_=new o(C,E);if(C>0&&E>0){_.clearRect(0,0,C,E),f.bg&&(_.globalCompositeOperation="destination-over",_.fillStyle=f.bg,_.fillRect(0,0,C,E)),_.globalCompositeOperation="source-over";var P=g.getCachedZSortedEles();if(f.full)_.translate(-p.x1*w,-p.y1*w),_.scale(w,w),g.drawElements(_,P),_.scale(1/w,1/w),_.translate(p.x1*w,p.y1*w);else{var N=c.pan(),B={x:N.x*w,y:N.y*w};w*=c.zoom(),_.translate(B.x,B.y),_.scale(w,w),g.drawElements(_,P),_.scale(1/w,1/w),_.translate(-B.x,-B.y)}}return c.renderer().usePaths=h,D},l.svg=function(f){return l.bufferCanvasImage(f||{},this).getSerializedSvg()},r.exports=l},function(r,n,a){(function(){var i,o,l,u,f;function c(y,C){var E,v=Object.keys(C);for(E=0;E<v.length;E++)y=y.replace(new RegExp("\\{"+v[E]+"\\}","gi"),C[v[E]]);return y}function h(y){var C,E,v;if(!y)throw new Error("cannot create a random attribute name for an undefined object");C="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",E="";do for(E="",v=0;v<12;v++)E+=C[Math.floor(Math.random()*C.length)];while(y[E]);return E}function g(y){var C={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return C[y]||C.alphabetic}f=function(y,C){var E,v,x,w={};for(y=y.split(","),C=C||10,E=0;E<y.length;E+=2)v="&"+y[E+1]+";",x=parseInt(y[E],C),w[v]="&#"+x+";";return w["\\xa0"]="&#160;",w}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),i={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(l=function(y,C){this.__root=y,this.__ctx=C}).prototype.addColorStop=function(y,C){var E,v=this.__ctx.__createElement("stop");v.setAttribute("offset",y),C.indexOf("rgba")!==-1?(E=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(C),v.setAttribute("stop-color",c("rgb({r},{g},{b})",{r:E[1],g:E[2],b:E[3]})),v.setAttribute("stop-opacity",E[4])):v.setAttribute("stop-color",C),this.__root.appendChild(v)},u=function(y,C){this.__root=y,this.__ctx=C},(o=function(y){var C,E={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((C=E).width=arguments[0],C.height=arguments[1]):C=y||E,!(this instanceof o))return new o(C);this.width=C.width||E.width,this.height=C.height||E.height,this.enableMirroring=C.enableMirroring!==void 0?C.enableMirroring:E.enableMirroring,this.canvas=this,this.__document=C.document||document,C.ctx?this.__ctx=C.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(y,C,E){C===void 0&&(C={});var v,x,w=this.__document.createElementNS("http://www.w3.org/2000/svg",y),T=Object.keys(C);for(E&&(w.setAttribute("fill","none"),w.setAttribute("stroke","none")),v=0;v<T.length;v++)x=T[v],w.setAttribute(x,C[x]);return w},o.prototype.__setDefaultStyles=function(){var y,C,E=Object.keys(i);for(y=0;y<E.length;y++)this[C=E[y]]=i[C].canvas},o.prototype.__applyStyleState=function(y){if(y){var C,E,v=Object.keys(y);for(C=0;C<v.length;C++)this[E=v[C]]=y[E]}},o.prototype.__getStyleState=function(){var y,C,E={},v=Object.keys(i);for(y=0;y<v.length;y++)E[C=v[y]]=this[C];return E},o.prototype.__applyStyleToCurrentElement=function(y){var C=this.__currentElement;this.__currentElementsToStyle;var E,v,x,w,T,A=Object.keys(i);for(E=0;E<A.length;E++)if(v=i[A[E]],x=this[A[E]],v.apply){if(x instanceof u){if(x.__ctx)for(;x.__ctx.__defs.childNodes.length;)w=x.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[w]=w,this.__defs.appendChild(x.__ctx.__defs.childNodes[0]);C.setAttribute(v.apply,c("url(#{id})",{id:x.__root.getAttribute("id")}))}else if(x instanceof l)C.setAttribute(v.apply,c("url(#{id})",{id:x.__root.getAttribute("id")}));else if(v.apply.indexOf(y)!==-1&&v.svg!==x)if(v.svgAttr!=="stroke"&&v.svgAttr!=="fill"||x.indexOf("rgba")===-1){var _=v.svgAttr;if(A[E]==="globalAlpha"&&(_=y+"-"+v.svgAttr,C.getAttribute(_)))continue;C.setAttribute(_,x)}else{T=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(x),C.setAttribute(v.svgAttr,c("rgb({r},{g},{b})",{r:T[1],g:T[2],b:T[3]}));var D=T[4],P=this.globalAlpha;P!=null&&(D*=P),C.setAttribute(v.svgAttr+"-opacity",D)}}},o.prototype.__closestGroupOrSvg=function(y){return(y=y||this.__currentElement).nodeName==="g"||y.nodeName==="svg"?y:this.__closestGroupOrSvg(y.parentNode)},o.prototype.getSerializedSvg=function(y){var C,E,v,x,w,T=new XMLSerializer().serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(T)&&(T=T.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),y)for(C=Object.keys(f),E=0;E<C.length;E++)v=C[E],x=f[v],(w=new RegExp(v,"gi")).test(T)&&(T=T.replace(w,x));return T},o.prototype.getSvg=function(){return this.__root},o.prototype.save=function(){var y=this.__createElement("g"),C=this.__closestGroupOrSvg();this.__groupStack.push(C),C.appendChild(y),this.__currentElement=y,this.__stack.push(this.__getStyleState())},o.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var y=this.__stack.pop();this.__applyStyleState(y)},o.prototype.__addTransform=function(y){var C=this.__closestGroupOrSvg();if(C.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:C,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var E=this.__createElement("g");C.appendChild(E),this.__currentElement=E}var v=this.__currentElement.getAttribute("transform");v?v+=" ":v="",v+=y,this.__currentElement.setAttribute("transform",v)},o.prototype.scale=function(y,C){C===void 0&&(C=y),this.__addTransform(c("scale({x},{y})",{x:y,y:C}))},o.prototype.rotate=function(y){var C=180*y/Math.PI;this.__addTransform(c("rotate({angle},{cx},{cy})",{angle:C,cx:0,cy:0}))},o.prototype.translate=function(y,C){this.__addTransform(c("translate({x},{y})",{x:y,y:C}))},o.prototype.transform=function(y,C,E,v,x,w){this.__addTransform(c("matrix({a},{b},{c},{d},{e},{f})",{a:y,b:C,c:E,d:v,e:x,f:w}))},o.prototype.beginPath=function(){var y;this.__currentDefaultPath="",this.__currentPosition={},y=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(y),this.__currentElement=y},o.prototype.__applyCurrentDefaultPath=function(){var y=this.__currentElement;y.nodeName==="path"?y.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",y.nodeName)},o.prototype.__addPathCommand=function(y){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=y},o.prototype.moveTo=function(y,C){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:y,y:C},this.__addPathCommand(c("M {x} {y}",{x:y,y:C}))},o.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},o.prototype.lineTo=function(y,C){this.__currentPosition={x:y,y:C},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(c("L {x} {y}",{x:y,y:C})):this.__addPathCommand(c("M {x} {y}",{x:y,y:C}))},o.prototype.bezierCurveTo=function(y,C,E,v,x,w){this.__currentPosition={x,y:w},this.__addPathCommand(c("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:y,cp1y:C,cp2x:E,cp2y:v,x,y:w}))},o.prototype.quadraticCurveTo=function(y,C,E,v){this.__currentPosition={x:E,y:v},this.__addPathCommand(c("Q {cpx} {cpy} {x} {y}",{cpx:y,cpy:C,x:E,y:v}))};var p=function(y){var C=Math.sqrt(y[0]*y[0]+y[1]*y[1]);return[y[0]/C,y[1]/C]};o.prototype.arcTo=function(y,C,E,v,x){var w=this.__currentPosition&&this.__currentPosition.x,T=this.__currentPosition&&this.__currentPosition.y;if(w!==void 0&&T!==void 0){if(x<0)throw new Error("IndexSizeError: The radius provided ("+x+") is negative.");if(w===y&&T===C||y===E&&C===v||x===0)this.lineTo(y,C);else{var A=p([w-y,T-C]),_=p([E-y,v-C]);if(A[0]*_[1]!=A[1]*_[0]){var D=A[0]*_[0]+A[1]*_[1],P=Math.acos(Math.abs(D)),N=p([A[0]+_[0],A[1]+_[1]]),B=x/Math.sin(P/2),G=y+B*N[0],F=C+B*N[1],z=[-A[1],A[0]],M=[_[1],-_[0]],R=function(q){var ae=q[0];return q[1]>=0?Math.acos(ae):-Math.acos(ae)},k=R(z),I=R(M);this.lineTo(G+z[0]*x,F+z[1]*x),this.arc(G,F,x,k,I)}else this.lineTo(y,C)}}},o.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},o.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},o.prototype.rect=function(y,C,E,v){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(y,C),this.lineTo(y+E,C),this.lineTo(y+E,C+v),this.lineTo(y,C+v),this.lineTo(y,C),this.closePath()},o.prototype.fillRect=function(y,C,E,v){var x;x=this.__createElement("rect",{x:y,y:C,width:E,height:v},!0),this.__closestGroupOrSvg().appendChild(x),this.__currentElement=x,this.__applyStyleToCurrentElement("fill")},o.prototype.strokeRect=function(y,C,E,v){var x;x=this.__createElement("rect",{x:y,y:C,width:E,height:v},!0),this.__closestGroupOrSvg().appendChild(x),this.__currentElement=x,this.__applyStyleToCurrentElement("stroke")},o.prototype.__clearCanvas=function(){for(var y=this.__closestGroupOrSvg().getAttribute("transform"),C=this.__root.childNodes[1],E=C.childNodes,v=E.length-1;v>=0;v--)E[v]&&C.removeChild(E[v]);this.__currentElement=C,this.__groupStack=[],y&&this.__addTransform(y)},o.prototype.clearRect=function(y,C,E,v){if(y!==0||C!==0||E!==this.width||v!==this.height){var x,w=this.__closestGroupOrSvg();x=this.__createElement("rect",{x:y,y:C,width:E,height:v,fill:"#FFFFFF"},!0),w.appendChild(x)}else this.__clearCanvas()},o.prototype.createLinearGradient=function(y,C,E,v){var x=this.__createElement("linearGradient",{id:h(this.__ids),x1:y+"px",x2:E+"px",y1:C+"px",y2:v+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(x),new l(x,this)},o.prototype.createRadialGradient=function(y,C,E,v,x,w){var T=this.__createElement("radialGradient",{id:h(this.__ids),cx:v+"px",cy:x+"px",r:w+"px",fx:y+"px",fy:C+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(T),new l(T,this)},o.prototype.__parseFont=function(){var y=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),C={style:y[1]||"normal",size:y[4]||"10px",family:y[6]||"sans-serif",weight:y[3]||"normal",decoration:y[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(C.decoration="underline"),this.__fontHref&&(C.href=this.__fontHref),C},o.prototype.__wrapTextLink=function(y,C){if(y.href){var E=this.__createElement("a");return E.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y.href),E.appendChild(C),E}return C},o.prototype.__applyText=function(y,C,E,v){var x,w,T=this.__parseFont(),A=this.__closestGroupOrSvg(),_=this.__createElement("text",{"font-family":T.family,"font-size":T.size,"font-style":T.style,"font-weight":T.weight,"text-decoration":T.decoration,x:C,y:E,"text-anchor":(x=this.textAlign,w={left:"start",right:"end",center:"middle",start:"start",end:"end"},w[x]||w.start),"dominant-baseline":g(this.textBaseline)},!0);_.appendChild(this.__document.createTextNode(y)),this.__currentElement=_,this.__applyStyleToCurrentElement(v),A.appendChild(this.__wrapTextLink(T,_))},o.prototype.fillText=function(y,C,E){this.__applyText(y,C,E,"fill")},o.prototype.strokeText=function(y,C,E){this.__applyText(y,C,E,"stroke")},o.prototype.measureText=function(y){return this.__ctx.font=this.font,this.__ctx.measureText(y)},o.prototype.arc=function(y,C,E,v,x,w){if(v!==x){(v%=2*Math.PI)===(x%=2*Math.PI)&&(x=(x+2*Math.PI-.001*(w?-1:1))%(2*Math.PI));var T=y+E*Math.cos(x),A=C+E*Math.sin(x),_=y+E*Math.cos(v),D=C+E*Math.sin(v),P=w?0:1,N=0,B=x-v;B<0&&(B+=2*Math.PI),N=w?B>Math.PI?0:1:B>Math.PI?1:0,this.lineTo(_,D),this.__addPathCommand(c("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:E,ry:E,xAxisRotation:0,largeArcFlag:N,sweepFlag:P,endX:T,endY:A})),this.__currentPosition={x:T,y:A}}},o.prototype.clip=function(){var y=this.__closestGroupOrSvg(),C=this.__createElement("clipPath"),E=h(this.__ids),v=this.__createElement("g");this.__applyCurrentDefaultPath(),y.removeChild(this.__currentElement),C.setAttribute("id",E),C.appendChild(this.__currentElement),this.__defs.appendChild(C),y.setAttribute("clip-path",c("url(#{id})",{id:E})),y.appendChild(v),this.__currentElement=v},o.prototype.drawImage=function(){var y,C,E,v,x,w,T,A,_,D,P,N,B,G=Array.prototype.slice.call(arguments),F=G[0],z=0,M=0;if(G.length===3)y=G[1],C=G[2],E=x=F.width,v=w=F.height;else if(G.length===5)y=G[1],C=G[2],E=G[3],v=G[4],x=F.width,w=F.height;else{if(G.length!==9)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);z=G[1],M=G[2],x=G[3],w=G[4],y=G[5],C=G[6],E=G[7],v=G[8]}T=this.__closestGroupOrSvg(),this.__currentElement;var R="translate("+y+", "+C+")";if(F instanceof o){if((A=F.getSvg().cloneNode(!0)).childNodes&&A.childNodes.length>1){for(_=A.childNodes[0];_.childNodes.length;)B=_.childNodes[0].getAttribute("id"),this.__ids[B]=B,this.__defs.appendChild(_.childNodes[0]);if(D=A.childNodes[1]){var k,I=D.getAttribute("transform");k=I?I+" "+R:R,D.setAttribute("transform",k),T.appendChild(D)}}}else F.nodeName!=="CANVAS"&&F.nodeName!=="IMG"||((P=this.__createElement("image")).setAttribute("width",E),P.setAttribute("height",v),P.setAttribute("opacity",this.globalAlpha),P.setAttribute("preserveAspectRatio","none"),(N=this.__document.createElement("canvas")).width=E,N.height=v,N.getContext("2d").drawImage(F,z,M,x,w,0,0,E,v),F=N,P.setAttribute("transform",R),P.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",F.nodeName==="CANVAS"?F.toDataURL():F.getAttribute("src")),T.appendChild(P))},o.prototype.createPattern=function(y,C){var E,v=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),x=h(this.__ids);return v.setAttribute("id",x),v.setAttribute("width",y.width),v.setAttribute("height",y.height),y.nodeName==="CANVAS"||y.nodeName==="IMG"?((E=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",y.width),E.setAttribute("height",y.height),E.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y.nodeName==="CANVAS"?y.toDataURL():y.getAttribute("src")),v.appendChild(E),this.__defs.appendChild(v)):y instanceof o&&(v.appendChild(y.__root.childNodes[1]),this.__defs.appendChild(v)),new u(v,this)},o.prototype.setLineDash=function(y){y&&y.length>0?this.lineDash=y.join(","):this.lineDash=null},o.prototype.drawFocusRing=function(){},o.prototype.createImageData=function(){},o.prototype.getImageData=function(){},o.prototype.putImageData=function(){},o.prototype.globalCompositeOperation=function(){},o.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=o),typeof r.exports=="object"&&(r.exports=o)})()}])})}(gb)),gb.exports}var N$=P$();const k$=To(N$);qn.use(ZW);qn.use(tV);qn.use(w$);qn.use(D$);qn.use(R$);qn.use(k$);let ma=null;function rw(){return{initCytoscape:(n,a)=>(ma&&(ma.destroy(),ma=null),ma=qn({container:n,elements:a,style:[{selector:"node",style:{"background-color":"#e0e0e0","border-color":"#555","border-width":2,label:"data(name)","text-valign":"center","text-halign":"center",padding:"10px","font-size":"10px","text-wrap":"wrap","text-max-width":"80px",height:"60px",width:"60px","line-height":1.2,"border-style":"solid","z-index":10}},{selector:'node[nodeType="plate"]',style:{"background-color":"#f0f8ff","border-color":"#4682b4","border-style":"dashed",shape:"round-rectangle","corner-radius":"10px"}},{selector:":parent",style:{"text-valign":"top","text-halign":"center",padding:"15px","background-opacity":.2,"z-index":5}},{selector:'node[nodeType="stochastic"]',style:{"background-color":"#ffe0e0","border-color":"#dc3545",shape:"ellipse"}},{selector:'node[nodeType="deterministic"]',style:{"background-color":"#e0ffe0","border-color":"#28a745",shape:"round-rectangle"}},{selector:'node[nodeType="constant"]',style:{"background-color":"#e9ecef","border-color":"#6c757d",shape:"rectangle"}},{selector:'node[nodeType="observed"]',style:{"background-color":"#e0f0ff","border-color":"#007bff","border-style":"dashed",shape:"ellipse"}},{selector:"edge",style:{width:3,"line-color":"#a0a0a0","target-arrow-color":"#a0a0a0","target-arrow-shape":"triangle","curve-style":"bezier","z-index":1}},{selector:"edge[name]",style:{label:"data(name)","font-size":"8px","text-rotation":"autorotate","text-background-opacity":1,"text-background-color":"#ffffff","text-background-padding":"3px","text-border-width":1,"text-border-color":"#ccc"}},{selector:'edge[relationshipType="stochastic"]',style:{"line-color":"#dc3545","target-arrow-color":"#dc3545","line-style":"dashed"}},{selector:'edge[relationshipType="deterministic"]',style:{"line-color":"#28a745","target-arrow-color":"#28a745","line-style":"solid"}},{selector:".cy-selected",style:{"border-width":3,"border-color":"#007acc","overlay-color":"#007acc","overlay-opacity":.2}},{selector:".cdnd-grabbed-node",style:{"background-color":"#f1c40f",opacity:.7}},{selector:".cdnd-drop-target",style:{"border-color":"#f1c40f","border-style":"solid"}}],layout:{name:"preset"},minZoom:.1,maxZoom:2,boxSelectionEnabled:!0,wheelSensitivity:.2,autounselectify:!1}),ma.compoundDragAndDrop({grabbedNode:o=>o.data("nodeType")!=="plate",dropTarget:o=>o.data("nodeType")==="plate",dropSibling:()=>!1,outThreshold:50}),ma.gridGuide({drawGrid:!1,snapToGridOnRelease:!0,snapToGridDuringDrag:!0,gridSpacing:20}),ma.contextMenus({menuItems:[{id:"remove",content:"Remove",selector:"node, edge",onClickFunction:o=>{var u;const l=o.target;(u=l.cy().container())==null||u.dispatchEvent(new CustomEvent("cxt-remove",{detail:{elementId:l.id()}}))}}]}),ma),destroyCytoscape:n=>{n&&(n.destroy(),ma=null)},getCyInstance:()=>ma}}function O$(t){const e=Ct(!1),r=Ct(20),n=sr(()=>`${r.value}px`),a=()=>{const u=t();if(u){const f=u.container();f&&(e.value&&r.value>0?(f.classList.add("grid-background"),f.style.setProperty("--grid-size",n.value)):(f.classList.remove("grid-background"),f.style.removeProperty("--grid-size")))}},i=()=>{e.value=!0,a()},o=()=>{e.value=!1,a()},l=u=>{r.value=u,e.value&&a()};return wr([e,r],a),{isGridEnabledRef:e,gridSizeRef:r,cssGridSize:n,enableGridSnapping:i,disableGridSnapping:o,setGridSize:l}}const I$=qr({__name:"GraphCanvas",props:{elements:{},isGridEnabled:{type:Boolean},gridSize:{},currentMode:{}},emits:["canvas-tap","node-moved","node-dropped","plate-emptied","element-remove"],setup(t,{emit:e}){const r=t,n=e,a=Ct(null);let i=null;const{initCytoscape:o,destroyCytoscape:l,getCyInstance:u}=rw(),{enableGridSnapping:f,disableGridSnapping:c,setGridSize:h}=O$(u),g=["stochastic","deterministic","constant","observed","plate"],p=y=>y.map(C=>{if(C.type==="node")return{group:"nodes",data:{...C},position:C.position};{const E=C,v=y.find(w=>w.id===E.target&&w.type==="node"),x=(v==null?void 0:v.nodeType)==="stochastic"||(v==null?void 0:v.nodeType)==="observed"?"stochastic":"deterministic";return{group:"edges",data:{...E,relationshipType:x}}}});return Sa(()=>{var y;a.value&&(i=o(a.value,[]),h(r.gridSize),r.isGridEnabled?f():c(),(y=i.container())==null||y.addEventListener("cxt-remove",C=>{const E=C;E.detail.elementId&&n("element-remove",E.detail.elementId)}),i.on("tap",C=>{n("canvas-tap",C)}),i.on("cdnddrop","node",(C,E)=>{const v=C.target,x=E?E.id():void 0,w=r.elements.find(T=>T.id===v.id()&&T.type==="node");if(w&&w.parent&&w.parent!==x){const T=w.parent;r.elements.find(_=>_.id===T&&_.type==="node"&&_.nodeType==="plate")&&r.elements.filter(D=>D.type==="node"&&D.parent===T).length===1&&n("plate-emptied",T)}n("node-moved",{nodeId:v.id(),position:v.position(),parentId:x})}),i.on("tap","node, edge",C=>{i==null||i.elements().removeClass("cy-selected"),C.target.addClass("cy-selected")}),i.on("tap",C=>{C.target===i&&(i==null||i.elements().removeClass("cy-selected"))}),a.value.addEventListener("dragover",C=>{C.preventDefault(),C.dataTransfer&&(C.dataTransfer.dropEffect="copy")}),a.value.addEventListener("drop",C=>{var E;if(C.preventDefault(),C.dataTransfer){const v=C.dataTransfer.getData("text/plain");if(g.includes(v)){const x=(E=a.value)==null?void 0:E.getBoundingClientRect();if(x&&i){const w=C.clientX,T=C.clientY,A={x:w-x.left,y:T-x.top},_=i.panzoom().renderedPositionToModelPosition(A);n("node-dropped",{nodeType:v,position:_})}}}}))}),Aa(()=>{i&&l(i)}),wr(()=>r.isGridEnabled,y=>{y?f():c()}),wr(()=>r.gridSize,y=>{h(y),r.isGridEnabled&&f()}),wr(()=>r.elements,y=>{if(!i)return;const C=p(y);i.batch(()=>{const E=new Set(y.map(v=>v.id));i.elements().forEach(v=>{E.has(v.id())||v.remove()}),C.forEach(v=>{if(!v.data.id)return;const x=i.getElementById(v.data.id);if(x.empty())i.add(v);else if(x.data(v.data),v.group==="nodes"){const w=v,T=x.position();(w.position.x!==T.x||w.position.y!==T.y)&&x.position(w.position);const A=x.parent(),_=A.length>0?A.first().id():void 0;w.data.parent!==_&&x.move({parent:w.data.parent??null})}})})},{deep:!0,immediate:!0}),(y,C)=>(ft(),gt("div",{ref_key:"cyContainer",ref:a,class:cr(["cytoscape-container",{"grid-background":y.isGridEnabled&&y.gridSize>0,"mode-add-node":y.currentMode==="add-node","mode-add-edge":y.currentMode==="add-edge","mode-select":y.currentMode==="select"}]),style:xi({"--grid-size":`${y.gridSize}px`})},null,6))}}),an=(t,e)=>{const r=t.__vccOpts||t;for(const[n,a]of e)r[n]=a;return r},F$=an(I$,[["__scopeId","data-v-ca718395"]]),B$=["disabled"],q$=qr({__name:"BaseButton",props:{type:{},size:{},disabled:{type:Boolean}},setup(t){const e=t,r=sr(()=>({"base-button":!0,[`button-${e.type||"default"}`]:!0,[`button-${e.size||"medium"}`]:!0,"button-disabled":e.disabled}));return(n,a)=>(ft(),gt("button",{class:cr(r.value),disabled:n.disabled},[ps(n.$slots,"default",{},void 0,!0)],10,B$))}}),rr=an(q$,[["__scopeId","data-v-320dead9"]]),eR=[{value:"dnorm",label:"Normal (dnorm)"},{value:"dbeta",label:"Beta (dbeta)"},{value:"dgamma",label:"Gamma (dgamma)"},{value:"dbin",label:"Binomial (dbin)"},{value:"dpois",label:"Poisson (dpois)"},{value:"dt",label:"Student-t (dt)"},{value:"dchisqr",label:"Chi-squared (dchisqr)"},{value:"dweib",label:"Weibull (dweib)"},{value:"dexp",label:"Exponential (dexp)"},{value:"dloglik",label:"Log-Likelihood (dloglik)"}],id=[{nodeType:"stochastic",label:"Stochastic",icon:"~",description:"Random variable with a distribution",styleClass:"stochastic",properties:[{key:"name",label:"Name",type:"text",defaultValue:"StochasticNode"},{key:"distribution",label:"Distribution (~)",type:"select",defaultValue:"dnorm",options:eR},{key:"observed",label:"Observed",type:"checkbox",defaultValue:!1},{key:"initialValue",label:"Initial Value",type:"text",placeholder:"e.g., 0.5 or list(value=0.5)",defaultValue:""},{key:"indices",label:"Indices",type:"text",placeholder:"e.g., i,j or 1:N",defaultValue:"",helpText:"Use comma-separated for multiple indices, e.g., 'i,j' or '1:N, 1:M'"}]},{nodeType:"deterministic",label:"Deterministic",icon:"<-",description:"Logical function of parents",styleClass:"deterministic",properties:[{key:"name",label:"Name",type:"text",defaultValue:"DeterministicNode"},{key:"equation",label:"Equation (<--)",type:"text",placeholder:"e.g., a + b * x",defaultValue:""},{key:"indices",label:"Indices",type:"text",placeholder:"e.g., i,j",defaultValue:""}]},{nodeType:"constant",label:"Constant",icon:"C",description:"A fixed value or parameter",styleClass:"constant",properties:[{key:"name",label:"Name",type:"text",defaultValue:"ConstantNode"},{key:"initialValue",label:"Value",type:"text",placeholder:"e.g., 5 or 3.14",defaultValue:"0"},{key:"indices",label:"Indices",type:"text",placeholder:"e.g., i,j",defaultValue:""}]},{nodeType:"observed",label:"Observed",icon:"O",description:"A data node with a fixed value",styleClass:"observed",properties:[{key:"name",label:"Name",type:"text",defaultValue:"ObservedNode"},{key:"distribution",label:"Distribution (~)",type:"select",defaultValue:"dnorm",options:eR},{key:"observed",label:"Observed",type:"checkbox",defaultValue:!0},{key:"indices",label:"Indices",type:"text",placeholder:"e.g., i,j or 1:N",defaultValue:""}]},{nodeType:"plate",label:"Plate",icon:"[]",description:"Represents a loop structure",styleClass:"plate",properties:[{key:"name",label:"Name",type:"text",defaultValue:"Plate"},{key:"loopVariable",label:"Loop Variable",type:"text",placeholder:"e.g., i",defaultValue:"i"},{key:"loopRange",label:"Loop Range",type:"text",placeholder:"e.g., 1:N",defaultValue:"1:N",helpText:"Define the iteration for this plate, e.g., 'i' in '1:N'"}]}],EO=t=>id.find(e=>e.nodeType===t),z$=t=>{const e=EO(t);if(!e)return{};const r={};return e.properties.forEach(n=>{r[n.key]=n.defaultValue}),r},G$={class:"canvas-toolbar"},H$={key:0,class:"node-type-selector"},U$=["value"],W$=["value"],V$={key:1,class:"connecting-message"},$$=qr({__name:"CanvasToolbar",props:{currentMode:{},currentNodeType:{},isConnecting:{type:Boolean},sourceNodeName:{}},emits:["update:currentMode","update:currentNodeType"],setup(t,{emit:e}){const r=e,n=sr(()=>id.map(o=>({label:o.label,value:o.nodeType}))),a=o=>{r("update:currentMode",o)},i=o=>{const l=o.target;r("update:currentNodeType",l.value)};return(o,l)=>(ft(),gt("div",G$,[ot(rr,{class:cr({active:o.currentMode==="select"}),onClick:l[0]||(l[0]=u=>a("select"))},{default:ht(()=>l[3]||(l[3]=[At(" Select ")])),_:1,__:[3]},8,["class"]),ot(rr,{class:cr({active:o.currentMode==="add-node"}),onClick:l[1]||(l[1]=u=>a("add-node"))},{default:ht(()=>l[4]||(l[4]=[At(" Add Node ")])),_:1,__:[4]},8,["class"]),ot(rr,{class:cr({active:o.currentMode==="add-edge"}),onClick:l[2]||(l[2]=u=>a("add-edge"))},{default:ht(()=>l[5]||(l[5]=[At(" Add Edge ")])),_:1,__:[5]},8,["class"]),o.currentMode==="add-node"?(ft(),gt("div",H$,[l[6]||(l[6]=_e("label",{for:"node-type"},"Node Type:",-1)),_e("select",{id:"node-type",value:o.currentNodeType,onChange:i},[(ft(!0),gt(or,null,Xa(n.value,u=>(ft(),gt("option",{key:u.value,value:u.value},Ar(u.label),9,W$))),128))],40,U$)])):Wr("",!0),o.isConnecting?(ft(),gt("span",V$,[l[7]||(l[7]=At(" Connecting from: ")),_e("strong",null,Ar(o.sourceNodeName),1),l[8]||(l[8]=At(" (Click target node) "))])):Wr("",!0)]))}}),Y$=an($$,[["__scopeId","data-v-e6df3305"]]),gf=`{
  "data": {
    "N": 30,
    "T": 5,
    "x": [8.0, 15.0, 22.0, 29.0, 36.0],
    "xbar": 22
  },
  "inits": {
    "alpha": "fill(250.0, 30)",
    "beta": "fill(6.0, 30)"
  }
}`,TO=Ec("data",()=>{const t=_o(),e=Ct(new Map),r=sr({get:()=>{const o=t.currentGraphId;if(o&&e.value.has(o))return e.value.get(o);if(o){const l=localStorage.getItem(`doodlebugs-data-${o}`);return l?(e.value.set(o,l),l):(e.value.set(o,gf),gf)}return gf},set:o=>{const l=t.currentGraphId;l&&n(l,o)}}),n=(o,l)=>{e.value.set(o,l),localStorage.setItem(`doodlebugs-data-${o}`,l)};return{currentGraphData:r,createNewGraphData:o=>{n(o,gf)},deleteGraphData:o=>{e.value.delete(o),localStorage.removeItem(`doodlebugs-data-${o}`)}}}),_o=Ec("graph",()=>{const t=TO(),e=Ct(new Map),r=Ct(localStorage.getItem("doodlebugs-currentGraphId")||null);wr(r,c=>{c?localStorage.setItem("doodlebugs-currentGraphId",c):localStorage.removeItem("doodlebugs-currentGraphId")});const n=sr(()=>r.value&&e.value.has(r.value)?e.value.get(r.value).elements:[]),a=c=>{r.value=c,c&&!e.value.has(c)&&f(c)},i=c=>{const h={graphId:c,elements:[]};e.value.set(c,h),u(c,h),t.createNewGraphData(c)},o=(c,h)=>{if(e.value.has(c)){const g=e.value.get(c);g.elements=h,u(c,g)}},l=c=>{e.value.delete(c),localStorage.removeItem(`doodlebugs-graph-${c}`),t.deleteGraphData(c),r.value===c&&a(null)},u=(c,h)=>{localStorage.setItem(`doodlebugs-graph-${c}`,JSON.stringify(h))},f=c=>{const h=localStorage.getItem(`doodlebugs-graph-${c}`);if(h){const g=JSON.parse(h);return e.value.set(c,g),g}return null};return{graphContents:e,currentGraphId:r,currentGraphElements:n,selectGraph:a,createNewGraphContent:i,updateGraphElements:o,deleteGraphContent:l,saveGraph:u,loadGraph:f}});function nw(){const t=_o(),e=Ct(null),r=sr({get:()=>t.currentGraphElements,set:o=>{t.currentGraphId&&t.updateGraphElements(t.currentGraphId,o)}}),n=o=>{r.value=[...r.value,o],e.value=o},a=o=>{var l;r.value=r.value.map(u=>u.id===o.id?o:u),((l=e.value)==null?void 0:l.id)===o.id&&(e.value=o)},i=o=>{const l=r.value.find(h=>h.id===o);if(!l)return;const u=l.type==="node"?l.parent:void 0,f=new Set([o]);if(l.type==="node"&&l.nodeType==="plate"){const h=g=>{r.value.forEach(p=>{p.type==="node"&&p.parent===g&&(f.add(p.id),p.nodeType==="plate"&&h(p.id))})};h(o)}const c=new Set;if(f.forEach(h=>{const g=r.value.find(p=>p.id===h);(g==null?void 0:g.type)==="node"&&c.add(h)}),r.value.forEach(h=>{h.type==="edge"&&(c.has(h.source)||c.has(h.target))&&f.add(h.id)}),r.value=r.value.filter(h=>!f.has(h.id)),e.value&&f.has(e.value.id)&&(e.value=null),u){const h=r.value.find(g=>g.id===u);h&&h.type==="node"&&h.nodeType==="plate"&&(r.value.some(p=>p.type==="node"&&p.parent===u)||i(u))}};return{elements:r,selectedElement:e,addElement:n,updateElement:a,deleteElement:i}}const X$={class:"graph-editor-container"},K$=qr({__name:"GraphEditor",props:{isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},currentNodeType:{}},emits:["element-selected","update:currentMode","update:currentNodeType"],setup(t,{emit:e}){const r=t,n=e,{elements:a,addElement:i,updateElement:o,deleteElement:l}=nw(),{getCyInstance:u}=rw(),f=Ct(null),c=Ct(!1),h=(x,w,T)=>{const A=z$(x),_=`node_${crypto.randomUUID().substring(0,8)}`;return{...A,id:_,type:"node",nodeType:x,position:w,parent:T,name:`${A.name||x} ${a.value.filter(P=>P.type==="node").length+1}`}},g=(x,w)=>{const T=h("plate",x,w),A=h("stochastic",{x:x.x,y:x.y},T.id);return a.value=[...a.value,T,A],T},p=x=>{var B,G;const{position:w,target:T}=x,A=u();if(!A)return;const _=T===A,D=!_&&T.isNode()&&T.data("nodeType")==="plate",P=!_&&T.isNode(),N=!_&&T.isEdge();switch(r.currentMode){case"add-node":if(_||D)if(r.currentNodeType==="plate"){if(D){alert("Nesting plates is not currently supported.");return}const F=g(w,D?T.id():void 0);n("element-selected",F),n("update:currentMode","select")}else{const F=h(r.currentNodeType,w,D?T.id():void 0);i(F),n("element-selected",F),n("update:currentMode","select")}break;case"add-edge":if(P){const F=T;if(f.value&&f.value.id()!==F.id()){const z={id:`edge_${crypto.randomUUID().substring(0,8)}`,type:"edge",source:f.value.id(),target:F.id(),name:`Edge ${f.value.data("name")} -> ${F.data("name")}`};i(z),(B=f.value)==null||B.removeClass("cy-connecting"),f.value=null,c.value=!1,n("update:currentMode","select"),n("element-selected",z)}else f.value||(f.value=F,f.value.addClass("cy-connecting"),c.value=!0,n("element-selected",f.value.data()))}else _&&((G=f.value)==null||G.removeClass("cy-connecting"),f.value=null,c.value=!1,n("element-selected",null));break;default:P||N?n("element-selected",T.data()):_&&n("element-selected",null);break}},y=x=>{const w=a.value.find(T=>T.id===x.nodeId);if(w){const T={...w,position:x.position,parent:x.parentId};o(T)}},C=x=>{const{nodeType:w,position:T}=x,A=u();let _;if(w==="plate"){if(A){const N=A.nodes('[nodeType="plate"]');for(const B of N){const G=B.boundingBox();if(T.x>G.x1&&T.x<G.x2&&T.y>G.y1&&T.y<G.y2){alert("Nesting plates is not currently supported.");return}}}const P=g(T);n("element-selected",P),n("update:currentMode","select");return}if(A){const P=A.nodes('[nodeType="plate"]');for(const N of P){const B=N.boundingBox();if(T.x>B.x1&&T.x<B.x2&&T.y>B.y1&&T.y<B.y2){_=N.id();break}}}const D=h(w,T,_);i(D),n("element-selected",D),n("update:currentMode","select")},E=x=>{l(x)},v=x=>{l(x)};return wr(()=>r.currentMode,x=>{var w;x!=="add-edge"&&((w=f.value)==null||w.removeClass("cy-connecting"),f.value=null,c.value=!1)}),(x,w)=>{var T;return ft(),gt("div",X$,[ot(Y$,{"current-mode":r.currentMode,"current-node-type":r.currentNodeType,"onUpdate:currentMode":w[0]||(w[0]=A=>n("update:currentMode",A)),"onUpdate:currentNodeType":w[1]||(w[1]=A=>n("update:currentNodeType",A)),"is-connecting":c.value,"source-node-name":(T=f.value)==null?void 0:T.data("name")},null,8,["current-mode","current-node-type","is-connecting","source-node-name"]),ot(F$,{elements:ir(a),"is-grid-enabled":x.isGridEnabled,"grid-size":x.gridSize,"current-mode":r.currentMode,onCanvasTap:p,onNodeMoved:y,onNodeDropped:C,onPlateEmptied:E,onElementRemove:v},null,8,["elements","is-grid-enabled","grid-size","current-mode"])])}}}),j$=an(K$,[["__scopeId","data-v-1ecf5f45"]]),SO=Ec("project",()=>{const t=Ct([]),e=Ct(localStorage.getItem("doodlebugs-currentProjectId")||null),r=_o(),n=g=>{const p={id:`project_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,name:g,createdAt:Date.now(),lastModified:Date.now(),graphs:[]};t.value.push(p),c(),a(p.id)},a=g=>{e.value=g,g?localStorage.setItem("doodlebugs-currentProjectId",g):localStorage.removeItem("doodlebugs-currentProjectId")},i=g=>{const p=t.value.find(y=>y.id===g);p&&(p.graphs.forEach(y=>{r.deleteGraphContent(y.id)}),t.value=t.value.filter(y=>y.id!==g),e.value===g&&a(null),c())},o=sr(()=>t.value.find(g=>g.id===e.value)||null),l=(g,p)=>{const y=t.value.find(C=>C.id===g);if(y){const C={id:`graph_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,name:p,createdAt:Date.now(),lastModified:Date.now()};return y.graphs.push(C),y.lastModified=Date.now(),c(),r.createNewGraphContent(C.id),r.selectGraph(C.id),C}},u=(g,p)=>{const y=t.value.find(C=>C.id===g);y&&(y.graphs=y.graphs.filter(C=>C.id!==p),y.lastModified=Date.now(),c(),r.deleteGraphContent(p))},f=g=>{var p;return((p=t.value.find(y=>y.id===g))==null?void 0:p.graphs)||[]},c=()=>{localStorage.setItem("doodlebugs-projects",JSON.stringify(t.value))};return{projects:t,currentProjectId:e,currentProject:o,createProject:n,selectProject:a,deleteProject:i,addGraphToProject:l,deleteGraphFromProject:u,getGraphsForProject:f,loadProjects:()=>{const g=localStorage.getItem("doodlebugs-projects");g&&(t.value=JSON.parse(g)),e.value&&!t.value.some(p=>p.id===e.value)&&a(null)}}}),Z$={class:"modal-content",role:"dialog","aria-modal":"true"},Q$={key:0,class:"modal-header"},J$={key:1,class:"modal-body"},e9={key:2,class:"modal-footer"},Ss=qr({__name:"BaseModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const r=e,n=a=>{a.key==="Escape"&&r("close")};return Sa(()=>{document.addEventListener("keydown",n)}),Aa(()=>{document.removeEventListener("keydown",n)}),(a,i)=>(ft(),Ka(d1,{name:"modal-fade"},{default:ht(()=>[a.isOpen?(ft(),gt("div",{key:0,class:"modal-overlay",onClick:i[0]||(i[0]=kr(o=>r("close"),["self"]))},[_e("div",Z$,[a.$slots.header?(ft(),gt("header",Q$,[ps(a.$slots,"header")])):Wr("",!0),a.$slots.body?(ft(),gt("section",J$,[ps(a.$slots,"body")])):Wr("",!0),a.$slots.footer?(ft(),gt("footer",e9,[ps(a.$slots,"footer")])):Wr("",!0)])])):Wr("",!0)]),_:3}))}}),t9={class:"project-manager"},r9={class:"header"},n9={key:0,class:"empty-state"},a9={key:1,class:"project-list"},i9=["onClick"],o9={class:"project-name"},s9=["onClick"],l9={key:0,class:"graph-list"},u9=["onClick"],f9=["onClick"],c9={key:0,class:"empty-state-inner"},d9={key:0},h9={key:0},v9=qr({__name:"ProjectManager",emits:["newProject","newGraph"],setup(t,{emit:e}){const r=SO(),n=_o(),a=Ct(!1),i=Ct(null),o=Ct(null),l=Ct(null),u=sr(()=>r.currentProject),f=sr(()=>u.value?r.getGraphsForProject(u.value.id):[]),c=w=>{l.value&&!l.value.contains(w.target)&&(o.value=null)};Sa(()=>{r.loadProjects(),r.projects.length>0&&!r.currentProjectId&&r.selectProject(r.projects[0].id),document.addEventListener("click",c)}),Aa(()=>{document.removeEventListener("click",c)});const h=w=>{n.selectGraph(w)},g=async(w,T,A)=>{w.stopPropagation(),w.preventDefault(),o.value=null,await gc(),o.value={type:T,id:A,x:w.clientX,y:w.clientY}},p=(w,T,A,_)=>{i.value={type:w,id:T,name:A,projectId:_},a.value=!0,o.value=null},y=()=>{i.value&&(i.value.type==="project"?r.deleteProject(i.value.id):i.value.type==="graph"&&i.value.projectId&&(r.deleteGraphFromProject(i.value.projectId,i.value.id),n.currentGraphId===i.value.id&&n.selectGraph(null)),a.value=!1,i.value=null)},C=()=>{a.value=!1,i.value=null},E=e,v=()=>{E("newProject"),o.value=null},x=()=>{E("newGraph"),o.value=null};return(w,T)=>(ft(),gt("div",t9,[_e("div",r9,[T[3]||(T[3]=_e("h4",null,"Projects",-1)),ot(rr,{onClick:v,type:"primary",size:"small",class:"add-project-btn",title:"New Project"},{default:ht(()=>T[2]||(T[2]=[_e("i",{class:"fas fa-plus"},null,-1)])),_:1,__:[2]})]),ir(r).projects.length===0?(ft(),gt("div",n9,[T[5]||(T[5]=_e("p",null,"No projects yet.",-1)),ot(rr,{onClick:v,type:"primary"},{default:ht(()=>T[4]||(T[4]=[At("Create New Project")])),_:1,__:[4]})])):(ft(),gt("div",a9,[(ft(!0),gt(or,null,Xa(ir(r).projects,A=>(ft(),gt("div",{key:A.id,class:"project-item"},[_e("div",{class:cr(["project-header",{active:ir(r).currentProjectId===A.id}]),onClick:_=>ir(r).selectProject(A.id)},[_e("i",{class:cr(["icon-chevron fas fa-chevron-right",{open:ir(r).currentProjectId===A.id}])},null,2),T[7]||(T[7]=_e("i",{class:"icon-folder fas fa-folder"},null,-1)),_e("span",o9,Ar(A.name),1),_e("button",{onClick:_=>g(_,"project",A.id),class:"context-menu-btn"},T[6]||(T[6]=[_e("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,s9)],10,i9),ot(d1,{name:"slide-fade"},{default:ht(()=>{var _;return[((_=ir(r).currentProject)==null?void 0:_.id)===A.id?(ft(),gt("div",l9,[(ft(!0),gt(or,null,Xa(f.value,D=>(ft(),gt("div",{key:D.id,class:cr(["graph-item",{active:ir(n).currentGraphId===D.id}]),onClick:P=>h(D.id)},[T[9]||(T[9]=_e("i",{class:"icon-file fas fa-file-alt"},null,-1)),_e("span",null,Ar(D.name),1),_e("button",{onClick:P=>g(P,"graph",D.id),class:"context-menu-btn"},T[8]||(T[8]=[_e("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,f9)],10,u9))),128)),f.value.length===0?(ft(),gt("div",c9,[T[11]||(T[11]=_e("p",null,"No graphs in this project.",-1)),ot(rr,{onClick:x,type:"secondary",size:"small"},{default:ht(()=>T[10]||(T[10]=[At("Create New Graph")])),_:1,__:[10]})])):Wr("",!0)])):Wr("",!0)]}),_:2},1024)]))),128))])),o.value?(ft(),gt("div",{key:2,ref_key:"contextMenuRef",ref:l,class:"context-menu",style:xi({top:`${o.value.y}px`,left:`${o.value.x}px`})},[o.value.type==="project"?(ft(),gt(or,{key:0},[_e("div",{class:"context-menu-item",onClick:x},T[12]||(T[12]=[_e("i",{class:"fas fa-plus"},null,-1),At(" New Graph")])),_e("div",{class:"context-menu-item danger",onClick:T[0]||(T[0]=A=>p("project",o.value.id,ir(r).projects.find(_=>_.id===o.value.id).name))},T[13]||(T[13]=[_e("i",{class:"fas fa-trash-alt"},null,-1),At(" Delete Project")]))],64)):Wr("",!0),o.value.type==="graph"?(ft(),gt("div",{key:1,class:"context-menu-item danger",onClick:T[1]||(T[1]=A=>p("graph",o.value.id,f.value.find(_=>_.id===o.value.id).name,u.value.id))},T[14]||(T[14]=[_e("i",{class:"fas fa-trash-alt"},null,-1),At(" Delete Graph")]))):Wr("",!0)],4)):Wr("",!0),ot(Ss,{"is-open":a.value,onClose:C},{header:ht(()=>T[15]||(T[15]=[_e("h3",null,"Confirm Deletion",-1)])),body:ht(()=>[i.value?(ft(),gt("p",d9,[At(" Are you sure you want to delete the "+Ar(i.value.type)+" ",1),_e("strong",null,'"'+Ar(i.value.name)+'"',1),T[16]||(T[16]=At("? ")),i.value.type==="project"?(ft(),gt("span",h9,"This will also delete all of its graphs.")):Wr("",!0),T[17]||(T[17]=At(" This action cannot be undone. "))])):Wr("",!0)]),footer:ht(()=>[ot(rr,{onClick:C,type:"secondary"},{default:ht(()=>T[18]||(T[18]=[At("Cancel")])),_:1,__:[18]}),ot(rr,{onClick:y,type:"danger"},{default:ht(()=>T[19]||(T[19]=[At("Delete")])),_:1,__:[19]})]),_:1},8,["is-open"])]))}}),p9=an(v9,[["__scopeId","data-v-2611de75"]]),g9={class:"node-palette"},y9={class:"palette-section"},m9={class:"palette-grid"},b9=["onDragstart","onClick","title"],w9={class:"card-label"},x9={class:"palette-section"},C9={class:"palette-grid"},E9=["onDragstart","onClick","title"],T9={class:"card-label"},S9=qr({__name:"NodePalette",emits:["select-palette-item"],setup(t,{emit:e}){const r=e,n=[{label:"Add Edge",type:"add-edge",styleClass:"connection",description:"Connect two nodes"}],a=(o,l)=>{o.dataTransfer&&(o.dataTransfer.setData("text/plain",l),o.dataTransfer.effectAllowed="copy")},i=o=>{r("select-palette-item",o)};return(o,l)=>(ft(),gt("div",g9,[_e("div",y9,[l[0]||(l[0]=_e("h5",{class:"section-title"},"Nodes",-1)),_e("div",m9,[(ft(!0),gt(or,null,Xa(ir(id),u=>(ft(),gt("div",{key:u.nodeType,class:cr(["palette-card",u.styleClass]),draggable:"true",onDragstart:f=>a(f,u.nodeType),onClick:f=>i(u.nodeType),title:u.description},[_e("div",{class:cr(["card-icon",`icon-${u.nodeType}`])},Ar(u.icon),3),_e("span",w9,Ar(u.label),1)],42,b9))),128))])]),_e("div",x9,[l[2]||(l[2]=_e("h5",{class:"section-title"},"Connections",-1)),_e("div",C9,[(ft(),gt(or,null,Xa(n,u=>_e("div",{key:u.type,class:cr(["palette-card",u.styleClass]),draggable:"true",onDragstart:f=>a(f,u.type),onClick:f=>i(u.type),title:u.description},[l[1]||(l[1]=_e("div",{class:"card-icon connection-icon"},null,-1)),_e("span",T9,Ar(u.label),1)],42,E9)),64))])])]))}}),A9=an(S9,[["__scopeId","data-v-bfe4f53a"]]);var tR={exports:{}},If={exports:{}},L9=If.exports,rR;function Gi(){return rR||(rR=1,function(t,e){(function(r,n){t.exports=n()})(L9,function(){var r=navigator.userAgent,n=navigator.platform,a=/gecko\/\d/i.test(r),i=/MSIE \d/.test(r),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),l=/Edge\/(\d+)/.exec(r),u=i||o||l,f=u&&(i?document.documentMode||6:+(l||o)[1]),c=!l&&/WebKit\//.test(r),h=c&&/Qt\/\d+\.\d+/.test(r),g=!l&&/Chrome\/(\d+)/.exec(r),p=g&&+g[1],y=/Opera\//.test(r),C=/Apple Computer/.test(navigator.vendor),E=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),v=/PhantomJS/.test(r),x=C&&(/Mobile\/\w+/.test(r)||navigator.maxTouchPoints>2),w=/Android/.test(r),T=x||w||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),A=x||/Mac/.test(n),_=/\bCrOS\b/.test(r),D=/win/i.test(n),P=y&&r.match(/Version\/(\d*\.\d*)/);P&&(P=Number(P[1])),P&&P>=15&&(y=!1,c=!0);var N=A&&(h||y&&(P==null||P<12.11)),B=a||u&&f>=9;function G(s){return new RegExp("(^|\\s)"+s+"(?:$|\\s)\\s*")}var F=function(s,d){var b=s.className,m=G(d).exec(b);if(m){var S=b.slice(m.index+m[0].length);s.className=b.slice(0,m.index)+(S?m[1]+S:"")}};function z(s){for(var d=s.childNodes.length;d>0;--d)s.removeChild(s.firstChild);return s}function M(s,d){return z(s).appendChild(d)}function R(s,d,b,m){var S=document.createElement(s);if(b&&(S.className=b),m&&(S.style.cssText=m),typeof d=="string")S.appendChild(document.createTextNode(d));else if(d)for(var L=0;L<d.length;++L)S.appendChild(d[L]);return S}function k(s,d,b,m){var S=R(s,d,b,m);return S.setAttribute("role","presentation"),S}var I;document.createRange?I=function(s,d,b,m){var S=document.createRange();return S.setEnd(m||s,b),S.setStart(s,d),S}:I=function(s,d,b){var m=document.body.createTextRange();try{m.moveToElementText(s.parentNode)}catch{return m}return m.collapse(!0),m.moveEnd("character",b),m.moveStart("character",d),m};function q(s,d){if(d.nodeType==3&&(d=d.parentNode),s.contains)return s.contains(d);do if(d.nodeType==11&&(d=d.host),d==s)return!0;while(d=d.parentNode)}function ae(s){var d=s.ownerDocument||s,b;try{b=s.activeElement}catch{b=d.body||null}for(;b&&b.shadowRoot&&b.shadowRoot.activeElement;)b=b.shadowRoot.activeElement;return b}function re(s,d){var b=s.className;G(d).test(b)||(s.className+=(b?" ":"")+d)}function K(s,d){for(var b=s.split(" "),m=0;m<b.length;m++)b[m]&&!G(b[m]).test(d)&&(d+=" "+b[m]);return d}var W=function(s){s.select()};x?W=function(s){s.selectionStart=0,s.selectionEnd=s.value.length}:u&&(W=function(s){try{s.select()}catch{}});function Z(s){return s.display.wrapper.ownerDocument}function U(s){return V(s.display.wrapper)}function V(s){return s.getRootNode?s.getRootNode():s.ownerDocument}function X(s){return Z(s).defaultView}function ee(s){var d=Array.prototype.slice.call(arguments,1);return function(){return s.apply(null,d)}}function se(s,d,b){d||(d={});for(var m in s)s.hasOwnProperty(m)&&(b!==!1||!d.hasOwnProperty(m))&&(d[m]=s[m]);return d}function te(s,d,b,m,S){d==null&&(d=s.search(/[^\s\u00a0]/),d==-1&&(d=s.length));for(var L=m||0,O=S||0;;){var H=s.indexOf("	",L);if(H<0||H>=d)return O+(d-L);O+=H-L,O+=b-O%b,L=H+1}}var oe=function(){this.id=null,this.f=null,this.time=0,this.handler=ee(this.onTimeout,this)};oe.prototype.onTimeout=function(s){s.id=0,s.time<=+new Date?s.f():setTimeout(s.handler,s.time-+new Date)},oe.prototype.set=function(s,d){this.f=d;var b=+new Date+s;(!this.id||b<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,s),this.time=b)};function le(s,d){for(var b=0;b<s.length;++b)if(s[b]==d)return b;return-1}var $=50,ne={toString:function(){return"CodeMirror.Pass"}},ie={scroll:!1},ue={origin:"*mouse"},me={origin:"+move"};function ge(s,d,b){for(var m=0,S=0;;){var L=s.indexOf("	",m);L==-1&&(L=s.length);var O=L-m;if(L==s.length||S+O>=d)return m+Math.min(O,d-S);if(S+=L-m,S+=b-S%b,m=L+1,S>=d)return m}}var Ee=[""];function he(s){for(;Ee.length<=s;)Ee.push(de(Ee)+" ");return Ee[s]}function de(s){return s[s.length-1]}function be(s,d){for(var b=[],m=0;m<s.length;m++)b[m]=d(s[m],m);return b}function De(s,d,b){for(var m=0,S=b(d);m<s.length&&b(s[m])<=S;)m++;s.splice(m,0,d)}function Se(){}function Re(s,d){var b;return Object.create?b=Object.create(s):(Se.prototype=s,b=new Se),d&&se(d,b),b}var Ie=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function qe(s){return/\w/.test(s)||s>""&&(s.toUpperCase()!=s.toLowerCase()||Ie.test(s))}function Ze(s,d){return d?d.source.indexOf("\\w")>-1&&qe(s)?!0:d.test(s):qe(s)}function $e(s){for(var d in s)if(s.hasOwnProperty(d)&&s[d])return!1;return!0}var tt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Xe(s){return s.charCodeAt(0)>=768&&tt.test(s)}function We(s,d,b){for(;(b<0?d>0:d<s.length)&&Xe(s.charAt(d));)d+=b;return d}function ve(s,d,b){for(var m=d>b?-1:1;;){if(d==b)return d;var S=(d+b)/2,L=m<0?Math.ceil(S):Math.floor(S);if(L==d)return s(L)?d:b;s(L)?b=L:d=L+m}}function j(s,d,b,m){if(!s)return m(d,b,"ltr",0);for(var S=!1,L=0;L<s.length;++L){var O=s[L];(O.from<b&&O.to>d||d==b&&O.to==d)&&(m(Math.max(O.from,d),Math.min(O.to,b),O.level==1?"rtl":"ltr",L),S=!0)}S||m(d,b,"ltr")}var pe=null;function we(s,d,b){var m;pe=null;for(var S=0;S<s.length;++S){var L=s[S];if(L.from<d&&L.to>d)return S;L.to==d&&(L.from!=L.to&&b=="before"?m=S:pe=S),L.from==d&&(L.from!=L.to&&b!="before"?m=S:pe=S)}return m??pe}var xe=function(){var s="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function b(J){return J<=247?s.charAt(J):1424<=J&&J<=1524?"R":1536<=J&&J<=1785?d.charAt(J-1536):1774<=J&&J<=2220?"r":8192<=J&&J<=8203?"w":J==8204?"b":"L"}var m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,S=/[stwN]/,L=/[LRr]/,O=/[Lb1n]/,H=/[1n]/;function Y(J,ce,ye){this.level=J,this.from=ce,this.to=ye}return function(J,ce){var ye=ce=="ltr"?"L":"R";if(J.length==0||ce=="ltr"&&!m.test(J))return!1;for(var Le=J.length,Ae=[],Ne=0;Ne<Le;++Ne)Ae.push(b(J.charCodeAt(Ne)));for(var Fe=0,Ye=ye;Fe<Le;++Fe){var Je=Ae[Fe];Je=="m"?Ae[Fe]=Ye:Ye=Je}for(var it=0,et=ye;it<Le;++it){var st=Ae[it];st=="1"&&et=="r"?Ae[it]="n":L.test(st)&&(et=st,st=="r"&&(Ae[it]="R"))}for(var yt=1,vt=Ae[0];yt<Le-1;++yt){var St=Ae[yt];St=="+"&&vt=="1"&&Ae[yt+1]=="1"?Ae[yt]="1":St==","&&vt==Ae[yt+1]&&(vt=="1"||vt=="n")&&(Ae[yt]=vt),vt=St}for(var Yt=0;Yt<Le;++Yt){var Pr=Ae[Yt];if(Pr==",")Ae[Yt]="N";else if(Pr=="%"){var fr=void 0;for(fr=Yt+1;fr<Le&&Ae[fr]=="%";++fr);for(var _n=Yt&&Ae[Yt-1]=="!"||fr<Le&&Ae[fr]=="1"?"1":"N",wn=Yt;wn<fr;++wn)Ae[wn]=_n;Yt=fr-1}}for(var mr=0,xn=ye;mr<Le;++mr){var Hr=Ae[mr];xn=="L"&&Hr=="1"?Ae[mr]="L":L.test(Hr)&&(xn=Hr)}for(var Tr=0;Tr<Le;++Tr)if(S.test(Ae[Tr])){var br=void 0;for(br=Tr+1;br<Le&&S.test(Ae[br]);++br);for(var hr=(Tr?Ae[Tr-1]:ye)=="L",Cn=(br<Le?Ae[br]:ye)=="L",Xo=hr==Cn?hr?"L":"R":ye,ci=Tr;ci<br;++ci)Ae[ci]=Xo;Tr=br-1}for(var Zr=[],va,Nr=0;Nr<Le;)if(O.test(Ae[Nr])){var Zd=Nr;for(++Nr;Nr<Le&&O.test(Ae[Nr]);++Nr);Zr.push(new Y(0,Zd,Nr))}else{var Ia=Nr,ji=Zr.length,Zi=ce=="rtl"?1:0;for(++Nr;Nr<Le&&Ae[Nr]!="L";++Nr);for(var un=Ia;un<Nr;)if(H.test(Ae[un])){Ia<un&&(Zr.splice(ji,0,new Y(1,Ia,un)),ji+=Zi);var Ko=un;for(++un;un<Nr&&H.test(Ae[un]);++un);Zr.splice(ji,0,new Y(2,Ko,un)),ji+=Zi,Ia=un}else++un;Ia<Nr&&Zr.splice(ji,0,new Y(1,Ia,Nr))}return ce=="ltr"&&(Zr[0].level==1&&(va=J.match(/^\s+/))&&(Zr[0].from=va[0].length,Zr.unshift(new Y(0,0,va[0].length))),de(Zr).level==1&&(va=J.match(/\s+$/))&&(de(Zr).to-=va[0].length,Zr.push(new Y(0,Le-va[0].length,Le)))),ce=="rtl"?Zr.reverse():Zr}}();function Ce(s,d){var b=s.order;return b==null&&(b=s.order=xe(s.text,d)),b}var Be=[],Te=function(s,d,b){if(s.addEventListener)s.addEventListener(d,b,!1);else if(s.attachEvent)s.attachEvent("on"+d,b);else{var m=s._handlers||(s._handlers={});m[d]=(m[d]||Be).concat(b)}};function ke(s,d){return s._handlers&&s._handlers[d]||Be}function Oe(s,d,b){if(s.removeEventListener)s.removeEventListener(d,b,!1);else if(s.detachEvent)s.detachEvent("on"+d,b);else{var m=s._handlers,S=m&&m[d];if(S){var L=le(S,b);L>-1&&(m[d]=S.slice(0,L).concat(S.slice(L+1)))}}}function He(s,d){var b=ke(s,d);if(b.length)for(var m=Array.prototype.slice.call(arguments,2),S=0;S<b.length;++S)b[S].apply(null,m)}function Ue(s,d,b){return typeof d=="string"&&(d={type:d,preventDefault:function(){this.defaultPrevented=!0}}),He(s,b||d.type,s,d),rt(d)||d.codemirrorIgnore}function Ke(s){var d=s._handlers&&s._handlers.cursorActivity;if(d)for(var b=s.curOp.cursorActivityHandlers||(s.curOp.cursorActivityHandlers=[]),m=0;m<d.length;++m)le(b,d[m])==-1&&b.push(d[m])}function Qe(s,d){return ke(s,d).length>0}function Ge(s){s.prototype.on=function(d,b){Te(this,d,b)},s.prototype.off=function(d,b){Oe(this,d,b)}}function Ve(s){s.preventDefault?s.preventDefault():s.returnValue=!1}function dt(s){s.stopPropagation?s.stopPropagation():s.cancelBubble=!0}function rt(s){return s.defaultPrevented!=null?s.defaultPrevented:s.returnValue==!1}function at(s){Ve(s),dt(s)}function Et(s){return s.target||s.srcElement}function ut(s){var d=s.which;return d==null&&(s.button&1?d=1:s.button&2?d=3:s.button&4&&(d=2)),A&&s.ctrlKey&&d==1&&(d=3),d}var pt=function(){if(u&&f<9)return!1;var s=R("div");return"draggable"in s||"dragDrop"in s}(),_t;function Mt(s){if(_t==null){var d=R("span","​");M(s,R("span",[d,document.createTextNode("x")])),s.firstChild.offsetHeight!=0&&(_t=d.offsetWidth<=1&&d.offsetHeight>2&&!(u&&f<8))}var b=_t?R("span","​"):R("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return b.setAttribute("cm-text",""),b}var Vt;function Lt(s){if(Vt!=null)return Vt;var d=M(s,document.createTextNode("AخA")),b=I(d,0,1).getBoundingClientRect(),m=I(d,1,2).getBoundingClientRect();return z(s),!b||b.left==b.right?!1:Vt=m.right-b.right<3}var zt=`

b`.split(/\n/).length!=3?function(s){for(var d=0,b=[],m=s.length;d<=m;){var S=s.indexOf(`
`,d);S==-1&&(S=s.length);var L=s.slice(d,s.charAt(S-1)=="\r"?S-1:S),O=L.indexOf("\r");O!=-1?(b.push(L.slice(0,O)),d+=O+1):(b.push(L),d=S+1)}return b}:function(s){return s.split(/\r\n?|\n/)},Er=window.getSelection?function(s){try{return s.selectionStart!=s.selectionEnd}catch{return!1}}:function(s){var d;try{d=s.ownerDocument.selection.createRange()}catch{}return!d||d.parentElement()!=s?!1:d.compareEndPoints("StartToEnd",d)!=0},on=function(){var s=R("div");return"oncopy"in s?!0:(s.setAttribute("oncopy","return;"),typeof s.oncopy=="function")}(),Rt=null;function Kt(s){if(Rt!=null)return Rt;var d=M(s,R("span","x")),b=d.getBoundingClientRect(),m=I(d,0,1).getBoundingClientRect();return Rt=Math.abs(b.left-m.left)>1}var $t={},ur={};function jt(s,d){arguments.length>2&&(d.dependencies=Array.prototype.slice.call(arguments,2)),$t[s]=d}function Kr(s,d){ur[s]=d}function gn(s){if(typeof s=="string"&&ur.hasOwnProperty(s))s=ur[s];else if(s&&typeof s.name=="string"&&ur.hasOwnProperty(s.name)){var d=ur[s.name];typeof d=="string"&&(d={name:d}),s=Re(d,s),s.name=d.name}else{if(typeof s=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(s))return gn("application/xml");if(typeof s=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(s))return gn("application/json")}return typeof s=="string"?{name:s}:s||{name:"null"}}function jn(s,d){d=gn(d);var b=$t[d.name];if(!b)return jn(s,"text/plain");var m=b(s,d);if(Ln.hasOwnProperty(d.name)){var S=Ln[d.name];for(var L in S)S.hasOwnProperty(L)&&(m.hasOwnProperty(L)&&(m["_"+L]=m[L]),m[L]=S[L])}if(m.name=d.name,d.helperType&&(m.helperType=d.helperType),d.modeProps)for(var O in d.modeProps)m[O]=d.modeProps[O];return m}var Ln={};function Zn(s,d){var b=Ln.hasOwnProperty(s)?Ln[s]:Ln[s]={};se(d,b)}function sn(s,d){if(d===!0)return d;if(s.copyState)return s.copyState(d);var b={};for(var m in d){var S=d[m];S instanceof Array&&(S=S.concat([])),b[m]=S}return b}function Ma(s,d){for(var b;s.innerMode&&(b=s.innerMode(d),!(!b||b.mode==s));)d=b.state,s=b.mode;return b||{mode:s,state:d}}function zn(s,d,b){return s.startState?s.startState(d,b):!0}var Ft=function(s,d,b){this.pos=this.start=0,this.string=s,this.tabSize=d||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=b};Ft.prototype.eol=function(){return this.pos>=this.string.length},Ft.prototype.sol=function(){return this.pos==this.lineStart},Ft.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ft.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ft.prototype.eat=function(s){var d=this.string.charAt(this.pos),b;if(typeof s=="string"?b=d==s:b=d&&(s.test?s.test(d):s(d)),b)return++this.pos,d},Ft.prototype.eatWhile=function(s){for(var d=this.pos;this.eat(s););return this.pos>d},Ft.prototype.eatSpace=function(){for(var s=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>s},Ft.prototype.skipToEnd=function(){this.pos=this.string.length},Ft.prototype.skipTo=function(s){var d=this.string.indexOf(s,this.pos);if(d>-1)return this.pos=d,!0},Ft.prototype.backUp=function(s){this.pos-=s},Ft.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=te(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?te(this.string,this.lineStart,this.tabSize):0)},Ft.prototype.indentation=function(){return te(this.string,null,this.tabSize)-(this.lineStart?te(this.string,this.lineStart,this.tabSize):0)},Ft.prototype.match=function(s,d,b){if(typeof s=="string"){var m=function(O){return b?O.toLowerCase():O},S=this.string.substr(this.pos,s.length);if(m(S)==m(s))return d!==!1&&(this.pos+=s.length),!0}else{var L=this.string.slice(this.pos).match(s);return L&&L.index>0?null:(L&&d!==!1&&(this.pos+=L[0].length),L)}},Ft.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ft.prototype.hideFirstChars=function(s,d){this.lineStart+=s;try{return d()}finally{this.lineStart-=s}},Ft.prototype.lookAhead=function(s){var d=this.lineOracle;return d&&d.lookAhead(s)},Ft.prototype.baseToken=function(){var s=this.lineOracle;return s&&s.baseToken(this.pos)};function lt(s,d){if(d-=s.first,d<0||d>=s.size)throw new Error("There is no line "+(d+s.first)+" in the document.");for(var b=s;!b.lines;)for(var m=0;;++m){var S=b.children[m],L=S.chunkSize();if(d<L){b=S;break}d-=L}return b.lines[d]}function Gr(s,d,b){var m=[],S=d.line;return s.iter(d.line,b.line+1,function(L){var O=L.text;S==b.line&&(O=O.slice(0,b.ch)),S==d.line&&(O=O.slice(d.ch)),m.push(O),++S}),m}function Qn(s,d,b){var m=[];return s.iter(d,b,function(S){m.push(S.text)}),m}function Pt(s,d){var b=d-s.height;if(b)for(var m=s;m;m=m.parent)m.height+=b}function Q(s){if(s.parent==null)return null;for(var d=s.parent,b=le(d.lines,s),m=d.parent;m;d=m,m=m.parent)for(var S=0;m.children[S]!=d;++S)b+=m.children[S].chunkSize();return b+d.first}function fe(s,d){var b=s.first;e:do{for(var m=0;m<s.children.length;++m){var S=s.children[m],L=S.height;if(d<L){s=S;continue e}d-=L,b+=S.chunkSize()}return b}while(!s.lines);for(var O=0;O<s.lines.length;++O){var H=s.lines[O],Y=H.height;if(d<Y)break;d-=Y}return b+O}function Pe(s,d){return d>=s.first&&d<s.first+s.size}function ze(s,d){return String(s.lineNumberFormatter(d+s.firstLineNumber))}function Me(s,d,b){if(b===void 0&&(b=null),!(this instanceof Me))return new Me(s,d,b);this.line=s,this.ch=d,this.sticky=b}function je(s,d){return s.line-d.line||s.ch-d.ch}function Nt(s,d){return s.sticky==d.sticky&&je(s,d)==0}function Dr(s){return Me(s.line,s.ch)}function yn(s,d){return je(s,d)<0?d:s}function Mo(s,d){return je(s,d)<0?s:d}function iw(s,d){return Math.max(s.first,Math.min(d,s.first+s.size-1))}function xt(s,d){if(d.line<s.first)return Me(s.first,0);var b=s.first+s.size-1;return d.line>b?Me(b,lt(s,b).text.length):DO(d,lt(s,d.line).text.length)}function DO(s,d){var b=s.ch;return b==null||b>d?Me(s.line,d):b<0?Me(s.line,0):s}function ow(s,d){for(var b=[],m=0;m<d.length;m++)b[m]=xt(s,d[m]);return b}var xu=function(s,d){this.state=s,this.lookAhead=d},ca=function(s,d,b,m){this.state=d,this.doc=s,this.line=b,this.maxLookAhead=m||0,this.baseTokens=null,this.baseTokenPos=1};ca.prototype.lookAhead=function(s){var d=this.doc.getLine(this.line+s);return d!=null&&s>this.maxLookAhead&&(this.maxLookAhead=s),d},ca.prototype.baseToken=function(s){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=s;)this.baseTokenPos+=2;var d=this.baseTokens[this.baseTokenPos+1];return{type:d&&d.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-s}},ca.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ca.fromSaved=function(s,d,b){return d instanceof xu?new ca(s,sn(s.mode,d.state),b,d.lookAhead):new ca(s,sn(s.mode,d),b)},ca.prototype.save=function(s){var d=s!==!1?sn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new xu(d,this.maxLookAhead):d};function sw(s,d,b,m){var S=[s.state.modeGen],L={};hw(s,d.text,s.doc.mode,b,function(J,ce){return S.push(J,ce)},L,m);for(var O=b.state,H=function(J){b.baseTokens=S;var ce=s.state.overlays[J],ye=1,Le=0;b.state=!0,hw(s,d.text,ce.mode,b,function(Ae,Ne){for(var Fe=ye;Le<Ae;){var Ye=S[ye];Ye>Ae&&S.splice(ye,1,Ae,S[ye+1],Ye),ye+=2,Le=Math.min(Ae,Ye)}if(Ne)if(ce.opaque)S.splice(Fe,ye-Fe,Ae,"overlay "+Ne),ye=Fe+2;else for(;Fe<ye;Fe+=2){var Je=S[Fe+1];S[Fe+1]=(Je?Je+" ":"")+"overlay "+Ne}},L),b.state=O,b.baseTokens=null,b.baseTokenPos=1},Y=0;Y<s.state.overlays.length;++Y)H(Y);return{styles:S,classes:L.bgClass||L.textClass?L:null}}function lw(s,d,b){if(!d.styles||d.styles[0]!=s.state.modeGen){var m=Fs(s,Q(d)),S=d.text.length>s.options.maxHighlightLength&&sn(s.doc.mode,m.state),L=sw(s,d,m);S&&(m.state=S),d.stateAfter=m.save(!S),d.styles=L.styles,L.classes?d.styleClasses=L.classes:d.styleClasses&&(d.styleClasses=null),b===s.doc.highlightFrontier&&(s.doc.modeFrontier=Math.max(s.doc.modeFrontier,++s.doc.highlightFrontier))}return d.styles}function Fs(s,d,b){var m=s.doc,S=s.display;if(!m.mode.startState)return new ca(m,!0,d);var L=_O(s,d,b),O=L>m.first&&lt(m,L-1).stateAfter,H=O?ca.fromSaved(m,O,L):new ca(m,zn(m.mode),L);return m.iter(L,d,function(Y){od(s,Y.text,H);var J=H.line;Y.stateAfter=J==d-1||J%5==0||J>=S.viewFrom&&J<S.viewTo?H.save():null,H.nextLine()}),b&&(m.modeFrontier=H.line),H}function od(s,d,b,m){var S=s.doc.mode,L=new Ft(d,s.options.tabSize,b);for(L.start=L.pos=m||0,d==""&&uw(S,b.state);!L.eol();)sd(S,L,b.state),L.start=L.pos}function uw(s,d){if(s.blankLine)return s.blankLine(d);if(s.innerMode){var b=Ma(s,d);if(b.mode.blankLine)return b.mode.blankLine(b.state)}}function sd(s,d,b,m){for(var S=0;S<10;S++){m&&(m[0]=Ma(s,b).mode);var L=s.token(d,b);if(d.pos>d.start)return L}throw new Error("Mode "+s.name+" failed to advance stream.")}var fw=function(s,d,b){this.start=s.start,this.end=s.pos,this.string=s.current(),this.type=d||null,this.state=b};function cw(s,d,b,m){var S=s.doc,L=S.mode,O;d=xt(S,d);var H=lt(S,d.line),Y=Fs(s,d.line,b),J=new Ft(H.text,s.options.tabSize,Y),ce;for(m&&(ce=[]);(m||J.pos<d.ch)&&!J.eol();)J.start=J.pos,O=sd(L,J,Y.state),m&&ce.push(new fw(J,O,sn(S.mode,Y.state)));return m?ce:new fw(J,O,Y.state)}function dw(s,d){if(s)for(;;){var b=s.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!b)break;s=s.slice(0,b.index)+s.slice(b.index+b[0].length);var m=b[1]?"bgClass":"textClass";d[m]==null?d[m]=b[2]:new RegExp("(?:^|\\s)"+b[2]+"(?:$|\\s)").test(d[m])||(d[m]+=" "+b[2])}return s}function hw(s,d,b,m,S,L,O){var H=b.flattenSpans;H==null&&(H=s.options.flattenSpans);var Y=0,J=null,ce=new Ft(d,s.options.tabSize,m),ye,Le=s.options.addModeClass&&[null];for(d==""&&dw(uw(b,m.state),L);!ce.eol();){if(ce.pos>s.options.maxHighlightLength?(H=!1,O&&od(s,d,m,ce.pos),ce.pos=d.length,ye=null):ye=dw(sd(b,ce,m.state,Le),L),Le){var Ae=Le[0].name;Ae&&(ye="m-"+(ye?Ae+" "+ye:Ae))}if(!H||J!=ye){for(;Y<ce.start;)Y=Math.min(ce.start,Y+5e3),S(Y,J);J=ye}ce.start=ce.pos}for(;Y<ce.pos;){var Ne=Math.min(ce.pos,Y+5e3);S(Ne,J),Y=Ne}}function _O(s,d,b){for(var m,S,L=s.doc,O=b?-1:d-(s.doc.mode.innerMode?1e3:100),H=d;H>O;--H){if(H<=L.first)return L.first;var Y=lt(L,H-1),J=Y.stateAfter;if(J&&(!b||H+(J instanceof xu?J.lookAhead:0)<=L.modeFrontier))return H;var ce=te(Y.text,null,s.options.tabSize);(S==null||m>ce)&&(S=H-1,m=ce)}return S}function MO(s,d){if(s.modeFrontier=Math.min(s.modeFrontier,d),!(s.highlightFrontier<d-10)){for(var b=s.first,m=d-1;m>b;m--){var S=lt(s,m).stateAfter;if(S&&(!(S instanceof xu)||m+S.lookAhead<d)){b=m+1;break}}s.highlightFrontier=Math.min(s.highlightFrontier,b)}}var vw=!1,Ra=!1;function RO(){vw=!0}function PO(){Ra=!0}function Cu(s,d,b){this.marker=s,this.from=d,this.to=b}function Bs(s,d){if(s)for(var b=0;b<s.length;++b){var m=s[b];if(m.marker==d)return m}}function NO(s,d){for(var b,m=0;m<s.length;++m)s[m]!=d&&(b||(b=[])).push(s[m]);return b}function kO(s,d,b){var m=b&&window.WeakSet&&(b.markedSpans||(b.markedSpans=new WeakSet));m&&s.markedSpans&&m.has(s.markedSpans)?s.markedSpans.push(d):(s.markedSpans=s.markedSpans?s.markedSpans.concat([d]):[d],m&&m.add(s.markedSpans)),d.marker.attachLine(s)}function OO(s,d,b){var m;if(s)for(var S=0;S<s.length;++S){var L=s[S],O=L.marker,H=L.from==null||(O.inclusiveLeft?L.from<=d:L.from<d);if(H||L.from==d&&O.type=="bookmark"&&(!b||!L.marker.insertLeft)){var Y=L.to==null||(O.inclusiveRight?L.to>=d:L.to>d);(m||(m=[])).push(new Cu(O,L.from,Y?null:L.to))}}return m}function IO(s,d,b){var m;if(s)for(var S=0;S<s.length;++S){var L=s[S],O=L.marker,H=L.to==null||(O.inclusiveRight?L.to>=d:L.to>d);if(H||L.from==d&&O.type=="bookmark"&&(!b||L.marker.insertLeft)){var Y=L.from==null||(O.inclusiveLeft?L.from<=d:L.from<d);(m||(m=[])).push(new Cu(O,Y?null:L.from-d,L.to==null?null:L.to-d))}}return m}function ld(s,d){if(d.full)return null;var b=Pe(s,d.from.line)&&lt(s,d.from.line).markedSpans,m=Pe(s,d.to.line)&&lt(s,d.to.line).markedSpans;if(!b&&!m)return null;var S=d.from.ch,L=d.to.ch,O=je(d.from,d.to)==0,H=OO(b,S,O),Y=IO(m,L,O),J=d.text.length==1,ce=de(d.text).length+(J?S:0);if(H)for(var ye=0;ye<H.length;++ye){var Le=H[ye];if(Le.to==null){var Ae=Bs(Y,Le.marker);Ae?J&&(Le.to=Ae.to==null?null:Ae.to+ce):Le.to=S}}if(Y)for(var Ne=0;Ne<Y.length;++Ne){var Fe=Y[Ne];if(Fe.to!=null&&(Fe.to+=ce),Fe.from==null){var Ye=Bs(H,Fe.marker);Ye||(Fe.from=ce,J&&(H||(H=[])).push(Fe))}else Fe.from+=ce,J&&(H||(H=[])).push(Fe)}H&&(H=pw(H)),Y&&Y!=H&&(Y=pw(Y));var Je=[H];if(!J){var it=d.text.length-2,et;if(it>0&&H)for(var st=0;st<H.length;++st)H[st].to==null&&(et||(et=[])).push(new Cu(H[st].marker,null,null));for(var yt=0;yt<it;++yt)Je.push(et);Je.push(Y)}return Je}function pw(s){for(var d=0;d<s.length;++d){var b=s[d];b.from!=null&&b.from==b.to&&b.marker.clearWhenEmpty!==!1&&s.splice(d--,1)}return s.length?s:null}function FO(s,d,b){var m=null;if(s.iter(d.line,b.line+1,function(Ae){if(Ae.markedSpans)for(var Ne=0;Ne<Ae.markedSpans.length;++Ne){var Fe=Ae.markedSpans[Ne].marker;Fe.readOnly&&(!m||le(m,Fe)==-1)&&(m||(m=[])).push(Fe)}}),!m)return null;for(var S=[{from:d,to:b}],L=0;L<m.length;++L)for(var O=m[L],H=O.find(0),Y=0;Y<S.length;++Y){var J=S[Y];if(!(je(J.to,H.from)<0||je(J.from,H.to)>0)){var ce=[Y,1],ye=je(J.from,H.from),Le=je(J.to,H.to);(ye<0||!O.inclusiveLeft&&!ye)&&ce.push({from:J.from,to:H.from}),(Le>0||!O.inclusiveRight&&!Le)&&ce.push({from:H.to,to:J.to}),S.splice.apply(S,ce),Y+=ce.length-3}}return S}function gw(s){var d=s.markedSpans;if(d){for(var b=0;b<d.length;++b)d[b].marker.detachLine(s);s.markedSpans=null}}function yw(s,d){if(d){for(var b=0;b<d.length;++b)d[b].marker.attachLine(s);s.markedSpans=d}}function Eu(s){return s.inclusiveLeft?-1:0}function Tu(s){return s.inclusiveRight?1:0}function ud(s,d){var b=s.lines.length-d.lines.length;if(b!=0)return b;var m=s.find(),S=d.find(),L=je(m.from,S.from)||Eu(s)-Eu(d);if(L)return-L;var O=je(m.to,S.to)||Tu(s)-Tu(d);return O||d.id-s.id}function mw(s,d){var b=Ra&&s.markedSpans,m;if(b)for(var S=void 0,L=0;L<b.length;++L)S=b[L],S.marker.collapsed&&(d?S.from:S.to)==null&&(!m||ud(m,S.marker)<0)&&(m=S.marker);return m}function bw(s){return mw(s,!0)}function Su(s){return mw(s,!1)}function BO(s,d){var b=Ra&&s.markedSpans,m;if(b)for(var S=0;S<b.length;++S){var L=b[S];L.marker.collapsed&&(L.from==null||L.from<d)&&(L.to==null||L.to>d)&&(!m||ud(m,L.marker)<0)&&(m=L.marker)}return m}function ww(s,d,b,m,S){var L=lt(s,d),O=Ra&&L.markedSpans;if(O)for(var H=0;H<O.length;++H){var Y=O[H];if(Y.marker.collapsed){var J=Y.marker.find(0),ce=je(J.from,b)||Eu(Y.marker)-Eu(S),ye=je(J.to,m)||Tu(Y.marker)-Tu(S);if(!(ce>=0&&ye<=0||ce<=0&&ye>=0)&&(ce<=0&&(Y.marker.inclusiveRight&&S.inclusiveLeft?je(J.to,b)>=0:je(J.to,b)>0)||ce>=0&&(Y.marker.inclusiveRight&&S.inclusiveLeft?je(J.from,m)<=0:je(J.from,m)<0)))return!0}}}function Jn(s){for(var d;d=bw(s);)s=d.find(-1,!0).line;return s}function qO(s){for(var d;d=Su(s);)s=d.find(1,!0).line;return s}function zO(s){for(var d,b;d=Su(s);)s=d.find(1,!0).line,(b||(b=[])).push(s);return b}function fd(s,d){var b=lt(s,d),m=Jn(b);return b==m?d:Q(m)}function xw(s,d){if(d>s.lastLine())return d;var b=lt(s,d),m;if(!ni(s,b))return d;for(;m=Su(b);)b=m.find(1,!0).line;return Q(b)+1}function ni(s,d){var b=Ra&&d.markedSpans;if(b){for(var m=void 0,S=0;S<b.length;++S)if(m=b[S],!!m.marker.collapsed){if(m.from==null)return!0;if(!m.marker.widgetNode&&m.from==0&&m.marker.inclusiveLeft&&cd(s,d,m))return!0}}}function cd(s,d,b){if(b.to==null){var m=b.marker.find(1,!0);return cd(s,m.line,Bs(m.line.markedSpans,b.marker))}if(b.marker.inclusiveRight&&b.to==d.text.length)return!0;for(var S=void 0,L=0;L<d.markedSpans.length;++L)if(S=d.markedSpans[L],S.marker.collapsed&&!S.marker.widgetNode&&S.from==b.to&&(S.to==null||S.to!=b.from)&&(S.marker.inclusiveLeft||b.marker.inclusiveRight)&&cd(s,d,S))return!0}function Pa(s){s=Jn(s);for(var d=0,b=s.parent,m=0;m<b.lines.length;++m){var S=b.lines[m];if(S==s)break;d+=S.height}for(var L=b.parent;L;b=L,L=b.parent)for(var O=0;O<L.children.length;++O){var H=L.children[O];if(H==b)break;d+=H.height}return d}function Au(s){if(s.height==0)return 0;for(var d=s.text.length,b,m=s;b=bw(m);){var S=b.find(0,!0);m=S.from.line,d+=S.from.ch-S.to.ch}for(m=s;b=Su(m);){var L=b.find(0,!0);d-=m.text.length-L.from.ch,m=L.to.line,d+=m.text.length-L.to.ch}return d}function dd(s){var d=s.display,b=s.doc;d.maxLine=lt(b,b.first),d.maxLineLength=Au(d.maxLine),d.maxLineChanged=!0,b.iter(function(m){var S=Au(m);S>d.maxLineLength&&(d.maxLineLength=S,d.maxLine=m)})}var Ro=function(s,d,b){this.text=s,yw(this,d),this.height=b?b(this):1};Ro.prototype.lineNo=function(){return Q(this)},Ge(Ro);function GO(s,d,b,m){s.text=d,s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null),s.order!=null&&(s.order=null),gw(s),yw(s,b);var S=m?m(s):1;S!=s.height&&Pt(s,S)}function HO(s){s.parent=null,gw(s)}var UO={},WO={};function Cw(s,d){if(!s||/^\s*$/.test(s))return null;var b=d.addModeClass?WO:UO;return b[s]||(b[s]=s.replace(/\S+/g,"cm-$&"))}function Ew(s,d){var b=k("span",null,null,c?"padding-right: .1px":null),m={pre:k("pre",[b],"CodeMirror-line"),content:b,col:0,pos:0,cm:s,trailingSpace:!1,splitSpaces:s.getOption("lineWrapping")};d.measure={};for(var S=0;S<=(d.rest?d.rest.length:0);S++){var L=S?d.rest[S-1]:d.line,O=void 0;m.pos=0,m.addToken=$O,Lt(s.display.measure)&&(O=Ce(L,s.doc.direction))&&(m.addToken=XO(m.addToken,O)),m.map=[];var H=d!=s.display.externalMeasured&&Q(L);KO(L,m,lw(s,L,H)),L.styleClasses&&(L.styleClasses.bgClass&&(m.bgClass=K(L.styleClasses.bgClass,m.bgClass||"")),L.styleClasses.textClass&&(m.textClass=K(L.styleClasses.textClass,m.textClass||""))),m.map.length==0&&m.map.push(0,0,m.content.appendChild(Mt(s.display.measure))),S==0?(d.measure.map=m.map,d.measure.cache={}):((d.measure.maps||(d.measure.maps=[])).push(m.map),(d.measure.caches||(d.measure.caches=[])).push({}))}if(c){var Y=m.content.lastChild;(/\bcm-tab\b/.test(Y.className)||Y.querySelector&&Y.querySelector(".cm-tab"))&&(m.content.className="cm-tab-wrap-hack")}return He(s,"renderLine",s,d.line,m.pre),m.pre.className&&(m.textClass=K(m.pre.className,m.textClass||"")),m}function VO(s){var d=R("span","•","cm-invalidchar");return d.title="\\u"+s.charCodeAt(0).toString(16),d.setAttribute("aria-label",d.title),d}function $O(s,d,b,m,S,L,O){if(d){var H=s.splitSpaces?YO(d,s.trailingSpace):d,Y=s.cm.state.specialChars,J=!1,ce;if(!Y.test(d))s.col+=d.length,ce=document.createTextNode(H),s.map.push(s.pos,s.pos+d.length,ce),u&&f<9&&(J=!0),s.pos+=d.length;else{ce=document.createDocumentFragment();for(var ye=0;;){Y.lastIndex=ye;var Le=Y.exec(d),Ae=Le?Le.index-ye:d.length-ye;if(Ae){var Ne=document.createTextNode(H.slice(ye,ye+Ae));u&&f<9?ce.appendChild(R("span",[Ne])):ce.appendChild(Ne),s.map.push(s.pos,s.pos+Ae,Ne),s.col+=Ae,s.pos+=Ae}if(!Le)break;ye+=Ae+1;var Fe=void 0;if(Le[0]=="	"){var Ye=s.cm.options.tabSize,Je=Ye-s.col%Ye;Fe=ce.appendChild(R("span",he(Je),"cm-tab")),Fe.setAttribute("role","presentation"),Fe.setAttribute("cm-text","	"),s.col+=Je}else Le[0]=="\r"||Le[0]==`
`?(Fe=ce.appendChild(R("span",Le[0]=="\r"?"␍":"␤","cm-invalidchar")),Fe.setAttribute("cm-text",Le[0]),s.col+=1):(Fe=s.cm.options.specialCharPlaceholder(Le[0]),Fe.setAttribute("cm-text",Le[0]),u&&f<9?ce.appendChild(R("span",[Fe])):ce.appendChild(Fe),s.col+=1);s.map.push(s.pos,s.pos+1,Fe),s.pos++}}if(s.trailingSpace=H.charCodeAt(d.length-1)==32,b||m||S||J||L||O){var it=b||"";m&&(it+=m),S&&(it+=S);var et=R("span",[ce],it,L);if(O)for(var st in O)O.hasOwnProperty(st)&&st!="style"&&st!="class"&&et.setAttribute(st,O[st]);return s.content.appendChild(et)}s.content.appendChild(ce)}}function YO(s,d){if(s.length>1&&!/  /.test(s))return s;for(var b=d,m="",S=0;S<s.length;S++){var L=s.charAt(S);L==" "&&b&&(S==s.length-1||s.charCodeAt(S+1)==32)&&(L=" "),m+=L,b=L==" "}return m}function XO(s,d){return function(b,m,S,L,O,H,Y){S=S?S+" cm-force-border":"cm-force-border";for(var J=b.pos,ce=J+m.length;;){for(var ye=void 0,Le=0;Le<d.length&&(ye=d[Le],!(ye.to>J&&ye.from<=J));Le++);if(ye.to>=ce)return s(b,m,S,L,O,H,Y);s(b,m.slice(0,ye.to-J),S,L,null,H,Y),L=null,m=m.slice(ye.to-J),J=ye.to}}}function Tw(s,d,b,m){var S=!m&&b.widgetNode;S&&s.map.push(s.pos,s.pos+d,S),!m&&s.cm.display.input.needsContentAttribute&&(S||(S=s.content.appendChild(document.createElement("span"))),S.setAttribute("cm-marker",b.id)),S&&(s.cm.display.input.setUneditable(S),s.content.appendChild(S)),s.pos+=d,s.trailingSpace=!1}function KO(s,d,b){var m=s.markedSpans,S=s.text,L=0;if(!m){for(var O=1;O<b.length;O+=2)d.addToken(d,S.slice(L,L=b[O]),Cw(b[O+1],d.cm.options));return}for(var H=S.length,Y=0,J=1,ce="",ye,Le,Ae=0,Ne,Fe,Ye,Je,it;;){if(Ae==Y){Ne=Fe=Ye=Le="",it=null,Je=null,Ae=1/0;for(var et=[],st=void 0,yt=0;yt<m.length;++yt){var vt=m[yt],St=vt.marker;if(St.type=="bookmark"&&vt.from==Y&&St.widgetNode)et.push(St);else if(vt.from<=Y&&(vt.to==null||vt.to>Y||St.collapsed&&vt.to==Y&&vt.from==Y)){if(vt.to!=null&&vt.to!=Y&&Ae>vt.to&&(Ae=vt.to,Fe=""),St.className&&(Ne+=" "+St.className),St.css&&(Le=(Le?Le+";":"")+St.css),St.startStyle&&vt.from==Y&&(Ye+=" "+St.startStyle),St.endStyle&&vt.to==Ae&&(st||(st=[])).push(St.endStyle,vt.to),St.title&&((it||(it={})).title=St.title),St.attributes)for(var Yt in St.attributes)(it||(it={}))[Yt]=St.attributes[Yt];St.collapsed&&(!Je||ud(Je.marker,St)<0)&&(Je=vt)}else vt.from>Y&&Ae>vt.from&&(Ae=vt.from)}if(st)for(var Pr=0;Pr<st.length;Pr+=2)st[Pr+1]==Ae&&(Fe+=" "+st[Pr]);if(!Je||Je.from==Y)for(var fr=0;fr<et.length;++fr)Tw(d,0,et[fr]);if(Je&&(Je.from||0)==Y){if(Tw(d,(Je.to==null?H+1:Je.to)-Y,Je.marker,Je.from==null),Je.to==null)return;Je.to==Y&&(Je=!1)}}if(Y>=H)break;for(var _n=Math.min(H,Ae);;){if(ce){var wn=Y+ce.length;if(!Je){var mr=wn>_n?ce.slice(0,_n-Y):ce;d.addToken(d,mr,ye?ye+Ne:Ne,Ye,Y+mr.length==Ae?Fe:"",Le,it)}if(wn>=_n){ce=ce.slice(_n-Y),Y=_n;break}Y=wn,Ye=""}ce=S.slice(L,L=b[J++]),ye=Cw(b[J++],d.cm.options)}}}function Sw(s,d,b){this.line=d,this.rest=zO(d),this.size=this.rest?Q(de(this.rest))-b+1:1,this.node=this.text=null,this.hidden=ni(s,d)}function Lu(s,d,b){for(var m=[],S,L=d;L<b;L=S){var O=new Sw(s.doc,lt(s.doc,L),L);S=L+O.size,m.push(O)}return m}var Po=null;function jO(s){Po?Po.ops.push(s):s.ownsGroup=Po={ops:[s],delayedCallbacks:[]}}function ZO(s){var d=s.delayedCallbacks,b=0;do{for(;b<d.length;b++)d[b].call(null);for(var m=0;m<s.ops.length;m++){var S=s.ops[m];if(S.cursorActivityHandlers)for(;S.cursorActivityCalled<S.cursorActivityHandlers.length;)S.cursorActivityHandlers[S.cursorActivityCalled++].call(null,S.cm)}}while(b<d.length)}function QO(s,d){var b=s.ownsGroup;if(b)try{ZO(b)}finally{Po=null,d(b)}}var qs=null;function _r(s,d){var b=ke(s,d);if(b.length){var m=Array.prototype.slice.call(arguments,2),S;Po?S=Po.delayedCallbacks:qs?S=qs:(S=qs=[],setTimeout(JO,0));for(var L=function(H){S.push(function(){return b[H].apply(null,m)})},O=0;O<b.length;++O)L(O)}}function JO(){var s=qs;qs=null;for(var d=0;d<s.length;++d)s[d]()}function Aw(s,d,b,m){for(var S=0;S<d.changes.length;S++){var L=d.changes[S];L=="text"?tI(s,d):L=="gutter"?Dw(s,d,b,m):L=="class"?hd(s,d):L=="widget"&&rI(s,d,m)}d.changes=null}function zs(s){return s.node==s.text&&(s.node=R("div",null,null,"position: relative"),s.text.parentNode&&s.text.parentNode.replaceChild(s.node,s.text),s.node.appendChild(s.text),u&&f<8&&(s.node.style.zIndex=2)),s.node}function eI(s,d){var b=d.bgClass?d.bgClass+" "+(d.line.bgClass||""):d.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),d.background)b?d.background.className=b:(d.background.parentNode.removeChild(d.background),d.background=null);else if(b){var m=zs(d);d.background=m.insertBefore(R("div",null,b),m.firstChild),s.display.input.setUneditable(d.background)}}function Lw(s,d){var b=s.display.externalMeasured;return b&&b.line==d.line?(s.display.externalMeasured=null,d.measure=b.measure,b.built):Ew(s,d)}function tI(s,d){var b=d.text.className,m=Lw(s,d);d.text==d.node&&(d.node=m.pre),d.text.parentNode.replaceChild(m.pre,d.text),d.text=m.pre,m.bgClass!=d.bgClass||m.textClass!=d.textClass?(d.bgClass=m.bgClass,d.textClass=m.textClass,hd(s,d)):b&&(d.text.className=b)}function hd(s,d){eI(s,d),d.line.wrapClass?zs(d).className=d.line.wrapClass:d.node!=d.text&&(d.node.className="");var b=d.textClass?d.textClass+" "+(d.line.textClass||""):d.line.textClass;d.text.className=b||""}function Dw(s,d,b,m){if(d.gutter&&(d.node.removeChild(d.gutter),d.gutter=null),d.gutterBackground&&(d.node.removeChild(d.gutterBackground),d.gutterBackground=null),d.line.gutterClass){var S=zs(d);d.gutterBackground=R("div",null,"CodeMirror-gutter-background "+d.line.gutterClass,"left: "+(s.options.fixedGutter?m.fixedPos:-m.gutterTotalWidth)+"px; width: "+m.gutterTotalWidth+"px"),s.display.input.setUneditable(d.gutterBackground),S.insertBefore(d.gutterBackground,d.text)}var L=d.line.gutterMarkers;if(s.options.lineNumbers||L){var O=zs(d),H=d.gutter=R("div",null,"CodeMirror-gutter-wrapper","left: "+(s.options.fixedGutter?m.fixedPos:-m.gutterTotalWidth)+"px");if(H.setAttribute("aria-hidden","true"),s.display.input.setUneditable(H),O.insertBefore(H,d.text),d.line.gutterClass&&(H.className+=" "+d.line.gutterClass),s.options.lineNumbers&&(!L||!L["CodeMirror-linenumbers"])&&(d.lineNumber=H.appendChild(R("div",ze(s.options,b),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+m.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+s.display.lineNumInnerWidth+"px"))),L)for(var Y=0;Y<s.display.gutterSpecs.length;++Y){var J=s.display.gutterSpecs[Y].className,ce=L.hasOwnProperty(J)&&L[J];ce&&H.appendChild(R("div",[ce],"CodeMirror-gutter-elt","left: "+m.gutterLeft[J]+"px; width: "+m.gutterWidth[J]+"px"))}}}function rI(s,d,b){d.alignable&&(d.alignable=null);for(var m=G("CodeMirror-linewidget"),S=d.node.firstChild,L=void 0;S;S=L)L=S.nextSibling,m.test(S.className)&&d.node.removeChild(S);_w(s,d,b)}function nI(s,d,b,m){var S=Lw(s,d);return d.text=d.node=S.pre,S.bgClass&&(d.bgClass=S.bgClass),S.textClass&&(d.textClass=S.textClass),hd(s,d),Dw(s,d,b,m),_w(s,d,m),d.node}function _w(s,d,b){if(Mw(s,d.line,d,b,!0),d.rest)for(var m=0;m<d.rest.length;m++)Mw(s,d.rest[m],d,b,!1)}function Mw(s,d,b,m,S){if(d.widgets)for(var L=zs(b),O=0,H=d.widgets;O<H.length;++O){var Y=H[O],J=R("div",[Y.node],"CodeMirror-linewidget"+(Y.className?" "+Y.className:""));Y.handleMouseEvents||J.setAttribute("cm-ignore-events","true"),aI(Y,J,b,m),s.display.input.setUneditable(J),S&&Y.above?L.insertBefore(J,b.gutter||b.text):L.appendChild(J),_r(Y,"redraw")}}function aI(s,d,b,m){if(s.noHScroll){(b.alignable||(b.alignable=[])).push(d);var S=m.wrapperWidth;d.style.left=m.fixedPos+"px",s.coverGutter||(S-=m.gutterTotalWidth,d.style.paddingLeft=m.gutterTotalWidth+"px"),d.style.width=S+"px"}s.coverGutter&&(d.style.zIndex=5,d.style.position="relative",s.noHScroll||(d.style.marginLeft=-m.gutterTotalWidth+"px"))}function Gs(s){if(s.height!=null)return s.height;var d=s.doc.cm;if(!d)return 0;if(!q(document.body,s.node)){var b="position: relative;";s.coverGutter&&(b+="margin-left: -"+d.display.gutters.offsetWidth+"px;"),s.noHScroll&&(b+="width: "+d.display.wrapper.clientWidth+"px;"),M(d.display.measure,R("div",[s.node],null,b))}return s.height=s.node.parentNode.offsetHeight}function Na(s,d){for(var b=Et(d);b!=s.wrapper;b=b.parentNode)if(!b||b.nodeType==1&&b.getAttribute("cm-ignore-events")=="true"||b.parentNode==s.sizer&&b!=s.mover)return!0}function Du(s){return s.lineSpace.offsetTop}function vd(s){return s.mover.offsetHeight-s.lineSpace.offsetHeight}function Rw(s){if(s.cachedPaddingH)return s.cachedPaddingH;var d=M(s.measure,R("pre","x","CodeMirror-line-like")),b=window.getComputedStyle?window.getComputedStyle(d):d.currentStyle,m={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};return!isNaN(m.left)&&!isNaN(m.right)&&(s.cachedPaddingH=m),m}function da(s){return $-s.display.nativeBarWidth}function Hi(s){return s.display.scroller.clientWidth-da(s)-s.display.barWidth}function pd(s){return s.display.scroller.clientHeight-da(s)-s.display.barHeight}function iI(s,d,b){var m=s.options.lineWrapping,S=m&&Hi(s);if(!d.measure.heights||m&&d.measure.width!=S){var L=d.measure.heights=[];if(m){d.measure.width=S;for(var O=d.text.firstChild.getClientRects(),H=0;H<O.length-1;H++){var Y=O[H],J=O[H+1];Math.abs(Y.bottom-J.bottom)>2&&L.push((Y.bottom+J.top)/2-b.top)}}L.push(b.bottom-b.top)}}function Pw(s,d,b){if(s.line==d)return{map:s.measure.map,cache:s.measure.cache};if(s.rest){for(var m=0;m<s.rest.length;m++)if(s.rest[m]==d)return{map:s.measure.maps[m],cache:s.measure.caches[m]};for(var S=0;S<s.rest.length;S++)if(Q(s.rest[S])>b)return{map:s.measure.maps[S],cache:s.measure.caches[S],before:!0}}}function oI(s,d){d=Jn(d);var b=Q(d),m=s.display.externalMeasured=new Sw(s.doc,d,b);m.lineN=b;var S=m.built=Ew(s,m);return m.text=S.pre,M(s.display.lineMeasure,S.pre),m}function Nw(s,d,b,m){return ha(s,No(s,d),b,m)}function gd(s,d){if(d>=s.display.viewFrom&&d<s.display.viewTo)return s.display.view[Vi(s,d)];var b=s.display.externalMeasured;if(b&&d>=b.lineN&&d<b.lineN+b.size)return b}function No(s,d){var b=Q(d),m=gd(s,b);m&&!m.text?m=null:m&&m.changes&&(Aw(s,m,b,xd(s)),s.curOp.forceUpdate=!0),m||(m=oI(s,d));var S=Pw(m,d,b);return{line:d,view:m,rect:null,map:S.map,cache:S.cache,before:S.before,hasHeights:!1}}function ha(s,d,b,m,S){d.before&&(b=-1);var L=b+(m||""),O;return d.cache.hasOwnProperty(L)?O=d.cache[L]:(d.rect||(d.rect=d.view.text.getBoundingClientRect()),d.hasHeights||(iI(s,d.view,d.rect),d.hasHeights=!0),O=lI(s,d,b,m),O.bogus||(d.cache[L]=O)),{left:O.left,right:O.right,top:S?O.rtop:O.top,bottom:S?O.rbottom:O.bottom}}var kw={left:0,right:0,top:0,bottom:0};function Ow(s,d,b){for(var m,S,L,O,H,Y,J=0;J<s.length;J+=3)if(H=s[J],Y=s[J+1],d<H?(S=0,L=1,O="left"):d<Y?(S=d-H,L=S+1):(J==s.length-3||d==Y&&s[J+3]>d)&&(L=Y-H,S=L-1,d>=Y&&(O="right")),S!=null){if(m=s[J+2],H==Y&&b==(m.insertLeft?"left":"right")&&(O=b),b=="left"&&S==0)for(;J&&s[J-2]==s[J-3]&&s[J-1].insertLeft;)m=s[(J-=3)+2],O="left";if(b=="right"&&S==Y-H)for(;J<s.length-3&&s[J+3]==s[J+4]&&!s[J+5].insertLeft;)m=s[(J+=3)+2],O="right";break}return{node:m,start:S,end:L,collapse:O,coverStart:H,coverEnd:Y}}function sI(s,d){var b=kw;if(d=="left")for(var m=0;m<s.length&&(b=s[m]).left==b.right;m++);else for(var S=s.length-1;S>=0&&(b=s[S]).left==b.right;S--);return b}function lI(s,d,b,m){var S=Ow(d.map,b,m),L=S.node,O=S.start,H=S.end,Y=S.collapse,J;if(L.nodeType==3){for(var ce=0;ce<4;ce++){for(;O&&Xe(d.line.text.charAt(S.coverStart+O));)--O;for(;S.coverStart+H<S.coverEnd&&Xe(d.line.text.charAt(S.coverStart+H));)++H;if(u&&f<9&&O==0&&H==S.coverEnd-S.coverStart?J=L.parentNode.getBoundingClientRect():J=sI(I(L,O,H).getClientRects(),m),J.left||J.right||O==0)break;H=O,O=O-1,Y="right"}u&&f<11&&(J=uI(s.display.measure,J))}else{O>0&&(Y=m="right");var ye;s.options.lineWrapping&&(ye=L.getClientRects()).length>1?J=ye[m=="right"?ye.length-1:0]:J=L.getBoundingClientRect()}if(u&&f<9&&!O&&(!J||!J.left&&!J.right)){var Le=L.parentNode.getClientRects()[0];Le?J={left:Le.left,right:Le.left+Oo(s.display),top:Le.top,bottom:Le.bottom}:J=kw}for(var Ae=J.top-d.rect.top,Ne=J.bottom-d.rect.top,Fe=(Ae+Ne)/2,Ye=d.view.measure.heights,Je=0;Je<Ye.length-1&&!(Fe<Ye[Je]);Je++);var it=Je?Ye[Je-1]:0,et=Ye[Je],st={left:(Y=="right"?J.right:J.left)-d.rect.left,right:(Y=="left"?J.left:J.right)-d.rect.left,top:it,bottom:et};return!J.left&&!J.right&&(st.bogus=!0),s.options.singleCursorHeightPerLine||(st.rtop=Ae,st.rbottom=Ne),st}function uI(s,d){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Kt(s))return d;var b=screen.logicalXDPI/screen.deviceXDPI,m=screen.logicalYDPI/screen.deviceYDPI;return{left:d.left*b,right:d.right*b,top:d.top*m,bottom:d.bottom*m}}function Iw(s){if(s.measure&&(s.measure.cache={},s.measure.heights=null,s.rest))for(var d=0;d<s.rest.length;d++)s.measure.caches[d]={}}function Fw(s){s.display.externalMeasure=null,z(s.display.lineMeasure);for(var d=0;d<s.display.view.length;d++)Iw(s.display.view[d])}function Hs(s){Fw(s),s.display.cachedCharWidth=s.display.cachedTextHeight=s.display.cachedPaddingH=null,s.options.lineWrapping||(s.display.maxLineChanged=!0),s.display.lineNumChars=null}function Bw(s){return g&&w?-(s.body.getBoundingClientRect().left-parseInt(getComputedStyle(s.body).marginLeft)):s.defaultView.pageXOffset||(s.documentElement||s.body).scrollLeft}function qw(s){return g&&w?-(s.body.getBoundingClientRect().top-parseInt(getComputedStyle(s.body).marginTop)):s.defaultView.pageYOffset||(s.documentElement||s.body).scrollTop}function yd(s){var d=Jn(s),b=d.widgets,m=0;if(b)for(var S=0;S<b.length;++S)b[S].above&&(m+=Gs(b[S]));return m}function _u(s,d,b,m,S){if(!S){var L=yd(d);b.top+=L,b.bottom+=L}if(m=="line")return b;m||(m="local");var O=Pa(d);if(m=="local"?O+=Du(s.display):O-=s.display.viewOffset,m=="page"||m=="window"){var H=s.display.lineSpace.getBoundingClientRect();O+=H.top+(m=="window"?0:qw(Z(s)));var Y=H.left+(m=="window"?0:Bw(Z(s)));b.left+=Y,b.right+=Y}return b.top+=O,b.bottom+=O,b}function zw(s,d,b){if(b=="div")return d;var m=d.left,S=d.top;if(b=="page")m-=Bw(Z(s)),S-=qw(Z(s));else if(b=="local"||!b){var L=s.display.sizer.getBoundingClientRect();m+=L.left,S+=L.top}var O=s.display.lineSpace.getBoundingClientRect();return{left:m-O.left,top:S-O.top}}function Mu(s,d,b,m,S){return m||(m=lt(s.doc,d.line)),_u(s,m,Nw(s,m,d.ch,S),b)}function ea(s,d,b,m,S,L){m=m||lt(s.doc,d.line),S||(S=No(s,m));function O(Ne,Fe){var Ye=ha(s,S,Ne,Fe?"right":"left",L);return Fe?Ye.left=Ye.right:Ye.right=Ye.left,_u(s,m,Ye,b)}var H=Ce(m,s.doc.direction),Y=d.ch,J=d.sticky;if(Y>=m.text.length?(Y=m.text.length,J="before"):Y<=0&&(Y=0,J="after"),!H)return O(J=="before"?Y-1:Y,J=="before");function ce(Ne,Fe,Ye){var Je=H[Fe],it=Je.level==1;return O(Ye?Ne-1:Ne,it!=Ye)}var ye=we(H,Y,J),Le=pe,Ae=ce(Y,ye,J=="before");return Le!=null&&(Ae.other=ce(Y,Le,J!="before")),Ae}function Gw(s,d){var b=0;d=xt(s.doc,d),s.options.lineWrapping||(b=Oo(s.display)*d.ch);var m=lt(s.doc,d.line),S=Pa(m)+Du(s.display);return{left:b,right:b,top:S,bottom:S+m.height}}function md(s,d,b,m,S){var L=Me(s,d,b);return L.xRel=S,m&&(L.outside=m),L}function bd(s,d,b){var m=s.doc;if(b+=s.display.viewOffset,b<0)return md(m.first,0,null,-1,-1);var S=fe(m,b),L=m.first+m.size-1;if(S>L)return md(m.first+m.size-1,lt(m,L).text.length,null,1,1);d<0&&(d=0);for(var O=lt(m,S);;){var H=fI(s,O,S,d,b),Y=BO(O,H.ch+(H.xRel>0||H.outside>0?1:0));if(!Y)return H;var J=Y.find(1);if(J.line==S)return J;O=lt(m,S=J.line)}}function Hw(s,d,b,m){m-=yd(d);var S=d.text.length,L=ve(function(O){return ha(s,b,O-1).bottom<=m},S,0);return S=ve(function(O){return ha(s,b,O).top>m},L,S),{begin:L,end:S}}function Uw(s,d,b,m){b||(b=No(s,d));var S=_u(s,d,ha(s,b,m),"line").top;return Hw(s,d,b,S)}function wd(s,d,b,m){return s.bottom<=b?!1:s.top>b?!0:(m?s.left:s.right)>d}function fI(s,d,b,m,S){S-=Pa(d);var L=No(s,d),O=yd(d),H=0,Y=d.text.length,J=!0,ce=Ce(d,s.doc.direction);if(ce){var ye=(s.options.lineWrapping?dI:cI)(s,d,b,L,ce,m,S);J=ye.level!=1,H=J?ye.from:ye.to-1,Y=J?ye.to:ye.from-1}var Le=null,Ae=null,Ne=ve(function(yt){var vt=ha(s,L,yt);return vt.top+=O,vt.bottom+=O,wd(vt,m,S,!1)?(vt.top<=S&&vt.left<=m&&(Le=yt,Ae=vt),!0):!1},H,Y),Fe,Ye,Je=!1;if(Ae){var it=m-Ae.left<Ae.right-m,et=it==J;Ne=Le+(et?0:1),Ye=et?"after":"before",Fe=it?Ae.left:Ae.right}else{!J&&(Ne==Y||Ne==H)&&Ne++,Ye=Ne==0?"after":Ne==d.text.length?"before":ha(s,L,Ne-(J?1:0)).bottom+O<=S==J?"after":"before";var st=ea(s,Me(b,Ne,Ye),"line",d,L);Fe=st.left,Je=S<st.top?-1:S>=st.bottom?1:0}return Ne=We(d.text,Ne,1),md(b,Ne,Ye,Je,m-Fe)}function cI(s,d,b,m,S,L,O){var H=ve(function(ye){var Le=S[ye],Ae=Le.level!=1;return wd(ea(s,Me(b,Ae?Le.to:Le.from,Ae?"before":"after"),"line",d,m),L,O,!0)},0,S.length-1),Y=S[H];if(H>0){var J=Y.level!=1,ce=ea(s,Me(b,J?Y.from:Y.to,J?"after":"before"),"line",d,m);wd(ce,L,O,!0)&&ce.top>O&&(Y=S[H-1])}return Y}function dI(s,d,b,m,S,L,O){var H=Hw(s,d,m,O),Y=H.begin,J=H.end;/\s/.test(d.text.charAt(J-1))&&J--;for(var ce=null,ye=null,Le=0;Le<S.length;Le++){var Ae=S[Le];if(!(Ae.from>=J||Ae.to<=Y)){var Ne=Ae.level!=1,Fe=ha(s,m,Ne?Math.min(J,Ae.to)-1:Math.max(Y,Ae.from)).right,Ye=Fe<L?L-Fe+1e9:Fe-L;(!ce||ye>Ye)&&(ce=Ae,ye=Ye)}}return ce||(ce=S[S.length-1]),ce.from<Y&&(ce={from:Y,to:ce.to,level:ce.level}),ce.to>J&&(ce={from:ce.from,to:J,level:ce.level}),ce}var Ui;function ko(s){if(s.cachedTextHeight!=null)return s.cachedTextHeight;if(Ui==null){Ui=R("pre",null,"CodeMirror-line-like");for(var d=0;d<49;++d)Ui.appendChild(document.createTextNode("x")),Ui.appendChild(R("br"));Ui.appendChild(document.createTextNode("x"))}M(s.measure,Ui);var b=Ui.offsetHeight/50;return b>3&&(s.cachedTextHeight=b),z(s.measure),b||1}function Oo(s){if(s.cachedCharWidth!=null)return s.cachedCharWidth;var d=R("span","xxxxxxxxxx"),b=R("pre",[d],"CodeMirror-line-like");M(s.measure,b);var m=d.getBoundingClientRect(),S=(m.right-m.left)/10;return S>2&&(s.cachedCharWidth=S),S||10}function xd(s){for(var d=s.display,b={},m={},S=d.gutters.clientLeft,L=d.gutters.firstChild,O=0;L;L=L.nextSibling,++O){var H=s.display.gutterSpecs[O].className;b[H]=L.offsetLeft+L.clientLeft+S,m[H]=L.clientWidth}return{fixedPos:Cd(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:b,gutterWidth:m,wrapperWidth:d.wrapper.clientWidth}}function Cd(s){return s.scroller.getBoundingClientRect().left-s.sizer.getBoundingClientRect().left}function Ww(s){var d=ko(s.display),b=s.options.lineWrapping,m=b&&Math.max(5,s.display.scroller.clientWidth/Oo(s.display)-3);return function(S){if(ni(s.doc,S))return 0;var L=0;if(S.widgets)for(var O=0;O<S.widgets.length;O++)S.widgets[O].height&&(L+=S.widgets[O].height);return b?L+(Math.ceil(S.text.length/m)||1)*d:L+d}}function Ed(s){var d=s.doc,b=Ww(s);d.iter(function(m){var S=b(m);S!=m.height&&Pt(m,S)})}function Wi(s,d,b,m){var S=s.display;if(!b&&Et(d).getAttribute("cm-not-content")=="true")return null;var L,O,H=S.lineSpace.getBoundingClientRect();try{L=d.clientX-H.left,O=d.clientY-H.top}catch{return null}var Y=bd(s,L,O),J;if(m&&Y.xRel>0&&(J=lt(s.doc,Y.line).text).length==Y.ch){var ce=te(J,J.length,s.options.tabSize)-J.length;Y=Me(Y.line,Math.max(0,Math.round((L-Rw(s.display).left)/Oo(s.display))-ce))}return Y}function Vi(s,d){if(d>=s.display.viewTo||(d-=s.display.viewFrom,d<0))return null;for(var b=s.display.view,m=0;m<b.length;m++)if(d-=b[m].size,d<0)return m}function mn(s,d,b,m){d==null&&(d=s.doc.first),b==null&&(b=s.doc.first+s.doc.size),m||(m=0);var S=s.display;if(m&&b<S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>d)&&(S.updateLineNumbers=d),s.curOp.viewChanged=!0,d>=S.viewTo)Ra&&fd(s.doc,d)<S.viewTo&&ii(s);else if(b<=S.viewFrom)Ra&&xw(s.doc,b+m)>S.viewFrom?ii(s):(S.viewFrom+=m,S.viewTo+=m);else if(d<=S.viewFrom&&b>=S.viewTo)ii(s);else if(d<=S.viewFrom){var L=Ru(s,b,b+m,1);L?(S.view=S.view.slice(L.index),S.viewFrom=L.lineN,S.viewTo+=m):ii(s)}else if(b>=S.viewTo){var O=Ru(s,d,d,-1);O?(S.view=S.view.slice(0,O.index),S.viewTo=O.lineN):ii(s)}else{var H=Ru(s,d,d,-1),Y=Ru(s,b,b+m,1);H&&Y?(S.view=S.view.slice(0,H.index).concat(Lu(s,H.lineN,Y.lineN)).concat(S.view.slice(Y.index)),S.viewTo+=m):ii(s)}var J=S.externalMeasured;J&&(b<J.lineN?J.lineN+=m:d<J.lineN+J.size&&(S.externalMeasured=null))}function ai(s,d,b){s.curOp.viewChanged=!0;var m=s.display,S=s.display.externalMeasured;if(S&&d>=S.lineN&&d<S.lineN+S.size&&(m.externalMeasured=null),!(d<m.viewFrom||d>=m.viewTo)){var L=m.view[Vi(s,d)];if(L.node!=null){var O=L.changes||(L.changes=[]);le(O,b)==-1&&O.push(b)}}}function ii(s){s.display.viewFrom=s.display.viewTo=s.doc.first,s.display.view=[],s.display.viewOffset=0}function Ru(s,d,b,m){var S=Vi(s,d),L,O=s.display.view;if(!Ra||b==s.doc.first+s.doc.size)return{index:S,lineN:b};for(var H=s.display.viewFrom,Y=0;Y<S;Y++)H+=O[Y].size;if(H!=d){if(m>0){if(S==O.length-1)return null;L=H+O[S].size-d,S++}else L=H-d;d+=L,b+=L}for(;fd(s.doc,b)!=b;){if(S==(m<0?0:O.length-1))return null;b+=m*O[S-(m<0?1:0)].size,S+=m}return{index:S,lineN:b}}function hI(s,d,b){var m=s.display,S=m.view;S.length==0||d>=m.viewTo||b<=m.viewFrom?(m.view=Lu(s,d,b),m.viewFrom=d):(m.viewFrom>d?m.view=Lu(s,d,m.viewFrom).concat(m.view):m.viewFrom<d&&(m.view=m.view.slice(Vi(s,d))),m.viewFrom=d,m.viewTo<b?m.view=m.view.concat(Lu(s,m.viewTo,b)):m.viewTo>b&&(m.view=m.view.slice(0,Vi(s,b)))),m.viewTo=b}function Vw(s){for(var d=s.display.view,b=0,m=0;m<d.length;m++){var S=d[m];!S.hidden&&(!S.node||S.changes)&&++b}return b}function Us(s){s.display.input.showSelection(s.display.input.prepareSelection())}function $w(s,d){d===void 0&&(d=!0);var b=s.doc,m={},S=m.cursors=document.createDocumentFragment(),L=m.selection=document.createDocumentFragment(),O=s.options.$customCursor;O&&(d=!0);for(var H=0;H<b.sel.ranges.length;H++)if(!(!d&&H==b.sel.primIndex)){var Y=b.sel.ranges[H];if(!(Y.from().line>=s.display.viewTo||Y.to().line<s.display.viewFrom)){var J=Y.empty();if(O){var ce=O(s,Y);ce&&Td(s,ce,S)}else(J||s.options.showCursorWhenSelecting)&&Td(s,Y.head,S);J||vI(s,Y,L)}}return m}function Td(s,d,b){var m=ea(s,d,"div",null,null,!s.options.singleCursorHeightPerLine),S=b.appendChild(R("div"," ","CodeMirror-cursor"));if(S.style.left=m.left+"px",S.style.top=m.top+"px",S.style.height=Math.max(0,m.bottom-m.top)*s.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(s.getWrapperElement().className)){var L=Mu(s,d,"div",null,null),O=L.right-L.left;S.style.width=(O>0?O:s.defaultCharWidth())+"px"}if(m.other){var H=b.appendChild(R("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));H.style.display="",H.style.left=m.other.left+"px",H.style.top=m.other.top+"px",H.style.height=(m.other.bottom-m.other.top)*.85+"px"}}function Pu(s,d){return s.top-d.top||s.left-d.left}function vI(s,d,b){var m=s.display,S=s.doc,L=document.createDocumentFragment(),O=Rw(s.display),H=O.left,Y=Math.max(m.sizerWidth,Hi(s)-m.sizer.offsetLeft)-O.right,J=S.direction=="ltr";function ce(et,st,yt,vt){st<0&&(st=0),st=Math.round(st),vt=Math.round(vt),L.appendChild(R("div",null,"CodeMirror-selected","position: absolute; left: "+et+`px;
                             top: `+st+"px; width: "+(yt??Y-et)+`px;
                             height: `+(vt-st)+"px"))}function ye(et,st,yt){var vt=lt(S,et),St=vt.text.length,Yt,Pr;function fr(mr,xn){return Mu(s,Me(et,mr),"div",vt,xn)}function _n(mr,xn,Hr){var Tr=Uw(s,vt,null,mr),br=xn=="ltr"==(Hr=="after")?"left":"right",hr=Hr=="after"?Tr.begin:Tr.end-(/\s/.test(vt.text.charAt(Tr.end-1))?2:1);return fr(hr,br)[br]}var wn=Ce(vt,S.direction);return j(wn,st||0,yt??St,function(mr,xn,Hr,Tr){var br=Hr=="ltr",hr=fr(mr,br?"left":"right"),Cn=fr(xn-1,br?"right":"left"),Xo=st==null&&mr==0,ci=yt==null&&xn==St,Zr=Tr==0,va=!wn||Tr==wn.length-1;if(Cn.top-hr.top<=3){var Nr=(J?Xo:ci)&&Zr,Zd=(J?ci:Xo)&&va,Ia=Nr?H:(br?hr:Cn).left,ji=Zd?Y:(br?Cn:hr).right;ce(Ia,hr.top,ji-Ia,hr.bottom)}else{var Zi,un,Ko,Qd;br?(Zi=J&&Xo&&Zr?H:hr.left,un=J?Y:_n(mr,Hr,"before"),Ko=J?H:_n(xn,Hr,"after"),Qd=J&&ci&&va?Y:Cn.right):(Zi=J?_n(mr,Hr,"before"):H,un=!J&&Xo&&Zr?Y:hr.right,Ko=!J&&ci&&va?H:Cn.left,Qd=J?_n(xn,Hr,"after"):Y),ce(Zi,hr.top,un-Zi,hr.bottom),hr.bottom<Cn.top&&ce(H,hr.bottom,null,Cn.top),ce(Ko,Cn.top,Qd-Ko,Cn.bottom)}(!Yt||Pu(hr,Yt)<0)&&(Yt=hr),Pu(Cn,Yt)<0&&(Yt=Cn),(!Pr||Pu(hr,Pr)<0)&&(Pr=hr),Pu(Cn,Pr)<0&&(Pr=Cn)}),{start:Yt,end:Pr}}var Le=d.from(),Ae=d.to();if(Le.line==Ae.line)ye(Le.line,Le.ch,Ae.ch);else{var Ne=lt(S,Le.line),Fe=lt(S,Ae.line),Ye=Jn(Ne)==Jn(Fe),Je=ye(Le.line,Le.ch,Ye?Ne.text.length+1:null).end,it=ye(Ae.line,Ye?0:null,Ae.ch).start;Ye&&(Je.top<it.top-2?(ce(Je.right,Je.top,null,Je.bottom),ce(H,it.top,it.left,it.bottom)):ce(Je.right,Je.top,it.left-Je.right,Je.bottom)),Je.bottom<it.top&&ce(H,Je.bottom,null,it.top)}b.appendChild(L)}function Sd(s){if(s.state.focused){var d=s.display;clearInterval(d.blinker);var b=!0;d.cursorDiv.style.visibility="",s.options.cursorBlinkRate>0?d.blinker=setInterval(function(){s.hasFocus()||Io(s),d.cursorDiv.style.visibility=(b=!b)?"":"hidden"},s.options.cursorBlinkRate):s.options.cursorBlinkRate<0&&(d.cursorDiv.style.visibility="hidden")}}function Yw(s){s.hasFocus()||(s.display.input.focus(),s.state.focused||Ld(s))}function Ad(s){s.state.delayingBlurEvent=!0,setTimeout(function(){s.state.delayingBlurEvent&&(s.state.delayingBlurEvent=!1,s.state.focused&&Io(s))},100)}function Ld(s,d){s.state.delayingBlurEvent&&!s.state.draggingText&&(s.state.delayingBlurEvent=!1),s.options.readOnly!="nocursor"&&(s.state.focused||(He(s,"focus",s,d),s.state.focused=!0,re(s.display.wrapper,"CodeMirror-focused"),!s.curOp&&s.display.selForContextMenu!=s.doc.sel&&(s.display.input.reset(),c&&setTimeout(function(){return s.display.input.reset(!0)},20)),s.display.input.receivedFocus()),Sd(s))}function Io(s,d){s.state.delayingBlurEvent||(s.state.focused&&(He(s,"blur",s,d),s.state.focused=!1,F(s.display.wrapper,"CodeMirror-focused")),clearInterval(s.display.blinker),setTimeout(function(){s.state.focused||(s.display.shift=!1)},150))}function Nu(s){for(var d=s.display,b=d.lineDiv.offsetTop,m=Math.max(0,d.scroller.getBoundingClientRect().top),S=d.lineDiv.getBoundingClientRect().top,L=0,O=0;O<d.view.length;O++){var H=d.view[O],Y=s.options.lineWrapping,J=void 0,ce=0;if(!H.hidden){if(S+=H.line.height,u&&f<8){var ye=H.node.offsetTop+H.node.offsetHeight;J=ye-b,b=ye}else{var Le=H.node.getBoundingClientRect();J=Le.bottom-Le.top,!Y&&H.text.firstChild&&(ce=H.text.firstChild.getBoundingClientRect().right-Le.left-1)}var Ae=H.line.height-J;if((Ae>.005||Ae<-.005)&&(S<m&&(L-=Ae),Pt(H.line,J),Xw(H.line),H.rest))for(var Ne=0;Ne<H.rest.length;Ne++)Xw(H.rest[Ne]);if(ce>s.display.sizerWidth){var Fe=Math.ceil(ce/Oo(s.display));Fe>s.display.maxLineLength&&(s.display.maxLineLength=Fe,s.display.maxLine=H.line,s.display.maxLineChanged=!0)}}}Math.abs(L)>2&&(d.scroller.scrollTop+=L)}function Xw(s){if(s.widgets)for(var d=0;d<s.widgets.length;++d){var b=s.widgets[d],m=b.node.parentNode;m&&(b.height=m.offsetHeight)}}function ku(s,d,b){var m=b&&b.top!=null?Math.max(0,b.top):s.scroller.scrollTop;m=Math.floor(m-Du(s));var S=b&&b.bottom!=null?b.bottom:m+s.wrapper.clientHeight,L=fe(d,m),O=fe(d,S);if(b&&b.ensure){var H=b.ensure.from.line,Y=b.ensure.to.line;H<L?(L=H,O=fe(d,Pa(lt(d,H))+s.wrapper.clientHeight)):Math.min(Y,d.lastLine())>=O&&(L=fe(d,Pa(lt(d,Y))-s.wrapper.clientHeight),O=Y)}return{from:L,to:Math.max(O,L+1)}}function pI(s,d){if(!Ue(s,"scrollCursorIntoView")){var b=s.display,m=b.sizer.getBoundingClientRect(),S=null,L=b.wrapper.ownerDocument;if(d.top+m.top<0?S=!0:d.bottom+m.top>(L.defaultView.innerHeight||L.documentElement.clientHeight)&&(S=!1),S!=null&&!v){var O=R("div","​",null,`position: absolute;
                         top: `+(d.top-b.viewOffset-Du(s.display))+`px;
                         height: `+(d.bottom-d.top+da(s)+b.barHeight)+`px;
                         left: `+d.left+"px; width: "+Math.max(2,d.right-d.left)+"px;");s.display.lineSpace.appendChild(O),O.scrollIntoView(S),s.display.lineSpace.removeChild(O)}}}function gI(s,d,b,m){m==null&&(m=0);var S;!s.options.lineWrapping&&d==b&&(b=d.sticky=="before"?Me(d.line,d.ch+1,"before"):d,d=d.ch?Me(d.line,d.sticky=="before"?d.ch-1:d.ch,"after"):d);for(var L=0;L<5;L++){var O=!1,H=ea(s,d),Y=!b||b==d?H:ea(s,b);S={left:Math.min(H.left,Y.left),top:Math.min(H.top,Y.top)-m,right:Math.max(H.left,Y.left),bottom:Math.max(H.bottom,Y.bottom)+m};var J=Dd(s,S),ce=s.doc.scrollTop,ye=s.doc.scrollLeft;if(J.scrollTop!=null&&(Vs(s,J.scrollTop),Math.abs(s.doc.scrollTop-ce)>1&&(O=!0)),J.scrollLeft!=null&&($i(s,J.scrollLeft),Math.abs(s.doc.scrollLeft-ye)>1&&(O=!0)),!O)break}return S}function yI(s,d){var b=Dd(s,d);b.scrollTop!=null&&Vs(s,b.scrollTop),b.scrollLeft!=null&&$i(s,b.scrollLeft)}function Dd(s,d){var b=s.display,m=ko(s.display);d.top<0&&(d.top=0);var S=s.curOp&&s.curOp.scrollTop!=null?s.curOp.scrollTop:b.scroller.scrollTop,L=pd(s),O={};d.bottom-d.top>L&&(d.bottom=d.top+L);var H=s.doc.height+vd(b),Y=d.top<m,J=d.bottom>H-m;if(d.top<S)O.scrollTop=Y?0:d.top;else if(d.bottom>S+L){var ce=Math.min(d.top,(J?H:d.bottom)-L);ce!=S&&(O.scrollTop=ce)}var ye=s.options.fixedGutter?0:b.gutters.offsetWidth,Le=s.curOp&&s.curOp.scrollLeft!=null?s.curOp.scrollLeft:b.scroller.scrollLeft-ye,Ae=Hi(s)-b.gutters.offsetWidth,Ne=d.right-d.left>Ae;return Ne&&(d.right=d.left+Ae),d.left<10?O.scrollLeft=0:d.left<Le?O.scrollLeft=Math.max(0,d.left+ye-(Ne?0:10)):d.right>Ae+Le-3&&(O.scrollLeft=d.right+(Ne?0:10)-Ae),O}function _d(s,d){d!=null&&(Ou(s),s.curOp.scrollTop=(s.curOp.scrollTop==null?s.doc.scrollTop:s.curOp.scrollTop)+d)}function Fo(s){Ou(s);var d=s.getCursor();s.curOp.scrollToPos={from:d,to:d,margin:s.options.cursorScrollMargin}}function Ws(s,d,b){(d!=null||b!=null)&&Ou(s),d!=null&&(s.curOp.scrollLeft=d),b!=null&&(s.curOp.scrollTop=b)}function mI(s,d){Ou(s),s.curOp.scrollToPos=d}function Ou(s){var d=s.curOp.scrollToPos;if(d){s.curOp.scrollToPos=null;var b=Gw(s,d.from),m=Gw(s,d.to);Kw(s,b,m,d.margin)}}function Kw(s,d,b,m){var S=Dd(s,{left:Math.min(d.left,b.left),top:Math.min(d.top,b.top)-m,right:Math.max(d.right,b.right),bottom:Math.max(d.bottom,b.bottom)+m});Ws(s,S.scrollLeft,S.scrollTop)}function Vs(s,d){Math.abs(s.doc.scrollTop-d)<2||(a||Rd(s,{top:d}),jw(s,d,!0),a&&Rd(s),Xs(s,100))}function jw(s,d,b){d=Math.max(0,Math.min(s.display.scroller.scrollHeight-s.display.scroller.clientHeight,d)),!(s.display.scroller.scrollTop==d&&!b)&&(s.doc.scrollTop=d,s.display.scrollbars.setScrollTop(d),s.display.scroller.scrollTop!=d&&(s.display.scroller.scrollTop=d))}function $i(s,d,b,m){d=Math.max(0,Math.min(d,s.display.scroller.scrollWidth-s.display.scroller.clientWidth)),!((b?d==s.doc.scrollLeft:Math.abs(s.doc.scrollLeft-d)<2)&&!m)&&(s.doc.scrollLeft=d,tx(s),s.display.scroller.scrollLeft!=d&&(s.display.scroller.scrollLeft=d),s.display.scrollbars.setScrollLeft(d))}function $s(s){var d=s.display,b=d.gutters.offsetWidth,m=Math.round(s.doc.height+vd(s.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:s.options.fixedGutter?b:0,docHeight:m,scrollHeight:m+da(s)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:b}}var Yi=function(s,d,b){this.cm=b;var m=this.vert=R("div",[R("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),S=this.horiz=R("div",[R("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");m.tabIndex=S.tabIndex=-1,s(m),s(S),Te(m,"scroll",function(){m.clientHeight&&d(m.scrollTop,"vertical")}),Te(S,"scroll",function(){S.clientWidth&&d(S.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,u&&f<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Yi.prototype.update=function(s){var d=s.scrollWidth>s.clientWidth+1,b=s.scrollHeight>s.clientHeight+1,m=s.nativeBarWidth;if(b){this.vert.style.display="block",this.vert.style.bottom=d?m+"px":"0";var S=s.viewHeight-(d?m:0);this.vert.firstChild.style.height=Math.max(0,s.scrollHeight-s.clientHeight+S)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(d){this.horiz.style.display="block",this.horiz.style.right=b?m+"px":"0",this.horiz.style.left=s.barLeft+"px";var L=s.viewWidth-s.barLeft-(b?m:0);this.horiz.firstChild.style.width=Math.max(0,s.scrollWidth-s.clientWidth+L)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&s.clientHeight>0&&(m==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:b?m:0,bottom:d?m:0}},Yi.prototype.setScrollLeft=function(s){this.horiz.scrollLeft!=s&&(this.horiz.scrollLeft=s),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Yi.prototype.setScrollTop=function(s){this.vert.scrollTop!=s&&(this.vert.scrollTop=s),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Yi.prototype.zeroWidthHack=function(){var s=A&&!E?"12px":"18px";this.horiz.style.height=this.vert.style.width=s,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new oe,this.disableVert=new oe},Yi.prototype.enableZeroWidthBar=function(s,d,b){s.style.visibility="";function m(){var S=s.getBoundingClientRect(),L=b=="vert"?document.elementFromPoint(S.right-1,(S.top+S.bottom)/2):document.elementFromPoint((S.right+S.left)/2,S.bottom-1);L!=s?s.style.visibility="hidden":d.set(1e3,m)}d.set(1e3,m)},Yi.prototype.clear=function(){var s=this.horiz.parentNode;s.removeChild(this.horiz),s.removeChild(this.vert)};var Ys=function(){};Ys.prototype.update=function(){return{bottom:0,right:0}},Ys.prototype.setScrollLeft=function(){},Ys.prototype.setScrollTop=function(){},Ys.prototype.clear=function(){};function Bo(s,d){d||(d=$s(s));var b=s.display.barWidth,m=s.display.barHeight;Zw(s,d);for(var S=0;S<4&&b!=s.display.barWidth||m!=s.display.barHeight;S++)b!=s.display.barWidth&&s.options.lineWrapping&&Nu(s),Zw(s,$s(s)),b=s.display.barWidth,m=s.display.barHeight}function Zw(s,d){var b=s.display,m=b.scrollbars.update(d);b.sizer.style.paddingRight=(b.barWidth=m.right)+"px",b.sizer.style.paddingBottom=(b.barHeight=m.bottom)+"px",b.heightForcer.style.borderBottom=m.bottom+"px solid transparent",m.right&&m.bottom?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=m.bottom+"px",b.scrollbarFiller.style.width=m.right+"px"):b.scrollbarFiller.style.display="",m.bottom&&s.options.coverGutterNextToScrollbar&&s.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=m.bottom+"px",b.gutterFiller.style.width=d.gutterWidth+"px"):b.gutterFiller.style.display=""}var Qw={native:Yi,null:Ys};function Jw(s){s.display.scrollbars&&(s.display.scrollbars.clear(),s.display.scrollbars.addClass&&F(s.display.wrapper,s.display.scrollbars.addClass)),s.display.scrollbars=new Qw[s.options.scrollbarStyle](function(d){s.display.wrapper.insertBefore(d,s.display.scrollbarFiller),Te(d,"mousedown",function(){s.state.focused&&setTimeout(function(){return s.display.input.focus()},0)}),d.setAttribute("cm-not-content","true")},function(d,b){b=="horizontal"?$i(s,d):Vs(s,d)},s),s.display.scrollbars.addClass&&re(s.display.wrapper,s.display.scrollbars.addClass)}var bI=0;function Xi(s){s.curOp={cm:s,viewChanged:!1,startHeight:s.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++bI,markArrays:null},jO(s.curOp)}function Ki(s){var d=s.curOp;d&&QO(d,function(b){for(var m=0;m<b.ops.length;m++)b.ops[m].cm.curOp=null;wI(b)})}function wI(s){for(var d=s.ops,b=0;b<d.length;b++)xI(d[b]);for(var m=0;m<d.length;m++)CI(d[m]);for(var S=0;S<d.length;S++)EI(d[S]);for(var L=0;L<d.length;L++)TI(d[L]);for(var O=0;O<d.length;O++)SI(d[O])}function xI(s){var d=s.cm,b=d.display;LI(d),s.updateMaxLine&&dd(d),s.mustUpdate=s.viewChanged||s.forceUpdate||s.scrollTop!=null||s.scrollToPos&&(s.scrollToPos.from.line<b.viewFrom||s.scrollToPos.to.line>=b.viewTo)||b.maxLineChanged&&d.options.lineWrapping,s.update=s.mustUpdate&&new Iu(d,s.mustUpdate&&{top:s.scrollTop,ensure:s.scrollToPos},s.forceUpdate)}function CI(s){s.updatedDisplay=s.mustUpdate&&Md(s.cm,s.update)}function EI(s){var d=s.cm,b=d.display;s.updatedDisplay&&Nu(d),s.barMeasure=$s(d),b.maxLineChanged&&!d.options.lineWrapping&&(s.adjustWidthTo=Nw(d,b.maxLine,b.maxLine.text.length).left+3,d.display.sizerWidth=s.adjustWidthTo,s.barMeasure.scrollWidth=Math.max(b.scroller.clientWidth,b.sizer.offsetLeft+s.adjustWidthTo+da(d)+d.display.barWidth),s.maxScrollLeft=Math.max(0,b.sizer.offsetLeft+s.adjustWidthTo-Hi(d))),(s.updatedDisplay||s.selectionChanged)&&(s.preparedSelection=b.input.prepareSelection())}function TI(s){var d=s.cm;s.adjustWidthTo!=null&&(d.display.sizer.style.minWidth=s.adjustWidthTo+"px",s.maxScrollLeft<d.doc.scrollLeft&&$i(d,Math.min(d.display.scroller.scrollLeft,s.maxScrollLeft),!0),d.display.maxLineChanged=!1);var b=s.focus&&s.focus==ae(U(d));s.preparedSelection&&d.display.input.showSelection(s.preparedSelection,b),(s.updatedDisplay||s.startHeight!=d.doc.height)&&Bo(d,s.barMeasure),s.updatedDisplay&&Nd(d,s.barMeasure),s.selectionChanged&&Sd(d),d.state.focused&&s.updateInput&&d.display.input.reset(s.typing),b&&Yw(s.cm)}function SI(s){var d=s.cm,b=d.display,m=d.doc;if(s.updatedDisplay&&ex(d,s.update),b.wheelStartX!=null&&(s.scrollTop!=null||s.scrollLeft!=null||s.scrollToPos)&&(b.wheelStartX=b.wheelStartY=null),s.scrollTop!=null&&jw(d,s.scrollTop,s.forceScroll),s.scrollLeft!=null&&$i(d,s.scrollLeft,!0,!0),s.scrollToPos){var S=gI(d,xt(m,s.scrollToPos.from),xt(m,s.scrollToPos.to),s.scrollToPos.margin);pI(d,S)}var L=s.maybeHiddenMarkers,O=s.maybeUnhiddenMarkers;if(L)for(var H=0;H<L.length;++H)L[H].lines.length||He(L[H],"hide");if(O)for(var Y=0;Y<O.length;++Y)O[Y].lines.length&&He(O[Y],"unhide");b.wrapper.offsetHeight&&(m.scrollTop=d.display.scroller.scrollTop),s.changeObjs&&He(d,"changes",d,s.changeObjs),s.update&&s.update.finish()}function Dn(s,d){if(s.curOp)return d();Xi(s);try{return d()}finally{Ki(s)}}function Mr(s,d){return function(){if(s.curOp)return d.apply(s,arguments);Xi(s);try{return d.apply(s,arguments)}finally{Ki(s)}}}function ln(s){return function(){if(this.curOp)return s.apply(this,arguments);Xi(this);try{return s.apply(this,arguments)}finally{Ki(this)}}}function Rr(s){return function(){var d=this.cm;if(!d||d.curOp)return s.apply(this,arguments);Xi(d);try{return s.apply(this,arguments)}finally{Ki(d)}}}function Xs(s,d){s.doc.highlightFrontier<s.display.viewTo&&s.state.highlight.set(d,ee(AI,s))}function AI(s){var d=s.doc;if(!(d.highlightFrontier>=s.display.viewTo)){var b=+new Date+s.options.workTime,m=Fs(s,d.highlightFrontier),S=[];d.iter(m.line,Math.min(d.first+d.size,s.display.viewTo+500),function(L){if(m.line>=s.display.viewFrom){var O=L.styles,H=L.text.length>s.options.maxHighlightLength?sn(d.mode,m.state):null,Y=sw(s,L,m,!0);H&&(m.state=H),L.styles=Y.styles;var J=L.styleClasses,ce=Y.classes;ce?L.styleClasses=ce:J&&(L.styleClasses=null);for(var ye=!O||O.length!=L.styles.length||J!=ce&&(!J||!ce||J.bgClass!=ce.bgClass||J.textClass!=ce.textClass),Le=0;!ye&&Le<O.length;++Le)ye=O[Le]!=L.styles[Le];ye&&S.push(m.line),L.stateAfter=m.save(),m.nextLine()}else L.text.length<=s.options.maxHighlightLength&&od(s,L.text,m),L.stateAfter=m.line%5==0?m.save():null,m.nextLine();if(+new Date>b)return Xs(s,s.options.workDelay),!0}),d.highlightFrontier=m.line,d.modeFrontier=Math.max(d.modeFrontier,m.line),S.length&&Dn(s,function(){for(var L=0;L<S.length;L++)ai(s,S[L],"text")})}}var Iu=function(s,d,b){var m=s.display;this.viewport=d,this.visible=ku(m,s.doc,d),this.editorIsHidden=!m.wrapper.offsetWidth,this.wrapperHeight=m.wrapper.clientHeight,this.wrapperWidth=m.wrapper.clientWidth,this.oldDisplayWidth=Hi(s),this.force=b,this.dims=xd(s),this.events=[]};Iu.prototype.signal=function(s,d){Qe(s,d)&&this.events.push(arguments)},Iu.prototype.finish=function(){for(var s=0;s<this.events.length;s++)He.apply(null,this.events[s])};function LI(s){var d=s.display;!d.scrollbarsClipped&&d.scroller.offsetWidth&&(d.nativeBarWidth=d.scroller.offsetWidth-d.scroller.clientWidth,d.heightForcer.style.height=da(s)+"px",d.sizer.style.marginBottom=-d.nativeBarWidth+"px",d.sizer.style.borderRightWidth=da(s)+"px",d.scrollbarsClipped=!0)}function DI(s){if(s.hasFocus())return null;var d=ae(U(s));if(!d||!q(s.display.lineDiv,d))return null;var b={activeElt:d};if(window.getSelection){var m=X(s).getSelection();m.anchorNode&&m.extend&&q(s.display.lineDiv,m.anchorNode)&&(b.anchorNode=m.anchorNode,b.anchorOffset=m.anchorOffset,b.focusNode=m.focusNode,b.focusOffset=m.focusOffset)}return b}function _I(s){if(!(!s||!s.activeElt||s.activeElt==ae(V(s.activeElt)))&&(s.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(s.activeElt.nodeName)&&s.anchorNode&&q(document.body,s.anchorNode)&&q(document.body,s.focusNode))){var d=s.activeElt.ownerDocument,b=d.defaultView.getSelection(),m=d.createRange();m.setEnd(s.anchorNode,s.anchorOffset),m.collapse(!1),b.removeAllRanges(),b.addRange(m),b.extend(s.focusNode,s.focusOffset)}}function Md(s,d){var b=s.display,m=s.doc;if(d.editorIsHidden)return ii(s),!1;if(!d.force&&d.visible.from>=b.viewFrom&&d.visible.to<=b.viewTo&&(b.updateLineNumbers==null||b.updateLineNumbers>=b.viewTo)&&b.renderedView==b.view&&Vw(s)==0)return!1;rx(s)&&(ii(s),d.dims=xd(s));var S=m.first+m.size,L=Math.max(d.visible.from-s.options.viewportMargin,m.first),O=Math.min(S,d.visible.to+s.options.viewportMargin);b.viewFrom<L&&L-b.viewFrom<20&&(L=Math.max(m.first,b.viewFrom)),b.viewTo>O&&b.viewTo-O<20&&(O=Math.min(S,b.viewTo)),Ra&&(L=fd(s.doc,L),O=xw(s.doc,O));var H=L!=b.viewFrom||O!=b.viewTo||b.lastWrapHeight!=d.wrapperHeight||b.lastWrapWidth!=d.wrapperWidth;hI(s,L,O),b.viewOffset=Pa(lt(s.doc,b.viewFrom)),s.display.mover.style.top=b.viewOffset+"px";var Y=Vw(s);if(!H&&Y==0&&!d.force&&b.renderedView==b.view&&(b.updateLineNumbers==null||b.updateLineNumbers>=b.viewTo))return!1;var J=DI(s);return Y>4&&(b.lineDiv.style.display="none"),MI(s,b.updateLineNumbers,d.dims),Y>4&&(b.lineDiv.style.display=""),b.renderedView=b.view,_I(J),z(b.cursorDiv),z(b.selectionDiv),b.gutters.style.height=b.sizer.style.minHeight=0,H&&(b.lastWrapHeight=d.wrapperHeight,b.lastWrapWidth=d.wrapperWidth,Xs(s,400)),b.updateLineNumbers=null,!0}function ex(s,d){for(var b=d.viewport,m=!0;;m=!1){if(!m||!s.options.lineWrapping||d.oldDisplayWidth==Hi(s)){if(b&&b.top!=null&&(b={top:Math.min(s.doc.height+vd(s.display)-pd(s),b.top)}),d.visible=ku(s.display,s.doc,b),d.visible.from>=s.display.viewFrom&&d.visible.to<=s.display.viewTo)break}else m&&(d.visible=ku(s.display,s.doc,b));if(!Md(s,d))break;Nu(s);var S=$s(s);Us(s),Bo(s,S),Nd(s,S),d.force=!1}d.signal(s,"update",s),(s.display.viewFrom!=s.display.reportedViewFrom||s.display.viewTo!=s.display.reportedViewTo)&&(d.signal(s,"viewportChange",s,s.display.viewFrom,s.display.viewTo),s.display.reportedViewFrom=s.display.viewFrom,s.display.reportedViewTo=s.display.viewTo)}function Rd(s,d){var b=new Iu(s,d);if(Md(s,b)){Nu(s),ex(s,b);var m=$s(s);Us(s),Bo(s,m),Nd(s,m),b.finish()}}function MI(s,d,b){var m=s.display,S=s.options.lineNumbers,L=m.lineDiv,O=L.firstChild;function H(Ne){var Fe=Ne.nextSibling;return c&&A&&s.display.currentWheelTarget==Ne?Ne.style.display="none":Ne.parentNode.removeChild(Ne),Fe}for(var Y=m.view,J=m.viewFrom,ce=0;ce<Y.length;ce++){var ye=Y[ce];if(!ye.hidden)if(!ye.node||ye.node.parentNode!=L){var Le=nI(s,ye,J,b);L.insertBefore(Le,O)}else{for(;O!=ye.node;)O=H(O);var Ae=S&&d!=null&&d<=J&&ye.lineNumber;ye.changes&&(le(ye.changes,"gutter")>-1&&(Ae=!1),Aw(s,ye,J,b)),Ae&&(z(ye.lineNumber),ye.lineNumber.appendChild(document.createTextNode(ze(s.options,J)))),O=ye.node.nextSibling}J+=ye.size}for(;O;)O=H(O)}function Pd(s){var d=s.gutters.offsetWidth;s.sizer.style.marginLeft=d+"px",_r(s,"gutterChanged",s)}function Nd(s,d){s.display.sizer.style.minHeight=d.docHeight+"px",s.display.heightForcer.style.top=d.docHeight+"px",s.display.gutters.style.height=d.docHeight+s.display.barHeight+da(s)+"px"}function tx(s){var d=s.display,b=d.view;if(!(!d.alignWidgets&&(!d.gutters.firstChild||!s.options.fixedGutter))){for(var m=Cd(d)-d.scroller.scrollLeft+s.doc.scrollLeft,S=d.gutters.offsetWidth,L=m+"px",O=0;O<b.length;O++)if(!b[O].hidden){s.options.fixedGutter&&(b[O].gutter&&(b[O].gutter.style.left=L),b[O].gutterBackground&&(b[O].gutterBackground.style.left=L));var H=b[O].alignable;if(H)for(var Y=0;Y<H.length;Y++)H[Y].style.left=L}s.options.fixedGutter&&(d.gutters.style.left=m+S+"px")}}function rx(s){if(!s.options.lineNumbers)return!1;var d=s.doc,b=ze(s.options,d.first+d.size-1),m=s.display;if(b.length!=m.lineNumChars){var S=m.measure.appendChild(R("div",[R("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),L=S.firstChild.offsetWidth,O=S.offsetWidth-L;return m.lineGutter.style.width="",m.lineNumInnerWidth=Math.max(L,m.lineGutter.offsetWidth-O)+1,m.lineNumWidth=m.lineNumInnerWidth+O,m.lineNumChars=m.lineNumInnerWidth?b.length:-1,m.lineGutter.style.width=m.lineNumWidth+"px",Pd(s.display),!0}return!1}function kd(s,d){for(var b=[],m=!1,S=0;S<s.length;S++){var L=s[S],O=null;if(typeof L!="string"&&(O=L.style,L=L.className),L=="CodeMirror-linenumbers")if(d)m=!0;else continue;b.push({className:L,style:O})}return d&&!m&&b.push({className:"CodeMirror-linenumbers",style:null}),b}function nx(s){var d=s.gutters,b=s.gutterSpecs;z(d),s.lineGutter=null;for(var m=0;m<b.length;++m){var S=b[m],L=S.className,O=S.style,H=d.appendChild(R("div",null,"CodeMirror-gutter "+L));O&&(H.style.cssText=O),L=="CodeMirror-linenumbers"&&(s.lineGutter=H,H.style.width=(s.lineNumWidth||1)+"px")}d.style.display=b.length?"":"none",Pd(s)}function Ks(s){nx(s.display),mn(s),tx(s)}function RI(s,d,b,m){var S=this;this.input=b,S.scrollbarFiller=R("div",null,"CodeMirror-scrollbar-filler"),S.scrollbarFiller.setAttribute("cm-not-content","true"),S.gutterFiller=R("div",null,"CodeMirror-gutter-filler"),S.gutterFiller.setAttribute("cm-not-content","true"),S.lineDiv=k("div",null,"CodeMirror-code"),S.selectionDiv=R("div",null,null,"position: relative; z-index: 1"),S.cursorDiv=R("div",null,"CodeMirror-cursors"),S.measure=R("div",null,"CodeMirror-measure"),S.lineMeasure=R("div",null,"CodeMirror-measure"),S.lineSpace=k("div",[S.measure,S.lineMeasure,S.selectionDiv,S.cursorDiv,S.lineDiv],null,"position: relative; outline: none");var L=k("div",[S.lineSpace],"CodeMirror-lines");S.mover=R("div",[L],null,"position: relative"),S.sizer=R("div",[S.mover],"CodeMirror-sizer"),S.sizerWidth=null,S.heightForcer=R("div",null,null,"position: absolute; height: "+$+"px; width: 1px;"),S.gutters=R("div",null,"CodeMirror-gutters"),S.lineGutter=null,S.scroller=R("div",[S.sizer,S.heightForcer,S.gutters],"CodeMirror-scroll"),S.scroller.setAttribute("tabIndex","-1"),S.wrapper=R("div",[S.scrollbarFiller,S.gutterFiller,S.scroller],"CodeMirror"),g&&p>=105&&(S.wrapper.style.clipPath="inset(0px)"),S.wrapper.setAttribute("translate","no"),u&&f<8&&(S.gutters.style.zIndex=-1,S.scroller.style.paddingRight=0),!c&&!(a&&T)&&(S.scroller.draggable=!0),s&&(s.appendChild?s.appendChild(S.wrapper):s(S.wrapper)),S.viewFrom=S.viewTo=d.first,S.reportedViewFrom=S.reportedViewTo=d.first,S.view=[],S.renderedView=null,S.externalMeasured=null,S.viewOffset=0,S.lastWrapHeight=S.lastWrapWidth=0,S.updateLineNumbers=null,S.nativeBarWidth=S.barHeight=S.barWidth=0,S.scrollbarsClipped=!1,S.lineNumWidth=S.lineNumInnerWidth=S.lineNumChars=null,S.alignWidgets=!1,S.cachedCharWidth=S.cachedTextHeight=S.cachedPaddingH=null,S.maxLine=null,S.maxLineLength=0,S.maxLineChanged=!1,S.wheelDX=S.wheelDY=S.wheelStartX=S.wheelStartY=null,S.shift=!1,S.selForContextMenu=null,S.activeTouch=null,S.gutterSpecs=kd(m.gutters,m.lineNumbers),nx(S),b.init(S)}var Fu=0,ka=null;u?ka=-.53:a?ka=15:g?ka=-.7:C&&(ka=-1/3);function ax(s){var d=s.wheelDeltaX,b=s.wheelDeltaY;return d==null&&s.detail&&s.axis==s.HORIZONTAL_AXIS&&(d=s.detail),b==null&&s.detail&&s.axis==s.VERTICAL_AXIS?b=s.detail:b==null&&(b=s.wheelDelta),{x:d,y:b}}function PI(s){var d=ax(s);return d.x*=ka,d.y*=ka,d}function ix(s,d){g&&p==102&&(s.display.chromeScrollHack==null?s.display.sizer.style.pointerEvents="none":clearTimeout(s.display.chromeScrollHack),s.display.chromeScrollHack=setTimeout(function(){s.display.chromeScrollHack=null,s.display.sizer.style.pointerEvents=""},100));var b=ax(d),m=b.x,S=b.y,L=ka;d.deltaMode===0&&(m=d.deltaX,S=d.deltaY,L=1);var O=s.display,H=O.scroller,Y=H.scrollWidth>H.clientWidth,J=H.scrollHeight>H.clientHeight;if(m&&Y||S&&J){if(S&&A&&c){e:for(var ce=d.target,ye=O.view;ce!=H;ce=ce.parentNode)for(var Le=0;Le<ye.length;Le++)if(ye[Le].node==ce){s.display.currentWheelTarget=ce;break e}}if(m&&!a&&!y&&L!=null){S&&J&&Vs(s,Math.max(0,H.scrollTop+S*L)),$i(s,Math.max(0,H.scrollLeft+m*L)),(!S||S&&J)&&Ve(d),O.wheelStartX=null;return}if(S&&L!=null){var Ae=S*L,Ne=s.doc.scrollTop,Fe=Ne+O.wrapper.clientHeight;Ae<0?Ne=Math.max(0,Ne+Ae-50):Fe=Math.min(s.doc.height,Fe+Ae+50),Rd(s,{top:Ne,bottom:Fe})}Fu<20&&d.deltaMode!==0&&(O.wheelStartX==null?(O.wheelStartX=H.scrollLeft,O.wheelStartY=H.scrollTop,O.wheelDX=m,O.wheelDY=S,setTimeout(function(){if(O.wheelStartX!=null){var Ye=H.scrollLeft-O.wheelStartX,Je=H.scrollTop-O.wheelStartY,it=Je&&O.wheelDY&&Je/O.wheelDY||Ye&&O.wheelDX&&Ye/O.wheelDX;O.wheelStartX=O.wheelStartY=null,it&&(ka=(ka*Fu+it)/(Fu+1),++Fu)}},200)):(O.wheelDX+=m,O.wheelDY+=S))}}var On=function(s,d){this.ranges=s,this.primIndex=d};On.prototype.primary=function(){return this.ranges[this.primIndex]},On.prototype.equals=function(s){if(s==this)return!0;if(s.primIndex!=this.primIndex||s.ranges.length!=this.ranges.length)return!1;for(var d=0;d<this.ranges.length;d++){var b=this.ranges[d],m=s.ranges[d];if(!Nt(b.anchor,m.anchor)||!Nt(b.head,m.head))return!1}return!0},On.prototype.deepCopy=function(){for(var s=[],d=0;d<this.ranges.length;d++)s[d]=new Bt(Dr(this.ranges[d].anchor),Dr(this.ranges[d].head));return new On(s,this.primIndex)},On.prototype.somethingSelected=function(){for(var s=0;s<this.ranges.length;s++)if(!this.ranges[s].empty())return!0;return!1},On.prototype.contains=function(s,d){d||(d=s);for(var b=0;b<this.ranges.length;b++){var m=this.ranges[b];if(je(d,m.from())>=0&&je(s,m.to())<=0)return b}return-1};var Bt=function(s,d){this.anchor=s,this.head=d};Bt.prototype.from=function(){return Mo(this.anchor,this.head)},Bt.prototype.to=function(){return yn(this.anchor,this.head)},Bt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function ta(s,d,b){var m=s&&s.options.selectionsMayTouch,S=d[b];d.sort(function(Le,Ae){return je(Le.from(),Ae.from())}),b=le(d,S);for(var L=1;L<d.length;L++){var O=d[L],H=d[L-1],Y=je(H.to(),O.from());if(m&&!O.empty()?Y>0:Y>=0){var J=Mo(H.from(),O.from()),ce=yn(H.to(),O.to()),ye=H.empty()?O.from()==O.head:H.from()==H.head;L<=b&&--b,d.splice(--L,2,new Bt(ye?ce:J,ye?J:ce))}}return new On(d,b)}function oi(s,d){return new On([new Bt(s,d||s)],0)}function si(s){return s.text?Me(s.from.line+s.text.length-1,de(s.text).length+(s.text.length==1?s.from.ch:0)):s.to}function ox(s,d){if(je(s,d.from)<0)return s;if(je(s,d.to)<=0)return si(d);var b=s.line+d.text.length-(d.to.line-d.from.line)-1,m=s.ch;return s.line==d.to.line&&(m+=si(d).ch-d.to.ch),Me(b,m)}function Od(s,d){for(var b=[],m=0;m<s.sel.ranges.length;m++){var S=s.sel.ranges[m];b.push(new Bt(ox(S.anchor,d),ox(S.head,d)))}return ta(s.cm,b,s.sel.primIndex)}function sx(s,d,b){return s.line==d.line?Me(b.line,s.ch-d.ch+b.ch):Me(b.line+(s.line-d.line),s.ch)}function NI(s,d,b){for(var m=[],S=Me(s.first,0),L=S,O=0;O<d.length;O++){var H=d[O],Y=sx(H.from,S,L),J=sx(si(H),S,L);if(S=H.to,L=J,b=="around"){var ce=s.sel.ranges[O],ye=je(ce.head,ce.anchor)<0;m[O]=new Bt(ye?J:Y,ye?Y:J)}else m[O]=new Bt(Y,Y)}return new On(m,s.sel.primIndex)}function Id(s){s.doc.mode=jn(s.options,s.doc.modeOption),js(s)}function js(s){s.doc.iter(function(d){d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null)}),s.doc.modeFrontier=s.doc.highlightFrontier=s.doc.first,Xs(s,100),s.state.modeGen++,s.curOp&&mn(s)}function lx(s,d){return d.from.ch==0&&d.to.ch==0&&de(d.text)==""&&(!s.cm||s.cm.options.wholeLineUpdateBefore)}function Fd(s,d,b,m){function S(it){return b?b[it]:null}function L(it,et,st){GO(it,et,st,m),_r(it,"change",it,d)}function O(it,et){for(var st=[],yt=it;yt<et;++yt)st.push(new Ro(J[yt],S(yt),m));return st}var H=d.from,Y=d.to,J=d.text,ce=lt(s,H.line),ye=lt(s,Y.line),Le=de(J),Ae=S(J.length-1),Ne=Y.line-H.line;if(d.full)s.insert(0,O(0,J.length)),s.remove(J.length,s.size-J.length);else if(lx(s,d)){var Fe=O(0,J.length-1);L(ye,ye.text,Ae),Ne&&s.remove(H.line,Ne),Fe.length&&s.insert(H.line,Fe)}else if(ce==ye)if(J.length==1)L(ce,ce.text.slice(0,H.ch)+Le+ce.text.slice(Y.ch),Ae);else{var Ye=O(1,J.length-1);Ye.push(new Ro(Le+ce.text.slice(Y.ch),Ae,m)),L(ce,ce.text.slice(0,H.ch)+J[0],S(0)),s.insert(H.line+1,Ye)}else if(J.length==1)L(ce,ce.text.slice(0,H.ch)+J[0]+ye.text.slice(Y.ch),S(0)),s.remove(H.line+1,Ne);else{L(ce,ce.text.slice(0,H.ch)+J[0],S(0)),L(ye,Le+ye.text.slice(Y.ch),Ae);var Je=O(1,J.length-1);Ne>1&&s.remove(H.line+1,Ne-1),s.insert(H.line+1,Je)}_r(s,"change",s,d)}function li(s,d,b){function m(S,L,O){if(S.linked)for(var H=0;H<S.linked.length;++H){var Y=S.linked[H];if(Y.doc!=L){var J=O&&Y.sharedHist;b&&!J||(d(Y.doc,J),m(Y.doc,S,J))}}}m(s,null,!0)}function ux(s,d){if(d.cm)throw new Error("This document is already in use.");s.doc=d,d.cm=s,Ed(s),Id(s),fx(s),s.options.direction=d.direction,s.options.lineWrapping||dd(s),s.options.mode=d.modeOption,mn(s)}function fx(s){(s.doc.direction=="rtl"?re:F)(s.display.lineDiv,"CodeMirror-rtl")}function kI(s){Dn(s,function(){fx(s),mn(s)})}function Bu(s){this.done=[],this.undone=[],this.undoDepth=s?s.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=s?s.maxGeneration:1}function Bd(s,d){var b={from:Dr(d.from),to:si(d),text:Gr(s,d.from,d.to)};return hx(s,b,d.from.line,d.to.line+1),li(s,function(m){return hx(m,b,d.from.line,d.to.line+1)},!0),b}function cx(s){for(;s.length;){var d=de(s);if(d.ranges)s.pop();else break}}function OI(s,d){if(d)return cx(s.done),de(s.done);if(s.done.length&&!de(s.done).ranges)return de(s.done);if(s.done.length>1&&!s.done[s.done.length-2].ranges)return s.done.pop(),de(s.done)}function dx(s,d,b,m){var S=s.history;S.undone.length=0;var L=+new Date,O,H;if((S.lastOp==m||S.lastOrigin==d.origin&&d.origin&&(d.origin.charAt(0)=="+"&&S.lastModTime>L-(s.cm?s.cm.options.historyEventDelay:500)||d.origin.charAt(0)=="*"))&&(O=OI(S,S.lastOp==m)))H=de(O.changes),je(d.from,d.to)==0&&je(d.from,H.to)==0?H.to=si(d):O.changes.push(Bd(s,d));else{var Y=de(S.done);for((!Y||!Y.ranges)&&qu(s.sel,S.done),O={changes:[Bd(s,d)],generation:S.generation},S.done.push(O);S.done.length>S.undoDepth;)S.done.shift(),S.done[0].ranges||S.done.shift()}S.done.push(b),S.generation=++S.maxGeneration,S.lastModTime=S.lastSelTime=L,S.lastOp=S.lastSelOp=m,S.lastOrigin=S.lastSelOrigin=d.origin,H||He(s,"historyAdded")}function II(s,d,b,m){var S=d.charAt(0);return S=="*"||S=="+"&&b.ranges.length==m.ranges.length&&b.somethingSelected()==m.somethingSelected()&&new Date-s.history.lastSelTime<=(s.cm?s.cm.options.historyEventDelay:500)}function FI(s,d,b,m){var S=s.history,L=m&&m.origin;b==S.lastSelOp||L&&S.lastSelOrigin==L&&(S.lastModTime==S.lastSelTime&&S.lastOrigin==L||II(s,L,de(S.done),d))?S.done[S.done.length-1]=d:qu(d,S.done),S.lastSelTime=+new Date,S.lastSelOrigin=L,S.lastSelOp=b,m&&m.clearRedo!==!1&&cx(S.undone)}function qu(s,d){var b=de(d);b&&b.ranges&&b.equals(s)||d.push(s)}function hx(s,d,b,m){var S=d["spans_"+s.id],L=0;s.iter(Math.max(s.first,b),Math.min(s.first+s.size,m),function(O){O.markedSpans&&((S||(S=d["spans_"+s.id]={}))[L]=O.markedSpans),++L})}function BI(s){if(!s)return null;for(var d,b=0;b<s.length;++b)s[b].marker.explicitlyCleared?d||(d=s.slice(0,b)):d&&d.push(s[b]);return d?d.length?d:null:s}function qI(s,d){var b=d["spans_"+s.id];if(!b)return null;for(var m=[],S=0;S<d.text.length;++S)m.push(BI(b[S]));return m}function vx(s,d){var b=qI(s,d),m=ld(s,d);if(!b)return m;if(!m)return b;for(var S=0;S<b.length;++S){var L=b[S],O=m[S];if(L&&O)e:for(var H=0;H<O.length;++H){for(var Y=O[H],J=0;J<L.length;++J)if(L[J].marker==Y.marker)continue e;L.push(Y)}else O&&(b[S]=O)}return b}function qo(s,d,b){for(var m=[],S=0;S<s.length;++S){var L=s[S];if(L.ranges){m.push(b?On.prototype.deepCopy.call(L):L);continue}var O=L.changes,H=[];m.push({changes:H});for(var Y=0;Y<O.length;++Y){var J=O[Y],ce=void 0;if(H.push({from:J.from,to:J.to,text:J.text}),d)for(var ye in J)(ce=ye.match(/^spans_(\d+)$/))&&le(d,Number(ce[1]))>-1&&(de(H)[ye]=J[ye],delete J[ye])}}return m}function qd(s,d,b,m){if(m){var S=s.anchor;if(b){var L=je(d,S)<0;L!=je(b,S)<0?(S=d,d=b):L!=je(d,b)<0&&(d=b)}return new Bt(S,d)}else return new Bt(b||d,d)}function zu(s,d,b,m,S){S==null&&(S=s.cm&&(s.cm.display.shift||s.extend)),jr(s,new On([qd(s.sel.primary(),d,b,S)],0),m)}function px(s,d,b){for(var m=[],S=s.cm&&(s.cm.display.shift||s.extend),L=0;L<s.sel.ranges.length;L++)m[L]=qd(s.sel.ranges[L],d[L],null,S);var O=ta(s.cm,m,s.sel.primIndex);jr(s,O,b)}function zd(s,d,b,m){var S=s.sel.ranges.slice(0);S[d]=b,jr(s,ta(s.cm,S,s.sel.primIndex),m)}function gx(s,d,b,m){jr(s,oi(d,b),m)}function zI(s,d,b){var m={ranges:d.ranges,update:function(S){this.ranges=[];for(var L=0;L<S.length;L++)this.ranges[L]=new Bt(xt(s,S[L].anchor),xt(s,S[L].head))},origin:b&&b.origin};return He(s,"beforeSelectionChange",s,m),s.cm&&He(s.cm,"beforeSelectionChange",s.cm,m),m.ranges!=d.ranges?ta(s.cm,m.ranges,m.ranges.length-1):d}function yx(s,d,b){var m=s.history.done,S=de(m);S&&S.ranges?(m[m.length-1]=d,Gu(s,d,b)):jr(s,d,b)}function jr(s,d,b){Gu(s,d,b),FI(s,s.sel,s.cm?s.cm.curOp.id:NaN,b)}function Gu(s,d,b){(Qe(s,"beforeSelectionChange")||s.cm&&Qe(s.cm,"beforeSelectionChange"))&&(d=zI(s,d,b));var m=b&&b.bias||(je(d.primary().head,s.sel.primary().head)<0?-1:1);mx(s,wx(s,d,m,!0)),!(b&&b.scroll===!1)&&s.cm&&s.cm.getOption("readOnly")!="nocursor"&&Fo(s.cm)}function mx(s,d){d.equals(s.sel)||(s.sel=d,s.cm&&(s.cm.curOp.updateInput=1,s.cm.curOp.selectionChanged=!0,Ke(s.cm)),_r(s,"cursorActivity",s))}function bx(s){mx(s,wx(s,s.sel,null,!1))}function wx(s,d,b,m){for(var S,L=0;L<d.ranges.length;L++){var O=d.ranges[L],H=d.ranges.length==s.sel.ranges.length&&s.sel.ranges[L],Y=Hu(s,O.anchor,H&&H.anchor,b,m),J=O.head==O.anchor?Y:Hu(s,O.head,H&&H.head,b,m);(S||Y!=O.anchor||J!=O.head)&&(S||(S=d.ranges.slice(0,L)),S[L]=new Bt(Y,J))}return S?ta(s.cm,S,d.primIndex):d}function zo(s,d,b,m,S){var L=lt(s,d.line);if(L.markedSpans)for(var O=0;O<L.markedSpans.length;++O){var H=L.markedSpans[O],Y=H.marker,J="selectLeft"in Y?!Y.selectLeft:Y.inclusiveLeft,ce="selectRight"in Y?!Y.selectRight:Y.inclusiveRight;if((H.from==null||(J?H.from<=d.ch:H.from<d.ch))&&(H.to==null||(ce?H.to>=d.ch:H.to>d.ch))){if(S&&(He(Y,"beforeCursorEnter"),Y.explicitlyCleared))if(L.markedSpans){--O;continue}else break;if(!Y.atomic)continue;if(b){var ye=Y.find(m<0?1:-1),Le=void 0;if((m<0?ce:J)&&(ye=xx(s,ye,-m,ye&&ye.line==d.line?L:null)),ye&&ye.line==d.line&&(Le=je(ye,b))&&(m<0?Le<0:Le>0))return zo(s,ye,d,m,S)}var Ae=Y.find(m<0?-1:1);return(m<0?J:ce)&&(Ae=xx(s,Ae,m,Ae.line==d.line?L:null)),Ae?zo(s,Ae,d,m,S):null}}return d}function Hu(s,d,b,m,S){var L=m||1,O=zo(s,d,b,L,S)||!S&&zo(s,d,b,L,!0)||zo(s,d,b,-L,S)||!S&&zo(s,d,b,-L,!0);return O||(s.cantEdit=!0,Me(s.first,0))}function xx(s,d,b,m){return b<0&&d.ch==0?d.line>s.first?xt(s,Me(d.line-1)):null:b>0&&d.ch==(m||lt(s,d.line)).text.length?d.line<s.first+s.size-1?Me(d.line+1,0):null:new Me(d.line,d.ch+b)}function Cx(s){s.setSelection(Me(s.firstLine(),0),Me(s.lastLine()),ie)}function Ex(s,d,b){var m={canceled:!1,from:d.from,to:d.to,text:d.text,origin:d.origin,cancel:function(){return m.canceled=!0}};return b&&(m.update=function(S,L,O,H){S&&(m.from=xt(s,S)),L&&(m.to=xt(s,L)),O&&(m.text=O),H!==void 0&&(m.origin=H)}),He(s,"beforeChange",s,m),s.cm&&He(s.cm,"beforeChange",s.cm,m),m.canceled?(s.cm&&(s.cm.curOp.updateInput=2),null):{from:m.from,to:m.to,text:m.text,origin:m.origin}}function Go(s,d,b){if(s.cm){if(!s.cm.curOp)return Mr(s.cm,Go)(s,d,b);if(s.cm.state.suppressEdits)return}if(!((Qe(s,"beforeChange")||s.cm&&Qe(s.cm,"beforeChange"))&&(d=Ex(s,d,!0),!d))){var m=vw&&!b&&FO(s,d.from,d.to);if(m)for(var S=m.length-1;S>=0;--S)Tx(s,{from:m[S].from,to:m[S].to,text:S?[""]:d.text,origin:d.origin});else Tx(s,d)}}function Tx(s,d){if(!(d.text.length==1&&d.text[0]==""&&je(d.from,d.to)==0)){var b=Od(s,d);dx(s,d,b,s.cm?s.cm.curOp.id:NaN),Zs(s,d,b,ld(s,d));var m=[];li(s,function(S,L){!L&&le(m,S.history)==-1&&(Dx(S.history,d),m.push(S.history)),Zs(S,d,null,ld(S,d))})}}function Uu(s,d,b){var m=s.cm&&s.cm.state.suppressEdits;if(!(m&&!b)){for(var S=s.history,L,O=s.sel,H=d=="undo"?S.done:S.undone,Y=d=="undo"?S.undone:S.done,J=0;J<H.length&&(L=H[J],!(b?L.ranges&&!L.equals(s.sel):!L.ranges));J++);if(J!=H.length){for(S.lastOrigin=S.lastSelOrigin=null;;)if(L=H.pop(),L.ranges){if(qu(L,Y),b&&!L.equals(s.sel)){jr(s,L,{clearRedo:!1});return}O=L}else if(m){H.push(L);return}else break;var ce=[];qu(O,Y),Y.push({changes:ce,generation:S.generation}),S.generation=L.generation||++S.maxGeneration;for(var ye=Qe(s,"beforeChange")||s.cm&&Qe(s.cm,"beforeChange"),Le=function(Fe){var Ye=L.changes[Fe];if(Ye.origin=d,ye&&!Ex(s,Ye,!1))return H.length=0,{};ce.push(Bd(s,Ye));var Je=Fe?Od(s,Ye):de(H);Zs(s,Ye,Je,vx(s,Ye)),!Fe&&s.cm&&s.cm.scrollIntoView({from:Ye.from,to:si(Ye)});var it=[];li(s,function(et,st){!st&&le(it,et.history)==-1&&(Dx(et.history,Ye),it.push(et.history)),Zs(et,Ye,null,vx(et,Ye))})},Ae=L.changes.length-1;Ae>=0;--Ae){var Ne=Le(Ae);if(Ne)return Ne.v}}}}function Sx(s,d){if(d!=0&&(s.first+=d,s.sel=new On(be(s.sel.ranges,function(S){return new Bt(Me(S.anchor.line+d,S.anchor.ch),Me(S.head.line+d,S.head.ch))}),s.sel.primIndex),s.cm)){mn(s.cm,s.first,s.first-d,d);for(var b=s.cm.display,m=b.viewFrom;m<b.viewTo;m++)ai(s.cm,m,"gutter")}}function Zs(s,d,b,m){if(s.cm&&!s.cm.curOp)return Mr(s.cm,Zs)(s,d,b,m);if(d.to.line<s.first){Sx(s,d.text.length-1-(d.to.line-d.from.line));return}if(!(d.from.line>s.lastLine())){if(d.from.line<s.first){var S=d.text.length-1-(s.first-d.from.line);Sx(s,S),d={from:Me(s.first,0),to:Me(d.to.line+S,d.to.ch),text:[de(d.text)],origin:d.origin}}var L=s.lastLine();d.to.line>L&&(d={from:d.from,to:Me(L,lt(s,L).text.length),text:[d.text[0]],origin:d.origin}),d.removed=Gr(s,d.from,d.to),b||(b=Od(s,d)),s.cm?GI(s.cm,d,m):Fd(s,d,m),Gu(s,b,ie),s.cantEdit&&Hu(s,Me(s.firstLine(),0))&&(s.cantEdit=!1)}}function GI(s,d,b){var m=s.doc,S=s.display,L=d.from,O=d.to,H=!1,Y=L.line;s.options.lineWrapping||(Y=Q(Jn(lt(m,L.line))),m.iter(Y,O.line+1,function(Ae){if(Ae==S.maxLine)return H=!0,!0})),m.sel.contains(d.from,d.to)>-1&&Ke(s),Fd(m,d,b,Ww(s)),s.options.lineWrapping||(m.iter(Y,L.line+d.text.length,function(Ae){var Ne=Au(Ae);Ne>S.maxLineLength&&(S.maxLine=Ae,S.maxLineLength=Ne,S.maxLineChanged=!0,H=!1)}),H&&(s.curOp.updateMaxLine=!0)),MO(m,L.line),Xs(s,400);var J=d.text.length-(O.line-L.line)-1;d.full?mn(s):L.line==O.line&&d.text.length==1&&!lx(s.doc,d)?ai(s,L.line,"text"):mn(s,L.line,O.line+1,J);var ce=Qe(s,"changes"),ye=Qe(s,"change");if(ye||ce){var Le={from:L,to:O,text:d.text,removed:d.removed,origin:d.origin};ye&&_r(s,"change",s,Le),ce&&(s.curOp.changeObjs||(s.curOp.changeObjs=[])).push(Le)}s.display.selForContextMenu=null}function Ho(s,d,b,m,S){var L;m||(m=b),je(m,b)<0&&(L=[m,b],b=L[0],m=L[1]),typeof d=="string"&&(d=s.splitLines(d)),Go(s,{from:b,to:m,text:d,origin:S})}function Ax(s,d,b,m){b<s.line?s.line+=m:d<s.line&&(s.line=d,s.ch=0)}function Lx(s,d,b,m){for(var S=0;S<s.length;++S){var L=s[S],O=!0;if(L.ranges){L.copied||(L=s[S]=L.deepCopy(),L.copied=!0);for(var H=0;H<L.ranges.length;H++)Ax(L.ranges[H].anchor,d,b,m),Ax(L.ranges[H].head,d,b,m);continue}for(var Y=0;Y<L.changes.length;++Y){var J=L.changes[Y];if(b<J.from.line)J.from=Me(J.from.line+m,J.from.ch),J.to=Me(J.to.line+m,J.to.ch);else if(d<=J.to.line){O=!1;break}}O||(s.splice(0,S+1),S=0)}}function Dx(s,d){var b=d.from.line,m=d.to.line,S=d.text.length-(m-b)-1;Lx(s.done,b,m,S),Lx(s.undone,b,m,S)}function Qs(s,d,b,m){var S=d,L=d;return typeof d=="number"?L=lt(s,iw(s,d)):S=Q(d),S==null?null:(m(L,S)&&s.cm&&ai(s.cm,S,b),L)}function Js(s){this.lines=s,this.parent=null;for(var d=0,b=0;b<s.length;++b)s[b].parent=this,d+=s[b].height;this.height=d}Js.prototype={chunkSize:function(){return this.lines.length},removeInner:function(s,d){for(var b=s,m=s+d;b<m;++b){var S=this.lines[b];this.height-=S.height,HO(S),_r(S,"delete")}this.lines.splice(s,d)},collapse:function(s){s.push.apply(s,this.lines)},insertInner:function(s,d,b){this.height+=b,this.lines=this.lines.slice(0,s).concat(d).concat(this.lines.slice(s));for(var m=0;m<d.length;++m)d[m].parent=this},iterN:function(s,d,b){for(var m=s+d;s<m;++s)if(b(this.lines[s]))return!0}};function el(s){this.children=s;for(var d=0,b=0,m=0;m<s.length;++m){var S=s[m];d+=S.chunkSize(),b+=S.height,S.parent=this}this.size=d,this.height=b,this.parent=null}el.prototype={chunkSize:function(){return this.size},removeInner:function(s,d){this.size-=d;for(var b=0;b<this.children.length;++b){var m=this.children[b],S=m.chunkSize();if(s<S){var L=Math.min(d,S-s),O=m.height;if(m.removeInner(s,L),this.height-=O-m.height,S==L&&(this.children.splice(b--,1),m.parent=null),(d-=L)==0)break;s=0}else s-=S}if(this.size-d<25&&(this.children.length>1||!(this.children[0]instanceof Js))){var H=[];this.collapse(H),this.children=[new Js(H)],this.children[0].parent=this}},collapse:function(s){for(var d=0;d<this.children.length;++d)this.children[d].collapse(s)},insertInner:function(s,d,b){this.size+=d.length,this.height+=b;for(var m=0;m<this.children.length;++m){var S=this.children[m],L=S.chunkSize();if(s<=L){if(S.insertInner(s,d,b),S.lines&&S.lines.length>50){for(var O=S.lines.length%25+25,H=O;H<S.lines.length;){var Y=new Js(S.lines.slice(H,H+=25));S.height-=Y.height,this.children.splice(++m,0,Y),Y.parent=this}S.lines=S.lines.slice(0,O),this.maybeSpill()}break}s-=L}},maybeSpill:function(){if(!(this.children.length<=10)){var s=this;do{var d=s.children.splice(s.children.length-5,5),b=new el(d);if(s.parent){s.size-=b.size,s.height-=b.height;var S=le(s.parent.children,s);s.parent.children.splice(S+1,0,b)}else{var m=new el(s.children);m.parent=s,s.children=[m,b],s=m}b.parent=s.parent}while(s.children.length>10);s.parent.maybeSpill()}},iterN:function(s,d,b){for(var m=0;m<this.children.length;++m){var S=this.children[m],L=S.chunkSize();if(s<L){var O=Math.min(d,L-s);if(S.iterN(s,O,b))return!0;if((d-=O)==0)break;s=0}else s-=L}}};var tl=function(s,d,b){if(b)for(var m in b)b.hasOwnProperty(m)&&(this[m]=b[m]);this.doc=s,this.node=d};tl.prototype.clear=function(){var s=this.doc.cm,d=this.line.widgets,b=this.line,m=Q(b);if(!(m==null||!d)){for(var S=0;S<d.length;++S)d[S]==this&&d.splice(S--,1);d.length||(b.widgets=null);var L=Gs(this);Pt(b,Math.max(0,b.height-L)),s&&(Dn(s,function(){_x(s,b,-L),ai(s,m,"widget")}),_r(s,"lineWidgetCleared",s,this,m))}},tl.prototype.changed=function(){var s=this,d=this.height,b=this.doc.cm,m=this.line;this.height=null;var S=Gs(this)-d;S&&(ni(this.doc,m)||Pt(m,m.height+S),b&&Dn(b,function(){b.curOp.forceUpdate=!0,_x(b,m,S),_r(b,"lineWidgetChanged",b,s,Q(m))}))},Ge(tl);function _x(s,d,b){Pa(d)<(s.curOp&&s.curOp.scrollTop||s.doc.scrollTop)&&_d(s,b)}function HI(s,d,b,m){var S=new tl(s,b,m),L=s.cm;return L&&S.noHScroll&&(L.display.alignWidgets=!0),Qs(s,d,"widget",function(O){var H=O.widgets||(O.widgets=[]);if(S.insertAt==null?H.push(S):H.splice(Math.min(H.length,Math.max(0,S.insertAt)),0,S),S.line=O,L&&!ni(s,O)){var Y=Pa(O)<s.scrollTop;Pt(O,O.height+Gs(S)),Y&&_d(L,S.height),L.curOp.forceUpdate=!0}return!0}),L&&_r(L,"lineWidgetAdded",L,S,typeof d=="number"?d:Q(d)),S}var Mx=0,ui=function(s,d){this.lines=[],this.type=d,this.doc=s,this.id=++Mx};ui.prototype.clear=function(){if(!this.explicitlyCleared){var s=this.doc.cm,d=s&&!s.curOp;if(d&&Xi(s),Qe(this,"clear")){var b=this.find();b&&_r(this,"clear",b.from,b.to)}for(var m=null,S=null,L=0;L<this.lines.length;++L){var O=this.lines[L],H=Bs(O.markedSpans,this);s&&!this.collapsed?ai(s,Q(O),"text"):s&&(H.to!=null&&(S=Q(O)),H.from!=null&&(m=Q(O))),O.markedSpans=NO(O.markedSpans,H),H.from==null&&this.collapsed&&!ni(this.doc,O)&&s&&Pt(O,ko(s.display))}if(s&&this.collapsed&&!s.options.lineWrapping)for(var Y=0;Y<this.lines.length;++Y){var J=Jn(this.lines[Y]),ce=Au(J);ce>s.display.maxLineLength&&(s.display.maxLine=J,s.display.maxLineLength=ce,s.display.maxLineChanged=!0)}m!=null&&s&&this.collapsed&&mn(s,m,S+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,s&&bx(s.doc)),s&&_r(s,"markerCleared",s,this,m,S),d&&Ki(s),this.parent&&this.parent.clear()}},ui.prototype.find=function(s,d){s==null&&this.type=="bookmark"&&(s=1);for(var b,m,S=0;S<this.lines.length;++S){var L=this.lines[S],O=Bs(L.markedSpans,this);if(O.from!=null&&(b=Me(d?L:Q(L),O.from),s==-1))return b;if(O.to!=null&&(m=Me(d?L:Q(L),O.to),s==1))return m}return b&&{from:b,to:m}},ui.prototype.changed=function(){var s=this,d=this.find(-1,!0),b=this,m=this.doc.cm;!d||!m||Dn(m,function(){var S=d.line,L=Q(d.line),O=gd(m,L);if(O&&(Iw(O),m.curOp.selectionChanged=m.curOp.forceUpdate=!0),m.curOp.updateMaxLine=!0,!ni(b.doc,S)&&b.height!=null){var H=b.height;b.height=null;var Y=Gs(b)-H;Y&&Pt(S,S.height+Y)}_r(m,"markerChanged",m,s)})},ui.prototype.attachLine=function(s){if(!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(!d.maybeHiddenMarkers||le(d.maybeHiddenMarkers,this)==-1)&&(d.maybeUnhiddenMarkers||(d.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(s)},ui.prototype.detachLine=function(s){if(this.lines.splice(le(this.lines,s),1),!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(d.maybeHiddenMarkers||(d.maybeHiddenMarkers=[])).push(this)}},Ge(ui);function Uo(s,d,b,m,S){if(m&&m.shared)return UI(s,d,b,m,S);if(s.cm&&!s.cm.curOp)return Mr(s.cm,Uo)(s,d,b,m,S);var L=new ui(s,S),O=je(d,b);if(m&&se(m,L,!1),O>0||O==0&&L.clearWhenEmpty!==!1)return L;if(L.replacedWith&&(L.collapsed=!0,L.widgetNode=k("span",[L.replacedWith],"CodeMirror-widget"),m.handleMouseEvents||L.widgetNode.setAttribute("cm-ignore-events","true"),m.insertLeft&&(L.widgetNode.insertLeft=!0)),L.collapsed){if(ww(s,d.line,d,b,L)||d.line!=b.line&&ww(s,b.line,d,b,L))throw new Error("Inserting collapsed marker partially overlapping an existing one");PO()}L.addToHistory&&dx(s,{from:d,to:b,origin:"markText"},s.sel,NaN);var H=d.line,Y=s.cm,J;if(s.iter(H,b.line+1,function(ye){Y&&L.collapsed&&!Y.options.lineWrapping&&Jn(ye)==Y.display.maxLine&&(J=!0),L.collapsed&&H!=d.line&&Pt(ye,0),kO(ye,new Cu(L,H==d.line?d.ch:null,H==b.line?b.ch:null),s.cm&&s.cm.curOp),++H}),L.collapsed&&s.iter(d.line,b.line+1,function(ye){ni(s,ye)&&Pt(ye,0)}),L.clearOnEnter&&Te(L,"beforeCursorEnter",function(){return L.clear()}),L.readOnly&&(RO(),(s.history.done.length||s.history.undone.length)&&s.clearHistory()),L.collapsed&&(L.id=++Mx,L.atomic=!0),Y){if(J&&(Y.curOp.updateMaxLine=!0),L.collapsed)mn(Y,d.line,b.line+1);else if(L.className||L.startStyle||L.endStyle||L.css||L.attributes||L.title)for(var ce=d.line;ce<=b.line;ce++)ai(Y,ce,"text");L.atomic&&bx(Y.doc),_r(Y,"markerAdded",Y,L)}return L}var rl=function(s,d){this.markers=s,this.primary=d;for(var b=0;b<s.length;++b)s[b].parent=this};rl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var s=0;s<this.markers.length;++s)this.markers[s].clear();_r(this,"clear")}},rl.prototype.find=function(s,d){return this.primary.find(s,d)},Ge(rl);function UI(s,d,b,m,S){m=se(m),m.shared=!1;var L=[Uo(s,d,b,m,S)],O=L[0],H=m.widgetNode;return li(s,function(Y){H&&(m.widgetNode=H.cloneNode(!0)),L.push(Uo(Y,xt(Y,d),xt(Y,b),m,S));for(var J=0;J<Y.linked.length;++J)if(Y.linked[J].isParent)return;O=de(L)}),new rl(L,O)}function Rx(s){return s.findMarks(Me(s.first,0),s.clipPos(Me(s.lastLine())),function(d){return d.parent})}function WI(s,d){for(var b=0;b<d.length;b++){var m=d[b],S=m.find(),L=s.clipPos(S.from),O=s.clipPos(S.to);if(je(L,O)){var H=Uo(s,L,O,m.primary,m.primary.type);m.markers.push(H),H.parent=m}}}function VI(s){for(var d=function(m){var S=s[m],L=[S.primary.doc];li(S.primary.doc,function(Y){return L.push(Y)});for(var O=0;O<S.markers.length;O++){var H=S.markers[O];le(L,H.doc)==-1&&(H.parent=null,S.markers.splice(O--,1))}},b=0;b<s.length;b++)d(b)}var $I=0,bn=function(s,d,b,m,S){if(!(this instanceof bn))return new bn(s,d,b,m,S);b==null&&(b=0),el.call(this,[new Js([new Ro("",null)])]),this.first=b,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=b;var L=Me(b,0);this.sel=oi(L),this.history=new Bu(null),this.id=++$I,this.modeOption=d,this.lineSep=m,this.direction=S=="rtl"?"rtl":"ltr",this.extend=!1,typeof s=="string"&&(s=this.splitLines(s)),Fd(this,{from:L,to:L,text:s}),jr(this,oi(L),ie)};bn.prototype=Re(el.prototype,{constructor:bn,iter:function(s,d,b){b?this.iterN(s-this.first,d-s,b):this.iterN(this.first,this.first+this.size,s)},insert:function(s,d){for(var b=0,m=0;m<d.length;++m)b+=d[m].height;this.insertInner(s-this.first,d,b)},remove:function(s,d){this.removeInner(s-this.first,d)},getValue:function(s){var d=Qn(this,this.first,this.first+this.size);return s===!1?d:d.join(s||this.lineSeparator())},setValue:Rr(function(s){var d=Me(this.first,0),b=this.first+this.size-1;Go(this,{from:d,to:Me(b,lt(this,b).text.length),text:this.splitLines(s),origin:"setValue",full:!0},!0),this.cm&&Ws(this.cm,0,0),jr(this,oi(d),ie)}),replaceRange:function(s,d,b,m){d=xt(this,d),b=b?xt(this,b):d,Ho(this,s,d,b,m)},getRange:function(s,d,b){var m=Gr(this,xt(this,s),xt(this,d));return b===!1?m:b===""?m.join(""):m.join(b||this.lineSeparator())},getLine:function(s){var d=this.getLineHandle(s);return d&&d.text},getLineHandle:function(s){if(Pe(this,s))return lt(this,s)},getLineNumber:function(s){return Q(s)},getLineHandleVisualStart:function(s){return typeof s=="number"&&(s=lt(this,s)),Jn(s)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(s){return xt(this,s)},getCursor:function(s){var d=this.sel.primary(),b;return s==null||s=="head"?b=d.head:s=="anchor"?b=d.anchor:s=="end"||s=="to"||s===!1?b=d.to():b=d.from(),b},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Rr(function(s,d,b){gx(this,xt(this,typeof s=="number"?Me(s,d||0):s),null,b)}),setSelection:Rr(function(s,d,b){gx(this,xt(this,s),xt(this,d||s),b)}),extendSelection:Rr(function(s,d,b){zu(this,xt(this,s),d&&xt(this,d),b)}),extendSelections:Rr(function(s,d){px(this,ow(this,s),d)}),extendSelectionsBy:Rr(function(s,d){var b=be(this.sel.ranges,s);px(this,ow(this,b),d)}),setSelections:Rr(function(s,d,b){if(s.length){for(var m=[],S=0;S<s.length;S++)m[S]=new Bt(xt(this,s[S].anchor),xt(this,s[S].head||s[S].anchor));d==null&&(d=Math.min(s.length-1,this.sel.primIndex)),jr(this,ta(this.cm,m,d),b)}}),addSelection:Rr(function(s,d,b){var m=this.sel.ranges.slice(0);m.push(new Bt(xt(this,s),xt(this,d||s))),jr(this,ta(this.cm,m,m.length-1),b)}),getSelection:function(s){for(var d=this.sel.ranges,b,m=0;m<d.length;m++){var S=Gr(this,d[m].from(),d[m].to());b=b?b.concat(S):S}return s===!1?b:b.join(s||this.lineSeparator())},getSelections:function(s){for(var d=[],b=this.sel.ranges,m=0;m<b.length;m++){var S=Gr(this,b[m].from(),b[m].to());s!==!1&&(S=S.join(s||this.lineSeparator())),d[m]=S}return d},replaceSelection:function(s,d,b){for(var m=[],S=0;S<this.sel.ranges.length;S++)m[S]=s;this.replaceSelections(m,d,b||"+input")},replaceSelections:Rr(function(s,d,b){for(var m=[],S=this.sel,L=0;L<S.ranges.length;L++){var O=S.ranges[L];m[L]={from:O.from(),to:O.to(),text:this.splitLines(s[L]),origin:b}}for(var H=d&&d!="end"&&NI(this,m,d),Y=m.length-1;Y>=0;Y--)Go(this,m[Y]);H?yx(this,H):this.cm&&Fo(this.cm)}),undo:Rr(function(){Uu(this,"undo")}),redo:Rr(function(){Uu(this,"redo")}),undoSelection:Rr(function(){Uu(this,"undo",!0)}),redoSelection:Rr(function(){Uu(this,"redo",!0)}),setExtending:function(s){this.extend=s},getExtending:function(){return this.extend},historySize:function(){for(var s=this.history,d=0,b=0,m=0;m<s.done.length;m++)s.done[m].ranges||++d;for(var S=0;S<s.undone.length;S++)s.undone[S].ranges||++b;return{undo:d,redo:b}},clearHistory:function(){var s=this;this.history=new Bu(this.history),li(this,function(d){return d.history=s.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(s){return s&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(s){return this.history.generation==(s||this.cleanGeneration)},getHistory:function(){return{done:qo(this.history.done),undone:qo(this.history.undone)}},setHistory:function(s){var d=this.history=new Bu(this.history);d.done=qo(s.done.slice(0),null,!0),d.undone=qo(s.undone.slice(0),null,!0)},setGutterMarker:Rr(function(s,d,b){return Qs(this,s,"gutter",function(m){var S=m.gutterMarkers||(m.gutterMarkers={});return S[d]=b,!b&&$e(S)&&(m.gutterMarkers=null),!0})}),clearGutter:Rr(function(s){var d=this;this.iter(function(b){b.gutterMarkers&&b.gutterMarkers[s]&&Qs(d,b,"gutter",function(){return b.gutterMarkers[s]=null,$e(b.gutterMarkers)&&(b.gutterMarkers=null),!0})})}),lineInfo:function(s){var d;if(typeof s=="number"){if(!Pe(this,s)||(d=s,s=lt(this,s),!s))return null}else if(d=Q(s),d==null)return null;return{line:d,handle:s,text:s.text,gutterMarkers:s.gutterMarkers,textClass:s.textClass,bgClass:s.bgClass,wrapClass:s.wrapClass,widgets:s.widgets}},addLineClass:Rr(function(s,d,b){return Qs(this,s,d=="gutter"?"gutter":"class",function(m){var S=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass";if(!m[S])m[S]=b;else{if(G(b).test(m[S]))return!1;m[S]+=" "+b}return!0})}),removeLineClass:Rr(function(s,d,b){return Qs(this,s,d=="gutter"?"gutter":"class",function(m){var S=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass",L=m[S];if(L)if(b==null)m[S]=null;else{var O=L.match(G(b));if(!O)return!1;var H=O.index+O[0].length;m[S]=L.slice(0,O.index)+(!O.index||H==L.length?"":" ")+L.slice(H)||null}else return!1;return!0})}),addLineWidget:Rr(function(s,d,b){return HI(this,s,d,b)}),removeLineWidget:function(s){s.clear()},markText:function(s,d,b){return Uo(this,xt(this,s),xt(this,d),b,b&&b.type||"range")},setBookmark:function(s,d){var b={replacedWith:d&&(d.nodeType==null?d.widget:d),insertLeft:d&&d.insertLeft,clearWhenEmpty:!1,shared:d&&d.shared,handleMouseEvents:d&&d.handleMouseEvents};return s=xt(this,s),Uo(this,s,s,b,"bookmark")},findMarksAt:function(s){s=xt(this,s);var d=[],b=lt(this,s.line).markedSpans;if(b)for(var m=0;m<b.length;++m){var S=b[m];(S.from==null||S.from<=s.ch)&&(S.to==null||S.to>=s.ch)&&d.push(S.marker.parent||S.marker)}return d},findMarks:function(s,d,b){s=xt(this,s),d=xt(this,d);var m=[],S=s.line;return this.iter(s.line,d.line+1,function(L){var O=L.markedSpans;if(O)for(var H=0;H<O.length;H++){var Y=O[H];!(Y.to!=null&&S==s.line&&s.ch>=Y.to||Y.from==null&&S!=s.line||Y.from!=null&&S==d.line&&Y.from>=d.ch)&&(!b||b(Y.marker))&&m.push(Y.marker.parent||Y.marker)}++S}),m},getAllMarks:function(){var s=[];return this.iter(function(d){var b=d.markedSpans;if(b)for(var m=0;m<b.length;++m)b[m].from!=null&&s.push(b[m].marker)}),s},posFromIndex:function(s){var d,b=this.first,m=this.lineSeparator().length;return this.iter(function(S){var L=S.text.length+m;if(L>s)return d=s,!0;s-=L,++b}),xt(this,Me(b,d))},indexFromPos:function(s){s=xt(this,s);var d=s.ch;if(s.line<this.first||s.ch<0)return 0;var b=this.lineSeparator().length;return this.iter(this.first,s.line,function(m){d+=m.text.length+b}),d},copy:function(s){var d=new bn(Qn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return d.scrollTop=this.scrollTop,d.scrollLeft=this.scrollLeft,d.sel=this.sel,d.extend=!1,s&&(d.history.undoDepth=this.history.undoDepth,d.setHistory(this.getHistory())),d},linkedDoc:function(s){s||(s={});var d=this.first,b=this.first+this.size;s.from!=null&&s.from>d&&(d=s.from),s.to!=null&&s.to<b&&(b=s.to);var m=new bn(Qn(this,d,b),s.mode||this.modeOption,d,this.lineSep,this.direction);return s.sharedHist&&(m.history=this.history),(this.linked||(this.linked=[])).push({doc:m,sharedHist:s.sharedHist}),m.linked=[{doc:this,isParent:!0,sharedHist:s.sharedHist}],WI(m,Rx(this)),m},unlinkDoc:function(s){if(s instanceof ar&&(s=s.doc),this.linked)for(var d=0;d<this.linked.length;++d){var b=this.linked[d];if(b.doc==s){this.linked.splice(d,1),s.unlinkDoc(this),VI(Rx(this));break}}if(s.history==this.history){var m=[s.id];li(s,function(S){return m.push(S.id)},!0),s.history=new Bu(null),s.history.done=qo(this.history.done,m),s.history.undone=qo(this.history.undone,m)}},iterLinkedDocs:function(s){li(this,s)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(s){return this.lineSep?s.split(this.lineSep):zt(s)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Rr(function(s){s!="rtl"&&(s="ltr"),s!=this.direction&&(this.direction=s,this.iter(function(d){return d.order=null}),this.cm&&kI(this.cm))})}),bn.prototype.eachLine=bn.prototype.iter;var Px=0;function YI(s){var d=this;if(Nx(d),!(Ue(d,s)||Na(d.display,s))){Ve(s),u&&(Px=+new Date);var b=Wi(d,s,!0),m=s.dataTransfer.files;if(!(!b||d.isReadOnly()))if(m&&m.length&&window.FileReader&&window.File)for(var S=m.length,L=Array(S),O=0,H=function(){++O==S&&Mr(d,function(){b=xt(d.doc,b);var Ae={from:b,to:b,text:d.doc.splitLines(L.filter(function(Ne){return Ne!=null}).join(d.doc.lineSeparator())),origin:"paste"};Go(d.doc,Ae),yx(d.doc,oi(xt(d.doc,b),xt(d.doc,si(Ae))))})()},Y=function(Ae,Ne){if(d.options.allowDropFileTypes&&le(d.options.allowDropFileTypes,Ae.type)==-1){H();return}var Fe=new FileReader;Fe.onerror=function(){return H()},Fe.onload=function(){var Ye=Fe.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Ye)){H();return}L[Ne]=Ye,H()},Fe.readAsText(Ae)},J=0;J<m.length;J++)Y(m[J],J);else{if(d.state.draggingText&&d.doc.sel.contains(b)>-1){d.state.draggingText(s),setTimeout(function(){return d.display.input.focus()},20);return}try{var ce=s.dataTransfer.getData("Text");if(ce){var ye;if(d.state.draggingText&&!d.state.draggingText.copy&&(ye=d.listSelections()),Gu(d.doc,oi(b,b)),ye)for(var Le=0;Le<ye.length;++Le)Ho(d.doc,"",ye[Le].anchor,ye[Le].head,"drag");d.replaceSelection(ce,"around","paste"),d.display.input.focus()}}catch{}}}}function XI(s,d){if(u&&(!s.state.draggingText||+new Date-Px<100)){at(d);return}if(!(Ue(s,d)||Na(s.display,d))&&(d.dataTransfer.setData("Text",s.getSelection()),d.dataTransfer.effectAllowed="copyMove",d.dataTransfer.setDragImage&&!C)){var b=R("img",null,null,"position: fixed; left: 0; top: 0;");b.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y&&(b.width=b.height=1,s.display.wrapper.appendChild(b),b._top=b.offsetTop),d.dataTransfer.setDragImage(b,0,0),y&&b.parentNode.removeChild(b)}}function KI(s,d){var b=Wi(s,d);if(b){var m=document.createDocumentFragment();Td(s,b,m),s.display.dragCursor||(s.display.dragCursor=R("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),s.display.lineSpace.insertBefore(s.display.dragCursor,s.display.cursorDiv)),M(s.display.dragCursor,m)}}function Nx(s){s.display.dragCursor&&(s.display.lineSpace.removeChild(s.display.dragCursor),s.display.dragCursor=null)}function kx(s){if(document.getElementsByClassName){for(var d=document.getElementsByClassName("CodeMirror"),b=[],m=0;m<d.length;m++){var S=d[m].CodeMirror;S&&b.push(S)}b.length&&b[0].operation(function(){for(var L=0;L<b.length;L++)s(b[L])})}}var Ox=!1;function jI(){Ox||(ZI(),Ox=!0)}function ZI(){var s;Te(window,"resize",function(){s==null&&(s=setTimeout(function(){s=null,kx(QI)},100))}),Te(window,"blur",function(){return kx(Io)})}function QI(s){var d=s.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.scrollbarsClipped=!1,s.setSize()}for(var fi={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},nl=0;nl<10;nl++)fi[nl+48]=fi[nl+96]=String(nl);for(var Wu=65;Wu<=90;Wu++)fi[Wu]=String.fromCharCode(Wu);for(var al=1;al<=12;al++)fi[al+111]=fi[al+63235]="F"+al;var Oa={};Oa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Oa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Oa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Oa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Oa.default=A?Oa.macDefault:Oa.pcDefault;function JI(s){var d=s.split(/-(?!$)/);s=d[d.length-1];for(var b,m,S,L,O=0;O<d.length-1;O++){var H=d[O];if(/^(cmd|meta|m)$/i.test(H))L=!0;else if(/^a(lt)?$/i.test(H))b=!0;else if(/^(c|ctrl|control)$/i.test(H))m=!0;else if(/^s(hift)?$/i.test(H))S=!0;else throw new Error("Unrecognized modifier name: "+H)}return b&&(s="Alt-"+s),m&&(s="Ctrl-"+s),L&&(s="Cmd-"+s),S&&(s="Shift-"+s),s}function e2(s){var d={};for(var b in s)if(s.hasOwnProperty(b)){var m=s[b];if(/^(name|fallthrough|(de|at)tach)$/.test(b))continue;if(m=="..."){delete s[b];continue}for(var S=be(b.split(" "),JI),L=0;L<S.length;L++){var O=void 0,H=void 0;L==S.length-1?(H=S.join(" "),O=m):(H=S.slice(0,L+1).join(" "),O="...");var Y=d[H];if(!Y)d[H]=O;else if(Y!=O)throw new Error("Inconsistent bindings for "+H)}delete s[b]}for(var J in d)s[J]=d[J];return s}function Wo(s,d,b,m){d=Vu(d);var S=d.call?d.call(s,m):d[s];if(S===!1)return"nothing";if(S==="...")return"multi";if(S!=null&&b(S))return"handled";if(d.fallthrough){if(Object.prototype.toString.call(d.fallthrough)!="[object Array]")return Wo(s,d.fallthrough,b,m);for(var L=0;L<d.fallthrough.length;L++){var O=Wo(s,d.fallthrough[L],b,m);if(O)return O}}}function Ix(s){var d=typeof s=="string"?s:fi[s.keyCode];return d=="Ctrl"||d=="Alt"||d=="Shift"||d=="Mod"}function Fx(s,d,b){var m=s;return d.altKey&&m!="Alt"&&(s="Alt-"+s),(N?d.metaKey:d.ctrlKey)&&m!="Ctrl"&&(s="Ctrl-"+s),(N?d.ctrlKey:d.metaKey)&&m!="Mod"&&(s="Cmd-"+s),!b&&d.shiftKey&&m!="Shift"&&(s="Shift-"+s),s}function Bx(s,d){if(y&&s.keyCode==34&&s.char)return!1;var b=fi[s.keyCode];return b==null||s.altGraphKey?!1:(s.keyCode==3&&s.code&&(b=s.code),Fx(b,s,d))}function Vu(s){return typeof s=="string"?Oa[s]:s}function Vo(s,d){for(var b=s.doc.sel.ranges,m=[],S=0;S<b.length;S++){for(var L=d(b[S]);m.length&&je(L.from,de(m).to)<=0;){var O=m.pop();if(je(O.from,L.from)<0){L.from=O.from;break}}m.push(L)}Dn(s,function(){for(var H=m.length-1;H>=0;H--)Ho(s.doc,"",m[H].from,m[H].to,"+delete");Fo(s)})}function Gd(s,d,b){var m=We(s.text,d+b,b);return m<0||m>s.text.length?null:m}function Hd(s,d,b){var m=Gd(s,d.ch,b);return m==null?null:new Me(d.line,m,b<0?"after":"before")}function Ud(s,d,b,m,S){if(s){d.doc.direction=="rtl"&&(S=-S);var L=Ce(b,d.doc.direction);if(L){var O=S<0?de(L):L[0],H=S<0==(O.level==1),Y=H?"after":"before",J;if(O.level>0||d.doc.direction=="rtl"){var ce=No(d,b);J=S<0?b.text.length-1:0;var ye=ha(d,ce,J).top;J=ve(function(Le){return ha(d,ce,Le).top==ye},S<0==(O.level==1)?O.from:O.to-1,J),Y=="before"&&(J=Gd(b,J,1))}else J=S<0?O.to:O.from;return new Me(m,J,Y)}}return new Me(m,S<0?b.text.length:0,S<0?"before":"after")}function t2(s,d,b,m){var S=Ce(d,s.doc.direction);if(!S)return Hd(d,b,m);b.ch>=d.text.length?(b.ch=d.text.length,b.sticky="before"):b.ch<=0&&(b.ch=0,b.sticky="after");var L=we(S,b.ch,b.sticky),O=S[L];if(s.doc.direction=="ltr"&&O.level%2==0&&(m>0?O.to>b.ch:O.from<b.ch))return Hd(d,b,m);var H=function(Je,it){return Gd(d,Je instanceof Me?Je.ch:Je,it)},Y,J=function(Je){return s.options.lineWrapping?(Y=Y||No(s,d),Uw(s,d,Y,Je)):{begin:0,end:d.text.length}},ce=J(b.sticky=="before"?H(b,-1):b.ch);if(s.doc.direction=="rtl"||O.level==1){var ye=O.level==1==m<0,Le=H(b,ye?1:-1);if(Le!=null&&(ye?Le<=O.to&&Le<=ce.end:Le>=O.from&&Le>=ce.begin)){var Ae=ye?"before":"after";return new Me(b.line,Le,Ae)}}var Ne=function(Je,it,et){for(var st=function(Yt,Pr){return Pr?new Me(b.line,H(Yt,1),"before"):new Me(b.line,Yt,"after")};Je>=0&&Je<S.length;Je+=it){var yt=S[Je],vt=it>0==(yt.level!=1),St=vt?et.begin:H(et.end,-1);if(yt.from<=St&&St<yt.to||(St=vt?yt.from:H(yt.to,-1),et.begin<=St&&St<et.end))return st(St,vt)}},Fe=Ne(L+m,m,ce);if(Fe)return Fe;var Ye=m>0?ce.end:H(ce.begin,-1);return Ye!=null&&!(m>0&&Ye==d.text.length)&&(Fe=Ne(m>0?0:S.length-1,m,J(Ye)),Fe)?Fe:null}var il={selectAll:Cx,singleSelection:function(s){return s.setSelection(s.getCursor("anchor"),s.getCursor("head"),ie)},killLine:function(s){return Vo(s,function(d){if(d.empty()){var b=lt(s.doc,d.head.line).text.length;return d.head.ch==b&&d.head.line<s.lastLine()?{from:d.head,to:Me(d.head.line+1,0)}:{from:d.head,to:Me(d.head.line,b)}}else return{from:d.from(),to:d.to()}})},deleteLine:function(s){return Vo(s,function(d){return{from:Me(d.from().line,0),to:xt(s.doc,Me(d.to().line+1,0))}})},delLineLeft:function(s){return Vo(s,function(d){return{from:Me(d.from().line,0),to:d.from()}})},delWrappedLineLeft:function(s){return Vo(s,function(d){var b=s.charCoords(d.head,"div").top+5,m=s.coordsChar({left:0,top:b},"div");return{from:m,to:d.from()}})},delWrappedLineRight:function(s){return Vo(s,function(d){var b=s.charCoords(d.head,"div").top+5,m=s.coordsChar({left:s.display.lineDiv.offsetWidth+100,top:b},"div");return{from:d.from(),to:m}})},undo:function(s){return s.undo()},redo:function(s){return s.redo()},undoSelection:function(s){return s.undoSelection()},redoSelection:function(s){return s.redoSelection()},goDocStart:function(s){return s.extendSelection(Me(s.firstLine(),0))},goDocEnd:function(s){return s.extendSelection(Me(s.lastLine()))},goLineStart:function(s){return s.extendSelectionsBy(function(d){return qx(s,d.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(s){return s.extendSelectionsBy(function(d){return zx(s,d.head)},{origin:"+move",bias:1})},goLineEnd:function(s){return s.extendSelectionsBy(function(d){return r2(s,d.head.line)},{origin:"+move",bias:-1})},goLineRight:function(s){return s.extendSelectionsBy(function(d){var b=s.cursorCoords(d.head,"div").top+5;return s.coordsChar({left:s.display.lineDiv.offsetWidth+100,top:b},"div")},me)},goLineLeft:function(s){return s.extendSelectionsBy(function(d){var b=s.cursorCoords(d.head,"div").top+5;return s.coordsChar({left:0,top:b},"div")},me)},goLineLeftSmart:function(s){return s.extendSelectionsBy(function(d){var b=s.cursorCoords(d.head,"div").top+5,m=s.coordsChar({left:0,top:b},"div");return m.ch<s.getLine(m.line).search(/\S/)?zx(s,d.head):m},me)},goLineUp:function(s){return s.moveV(-1,"line")},goLineDown:function(s){return s.moveV(1,"line")},goPageUp:function(s){return s.moveV(-1,"page")},goPageDown:function(s){return s.moveV(1,"page")},goCharLeft:function(s){return s.moveH(-1,"char")},goCharRight:function(s){return s.moveH(1,"char")},goColumnLeft:function(s){return s.moveH(-1,"column")},goColumnRight:function(s){return s.moveH(1,"column")},goWordLeft:function(s){return s.moveH(-1,"word")},goGroupRight:function(s){return s.moveH(1,"group")},goGroupLeft:function(s){return s.moveH(-1,"group")},goWordRight:function(s){return s.moveH(1,"word")},delCharBefore:function(s){return s.deleteH(-1,"codepoint")},delCharAfter:function(s){return s.deleteH(1,"char")},delWordBefore:function(s){return s.deleteH(-1,"word")},delWordAfter:function(s){return s.deleteH(1,"word")},delGroupBefore:function(s){return s.deleteH(-1,"group")},delGroupAfter:function(s){return s.deleteH(1,"group")},indentAuto:function(s){return s.indentSelection("smart")},indentMore:function(s){return s.indentSelection("add")},indentLess:function(s){return s.indentSelection("subtract")},insertTab:function(s){return s.replaceSelection("	")},insertSoftTab:function(s){for(var d=[],b=s.listSelections(),m=s.options.tabSize,S=0;S<b.length;S++){var L=b[S].from(),O=te(s.getLine(L.line),L.ch,m);d.push(he(m-O%m))}s.replaceSelections(d)},defaultTab:function(s){s.somethingSelected()?s.indentSelection("add"):s.execCommand("insertTab")},transposeChars:function(s){return Dn(s,function(){for(var d=s.listSelections(),b=[],m=0;m<d.length;m++)if(d[m].empty()){var S=d[m].head,L=lt(s.doc,S.line).text;if(L){if(S.ch==L.length&&(S=new Me(S.line,S.ch-1)),S.ch>0)S=new Me(S.line,S.ch+1),s.replaceRange(L.charAt(S.ch-1)+L.charAt(S.ch-2),Me(S.line,S.ch-2),S,"+transpose");else if(S.line>s.doc.first){var O=lt(s.doc,S.line-1).text;O&&(S=new Me(S.line,1),s.replaceRange(L.charAt(0)+s.doc.lineSeparator()+O.charAt(O.length-1),Me(S.line-1,O.length-1),S,"+transpose"))}}b.push(new Bt(S,S))}s.setSelections(b)})},newlineAndIndent:function(s){return Dn(s,function(){for(var d=s.listSelections(),b=d.length-1;b>=0;b--)s.replaceRange(s.doc.lineSeparator(),d[b].anchor,d[b].head,"+input");d=s.listSelections();for(var m=0;m<d.length;m++)s.indentLine(d[m].from().line,null,!0);Fo(s)})},openLine:function(s){return s.replaceSelection(`
`,"start")},toggleOverwrite:function(s){return s.toggleOverwrite()}};function qx(s,d){var b=lt(s.doc,d),m=Jn(b);return m!=b&&(d=Q(m)),Ud(!0,s,m,d,1)}function r2(s,d){var b=lt(s.doc,d),m=qO(b);return m!=b&&(d=Q(m)),Ud(!0,s,b,d,-1)}function zx(s,d){var b=qx(s,d.line),m=lt(s.doc,b.line),S=Ce(m,s.doc.direction);if(!S||S[0].level==0){var L=Math.max(b.ch,m.text.search(/\S/)),O=d.line==b.line&&d.ch<=L&&d.ch;return Me(b.line,O?0:L,b.sticky)}return b}function $u(s,d,b){if(typeof d=="string"&&(d=il[d],!d))return!1;s.display.input.ensurePolled();var m=s.display.shift,S=!1;try{s.isReadOnly()&&(s.state.suppressEdits=!0),b&&(s.display.shift=!1),S=d(s)!=ne}finally{s.display.shift=m,s.state.suppressEdits=!1}return S}function n2(s,d,b){for(var m=0;m<s.state.keyMaps.length;m++){var S=Wo(d,s.state.keyMaps[m],b,s);if(S)return S}return s.options.extraKeys&&Wo(d,s.options.extraKeys,b,s)||Wo(d,s.options.keyMap,b,s)}var a2=new oe;function ol(s,d,b,m){var S=s.state.keySeq;if(S){if(Ix(d))return"handled";if(/\'$/.test(d)?s.state.keySeq=null:a2.set(50,function(){s.state.keySeq==S&&(s.state.keySeq=null,s.display.input.reset())}),Gx(s,S+" "+d,b,m))return!0}return Gx(s,d,b,m)}function Gx(s,d,b,m){var S=n2(s,d,m);return S=="multi"&&(s.state.keySeq=d),S=="handled"&&_r(s,"keyHandled",s,d,b),(S=="handled"||S=="multi")&&(Ve(b),Sd(s)),!!S}function Hx(s,d){var b=Bx(d,!0);return b?d.shiftKey&&!s.state.keySeq?ol(s,"Shift-"+b,d,function(m){return $u(s,m,!0)})||ol(s,b,d,function(m){if(typeof m=="string"?/^go[A-Z]/.test(m):m.motion)return $u(s,m)}):ol(s,b,d,function(m){return $u(s,m)}):!1}function i2(s,d,b){return ol(s,"'"+b+"'",d,function(m){return $u(s,m,!0)})}var Wd=null;function Ux(s){var d=this;if(!(s.target&&s.target!=d.display.input.getField())&&(d.curOp.focus=ae(U(d)),!Ue(d,s))){u&&f<11&&s.keyCode==27&&(s.returnValue=!1);var b=s.keyCode;d.display.shift=b==16||s.shiftKey;var m=Hx(d,s);y&&(Wd=m?b:null,!m&&b==88&&!on&&(A?s.metaKey:s.ctrlKey)&&d.replaceSelection("",null,"cut")),a&&!A&&!m&&b==46&&s.shiftKey&&!s.ctrlKey&&document.execCommand&&document.execCommand("cut"),b==18&&!/\bCodeMirror-crosshair\b/.test(d.display.lineDiv.className)&&o2(d)}}function o2(s){var d=s.display.lineDiv;re(d,"CodeMirror-crosshair");function b(m){(m.keyCode==18||!m.altKey)&&(F(d,"CodeMirror-crosshair"),Oe(document,"keyup",b),Oe(document,"mouseover",b))}Te(document,"keyup",b),Te(document,"mouseover",b)}function Wx(s){s.keyCode==16&&(this.doc.sel.shift=!1),Ue(this,s)}function Vx(s){var d=this;if(!(s.target&&s.target!=d.display.input.getField())&&!(Na(d.display,s)||Ue(d,s)||s.ctrlKey&&!s.altKey||A&&s.metaKey)){var b=s.keyCode,m=s.charCode;if(y&&b==Wd){Wd=null,Ve(s);return}if(!(y&&(!s.which||s.which<10)&&Hx(d,s))){var S=String.fromCharCode(m??b);S!="\b"&&(i2(d,s,S)||d.display.input.onKeyPress(s))}}}var s2=400,Vd=function(s,d,b){this.time=s,this.pos=d,this.button=b};Vd.prototype.compare=function(s,d,b){return this.time+s2>s&&je(d,this.pos)==0&&b==this.button};var sl,ll;function l2(s,d){var b=+new Date;return ll&&ll.compare(b,s,d)?(sl=ll=null,"triple"):sl&&sl.compare(b,s,d)?(ll=new Vd(b,s,d),sl=null,"double"):(sl=new Vd(b,s,d),ll=null,"single")}function $x(s){var d=this,b=d.display;if(!(Ue(d,s)||b.activeTouch&&b.input.supportsTouch())){if(b.input.ensurePolled(),b.shift=s.shiftKey,Na(b,s)){c||(b.scroller.draggable=!1,setTimeout(function(){return b.scroller.draggable=!0},100));return}if(!$d(d,s)){var m=Wi(d,s),S=ut(s),L=m?l2(m,S):"single";X(d).focus(),S==1&&d.state.selectingText&&d.state.selectingText(s),!(m&&u2(d,S,m,L,s))&&(S==1?m?c2(d,m,L,s):Et(s)==b.scroller&&Ve(s):S==2?(m&&zu(d.doc,m),setTimeout(function(){return b.input.focus()},20)):S==3&&(B?d.display.input.onContextMenu(s):Ad(d)))}}}function u2(s,d,b,m,S){var L="Click";return m=="double"?L="Double"+L:m=="triple"&&(L="Triple"+L),L=(d==1?"Left":d==2?"Middle":"Right")+L,ol(s,Fx(L,S),S,function(O){if(typeof O=="string"&&(O=il[O]),!O)return!1;var H=!1;try{s.isReadOnly()&&(s.state.suppressEdits=!0),H=O(s,b)!=ne}finally{s.state.suppressEdits=!1}return H})}function f2(s,d,b){var m=s.getOption("configureMouse"),S=m?m(s,d,b):{};if(S.unit==null){var L=_?b.shiftKey&&b.metaKey:b.altKey;S.unit=L?"rectangle":d=="single"?"char":d=="double"?"word":"line"}return(S.extend==null||s.doc.extend)&&(S.extend=s.doc.extend||b.shiftKey),S.addNew==null&&(S.addNew=A?b.metaKey:b.ctrlKey),S.moveOnDrag==null&&(S.moveOnDrag=!(A?b.altKey:b.ctrlKey)),S}function c2(s,d,b,m){u?setTimeout(ee(Yw,s),0):s.curOp.focus=ae(U(s));var S=f2(s,b,m),L=s.doc.sel,O;s.options.dragDrop&&pt&&!s.isReadOnly()&&b=="single"&&(O=L.contains(d))>-1&&(je((O=L.ranges[O]).from(),d)<0||d.xRel>0)&&(je(O.to(),d)>0||d.xRel<0)?d2(s,m,d,S):h2(s,m,d,S)}function d2(s,d,b,m){var S=s.display,L=!1,O=Mr(s,function(J){c&&(S.scroller.draggable=!1),s.state.draggingText=!1,s.state.delayingBlurEvent&&(s.hasFocus()?s.state.delayingBlurEvent=!1:Ad(s)),Oe(S.wrapper.ownerDocument,"mouseup",O),Oe(S.wrapper.ownerDocument,"mousemove",H),Oe(S.scroller,"dragstart",Y),Oe(S.scroller,"drop",O),L||(Ve(J),m.addNew||zu(s.doc,b,null,null,m.extend),c&&!C||u&&f==9?setTimeout(function(){S.wrapper.ownerDocument.body.focus({preventScroll:!0}),S.input.focus()},20):S.input.focus())}),H=function(J){L=L||Math.abs(d.clientX-J.clientX)+Math.abs(d.clientY-J.clientY)>=10},Y=function(){return L=!0};c&&(S.scroller.draggable=!0),s.state.draggingText=O,O.copy=!m.moveOnDrag,Te(S.wrapper.ownerDocument,"mouseup",O),Te(S.wrapper.ownerDocument,"mousemove",H),Te(S.scroller,"dragstart",Y),Te(S.scroller,"drop",O),s.state.delayingBlurEvent=!0,setTimeout(function(){return S.input.focus()},20),S.scroller.dragDrop&&S.scroller.dragDrop()}function Yx(s,d,b){if(b=="char")return new Bt(d,d);if(b=="word")return s.findWordAt(d);if(b=="line")return new Bt(Me(d.line,0),xt(s.doc,Me(d.line+1,0)));var m=b(s,d);return new Bt(m.from,m.to)}function h2(s,d,b,m){u&&Ad(s);var S=s.display,L=s.doc;Ve(d);var O,H,Y=L.sel,J=Y.ranges;if(m.addNew&&!m.extend?(H=L.sel.contains(b),H>-1?O=J[H]:O=new Bt(b,b)):(O=L.sel.primary(),H=L.sel.primIndex),m.unit=="rectangle")m.addNew||(O=new Bt(b,b)),b=Wi(s,d,!0,!0),H=-1;else{var ce=Yx(s,b,m.unit);m.extend?O=qd(O,ce.anchor,ce.head,m.extend):O=ce}m.addNew?H==-1?(H=J.length,jr(L,ta(s,J.concat([O]),H),{scroll:!1,origin:"*mouse"})):J.length>1&&J[H].empty()&&m.unit=="char"&&!m.extend?(jr(L,ta(s,J.slice(0,H).concat(J.slice(H+1)),0),{scroll:!1,origin:"*mouse"}),Y=L.sel):zd(L,H,O,ue):(H=0,jr(L,new On([O],0),ue),Y=L.sel);var ye=b;function Le(et){if(je(ye,et)!=0)if(ye=et,m.unit=="rectangle"){for(var st=[],yt=s.options.tabSize,vt=te(lt(L,b.line).text,b.ch,yt),St=te(lt(L,et.line).text,et.ch,yt),Yt=Math.min(vt,St),Pr=Math.max(vt,St),fr=Math.min(b.line,et.line),_n=Math.min(s.lastLine(),Math.max(b.line,et.line));fr<=_n;fr++){var wn=lt(L,fr).text,mr=ge(wn,Yt,yt);Yt==Pr?st.push(new Bt(Me(fr,mr),Me(fr,mr))):wn.length>mr&&st.push(new Bt(Me(fr,mr),Me(fr,ge(wn,Pr,yt))))}st.length||st.push(new Bt(b,b)),jr(L,ta(s,Y.ranges.slice(0,H).concat(st),H),{origin:"*mouse",scroll:!1}),s.scrollIntoView(et)}else{var xn=O,Hr=Yx(s,et,m.unit),Tr=xn.anchor,br;je(Hr.anchor,Tr)>0?(br=Hr.head,Tr=Mo(xn.from(),Hr.anchor)):(br=Hr.anchor,Tr=yn(xn.to(),Hr.head));var hr=Y.ranges.slice(0);hr[H]=v2(s,new Bt(xt(L,Tr),br)),jr(L,ta(s,hr,H),ue)}}var Ae=S.wrapper.getBoundingClientRect(),Ne=0;function Fe(et){var st=++Ne,yt=Wi(s,et,!0,m.unit=="rectangle");if(yt)if(je(yt,ye)!=0){s.curOp.focus=ae(U(s)),Le(yt);var vt=ku(S,L);(yt.line>=vt.to||yt.line<vt.from)&&setTimeout(Mr(s,function(){Ne==st&&Fe(et)}),150)}else{var St=et.clientY<Ae.top?-20:et.clientY>Ae.bottom?20:0;St&&setTimeout(Mr(s,function(){Ne==st&&(S.scroller.scrollTop+=St,Fe(et))}),50)}}function Ye(et){s.state.selectingText=!1,Ne=1/0,et&&(Ve(et),S.input.focus()),Oe(S.wrapper.ownerDocument,"mousemove",Je),Oe(S.wrapper.ownerDocument,"mouseup",it),L.history.lastSelOrigin=null}var Je=Mr(s,function(et){et.buttons===0||!ut(et)?Ye(et):Fe(et)}),it=Mr(s,Ye);s.state.selectingText=it,Te(S.wrapper.ownerDocument,"mousemove",Je),Te(S.wrapper.ownerDocument,"mouseup",it)}function v2(s,d){var b=d.anchor,m=d.head,S=lt(s.doc,b.line);if(je(b,m)==0&&b.sticky==m.sticky)return d;var L=Ce(S);if(!L)return d;var O=we(L,b.ch,b.sticky),H=L[O];if(H.from!=b.ch&&H.to!=b.ch)return d;var Y=O+(H.from==b.ch==(H.level!=1)?0:1);if(Y==0||Y==L.length)return d;var J;if(m.line!=b.line)J=(m.line-b.line)*(s.doc.direction=="ltr"?1:-1)>0;else{var ce=we(L,m.ch,m.sticky),ye=ce-O||(m.ch-b.ch)*(H.level==1?-1:1);ce==Y-1||ce==Y?J=ye<0:J=ye>0}var Le=L[Y+(J?-1:0)],Ae=J==(Le.level==1),Ne=Ae?Le.from:Le.to,Fe=Ae?"after":"before";return b.ch==Ne&&b.sticky==Fe?d:new Bt(new Me(b.line,Ne,Fe),m)}function Xx(s,d,b,m){var S,L;if(d.touches)S=d.touches[0].clientX,L=d.touches[0].clientY;else try{S=d.clientX,L=d.clientY}catch{return!1}if(S>=Math.floor(s.display.gutters.getBoundingClientRect().right))return!1;m&&Ve(d);var O=s.display,H=O.lineDiv.getBoundingClientRect();if(L>H.bottom||!Qe(s,b))return rt(d);L-=H.top-O.viewOffset;for(var Y=0;Y<s.display.gutterSpecs.length;++Y){var J=O.gutters.childNodes[Y];if(J&&J.getBoundingClientRect().right>=S){var ce=fe(s.doc,L),ye=s.display.gutterSpecs[Y];return He(s,b,s,ce,ye.className,d),rt(d)}}}function $d(s,d){return Xx(s,d,"gutterClick",!0)}function Kx(s,d){Na(s.display,d)||p2(s,d)||Ue(s,d,"contextmenu")||B||s.display.input.onContextMenu(d)}function p2(s,d){return Qe(s,"gutterContextMenu")?Xx(s,d,"gutterContextMenu",!1):!1}function jx(s){s.display.wrapper.className=s.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+s.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Hs(s)}var $o={toString:function(){return"CodeMirror.Init"}},Zx={},Yu={};function g2(s){var d=s.optionHandlers;function b(m,S,L,O){s.defaults[m]=S,L&&(d[m]=O?function(H,Y,J){J!=$o&&L(H,Y,J)}:L)}s.defineOption=b,s.Init=$o,b("value","",function(m,S){return m.setValue(S)},!0),b("mode",null,function(m,S){m.doc.modeOption=S,Id(m)},!0),b("indentUnit",2,Id,!0),b("indentWithTabs",!1),b("smartIndent",!0),b("tabSize",4,function(m){js(m),Hs(m),mn(m)},!0),b("lineSeparator",null,function(m,S){if(m.doc.lineSep=S,!!S){var L=[],O=m.doc.first;m.doc.iter(function(Y){for(var J=0;;){var ce=Y.text.indexOf(S,J);if(ce==-1)break;J=ce+S.length,L.push(Me(O,ce))}O++});for(var H=L.length-1;H>=0;H--)Ho(m.doc,S,L[H],Me(L[H].line,L[H].ch+S.length))}}),b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(m,S,L){m.state.specialChars=new RegExp(S.source+(S.test("	")?"":"|	"),"g"),L!=$o&&m.refresh()}),b("specialCharPlaceholder",VO,function(m){return m.refresh()},!0),b("electricChars",!0),b("inputStyle",T?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),b("spellcheck",!1,function(m,S){return m.getInputField().spellcheck=S},!0),b("autocorrect",!1,function(m,S){return m.getInputField().autocorrect=S},!0),b("autocapitalize",!1,function(m,S){return m.getInputField().autocapitalize=S},!0),b("rtlMoveVisually",!D),b("wholeLineUpdateBefore",!0),b("theme","default",function(m){jx(m),Ks(m)},!0),b("keyMap","default",function(m,S,L){var O=Vu(S),H=L!=$o&&Vu(L);H&&H.detach&&H.detach(m,O),O.attach&&O.attach(m,H||null)}),b("extraKeys",null),b("configureMouse",null),b("lineWrapping",!1,m2,!0),b("gutters",[],function(m,S){m.display.gutterSpecs=kd(S,m.options.lineNumbers),Ks(m)},!0),b("fixedGutter",!0,function(m,S){m.display.gutters.style.left=S?Cd(m.display)+"px":"0",m.refresh()},!0),b("coverGutterNextToScrollbar",!1,function(m){return Bo(m)},!0),b("scrollbarStyle","native",function(m){Jw(m),Bo(m),m.display.scrollbars.setScrollTop(m.doc.scrollTop),m.display.scrollbars.setScrollLeft(m.doc.scrollLeft)},!0),b("lineNumbers",!1,function(m,S){m.display.gutterSpecs=kd(m.options.gutters,S),Ks(m)},!0),b("firstLineNumber",1,Ks,!0),b("lineNumberFormatter",function(m){return m},Ks,!0),b("showCursorWhenSelecting",!1,Us,!0),b("resetSelectionOnContextMenu",!0),b("lineWiseCopyCut",!0),b("pasteLinesPerSelection",!0),b("selectionsMayTouch",!1),b("readOnly",!1,function(m,S){S=="nocursor"&&(Io(m),m.display.input.blur()),m.display.input.readOnlyChanged(S)}),b("screenReaderLabel",null,function(m,S){S=S===""?null:S,m.display.input.screenReaderLabelChanged(S)}),b("disableInput",!1,function(m,S){S||m.display.input.reset()},!0),b("dragDrop",!0,y2),b("allowDropFileTypes",null),b("cursorBlinkRate",530),b("cursorScrollMargin",0),b("cursorHeight",1,Us,!0),b("singleCursorHeightPerLine",!0,Us,!0),b("workTime",100),b("workDelay",100),b("flattenSpans",!0,js,!0),b("addModeClass",!1,js,!0),b("pollInterval",100),b("undoDepth",200,function(m,S){return m.doc.history.undoDepth=S}),b("historyEventDelay",1250),b("viewportMargin",10,function(m){return m.refresh()},!0),b("maxHighlightLength",1e4,js,!0),b("moveInputWithCursor",!0,function(m,S){S||m.display.input.resetPosition()}),b("tabindex",null,function(m,S){return m.display.input.getField().tabIndex=S||""}),b("autofocus",null),b("direction","ltr",function(m,S){return m.doc.setDirection(S)},!0),b("phrases",null)}function y2(s,d,b){var m=b&&b!=$o;if(!d!=!m){var S=s.display.dragFunctions,L=d?Te:Oe;L(s.display.scroller,"dragstart",S.start),L(s.display.scroller,"dragenter",S.enter),L(s.display.scroller,"dragover",S.over),L(s.display.scroller,"dragleave",S.leave),L(s.display.scroller,"drop",S.drop)}}function m2(s){s.options.lineWrapping?(re(s.display.wrapper,"CodeMirror-wrap"),s.display.sizer.style.minWidth="",s.display.sizerWidth=null):(F(s.display.wrapper,"CodeMirror-wrap"),dd(s)),Ed(s),mn(s),Hs(s),setTimeout(function(){return Bo(s)},100)}function ar(s,d){var b=this;if(!(this instanceof ar))return new ar(s,d);this.options=d=d?se(d):{},se(Zx,d,!1);var m=d.value;typeof m=="string"?m=new bn(m,d.mode,null,d.lineSeparator,d.direction):d.mode&&(m.modeOption=d.mode),this.doc=m;var S=new ar.inputStyles[d.inputStyle](this),L=this.display=new RI(s,m,S,d);L.wrapper.CodeMirror=this,jx(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Jw(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new oe,keySeq:null,specialChars:null},d.autofocus&&!T&&L.input.focus(),u&&f<11&&setTimeout(function(){return b.display.input.reset(!0)},20),b2(this),jI(),Xi(this),this.curOp.forceUpdate=!0,ux(this,m),d.autofocus&&!T||this.hasFocus()?setTimeout(function(){b.hasFocus()&&!b.state.focused&&Ld(b)},20):Io(this);for(var O in Yu)Yu.hasOwnProperty(O)&&Yu[O](this,d[O],$o);rx(this),d.finishInit&&d.finishInit(this);for(var H=0;H<Yd.length;++H)Yd[H](this);Ki(this),c&&d.lineWrapping&&getComputedStyle(L.lineDiv).textRendering=="optimizelegibility"&&(L.lineDiv.style.textRendering="auto")}ar.defaults=Zx,ar.optionHandlers=Yu;function b2(s){var d=s.display;Te(d.scroller,"mousedown",Mr(s,$x)),u&&f<11?Te(d.scroller,"dblclick",Mr(s,function(Y){if(!Ue(s,Y)){var J=Wi(s,Y);if(!(!J||$d(s,Y)||Na(s.display,Y))){Ve(Y);var ce=s.findWordAt(J);zu(s.doc,ce.anchor,ce.head)}}})):Te(d.scroller,"dblclick",function(Y){return Ue(s,Y)||Ve(Y)}),Te(d.scroller,"contextmenu",function(Y){return Kx(s,Y)}),Te(d.input.getField(),"contextmenu",function(Y){d.scroller.contains(Y.target)||Kx(s,Y)});var b,m={end:0};function S(){d.activeTouch&&(b=setTimeout(function(){return d.activeTouch=null},1e3),m=d.activeTouch,m.end=+new Date)}function L(Y){if(Y.touches.length!=1)return!1;var J=Y.touches[0];return J.radiusX<=1&&J.radiusY<=1}function O(Y,J){if(J.left==null)return!0;var ce=J.left-Y.left,ye=J.top-Y.top;return ce*ce+ye*ye>20*20}Te(d.scroller,"touchstart",function(Y){if(!Ue(s,Y)&&!L(Y)&&!$d(s,Y)){d.input.ensurePolled(),clearTimeout(b);var J=+new Date;d.activeTouch={start:J,moved:!1,prev:J-m.end<=300?m:null},Y.touches.length==1&&(d.activeTouch.left=Y.touches[0].pageX,d.activeTouch.top=Y.touches[0].pageY)}}),Te(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)}),Te(d.scroller,"touchend",function(Y){var J=d.activeTouch;if(J&&!Na(d,Y)&&J.left!=null&&!J.moved&&new Date-J.start<300){var ce=s.coordsChar(d.activeTouch,"page"),ye;!J.prev||O(J,J.prev)?ye=new Bt(ce,ce):!J.prev.prev||O(J,J.prev.prev)?ye=s.findWordAt(ce):ye=new Bt(Me(ce.line,0),xt(s.doc,Me(ce.line+1,0))),s.setSelection(ye.anchor,ye.head),s.focus(),Ve(Y)}S()}),Te(d.scroller,"touchcancel",S),Te(d.scroller,"scroll",function(){d.scroller.clientHeight&&(Vs(s,d.scroller.scrollTop),$i(s,d.scroller.scrollLeft,!0),He(s,"scroll",s))}),Te(d.scroller,"mousewheel",function(Y){return ix(s,Y)}),Te(d.scroller,"DOMMouseScroll",function(Y){return ix(s,Y)}),Te(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0}),d.dragFunctions={enter:function(Y){Ue(s,Y)||at(Y)},over:function(Y){Ue(s,Y)||(KI(s,Y),at(Y))},start:function(Y){return XI(s,Y)},drop:Mr(s,YI),leave:function(Y){Ue(s,Y)||Nx(s)}};var H=d.input.getField();Te(H,"keyup",function(Y){return Wx.call(s,Y)}),Te(H,"keydown",Mr(s,Ux)),Te(H,"keypress",Mr(s,Vx)),Te(H,"focus",function(Y){return Ld(s,Y)}),Te(H,"blur",function(Y){return Io(s,Y)})}var Yd=[];ar.defineInitHook=function(s){return Yd.push(s)};function ul(s,d,b,m){var S=s.doc,L;b==null&&(b="add"),b=="smart"&&(S.mode.indent?L=Fs(s,d).state:b="prev");var O=s.options.tabSize,H=lt(S,d),Y=te(H.text,null,O);H.stateAfter&&(H.stateAfter=null);var J=H.text.match(/^\s*/)[0],ce;if(!m&&!/\S/.test(H.text))ce=0,b="not";else if(b=="smart"&&(ce=S.mode.indent(L,H.text.slice(J.length),H.text),ce==ne||ce>150)){if(!m)return;b="prev"}b=="prev"?d>S.first?ce=te(lt(S,d-1).text,null,O):ce=0:b=="add"?ce=Y+s.options.indentUnit:b=="subtract"?ce=Y-s.options.indentUnit:typeof b=="number"&&(ce=Y+b),ce=Math.max(0,ce);var ye="",Le=0;if(s.options.indentWithTabs)for(var Ae=Math.floor(ce/O);Ae;--Ae)Le+=O,ye+="	";if(Le<ce&&(ye+=he(ce-Le)),ye!=J)return Ho(S,ye,Me(d,0),Me(d,J.length),"+input"),H.stateAfter=null,!0;for(var Ne=0;Ne<S.sel.ranges.length;Ne++){var Fe=S.sel.ranges[Ne];if(Fe.head.line==d&&Fe.head.ch<J.length){var Ye=Me(d,J.length);zd(S,Ne,new Bt(Ye,Ye));break}}}var ra=null;function Xu(s){ra=s}function Xd(s,d,b,m,S){var L=s.doc;s.display.shift=!1,m||(m=L.sel);var O=+new Date-200,H=S=="paste"||s.state.pasteIncoming>O,Y=zt(d),J=null;if(H&&m.ranges.length>1)if(ra&&ra.text.join(`
`)==d){if(m.ranges.length%ra.text.length==0){J=[];for(var ce=0;ce<ra.text.length;ce++)J.push(L.splitLines(ra.text[ce]))}}else Y.length==m.ranges.length&&s.options.pasteLinesPerSelection&&(J=be(Y,function(Je){return[Je]}));for(var ye=s.curOp.updateInput,Le=m.ranges.length-1;Le>=0;Le--){var Ae=m.ranges[Le],Ne=Ae.from(),Fe=Ae.to();Ae.empty()&&(b&&b>0?Ne=Me(Ne.line,Ne.ch-b):s.state.overwrite&&!H?Fe=Me(Fe.line,Math.min(lt(L,Fe.line).text.length,Fe.ch+de(Y).length)):H&&ra&&ra.lineWise&&ra.text.join(`
`)==Y.join(`
`)&&(Ne=Fe=Me(Ne.line,0)));var Ye={from:Ne,to:Fe,text:J?J[Le%J.length]:Y,origin:S||(H?"paste":s.state.cutIncoming>O?"cut":"+input")};Go(s.doc,Ye),_r(s,"inputRead",s,Ye)}d&&!H&&Jx(s,d),Fo(s),s.curOp.updateInput<2&&(s.curOp.updateInput=ye),s.curOp.typing=!0,s.state.pasteIncoming=s.state.cutIncoming=-1}function Qx(s,d){var b=s.clipboardData&&s.clipboardData.getData("Text");if(b)return s.preventDefault(),!d.isReadOnly()&&!d.options.disableInput&&d.hasFocus()&&Dn(d,function(){return Xd(d,b,0,null,"paste")}),!0}function Jx(s,d){if(!(!s.options.electricChars||!s.options.smartIndent))for(var b=s.doc.sel,m=b.ranges.length-1;m>=0;m--){var S=b.ranges[m];if(!(S.head.ch>100||m&&b.ranges[m-1].head.line==S.head.line)){var L=s.getModeAt(S.head),O=!1;if(L.electricChars){for(var H=0;H<L.electricChars.length;H++)if(d.indexOf(L.electricChars.charAt(H))>-1){O=ul(s,S.head.line,"smart");break}}else L.electricInput&&L.electricInput.test(lt(s.doc,S.head.line).text.slice(0,S.head.ch))&&(O=ul(s,S.head.line,"smart"));O&&_r(s,"electricInput",s,S.head.line)}}}function eC(s){for(var d=[],b=[],m=0;m<s.doc.sel.ranges.length;m++){var S=s.doc.sel.ranges[m].head.line,L={anchor:Me(S,0),head:Me(S+1,0)};b.push(L),d.push(s.getRange(L.anchor,L.head))}return{text:d,ranges:b}}function Kd(s,d,b,m){s.setAttribute("autocorrect",b?"on":"off"),s.setAttribute("autocapitalize",m?"on":"off"),s.setAttribute("spellcheck",!!d)}function tC(){var s=R("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),d=R("div",[s],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return c?s.style.width="1000px":s.setAttribute("wrap","off"),x&&(s.style.border="1px solid black"),d}function w2(s){var d=s.optionHandlers,b=s.helpers={};s.prototype={constructor:s,focus:function(){X(this).focus(),this.display.input.focus()},setOption:function(m,S){var L=this.options,O=L[m];L[m]==S&&m!="mode"||(L[m]=S,d.hasOwnProperty(m)&&Mr(this,d[m])(this,S,O),He(this,"optionChange",this,m))},getOption:function(m){return this.options[m]},getDoc:function(){return this.doc},addKeyMap:function(m,S){this.state.keyMaps[S?"push":"unshift"](Vu(m))},removeKeyMap:function(m){for(var S=this.state.keyMaps,L=0;L<S.length;++L)if(S[L]==m||S[L].name==m)return S.splice(L,1),!0},addOverlay:ln(function(m,S){var L=m.token?m:s.getMode(this.options,m);if(L.startState)throw new Error("Overlays may not be stateful.");De(this.state.overlays,{mode:L,modeSpec:m,opaque:S&&S.opaque,priority:S&&S.priority||0},function(O){return O.priority}),this.state.modeGen++,mn(this)}),removeOverlay:ln(function(m){for(var S=this.state.overlays,L=0;L<S.length;++L){var O=S[L].modeSpec;if(O==m||typeof m=="string"&&O.name==m){S.splice(L,1),this.state.modeGen++,mn(this);return}}}),indentLine:ln(function(m,S,L){typeof S!="string"&&typeof S!="number"&&(S==null?S=this.options.smartIndent?"smart":"prev":S=S?"add":"subtract"),Pe(this.doc,m)&&ul(this,m,S,L)}),indentSelection:ln(function(m){for(var S=this.doc.sel.ranges,L=-1,O=0;O<S.length;O++){var H=S[O];if(H.empty())H.head.line>L&&(ul(this,H.head.line,m,!0),L=H.head.line,O==this.doc.sel.primIndex&&Fo(this));else{var Y=H.from(),J=H.to(),ce=Math.max(L,Y.line);L=Math.min(this.lastLine(),J.line-(J.ch?0:1))+1;for(var ye=ce;ye<L;++ye)ul(this,ye,m);var Le=this.doc.sel.ranges;Y.ch==0&&S.length==Le.length&&Le[O].from().ch>0&&zd(this.doc,O,new Bt(Y,Le[O].to()),ie)}}}),getTokenAt:function(m,S){return cw(this,m,S)},getLineTokens:function(m,S){return cw(this,Me(m),S,!0)},getTokenTypeAt:function(m){m=xt(this.doc,m);var S=lw(this,lt(this.doc,m.line)),L=0,O=(S.length-1)/2,H=m.ch,Y;if(H==0)Y=S[2];else for(;;){var J=L+O>>1;if((J?S[J*2-1]:0)>=H)O=J;else if(S[J*2+1]<H)L=J+1;else{Y=S[J*2+2];break}}var ce=Y?Y.indexOf("overlay "):-1;return ce<0?Y:ce==0?null:Y.slice(0,ce-1)},getModeAt:function(m){var S=this.doc.mode;return S.innerMode?s.innerMode(S,this.getTokenAt(m).state).mode:S},getHelper:function(m,S){return this.getHelpers(m,S)[0]},getHelpers:function(m,S){var L=[];if(!b.hasOwnProperty(S))return L;var O=b[S],H=this.getModeAt(m);if(typeof H[S]=="string")O[H[S]]&&L.push(O[H[S]]);else if(H[S])for(var Y=0;Y<H[S].length;Y++){var J=O[H[S][Y]];J&&L.push(J)}else H.helperType&&O[H.helperType]?L.push(O[H.helperType]):O[H.name]&&L.push(O[H.name]);for(var ce=0;ce<O._global.length;ce++){var ye=O._global[ce];ye.pred(H,this)&&le(L,ye.val)==-1&&L.push(ye.val)}return L},getStateAfter:function(m,S){var L=this.doc;return m=iw(L,m??L.first+L.size-1),Fs(this,m+1,S).state},cursorCoords:function(m,S){var L,O=this.doc.sel.primary();return m==null?L=O.head:typeof m=="object"?L=xt(this.doc,m):L=m?O.from():O.to(),ea(this,L,S||"page")},charCoords:function(m,S){return Mu(this,xt(this.doc,m),S||"page")},coordsChar:function(m,S){return m=zw(this,m,S||"page"),bd(this,m.left,m.top)},lineAtHeight:function(m,S){return m=zw(this,{top:m,left:0},S||"page").top,fe(this.doc,m+this.display.viewOffset)},heightAtLine:function(m,S,L){var O=!1,H;if(typeof m=="number"){var Y=this.doc.first+this.doc.size-1;m<this.doc.first?m=this.doc.first:m>Y&&(m=Y,O=!0),H=lt(this.doc,m)}else H=m;return _u(this,H,{top:0,left:0},S||"page",L||O).top+(O?this.doc.height-Pa(H):0)},defaultTextHeight:function(){return ko(this.display)},defaultCharWidth:function(){return Oo(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(m,S,L,O,H){var Y=this.display;m=ea(this,xt(this.doc,m));var J=m.bottom,ce=m.left;if(S.style.position="absolute",S.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(S),Y.sizer.appendChild(S),O=="over")J=m.top;else if(O=="above"||O=="near"){var ye=Math.max(Y.wrapper.clientHeight,this.doc.height),Le=Math.max(Y.sizer.clientWidth,Y.lineSpace.clientWidth);(O=="above"||m.bottom+S.offsetHeight>ye)&&m.top>S.offsetHeight?J=m.top-S.offsetHeight:m.bottom+S.offsetHeight<=ye&&(J=m.bottom),ce+S.offsetWidth>Le&&(ce=Le-S.offsetWidth)}S.style.top=J+"px",S.style.left=S.style.right="",H=="right"?(ce=Y.sizer.clientWidth-S.offsetWidth,S.style.right="0px"):(H=="left"?ce=0:H=="middle"&&(ce=(Y.sizer.clientWidth-S.offsetWidth)/2),S.style.left=ce+"px"),L&&yI(this,{left:ce,top:J,right:ce+S.offsetWidth,bottom:J+S.offsetHeight})},triggerOnKeyDown:ln(Ux),triggerOnKeyPress:ln(Vx),triggerOnKeyUp:Wx,triggerOnMouseDown:ln($x),execCommand:function(m){if(il.hasOwnProperty(m))return il[m].call(null,this)},triggerElectric:ln(function(m){Jx(this,m)}),findPosH:function(m,S,L,O){var H=1;S<0&&(H=-1,S=-S);for(var Y=xt(this.doc,m),J=0;J<S&&(Y=jd(this.doc,Y,H,L,O),!Y.hitSide);++J);return Y},moveH:ln(function(m,S){var L=this;this.extendSelectionsBy(function(O){return L.display.shift||L.doc.extend||O.empty()?jd(L.doc,O.head,m,S,L.options.rtlMoveVisually):m<0?O.from():O.to()},me)}),deleteH:ln(function(m,S){var L=this.doc.sel,O=this.doc;L.somethingSelected()?O.replaceSelection("",null,"+delete"):Vo(this,function(H){var Y=jd(O,H.head,m,S,!1);return m<0?{from:Y,to:H.head}:{from:H.head,to:Y}})}),findPosV:function(m,S,L,O){var H=1,Y=O;S<0&&(H=-1,S=-S);for(var J=xt(this.doc,m),ce=0;ce<S;++ce){var ye=ea(this,J,"div");if(Y==null?Y=ye.left:ye.left=Y,J=rC(this,ye,H,L),J.hitSide)break}return J},moveV:ln(function(m,S){var L=this,O=this.doc,H=[],Y=!this.display.shift&&!O.extend&&O.sel.somethingSelected();if(O.extendSelectionsBy(function(ce){if(Y)return m<0?ce.from():ce.to();var ye=ea(L,ce.head,"div");ce.goalColumn!=null&&(ye.left=ce.goalColumn),H.push(ye.left);var Le=rC(L,ye,m,S);return S=="page"&&ce==O.sel.primary()&&_d(L,Mu(L,Le,"div").top-ye.top),Le},me),H.length)for(var J=0;J<O.sel.ranges.length;J++)O.sel.ranges[J].goalColumn=H[J]}),findWordAt:function(m){var S=this.doc,L=lt(S,m.line).text,O=m.ch,H=m.ch;if(L){var Y=this.getHelper(m,"wordChars");(m.sticky=="before"||H==L.length)&&O?--O:++H;for(var J=L.charAt(O),ce=Ze(J,Y)?function(ye){return Ze(ye,Y)}:/\s/.test(J)?function(ye){return/\s/.test(ye)}:function(ye){return!/\s/.test(ye)&&!Ze(ye)};O>0&&ce(L.charAt(O-1));)--O;for(;H<L.length&&ce(L.charAt(H));)++H}return new Bt(Me(m.line,O),Me(m.line,H))},toggleOverwrite:function(m){m!=null&&m==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?re(this.display.cursorDiv,"CodeMirror-overwrite"):F(this.display.cursorDiv,"CodeMirror-overwrite"),He(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ae(U(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ln(function(m,S){Ws(this,m,S)}),getScrollInfo:function(){var m=this.display.scroller;return{left:m.scrollLeft,top:m.scrollTop,height:m.scrollHeight-da(this)-this.display.barHeight,width:m.scrollWidth-da(this)-this.display.barWidth,clientHeight:pd(this),clientWidth:Hi(this)}},scrollIntoView:ln(function(m,S){m==null?(m={from:this.doc.sel.primary().head,to:null},S==null&&(S=this.options.cursorScrollMargin)):typeof m=="number"?m={from:Me(m,0),to:null}:m.from==null&&(m={from:m,to:null}),m.to||(m.to=m.from),m.margin=S||0,m.from.line!=null?mI(this,m):Kw(this,m.from,m.to,m.margin)}),setSize:ln(function(m,S){var L=this,O=function(Y){return typeof Y=="number"||/^\d+$/.test(String(Y))?Y+"px":Y};m!=null&&(this.display.wrapper.style.width=O(m)),S!=null&&(this.display.wrapper.style.height=O(S)),this.options.lineWrapping&&Fw(this);var H=this.display.viewFrom;this.doc.iter(H,this.display.viewTo,function(Y){if(Y.widgets){for(var J=0;J<Y.widgets.length;J++)if(Y.widgets[J].noHScroll){ai(L,H,"widget");break}}++H}),this.curOp.forceUpdate=!0,He(this,"refresh",this)}),operation:function(m){return Dn(this,m)},startOperation:function(){return Xi(this)},endOperation:function(){return Ki(this)},refresh:ln(function(){var m=this.display.cachedTextHeight;mn(this),this.curOp.forceUpdate=!0,Hs(this),Ws(this,this.doc.scrollLeft,this.doc.scrollTop),Pd(this.display),(m==null||Math.abs(m-ko(this.display))>.5||this.options.lineWrapping)&&Ed(this),He(this,"refresh",this)}),swapDoc:ln(function(m){var S=this.doc;return S.cm=null,this.state.selectingText&&this.state.selectingText(),ux(this,m),Hs(this),this.display.input.reset(),Ws(this,m.scrollLeft,m.scrollTop),this.curOp.forceScroll=!0,_r(this,"swapDoc",this,S),S}),phrase:function(m){var S=this.options.phrases;return S&&Object.prototype.hasOwnProperty.call(S,m)?S[m]:m},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ge(s),s.registerHelper=function(m,S,L){b.hasOwnProperty(m)||(b[m]=s[m]={_global:[]}),b[m][S]=L},s.registerGlobalHelper=function(m,S,L,O){s.registerHelper(m,S,O),b[m]._global.push({pred:L,val:O})}}function jd(s,d,b,m,S){var L=d,O=b,H=lt(s,d.line),Y=S&&s.direction=="rtl"?-b:b;function J(){var it=d.line+Y;return it<s.first||it>=s.first+s.size?!1:(d=new Me(it,d.ch,d.sticky),H=lt(s,it))}function ce(it){var et;if(m=="codepoint"){var st=H.text.charCodeAt(d.ch+(b>0?0:-1));if(isNaN(st))et=null;else{var yt=b>0?st>=55296&&st<56320:st>=56320&&st<57343;et=new Me(d.line,Math.max(0,Math.min(H.text.length,d.ch+b*(yt?2:1))),-b)}}else S?et=t2(s.cm,H,d,b):et=Hd(H,d,b);if(et==null)if(!it&&J())d=Ud(S,s.cm,H,d.line,Y);else return!1;else d=et;return!0}if(m=="char"||m=="codepoint")ce();else if(m=="column")ce(!0);else if(m=="word"||m=="group")for(var ye=null,Le=m=="group",Ae=s.cm&&s.cm.getHelper(d,"wordChars"),Ne=!0;!(b<0&&!ce(!Ne));Ne=!1){var Fe=H.text.charAt(d.ch)||`
`,Ye=Ze(Fe,Ae)?"w":Le&&Fe==`
`?"n":!Le||/\s/.test(Fe)?null:"p";if(Le&&!Ne&&!Ye&&(Ye="s"),ye&&ye!=Ye){b<0&&(b=1,ce(),d.sticky="after");break}if(Ye&&(ye=Ye),b>0&&!ce(!Ne))break}var Je=Hu(s,d,L,O,!0);return Nt(L,Je)&&(Je.hitSide=!0),Je}function rC(s,d,b,m){var S=s.doc,L=d.left,O;if(m=="page"){var H=Math.min(s.display.wrapper.clientHeight,X(s).innerHeight||S(s).documentElement.clientHeight),Y=Math.max(H-.5*ko(s.display),3);O=(b>0?d.bottom:d.top)+b*Y}else m=="line"&&(O=b>0?d.bottom+3:d.top-3);for(var J;J=bd(s,L,O),!!J.outside;){if(b<0?O<=0:O>=S.height){J.hitSide=!0;break}O+=b*5}return J}var Gt=function(s){this.cm=s,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new oe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Gt.prototype.init=function(s){var d=this,b=this,m=b.cm,S=b.div=s.lineDiv;S.contentEditable=!0,Kd(S,m.options.spellcheck,m.options.autocorrect,m.options.autocapitalize);function L(H){for(var Y=H.target;Y;Y=Y.parentNode){if(Y==S)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Y.className))break}return!1}Te(S,"paste",function(H){!L(H)||Ue(m,H)||Qx(H,m)||f<=11&&setTimeout(Mr(m,function(){return d.updateFromDOM()}),20)}),Te(S,"compositionstart",function(H){d.composing={data:H.data,done:!1}}),Te(S,"compositionupdate",function(H){d.composing||(d.composing={data:H.data,done:!1})}),Te(S,"compositionend",function(H){d.composing&&(H.data!=d.composing.data&&d.readFromDOMSoon(),d.composing.done=!0)}),Te(S,"touchstart",function(){return b.forceCompositionEnd()}),Te(S,"input",function(){d.composing||d.readFromDOMSoon()});function O(H){if(!(!L(H)||Ue(m,H))){if(m.somethingSelected())Xu({lineWise:!1,text:m.getSelections()}),H.type=="cut"&&m.replaceSelection("",null,"cut");else if(m.options.lineWiseCopyCut){var Y=eC(m);Xu({lineWise:!0,text:Y.text}),H.type=="cut"&&m.operation(function(){m.setSelections(Y.ranges,0,ie),m.replaceSelection("",null,"cut")})}else return;if(H.clipboardData){H.clipboardData.clearData();var J=ra.text.join(`
`);if(H.clipboardData.setData("Text",J),H.clipboardData.getData("Text")==J){H.preventDefault();return}}var ce=tC(),ye=ce.firstChild;Kd(ye),m.display.lineSpace.insertBefore(ce,m.display.lineSpace.firstChild),ye.value=ra.text.join(`
`);var Le=ae(V(S));W(ye),setTimeout(function(){m.display.lineSpace.removeChild(ce),Le.focus(),Le==S&&b.showPrimarySelection()},50)}}Te(S,"copy",O),Te(S,"cut",O)},Gt.prototype.screenReaderLabelChanged=function(s){s?this.div.setAttribute("aria-label",s):this.div.removeAttribute("aria-label")},Gt.prototype.prepareSelection=function(){var s=$w(this.cm,!1);return s.focus=ae(V(this.div))==this.div,s},Gt.prototype.showSelection=function(s,d){!s||!this.cm.display.view.length||((s.focus||d)&&this.showPrimarySelection(),this.showMultipleSelections(s))},Gt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Gt.prototype.showPrimarySelection=function(){var s=this.getSelection(),d=this.cm,b=d.doc.sel.primary(),m=b.from(),S=b.to();if(d.display.viewTo==d.display.viewFrom||m.line>=d.display.viewTo||S.line<d.display.viewFrom){s.removeAllRanges();return}var L=Ku(d,s.anchorNode,s.anchorOffset),O=Ku(d,s.focusNode,s.focusOffset);if(!(L&&!L.bad&&O&&!O.bad&&je(Mo(L,O),m)==0&&je(yn(L,O),S)==0)){var H=d.display.view,Y=m.line>=d.display.viewFrom&&nC(d,m)||{node:H[0].measure.map[2],offset:0},J=S.line<d.display.viewTo&&nC(d,S);if(!J){var ce=H[H.length-1].measure,ye=ce.maps?ce.maps[ce.maps.length-1]:ce.map;J={node:ye[ye.length-1],offset:ye[ye.length-2]-ye[ye.length-3]}}if(!Y||!J){s.removeAllRanges();return}var Le=s.rangeCount&&s.getRangeAt(0),Ae;try{Ae=I(Y.node,Y.offset,J.offset,J.node)}catch{}Ae&&(!a&&d.state.focused?(s.collapse(Y.node,Y.offset),Ae.collapsed||(s.removeAllRanges(),s.addRange(Ae))):(s.removeAllRanges(),s.addRange(Ae)),Le&&s.anchorNode==null?s.addRange(Le):a&&this.startGracePeriod()),this.rememberSelection()}},Gt.prototype.startGracePeriod=function(){var s=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){s.gracePeriod=!1,s.selectionChanged()&&s.cm.operation(function(){return s.cm.curOp.selectionChanged=!0})},20)},Gt.prototype.showMultipleSelections=function(s){M(this.cm.display.cursorDiv,s.cursors),M(this.cm.display.selectionDiv,s.selection)},Gt.prototype.rememberSelection=function(){var s=this.getSelection();this.lastAnchorNode=s.anchorNode,this.lastAnchorOffset=s.anchorOffset,this.lastFocusNode=s.focusNode,this.lastFocusOffset=s.focusOffset},Gt.prototype.selectionInEditor=function(){var s=this.getSelection();if(!s.rangeCount)return!1;var d=s.getRangeAt(0).commonAncestorContainer;return q(this.div,d)},Gt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ae(V(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Gt.prototype.blur=function(){this.div.blur()},Gt.prototype.getField=function(){return this.div},Gt.prototype.supportsTouch=function(){return!0},Gt.prototype.receivedFocus=function(){var s=this,d=this;this.selectionInEditor()?setTimeout(function(){return s.pollSelection()},20):Dn(this.cm,function(){return d.cm.curOp.selectionChanged=!0});function b(){d.cm.state.focused&&(d.pollSelection(),d.polling.set(d.cm.options.pollInterval,b))}this.polling.set(this.cm.options.pollInterval,b)},Gt.prototype.selectionChanged=function(){var s=this.getSelection();return s.anchorNode!=this.lastAnchorNode||s.anchorOffset!=this.lastAnchorOffset||s.focusNode!=this.lastFocusNode||s.focusOffset!=this.lastFocusOffset},Gt.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var s=this.getSelection(),d=this.cm;if(w&&g&&this.cm.display.gutterSpecs.length&&x2(s.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var b=Ku(d,s.anchorNode,s.anchorOffset),m=Ku(d,s.focusNode,s.focusOffset);b&&m&&Dn(d,function(){jr(d.doc,oi(b,m),ie),(b.bad||m.bad)&&(d.curOp.selectionChanged=!0)})}}},Gt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var s=this.cm,d=s.display,b=s.doc.sel.primary(),m=b.from(),S=b.to();if(m.ch==0&&m.line>s.firstLine()&&(m=Me(m.line-1,lt(s.doc,m.line-1).length)),S.ch==lt(s.doc,S.line).text.length&&S.line<s.lastLine()&&(S=Me(S.line+1,0)),m.line<d.viewFrom||S.line>d.viewTo-1)return!1;var L,O,H;m.line==d.viewFrom||(L=Vi(s,m.line))==0?(O=Q(d.view[0].line),H=d.view[0].node):(O=Q(d.view[L].line),H=d.view[L-1].node.nextSibling);var Y=Vi(s,S.line),J,ce;if(Y==d.view.length-1?(J=d.viewTo-1,ce=d.lineDiv.lastChild):(J=Q(d.view[Y+1].line)-1,ce=d.view[Y+1].node.previousSibling),!H)return!1;for(var ye=s.doc.splitLines(C2(s,H,ce,O,J)),Le=Gr(s.doc,Me(O,0),Me(J,lt(s.doc,J).text.length));ye.length>1&&Le.length>1;)if(de(ye)==de(Le))ye.pop(),Le.pop(),J--;else if(ye[0]==Le[0])ye.shift(),Le.shift(),O++;else break;for(var Ae=0,Ne=0,Fe=ye[0],Ye=Le[0],Je=Math.min(Fe.length,Ye.length);Ae<Je&&Fe.charCodeAt(Ae)==Ye.charCodeAt(Ae);)++Ae;for(var it=de(ye),et=de(Le),st=Math.min(it.length-(ye.length==1?Ae:0),et.length-(Le.length==1?Ae:0));Ne<st&&it.charCodeAt(it.length-Ne-1)==et.charCodeAt(et.length-Ne-1);)++Ne;if(ye.length==1&&Le.length==1&&O==m.line)for(;Ae&&Ae>m.ch&&it.charCodeAt(it.length-Ne-1)==et.charCodeAt(et.length-Ne-1);)Ae--,Ne++;ye[ye.length-1]=it.slice(0,it.length-Ne).replace(/^\u200b+/,""),ye[0]=ye[0].slice(Ae).replace(/\u200b+$/,"");var yt=Me(O,Ae),vt=Me(J,Le.length?de(Le).length-Ne:0);if(ye.length>1||ye[0]||je(yt,vt))return Ho(s.doc,ye,yt,vt,"+input"),!0},Gt.prototype.ensurePolled=function(){this.forceCompositionEnd()},Gt.prototype.reset=function(){this.forceCompositionEnd()},Gt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Gt.prototype.readFromDOMSoon=function(){var s=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(s.readDOMTimeout=null,s.composing)if(s.composing.done)s.composing=null;else return;s.updateFromDOM()},80))},Gt.prototype.updateFromDOM=function(){var s=this;(this.cm.isReadOnly()||!this.pollContent())&&Dn(this.cm,function(){return mn(s.cm)})},Gt.prototype.setUneditable=function(s){s.contentEditable="false"},Gt.prototype.onKeyPress=function(s){s.charCode==0||this.composing||(s.preventDefault(),this.cm.isReadOnly()||Mr(this.cm,Xd)(this.cm,String.fromCharCode(s.charCode==null?s.keyCode:s.charCode),0))},Gt.prototype.readOnlyChanged=function(s){this.div.contentEditable=String(s!="nocursor")},Gt.prototype.onContextMenu=function(){},Gt.prototype.resetPosition=function(){},Gt.prototype.needsContentAttribute=!0;function nC(s,d){var b=gd(s,d.line);if(!b||b.hidden)return null;var m=lt(s.doc,d.line),S=Pw(b,m,d.line),L=Ce(m,s.doc.direction),O="left";if(L){var H=we(L,d.ch);O=H%2?"right":"left"}var Y=Ow(S.map,d.ch,O);return Y.offset=Y.collapse=="right"?Y.end:Y.start,Y}function x2(s){for(var d=s;d;d=d.parentNode)if(/CodeMirror-gutter-wrapper/.test(d.className))return!0;return!1}function Yo(s,d){return d&&(s.bad=!0),s}function C2(s,d,b,m,S){var L="",O=!1,H=s.doc.lineSeparator(),Y=!1;function J(Ae){return function(Ne){return Ne.id==Ae}}function ce(){O&&(L+=H,Y&&(L+=H),O=Y=!1)}function ye(Ae){Ae&&(ce(),L+=Ae)}function Le(Ae){if(Ae.nodeType==1){var Ne=Ae.getAttribute("cm-text");if(Ne){ye(Ne);return}var Fe=Ae.getAttribute("cm-marker"),Ye;if(Fe){var Je=s.findMarks(Me(m,0),Me(S+1,0),J(+Fe));Je.length&&(Ye=Je[0].find(0))&&ye(Gr(s.doc,Ye.from,Ye.to).join(H));return}if(Ae.getAttribute("contenteditable")=="false")return;var it=/^(pre|div|p|li|table|br)$/i.test(Ae.nodeName);if(!/^br$/i.test(Ae.nodeName)&&Ae.textContent.length==0)return;it&&ce();for(var et=0;et<Ae.childNodes.length;et++)Le(Ae.childNodes[et]);/^(pre|p)$/i.test(Ae.nodeName)&&(Y=!0),it&&(O=!0)}else Ae.nodeType==3&&ye(Ae.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Le(d),d!=b;)d=d.nextSibling,Y=!1;return L}function Ku(s,d,b){var m;if(d==s.display.lineDiv){if(m=s.display.lineDiv.childNodes[b],!m)return Yo(s.clipPos(Me(s.display.viewTo-1)),!0);d=null,b=0}else for(m=d;;m=m.parentNode){if(!m||m==s.display.lineDiv)return null;if(m.parentNode&&m.parentNode==s.display.lineDiv)break}for(var S=0;S<s.display.view.length;S++){var L=s.display.view[S];if(L.node==m)return E2(L,d,b)}}function E2(s,d,b){var m=s.text.firstChild,S=!1;if(!d||!q(m,d))return Yo(Me(Q(s.line),0),!0);if(d==m&&(S=!0,d=m.childNodes[b],b=0,!d)){var L=s.rest?de(s.rest):s.line;return Yo(Me(Q(L),L.text.length),S)}var O=d.nodeType==3?d:null,H=d;for(!O&&d.childNodes.length==1&&d.firstChild.nodeType==3&&(O=d.firstChild,b&&(b=O.nodeValue.length));H.parentNode!=m;)H=H.parentNode;var Y=s.measure,J=Y.maps;function ce(Ye,Je,it){for(var et=-1;et<(J?J.length:0);et++)for(var st=et<0?Y.map:J[et],yt=0;yt<st.length;yt+=3){var vt=st[yt+2];if(vt==Ye||vt==Je){var St=Q(et<0?s.line:s.rest[et]),Yt=st[yt]+it;return(it<0||vt!=Ye)&&(Yt=st[yt+(it?1:0)]),Me(St,Yt)}}}var ye=ce(O,H,b);if(ye)return Yo(ye,S);for(var Le=H.nextSibling,Ae=O?O.nodeValue.length-b:0;Le;Le=Le.nextSibling){if(ye=ce(Le,Le.firstChild,0),ye)return Yo(Me(ye.line,ye.ch-Ae),S);Ae+=Le.textContent.length}for(var Ne=H.previousSibling,Fe=b;Ne;Ne=Ne.previousSibling){if(ye=ce(Ne,Ne.firstChild,-1),ye)return Yo(Me(ye.line,ye.ch+Fe),S);Fe+=Ne.textContent.length}}var gr=function(s){this.cm=s,this.prevInput="",this.pollingFast=!1,this.polling=new oe,this.hasSelection=!1,this.composing=null,this.resetting=!1};gr.prototype.init=function(s){var d=this,b=this,m=this.cm;this.createField(s);var S=this.textarea;s.wrapper.insertBefore(this.wrapper,s.wrapper.firstChild),x&&(S.style.width="0px"),Te(S,"input",function(){u&&f>=9&&d.hasSelection&&(d.hasSelection=null),b.poll()}),Te(S,"paste",function(O){Ue(m,O)||Qx(O,m)||(m.state.pasteIncoming=+new Date,b.fastPoll())});function L(O){if(!Ue(m,O)){if(m.somethingSelected())Xu({lineWise:!1,text:m.getSelections()});else if(m.options.lineWiseCopyCut){var H=eC(m);Xu({lineWise:!0,text:H.text}),O.type=="cut"?m.setSelections(H.ranges,null,ie):(b.prevInput="",S.value=H.text.join(`
`),W(S))}else return;O.type=="cut"&&(m.state.cutIncoming=+new Date)}}Te(S,"cut",L),Te(S,"copy",L),Te(s.scroller,"paste",function(O){if(!(Na(s,O)||Ue(m,O))){if(!S.dispatchEvent){m.state.pasteIncoming=+new Date,b.focus();return}var H=new Event("paste");H.clipboardData=O.clipboardData,S.dispatchEvent(H)}}),Te(s.lineSpace,"selectstart",function(O){Na(s,O)||Ve(O)}),Te(S,"compositionstart",function(){var O=m.getCursor("from");b.composing&&b.composing.range.clear(),b.composing={start:O,range:m.markText(O,m.getCursor("to"),{className:"CodeMirror-composing"})}}),Te(S,"compositionend",function(){b.composing&&(b.poll(),b.composing.range.clear(),b.composing=null)})},gr.prototype.createField=function(s){this.wrapper=tC(),this.textarea=this.wrapper.firstChild;var d=this.cm.options;Kd(this.textarea,d.spellcheck,d.autocorrect,d.autocapitalize)},gr.prototype.screenReaderLabelChanged=function(s){s?this.textarea.setAttribute("aria-label",s):this.textarea.removeAttribute("aria-label")},gr.prototype.prepareSelection=function(){var s=this.cm,d=s.display,b=s.doc,m=$w(s);if(s.options.moveInputWithCursor){var S=ea(s,b.sel.primary().head,"div"),L=d.wrapper.getBoundingClientRect(),O=d.lineDiv.getBoundingClientRect();m.teTop=Math.max(0,Math.min(d.wrapper.clientHeight-10,S.top+O.top-L.top)),m.teLeft=Math.max(0,Math.min(d.wrapper.clientWidth-10,S.left+O.left-L.left))}return m},gr.prototype.showSelection=function(s){var d=this.cm,b=d.display;M(b.cursorDiv,s.cursors),M(b.selectionDiv,s.selection),s.teTop!=null&&(this.wrapper.style.top=s.teTop+"px",this.wrapper.style.left=s.teLeft+"px")},gr.prototype.reset=function(s){if(!(this.contextMenuPending||this.composing&&s)){var d=this.cm;if(this.resetting=!0,d.somethingSelected()){this.prevInput="";var b=d.getSelection();this.textarea.value=b,d.state.focused&&W(this.textarea),u&&f>=9&&(this.hasSelection=b)}else s||(this.prevInput=this.textarea.value="",u&&f>=9&&(this.hasSelection=null));this.resetting=!1}},gr.prototype.getField=function(){return this.textarea},gr.prototype.supportsTouch=function(){return!1},gr.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!T||ae(V(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},gr.prototype.blur=function(){this.textarea.blur()},gr.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},gr.prototype.receivedFocus=function(){this.slowPoll()},gr.prototype.slowPoll=function(){var s=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){s.poll(),s.cm.state.focused&&s.slowPoll()})},gr.prototype.fastPoll=function(){var s=!1,d=this;d.pollingFast=!0;function b(){var m=d.poll();!m&&!s?(s=!0,d.polling.set(60,b)):(d.pollingFast=!1,d.slowPoll())}d.polling.set(20,b)},gr.prototype.poll=function(){var s=this,d=this.cm,b=this.textarea,m=this.prevInput;if(this.contextMenuPending||this.resetting||!d.state.focused||Er(b)&&!m&&!this.composing||d.isReadOnly()||d.options.disableInput||d.state.keySeq)return!1;var S=b.value;if(S==m&&!d.somethingSelected())return!1;if(u&&f>=9&&this.hasSelection===S||A&&/[\uf700-\uf7ff]/.test(S))return d.display.input.reset(),!1;if(d.doc.sel==d.display.selForContextMenu){var L=S.charCodeAt(0);if(L==8203&&!m&&(m="​"),L==8666)return this.reset(),this.cm.execCommand("undo")}for(var O=0,H=Math.min(m.length,S.length);O<H&&m.charCodeAt(O)==S.charCodeAt(O);)++O;return Dn(d,function(){Xd(d,S.slice(O),m.length-O,null,s.composing?"*compose":null),S.length>1e3||S.indexOf(`
`)>-1?b.value=s.prevInput="":s.prevInput=S,s.composing&&(s.composing.range.clear(),s.composing.range=d.markText(s.composing.start,d.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},gr.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},gr.prototype.onKeyPress=function(){u&&f>=9&&(this.hasSelection=null),this.fastPoll()},gr.prototype.onContextMenu=function(s){var d=this,b=d.cm,m=b.display,S=d.textarea;d.contextMenuPending&&d.contextMenuPending();var L=Wi(b,s),O=m.scroller.scrollTop;if(!L||y)return;var H=b.options.resetSelectionOnContextMenu;H&&b.doc.sel.contains(L)==-1&&Mr(b,jr)(b.doc,oi(L),ie);var Y=S.style.cssText,J=d.wrapper.style.cssText,ce=d.wrapper.offsetParent.getBoundingClientRect();d.wrapper.style.cssText="position: static",S.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(s.clientY-ce.top-5)+"px; left: "+(s.clientX-ce.left-5)+`px;
      z-index: 1000; background: `+(u?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var ye;c&&(ye=S.ownerDocument.defaultView.scrollY),m.input.focus(),c&&S.ownerDocument.defaultView.scrollTo(null,ye),m.input.reset(),b.somethingSelected()||(S.value=d.prevInput=" "),d.contextMenuPending=Ae,m.selForContextMenu=b.doc.sel,clearTimeout(m.detectingSelectAll);function Le(){if(S.selectionStart!=null){var Fe=b.somethingSelected(),Ye="​"+(Fe?S.value:"");S.value="⇚",S.value=Ye,d.prevInput=Fe?"":"​",S.selectionStart=1,S.selectionEnd=Ye.length,m.selForContextMenu=b.doc.sel}}function Ae(){if(d.contextMenuPending==Ae&&(d.contextMenuPending=!1,d.wrapper.style.cssText=J,S.style.cssText=Y,u&&f<9&&m.scrollbars.setScrollTop(m.scroller.scrollTop=O),S.selectionStart!=null)){(!u||u&&f<9)&&Le();var Fe=0,Ye=function(){m.selForContextMenu==b.doc.sel&&S.selectionStart==0&&S.selectionEnd>0&&d.prevInput=="​"?Mr(b,Cx)(b):Fe++<10?m.detectingSelectAll=setTimeout(Ye,500):(m.selForContextMenu=null,m.input.reset())};m.detectingSelectAll=setTimeout(Ye,200)}}if(u&&f>=9&&Le(),B){at(s);var Ne=function(){Oe(window,"mouseup",Ne),setTimeout(Ae,20)};Te(window,"mouseup",Ne)}else setTimeout(Ae,50)},gr.prototype.readOnlyChanged=function(s){s||this.reset(),this.textarea.disabled=s=="nocursor",this.textarea.readOnly=!!s},gr.prototype.setUneditable=function(){},gr.prototype.needsContentAttribute=!1;function T2(s,d){if(d=d?se(d):{},d.value=s.value,!d.tabindex&&s.tabIndex&&(d.tabindex=s.tabIndex),!d.placeholder&&s.placeholder&&(d.placeholder=s.placeholder),d.autofocus==null){var b=ae(V(s));d.autofocus=b==s||s.getAttribute("autofocus")!=null&&b==document.body}function m(){s.value=H.getValue()}var S;if(s.form&&(Te(s.form,"submit",m),!d.leaveSubmitMethodAlone)){var L=s.form;S=L.submit;try{var O=L.submit=function(){m(),L.submit=S,L.submit(),L.submit=O}}catch{}}d.finishInit=function(Y){Y.save=m,Y.getTextArea=function(){return s},Y.toTextArea=function(){Y.toTextArea=isNaN,m(),s.parentNode.removeChild(Y.getWrapperElement()),s.style.display="",s.form&&(Oe(s.form,"submit",m),!d.leaveSubmitMethodAlone&&typeof s.form.submit=="function"&&(s.form.submit=S))}},s.style.display="none";var H=ar(function(Y){return s.parentNode.insertBefore(Y,s.nextSibling)},d);return H}function S2(s){s.off=Oe,s.on=Te,s.wheelEventPixels=PI,s.Doc=bn,s.splitLines=zt,s.countColumn=te,s.findColumn=ge,s.isWordChar=qe,s.Pass=ne,s.signal=He,s.Line=Ro,s.changeEnd=si,s.scrollbarModel=Qw,s.Pos=Me,s.cmpPos=je,s.modes=$t,s.mimeModes=ur,s.resolveMode=gn,s.getMode=jn,s.modeExtensions=Ln,s.extendMode=Zn,s.copyState=sn,s.startState=zn,s.innerMode=Ma,s.commands=il,s.keyMap=Oa,s.keyName=Bx,s.isModifierKey=Ix,s.lookupKey=Wo,s.normalizeKeyMap=e2,s.StringStream=Ft,s.SharedTextMarker=rl,s.TextMarker=ui,s.LineWidget=tl,s.e_preventDefault=Ve,s.e_stopPropagation=dt,s.e_stop=at,s.addClass=re,s.contains=q,s.rmClass=F,s.keyNames=fi}g2(ar),w2(ar);var A2="iter insert remove copy getEditor constructor".split(" ");for(var ju in bn.prototype)bn.prototype.hasOwnProperty(ju)&&le(A2,ju)<0&&(ar.prototype[ju]=function(s){return function(){return s.apply(this.doc,arguments)}}(bn.prototype[ju]));return Ge(bn),ar.inputStyles={textarea:gr,contenteditable:Gt},ar.defineMode=function(s){!ar.defaults.mode&&s!="null"&&(ar.defaults.mode=s),jt.apply(this,arguments)},ar.defineMIME=Kr,ar.defineMode("null",function(){return{token:function(s){return s.skipToEnd()}}}),ar.defineMIME("text/plain","null"),ar.defineExtension=function(s,d){ar.prototype[s]=d},ar.defineDocExtension=function(s,d){bn.prototype[s]=d},ar.fromTextArea=T2,S2(ar),ar.version="5.65.19",ar})}(If)),If.exports}var nR;function D9(){return nR||(nR=1,function(t,e){(function(r){r(Gi())})(function(r){r.defineMode("javascript",function(n,a){var i=n.indentUnit,o=a.statementIndent,l=a.jsonld,u=a.json||l,f=a.trackScope!==!1,c=a.typescript,h=a.wordCharacters||/[\w$\xa1-\uffff]/,g=function(){function Q(Dr){return{type:Dr,style:"keyword"}}var fe=Q("keyword a"),Pe=Q("keyword b"),ze=Q("keyword c"),Me=Q("keyword d"),je=Q("operator"),Nt={type:"atom",style:"atom"};return{if:Q("if"),while:fe,with:fe,else:Pe,do:Pe,try:Pe,finally:Pe,return:Me,break:Me,continue:Me,new:Q("new"),delete:ze,void:ze,throw:ze,debugger:Q("debugger"),var:Q("var"),const:Q("var"),let:Q("var"),function:Q("function"),catch:Q("catch"),for:Q("for"),switch:Q("switch"),case:Q("case"),default:Q("default"),in:je,typeof:je,instanceof:je,true:Nt,false:Nt,null:Nt,undefined:Nt,NaN:Nt,Infinity:Nt,this:Q("this"),class:Q("class"),super:Q("atom"),yield:ze,export:Q("export"),import:Q("import"),extends:ze,await:ze}}(),p=/[+\-*&%=<>!?|~^@]/,y=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function C(Q){for(var fe=!1,Pe,ze=!1;(Pe=Q.next())!=null;){if(!fe){if(Pe=="/"&&!ze)return;Pe=="["?ze=!0:ze&&Pe=="]"&&(ze=!1)}fe=!fe&&Pe=="\\"}}var E,v;function x(Q,fe,Pe){return E=Q,v=Pe,fe}function w(Q,fe){var Pe=Q.next();if(Pe=='"'||Pe=="'")return fe.tokenize=T(Pe),fe.tokenize(Q,fe);if(Pe=="."&&Q.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return x("number","number");if(Pe=="."&&Q.match(".."))return x("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Pe))return x(Pe);if(Pe=="="&&Q.eat(">"))return x("=>","operator");if(Pe=="0"&&Q.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return x("number","number");if(/\d/.test(Pe))return Q.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),x("number","number");if(Pe=="/")return Q.eat("*")?(fe.tokenize=A,A(Q,fe)):Q.eat("/")?(Q.skipToEnd(),x("comment","comment")):Pt(Q,fe,1)?(C(Q),Q.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),x("regexp","string-2")):(Q.eat("="),x("operator","operator",Q.current()));if(Pe=="`")return fe.tokenize=_,_(Q,fe);if(Pe=="#"&&Q.peek()=="!")return Q.skipToEnd(),x("meta","meta");if(Pe=="#"&&Q.eatWhile(h))return x("variable","property");if(Pe=="<"&&Q.match("!--")||Pe=="-"&&Q.match("->")&&!/\S/.test(Q.string.slice(0,Q.start)))return Q.skipToEnd(),x("comment","comment");if(p.test(Pe))return(Pe!=">"||!fe.lexical||fe.lexical.type!=">")&&(Q.eat("=")?(Pe=="!"||Pe=="=")&&Q.eat("="):/[<>*+\-|&?]/.test(Pe)&&(Q.eat(Pe),Pe==">"&&Q.eat(Pe))),Pe=="?"&&Q.eat(".")?x("."):x("operator","operator",Q.current());if(h.test(Pe)){Q.eatWhile(h);var ze=Q.current();if(fe.lastType!="."){if(g.propertyIsEnumerable(ze)){var Me=g[ze];return x(Me.type,Me.style,ze)}if(ze=="async"&&Q.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return x("async","keyword",ze)}return x("variable","variable",ze)}}function T(Q){return function(fe,Pe){var ze=!1,Me;if(l&&fe.peek()=="@"&&fe.match(y))return Pe.tokenize=w,x("jsonld-keyword","meta");for(;(Me=fe.next())!=null&&!(Me==Q&&!ze);)ze=!ze&&Me=="\\";return ze||(Pe.tokenize=w),x("string","string")}}function A(Q,fe){for(var Pe=!1,ze;ze=Q.next();){if(ze=="/"&&Pe){fe.tokenize=w;break}Pe=ze=="*"}return x("comment","comment")}function _(Q,fe){for(var Pe=!1,ze;(ze=Q.next())!=null;){if(!Pe&&(ze=="`"||ze=="$"&&Q.eat("{"))){fe.tokenize=w;break}Pe=!Pe&&ze=="\\"}return x("quasi","string-2",Q.current())}var D="([{}])";function P(Q,fe){fe.fatArrowAt&&(fe.fatArrowAt=null);var Pe=Q.string.indexOf("=>",Q.start);if(!(Pe<0)){if(c){var ze=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Q.string.slice(Q.start,Pe));ze&&(Pe=ze.index)}for(var Me=0,je=!1,Nt=Pe-1;Nt>=0;--Nt){var Dr=Q.string.charAt(Nt),yn=D.indexOf(Dr);if(yn>=0&&yn<3){if(!Me){++Nt;break}if(--Me==0){Dr=="("&&(je=!0);break}}else if(yn>=3&&yn<6)++Me;else if(h.test(Dr))je=!0;else if(/["'\/`]/.test(Dr))for(;;--Nt){if(Nt==0)return;var Mo=Q.string.charAt(Nt-1);if(Mo==Dr&&Q.string.charAt(Nt-2)!="\\"){Nt--;break}}else if(je&&!Me){++Nt;break}}je&&!Me&&(fe.fatArrowAt=Nt)}}var N={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function B(Q,fe,Pe,ze,Me,je){this.indented=Q,this.column=fe,this.type=Pe,this.prev=Me,this.info=je,ze!=null&&(this.align=ze)}function G(Q,fe){if(!f)return!1;for(var Pe=Q.localVars;Pe;Pe=Pe.next)if(Pe.name==fe)return!0;for(var ze=Q.context;ze;ze=ze.prev)for(var Pe=ze.vars;Pe;Pe=Pe.next)if(Pe.name==fe)return!0}function F(Q,fe,Pe,ze,Me){var je=Q.cc;for(z.state=Q,z.stream=Me,z.marked=null,z.cc=je,z.style=fe,Q.lexical.hasOwnProperty("align")||(Q.lexical.align=!0);;){var Nt=je.length?je.pop():u?le:te;if(Nt(Pe,ze)){for(;je.length&&je[je.length-1].lex;)je.pop()();return z.marked?z.marked:Pe=="variable"&&G(Q,ze)?"variable-2":fe}}}var z={state:null,marked:null,cc:null};function M(){for(var Q=arguments.length-1;Q>=0;Q--)z.cc.push(arguments[Q])}function R(){return M.apply(null,arguments),!0}function k(Q,fe){for(var Pe=fe;Pe;Pe=Pe.next)if(Pe.name==Q)return!0;return!1}function I(Q){var fe=z.state;if(z.marked="def",!!f){if(fe.context){if(fe.lexical.info=="var"&&fe.context&&fe.context.block){var Pe=q(Q,fe.context);if(Pe!=null){fe.context=Pe;return}}else if(!k(Q,fe.localVars)){fe.localVars=new K(Q,fe.localVars);return}}a.globalVars&&!k(Q,fe.globalVars)&&(fe.globalVars=new K(Q,fe.globalVars))}}function q(Q,fe){if(fe)if(fe.block){var Pe=q(Q,fe.prev);return Pe?Pe==fe.prev?fe:new re(Pe,fe.vars,!0):null}else return k(Q,fe.vars)?fe:new re(fe.prev,new K(Q,fe.vars),!1);else return null}function ae(Q){return Q=="public"||Q=="private"||Q=="protected"||Q=="abstract"||Q=="readonly"}function re(Q,fe,Pe){this.prev=Q,this.vars=fe,this.block=Pe}function K(Q,fe){this.name=Q,this.next=fe}var W=new K("this",new K("arguments",null));function Z(){z.state.context=new re(z.state.context,z.state.localVars,!1),z.state.localVars=W}function U(){z.state.context=new re(z.state.context,z.state.localVars,!0),z.state.localVars=null}Z.lex=U.lex=!0;function V(){z.state.localVars=z.state.context.vars,z.state.context=z.state.context.prev}V.lex=!0;function X(Q,fe){var Pe=function(){var ze=z.state,Me=ze.indented;if(ze.lexical.type=="stat")Me=ze.lexical.indented;else for(var je=ze.lexical;je&&je.type==")"&&je.align;je=je.prev)Me=je.indented;ze.lexical=new B(Me,z.stream.column(),Q,null,ze.lexical,fe)};return Pe.lex=!0,Pe}function ee(){var Q=z.state;Q.lexical.prev&&(Q.lexical.type==")"&&(Q.indented=Q.lexical.indented),Q.lexical=Q.lexical.prev)}ee.lex=!0;function se(Q){function fe(Pe){return Pe==Q?R():Q==";"||Pe=="}"||Pe==")"||Pe=="]"?M():R(fe)}return fe}function te(Q,fe){return Q=="var"?R(X("vardef",fe),dt,se(";"),ee):Q=="keyword a"?R(X("form"),ne,te,ee):Q=="keyword b"?R(X("form"),te,ee):Q=="keyword d"?z.stream.match(/^\s*$/,!1)?R():R(X("stat"),ue,se(";"),ee):Q=="debugger"?R(se(";")):Q=="{"?R(X("}"),U,ve,ee,V):Q==";"?R():Q=="if"?(z.state.lexical.info=="else"&&z.state.cc[z.state.cc.length-1]==ee&&z.state.cc.pop()(),R(X("form"),ne,te,ee,_t)):Q=="function"?R(zt):Q=="for"?R(X("form"),U,Mt,te,V,ee):Q=="class"||c&&fe=="interface"?(z.marked="keyword",R(X("form",Q=="class"?Q:fe),$t,ee)):Q=="variable"?c&&fe=="declare"?(z.marked="keyword",R(te)):c&&(fe=="module"||fe=="enum"||fe=="type")&&z.stream.match(/^\s*\w/,!1)?(z.marked="keyword",fe=="enum"?R(lt):fe=="type"?R(on,se("operator"),Ce,se(";")):R(X("form"),rt,se("{"),X("}"),ve,ee,ee)):c&&fe=="namespace"?(z.marked="keyword",R(X("form"),le,te,ee)):c&&fe=="abstract"?(z.marked="keyword",R(te)):R(X("stat"),Ie):Q=="switch"?R(X("form"),ne,se("{"),X("}","switch"),U,ve,ee,ee,V):Q=="case"?R(le,se(":")):Q=="default"?R(se(":")):Q=="catch"?R(X("form"),Z,oe,te,ee,V):Q=="export"?R(X("stat"),gn,ee):Q=="import"?R(X("stat"),Ln,ee):Q=="async"?R(te):fe=="@"?R(le,te):M(X("stat"),le,se(";"),ee)}function oe(Q){if(Q=="(")return R(Rt,se(")"))}function le(Q,fe){return ie(Q,fe,!1)}function $(Q,fe){return ie(Q,fe,!0)}function ne(Q){return Q!="("?M():R(X(")"),ue,se(")"),ee)}function ie(Q,fe,Pe){if(z.state.fatArrowAt==z.stream.start){var ze=Pe?be:de;if(Q=="(")return R(Z,X(")"),Xe(Rt,")"),ee,se("=>"),ze,V);if(Q=="variable")return M(Z,rt,se("=>"),ze,V)}var Me=Pe?ge:me;return N.hasOwnProperty(Q)?R(Me):Q=="function"?R(zt,Me):Q=="class"||c&&fe=="interface"?(z.marked="keyword",R(X("form"),Kt,ee)):Q=="keyword c"||Q=="async"?R(Pe?$:le):Q=="("?R(X(")"),ue,se(")"),ee,Me):Q=="operator"||Q=="spread"?R(Pe?$:le):Q=="["?R(X("]"),Ft,ee,Me):Q=="{"?We(Ze,"}",null,Me):Q=="quasi"?M(Ee,Me):Q=="new"?R(De(Pe)):R()}function ue(Q){return Q.match(/[;\}\)\],]/)?M():M(le)}function me(Q,fe){return Q==","?R(ue):ge(Q,fe,!1)}function ge(Q,fe,Pe){var ze=Pe==!1?me:ge,Me=Pe==!1?le:$;if(Q=="=>")return R(Z,Pe?be:de,V);if(Q=="operator")return/\+\+|--/.test(fe)||c&&fe=="!"?R(ze):c&&fe=="<"&&z.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?R(X(">"),Xe(Ce,">"),ee,ze):fe=="?"?R(le,se(":"),Me):R(Me);if(Q=="quasi")return M(Ee,ze);if(Q!=";"){if(Q=="(")return We($,")","call",ze);if(Q==".")return R(qe,ze);if(Q=="[")return R(X("]"),ue,se("]"),ee,ze);if(c&&fe=="as")return z.marked="keyword",R(Ce,ze);if(Q=="regexp")return z.state.lastType=z.marked="operator",z.stream.backUp(z.stream.pos-z.stream.start-1),R(Me)}}function Ee(Q,fe){return Q!="quasi"?M():fe.slice(fe.length-2)!="${"?R(Ee):R(ue,he)}function he(Q){if(Q=="}")return z.marked="string-2",z.state.tokenize=_,R(Ee)}function de(Q){return P(z.stream,z.state),M(Q=="{"?te:le)}function be(Q){return P(z.stream,z.state),M(Q=="{"?te:$)}function De(Q){return function(fe){return fe=="."?R(Q?Re:Se):fe=="variable"&&c?R(Qe,Q?ge:me):M(Q?$:le)}}function Se(Q,fe){if(fe=="target")return z.marked="keyword",R(me)}function Re(Q,fe){if(fe=="target")return z.marked="keyword",R(ge)}function Ie(Q){return Q==":"?R(ee,te):M(me,se(";"),ee)}function qe(Q){if(Q=="variable")return z.marked="property",R()}function Ze(Q,fe){if(Q=="async")return z.marked="property",R(Ze);if(Q=="variable"||z.style=="keyword"){if(z.marked="property",fe=="get"||fe=="set")return R($e);var Pe;return c&&z.state.fatArrowAt==z.stream.start&&(Pe=z.stream.match(/^\s*:\s*/,!1))&&(z.state.fatArrowAt=z.stream.pos+Pe[0].length),R(tt)}else{if(Q=="number"||Q=="string")return z.marked=l?"property":z.style+" property",R(tt);if(Q=="jsonld-keyword")return R(tt);if(c&&ae(fe))return z.marked="keyword",R(Ze);if(Q=="[")return R(le,j,se("]"),tt);if(Q=="spread")return R($,tt);if(fe=="*")return z.marked="keyword",R(Ze);if(Q==":")return M(tt)}}function $e(Q){return Q!="variable"?M(tt):(z.marked="property",R(zt))}function tt(Q){if(Q==":")return R($);if(Q=="(")return M(zt)}function Xe(Q,fe,Pe){function ze(Me,je){if(Pe?Pe.indexOf(Me)>-1:Me==","){var Nt=z.state.lexical;return Nt.info=="call"&&(Nt.pos=(Nt.pos||0)+1),R(function(Dr,yn){return Dr==fe||yn==fe?M():M(Q)},ze)}return Me==fe||je==fe?R():Pe&&Pe.indexOf(";")>-1?M(Q):R(se(fe))}return function(Me,je){return Me==fe||je==fe?R():M(Q,ze)}}function We(Q,fe,Pe){for(var ze=3;ze<arguments.length;ze++)z.cc.push(arguments[ze]);return R(X(fe,Pe),Xe(Q,fe),ee)}function ve(Q){return Q=="}"?R():M(te,ve)}function j(Q,fe){if(c){if(Q==":")return R(Ce);if(fe=="?")return R(j)}}function pe(Q,fe){if(c&&(Q==":"||fe=="in"))return R(Ce)}function we(Q){if(c&&Q==":")return z.stream.match(/^\s*\w+\s+is\b/,!1)?R(le,xe,Ce):R(Ce)}function xe(Q,fe){if(fe=="is")return z.marked="keyword",R()}function Ce(Q,fe){if(fe=="keyof"||fe=="typeof"||fe=="infer"||fe=="readonly")return z.marked="keyword",R(fe=="typeof"?$:Ce);if(Q=="variable"||fe=="void")return z.marked="type",R(Ke);if(fe=="|"||fe=="&")return R(Ce);if(Q=="string"||Q=="number"||Q=="atom")return R(Ke);if(Q=="[")return R(X("]"),Xe(Ce,"]",","),ee,Ke);if(Q=="{")return R(X("}"),Te,ee,Ke);if(Q=="(")return R(Xe(Ue,")"),Be,Ke);if(Q=="<")return R(Xe(Ce,">"),Ce);if(Q=="quasi")return M(Oe,Ke)}function Be(Q){if(Q=="=>")return R(Ce)}function Te(Q){return Q.match(/[\}\)\]]/)?R():Q==","||Q==";"?R(Te):M(ke,Te)}function ke(Q,fe){if(Q=="variable"||z.style=="keyword")return z.marked="property",R(ke);if(fe=="?"||Q=="number"||Q=="string")return R(ke);if(Q==":")return R(Ce);if(Q=="[")return R(se("variable"),pe,se("]"),ke);if(Q=="(")return M(Er,ke);if(!Q.match(/[;\}\)\],]/))return R()}function Oe(Q,fe){return Q!="quasi"?M():fe.slice(fe.length-2)!="${"?R(Oe):R(Ce,He)}function He(Q){if(Q=="}")return z.marked="string-2",z.state.tokenize=_,R(Oe)}function Ue(Q,fe){return Q=="variable"&&z.stream.match(/^\s*[?:]/,!1)||fe=="?"?R(Ue):Q==":"?R(Ce):Q=="spread"?R(Ue):M(Ce)}function Ke(Q,fe){if(fe=="<")return R(X(">"),Xe(Ce,">"),ee,Ke);if(fe=="|"||Q=="."||fe=="&")return R(Ce);if(Q=="[")return R(Ce,se("]"),Ke);if(fe=="extends"||fe=="implements")return z.marked="keyword",R(Ce);if(fe=="?")return R(Ce,se(":"),Ce)}function Qe(Q,fe){if(fe=="<")return R(X(">"),Xe(Ce,">"),ee,Ke)}function Ge(){return M(Ce,Ve)}function Ve(Q,fe){if(fe=="=")return R(Ce)}function dt(Q,fe){return fe=="enum"?(z.marked="keyword",R(lt)):M(rt,j,ut,pt)}function rt(Q,fe){if(c&&ae(fe))return z.marked="keyword",R(rt);if(Q=="variable")return I(fe),R();if(Q=="spread")return R(rt);if(Q=="[")return We(Et,"]");if(Q=="{")return We(at,"}")}function at(Q,fe){return Q=="variable"&&!z.stream.match(/^\s*:/,!1)?(I(fe),R(ut)):(Q=="variable"&&(z.marked="property"),Q=="spread"?R(rt):Q=="}"?M():Q=="["?R(le,se("]"),se(":"),at):R(se(":"),rt,ut))}function Et(){return M(rt,ut)}function ut(Q,fe){if(fe=="=")return R($)}function pt(Q){if(Q==",")return R(dt)}function _t(Q,fe){if(Q=="keyword b"&&fe=="else")return R(X("form","else"),te,ee)}function Mt(Q,fe){if(fe=="await")return R(Mt);if(Q=="(")return R(X(")"),Vt,ee)}function Vt(Q){return Q=="var"?R(dt,Lt):Q=="variable"?R(Lt):M(Lt)}function Lt(Q,fe){return Q==")"?R():Q==";"?R(Lt):fe=="in"||fe=="of"?(z.marked="keyword",R(le,Lt)):M(le,Lt)}function zt(Q,fe){if(fe=="*")return z.marked="keyword",R(zt);if(Q=="variable")return I(fe),R(zt);if(Q=="(")return R(Z,X(")"),Xe(Rt,")"),ee,we,te,V);if(c&&fe=="<")return R(X(">"),Xe(Ge,">"),ee,zt)}function Er(Q,fe){if(fe=="*")return z.marked="keyword",R(Er);if(Q=="variable")return I(fe),R(Er);if(Q=="(")return R(Z,X(")"),Xe(Rt,")"),ee,we,V);if(c&&fe=="<")return R(X(">"),Xe(Ge,">"),ee,Er)}function on(Q,fe){if(Q=="keyword"||Q=="variable")return z.marked="type",R(on);if(fe=="<")return R(X(">"),Xe(Ge,">"),ee)}function Rt(Q,fe){return fe=="@"&&R(le,Rt),Q=="spread"?R(Rt):c&&ae(fe)?(z.marked="keyword",R(Rt)):c&&Q=="this"?R(j,ut):M(rt,j,ut)}function Kt(Q,fe){return Q=="variable"?$t(Q,fe):ur(Q,fe)}function $t(Q,fe){if(Q=="variable")return I(fe),R(ur)}function ur(Q,fe){if(fe=="<")return R(X(">"),Xe(Ge,">"),ee,ur);if(fe=="extends"||fe=="implements"||c&&Q==",")return fe=="implements"&&(z.marked="keyword"),R(c?Ce:le,ur);if(Q=="{")return R(X("}"),jt,ee)}function jt(Q,fe){if(Q=="async"||Q=="variable"&&(fe=="static"||fe=="get"||fe=="set"||c&&ae(fe))&&z.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return z.marked="keyword",R(jt);if(Q=="variable"||z.style=="keyword")return z.marked="property",R(Kr,jt);if(Q=="number"||Q=="string")return R(Kr,jt);if(Q=="[")return R(le,j,se("]"),Kr,jt);if(fe=="*")return z.marked="keyword",R(jt);if(c&&Q=="(")return M(Er,jt);if(Q==";"||Q==",")return R(jt);if(Q=="}")return R();if(fe=="@")return R(le,jt)}function Kr(Q,fe){if(fe=="!"||fe=="?")return R(Kr);if(Q==":")return R(Ce,ut);if(fe=="=")return R($);var Pe=z.state.lexical.prev,ze=Pe&&Pe.info=="interface";return M(ze?Er:zt)}function gn(Q,fe){return fe=="*"?(z.marked="keyword",R(zn,se(";"))):fe=="default"?(z.marked="keyword",R(le,se(";"))):Q=="{"?R(Xe(jn,"}"),zn,se(";")):M(te)}function jn(Q,fe){if(fe=="as")return z.marked="keyword",R(se("variable"));if(Q=="variable")return M($,jn)}function Ln(Q){return Q=="string"?R():Q=="("?M(le):Q=="."?M(me):M(Zn,sn,zn)}function Zn(Q,fe){return Q=="{"?We(Zn,"}"):(Q=="variable"&&I(fe),fe=="*"&&(z.marked="keyword"),R(Ma))}function sn(Q){if(Q==",")return R(Zn,sn)}function Ma(Q,fe){if(fe=="as")return z.marked="keyword",R(Zn)}function zn(Q,fe){if(fe=="from")return z.marked="keyword",R(le)}function Ft(Q){return Q=="]"?R():M(Xe($,"]"))}function lt(){return M(X("form"),rt,se("{"),X("}"),Xe(Gr,"}"),ee,ee)}function Gr(){return M(rt,ut)}function Qn(Q,fe){return Q.lastType=="operator"||Q.lastType==","||p.test(fe.charAt(0))||/[,.]/.test(fe.charAt(0))}function Pt(Q,fe,Pe){return fe.tokenize==w&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(fe.lastType)||fe.lastType=="quasi"&&/\{\s*$/.test(Q.string.slice(0,Q.pos-(Pe||0)))}return{startState:function(Q){var fe={tokenize:w,lastType:"sof",cc:[],lexical:new B((Q||0)-i,0,"block",!1),localVars:a.localVars,context:a.localVars&&new re(null,null,!1),indented:Q||0};return a.globalVars&&typeof a.globalVars=="object"&&(fe.globalVars=a.globalVars),fe},token:function(Q,fe){if(Q.sol()&&(fe.lexical.hasOwnProperty("align")||(fe.lexical.align=!1),fe.indented=Q.indentation(),P(Q,fe)),fe.tokenize!=A&&Q.eatSpace())return null;var Pe=fe.tokenize(Q,fe);return E=="comment"?Pe:(fe.lastType=E=="operator"&&(v=="++"||v=="--")?"incdec":E,F(fe,Pe,E,v,Q))},indent:function(Q,fe){if(Q.tokenize==A||Q.tokenize==_)return r.Pass;if(Q.tokenize!=w)return 0;var Pe=fe&&fe.charAt(0),ze=Q.lexical,Me;if(!/^\s*else\b/.test(fe))for(var je=Q.cc.length-1;je>=0;--je){var Nt=Q.cc[je];if(Nt==ee)ze=ze.prev;else if(Nt!=_t&&Nt!=V)break}for(;(ze.type=="stat"||ze.type=="form")&&(Pe=="}"||(Me=Q.cc[Q.cc.length-1])&&(Me==me||Me==ge)&&!/^[,\.=+\-*:?[\(]/.test(fe));)ze=ze.prev;o&&ze.type==")"&&ze.prev.type=="stat"&&(ze=ze.prev);var Dr=ze.type,yn=Pe==Dr;return Dr=="vardef"?ze.indented+(Q.lastType=="operator"||Q.lastType==","?ze.info.length+1:0):Dr=="form"&&Pe=="{"?ze.indented:Dr=="form"?ze.indented+i:Dr=="stat"?ze.indented+(Qn(Q,fe)?o||i:0):ze.info=="switch"&&!yn&&a.doubleIndentSwitch!=!1?ze.indented+(/^(?:case|default)\b/.test(fe)?i:2*i):ze.align?ze.column+(yn?0:1):ze.indented+(yn?0:i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:u?null:"/*",blockCommentEnd:u?null:"*/",blockCommentContinue:u?null:" * ",lineComment:u?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:u?"json":"javascript",jsonldMode:l,jsonMode:u,expressionAllowed:Pt,skipExpression:function(Q){F(Q,"atom","atom","true",new r.StringStream("",2,null))}}}),r.registerHelper("wordChars","javascript",/[\w$]/),r.defineMIME("text/javascript","javascript"),r.defineMIME("text/ecmascript","javascript"),r.defineMIME("application/javascript","javascript"),r.defineMIME("application/x-javascript","javascript"),r.defineMIME("application/ecmascript","javascript"),r.defineMIME("application/json",{name:"javascript",json:!0}),r.defineMIME("application/x-json",{name:"javascript",json:!0}),r.defineMIME("application/manifest+json",{name:"javascript",json:!0}),r.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),r.defineMIME("text/typescript",{name:"javascript",typescript:!0}),r.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),tR.exports}D9();var _9=Gi();const aw=To(_9),M9={class:"data-input-panel"},R9={class:"editor-wrapper"},P9=qr({__name:"DataInputPanel",setup(t){const e=TO(),r=Ct(null);let n=null,a=!1;return Sa(()=>{r.value&&(n=aw(r.value,{value:e.currentGraphData,mode:{name:"javascript",json:!0},theme:"material-darker",lineNumbers:!0,tabSize:2}),n.on("change",i=>{a||(e.currentGraphData=i.getValue())}))}),Aa(()=>{var i;if(n){const o=n.getWrapperElement();(i=o.parentNode)==null||i.removeChild(o),n=null}}),wr(()=>e.currentGraphData,i=>{n&&n.getValue()!==i&&(a=!0,n.setValue(i),a=!1)}),(i,o)=>(ft(),gt("div",M9,[o[0]||(o[0]=_e("h4",null,"Model Data & Inits",-1)),o[1]||(o[1]=_e("p",{class:"description"}," Define observed data and initial values for your model in JSON format. ",-1)),_e("div",R9,[_e("div",{ref_key:"editorContainer",ref:r,class:"editor-container"},null,512)])]))}}),N9=an(P9,[["__scopeId","data-v-bc2fbd9c"]]),k9=["type","value","placeholder","disabled","readonly"],O9=qr({__name:"BaseInput",props:{modelValue:{},type:{},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean}},emits:["update:modelValue","change","input","keyup.enter"],setup(t,{emit:e}){const r=t,n=e,a=sr(()=>r.type||"text"),i=u=>{const f=u.target;n("update:modelValue",f.value),n("input",u)},o=u=>{n("change",u)},l=u=>{u.key==="Enter"&&n("keyup.enter",u)};return(u,f)=>(ft(),gt("input",{type:a.value,value:u.modelValue??"",placeholder:u.placeholder,disabled:u.disabled,readonly:u.readonly,onInput:i,onChange:o,onKeyup:l,class:"base-input"},null,40,k9))}}),Vn=an(O9,[["__scopeId","data-v-6905db26"]]),I9=["value","disabled"],F9=["value"],B9=qr({__name:"BaseSelect",props:{modelValue:{},options:{},disabled:{type:Boolean}},emits:["update:modelValue","change"],setup(t,{emit:e}){const r=t,n=e,a=o=>{const l=o.target;n("update:modelValue",l.value),n("change",o)},i=sr(()=>({"base-select":!0,"select-disabled":r.disabled}));return(o,l)=>(ft(),gt("select",{value:o.modelValue,onChange:a,disabled:o.disabled,class:cr(i.value)},[(ft(!0),gt(or,null,Xa(o.options,u=>(ft(),gt("option",{key:u.value,value:u.value},Ar(u.label),9,F9))),128))],42,I9))}}),q9=an(B9,[["__scopeId","data-v-4e558a4b"]]),z9={class:"node-properties-panel"},G9={key:0,class:"no-selection-message"},H9={key:1,class:"properties-form"},U9={class:"form-group"},W9=["for"],V9=["id","onUpdate:modelValue"],$9={key:3,class:"help-text"},Y9={class:"form-group"},X9={class:"form-group"},K9={class:"form-group"},j9={class:"action-buttons"},Z9=qr({__name:"NodePropertiesPanel",props:{selectedElement:{}},emits:["update-element","delete-element"],setup(t,{emit:e}){const r=t,n=e,a=Ct(null),i=Ct(!1),o=sr(()=>{var p;if(((p=a.value)==null?void 0:p.type)==="node")return EO(a.value.nodeType)});wr(()=>r.selectedElement,p=>{a.value=p?JSON.parse(JSON.stringify(p)):null},{deep:!0,immediate:!0});const l=sr(()=>{var p;return((p=a.value)==null?void 0:p.type)==="node"}),u=sr(()=>{var p;return((p=a.value)==null?void 0:p.type)==="edge"}),f=()=>{a.value&&n("update-element",a.value)},c=()=>{a.value&&(i.value=!0)},h=()=>{a.value&&(n("delete-element",a.value.id),a.value=null),i.value=!1},g=()=>{i.value=!1};return(p,y)=>(ft(),gt("div",z9,[y[11]||(y[11]=_e("h4",null,"Properties",-1)),a.value?(ft(),gt("div",H9,[_e("div",U9,[y[2]||(y[2]=_e("label",{for:"element-id"},"ID:",-1)),ot(Vn,{id:"element-id","model-value":a.value.id,disabled:""},null,8,["model-value"])]),l.value&&o.value?(ft(!0),gt(or,{key:0},Xa(o.value.properties,C=>(ft(),gt("div",{key:C.key,class:"form-group"},[_e("label",{for:`prop-${C.key}`},Ar(C.label)+":",9,W9),C.type==="select"?(ft(),Ka(q9,{key:0,id:`prop-${C.key}`,modelValue:a.value[C.key],"onUpdate:modelValue":E=>a.value[C.key]=E,options:C.options,onChange:f},null,8,["id","modelValue","onUpdate:modelValue","options"])):C.type==="checkbox"?Un((ft(),gt("input",{key:1,type:"checkbox",id:`prop-${C.key}`,"onUpdate:modelValue":E=>a.value[C.key]=E,onChange:f,class:"form-checkbox"},null,40,V9)),[[_P,a.value[C.key]]]):(ft(),Ka(Vn,{key:2,id:`prop-${C.key}`,type:C.type,modelValue:a.value[C.key],"onUpdate:modelValue":E=>a.value[C.key]=E,placeholder:C.placeholder,onInput:f},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder"])),C.helpText?(ft(),gt("small",$9,Ar(C.helpText),1)):Wr("",!0)]))),128)):u.value?(ft(),gt(or,{key:1},[_e("div",Y9,[y[3]||(y[3]=_e("label",{for:"element-name"},"Name:",-1)),ot(Vn,{id:"element-name",modelValue:a.value.name,"onUpdate:modelValue":y[0]||(y[0]=C=>a.value.name=C),onInput:f},null,8,["modelValue"])]),_e("div",X9,[y[4]||(y[4]=_e("label",{for:"edge-source"},"Source Node ID:",-1)),ot(Vn,{id:"edge-source","model-value":a.value.source,disabled:""},null,8,["model-value"])]),_e("div",K9,[y[5]||(y[5]=_e("label",{for:"edge-target"},"Target Node ID:",-1)),ot(Vn,{id:"edge-target","model-value":a.value.target,disabled:""},null,8,["model-value"])])],64)):Wr("",!0),_e("div",j9,[ot(rr,{onClick:f,type:"primary"},{default:ht(()=>y[6]||(y[6]=[At("Apply Changes")])),_:1,__:[6]}),ot(rr,{onClick:c,type:"danger"},{default:ht(()=>y[7]||(y[7]=[At("Delete Element")])),_:1,__:[7]})])])):(ft(),gt("div",G9,y[1]||(y[1]=[_e("p",null,"Select a node or edge on the canvas to view/edit its properties.",-1)]))),ot(Ss,{"is-open":i.value,onClose:g},{header:ht(()=>y[8]||(y[8]=[_e("h3",null,"Confirm Deletion",-1)])),body:ht(()=>{var C,E;return[_e("p",null,'Are you sure you want to delete "'+Ar(((C=a.value)==null?void 0:C.name)||((E=a.value)==null?void 0:E.id))+'"? This action cannot be undone. ',1)]}),footer:ht(()=>[ot(rr,{onClick:g,type:"secondary"},{default:ht(()=>y[9]||(y[9]=[At("Cancel")])),_:1,__:[9]}),ot(rr,{onClick:h,type:"danger"},{default:ht(()=>y[10]||(y[10]=[At("Delete")])),_:1,__:[10]})]),_:1},8,["is-open"])]))}}),Q9=an(Z9,[["__scopeId","data-v-a1da0016"]]);function J9(t){return{generatedCode:sr(()=>{var g;const r=t().filter(p=>p.type==="node"),n=t().filter(p=>p.type==="edge");if(r.length===0)return`model {
  # Your model will appear here...
}`;const a={},i={};r.forEach(p=>{a[p.id]=0,i[p.id]=[]}),n.forEach(p=>{var y;(y=i[p.source])==null||y.push(p.target),a[p.target]!==void 0&&a[p.target]++});const o=r.filter(p=>a[p.id]===0).map(p=>p.id),l=[],u=new Map(r.map(p=>[p.id,p]));for(;o.length>0;){const p=o.shift(),y=u.get(p);y&&l.push(y),(g=i[p])==null||g.forEach(C=>{a[C]!==void 0&&(a[C]--,a[C]===0&&o.push(C))})}const f={root:[]};l.forEach(p=>{if(p.nodeType==="plate")return;const y=p.parent||"root";f[y]||(f[y]=[]),f[y].push(p)});let c=[];const h=p=>{const y=n.filter(E=>E.target===p.id).map(E=>{const v=u.get(E.source);return v?v.name:"undefined_parent"}),C=p.indices?`${p.name}[${p.indices}]`:p.name;if(p.nodeType==="stochastic"||p.nodeType==="observed"&&p.distribution){const E=y.join(", ");return`  ${C} ~ ${p.distribution}(${E})`}return p.nodeType==="deterministic"&&p.equation?`  ${C} <- ${p.equation}`:""};return f.root.forEach(p=>{const y=h(p);y&&c.push(y)}),l.forEach(p=>{if(p.nodeType==="plate"&&f[p.id]){const y=p;c.push(`  for (${y.loopVariable} in ${y.loopRange}) {`),f[y.id].forEach(C=>{const E=h(C);E&&c.push(`  ${E}`)}),c.push("  }")}}),`model {
${c.join(`
`)}
}`})}}var aR={exports:{}},iR;function e8(){return iR||(iR=1,function(t,e){(function(r){r(Gi())})(function(r){r.defineMode("julia",function(n,a){function i(K,W,Z){return typeof Z>"u"&&(Z=""),typeof W>"u"&&(W="\\b"),new RegExp("^"+Z+"(("+K.join(")|(")+"))"+W)}var o="\\\\[0-7]{1,3}",l="\\\\x[A-Fa-f0-9]{1,2}",u=`\\\\[abefnrtv0%?'"\\\\]`,f="([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])",c=["[<>]:","[<>=]=","<<=?",">>>?=?","=>","--?>","<--[->]?","\\/\\/","\\.{2,3}","[\\.\\\\%*+\\-<>!\\/^|&]=?","\\?","\\$","~",":"],h=a.operators||i(["[<>]:","[<>=]=","[!=]==","<<=?",">>>?=?","=>?","--?>","<--[->]?","\\/\\/","[\\\\%*+\\-<>!\\/^|&\\u00F7\\u22BB]=?","\\?","\\$","~",":","\\u00D7","\\u2208","\\u2209","\\u220B","\\u220C","\\u2218","\\u221A","\\u221B","\\u2229","\\u222A","\\u2260","\\u2264","\\u2265","\\u2286","\\u2288","\\u228A","\\u22C5","\\b(in|isa)\\b(?!.?\\()"],""),g=a.delimiters||/^[;,()[\]{}]/,p=a.identifiers||/^[_A-Za-z\u00A1-\u2217\u2219-\uFFFF][\w\u00A1-\u2217\u2219-\uFFFF]*!*/,y=i([o,l,u,f],"'"),C=["begin","function","type","struct","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"],E=["end","else","elseif","catch","finally"],v=["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","where","macro","module","baremodule","struct","type","mutable","immutable","quote","typealias","abstract","primitive","bitstype"],x=["true","false","nothing","NaN","Inf"];r.registerHelper("hintWords","julia",v.concat(x));var w=i(C),T=i(E),A=i(v),_=i(x),D=/^@[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,P=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,N=/^(`|([_A-Za-z\u00A1-\uFFFF]*"("")?))/,B=i(c,"","@"),G=i(c,"",":");function F(K){return K.nestedArrays>0}function z(K){return K.nestedGenerators>0}function M(K,W){return typeof W>"u"&&(W=0),K.scopes.length<=W?null:K.scopes[K.scopes.length-(W+1)]}function R(K,W){if(K.match("#=",!1))return W.tokenize=I,W.tokenize(K,W);var Z=W.leavingExpr;if(K.sol()&&(Z=!1),W.leavingExpr=!1,Z&&K.match(/^'+/))return"operator";if(K.match(/\.{4,}/))return"error";if(K.match(/\.{1,3}/))return"operator";if(K.eatSpace())return null;var U=K.peek();if(U==="#")return K.skipToEnd(),"comment";if(U==="["&&(W.scopes.push("["),W.nestedArrays++),U==="("&&(W.scopes.push("("),W.nestedGenerators++),F(W)&&U==="]"){for(;W.scopes.length&&M(W)!=="[";)W.scopes.pop();W.scopes.pop(),W.nestedArrays--,W.leavingExpr=!0}if(z(W)&&U===")"){for(;W.scopes.length&&M(W)!=="(";)W.scopes.pop();W.scopes.pop(),W.nestedGenerators--,W.leavingExpr=!0}if(F(W)){if(W.lastToken=="end"&&K.match(":"))return"operator";if(K.match("end"))return"number"}var V;if((V=K.match(w,!1))&&W.scopes.push(V[0]),K.match(T,!1)&&W.scopes.pop(),K.match(/^::(?![:\$])/))return W.tokenize=k,W.tokenize(K,W);if(!Z&&(K.match(P)||K.match(G)))return"builtin";if(K.match(h))return"operator";if(K.match(/^\.?\d/,!1)){var X=RegExp(/^im\b/),ee=!1;if(K.match(/^0x\.[0-9a-f_]+p[\+\-]?[_\d]+/i)&&(ee=!0),K.match(/^0x[0-9a-f_]+/i)&&(ee=!0),K.match(/^0b[01_]+/i)&&(ee=!0),K.match(/^0o[0-7_]+/i)&&(ee=!0),K.match(/^(?:(?:\d[_\d]*)?\.(?!\.)(?:\d[_\d]*)?|\d[_\d]*\.(?!\.)(?:\d[_\d]*))?([Eef][\+\-]?[_\d]+)?/i)&&(ee=!0),K.match(/^\d[_\d]*(e[\+\-]?\d+)?/i)&&(ee=!0),ee)return K.match(X),W.leavingExpr=!0,"number"}if(K.match("'"))return W.tokenize=q,W.tokenize(K,W);if(K.match(N))return W.tokenize=ae(K.current()),W.tokenize(K,W);if(K.match(D)||K.match(B))return"meta";if(K.match(g))return null;if(K.match(A))return"keyword";if(K.match(_))return"builtin";var se=W.isDefinition||W.lastToken=="function"||W.lastToken=="macro"||W.lastToken=="type"||W.lastToken=="struct"||W.lastToken=="immutable";return K.match(p)?se?K.peek()==="."?(W.isDefinition=!0,"variable"):(W.isDefinition=!1,"def"):(W.leavingExpr=!0,"variable"):(K.next(),"error")}function k(K,W){return K.match(/.*?(?=[,;{}()=\s]|$)/),K.match("{")?W.nestedParameters++:K.match("}")&&W.nestedParameters>0&&W.nestedParameters--,W.nestedParameters>0?K.match(/.*?(?={|})/)||K.next():W.nestedParameters==0&&(W.tokenize=R),"builtin"}function I(K,W){return K.match("#=")&&W.nestedComments++,K.match(/.*?(?=(#=|=#))/)||K.skipToEnd(),K.match("=#")&&(W.nestedComments--,W.nestedComments==0&&(W.tokenize=R)),"comment"}function q(K,W){var Z=!1,U;if(K.match(y))Z=!0;else if(U=K.match(/\\u([a-f0-9]{1,4})(?=')/i)){var V=parseInt(U[1],16);(V<=55295||V>=57344)&&(Z=!0,K.next())}else if(U=K.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var V=parseInt(U[1],16);V<=1114111&&(Z=!0,K.next())}return Z?(W.leavingExpr=!0,W.tokenize=R,"string"):(K.match(/^[^']+(?=')/)||K.skipToEnd(),K.match("'")&&(W.tokenize=R),"error")}function ae(K){K.substr(-3)==='"""'?K='"""':K.substr(-1)==='"'&&(K='"');function W(Z,U){if(Z.eat("\\"))Z.next();else{if(Z.match(K))return U.tokenize=R,U.leavingExpr=!0,"string";Z.eat(/[`"]/)}return Z.eatWhile(/[^\\`"]/),"string"}return W}var re={startState:function(){return{tokenize:R,scopes:[],lastToken:null,leavingExpr:!1,isDefinition:!1,nestedArrays:0,nestedComments:0,nestedGenerators:0,nestedParameters:0,firstParenPos:-1}},token:function(K,W){var Z=W.tokenize(K,W),U=K.current();return U&&Z&&(W.lastToken=U),Z},indent:function(K,W){var Z=0;return(W==="]"||W===")"||/^end\b/.test(W)||/^else/.test(W)||/^catch\b/.test(W)||/^elseif\b/.test(W)||/^finally/.test(W))&&(Z=-1),(K.scopes.length+Z)*n.indentUnit},electricInput:/\b(end|else|catch|finally)\b/,blockCommentStart:"#=",blockCommentEnd:"=#",lineComment:"#",closeBrackets:'()[]{}""',fold:"indent"};return re}),r.defineMIME("text/x-julia","julia")})}()),aR.exports}e8();const t8={class:"code-preview-panel"},r8={class:"code-output"},n8={key:0,class:"fas fa-check"},a8={key:1},i8=qr({__name:"CodePreviewPanel",setup(t){const e=_o(),{generatedCode:r}=J9(()=>e.currentGraphElements),n=Ct(!1),a=Ct(null);let i=null;Sa(()=>{a.value&&(i=aw(a.value,{value:r.value,mode:"julia",theme:"material-darker",lineNumbers:!0,readOnly:!0,tabSize:2}))}),Aa(()=>{var l;if(i){const u=i.getWrapperElement();(l=u.parentNode)==null||l.removeChild(u),i=null}}),wr(r,l=>{i&&i.getValue()!==l&&i.setValue(l)});const o=()=>{navigator.clipboard.writeText(r.value).then(()=>{n.value=!0,setTimeout(()=>{n.value=!1},2e3)}).catch(l=>{console.error("Failed to copy code: ",l),alert("Failed to copy code to clipboard.")})};return(l,u)=>(ft(),gt("div",t8,[u[0]||(u[0]=_e("h4",null,"Generated BUGS Code",-1)),_e("div",r8,[_e("div",{ref_key:"editorContainer",ref:a,class:"editor-container"},null,512),ot(rr,{onClick:o,class:"copy-button",type:"secondary"},{default:ht(()=>[n.value?(ft(),gt("i",n8)):(ft(),gt("span",a8,"Copy Code"))]),_:1})])]))}}),o8=an(i8,[["__scopeId","data-v-d5df9de1"]]);var oR={exports:{}},sR;function s8(){return sR||(sR=1,function(t,e){(function(r){r(Gi())})(function(r){function n(o,l,u){this.orientation=l,this.scroll=u,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=o+"-"+l,this.inner=this.node.appendChild(document.createElement("div"));var f=this;r.on(this.inner,"mousedown",function(h){if(h.which!=1)return;r.e_preventDefault(h);var g=f.orientation=="horizontal"?"pageX":"pageY",p=h[g],y=f.pos;function C(){r.off(document,"mousemove",E),r.off(document,"mouseup",C)}function E(v){if(v.which!=1)return C();f.moveTo(y+(v[g]-p)*(f.total/f.size))}r.on(document,"mousemove",E),r.on(document,"mouseup",C)}),r.on(this.node,"click",function(h){r.e_preventDefault(h);var g=f.inner.getBoundingClientRect(),p;f.orientation=="horizontal"?p=h.clientX<g.left?-1:h.clientX>g.right?1:0:p=h.clientY<g.top?-1:h.clientY>g.bottom?1:0,f.moveTo(f.pos+p*f.screen)});function c(h){var g=r.wheelEventPixels(h)[f.orientation=="horizontal"?"x":"y"],p=f.pos;f.moveTo(f.pos+g),f.pos!=p&&r.e_preventDefault(h)}r.on(this.node,"mousewheel",c),r.on(this.node,"DOMMouseScroll",c)}n.prototype.setPos=function(o,l){return o<0&&(o=0),o>this.total-this.screen&&(o=this.total-this.screen),!l&&o==this.pos?!1:(this.pos=o,this.inner.style[this.orientation=="horizontal"?"left":"top"]=o*(this.size/this.total)+"px",!0)},n.prototype.moveTo=function(o){this.setPos(o)&&this.scroll(o,this.orientation)};var a=10;n.prototype.update=function(o,l,u){var f=this.screen!=l||this.total!=o||this.size!=u;f&&(this.screen=l,this.total=o,this.size=u);var c=this.screen*(this.size/this.total);c<a&&(this.size-=a-c,c=a),this.inner.style[this.orientation=="horizontal"?"width":"height"]=c+"px",this.setPos(this.pos,f)};function i(o,l,u){this.addClass=o,this.horiz=new n(o,"horizontal",u),l(this.horiz.node),this.vert=new n(o,"vertical",u),l(this.vert.node),this.width=null}i.prototype.update=function(o){if(this.width==null){var l=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;l&&(this.width=parseInt(l.height))}var u=this.width||0,f=o.scrollWidth>o.clientWidth+1,c=o.scrollHeight>o.clientHeight+1;return this.vert.node.style.display=c?"block":"none",this.horiz.node.style.display=f?"block":"none",c&&(this.vert.update(o.scrollHeight,o.clientHeight,o.viewHeight-(f?u:0)),this.vert.node.style.bottom=f?u+"px":"0"),f&&(this.horiz.update(o.scrollWidth,o.clientWidth,o.viewWidth-(c?u:0)-o.barLeft),this.horiz.node.style.right=c?u+"px":"0",this.horiz.node.style.left=o.barLeft+"px"),{right:c?u:0,bottom:f?u:0}},i.prototype.setScrollTop=function(o){this.vert.setPos(o)},i.prototype.setScrollLeft=function(o){this.horiz.setPos(o)},i.prototype.clear=function(){var o=this.horiz.node.parentNode;o.removeChild(this.horiz.node),o.removeChild(this.vert.node)},r.scrollbarModel.simple=function(o,l){return new i("CodeMirror-simplescroll",o,l)},r.scrollbarModel.overlay=function(o,l){return new i("CodeMirror-overlayscroll",o,l)}})}()),oR.exports}s8();var lR={exports:{}},uR;function l8(){return uR||(uR=1,function(t,e){(function(r){r(Gi())})(function(r){var n=r.Pos;function a(x){var w=x.flags;return w??(x.ignoreCase?"i":"")+(x.global?"g":"")+(x.multiline?"m":"")}function i(x,w){for(var T=a(x),A=T,_=0;_<w.length;_++)A.indexOf(w.charAt(_))==-1&&(A+=w.charAt(_));return T==A?x:new RegExp(x.source,A)}function o(x){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(x.source)}function l(x,w,T){w=i(w,"g");for(var A=T.line,_=T.ch,D=x.lastLine();A<=D;A++,_=0){w.lastIndex=_;var P=x.getLine(A),N=w.exec(P);if(N)return{from:n(A,N.index),to:n(A,N.index+N[0].length),match:N}}}function u(x,w,T){if(!o(w))return l(x,w,T);w=i(w,"gm");for(var A,_=1,D=T.line,P=x.lastLine();D<=P;){for(var N=0;N<_&&!(D>P);N++){var B=x.getLine(D++);A=A==null?B:A+`
`+B}_=_*2,w.lastIndex=T.ch;var G=w.exec(A);if(G){var F=A.slice(0,G.index).split(`
`),z=G[0].split(`
`),M=T.line+F.length-1,R=F[F.length-1].length;return{from:n(M,R),to:n(M+z.length-1,z.length==1?R+z[0].length:z[z.length-1].length),match:G}}}}function f(x,w,T){for(var A,_=0;_<=x.length;){w.lastIndex=_;var D=w.exec(x);if(!D)break;var P=D.index+D[0].length;if(P>x.length-T)break;(!A||P>A.index+A[0].length)&&(A=D),_=D.index+1}return A}function c(x,w,T){w=i(w,"g");for(var A=T.line,_=T.ch,D=x.firstLine();A>=D;A--,_=-1){var P=x.getLine(A),N=f(P,w,_<0?0:P.length-_);if(N)return{from:n(A,N.index),to:n(A,N.index+N[0].length),match:N}}}function h(x,w,T){if(!o(w))return c(x,w,T);w=i(w,"gm");for(var A,_=1,D=x.getLine(T.line).length-T.ch,P=T.line,N=x.firstLine();P>=N;){for(var B=0;B<_&&P>=N;B++){var G=x.getLine(P--);A=A==null?G:G+`
`+A}_*=2;var F=f(A,w,D);if(F){var z=A.slice(0,F.index).split(`
`),M=F[0].split(`
`),R=P+z.length,k=z[z.length-1].length;return{from:n(R,k),to:n(R+M.length-1,M.length==1?k+M[0].length:M[M.length-1].length),match:F}}}}var g,p;String.prototype.normalize?(g=function(x){return x.normalize("NFD").toLowerCase()},p=function(x){return x.normalize("NFD")}):(g=function(x){return x.toLowerCase()},p=function(x){return x});function y(x,w,T,A){if(x.length==w.length)return T;for(var _=0,D=T+Math.max(0,x.length-w.length);;){if(_==D)return _;var P=_+D>>1,N=A(x.slice(0,P)).length;if(N==T)return P;N>T?D=P:_=P+1}}function C(x,w,T,A){if(!w.length)return null;var _=A?g:p,D=_(w).split(/\r|\n\r?/);e:for(var P=T.line,N=T.ch,B=x.lastLine()+1-D.length;P<=B;P++,N=0){var G=x.getLine(P).slice(N),F=_(G);if(D.length==1){var z=F.indexOf(D[0]);if(z==-1)continue e;var T=y(G,F,z,_)+N;return{from:n(P,y(G,F,z,_)+N),to:n(P,y(G,F,z+D[0].length,_)+N)}}else{var M=F.length-D[0].length;if(F.slice(M)!=D[0])continue e;for(var R=1;R<D.length-1;R++)if(_(x.getLine(P+R))!=D[R])continue e;var k=x.getLine(P+D.length-1),I=_(k),q=D[D.length-1];if(I.slice(0,q.length)!=q)continue e;return{from:n(P,y(G,F,M,_)+N),to:n(P+D.length-1,y(k,I,q.length,_))}}}}function E(x,w,T,A){if(!w.length)return null;var _=A?g:p,D=_(w).split(/\r|\n\r?/);e:for(var P=T.line,N=T.ch,B=x.firstLine()-1+D.length;P>=B;P--,N=-1){var G=x.getLine(P);N>-1&&(G=G.slice(0,N));var F=_(G);if(D.length==1){var z=F.lastIndexOf(D[0]);if(z==-1)continue e;return{from:n(P,y(G,F,z,_)),to:n(P,y(G,F,z+D[0].length,_))}}else{var M=D[D.length-1];if(F.slice(0,M.length)!=M)continue e;for(var R=1,T=P-D.length+1;R<D.length-1;R++)if(_(x.getLine(T+R))!=D[R])continue e;var k=x.getLine(P+1-D.length),I=_(k);if(I.slice(I.length-D[0].length)!=D[0])continue e;return{from:n(P+1-D.length,y(k,I,k.length-D[0].length,_)),to:n(P,y(G,F,M.length,_))}}}}function v(x,w,T,A){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=x,T=T?x.clipPos(T):n(0,0),this.pos={from:T,to:T};var _;typeof A=="object"?_=A.caseFold:(_=A,A=null),typeof w=="string"?(_==null&&(_=!1),this.matches=function(D,P){return(D?E:C)(x,w,P,_)}):(w=i(w,"gm"),!A||A.multiline!==!1?this.matches=function(D,P){return(D?h:u)(x,w,P)}:this.matches=function(D,P){return(D?c:l)(x,w,P)})}v.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(x){var w=this.doc.clipPos(x?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(w=n(w.line,w.ch),x?(w.ch--,w.ch<0&&(w.line--,w.ch=(this.doc.getLine(w.line)||"").length)):(w.ch++,w.ch>(this.doc.getLine(w.line)||"").length&&(w.ch=0,w.line++)),r.cmpPos(w,this.doc.clipPos(w))!=0))return this.atOccurrence=!1;var T=this.matches(x,w);if(this.afterEmptyMatch=T&&r.cmpPos(T.from,T.to)==0,T)return this.pos=T,this.atOccurrence=!0,this.pos.match||!0;var A=n(x?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:A,to:A},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(x,w){if(this.atOccurrence){var T=r.splitLines(x);this.doc.replaceRange(T,this.pos.from,this.pos.to,w),this.pos.to=n(this.pos.from.line+T.length-1,T[T.length-1].length+(T.length==1?this.pos.from.ch:0))}}},r.defineExtension("getSearchCursor",function(x,w,T){return new v(this.doc,x,w,T)}),r.defineDocExtension("getSearchCursor",function(x,w,T){return new v(this,x,w,T)}),r.defineExtension("selectMatches",function(x,w){for(var T=[],A=this.getSearchCursor(x,this.getCursor("from"),w);A.findNext()&&!(r.cmpPos(A.to(),this.getCursor("to"))>0);)T.push({anchor:A.from(),head:A.to()});T.length&&this.setSelections(T,0)})})}()),lR.exports}l8();var fR={exports:{}},cR;function AO(){return cR||(cR=1,function(t,e){(function(r){r(Gi())})(function(r){function n(l,u,f,c){if(f&&f.call){var h=f;f=null}else var h=o(l,f,"rangeFinder");typeof u=="number"&&(u=r.Pos(u,0));var g=o(l,f,"minFoldSize");function p(v){var x=h(l,u);if(!x||x.to.line-x.from.line<g)return null;if(c==="fold")return x;for(var w=l.findMarksAt(x.from),T=0;T<w.length;++T)if(w[T].__isFold){if(!v)return null;x.cleared=!0,w[T].clear()}return x}var y=p(!0);if(o(l,f,"scanUp"))for(;!y&&u.line>l.firstLine();)u=r.Pos(u.line-1,0),y=p(!1);if(!(!y||y.cleared||c==="unfold")){var C=a(l,f,y);r.on(C,"mousedown",function(v){E.clear(),r.e_preventDefault(v)});var E=l.markText(y.from,y.to,{replacedWith:C,clearOnEnter:o(l,f,"clearOnEnter"),__isFold:!0});E.on("clear",function(v,x){r.signal(l,"unfold",l,v,x)}),r.signal(l,"fold",l,y.from,y.to)}}function a(l,u,f){var c=o(l,u,"widget");if(typeof c=="function"&&(c=c(f.from,f.to)),typeof c=="string"){var h=document.createTextNode(c);c=document.createElement("span"),c.appendChild(h),c.className="CodeMirror-foldmarker"}else c&&(c=c.cloneNode(!0));return c}r.newFoldFunction=function(l,u){return function(f,c){n(f,c,{rangeFinder:l,widget:u})}},r.defineExtension("foldCode",function(l,u,f){n(this,l,u,f)}),r.defineExtension("isFolded",function(l){for(var u=this.findMarksAt(l),f=0;f<u.length;++f)if(u[f].__isFold)return!0}),r.commands.toggleFold=function(l){l.foldCode(l.getCursor())},r.commands.fold=function(l){l.foldCode(l.getCursor(),null,"fold")},r.commands.unfold=function(l){l.foldCode(l.getCursor(),{scanUp:!1},"unfold")},r.commands.foldAll=function(l){l.operation(function(){for(var u=l.firstLine(),f=l.lastLine();u<=f;u++)l.foldCode(r.Pos(u,0),{scanUp:!1},"fold")})},r.commands.unfoldAll=function(l){l.operation(function(){for(var u=l.firstLine(),f=l.lastLine();u<=f;u++)l.foldCode(r.Pos(u,0),{scanUp:!1},"unfold")})},r.registerHelper("fold","combine",function(){var l=Array.prototype.slice.call(arguments,0);return function(u,f){for(var c=0;c<l.length;++c){var h=l[c](u,f);if(h)return h}}}),r.registerHelper("fold","auto",function(l,u){for(var f=l.getHelpers(u,"fold"),c=0;c<f.length;c++){var h=f[c](l,u);if(h)return h}});var i={rangeFinder:r.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};r.defineOption("foldOptions",null);function o(l,u,f){if(u&&u[f]!==void 0)return u[f];var c=l.options.foldOptions;return c&&c[f]!==void 0?c[f]:i[f]}r.defineExtension("foldOption",function(l,u){return o(this,l,u)})})}()),fR.exports}AO();var dR={exports:{}},hR;function u8(){return hR||(hR=1,function(t,e){(function(r){r(Gi(),AO())})(function(r){r.defineOption("foldGutter",!1,function(E,v,x){x&&x!=r.Init&&(E.clearGutter(E.state.foldGutter.options.gutter),E.state.foldGutter=null,E.off("gutterClick",h),E.off("changes",p),E.off("viewportChange",y),E.off("fold",C),E.off("unfold",C),E.off("swapDoc",p),E.off("optionChange",g)),v&&(E.state.foldGutter=new a(i(v)),c(E),E.on("gutterClick",h),E.on("changes",p),E.on("viewportChange",y),E.on("fold",C),E.on("unfold",C),E.on("swapDoc",p),E.on("optionChange",g))});var n=r.Pos;function a(E){this.options=E,this.from=this.to=0}function i(E){return E===!0&&(E={}),E.gutter==null&&(E.gutter="CodeMirror-foldgutter"),E.indicatorOpen==null&&(E.indicatorOpen="CodeMirror-foldgutter-open"),E.indicatorFolded==null&&(E.indicatorFolded="CodeMirror-foldgutter-folded"),E}function o(E,v){for(var x=E.findMarks(n(v,0),n(v+1,0)),w=0;w<x.length;++w)if(x[w].__isFold){var T=x[w].find(-1);if(T&&T.line===v)return x[w]}}function l(E){if(typeof E=="string"){var v=document.createElement("div");return v.className=E+" CodeMirror-guttermarker-subtle",v}else return E.cloneNode(!0)}function u(E,v,x){var w=E.state.foldGutter.options,T=v-1,A=E.foldOption(w,"minFoldSize"),_=E.foldOption(w,"rangeFinder"),D=typeof w.indicatorFolded=="string"&&f(w.indicatorFolded),P=typeof w.indicatorOpen=="string"&&f(w.indicatorOpen);E.eachLine(v,x,function(N){++T;var B=null,G=N.gutterMarkers;if(G&&(G=G[w.gutter]),o(E,T)){if(D&&G&&D.test(G.className))return;B=l(w.indicatorFolded)}else{var F=n(T,0),z=_&&_(E,F);if(z&&z.to.line-z.from.line>=A){if(P&&G&&P.test(G.className))return;B=l(w.indicatorOpen)}}!B&&!G||E.setGutterMarker(N,w.gutter,B)})}function f(E){return new RegExp("(^|\\s)"+E+"(?:$|\\s)\\s*")}function c(E){var v=E.getViewport(),x=E.state.foldGutter;x&&(E.operation(function(){u(E,v.from,v.to)}),x.from=v.from,x.to=v.to)}function h(E,v,x){var w=E.state.foldGutter;if(w){var T=w.options;if(x==T.gutter){var A=o(E,v);A?A.clear():E.foldCode(n(v,0),T)}}}function g(E,v){v=="mode"&&p(E)}function p(E){var v=E.state.foldGutter;if(v){var x=v.options;v.from=v.to=0,clearTimeout(v.changeUpdate),v.changeUpdate=setTimeout(function(){c(E)},x.foldOnChangeTimeSpan||600)}}function y(E){var v=E.state.foldGutter;if(v){var x=v.options;clearTimeout(v.changeUpdate),v.changeUpdate=setTimeout(function(){var w=E.getViewport();v.from==v.to||w.from-v.to>20||v.from-w.to>20?c(E):E.operation(function(){w.from<v.from&&(u(E,w.from,v.from),v.from=w.from),w.to>v.to&&(u(E,v.to,w.to),v.to=w.to)})},x.updateViewportTimeSpan||400)}}function C(E,v){var x=E.state.foldGutter;if(x){var w=v.line;w>=x.from&&w<x.to&&u(E,w,w+1)}}})}()),dR.exports}u8();var vR={exports:{}},pR;function f8(){return pR||(pR=1,function(t,e){(function(r){r(Gi())})(function(r){function n(a){return function(i,o){var l=o.line,u=i.getLine(l);function f(C){for(var E,v=o.ch,x=0;;){var w=v<=0?-1:u.lastIndexOf(C[0],v-1);if(w==-1){if(x==1)break;x=1,v=u.length;continue}if(x==1&&w<o.ch)break;if(E=i.getTokenTypeAt(r.Pos(l,w+1)),!/^(comment|string)/.test(E))return{ch:w+1,tokenType:E,pair:C};v=w-1}}function c(C){var E=1,v=i.lastLine(),x,w=C.ch,T;e:for(var A=l;A<=v;++A)for(var _=i.getLine(A),D=A==l?w:0;;){var P=_.indexOf(C.pair[0],D),N=_.indexOf(C.pair[1],D);if(P<0&&(P=_.length),N<0&&(N=_.length),D=Math.min(P,N),D==_.length)break;if(i.getTokenTypeAt(r.Pos(A,D+1))==C.tokenType){if(D==P)++E;else if(!--E){x=A,T=D;break e}}++D}return x==null||l==x?null:{from:r.Pos(l,w),to:r.Pos(x,T)}}for(var h=[],g=0;g<a.length;g++){var p=f(a[g]);p&&h.push(p)}h.sort(function(C,E){return C.ch-E.ch});for(var g=0;g<h.length;g++){var y=c(h[g]);if(y)return y}return null}}r.registerHelper("fold","brace",n([["{","}"],["[","]"]])),r.registerHelper("fold","brace-paren",n([["{","}"],["[","]"],["(",")"]])),r.registerHelper("fold","import",function(a,i){function o(g){if(g<a.firstLine()||g>a.lastLine())return null;var p=a.getTokenAt(r.Pos(g,1));if(/\S/.test(p.string)||(p=a.getTokenAt(r.Pos(g,p.end+1))),p.type!="keyword"||p.string!="import")return null;for(var y=g,C=Math.min(a.lastLine(),g+10);y<=C;++y){var E=a.getLine(y),v=E.indexOf(";");if(v!=-1)return{startCh:p.end,end:r.Pos(y,v)}}}var l=i.line,u=o(l),f;if(!u||o(l-1)||(f=o(l-2))&&f.end.line==l-1)return null;for(var c=u.end;;){var h=o(c.line+1);if(h==null)break;c=h.end}return{from:a.clipPos(r.Pos(l,u.startCh+1)),to:c}}),r.registerHelper("fold","include",function(a,i){function o(h){if(h<a.firstLine()||h>a.lastLine())return null;var g=a.getTokenAt(r.Pos(h,1));if(/\S/.test(g.string)||(g=a.getTokenAt(r.Pos(h,g.end+1))),g.type=="meta"&&g.string.slice(0,8)=="#include")return g.start+8}var l=i.line,u=o(l);if(u==null||o(l-1)!=null)return null;for(var f=l;;){var c=o(f+1);if(c==null)break;++f}return{from:r.Pos(l,u+1),to:a.clipPos(r.Pos(f))}})})}()),vR.exports}f8();const c8={class:"json-editor-panel"},d8={class:"editor-wrapper"},h8={class:"footer-section"},v8={key:0,class:"error-message"},p8={key:1,class:"status-text"},g8=qr({__name:"JsonEditorPanel",setup(t){const e=_o(),{selectedElement:r}=nw(),n=Ct(""),a=Ct(null);let i=null,o=!1;const l=sr(()=>e.currentGraphElements),u=["id","type","nodeType","source","target","parent"],f=()=>{if(!i)return;i.getAllMarks().forEach(p=>p.clear()),i.getValue().split(`
`).forEach((p,y)=>{const E=p.trim().match(/"([^"]+)"\s*:/);E&&u.includes(E[1])&&(i==null||i.markText({line:y,ch:0},{line:y,ch:p.length},{readOnly:!0,className:"cm-protected"}))})};Sa(()=>{if(a.value){i=aw(a.value,{value:"[]",mode:{name:"javascript",json:!0},theme:"material-darker",lineNumbers:!0,tabSize:2,scrollbarStyle:"simple",lineWrapping:!1,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),i.on("change",g=>{o||c(g.getValue())});const h=JSON.stringify(l.value,null,2);o=!0,i.setValue(h),f(),o=!1}}),Aa(()=>{var h;if(i){const g=i.getWrapperElement();(h=g.parentNode)==null||h.removeChild(g),i=null}}),wr(l,h=>{if(!i)return;const g=i.getValue(),p=JSON.stringify(h,null,2);try{if(JSON.stringify(JSON.parse(g))===JSON.stringify(JSON.parse(p)))return}catch{if(g===p)return}o=!0,i.setValue(p),f(),o=!1},{deep:!0}),wr(r,async h=>{if(!h||!i)return;await gc();const g=`"id": "${h.id}"`,p=i.getSearchCursor(g);if(p.findNext()){const y=p.from(),C=i.getSearchCursor("{",y);if(C.findPrevious()){const E=C.from(),v=i.findMatchingBracket(E,!1);if(v&&v.to){const x={line:v.to.line,ch:v.to.ch+1};i.focus(),i.setSelection(E,x),i.scrollIntoView({from:E,to:x},50)}}}});const c=h=>{try{const g=JSON.parse(h);if(!Array.isArray(g))throw new Error("JSON must be an array of graph elements.");e.currentGraphId&&e.updateGraphElements(e.currentGraphId,g),n.value=""}catch(g){n.value=`Invalid JSON: ${g.message}`}};return(h,g)=>(ft(),gt("div",c8,[g[1]||(g[1]=_e("div",{class:"header-section"},[_e("h4",null,"Live Graph JSON"),_e("p",{class:"description"}," Edit the JSON below to see live updates on the canvas. Read-only fields are protected. ")],-1)),_e("div",d8,[_e("div",{ref_key:"editorContainer",ref:a,class:"json-editor-container"},null,512)]),_e("div",h8,[n.value?(ft(),gt("div",v8,Ar(n.value),1)):(ft(),gt("span",p8,g[0]||(g[0]=[_e("i",{class:"fas fa-check-circle"},null,-1),At(" Live Sync Enabled ")])))])]))}}),y8=an(g8,[["__scopeId","data-v-4c23a820"]]),m8=qr({__name:"DropdownMenu",setup(t){const e=Ct(!1),r=Ct(null),n=()=>{e.value=!e.value},a=()=>{e.value=!1},i=o=>{r.value&&!r.value.contains(o.target)&&a()};return Sa(()=>{document.addEventListener("click",i,!0)}),Aa(()=>{document.removeEventListener("click",i,!0)}),(o,l)=>(ft(),gt("div",{class:"menu-item-wrapper",ref_key:"dropdownRef",ref:r},[_e("div",{onClick:n,class:"menu-toggle"},[ps(o.$slots,"trigger",{},void 0,!0)]),ot(d1,{name:"dropdown-animation"},{default:ht(()=>[e.value?(ft(),gt("div",{key:0,class:"dropdown-content",onClick:a},[ps(o.$slots,"content",{},void 0,!0)])):Wr("",!0)]),_:3})],512))}}),ao=an(m8,[["__scopeId","data-v-90292090"]]),b8={class:"navbar"},w8={class:"navbar-left"},x8={class:"navbar-menu"},C8=["onClick"],E8=["checked"],T8=["onClick"],S8={class:"navbar-right"},A8={class:"pane-toggles"},L8={class:"project-name"},D8=qr({__name:"TheNavbar",props:{projectName:{},activeGraphName:{},isGridEnabled:{type:Boolean},gridSize:{},currentMode:{},currentNodeType:{},isLeftSidebarOpen:{type:Boolean},isRightSidebarOpen:{type:Boolean}},emits:["update:isGridEnabled","update:gridSize","update:currentMode","update:currentNodeType","new-project","new-graph","save-current-graph","toggle-left-sidebar","toggle-right-sidebar","open-about-modal","open-export-modal","export-json","apply-layout","load-example"],setup(t,{emit:e}){const r=t,n=e,a=sr(()=>r.projectName&&r.activeGraphName?`${r.projectName} — ${r.activeGraphName}`:r.projectName?r.projectName:"No Project Selected"),i=[{name:"Rats Model",key:"rats"}],o=u=>{n("update:currentNodeType",u),n("update:currentMode","add-node")},l=u=>{const f=u.target;n("update:gridSize",Number(f.value))};return(u,f)=>(ft(),gt("nav",b8,[_e("div",w8,[f[32]||(f[32]=_e("div",{class:"navbar-brand"},"DoodleBUGS",-1)),_e("div",x8,[ot(ao,null,{trigger:ht(()=>[ot(rr,{type:"ghost",size:"small"},{default:ht(()=>f[17]||(f[17]=[At("Project")])),_:1,__:[17]})]),content:ht(()=>[_e("a",{href:"#",onClick:f[0]||(f[0]=kr(c=>n("new-project"),["prevent"]))},"New Project..."),_e("a",{href:"#",onClick:f[1]||(f[1]=kr(c=>n("new-graph"),["prevent"]))},"New Graph..."),_e("a",{href:"#",onClick:f[2]||(f[2]=kr(c=>n("save-current-graph"),["prevent"]))},"Save Current Graph")]),_:1}),ot(ao,null,{trigger:ht(()=>[ot(rr,{type:"ghost",size:"small"},{default:ht(()=>f[18]||(f[18]=[At("Export")])),_:1,__:[18]})]),content:ht(()=>[_e("a",{href:"#",onClick:f[3]||(f[3]=kr(c=>n("open-export-modal","png"),["prevent"]))},"as PNG..."),_e("a",{href:"#",onClick:f[4]||(f[4]=kr(c=>n("open-export-modal","jpg"),["prevent"]))},"as JPG..."),_e("a",{href:"#",onClick:f[5]||(f[5]=kr(c=>n("open-export-modal","svg"),["prevent"]))},"as SVG..."),f[19]||(f[19]=_e("div",{class:"dropdown-divider"},null,-1)),_e("a",{href:"#",onClick:f[6]||(f[6]=kr(c=>n("export-json"),["prevent"]))},"as JSON")]),_:1}),ot(ao,null,{trigger:ht(()=>[ot(rr,{type:"ghost",size:"small"},{default:ht(()=>f[20]||(f[20]=[At("Add")])),_:1,__:[20]})]),content:ht(()=>[f[21]||(f[21]=_e("div",{class:"dropdown-section-title"},"Nodes",-1)),(ft(!0),gt(or,null,Xa(ir(id),c=>(ft(),gt("a",{key:c.nodeType,href:"#",onClick:kr(h=>o(c.nodeType),["prevent"])},Ar(c.label),9,C8))),128)),f[22]||(f[22]=_e("div",{class:"dropdown-divider"},null,-1)),_e("a",{href:"#",onClick:f[7]||(f[7]=kr(c=>n("update:currentMode","add-edge"),["prevent"]))},"Add Edge")]),_:1}),ot(ao,null,{trigger:ht(()=>[ot(rr,{type:"ghost",size:"small"},{default:ht(()=>f[23]||(f[23]=[At("Layout")])),_:1,__:[23]})]),content:ht(()=>[_e("a",{href:"#",onClick:f[8]||(f[8]=kr(c=>n("apply-layout","dagre"),["prevent"]))},"Dagre (Hierarchical)"),_e("a",{href:"#",onClick:f[9]||(f[9]=kr(c=>n("apply-layout","fcose"),["prevent"]))},"fCoSE (Force-Directed)"),_e("a",{href:"#",onClick:f[10]||(f[10]=kr(c=>n("apply-layout","preset"),["prevent"]))},"Reset to Preset")]),_:1}),ot(ao,null,{trigger:ht(()=>[ot(rr,{type:"ghost",size:"small"},{default:ht(()=>f[24]||(f[24]=[At("View")])),_:1,__:[24]})]),content:ht(()=>[_e("label",{class:"dropdown-checkbox",onClick:f[12]||(f[12]=kr(()=>{},["stop"]))},[_e("input",{type:"checkbox",checked:u.isGridEnabled,onChange:f[11]||(f[11]=c=>n("update:isGridEnabled",c.target.checked))},null,40,E8),f[25]||(f[25]=At(" Show Grid "))]),_e("div",{class:"dropdown-input-group",onClick:f[13]||(f[13]=kr(()=>{},["stop"]))},[f[26]||(f[26]=_e("label",{for:"grid-size-nav"},"Grid Size:",-1)),ot(Vn,{id:"grid-size-nav",type:"number","model-value":u.gridSize,onInput:l,min:"10",max:"100",step:"5",class:"w-20"},null,8,["model-value"]),f[27]||(f[27]=_e("span",null,"px",-1))])]),_:1}),ot(ao,null,{trigger:ht(()=>[ot(rr,{type:"ghost",size:"small"},{default:ht(()=>f[28]||(f[28]=[At("Examples")])),_:1,__:[28]})]),content:ht(()=>[(ft(),gt(or,null,Xa(i,c=>_e("a",{key:c.key,href:"#",onClick:kr(h=>n("load-example",c.key),["prevent"])},Ar(c.name),9,T8)),64))]),_:1}),ot(ao,null,{trigger:ht(()=>[ot(rr,{type:"ghost",size:"small"},{default:ht(()=>f[29]||(f[29]=[At("Help")])),_:1,__:[29]})]),content:ht(()=>[_e("a",{href:"#",onClick:f[14]||(f[14]=kr(c=>n("open-about-modal"),["prevent"]))},"About DoodleBUGS"),f[30]||(f[30]=_e("span",{class:"dropdown-item-placeholder"},"Documentation (Coming Soon)",-1)),f[31]||(f[31]=_e("a",{href:"https://github.com/TuringLang/JuliaBUGS.jl/issues/new?template=doodlebugs.md",target:"_blank",rel:"noopener noreferrer",class:"report-issue-link"},[At(" Report an Issue "),_e("i",{class:"fas fa-external-link-alt external-link-icon"})],-1))]),_:1})])]),_e("div",S8,[_e("div",A8,[_e("button",{onClick:f[15]||(f[15]=c=>n("toggle-left-sidebar")),class:cr({active:u.isLeftSidebarOpen}),title:"Toggle Left Sidebar"},f[33]||(f[33]=[_e("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[_e("path",{d:"M49.984,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"})],-1)]),2),_e("button",{onClick:f[16]||(f[16]=c=>n("toggle-right-sidebar")),class:cr({active:u.isRightSidebarOpen}),title:"Toggle Right Sidebar"},f[34]||(f[34]=[_e("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",transform:"matrix(-1, 0, 0, 1, 0, 0)"},[_e("path",{d:"M49.984,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"})],-1)]),2)]),_e("span",L8,Ar(a.value),1)])]))}}),_8=an(D8,[["__scopeId","data-v-b8fed26e"]]),M8=qr({__name:"AboutModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(t,{emit:e}){const r=e;return(n,a)=>(ft(),Ka(Ss,{"is-open":n.isOpen,onClose:a[1]||(a[1]=i=>r("close"))},{header:ht(()=>a[2]||(a[2]=[_e("h3",null,"About DoodleBUGS",-1)])),body:ht(()=>a[3]||(a[3]=[_e("div",{class:"about-content"},[_e("p",null,[_e("strong",null,"DoodleBUGS"),At(" is a graphical modeling tool designed to simplify the creation of Bayesian models for analysis with BUGS language -- "),_e("a",{href:"https://github.com/TuringLang/JuliaBUGS.jl",target:"_blank",rel:"noopener noreferrer"},"JuliaBUGS.jl"),At(". ")]),_e("p",null," Our goal is to provide an intuitive, visual interface for statisticians, researchers, and students to build, understand, and share complex probabilistic models. "),_e("hr"),_e("p",null,[_e("strong",null,"Version:"),At(" Alpha Phase -- We are just experimenting with things now!")])],-1)])),footer:ht(()=>[_e("button",{onClick:a[0]||(a[0]=i=>r("close")),class:"primary"},"Close")]),_:1},8,["is-open"]))}}),R8=an(M8,[["__scopeId","data-v-1155d993"]]),P8={class:"export-options-form"},N8={class:"form-group"},k8={class:"form-group checkbox-group"},O8={class:"form-group"},I8={class:"form-group"},F8={class:"form-group"},B8={key:1,class:"form-group"},q8=qr({__name:"ExportModal",props:{isOpen:{type:Boolean},exportType:{}},emits:["close","confirm-export"],setup(t,{emit:e}){const r=t,n=e,a=Ct({bg:"#ffffff",full:!0,scale:2,quality:.92,maxWidth:"",maxHeight:""});wr(()=>r.isOpen,l=>{l&&(a.value={bg:r.exportType==="png"||r.exportType==="svg"?"transparent":"#ffffff",full:!0,scale:2,quality:.92,maxWidth:"",maxHeight:""})});const i=sr(()=>r.exportType?`Export as ${r.exportType.toUpperCase()}`:"Export"),o=()=>{const l={bg:a.value.bg,full:a.value.full,scale:a.value.scale};r.exportType==="jpg"&&(l.quality=a.value.quality),a.value.maxWidth&&(l.maxWidth=Number(a.value.maxWidth)),a.value.maxHeight&&(l.maxHeight=Number(a.value.maxHeight)),n("confirm-export",l),n("close")};return(l,u)=>(ft(),Ka(Ss,{"is-open":l.isOpen,onClose:u[7]||(u[7]=f=>l.$emit("close"))},{header:ht(()=>[_e("h3",null,Ar(i.value),1)]),body:ht(()=>[_e("div",P8,[_e("div",N8,[u[8]||(u[8]=_e("label",{for:"export-bg"},"Background Color:",-1)),ot(Vn,{id:"export-bg",type:"color",modelValue:a.value.bg,"onUpdate:modelValue":u[0]||(u[0]=f=>a.value.bg=f)},null,8,["modelValue"])]),_e("div",k8,[u[9]||(u[9]=_e("label",{for:"export-full"},"Export Full Graph:",-1)),Un(_e("input",{id:"export-full",type:"checkbox","onUpdate:modelValue":u[1]||(u[1]=f=>a.value.full=f)},null,512),[[_P,a.value.full]]),u[10]||(u[10]=_e("small",{class:"help-text"},"(Uncheck to export current view only)",-1))]),_e("div",O8,[u[11]||(u[11]=_e("label",{for:"export-scale"},"Scale:",-1)),ot(Vn,{id:"export-scale",type:"number",modelValue:a.value.scale,"onUpdate:modelValue":u[2]||(u[2]=f=>a.value.scale=f),modelModifiers:{number:!0},min:"0.1",step:"0.1"},null,8,["modelValue"])]),l.exportType==="png"||l.exportType==="jpg"?(ft(),gt(or,{key:0},[_e("div",I8,[u[12]||(u[12]=_e("label",{for:"export-maxWidth"},"Max Width (optional):",-1)),ot(Vn,{id:"export-maxWidth",type:"number",modelValue:a.value.maxWidth,"onUpdate:modelValue":u[3]||(u[3]=f=>a.value.maxWidth=f),placeholder:"e.g., 1920"},null,8,["modelValue"])]),_e("div",F8,[u[13]||(u[13]=_e("label",{for:"export-maxHeight"},"Max Height (optional):",-1)),ot(Vn,{id:"export-maxHeight",type:"number",modelValue:a.value.maxHeight,"onUpdate:modelValue":u[4]||(u[4]=f=>a.value.maxHeight=f),placeholder:"e.g., 1080"},null,8,["modelValue"])])],64)):Wr("",!0),l.exportType==="jpg"?(ft(),gt("div",B8,[u[14]||(u[14]=_e("label",{for:"export-quality"},"JPG Quality (0 to 1):",-1)),Un(_e("input",{id:"export-quality",type:"range","onUpdate:modelValue":u[5]||(u[5]=f=>a.value.quality=f),min:"0",max:"1",step:"0.01"},null,512),[[jB,a.value.quality,void 0,{number:!0}]]),_e("span",null,Ar(a.value.quality.toFixed(2)),1)])):Wr("",!0)])]),footer:ht(()=>[ot(rr,{onClick:u[6]||(u[6]=f=>l.$emit("close")),type:"secondary"},{default:ht(()=>u[15]||(u[15]=[At("Cancel")])),_:1,__:[15]}),ot(rr,{onClick:o,type:"primary"},{default:ht(()=>u[16]||(u[16]=[At("Export")])),_:1,__:[16]})]),_:1},8,["is-open"]))}}),z8=an(q8,[["__scopeId","data-v-01dc89bb"]]),G8=Ec("ui",()=>{const t=Ct(localStorage.getItem("doodlebugs-activeRightTab")||"properties"),e=Ct(localStorage.getItem("doodlebugs-isRightTabPinned")==="true"),r=Ct(parseInt(localStorage.getItem("doodlebugs-leftSidebarWidth")||"330")),n=Ct(parseInt(localStorage.getItem("doodlebugs-rightSidebarWidth")||"320"));return wr(t,o=>{localStorage.setItem("doodlebugs-activeRightTab",o)}),wr(e,o=>{localStorage.setItem("doodlebugs-isRightTabPinned",o.toString())}),wr(r,o=>{localStorage.setItem("doodlebugs-leftSidebarWidth",o.toString())}),wr(n,o=>{localStorage.setItem("doodlebugs-rightSidebarWidth",o.toString())}),{activeRightTab:t,isRightTabPinned:e,setActiveRightTab:o=>{t.value=o},toggleRightTabPinned:()=>{e.value=!e.value},leftSidebarWidth:r,rightSidebarWidth:n}}),H8={class:"main-layout"},U8={class:"content-area"},W8={class:"vertical-tabs-container"},V8={class:"graph-editor-wrapper"},$8={class:"tabs-header"},Y8={class:"tab-buttons"},X8={class:"tabs-content"},K8={class:"tab-pane"},j8={class:"tab-pane"},Z8={class:"tab-pane"},Q8=qr({__name:"MainLayout",setup(t){const e=SO(),r=_o(),n=G8(),{selectedElement:a,updateElement:i,deleteElement:o}=nw(),{getCyInstance:l}=rw(),u=Ct("project"),f=Ct(!0),c=Ct(!0),h=Ct("select"),g=Ct("stochastic"),p=Ct(!0),y=Ct(20),C=Ct(!1),E=Ct(!1),v=Ct(!1),x=Ct(""),w=Ct(!1),T=Ct(""),A=Ct(!1),_=Ct(!1),D=Ct(null);Sa(()=>{e.loadProjects();const ie=localStorage.getItem("doodlebugs-currentGraphId");if(ie){const ue=e.currentProject;ue&&ue.graphs.some(me=>me.id===ie)&&r.selectGraph(ie)}});const P=sr(()=>{var ie;return((ie=e.currentProject)==null?void 0:ie.name)||null}),N=sr(()=>{if(e.currentProject&&r.currentGraphId){const ie=e.currentProject.graphs.find(ue=>ue.id===r.currentGraphId);return(ie==null?void 0:ie.name)||null}return null}),B=ie=>{u.value===ie&&f.value?f.value=!1:(f.value=!0,u.value=ie)},G=()=>{f.value=!f.value},F=()=>{c.value=!c.value},z=sr(()=>({width:f.value?`${n.leftSidebarWidth}px`:"var(--vertical-tab-width)",transition:C.value?"none":"width 0.3s ease-in-out"})),M=sr(()=>({width:`${n.leftSidebarWidth-50}px`,opacity:f.value?"1":"0",pointerEvents:f.value?"auto":"none"})),R=sr(()=>({width:c.value?`${n.rightSidebarWidth}px`:"0",opacity:c.value?"1":"0",pointerEvents:c.value?"auto":"none",borderLeft:c.value?"1px solid var(--color-border)":"none",transition:E.value?"none":"width 0.3s ease-in-out, opacity 0.3s ease-in-out"})),k=()=>{C.value=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",I),window.addEventListener("mouseup",re)},I=ie=>{if(C.value){const ue=ie.clientX;n.leftSidebarWidth=Math.max(250,Math.min(ue,600))}},q=()=>{E.value=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",ae),window.addEventListener("mouseup",re)},ae=ie=>{if(E.value){const ue=window.innerWidth-ie.clientX;n.rightSidebarWidth=Math.max(280,Math.min(ue,600))}},re=()=>{C.value=!1,E.value=!1,document.body.style.cursor="",document.body.style.userSelect="",window.removeEventListener("mousemove",I),window.removeEventListener("mousemove",ae),window.removeEventListener("mouseup",re)};Aa(()=>{re()});const K=ie=>{a.value=ie,ie&&!n.isRightTabPinned&&n.setActiveRightTab("properties")},W=ie=>{i(ie)},Z=ie=>{o(ie)},U=ie=>{ie==="add-edge"?h.value="add-edge":(h.value="add-node",g.value=ie),f.value=!1},V=()=>{x.value.trim()&&(e.createProject(x.value.trim()),v.value=!1,x.value="",u.value="project",f.value=!0)},X=()=>{e.currentProject&&T.value.trim()&&(e.addGraphToProject(e.currentProject.id,T.value.trim()),w.value=!1,T.value="")},ee=()=>{r.currentGraphId?r.saveGraph(r.currentGraphId,r.graphContents.get(r.currentGraphId)):console.warn("No graph currently selected to save.")},se=(ie,ue)=>{const me=URL.createObjectURL(ie),ge=document.createElement("a");ge.href=me,ge.download=ue,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(me)},te=()=>{if(!r.currentGraphId){alert("Please select a graph to export.");return}const ie=r.currentGraphElements,ue=JSON.stringify(ie,null,2),me=new Blob([ue],{type:"application/json"}),ge=`${N.value||"graph"}.json`;se(me,ge)},oe=ie=>{if(!r.currentGraphId){alert("Please select a graph to export.");return}D.value=ie,_.value=!0},le=ie=>{const ue=l();if(!ue||!D.value)return;const me=`${N.value||"graph"}.${D.value}`;try{let ge;if(D.value==="svg"){const Ee=ue.svg(ie);ge=new Blob([Ee],{type:"image/svg+xml;charset=utf-8"})}else D.value==="jpg"?ge=ue.jpg({...ie,output:"blob"}):ge=ue.png({...ie,output:"blob"});se(ge,me)}catch(ge){console.error(`Failed to export ${D.value}:`,ge),alert("An error occurred while exporting the graph. Please check the console.")}},$=ie=>{const ue=l();if(!ue)return;const me={name:ie,animate:!0,padding:50,fit:!0,...ie==="dagre"&&{rankDir:"TB",spacingFactor:1.2},...ie==="fcose"&&{idealEdgeLength:120,nodeSeparation:150,nodeRepulsion:4500,quality:"proof"}},ge=ue.layout(me);ge.on("layoutstop",()=>{ue.nodes().map(he=>{const de=r.currentGraphElements.find(be=>be.id===he.id()&&be.type==="node");return de?{...de,position:he.position()}:null}).filter(he=>he!==null).forEach(he=>i(he))}),ge.run()},ne=async ie=>{if(!e.currentProjectId){alert("Please create or select a project before loading an example.");return}try{const me=`/JuliaBUGS.jl/DoodleBUGS/pr-previews/347/examples/${ie}/model.json`,ge=await fetch(me);if(!ge.ok)throw new Error(`Could not fetch example: ${ge.statusText}`);const Ee=await ge.json(),he=e.addGraphToProject(e.currentProjectId,Ee.name);he&&r.updateGraphElements(he.id,Ee.graphJSON),setTimeout(()=>$("dagre"),100)}catch(ue){console.error("Failed to load example model:",ue),alert("Failed to load the example model. See console for details.")}};return wr(a,ie=>{console.log("Selected element changed in MainLayout:",ie)},{deep:!0}),(ie,ue)=>(ft(),gt("div",H8,[ot(_8,{"project-name":P.value,"active-graph-name":N.value,"is-grid-enabled":p.value,"onUpdate:isGridEnabled":ue[0]||(ue[0]=me=>p.value=me),"grid-size":y.value,"onUpdate:gridSize":ue[1]||(ue[1]=me=>y.value=me),"current-mode":h.value,"onUpdate:currentMode":ue[2]||(ue[2]=me=>h.value=me),"current-node-type":g.value,"onUpdate:currentNodeType":ue[3]||(ue[3]=me=>g.value=me),"is-left-sidebar-open":f.value,"is-right-sidebar-open":c.value,onToggleLeftSidebar:G,onToggleRightSidebar:F,onNewProject:ue[4]||(ue[4]=me=>v.value=!0),onNewGraph:ue[5]||(ue[5]=me=>w.value=!0),onSaveCurrentGraph:ee,onOpenAboutModal:ue[6]||(ue[6]=me=>A.value=!0),onExportJson:te,onOpenExportModal:oe,onApplyLayout:$,onLoadExample:ne},null,8,["project-name","active-graph-name","is-grid-enabled","grid-size","current-mode","current-node-type","is-left-sidebar-open","is-right-sidebar-open"]),_e("div",U8,[_e("aside",{class:"left-sidebar",style:xi(z.value)},[_e("div",W8,[_e("button",{class:cr({active:u.value==="project"}),onClick:ue[7]||(ue[7]=me=>B("project")),title:"Project Manager"},[ue[26]||(ue[26]=_e("i",{class:"fas fa-folder"},null,-1)),ue[27]||(ue[27]=At()),Un(_e("span",null,"Project",512),[[qa,f.value]])],2),_e("button",{class:cr({active:u.value==="palette"}),onClick:ue[8]||(ue[8]=me=>B("palette")),title:"Node Palette"},[ue[28]||(ue[28]=_e("i",{class:"fas fa-shapes"},null,-1)),ue[29]||(ue[29]=At()),Un(_e("span",null,"Palette",512),[[qa,f.value]])],2),_e("button",{class:cr({active:u.value==="data"}),onClick:ue[9]||(ue[9]=me=>B("data")),title:"Data Input"},[ue[30]||(ue[30]=_e("i",{class:"fas fa-database"},null,-1)),ue[31]||(ue[31]=At()),Un(_e("span",null,"Data",512),[[qa,f.value]])],2)]),_e("div",{class:"left-sidebar-content",style:xi(M.value)},[Un(_e("div",null,[ot(p9,{onNewProject:ue[10]||(ue[10]=me=>v.value=!0),onNewGraph:ue[11]||(ue[11]=me=>w.value=!0)})],512),[[qa,u.value==="project"]]),Un(_e("div",null,[ot(A9,{onSelectPaletteItem:U})],512),[[qa,u.value==="palette"]]),Un(_e("div",null,[ot(N9)],512),[[qa,u.value==="data"]])],4)],4),_e("div",{class:"resizer resizer-left",onMousedown:kr(k,["prevent"])},null,32),_e("main",V8,[ot(j$,{"is-grid-enabled":p.value,"grid-size":y.value,"current-mode":h.value,elements:ir(r).currentGraphElements,"current-node-type":g.value,"onUpdate:currentMode":ue[12]||(ue[12]=me=>h.value=me),"onUpdate:currentNodeType":ue[13]||(ue[13]=me=>g.value=me),onElementSelected:K},null,8,["is-grid-enabled","grid-size","current-mode","elements","current-node-type"])]),_e("div",{class:"resizer resizer-right",onMousedown:kr(q,["prevent"])},null,32),_e("aside",{class:"right-sidebar",style:xi(R.value)},[_e("div",$8,[_e("div",Y8,[_e("button",{class:cr({active:ir(n).activeRightTab==="properties"}),onClick:ue[14]||(ue[14]=me=>ir(n).setActiveRightTab("properties"))},"Properties",2),_e("button",{class:cr({active:ir(n).activeRightTab==="code"}),onClick:ue[15]||(ue[15]=me=>ir(n).setActiveRightTab("code"))},"Code",2),_e("button",{class:cr({active:ir(n).activeRightTab==="json"}),onClick:ue[16]||(ue[16]=me=>ir(n).setActiveRightTab("json"))},"JSON",2)]),_e("button",{onClick:ue[17]||(ue[17]=me=>ir(n).toggleRightTabPinned()),class:cr(["pin-button",{pinned:ir(n).isRightTabPinned}]),title:"Pin Tab"},ue[32]||(ue[32]=[_e("i",{class:"fas fa-thumbtack"},null,-1)]),2)]),_e("div",X8,[Un(_e("div",K8,[ot(Q9,{"selected-element":ir(a),onUpdateElement:W,onDeleteElement:Z},null,8,["selected-element"])],512),[[qa,ir(n).activeRightTab==="properties"]]),Un(_e("div",j8,[ot(o8)],512),[[qa,ir(n).activeRightTab==="code"]]),Un(_e("div",Z8,[ot(y8)],512),[[qa,ir(n).activeRightTab==="json"]])])],4)]),ot(Ss,{"is-open":v.value,onClose:ue[20]||(ue[20]=me=>v.value=!1)},{header:ht(()=>ue[33]||(ue[33]=[_e("h3",null,"Create New Project",-1)])),body:ht(()=>[ue[34]||(ue[34]=_e("label",{for:"new-project-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"Project Name:",-1)),ot(Vn,{id:"new-project-name",modelValue:x.value,"onUpdate:modelValue":ue[18]||(ue[18]=me=>x.value=me),placeholder:"Enter project name",onKeyup:qC(V,["enter"])},null,8,["modelValue"])]),footer:ht(()=>[ot(rr,{onClick:ue[19]||(ue[19]=me=>v.value=!1),type:"secondary"},{default:ht(()=>ue[35]||(ue[35]=[At("Cancel")])),_:1,__:[35]}),ot(rr,{onClick:V,type:"primary"},{default:ht(()=>ue[36]||(ue[36]=[At("Create")])),_:1,__:[36]})]),_:1},8,["is-open"]),ot(Ss,{"is-open":w.value,onClose:ue[23]||(ue[23]=me=>w.value=!1)},{header:ht(()=>ue[37]||(ue[37]=[_e("h3",null,"Create New Graph",-1)])),body:ht(()=>[ue[38]||(ue[38]=_e("label",{for:"new-graph-name",style:{display:"block","margin-bottom":"8px","font-weight":"500"}},"Graph Name:",-1)),ot(Vn,{id:"new-graph-name",modelValue:T.value,"onUpdate:modelValue":ue[21]||(ue[21]=me=>T.value=me),placeholder:"Enter graph name",onKeyup:qC(X,["enter"])},null,8,["modelValue"])]),footer:ht(()=>[ot(rr,{onClick:ue[22]||(ue[22]=me=>w.value=!1),type:"secondary"},{default:ht(()=>ue[39]||(ue[39]=[At("Cancel")])),_:1,__:[39]}),ot(rr,{onClick:X,type:"primary"},{default:ht(()=>ue[40]||(ue[40]=[At("Create")])),_:1,__:[40]})]),_:1},8,["is-open"]),ot(R8,{"is-open":A.value,onClose:ue[24]||(ue[24]=me=>A.value=!1)},null,8,["is-open"]),ot(z8,{"is-open":_.value,"export-type":D.value,onClose:ue[25]||(ue[25]=me=>_.value=!1),onConfirmExport:le},null,8,["is-open","export-type"])]))}}),J8=an(Q8,[["__scopeId","data-v-b117a14d"]]),eY=qr({__name:"App",setup(t){return(e,r)=>(ft(),Ka(J8))}}),LO=nq(eY);LO.use(oq());LO.mount("#app");
